/*! For license information please see 2.340f1d88.chunk.js.LICENSE.txt */
(this["webpackJsonpless-react"]=this["webpackJsonpless-react"]||[]).push([[2],[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(317)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(158);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(22),i=n(40);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!==typeof e?Object(i.a)(t):e}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return c}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function c(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}},function(t,e,n){"use strict";t.exports=n(417)},function(t,e,n){"use strict";t.exports=n(416)},function(t,e,n){"use strict";n.d(e,"d",(function(){return r.a})),n.d(e,"k",(function(){return r.c})),n.d(e,"i",(function(){return r.b})),n.d(e,"l",(function(){return r.d})),n.d(e,"a",(function(){return l})),n.d(e,"j",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"h",(function(){return a.i})),n.d(e,"c",(function(){return a.c})),n.d(e,"b",(function(){return a.b})),n.d(e,"f",(function(){return a.g})),n.d(e,"g",(function(){return a.h}));n(312);var r=n(124),i=n(100),o=n(36),a=n(25),s=Object(o.isBrowser)(),u=s&&"undefined"!==typeof document,c={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(s,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var e,n=t=Object.assign({},c,t),r=n.width,i=n.height;function o(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}t.onError=o;var u=t,l=u.canvas,h=d({canvas:l,width:r,height:i,onError:o});return(e=p(h,t))?(g(e=f(e,t)),e):null}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||y(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var n=e=Object.assign({},c,e),r=n.manageState,u=n.debug;return r&&Object(i.a)(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a.i.log.apply(a.i,[1].concat(e))()}}),s&&u&&(o.global.makeDebugContext?(t=o.global.makeDebugContext(t,e),a.i.level=Math.max(a.i.level,1)):a.i.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){var n=Object(a.e)(e.useDevicePixels);v(t,n,e)}else{var r=t.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in e&&"height"in e&&r.resize(e.width,e.height)}}function p(t,e){var n=e.onError,r=null,i=function(t){return r=t.statusMessage||r};t.addEventListener("webglcontextcreationerror",i,!1);var o=e.webgl1,a=void 0===o||o,s=e.webgl2,u=void 0===s||s,c=null;return u&&(c=(c=c||t.getContext("webgl2",e))||t.getContext("experimental-webgl2",e)),a&&(c=(c=c||t.getContext("webgl",e))||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),c||n("Failed to create ".concat(u&&!a?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function d(t){var e,n=t.canvas,r=t.width,i=void 0===r?800:r,o=t.height,a=void 0===o?600:o,s=t.onError;"string"===typeof n?(u&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):n?e=n:((e=document.createElement("canvas")).id="lumagl-canvas",e.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",e.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}function g(t){var e=Object(a.h)(t)?"WebGL2":"WebGL1",n=function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";a.i.info(1,"".concat(e).concat(i," context ").concat(r))()}function y(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function v(t,e,n){var r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(a.i.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){var s=e,u=Math.floor(r*s),c=Math.floor(i*s);t.canvas.width=u,t.canvas.height=c,t.drawingBufferWidth===u&&t.drawingBufferHeight===c||(a.i.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*s),t.canvas.height=Math.floor(i*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(239);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";n.r(e);var r=n(38);n.d(e,"Vector2",(function(){return r.d})),n.d(e,"Vector3",(function(){return r.e})),n.d(e,"Vector4",(function(){return r.f})),n.d(e,"Matrix3",(function(){return r.a})),n.d(e,"Matrix4",(function(){return r.b})),n.d(e,"Quaternion",(function(){return r.c})),n.d(e,"config",(function(){return r.r})),n.d(e,"configure",(function(){return r.s})),n.d(e,"formatValue",(function(){return r.x})),n.d(e,"isArray",(function(){return r.y})),n.d(e,"clone",(function(){return r.q})),n.d(e,"equals",(function(){return r.v})),n.d(e,"exactEquals",(function(){return r.w})),n.d(e,"toRadians",(function(){return r.E})),n.d(e,"toDegrees",(function(){return r.D})),n.d(e,"radians",(function(){return r.A})),n.d(e,"degrees",(function(){return r.u})),n.d(e,"sin",(function(){return r.B})),n.d(e,"cos",(function(){return r.t})),n.d(e,"tan",(function(){return r.C})),n.d(e,"asin",(function(){return r.l})),n.d(e,"acos",(function(){return r.k})),n.d(e,"atan",(function(){return r.n})),n.d(e,"clamp",(function(){return r.p})),n.d(e,"lerp",(function(){return r.z})),n.d(e,"withEpsilon",(function(){return r.F})),n.d(e,"checkNumber",(function(){return r.o})),n.d(e,"_MathUtils",(function(){return r.h})),n.d(e,"_SphericalCoordinates",(function(){return r.j})),n.d(e,"_Pose",(function(){return r.i})),n.d(e,"_Euler",(function(){return r.g})),n.d(e,"assert",(function(){return r.m}))},function(t,e,n){t.exports=n(422)()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3);function i(t,e,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return q})),n.d(e,"e",(function(){return W})),n.d(e,"f",(function(){return Y})),n.d(e,"g",(function(){return R})),n.d(e,"h",(function(){return k})),n.d(e,"i",(function(){return A})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return E})),n.d(e,"l",(function(){return I})),n.d(e,"m",(function(){return T})),n.d(e,"n",(function(){return P})),n.d(e,"o",(function(){return C})),n.d(e,"p",(function(){return f})),n.d(e,"q",(function(){return tt})),n.d(e,"r",(function(){return w})),n.d(e,"s",(function(){return _})),n.d(e,"t",(function(){return d})),n.d(e,"u",(function(){return y})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return m})),n.d(e,"x",(function(){return K})),n.d(e,"y",(function(){return J})),n.d(e,"z",(function(){return nt})),n.d(e,"A",(function(){return it})),n.d(e,"B",(function(){return ot})),n.d(e,"C",(function(){return H})),n.d(e,"D",(function(){return G})),n.d(e,"E",(function(){return p})),n.d(e,"F",(function(){return b})),n.d(e,"G",(function(){return c})),n.d(e,"H",(function(){return v})),n.d(e,"I",(function(){return $}));var r=n(76),i=n(21),o=n(7),a=n(403),s=n.n(a);n(120);function u(t,e,n,r){if(function(t){return"IntValue"===t.kind}(n)||function(t){return"FloatValue"===t.kind}(n))t[e.value]=Number(n.value);else if(function(t){return"BooleanValue"===t.kind}(n)||function(t){return"StringValue"===t.kind}(n))t[e.value]=n.value;else if(function(t){return"ObjectValue"===t.kind}(n)){var o={};n.fields.map((function(t){return u(o,t.name,t.value,r)})),t[e.value]=o}else if(function(t){return"Variable"===t.kind}(n)){var a=(r||{})[n.name.value];t[e.value]=a}else if(function(t){return"ListValue"===t.kind}(n))t[e.value]=n.values.map((function(t){var n={};return u(n,e,t,r),n[e.value]}));else if(function(t){return"EnumValue"===t.kind}(n))t[e.value]=n.value;else{if(!function(t){return"NullValue"===t.kind}(n))throw new i.a(17);t[e.value]=null}}function c(t,e){var n=null;t.directives&&(n={},t.directives.forEach((function(t){n[t.name.value]={},t.arguments&&t.arguments.forEach((function(r){var i=r.name,o=r.value;return u(n[t.name.value],i,o,e)}))})));var r=null;return t.arguments&&t.arguments.length&&(r={},t.arguments.forEach((function(t){var n=t.name,i=t.value;return u(r,n,i,e)}))),f(t.name.value,r,n)}var l=["connection","include","skip","client","rest","export"];function f(t,e,n){if(n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var i=e,o={};return r.forEach((function(t){o[t]=i[t]})),n.connection.key+"("+JSON.stringify(o)+")"}return n.connection.key}var a=t;if(e){var u=s()(e);a+="("+u+")"}return n&&Object.keys(n).forEach((function(t){-1===l.indexOf(t)&&(n[t]&&Object.keys(n[t]).length?a+="@"+t+"("+JSON.stringify(n[t])+")":a+="@"+t)})),a}function h(t,e){if(t.arguments&&t.arguments.length){var n={};return t.arguments.forEach((function(t){var r=t.name,i=t.value;return u(n,r,i,e)})),n}return null}function p(t){return t.alias?t.alias.value:t.name.value}function d(t){return"Field"===t.kind}function g(t){return"InlineFragment"===t.kind}function y(t){return t&&"id"===t.type&&"boolean"===typeof t.generated}function v(t,e){return void 0===e&&(e=!1),Object(o.a)({type:"id",generated:e},"string"===typeof t?{id:t,typename:void 0}:t)}function m(t){return null!=t&&"object"===typeof t&&"json"===t.type}function A(t,e){if(t.directives&&t.directives.length){var n={};return t.directives.forEach((function(t){n[t.name.value]=h(t,e)})),n}return null}function b(t,e){return void 0===e&&(e={}),(n=t.directives,n?n.filter(x).map((function(t){var e=t.arguments;t.name.value,Object(i.b)(e&&1===e.length,14);var n=e[0];Object(i.b)(n.name&&"if"===n.name.value,15);var r=n.value;return Object(i.b)(r&&("Variable"===r.kind||"BooleanValue"===r.kind),16),{directive:t,ifArgument:n}})):[]).every((function(t){var n=t.directive,r=t.ifArgument,o=!1;return"Variable"===r.value.kind?(o=e[r.value.name.value],Object(i.b)(void 0!==o,13)):o=r.value.value,"skip"===n.name.value?!o:o}));var n}function _(t,e){return function(t){var e=[];return Object(r.b)(t,{Directive:function(t){e.push(t.name.value)}}),e}(e).some((function(e){return t.indexOf(e)>-1}))}function w(t){return t&&_(["client"],t)&&_(["export"],t)}function x(t){var e=t.name.value;return"skip"===e||"include"===e}function E(t,e){var n=e,r=[];return t.definitions.forEach((function(t){if("OperationDefinition"===t.kind)throw new i.a(11);"FragmentDefinition"===t.kind&&r.push(t)})),"undefined"===typeof n&&(Object(i.b)(1===r.length,12),n=r[0].name.value),Object(o.a)(Object(o.a)({},t),{definitions:Object(o.f)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],t.definitions)})}function O(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach((function(e){"undefined"!==typeof e&&null!==e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}function S(t){Object(i.b)(t&&"Document"===t.kind,2);var e=t.definitions.filter((function(t){return"FragmentDefinition"!==t.kind})).map((function(t){if("OperationDefinition"!==t.kind)throw new i.a(3);return t}));return Object(i.b)(e.length<=1,4),t}function T(t){return S(t),t.definitions.filter((function(t){return"OperationDefinition"===t.kind}))[0]}function P(t){return t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&t.name})).map((function(t){return t.name.value}))[0]||null}function M(t){return t.definitions.filter((function(t){return"FragmentDefinition"===t.kind}))}function C(t){var e=T(t);return Object(i.b)(e&&"query"===e.operation,6),e}function I(t){var e;S(t);for(var n=0,r=t.definitions;n<r.length;n++){var o=r[n];if("OperationDefinition"===o.kind){var a=o.operation;if("query"===a||"mutation"===a||"subscription"===a)return o}"FragmentDefinition"!==o.kind||e||(e=o)}if(e)return e;throw new i.a(10)}function R(t){void 0===t&&(t=[]);var e={};return t.forEach((function(t){e[t.name.value]=t})),e}function k(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter((function(t){return t.defaultValue})).map((function(t){var e=t.variable,n=t.defaultValue,r={};return u(r,e.name,n),r}));return O.apply(void 0,Object(o.f)([{}],e))}return{}}function j(t,e,n){var r=0;return t.forEach((function(n,i){e.call(this,n,i,t)&&(t[r++]=n)}),n),t.length=r,t}var L={kind:"Field",name:{kind:"Name",value:"__typename"}};function N(t,e){return t.selectionSet.selections.every((function(t){return"FragmentSpread"===t.kind&&N(e[t.name.value],e)}))}function D(t){return N(T(t)||function(t){Object(i.b)("Document"===t.kind,7),Object(i.b)(t.definitions.length<=1,8);var e=t.definitions[0];return Object(i.b)("FragmentDefinition"===e.kind,9),e}(t),R(M(t)))?null:t}function F(t){return function(e){return t.some((function(t){return t.name&&t.name===e.name.value||t.test&&t.test(e)}))}}function B(t,e){var n=Object.create(null),i=[],a=Object.create(null),s=[],u=D(Object(r.b)(e,{Variable:{enter:function(t,e,r){"VariableDefinition"!==r.kind&&(n[t.name.value]=!0)}},Field:{enter:function(e){if(t&&e.directives&&(t.some((function(t){return t.remove}))&&e.directives&&e.directives.some(F(t))))return e.arguments&&e.arguments.forEach((function(t){"Variable"===t.value.kind&&i.push({name:t.value.name.value})})),e.selectionSet&&V(e.selectionSet).forEach((function(t){s.push({name:t.name.value})})),null}},FragmentSpread:{enter:function(t){a[t.name.value]=!0}},Directive:{enter:function(e){if(F(t)(e))return null}}}));return u&&j(i,(function(t){return!n[t.name]})).length&&(u=function(t,e){var n=function(t){return function(e){return t.some((function(t){return e.value&&"Variable"===e.value.kind&&e.value.name&&(t.name===e.value.name.value||t.test&&t.test(e))}))}}(t);return D(Object(r.b)(e,{OperationDefinition:{enter:function(e){return Object(o.a)(Object(o.a)({},e),{variableDefinitions:e.variableDefinitions.filter((function(e){return!t.some((function(t){return t.name===e.variable.name.value}))}))})}},Field:{enter:function(e){if(t.some((function(t){return t.remove}))){var r=0;if(e.arguments.forEach((function(t){n(t)&&(r+=1)})),1===r)return null}}},Argument:{enter:function(t){if(n(t))return null}}}))}(i,u)),u&&j(s,(function(t){return!a[t.name]})).length&&(u=function(t,e){function n(e){if(t.some((function(t){return t.name===e.name.value})))return null}return D(Object(r.b)(e,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}(s,u)),u}function z(t){return Object(r.b)(S(t),{SelectionSet:{enter:function(t,e,n){if(!n||"OperationDefinition"!==n.kind){var r=t.selections;if(r)if(!r.some((function(t){return d(t)&&("__typename"===t.name.value||0===t.name.value.lastIndexOf("__",0))}))){var i=n;if(!(d(i)&&i.directives&&i.directives.some((function(t){return"export"===t.name.value}))))return Object(o.a)(Object(o.a)({},t),{selections:Object(o.f)(r,[L])})}}}}})}var U={test:function(t){var e="connection"===t.name.value;return e&&(!t.arguments||t.arguments.some((function(t){return"key"===t.name.value}))),e}};function G(t){return B([U],S(t))}function V(t){var e=[];return t.selections.forEach((function(t){(d(t)||g(t))&&t.selectionSet?V(t.selectionSet).forEach((function(t){return e.push(t)})):"FragmentSpread"===t.kind&&e.push(t)})),e}function q(t){return"query"===I(t).operation?t:Object(r.b)(t,{OperationDefinition:{enter:function(t){return Object(o.a)(Object(o.a)({},t),{operation:"query"})}}})}function H(t){S(t);var e=B([{test:function(t){return"client"===t.name.value},remove:!0}],t);return e&&(e=Object(r.b)(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet&&t.selectionSet.selections.every((function(t){return d(t)&&"__typename"===t.name.value})))return null}}})),e}var W="function"===typeof WeakMap&&!("object"===typeof navigator&&"ReactNative"===navigator.product),X=Object.prototype.toString;function Y(t){return Q(t,new Map)}function Q(t,e){switch(X.call(t)){case"[object Array]":if(e.has(t))return e.get(t);var n=t.slice(0);return e.set(t,n),n.forEach((function(t,r){n[r]=Q(t,e)})),n;case"[object Object]":if(e.has(t))return e.get(t);var r=Object.create(Object.getPrototypeOf(t));return e.set(t,r),Object.keys(t).forEach((function(n){r[n]=Q(t[n],e)})),r;default:return t}}function Z(e){return("undefined"!==typeof t?"production":"development")===e}function K(){return!0===Z("production")}function J(){return!0===Z("test")}function $(t){try{return t()}catch(e){console.error&&console.error(e)}}function tt(t){return t.errors&&t.errors.length}function et(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(e){null===t[e]||"object"!==typeof t[e]&&"function"!==typeof t[e]||Object.isFrozen(t[e])||et(t[e])})),t}function nt(t){if((!0===Z("development")||J())&&!("function"===typeof Symbol&&"string"===typeof Symbol("")))return et(t);return t}var rt=Object.prototype.hasOwnProperty;function it(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ot(t)}function ot(t){var e=t[0]||{},n=t.length;if(n>1){var r=[];e=ut(e,r);for(var i=1;i<n;++i)e=st(e,t[i],r)}return e}function at(t){return null!==t&&"object"===typeof t}function st(t,e,n){return at(e)&&at(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=ut(t,n)),Object.keys(e).forEach((function(r){var i=e[r];if(rt.call(t,r)){var o=t[r];i!==o&&(t[r]=st(ut(o,n),i,n))}else t[r]=i})),t):e}function ut(t,e){return null!==t&&"object"===typeof t&&e.indexOf(t)<0&&(t=Array.isArray(t)?t.slice(0):Object(o.a)({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}Object.create({})}).call(this,n(78))},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o}));var r=1e-6,i="undefined"!==typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(190);var i=n(239);function o(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"l",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return y}));var r=6371008.8,i={meters:r,metres:r,millimeters:1e3*r,millimetres:1e3*r,centimeters:100*r,centimetres:100*r,kilometers:r/1e3,kilometres:r/1e3,miles:r/1609.344,nauticalmiles:r/1852,inches:39.37*r,yards:r/1.0936,feet:3.28084*r,radians:1,degrees:r/111325};function o(t,e,n){if(!y(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&v(r),i&&m(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!g(t[0])||!g(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function s(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++){if(0===r&&0===a&&!g(i[0][0])||!g(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}}return o({type:"Polygon",coordinates:t},e,n)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!g(t[0][1])||!g(t[0][1]))throw new Error("coordinates must contain numbers");return o({type:"LineString",coordinates:t},e,n)}function c(t,e){if(!y(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&v(n),r&&m(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function l(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!==typeof e)throw new Error("units must be a string");var n=i[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function f(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!==typeof e)throw new Error("units must be a string");var n=i[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function h(t){if(null===t||void 0===t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function p(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function d(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return l(f(t,e),n||"kilometers")}function g(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function y(t){return!!t&&t.constructor===Object}function v(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!g(t))throw new Error("bbox must only contain numbers")}))}function m(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){"use strict";n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return p})),n.d(e,"e",(function(){return d})),n.d(e,"s",(function(){return y})),n.d(e,"r",(function(){return v})),n.d(e,"o",(function(){return m})),n.d(e,"i",(function(){return A})),n.d(e,"p",(function(){return b})),n.d(e,"h",(function(){return _})),n.d(e,"q",(function(){return w})),n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return E})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return S})),n.d(e,"n",(function(){return T})),n.d(e,"j",(function(){return P})),n.d(e,"k",(function(){return M})),n.d(e,"t",(function(){return C}));var r=n(22),i=n(168),o=n(18),a=n(72),s=1/Math.PI*180,u=1/180*Math.PI,c={};function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in t)Object(a.a)(e in c),c[e]=t[e];return c}function f(t){return Math.round(t/c.EPSILON)*c.EPSILON}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,r=void 0===n?c.precision||4:n;return t=f(t),"".concat(parseFloat(t.toPrecision(r)))}function p(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function d(t){return t.clone?t.clone():Object(i.a)(Array,Object(o.a)(t))}function g(t,e,n){if(p(t)){n=n||((i=t).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}var i;return e(t)}function y(t){return m(t)}function v(t){return A(t)}function m(t,e){return g(t,(function(t){return t*u}),e)}function A(t,e){return g(t,(function(t){return t*s}),e)}function b(t){return g(t,(function(t){return Math.sin(t)}))}function _(t){return g(t,(function(t){return Math.cos(t)}))}function w(t){return g(t,(function(t){return Math.tan(t)}))}function x(t){return g(t,(function(t){return Math.asin(t)}))}function E(t){return g(t,(function(t){return Math.acos(t)}))}function O(t){return g(t,(function(t){return Math.atan(t)}))}function S(t,e,n){return g(t,(function(t){return Math.max(e,Math.min(n,t))}))}function T(t,e,n){return p(t)?t.map((function(t,r){return T(t,e[r],n)})):n*e+(1-n)*t}function P(t,e,n){var r=c.EPSILON;n&&(c.EPSILON=n);try{if(t===e)return!0;if(p(t)&&p(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!P(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=c.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{c.EPSILON=r}}function M(t,e){if(t===e)return!0;if(t&&"object"===Object(r.a)(t)&&e&&"object"===Object(r.a)(e)){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(p(t)&&p(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!M(t[n],e[n]))return!1;return!0}return!1}function C(t,e){var n,r=c.EPSILON;c.EPSILON=t;try{n=e()}finally{c.EPSILON=r}return n}c.EPSILON=1e-12,c.debug=!1,c.precision=4,c.printTypes=!1,c.printDegrees=!1,c.printRowMajor=!0},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(7),i="Invariant Violation",o=Object.setPrototypeOf,a=void 0===o?function(t,e){return t.__proto__=e,t}:o,s=function(t){function e(n){void 0===n&&(n=i);var r=t.call(this,"number"===typeof n?i+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=i,a(r,e.prototype),r}return Object(r.c)(e,t),e}(Error);function u(t,e){if(!t)throw new s(e)}function c(t){return function(){return console[t].apply(console,arguments)}}!function(t){t.warn=c("warn"),t.error=c("error")}(u||(u={}));var l={env:{}};if("object"===typeof t)l=t;else try{Function("stub","process = stub")(l)}catch(f){}}).call(this,n(78))},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n(20);function i(t,e){if(t.length!==e)return!1;for(var n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function o(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(r.f.debug&&!i(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}var s={};function u(t,e){s[t]||(s[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(26),i={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(i,"IDENTITY",{get:function(){return r.a.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var o={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},a={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return g}));var r=n(632);function i(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function o(t){for(var e in t)return!1;return!0}function a(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function s(t){if(t.canvas&&t.luma){var e=t.luma.canvasSizeInfo.clientWidth;return e?t.drawingBufferWidth/e:1}return 1}function u(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=s(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return l(e,r,i,o,n)}function c(t){var e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function l(t,e,n,r,i){var o,a=f(t[0],e,n),s=h(t[1],e,r,i),u=f(t[0]+1,e,n),c=u===n-1?u:u-1;return u=h(t[1]+1,e,r,i),i?(o=s,s=u=0===u?u:u+1):o=u===r-1?u:u-1,{x:a,y:s,width:Math.max(c-a+1,1),height:Math.max(o-s+1,1)}}function f(t,e,n){return Math.min(Math.round(t*e),n-1)}function h(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}function p(t){return Boolean(t&&Number.isFinite(t._version))}function d(t){return Boolean(t&&2===t._version)}var g=new r.a({id:"luma.gl"})},function(t,e,n){"use strict";var r=n(632);e.a=new r.a({id:"deck"})},function(t,e,n){"use strict";n.d(e,"q",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"p",(function(){return u})),n.d(e,"o",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return f})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return p})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return y})),n.d(e,"j",(function(){return v})),n.d(e,"i",(function(){return m})),n.d(e,"g",(function(){return A})),n.d(e,"b",(function(){return b}));var r=n(17);function i(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function o(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],g=e[13],y=e[14],v=e[15],m=n*s-r*a,A=n*u-i*a,b=n*c-o*a,_=r*u-i*s,w=r*c-o*s,x=i*c-o*u,E=l*g-f*d,O=l*y-h*d,S=l*v-p*d,T=f*y-h*g,P=f*v-p*g,M=h*v-p*y,C=m*M-A*P+b*T+_*S-w*O+x*E;return C?(C=1/C,t[0]=(s*M-u*P+c*T)*C,t[1]=(i*P-r*M-o*T)*C,t[2]=(g*x-y*w+v*_)*C,t[3]=(h*w-f*x-p*_)*C,t[4]=(u*S-a*M-c*O)*C,t[5]=(n*M-i*S+o*O)*C,t[6]=(y*b-d*x-v*A)*C,t[7]=(l*x-h*b+p*A)*C,t[8]=(a*P-s*S+c*E)*C,t[9]=(r*S-n*P-o*E)*C,t[10]=(d*w-g*b+v*m)*C,t[11]=(f*b-l*w-p*m)*C,t[12]=(s*O-a*T-u*E)*C,t[13]=(n*T-r*O+i*E)*C,t[14]=(g*A-d*_-y*m)*C,t[15]=(l*_-f*A+h*m)*C,t):null}function a(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],g=t[14],y=t[15];return(e*a-n*o)*(f*y-h*g)-(e*s-r*o)*(l*y-h*d)+(e*u-i*o)*(l*g-f*d)+(n*s-r*a)*(c*y-h*p)-(n*u-i*a)*(c*g-f*p)+(r*u-i*s)*(c*d-l*p)}function s(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],g=e[12],y=e[13],v=e[14],m=e[15],A=n[0],b=n[1],_=n[2],w=n[3];return t[0]=A*r+b*s+_*f+w*g,t[1]=A*i+b*u+_*h+w*y,t[2]=A*o+b*c+_*p+w*v,t[3]=A*a+b*l+_*d+w*m,A=n[4],b=n[5],_=n[6],w=n[7],t[4]=A*r+b*s+_*f+w*g,t[5]=A*i+b*u+_*h+w*y,t[6]=A*o+b*c+_*p+w*v,t[7]=A*a+b*l+_*d+w*m,A=n[8],b=n[9],_=n[10],w=n[11],t[8]=A*r+b*s+_*f+w*g,t[9]=A*i+b*u+_*h+w*y,t[10]=A*o+b*c+_*p+w*v,t[11]=A*a+b*l+_*d+w*m,A=n[12],b=n[13],_=n[14],w=n[15],t[12]=A*r+b*s+_*f+w*g,t[13]=A*i+b*u+_*h+w*y,t[14]=A*o+b*c+_*p+w*v,t[15]=A*a+b*l+_*d+w*m,t}function u(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,g=n[0],y=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*v+e[12],t[13]=e[1]*g+e[5]*y+e[9]*v+e[13],t[14]=e[2]*g+e[6]*y+e[10]*v+e[14],t[15]=e[3]*g+e[7]*y+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*g+s*y+f*v+e[12],t[13]=i*g+u*y+h*v+e[13],t[14]=o*g+c*y+p*v+e[14],t[15]=a*g+l*y+d*v+e[15]),t}function c(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l(t,e,n,i){var o,a,s,u,c,l,f,h,p,d,g,y,v,m,A,b,_,w,x,E,O,S,T,P,M=i[0],C=i[1],I=i[2],R=Math.hypot(M,C,I);return R<r.b?null:(M*=R=1/R,C*=R,I*=R,o=Math.sin(n),s=1-(a=Math.cos(n)),u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],p=e[5],d=e[6],g=e[7],y=e[8],v=e[9],m=e[10],A=e[11],b=M*M*s+a,_=C*M*s+I*o,w=I*M*s-C*o,x=M*C*s-I*o,E=C*C*s+a,O=I*C*s+M*o,S=M*I*s+C*o,T=C*I*s-M*o,P=I*I*s+a,t[0]=u*b+h*_+y*w,t[1]=c*b+p*_+v*w,t[2]=l*b+d*_+m*w,t[3]=f*b+g*_+A*w,t[4]=u*x+h*E+y*O,t[5]=c*x+p*E+v*O,t[6]=l*x+d*E+m*O,t[7]=f*x+g*E+A*O,t[8]=u*S+h*T+y*P,t[9]=c*S+p*T+v*P,t[10]=l*S+d*T+m*P,t[11]=f*S+g*T+A*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function f(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function h(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}function p(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function g(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,g=o*a,y=o*s,v=o*u;return t[0]=1-f-d,t[1]=l+v,t[2]=h-y,t[3]=0,t[4]=l-v,t[5]=1-c-d,t[6]=p+g,t[7]=0,t[8]=h+y,t[9]=p-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function v(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function m(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function A(t,e,n,i){var o,a,s,u,c,l,f,h,p,d,g=e[0],y=e[1],v=e[2],m=i[0],A=i[1],b=i[2],_=n[0],w=n[1],x=n[2];return Math.abs(g-_)<r.b&&Math.abs(y-w)<r.b&&Math.abs(v-x)<r.b?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(f=g-_,h=y-w,p=v-x,o=A*(p*=d=1/Math.hypot(f,h,p))-b*(h*=d),a=b*(f*=d)-m*p,s=m*h-A*f,(d=Math.hypot(o,a,s))?(o*=d=1/d,a*=d,s*=d):(o=0,a=0,s=0),u=h*s-p*a,c=p*o-f*s,l=f*a-h*o,(d=Math.hypot(u,c,l))?(u*=d=1/d,c*=d,l*=d):(u=0,c=0,l=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(o*g+a*y+s*v),t[13]=-(u*g+c*y+l*v),t[14]=-(f*g+h*y+p*v),t[15]=1,t)}function b(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],g=t[12],y=t[13],v=t[14],m=t[15],A=e[0],b=e[1],_=e[2],w=e[3],x=e[4],E=e[5],O=e[6],S=e[7],T=e[8],P=e[9],M=e[10],C=e[11],I=e[12],R=e[13],k=e[14],j=e[15];return Math.abs(n-A)<=r.b*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(i-b)<=r.b*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-_)<=r.b*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-w)<=r.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-x)<=r.b*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-E)<=r.b*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-O)<=r.b*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-S)<=r.b*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-T)<=r.b*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-P)<=r.b*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-M)<=r.b*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(d-C)<=r.b*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(g-I)<=r.b*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-R)<=r.b*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(v-k)<=r.b*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(m-j)<=r.b*Math.max(1,Math.abs(m),Math.abs(j))}},function(t,e,n){"use strict";n.r(e),n.d(e,"COORDINATE_SYSTEM",(function(){return r.a})),n.d(e,"LightingEffect",(function(){return i.a})),n.d(e,"AmbientLight",(function(){return o.a})),n.d(e,"DirectionalLight",(function(){return a.a})),n.d(e,"PointLight",(function(){return d})),n.d(e,"_CameraLight",(function(){return _})),n.d(e,"_SunLight",(function(){return F})),n.d(e,"PostProcessEffect",(function(){return Q})),n.d(e,"_LayersPass",(function(){return $.a})),n.d(e,"Deck",(function(){return tt.a})),n.d(e,"LayerManager",(function(){return et.a})),n.d(e,"AttributeManager",(function(){return nt.a})),n.d(e,"Layer",(function(){return rt.a})),n.d(e,"CompositeLayer",(function(){return it.a})),n.d(e,"DeckRenderer",(function(){return ot.a})),n.d(e,"Viewport",(function(){return at.a})),n.d(e,"WebMercatorViewport",(function(){return st.a})),n.d(e,"_GlobeViewport",(function(){return mt})),n.d(e,"picking",(function(){return bt.a})),n.d(e,"project",(function(){return _t.a})),n.d(e,"project32",(function(){return wt.a})),n.d(e,"gouraudLighting",(function(){return xt.a})),n.d(e,"phongLighting",(function(){return xt.b})),n.d(e,"shadow",(function(){return Et.a})),n.d(e,"View",(function(){return Ot.a})),n.d(e,"MapView",(function(){return St.a})),n.d(e,"FirstPersonView",(function(){return Dt})),n.d(e,"OrbitView",(function(){return Zt})),n.d(e,"OrthographicView",(function(){return ie})),n.d(e,"_GlobeView",(function(){return ge})),n.d(e,"Controller",(function(){return Pt.a})),n.d(e,"MapController",(function(){return se.b})),n.d(e,"_GlobeController",(function(){return fe})),n.d(e,"FirstPersonController",(function(){return Lt})),n.d(e,"OrbitController",(function(){return Ht})),n.d(e,"OrthographicController",(function(){return $t})),n.d(e,"Effect",(function(){return B.a})),n.d(e,"LayerExtension",(function(){return ye.a})),n.d(e,"TRANSITION_EVENTS",(function(){return Bt.a})),n.d(e,"TransitionInterpolator",(function(){return ve.a})),n.d(e,"LinearInterpolator",(function(){return Ft.a})),n.d(e,"FlyToInterpolator",(function(){return xe})),n.d(e,"log",(function(){return Ee.a})),n.d(e,"createIterable",(function(){return Oe.a})),n.d(e,"fp64LowPart",(function(){return Ct.c})),n.d(e,"Tesselator",(function(){return Se.a})),n.d(e,"_fillArray",(function(){return Te.a})),n.d(e,"_flatten",(function(){return Te.b})),n.d(e,"_count",(function(){return Pe.a})),n.d(e,"_memoize",(function(){return Me.a})),n.d(e,"_mergeShaders",(function(){return Ce.a})),n.d(e,"_compareProps",(function(){return Ie.a}));var r=n(24),i=n(187),o=n(226),a=n(136),s=n(1),u=n(2),c=n(191),l=[255,255,255],f=[0,0,1],h=[0,0,1],p=0,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t);var n=e.color,r=void 0===n?l:n,i=e.intensity,o=void 0===i?1:i,a=e.position,u=void 0===a?h:a;this.id=e.id||"point-".concat(p++),this.color=r,this.intensity=o,this.type="point",this.position=u,this.attenuation=g(e),this.projectedLight=Object.assign({},this)}return Object(u.a)(t,[{key:"getProjectedLight",value:function(t){var e=t.layer,n=this.projectedLight,i=e.context.viewport,o=e.props,a=o.coordinateSystem,s=o.coordinateOrigin,u=Object(c.b)(this.position,{viewport:i,coordinateSystem:a,coordinateOrigin:s,fromCoordinateSystem:i.isGeospatial?r.a.LNGLAT:r.a.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return n.color=this.color,n.intensity=this.intensity,n.position=u,n}}]),t}();function g(t){return"attenuation"in t?t.attenuation:"intensity"in t?[0,0,t.intensity]:f}var y=n(5),v=n(6),m=n(3),A=n(159);function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var _=function(t){Object(y.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"getProjectedLight",value:function(t){var e=t.layer,n=this.projectedLight,r=e.context.viewport,i=e.props,o=i.coordinateSystem,a=i.coordinateOrigin,s=i.modelMatrix,u=Object(A.b)({viewport:r,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a}).project_uCameraPosition;return n.color=this.color,n.intensity=this.intensity,n.position=u,n}}]),n}(d),w=n(156);var x=Math.PI/180,E=864e5,O=2440588,S=2451545,T=23.4397*x,P=357.5291,M=.98560028,C=280.147,I=360.9856235;function R(t,e,n){var r=x*-n,i=x*e,o=function(t){return function(t){return t/E-.5+O}(t)-S}(t),a=function(t){var e=function(t){var e=t,n=x*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e));return e+n+102.9372*x+Math.PI}((n=t,x*(P+M*n)));var n;return{declination:j(e,0),rightAscension:k(e,0)}}(o),s=function(t,e){return x*(C+I*t)-e}(o,r)-a.rightAscension;return{azimuth:L(s,i,a.declination),altitude:N(s,i,a.declination)}}function k(t,e){var n=t;return Math.atan2(Math.sin(n)*Math.cos(T)-Math.tan(e)*Math.sin(T),Math.cos(n))}function j(t,e){var n=t;return Math.asin(Math.sin(e)*Math.cos(T)+Math.cos(e)*Math.sin(T)*Math.sin(n))}function L(t,e,n){var r=t,i=e,o=n;return Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(i)-Math.tan(o)*Math.cos(i))}function N(t,e,n){var r=t,i=e,o=n;return Math.asin(Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(r))}function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var F=function(t){Object(y.a)(n,t);var e=D(n);function n(t){var r,i=t.timestamp,o=function(t,e){if(null==t)return{};var n,r,i=Object(w.a)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,["timestamp"]);return Object(s.a)(this,n),(r=e.call(this,o)).timestamp=i,r}return Object(u.a)(n,[{key:"getProjectedLight",value:function(t){var e=t.layer.context.viewport,n=e.latitude,r=e.longitude;return this.direction=function(t,e,n){var r=R(t,e,n),i=r.azimuth,o=r.altitude,a=i+Math.PI;return[-Math.sin(a),-Math.cos(a),-Math.sin(o)]}(this.timestamp,n,r),this}}]),n}(a.a),B=n(126),z=n(647),U=n(10),G=n(255);function V(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var q=function(t){Object(y.a)(n,t);var e=V(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,n),r=e.call(this,t,i);var o=i.module,a=i.fs,u=i.id;return r.model=new z.a(t,{id:u,fs:a,modules:[o]}),r}return Object(u.a)(n,[{key:"render",value:function(t){var e=this,n=this.gl;Object(U.l)(n,{framebuffer:t.outputBuffer,clearColor:[0,0,0,0]},(function(){return e._renderPass(n,t)}))}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_renderPass",value:function(t,e){var n=e.inputBuffer;e.outputBuffer;Object(G.a)(t,{color:!0}),this.model.draw({moduleSettings:this.props.moduleSettings,uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),n}(n(248).a),H=n(306);function W(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var Q=function(t){Object(y.a)(n,t);var e=Y(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,n),(r=e.call(this,i)).id="".concat(t.name,"-pass"),Object(H.b)(t),r.module=t,r}return Object(u.a)(n,[{key:"postRender",value:function(t,e){this.passes||(this.passes=function(t,e,n,r){if(e.filter||e.sampler){var i=J(e);return[new q(t,{id:n,module:e,fs:i,moduleSettings:r})]}return(e.passes||[]).map((function(i,o){var a=J(e,i),s="".concat(n,"-").concat(o);return new q(t,{id:s,module:e,fs:a,moduleSettings:r})}))}(t,this.module,this.id,this.props));for(var n=e.target,r=e.inputBuffer,i=e.swapBuffer,o=0;o<this.passes.length;o++){n&&o===this.passes.length-1&&(i=n),this.passes[o].render({inputBuffer:r,outputBuffer:i});var a=i;i=r,r=a}return r}},{key:"cleanup",value:function(){if(this.passes){var t,e=W(this.passes);try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(n){e.e(n)}finally{e.f()}this.passes=null}}}]),n}(B.a);var Z=function(t){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(t,"(gl_FragColor, texSize, texCoord);\n}\n")},K=function(t){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(t,"(texture, texSize, texCoord);\n}\n")};function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(e.filter){var n="string"===typeof e.filter?e.filter:"".concat(t.name,"_filterColor");return Z(n)}if(e.sampler){var r="string"===typeof e.sampler?e.sampler:"".concat(t.name,"_sampleColor");return K(r)}return null}var $=n(125),tt=n(378),et=n(231),nt=n(228),rt=n(153),it=n(296),ot=n(233),at=n(59),st=n(150),ut=n(12),ct=n(13),lt=n(29),ft=n(41);function ht(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var pt=Math.PI/180,dt=180/Math.PI,gt=6370972,yt=256;function vt(){var t=4018225162502676e-20,e=Math.PI/180*yt;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}var mt=function(t){Object(y.a)(n,t);var e=ht(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,n);var i=r.latitude,o=void 0===i?0:i,a=r.longitude,u=void 0===a?0:a,c=r.zoom,l=void 0===c?11:c,f=r.nearZMultiplier,h=void 0===f?.1:f,p=r.farZMultiplier,d=void 0===p?2:p,g=r.resolution,y=void 0===g?10:g,v=r.width,m=r.height,A=r.altitude,b=void 0===A?1.5:A;v=v||1,m=m||1,b=Math.max(.75,b);var _=(new ct.Matrix4).lookAt({eye:[0,-b,0],up:[0,0,1]}),w=Math.pow(2,l);_.rotateX(o*pt),_.rotateZ(-u*pt),_.scale(w/m);var x=Math.atan(.5/b),E=512*w/m,O=Object.assign({},r,{width:v,height:m,viewMatrix:_,longitude:u,latitude:o,zoom:l,fovyRadians:2*x,aspect:v/m,focalDistance:b,near:h,far:Math.min(2,1/E+1)*b*d});return(t=e.call(this,O)).resolution=y,t.distanceScales=vt(),t}return Object(u.a)(n,[{key:"getDistanceScales",value:function(){return this.distanceScales}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={targetZ:t.z||0},n=this.unproject([0,this.height/2],e),r=this.unproject([this.width/2,0],e),i=this.unproject([this.width,this.height/2],e),o=this.unproject([this.width/2,this.height],e);return i[0]<this.longitude&&(i[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}},{key:"unproject",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.topLeft,i=void 0===r||r,o=n.targetZ,a=Object(ut.a)(t,3),s=a[0],u=a[1],c=a[2],l=i?u:this.height-u,f=this.pixelUnprojectionMatrix;if(Number.isFinite(c))e=At(f,[s,l,c,1]);else{var h=At(f,[s,l,-1,1]),p=At(f,[s,l,1,1]),d=((o||0)/gt+1)*yt,g=lt.n(lt.o([],h,p)),y=lt.n(h),v=lt.n(p),m=(4*y*v-Math.pow(g-y-v,2))/16,A=4*m/g,b=Math.sqrt(y-A),_=Math.sqrt(Math.max(0,d*d-A)),w=(b-_)/Math.sqrt(g);e=lt.h([],h,p,w)}var x=this.unprojectPosition(e),E=Object(ut.a)(x,3),O=E[0],S=E[1],T=E[2];return Number.isFinite(c)?[O,S,T]:Number.isFinite(o)?[O,S,o]:[O,S]}},{key:"projectPosition",value:function(t){var e=Object(ut.a)(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i,a=n*pt,s=r*pt,u=Math.cos(s),c=(o/gt+1)*yt;return[Math.sin(a)*u*c,-Math.cos(a)*u*c,Math.sin(s)*c]}},{key:"unprojectPosition",value:function(t){var e=Object(ut.a)(t,3),n=e[0],r=e[1],i=e[2],o=lt.f(t),a=Math.asin(i/o);return[Math.atan2(n,-r)*dt,a*dt,(o/yt-1)*gt]}},{key:"projectFlat",value:function(t){return t}},{key:"unprojectFlat",value:function(t){return t}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=this.unproject(n);return[e[0]-r[0]+this.longitude,e[1]-r[1]+this.latitude]}},{key:"projectionMode",get:function(){return r.c.GLOBE}}]),n}(at.a);function At(t,e){var n=ft.n([],e,t);return ft.k(n,n,1/n[3]),n}var bt=n(316),_t=n(139),wt=n(315),xt=n(658),Et=n(165),Ot=n(86),St=n(227),Tt=n(34),Pt=n(85),Mt=n(166),Ct=n(55);function It(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var Rt=20,kt={position:[0,0,0],pitch:0,bearing:0,maxPitch:90,minPitch:-90},jt=function(t){Object(y.a)(n,t);var e=It(n);function n(t){var r,i=t.width,o=t.height,a=t.position,u=void 0===a?kt.position:a,c=t.bearing,l=void 0===c?kt.bearing:c,f=t.pitch,h=void 0===f?kt.pitch:f,p=t.longitude,d=t.latitude,g=t.maxPitch,y=void 0===g?kt.maxPitch:g,v=t.minPitch,m=void 0===v?kt.minPitch:v,A=t.startBearing,b=t.startPitch,_=t.startZoomPosition,w=t.startZoom;return Object(s.a)(this,n),(r=e.call(this,{width:i,height:o,position:u,bearing:l,pitch:h,longitude:p,latitude:d,maxPitch:y,minPitch:m}))._interactiveState={startBearing:A,startPitch:b,startZoomPosition:_,startZoom:w},r}return Object(u.a)(n,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"getDirection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new ct._SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:t?90:90+this._viewportProps.pitch}),n=e.toVector3().normalize();return n}},{key:"panStart",value:function(){return this}},{key:"pan",value:function(){return this}},{key:"panEnd",value:function(){return this}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=this._interactiveState,i=r.startBearing,o=r.startPitch;return Number.isFinite(i)&&Number.isFinite(o)?this._getUpdatedState({bearing:i-180*e,pitch:o-90*n}):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(){return this._getUpdatedState({startZoomPosition:this._viewportProps.position,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.scale,n=this._interactiveState.startZoomPosition;n||(n=this._viewportProps.position);var r=this.getDirection();return this._move(r,Math.log2(e)*Rt,n)}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=this.getDirection(!0);return this._move(e.rotateZ({radians:Math.PI/2}),t)}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=this.getDirection(!0);return this._move(e.rotateZ({radians:-Math.PI/2}),t)}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=this.getDirection(!0);return this._move(e,t)}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=this.getDirection(!0);return this._move(e.negate(),t)}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-t})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this.zoom({scale:t})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this.zoom({scale:1/t})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_move",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._viewportProps.position,r=t.scale(e);return this._getUpdatedState({position:new ct.Vector3(n).add(r)})}},{key:"_getUpdatedState",value:function(t){return new n(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.pitch,n=t.maxPitch,r=t.minPitch,i=t.longitude,o=t.bearing;return t.pitch=Object(ct.clamp)(e,r,n),(i<-180||i>180)&&(t.longitude=Object(Ct.e)(i+180,360)-180),(o<-180||o>180)&&(t.bearing=Object(Ct.e)(o+180,360)-180),t}}]),n}(Mt.a),Lt=function(t){Object(y.a)(n,t);var e=It(n);function n(t){return Object(s.a)(this,n),e.call(this,jt,t)}return n}(Pt.a);function Nt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var Dt=function(t){Object(y.a)(n,t);var e=Nt(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"_getViewport",value:function(t){var e=t.modelMatrix,n=void 0===e?null:e,r=t.bearing,i=void 0===r?0:r,o=t.pitch,a=void 0===o?0:o,s=t.up,u=void 0===s?[0,0,1]:s,c=function(t){var e=t.bearing,n=t.pitch;return new ct._SphericalCoordinates({bearing:e,pitch:n}).toVector3().normalize()}({bearing:i,pitch:90+a}),l=n?n.transformDirection(c):c,f=Object(Tt.h)(t),h=Math.pow(2,f),p=(new ct.Matrix4).lookAt({eye:[0,0,0],center:l,up:u}).scale(h);return new at.a(Object.assign({},t,{zoom:f,viewMatrix:p}))}},{key:"controller",get:function(){return this._getControllerProps({type:Lt})}}]),n}(Ot.a);Dt.displayName="FirstPersonView";var Ft=n(83),Bt=n(84);function zt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var Ut={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},Gt={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Ft.a(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:Bt.a.BREAK},Vt=function(t){return Math.pow(2,t)},qt=function(t){Object(y.a)(n,t);var e=zt(n);function n(t){var r,i=t.makeViewport,o=t.width,a=t.height,u=t.orbitAxis,c=void 0===u?Ut.orbitAxis:u,l=t.rotationX,f=void 0===l?Ut.rotationX:l,h=t.rotationOrbit,p=void 0===h?Ut.rotationOrbit:h,d=t.target,g=void 0===d?Ut.target:d,y=t.zoom,v=void 0===y?Ut.zoom:y,m=t.minRotationX,A=void 0===m?Ut.minRotationX:m,b=t.maxRotationX,_=void 0===b?Ut.maxRotationX:b,w=t.minZoom,x=void 0===w?Ut.minZoom:w,E=t.maxZoom,O=void 0===E?Ut.maxZoom:E,S=t.startPanPosition,T=t.startTarget,P=t.startRotationX,M=t.startRotationOrbit,C=t.startZoomPosition,I=t.startZoom;return Object(s.a)(this,n),(r=e.call(this,{width:o,height:a,orbitAxis:c,rotationX:f,rotationOrbit:p,target:g,zoom:v,minRotationX:A,maxRotationX:_,minZoom:x,maxZoom:O}))._interactiveState={startPanPosition:S,startTarget:T,startRotationX:P,startRotationOrbit:M,startZoomPosition:C,startZoom:I},r.makeViewport=i,r}return Object(u.a)(n,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=this._viewportProps.target;return this._getUpdatedState({startPanPosition:e,startTarget:n})}},{key:"pan",value:function(t){var e=t.pos,n=(t.startPos,this._interactiveState),r=n.startPanPosition,i=n.startTarget,o=new ct.Vector2(e).subtract(r);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:i,pixelOffset:o})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=this._interactiveState,i=r.startRotationX,o=r.startRotationOrbit;return Number.isFinite(i)&&Number.isFinite(o)?((i<-90||i>90)&&(e*=-1),this._getUpdatedState({rotationX:i+180*n,rotationOrbit:o+180*e,isRotating:!0})):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.rotationOrbit;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:e,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,o=i.zoom,a=i.width,s=i.height,u=i.target,c=this._interactiveState,l=c.startZoom,f=c.startZoomPosition,h=c.startTarget;Number.isFinite(l)||(l=o,h=u,f=n||e);var p=this._calculateNewZoom({scale:r,startZoom:l}),d=Vt(l),g=Vt(p),y=(a/2-f[0])*(g/d-1),v=(s/2-f[1])*(g/d-1);return this._getUpdatedState({zoom:p,target:this._calculateNewTarget({startTarget:h,zoom:p,pixelOffset:[y,v]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=[-t,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=[t,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=[0,-t];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=[0,t];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+t})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;Number.isFinite(n)||(n=this._viewportProps.zoom);var a=n+Math.log2(e);return Object(ct.clamp)(a,o,i)}},{key:"_calculateNewTarget",value:function(t){var e=t.startTarget,n=t.zoom,r=t.pixelOffset,i=Object.assign({},this._viewportProps);Number.isFinite(n)&&(i.zoom=n),e&&(i.target=e);var o=this.makeViewport(i),a=o.project(i.target);return o.unproject([a[0]-r[0],a[1]-r[1],a[2]])}},{key:"_getUpdatedState",value:function(t){return new n(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom,i=t.maxRotationX,o=t.minRotationX,a=t.rotationOrbit;return t.zoom=Object(ct.clamp)(r,n,e),t.rotationX=Object(ct.clamp)(t.rotationX,o,i),(a<-180||a>180)&&(t.rotationOrbit=Object(Ct.e)(a+180,360)-180),t}}]),n}(Mt.a),Ht=function(t){Object(y.a)(n,t);var e=zt(n);function n(t){return Object(s.a)(this,n),e.call(this,qt,t)}return Object(u.a)(n,[{key:"_getTransitionProps",value:function(){return Gt}}]),n}(Pt.a);function Wt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var Xt=Math.PI/180;function Yt(t){var e=t.height,n=t.fovy,r=t.orbitAxis,i=t.rotationX,o=t.rotationOrbit,a=t.zoom,s=.5/Math.tan(n*Xt/2),u="Z"===r?[0,0,1]:[0,1,0],c="Z"===r?[0,-s,0]:[0,0,s],l=(new ct.Matrix4).lookAt({eye:c,up:u});l.rotateX(i*Xt),"Z"===r?l.rotateZ(o*Xt):l.rotateY(o*Xt);var f=Math.pow(2,a)/(e||1);return l.scale(f),l}var Qt=function(t){Object(y.a)(n,t);var e=Wt(n);function n(t){Object(s.a)(this,n);var r=t.id,i=t.x,o=t.y,a=t.width,u=t.height,c=t.fovy,l=void 0===c?50:c,f=t.near,h=t.far,p=t.orbitAxis,d=void 0===p?"Z":p,g=t.target,y=void 0===g?[0,0,0]:g,v=t.rotationX,m=void 0===v?0:v,A=t.rotationOrbit,b=void 0===A?0:A,_=t.zoom,w=void 0===_?0:_;return e.call(this,{id:r,viewMatrix:Yt({height:u,fovy:l,orbitAxis:d,rotationX:m,rotationOrbit:b,zoom:w}),fovy:l,near:f,far:h,x:i,y:o,position:y,width:a,height:u,zoom:w})}return n}(at.a),Zt=function(t){Object(y.a)(n,t);var e=Wt(n);function n(t){return Object(s.a)(this,n),e.call(this,Object.assign({},t,{type:Qt}))}return Object(u.a)(n,[{key:"controller",get:function(){return this._getControllerProps({type:Ht})}}]),n}(Ot.a);function Kt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}Zt.displayName="OrbitView";var Jt={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Ft.a(["target","zoom"]),transitionInterruption:Bt.a.BREAK},$t=function(t){Object(y.a)(n,t);var e=Kt(n);function n(t){return Object(s.a)(this,n),t.dragMode=t.dragMode||"pan",e.call(this,qt,t)}return Object(u.a)(n,[{key:"_onPanRotate",value:function(t){return!1}},{key:"_getTransitionProps",value:function(){return Jt}}]),n}(Pt.a);function te(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var ee=(new ct.Matrix4).lookAt({eye:[0,0,1]});function ne(t){var e=t.width,n=t.height,r=t.near,i=t.far;return e=e||1,n=n||1,(new ct.Matrix4).ortho({left:-e/2,right:e/2,bottom:-n/2,top:n/2,near:r,far:i})}var re=function(t){Object(y.a)(e,t);te(e);function e(t){var n=t.id,r=t.x,i=t.y,o=t.width,a=t.height,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?1e3:l,h=t.zoom,p=void 0===h?0:h,d=t.target,g=void 0===d?[0,0,0]:d,y=t.flipY,m=void 0===y||y;Object(s.a)(this,e);var A=Math.pow(2,p);return Object(v.a)(undefined,new at.a({id:n,x:r,y:i,width:o,height:a,position:g,viewMatrix:ee.clone().scale([A,A*(m?-1:1),A]),projectionMatrix:ne({width:o,height:a,near:c,far:f}),zoom:p}))}return e}(at.a),ie=function(t){Object(y.a)(n,t);var e=te(n);function n(t){return Object(s.a)(this,n),e.call(this,Object.assign({},t,{type:re}))}return Object(u.a)(n,[{key:"controller",get:function(){return this._getControllerProps({type:$t})}}]),n}(Ot.a);ie.displayName="OrthographicView";var oe=n(0),ae=n(15),se=n(151);function ue(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var ce={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Ft.a(["longitude","latitude","zoom"]),transitionInterruption:Bt.a.BREAK},le=function(t){Object(y.a)(n,t);var e=ue(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Object(ct.clamp)(r,n,e);var i=t.longitude,o=t.latitude;return(i<-180||i>180)&&(t.longitude=Object(Ct.e)(i+180,360)-180),t.latitude=Object(ct.clamp)(o,-89,89),t}}]),n}(se.a),fe=function(t){Object(y.a)(n,t);var e=ue(n);function n(t){return Object(s.a)(this,n),t.dragMode=t.dragMode||"pan",e.call(this,le,t)}return Object(u.a)(n,[{key:"setProps",value:function(t){Object(ae.a)(Object(m.a)(n.prototype),"setProps",this).call(this,t),this.dragRotate=!1,this.touchRotate=!1}},{key:"_getTransitionProps",value:function(){return ce}}]),n}(Pt.a);function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){Object(oe.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var ge=function(t){Object(y.a)(n,t);var e=de(n);function n(t){return Object(s.a)(this,n),e.call(this,pe(pe({},t),{},{type:mt}))}return Object(u.a)(n,[{key:"controller",get:function(){return this._getControllerProps({type:fe})}}]),n}(Ot.a);ge.displayName="GlobeView";var ye=n(344),ve=n(152);function me(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ae(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function be(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(T){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var _e=["bearing","pitch"],we={speed:1.2,curve:1.414},xe=function(t){Object(y.a)(n,t);var e=be(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)(this,n),(t=e.call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]})).props=Object.assign({},we,r),t}return Object(u.a)(n,[{key:"interpolateProps",value:function(t,e,n){var r,i=Object(Tt.d)(t,e,n,this.props),o=me(_e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=Object(ct.lerp)(t[a]||0,e[a]||0,n)}}catch(s){o.e(s)}finally{o.f()}return i}},{key:"getDuration",value:function(t,e){var n=e.transitionDuration;return"auto"===n&&(n=Object(Tt.g)(t,e,this.props)),n}}]),n}(ve.a),Ee=n(26),Oe=n(73),Se=n(311),Te=n(94),Pe=n(225),Me=n(113),Ce=n(224),Ie=n(186)},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"i",(function(){return s})),n.d(e,"j",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"q",(function(){return h})),n.d(e,"p",(function(){return p})),n.d(e,"r",(function(){return d})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return y})),n.d(e,"m",(function(){return v})),n.d(e,"a",(function(){return m})),n.d(e,"o",(function(){return A})),n.d(e,"f",(function(){return b})),n.d(e,"n",(function(){return _}));var r=n(17);function i(){var t=new r.a(3);return r.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function a(t,e,n){var i=new r.a(3);return i[0]=t,i[1]=e,i[2]=n,i}function s(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function u(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function c(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function l(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function f(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function h(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function p(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function d(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,h=r*u-i*s,p=i*h-o*f,d=o*l-r*h,g=r*f-i*l,y=2*a;return l*=y,f*=y,h*=y,p*=2,d*=2,g*=2,t[0]=s+l+p,t[1]=u+f+d,t[2]=c+h+g,t}function g(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function y(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function v(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function m(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),l=u&&c(t,e)/u;return Math.acos(Math.min(Math.max(l,-1),1))}var A=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},b=o,_=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r};!function(){var t=i()}()},function(t,e,n){"use strict";n.r(e),n.d(e,"createGLContext",(function(){return r.a})),n.d(e,"instrumentGLContext",(function(){return r.e})),n.d(e,"isWebGL",(function(){return r.f})),n.d(e,"isWebGL2",(function(){return r.g})),n.d(e,"getParameters",(function(){return r.d})),n.d(e,"setParameters",(function(){return r.k})),n.d(e,"withParameters",(function(){return r.l})),n.d(e,"resetParameters",(function(){return r.i})),n.d(e,"cssToDeviceRatio",(function(){return r.c})),n.d(e,"cssToDevicePixels",(function(){return r.b})),n.d(e,"lumaStats",(function(){return i.a})),n.d(e,"FEATURES",(function(){return o.a})),n.d(e,"hasFeature",(function(){return a.b})),n.d(e,"hasFeatures",(function(){return a.c})),n.d(e,"Buffer",(function(){return s.a})),n.d(e,"Program",(function(){return u.a})),n.d(e,"Framebuffer",(function(){return c.a})),n.d(e,"Renderbuffer",(function(){return l.a})),n.d(e,"Texture2D",(function(){return f.a})),n.d(e,"TextureCube",(function(){return h.a})),n.d(e,"clear",(function(){return p.a})),n.d(e,"readPixelsToArray",(function(){return d.c})),n.d(e,"readPixelsToBuffer",(function(){return d.d})),n.d(e,"cloneTextureFrom",(function(){return g.a})),n.d(e,"copyToTexture",(function(){return d.b})),n.d(e,"Texture3D",(function(){return y.a})),n.d(e,"TransformFeedback",(function(){return v.a})),n.d(e,"AnimationLoop",(function(){return m.a})),n.d(e,"Model",(function(){return A.a})),n.d(e,"Transform",(function(){return b.a})),n.d(e,"ProgramManager",(function(){return _.a})),n.d(e,"Timeline",(function(){return w.a})),n.d(e,"Geometry",(function(){return x.a})),n.d(e,"ClipSpace",(function(){return E.a})),n.d(e,"ConeGeometry",(function(){return j})),n.d(e,"CubeGeometry",(function(){return L.a})),n.d(e,"CylinderGeometry",(function(){return N})),n.d(e,"IcoSphereGeometry",(function(){return z})),n.d(e,"PlaneGeometry",(function(){return G})),n.d(e,"SphereGeometry",(function(){return q})),n.d(e,"TruncatedConeGeometry",(function(){return R})),n.d(e,"normalizeShaderModule",(function(){return W.b})),n.d(e,"fp32",(function(){return X.a})),n.d(e,"fp64",(function(){return K})),n.d(e,"project",(function(){return et})),n.d(e,"dirlight",(function(){return rt})),n.d(e,"picking",(function(){return it.a})),n.d(e,"gouraudLighting",(function(){return ot.a})),n.d(e,"phongLighting",(function(){return ot.b})),n.d(e,"pbr",(function(){return at.a})),n.d(e,"log",(function(){return r.h})),n.d(e,"assert",(function(){return st.a})),n.d(e,"uid",(function(){return C.c}));var r=n(10),i=n(198),o=n(301),a=n(631),s=n(53),u=n(651),c=n(101),l=n(141),f=n(167),h=n(391),p=n(255),d=n(307),g=n(390),y=n(392),v=n(645),m=n(656),A=n(252),b=n(652),_=n(405),w=n(648),x=n(87),E=n(647),O=n(48),S=n(1),T=n(6),P=n(3),M=n(5),C=n(143),I={x:[2,0,1],y:[0,1,2],z:[1,2,0]},R=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e);var n=t.id,r=void 0===n?Object(C.c)("truncated-code-geometry"):n,i=k(t),o=i.indices,a=i.attributes;return Object(T.a)(this,Object(P.a)(e).call(this,Object(O.a)({},t,{id:r,indices:o,attributes:Object(O.a)({},a,t.attributes)})))}return Object(M.a)(e,t),e}(x.a);function k(t){for(var e=t.bottomRadius,n=void 0===e?0:e,r=t.topRadius,i=void 0===r?0:r,o=t.height,a=void 0===o?1:o,s=t.nradial,u=void 0===s?10:s,c=t.nvertical,l=void 0===c?10:c,f=t.verticalAxis,h=void 0===f?"y":f,p=t.topCap,d=void 0!==p&&p,g=t.bottomCap,y=void 0!==g&&g,v=(d?2:0)+(y?2:0),m=(u+1)*(l+1+v),A=Math.atan2(n-i,a),b=Math.sin,_=Math.cos,w=Math.PI,x=_(A),E=b(A),O=d?-2:0,S=l+(y?2:0),T=u+1,P=new Uint16Array(u*(l+v)*6),M=I[h],C=new Float32Array(3*m),R=new Float32Array(3*m),k=new Float32Array(2*m),j=0,L=0,N=O;N<=S;N++){var D=N/l,F=a*D,B=void 0;N<0?(F=0,D=1,B=n):N>l?(F=a,D=1,B=i):B=n+N/l*(i-n),-2!==N&&N!==l+2||(B=0,D=0),F-=a/2;for(var z=0;z<T;z++){var U=b(z*w*2/u),G=_(z*w*2/u);C[j+M[0]]=U*B,C[j+M[1]]=F,C[j+M[2]]=G*B,R[j+M[0]]=N<0||N>l?0:U*x,R[j+M[1]]=N<0?-1:N>l?1:E,R[j+M[2]]=N<0||N>l?0:G*x,k[L+0]=z/u,k[L+1]=D,L+=2,j+=3}}for(var V=0;V<l+v;V++)for(var q=0;q<u;q++){var H=6*(V*u+q);P[H+0]=T*(V+0)+0+q,P[H+1]=T*(V+0)+1+q,P[H+2]=T*(V+1)+1+q,P[H+3]=T*(V+0)+0+q,P[H+4]=T*(V+1)+1+q,P[H+5]=T*(V+1)+0+q}return{indices:P,attributes:{POSITION:{size:3,value:C},NORMAL:{size:3,value:R},TEXCOORD_0:{size:2,value:k}}}}var j=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e);var n=t.id,r=void 0===n?Object(C.c)("cone-geometry"):n,i=t.radius,o=void 0===i?1:i,a=t.cap,s=void 0===a||a;return Object(T.a)(this,Object(P.a)(e).call(this,Object(O.a)({},t,{id:r,topRadius:0,topCap:Boolean(s),bottomCap:Boolean(s),bottomRadius:o})))}return Object(M.a)(e,t),e}(R),L=n(646),N=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e);var n=t.id,r=void 0===n?Object(C.c)("cylinder-geometry"):n,i=t.radius,o=void 0===i?1:i;return Object(T.a)(this,Object(P.a)(e).call(this,Object(O.a)({},t,{id:r,bottomRadius:o,topRadius:o})))}return Object(M.a)(e,t),e}(R),D=n(13),F=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],B=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],z=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e);var n=t.id,r=void 0===n?Object(C.c)("ico-sphere-geometry"):n,i=U(t),o=i.indices,a=i.attributes;return Object(T.a)(this,Object(P.a)(e).call(this,Object(O.a)({},t,{id:r,indices:o,attributes:Object(O.a)({},a,t.attributes)})))}return Object(M.a)(e,t),e}(x.a);function U(t){var e=t.iterations,n=void 0===e?0:e,r=Math.PI,i=2*r,o=[].concat(F),a=[].concat(B);o.push(),a.push();for(var s=function(){var t={};return function(e,n){var r=(e*=3)>(n*=3)?e:n,i="".concat(e<n?e:n,"|").concat(r);if(i in t)return t[i];var a=o[e],s=o[e+1],u=o[e+2],c=(a+o[n])/2,l=(s+o[n+1])/2,f=(u+o[n+2])/2,h=Math.sqrt(c*c+l*l+f*f);return c/=h,l/=h,f/=h,o.push(c,l,f),t[i]=o.length/3-1}}(),u=0;u<n;u++){for(var c=[],l=0;l<a.length;l+=3){var f=s(a[l+0],a[l+1]),h=s(a[l+1],a[l+2]),p=s(a[l+2],a[l+0]);c.push(p,a[l+0],f,f,a[l+1],h,h,a[l+2],p,f,h,p)}a=c}for(var d=new Array(o.length),g=new Array(o.length/3*2),y=a.length-3;y>=0;y-=3){var v=a[y+0],m=a[y+1],A=a[y+2],b=3*v,_=3*m,w=3*A,x=2*v,E=2*m,O=2*A,S=o[b+0],T=o[b+1],P=o[b+2],M=Math.acos(P/Math.sqrt(S*S+T*T+P*P))/r,C=1-(Math.atan2(T,S)+r)/i,I=o[_+0],R=o[_+1],k=o[_+2],j=Math.acos(k/Math.sqrt(I*I+R*R+k*k))/r,L=1-(Math.atan2(R,I)+r)/i,N=o[w+0],z=o[w+1],U=o[w+2],G=Math.acos(U/Math.sqrt(N*N+z*z+U*U))/r,V=1-(Math.atan2(z,N)+r)/i,q=[N-I,z-R,U-k],H=[S-I,T-R,P-k],W=new D.Vector3(q).cross(H).normalize(),X=void 0;(0===C||0===L||0===V)&&(0===C||C>.5)&&(0===L||L>.5)&&(0===V||V>.5)&&(o.push(o[b+0],o[b+1],o[b+2]),X=o.length/3-1,a.push(X),g[2*X+0]=1,g[2*X+1]=M,d[3*X+0]=W.x,d[3*X+1]=W.y,d[3*X+2]=W.z,o.push(o[_+0],o[_+1],o[_+2]),X=o.length/3-1,a.push(X),g[2*X+0]=1,g[2*X+1]=j,d[3*X+0]=W.x,d[3*X+1]=W.y,d[3*X+2]=W.z,o.push(o[w+0],o[w+1],o[w+2]),X=o.length/3-1,a.push(X),g[2*X+0]=1,g[2*X+1]=G,d[3*X+0]=W.x,d[3*X+1]=W.y,d[3*X+2]=W.z),d[b+0]=d[_+0]=d[w+0]=W.x,d[b+1]=d[_+1]=d[w+1]=W.y,d[b+2]=d[_+2]=d[w+2]=W.z,g[x+0]=C,g[x+1]=M,g[E+0]=L,g[E+1]=j,g[O+0]=V,g[O+1]=G}return{indices:{size:1,value:new Uint16Array(a)},attributes:{POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(d)},TEXCOORD_0:{size:2,value:new Float32Array(g)}}}}var G=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e);var n=t.id,r=void 0===n?Object(C.c)("plane-geometry"):n,i=V(t),o=i.indices,a=i.attributes;return Object(T.a)(this,Object(P.a)(e).call(this,Object(O.a)({},t,{id:r,indices:o,attributes:Object(O.a)({},a,t.attributes)})))}return Object(M.a)(e,t),e}(x.a);function V(t){var e=t.type,n=void 0===e?"x,y":e,r=t.offset,i=void 0===r?0:r,o=t.flipCull,a=void 0!==o&&o,s=t.unpack,u=void 0!==s&&s,c=n.split(","),l=t["".concat(c[0],"len")]||1,f=t["".concat(c[1],"len")]||1,h=t["n".concat(c[0])]||1,p=t["n".concat(c[1])]||1,d=(h+1)*(p+1),g=new Float32Array(3*d),y=new Float32Array(3*d),v=new Float32Array(2*d);a&&(l=-l);for(var m=0,A=0,b=0;b<=p;b++)for(var _=0;_<=h;_++){var w=_/h,x=b/p;switch(v[m+0]=a?1-w:w,v[m+1]=x,n){case"x,y":g[A+0]=l*w-.5*l,g[A+1]=f*x-.5*f,g[A+2]=i,y[A+0]=0,y[A+1]=0,y[A+2]=a?1:-1;break;case"x,z":g[A+0]=l*w-.5*l,g[A+1]=i,g[A+2]=f*x-.5*f,y[A+0]=0,y[A+1]=a?1:-1,y[A+2]=0;break;case"y,z":g[A+0]=i,g[A+1]=l*w-.5*l,g[A+2]=f*x-.5*f,y[A+0]=a?1:-1,y[A+1]=0,y[A+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}m+=2,A+=3}for(var E=h+1,O=new Uint16Array(h*p*6),S=0;S<p;S++)for(var T=0;T<h;T++){var P=6*(S*h+T);O[P+0]=(S+0)*E+T,O[P+1]=(S+1)*E+T,O[P+2]=(S+0)*E+T+1,O[P+3]=(S+1)*E+T,O[P+4]=(S+1)*E+T+1,O[P+5]=(S+0)*E+T+1}var M={indices:{size:1,value:O},attributes:{POSITION:{size:3,value:g},NORMAL:{size:3,value:y},TEXCOORD_0:{size:2,value:v}}};return u?function(t){var e=t.indices,n=t.attributes;if(!e)return t;var r=e.value.length,i={};for(var o in n){var a=n[o],s=a.constant,u=a.value,c=a.size;if(!s&&c){for(var l=new u.constructor(r*c),f=0;f<r;++f)for(var h=e.value[f],p=0;p<c;p++)l[f*c+p]=u[h*c+p];i[o]={size:c,value:l}}}return{attributes:Object.assign({},n,i)}}(M):M}var q=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e);var n=t.id,r=void 0===n?Object(C.c)("sphere-geometry"):n,i=H(t),o=i.indices,a=i.attributes;return Object(T.a)(this,Object(P.a)(e).call(this,Object(O.a)({},t,{id:r,indices:o,attributes:Object(O.a)({},a,t.attributes)})))}return Object(M.a)(e,t),e}(x.a);function H(t){var e=t.nlat,n=void 0===e?10:e,r=t.nlong,i=void 0===r?10:r,o=t.radius,a=void 0===o?1:o,s=Math.PI-0,u=2*Math.PI-0,c=(n+1)*(i+1);if("number"===typeof a){var l=a;a=function(t,e,n,r,i){return l}}for(var f=new Float32Array(3*c),h=new Float32Array(3*c),p=new Float32Array(2*c),d=new(c>65535?Uint32Array:Uint16Array)(n*i*6),g=0;g<=n;g++)for(var y=0;y<=i;y++){var v=y/i,m=g/n,A=y+g*(i+1),b=2*A,_=3*A,w=u*v,x=s*m,E=Math.sin(w),O=Math.cos(w),S=Math.sin(x),T=O*S,P=Math.cos(x),M=E*S,C=a(T,P,M,v,m);f[_+0]=C*T,f[_+1]=C*P,f[_+2]=C*M,h[_+0]=T,h[_+1]=P,h[_+2]=M,p[b+0]=v,p[b+1]=1-m}for(var I=i+1,R=0;R<i;R++)for(var k=0;k<n;k++){var j=6*(R*n+k);d[j+0]=k*I+R,d[j+1]=k*I+R+1,d[j+2]=(k+1)*I+R,d[j+3]=(k+1)*I+R,d[j+4]=k*I+R+1,d[j+5]=(k+1)*I+R+1}return{indices:{size:1,value:d},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:h},TEXCOORD_0:{size:2,value:p}}}}var W=n(306),X=n(644);function Y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function Q(t){return t-Math.fround(t)}var Z={ONE:1};var K={name:"fp64",vs:"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n",fs:null,dependencies:[{name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fs:null,getUniforms:function(){return Z},fp64ify:Y,fp64LowPart:Q}],fp64ify:Y,fp64LowPart:Q,fp64ifyMatrix4:function(t){for(var e=new Float32Array(32),n=0;n<4;++n)for(var r=0;r<4;++r){var i=4*n+r;Y(t[4*r+n],e,2*i)}return e}},J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$={modelMatrix:J,viewMatrix:J,projectionMatrix:J,cameraPositionWorld:[0,0,0]};var tt="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",et={name:"project",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e={};return void 0!==t.modelMatrix&&(e.modelMatrix=t.modelMatrix),void 0!==t.viewMatrix&&(e.viewMatrix=t.viewMatrix),void 0!==t.projectionMatrix&&(e.projectionMatrix=t.projectionMatrix),void 0!==t.cameraPositionWorld&&(e.cameraPositionWorld=t.cameraPositionWorld),void 0===t.projectionMatrix&&void 0===t.viewMatrix||(e.viewProjectionMatrix=new D.Matrix4(t.projectionMatrix).multiplyRight(t.viewMatrix)),e},vs:"".concat(tt,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(tt)},nt={lightDirection:new Float32Array([1,1,2])};var rt={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e={};return t.lightDirection&&(e.dirlight_uLightDirection=t.lightDirection),e},dependencies:[et]},it=n(630),ot=n(658),at=n(657),st=n(31)},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"i",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"h",(function(){return d}));var r=n(22),i=function(t){return"boolean"===typeof t},o=function(t){return"function"===typeof t},a=function(t){return null!==t&&"object"===Object(r.a)(t)},s=function(t){return a(t)&&t.constructor==={}.constructor},u=function(t){return t&&"function"===typeof t[Symbol.iterator]},c=function(t){return t&&"function"===typeof t[Symbol.asyncIterator]},l=function(t){return t&&o(t.next)},f=function(t){return"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},h=function(t){return"undefined"!==typeof Blob&&t instanceof Blob},p=function(t){return t&&"object"===Object(r.a)(t)&&t.isBuffer},d=function(t){return function(t){return"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||a(t)&&o(t.tee)&&o(t.cancel)&&o(t.getReader)}(t)||function(t){return a(t)&&o(t.read)&&o(t.pipe)&&i(t.readable)}(t)}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return D})),n.d(e,"e",(function(){return L})),n.d(e,"c",(function(){return k})),n.d(e,"m",(function(){return z})),n.d(e,"d",(function(){return W})),n.d(e,"g",(function(){return X})),n.d(e,"l",(function(){return x})),n.d(e,"p",(function(){return E})),n.d(e,"q",(function(){return I})),n.d(e,"n",(function(){return R})),n.d(e,"r",(function(){return _})),n.d(e,"o",(function(){return w})),n.d(e,"h",(function(){return O})),n.d(e,"f",(function(){return S})),n.d(e,"b",(function(){return T})),n.d(e,"k",(function(){return P})),n.d(e,"i",(function(){return C})),n.d(e,"j",(function(){return M}));var r=n(18),i=n(12),o=n(1),a=n(2),s=n(41);function u(t,e){var n=s.n([],e,t);return s.k(n,n,1/n[3]),n}function c(t,e){var n=t%e;return n<0?e+n:n}function l(t,e,n){return n*e+(1-n)*t}var f=n(27),h=n(43),p=n(29);function d(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var g=Math.PI,y=g/4,v=g/180,m=180/g,A=512,b=4003e4;function _(t){return Math.pow(2,t)}function w(t){return Math.log2(t)}function x(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];d(Number.isFinite(n)),d(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var o=r*v;return[A*(n*v+g)/(2*g),A*(g+Math.log(Math.tan(y+.5*o)))/(2*g)]}function E(t){var e=Object(i.a)(t,2),n=e[0],r=e[1],o=n/A*(2*g)-g,a=2*(Math.atan(Math.exp(r/A*(2*g)-g))-y);return[o*m,a*m]}function O(t){var e=t.latitude;d(Number.isFinite(e));var n=Math.cos(e*v);return w(b*n)-9}function S(t){var e=t.latitude,n=t.longitude,r=t.highPrecision,i=void 0!==r&&r;d(Number.isFinite(e)&&Number.isFinite(n));var o={},a=Math.cos(e*v),s=512/360,u=s/a,c=12790407194604047e-21/a;if(o.unitsPerMeter=[c,c,c],o.metersPerUnit=[1/c,1/c,1/c],o.unitsPerDegree=[s,u,c],o.degreesPerUnit=[.703125,1/u,1/c],i){var l=v*Math.tan(e*v)/a,f=s*l/2,h=12790407194604047e-21*l,p=h/u*c;o.unitsPerDegree2=[0,f,h],o.unitsPerMeter2=[p,0,p]}return o}function T(t,e){var n=Object(i.a)(t,3),r=n[0],o=n[1],a=n[2],s=Object(i.a)(e,3),u=s[0],c=s[1],l=s[2],f=S({longitude:r,latitude:o,highPrecision:!0}),h=f.unitsPerMeter,p=f.unitsPerMeter2,d=x(t);d[0]+=u*(h[0]+p[0]*c),d[1]+=c*(h[1]+p[1]*c);var g=E(d),y=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[g[0],g[1],y]:g}function P(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.scale,a=t.center,s=void 0===a?null:a,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return f.p(u,u,[0,0,-i]),f.l(u,u,-n*v),f.n(u,u,r*v),o/=e,f.o(u,u,[o,o,o]),s&&f.p(u,u,p.i([],s)),u}function M(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?1.5:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,c=t.farZMultiplier,l=void 0===c?1:c,f=a*v,h=Math.atan(.5/i),p=Math.sin(h)*i/Math.sin(Math.min(Math.max(Math.PI/2-f-h,.01),Math.PI-.01));return{fov:2*h,aspect:e/n,focalDistance:i,near:u,far:(Math.sin(f)*p+i)*l}}function C(t){var e=t.width,n=t.height,r=t.pitch,i=M({width:e,height:n,altitude:t.altitude,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),o=i.fov,a=i.aspect,s=i.near,u=i.far;return f.j([],o,a,s,u)}function I(t,e){var n=Object(i.a)(t,3),r=n[0],o=n[1],a=n[2],s=void 0===a?0:a;return d(Number.isFinite(r)&&Number.isFinite(o)&&Number.isFinite(s)),u(e,[r,o,s,1])}function R(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(i.a)(t,3),o=r[0],a=r[1],s=r[2];if(d(Number.isFinite(o)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(s)){var c=u(e,[o,a,s,1]);return c}var l=u(e,[o,a,0,1]),f=u(e,[o,a,1,1]),p=l[2],g=f[2],y=p===g?0:((n||0)-p)/(g-p);return h.c([],l,f,y)}function k(t){var e=t.width,n=t.height,r=t.bounds,o=t.minExtent,a=void 0===o?0:o,s=t.maxZoom,u=void 0===s?24:s,c=t.padding,l=void 0===c?0:c,f=t.offset,h=void 0===f?[0,0]:f,p=Object(i.a)(r,2),g=Object(i.a)(p[0],2),y=g[0],v=g[1],m=Object(i.a)(p[1],2),A=m[0],b=m[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else d(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var _=new D({width:e,height:n,longitude:0,latitude:0,zoom:0}),w=_.project([y,b]),x=_.project([A,v]),E=[Math.max(Math.abs(x[0]-w[0]),a),Math.max(Math.abs(x[1]-w[1]),a)],O=[e-l.left-l.right-2*Math.abs(h[0]),n-l.top-l.bottom-2*Math.abs(h[1])];d(O[0]>0&&O[1]>0);var S=O[0]/E[0],T=O[1]/E[1],P=(l.right-l.left)/2/S,M=(l.bottom-l.top)/2/T,C=[(x[0]+w[0])/2+P,(x[1]+w[1])/2+M],I=_.unproject(C),R=Math.min(u,_.zoom+Math.log2(Math.abs(Math.min(S,T))));return d(Number.isFinite(R)),{longitude:I[0],latitude:I[1],zoom:R}}var j=Math.PI/180;function L(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.width,o=t.height,a=t.unproject,s={targetZ:r},u=a([0,o],s),c=a([i,o],s),l=Math.atan(.5/t.altitude),f=(90-t.pitch)*j;return l>f-.01?(e=N(t,0,r),n=N(t,i,r)):(e=a([0,0],s),n=a([i,0],s)),[u,c,n,e]}function N(t,e,n){var r=t.pixelUnprojectionMatrix,i=u(r,[e,0,1,1]),o=u(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),s=E(h.c([],i,o,a));return s[2]=n,s}var D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},n=e.width,r=e.height,i=e.latitude,a=void 0===i?0:i,s=e.longitude,u=void 0===s?0:s,c=e.zoom,l=void 0===c?0:c,f=e.pitch,h=void 0===f?0:f,p=e.bearing,d=void 0===p?0:p,g=e.altitude,y=void 0===g?1.5:g,v=e.nearZMultiplier,m=void 0===v?.02:v,A=e.farZMultiplier,b=void 0===A?1.01:A;Object(o.a)(this,t),n=n||1,r=r||1;var w=_(l);y=Math.max(.75,y);var E=x([u,a]);E[2]=0,this.projectionMatrix=C({width:n,height:r,pitch:h,altitude:y,nearZMultiplier:m,farZMultiplier:b}),this.viewMatrix=P({height:r,scale:w,center:E,pitch:h,bearing:d,altitude:y}),this.width=n,this.height=r,this.scale=w,this.latitude=a,this.longitude=u,this.zoom=l,this.pitch=h,this.bearing=d,this.altitude=y,this.center=E,this.distanceScales=S(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return Object(a.a)(t,[{key:"_initMatrices",value:function(){var t=this.width,e=this.height,n=this.projectionMatrix,r=this.viewMatrix,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];f.h(i,i,n),f.h(i,i,r),this.viewProjectionMatrix=i;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];f.o(o,o,[t/2,-e/2,1]),f.p(o,o,[1,-1,0]),f.h(o,o,i);var a=f.f([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}},{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&f.b(e.projectionMatrix,this.projectionMatrix)&&f.b(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,o=this.projectPosition(t),a=I(o,this.pixelProjectionMatrix),s=Object(i.a)(a,2),u=s[0],c=s[1],l=r?c:this.height-c;return 2===t.length?[u,l]:[u,l,a[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,o=e.targetZ,a=void 0===o?void 0:o,s=Object(i.a)(t,3),u=s[0],c=s[1],l=s[2],f=r?c:this.height-c,h=a&&a*this.distanceScales.unitsPerMeter[2],p=R([u,f,l],this.pixelUnprojectionMatrix,h),d=this.unprojectPosition(p),g=Object(i.a)(d,3),y=g[0],v=g[1],m=g[2];return Number.isFinite(l)?[y,v,m]:Number.isFinite(a)?[y,v,a]:[y,v]}},{key:"projectPosition",value:function(t){var e=x(t),n=Object(i.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=E(t),n=Object(i.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return x(t)}},{key:"unprojectFlat",value:function(t){return E(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=R(t.pos,this.pixelUnprojectionMatrix),r=x(e),i=h.a([],r,h.d([],n));return E(h.a([],this.center,i))}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=k(Object.assign({width:r,height:i,bounds:e},n)),a=o.longitude,s=o.latitude,u=o.zoom;return new t({width:r,height:i,longitude:a,latitude:s,zoom:u})}},{key:"getBounds",value:function(t){var e=this.getBoundingRegion(t),n=Math.min.apply(Math,Object(r.a)(e.map((function(t){return t[0]})))),i=Math.max.apply(Math,Object(r.a)(e.map((function(t){return t[0]}))));return[[n,Math.min.apply(Math,Object(r.a)(e.map((function(t){return t[1]}))))],[i,Math.max.apply(Math,Object(r.a)(e.map((function(t){return t[1]}))))]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(this,t.z||0)}}]),t}(),F=85.05113,B=-85.05113;function z(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,o=t.zoom,a=t.pitch,s=void 0===a?0:a,u=t.bearing,l=void 0===u?0:u;(r<-180||r>180)&&(r=c(r+180,360)-180),(l<-180||l>180)&&(l=c(l+180,360)-180);var f=new D({width:e,height:n,longitude:r,latitude:i,zoom:o}),h=f.project([r,F])[1],p=f.project([r,B])[1],d=0;return p-h<n&&(o+=Math.log2(n/(p-h)),h=(f=new D({width:e,height:n,longitude:r,latitude:i,zoom:o})).project([r,F])[1],p=f.project([r,B])[1]),h>0?d=h:p<n&&(d=p-n),d&&(i=f.unproject([e/2,n/2+d])[1]),{width:e,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:l}}function U(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V=.01,q=["longitude","latitude","zoom"],H={curve:1.414,speed:1.2};function W(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},o=Y(t,e,r),a=o.startZoom,s=o.startCenterXY,u=o.uDelta,c=o.w0,f=o.u1,p=o.S,d=o.rho,g=o.rho2,y=o.r0;if(f<V){var v,m=U(q);try{for(m.s();!(v=m.n()).done;){var A=v.value,b=t[A],_=e[A];i[A]=l(b,_,n)}}catch(I){m.e(I)}finally{m.f()}return i}var x=n*p,O=Math.cosh(y)/Math.cosh(y+d*x),S=c*((Math.cosh(y)*Math.tanh(y+d*x)-Math.sinh(y))/g)/f,T=1/O,P=a+w(T),M=h.e([],u,S);h.a(M,M,s);var C=E(M);return i.longitude=C[0],i.latitude=C[1],i.zoom=P,i}function X(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=Object.assign({},H,r),o=i.screenSpeed,a=i.speed,s=i.maxDuration,u=Y(t,e,r),c=u.S,l=u.rho,f=1e3*c;return n=Number.isFinite(o)?f/(o/l):f/a,Number.isFinite(s)&&n>s?0:n}function Y(t,e,n){var r=(n=Object.assign({},H,n)).curve,i=t.zoom,o=[t.longitude,t.latitude],a=_(i),s=e.zoom,u=[e.longitude,e.latitude],c=_(s-i),l=x(o),f=x(u),p=h.f([],f,l),d=Math.max(t.width,t.height),g=d/c,y=h.b(p)*a,v=Math.max(y,V),m=r*r,A=(g*g-d*d+m*m*v*v)/(2*d*m*v),b=(g*g-d*d-m*m*v*v)/(2*g*m*v),w=Math.log(Math.sqrt(A*A+1)-A),E=Math.log(Math.sqrt(b*b+1)-b);return{startZoom:i,startCenterXY:l,uDelta:p,w0:d,u1:y,S:(E-w)/r,rho:r,rho2:m,r0:w,r1:E}}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(427)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={};function i(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}n.r(r),n.d(r,"dirname",(function(){return i}))},function(t,e,n){"use strict";(function(t){var r=n(20),i=n(320);n.d(e,"d",(function(){return i.a}));var o=n(135);n.d(e,"e",(function(){return o.a}));var a=n(321);n.d(e,"f",(function(){return a.a}));var s=n(322);n.d(e,"a",(function(){return s.a}));var u=n(162);n.d(e,"b",(function(){return u.a}));var c=n(188);n.d(e,"c",(function(){return c.a})),n.d(e,"r",(function(){return r.f})),n.d(e,"s",(function(){return r.g})),n.d(e,"x",(function(){return r.l})),n.d(e,"y",(function(){return r.m})),n.d(e,"q",(function(){return r.e})),n.d(e,"v",(function(){return r.j})),n.d(e,"w",(function(){return r.k})),n.d(e,"E",(function(){return r.s})),n.d(e,"D",(function(){return r.r})),n.d(e,"A",(function(){return r.o})),n.d(e,"u",(function(){return r.i})),n.d(e,"B",(function(){return r.p})),n.d(e,"t",(function(){return r.h})),n.d(e,"C",(function(){return r.q})),n.d(e,"l",(function(){return r.b})),n.d(e,"k",(function(){return r.a})),n.d(e,"n",(function(){return r.c})),n.d(e,"p",(function(){return r.d})),n.d(e,"z",(function(){return r.n})),n.d(e,"F",(function(){return r.t}));var l=n(23);n.d(e,"o",(function(){return l.a}));var f=n(323);n.d(e,"h",(function(){return f.a}));var h=n(324);n.d(e,"j",(function(){return h.a}));var p=n(325);n.d(e,"i",(function(){return p.a}));var d=n(163);n.d(e,"g",(function(){return d.a}));var g=n(72);n.d(e,"m",(function(){return g.a}));var y={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof t&&t};(y.global||y.self||y.window).mathgl={config:r.f}}).call(this,n(62))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));n(19);function r(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function i(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"k",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"m",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"i",(function(){return d})),n.d(e,"n",(function(){return g})),n.d(e,"o",(function(){return y})),n.d(e,"f",(function(){return v})),n.d(e,"e",(function(){return m}));var r=n(17);function i(t){var e=new r.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e,n,i){var o=new r.a(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function c(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function l(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function d(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function y(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t[3]=e[3],t}function v(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function m(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.b*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.b*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=r.b*Math.max(1,Math.abs(a),Math.abs(l))}!function(){var t=function(){var t=new r.a(4);return r.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}()},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"f",(function(){return p}));var r=n(17);function i(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function o(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function a(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function s(t,e){return t[0]=-e[0],t[1]=-e[1],t}function u(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function c(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function l(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function f(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function h(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var p=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};!function(){var t=function(){var t=new r.a(2);return r.a!=Float32Array&&(t[0]=0,t[1]=0),t}()}()},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return _}));var r=n(8),i=n(14),o=n(21),a=n(7),s=n(257),u=n(304),c=n.n(u),l=(n(201),r.createContext&&Object(r.createContext)(void 0)),f=function(t,e){function n(e){if(!e||!e.client)throw new o.a;return t.children(e.client)}return l?Object(r.createElement)(l.Consumer,null,n):n(e)};f.contextTypes={client:i.object.isRequired},f.propTypes={children:i.func.isRequired};var h,p=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.operations=new Map,Object(o.b)(e.client),e.client.__operations_cache__||(e.client.__operations_cache__=r.operations),r}return Object(a.c)(e,t),e.prototype.getChildContext=function(){return{client:this.props.client,operations:this.props.client.__operations_cache__}},e.prototype.render=function(){return l?Object(r.createElement)(l.Provider,{value:this.getChildContext()},this.props.children):this.props.children},e.propTypes={client:i.object.isRequired,children:i.node.isRequired},e.childContextTypes={client:i.object.isRequired,operations:i.object},e}(r.Component);!function(t){t[t.Query=0]="Query",t[t.Mutation=1]="Mutation",t[t.Subscription=2]="Subscription"}(h||(h={}));var d=new Map;function g(t){var e,n,r=d.get(t);if(r)return r;Object(o.b)(!!t&&!!t.kind);var i=t.definitions.filter((function(t){return"FragmentDefinition"===t.kind})),a=t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&"query"===t.operation})),s=t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation})),u=t.definitions.filter((function(t){return"OperationDefinition"===t.kind&&"subscription"===t.operation}));Object(o.b)(!i.length||a.length||s.length||u.length),Object(o.b)(a.length+s.length+u.length<=1),n=a.length?h.Query:h.Mutation,a.length||s.length||(n=h.Subscription);var c=a.length?a:s.length?s:u;Object(o.b)(1===c.length);var l=c[0];e=l.variableDefinitions||[];var f={name:l.name&&"Name"===l.name.kind?l.name.value:"data",type:n,variables:e};return d.set(t,f),f}function y(t,e){var n=t.client||e.client;return Object(o.b)(!!n),n}var v=Object.prototype.hasOwnProperty;function m(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function A(t){return null!==t&&"object"===typeof t}function b(t,e){if(m(t,e))return!0;if(!A(t)||!A(e))return!1;var n=Object.keys(t);return n.length===Object.keys(e).length&&n.every((function(n){return v.call(e,n)&&m(t[n],e[n])}))}var _=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.hasMounted=!1,r.lastRenderedResult=null,r.startQuerySubscription=function(){r.querySubscription||(r.querySubscription=r.queryObservable.subscribe({next:function(t){r.lastRenderedResult&&r.lastRenderedResult.loading===t.loading&&r.lastRenderedResult.networkStatus===t.networkStatus&&b(r.lastRenderedResult.data,t.data)||r.updateCurrentData()},error:function(t){if(r.resubscribeToQuery(),!t.hasOwnProperty("graphQLErrors"))throw t;r.updateCurrentData()}}))},r.removeQuerySubscription=function(){r.querySubscription&&(r.querySubscription.unsubscribe(),delete r.lastRenderedResult,delete r.querySubscription)},r.updateCurrentData=function(){r.handleErrorOrCompleted(),r.hasMounted&&r.forceUpdate()},r.handleErrorOrCompleted=function(){var t=r.queryObservable.currentResult(),e=t.data,n=t.loading,i=t.error,o=r.props,a=o.onCompleted,s=o.onError;!a||n||i?s&&!n&&i&&s(i):a(e)},r.getQueryResult=function(){var t,e={data:Object.create(null)};if(Object.assign(e,{variables:(t=r.queryObservable).variables,refetch:t.refetch.bind(t),fetchMore:t.fetchMore.bind(t),updateQuery:t.updateQuery.bind(t),startPolling:t.startPolling.bind(t),stopPolling:t.stopPolling.bind(t),subscribeToMore:t.subscribeToMore.bind(t)}),r.props.skip)e=Object(a.a)({},e,{data:void 0,error:void 0,loading:!1});else{var n=r.queryObservable.currentResult(),i=n.loading,o=n.partial,u=n.networkStatus,c=n.errors,l=n.error;c&&c.length>0&&(l=new s.b({graphQLErrors:c}));var f=r.queryObservable.options.fetchPolicy;Object.assign(e,{loading:i,networkStatus:u,error:l});var h=r.lastRenderedResult?r.lastRenderedResult.data:{};if(i)Object.assign(e.data,h,n.data);else if(l)Object.assign(e,{data:(r.queryObservable.getLastResult()||{}).data});else if("no-cache"===f&&0===Object.keys(n.data).length)e.data=h;else{if(r.props.partialRefetch&&null!==n.data&&"object"===typeof n.data&&0===Object.keys(n.data).length&&o&&"cache-only"!==f)return Object.assign(e,{loading:!0,networkStatus:s.c.loading}),e.refetch(),r.lastRenderedResult=e,e;Object.assign(e.data,n.data)}}if(!r.querySubscription){var p=e.refetch;e.refetch=function(t){return r.querySubscription?p(t):new Promise((function(e,n){r.refetcherQueue={resolve:e,reject:n,args:t}}))}}return setTimeout((function(){if(r.queryObservable.resetQueryStoreErrors)r.queryObservable.resetQueryStoreErrors();else{var t=r.queryObservable,e=t.queryManager,n=t.queryId,i=e.queryStore.get(n);i&&(i.networkError=null,i.graphQLErrors=[])}})),e.client=r.client,r.lastRenderedResult=e,e},r.client=y(e,n),r.initializeQueryObservable(e),r}return Object(a.c)(e,t),e.prototype.fetchData=function(){if(this.props.skip)return!1;var t=this.props,e=(t.children,t.ssr),n=(t.displayName,t.skip,t.client,t.onCompleted,t.onError,t.partialRefetch,Object(a.e)(t,["children","ssr","displayName","skip","client","onCompleted","onError","partialRefetch"])),r=n.fetchPolicy;if(!1===e)return!1;"network-only"!==r&&"cache-and-network"!==r||(r="cache-first");var i=this.client.watchQuery(Object(a.a)({},n,{fetchPolicy:r}));return this.context&&this.context.renderPromises&&this.context.renderPromises.registerSSRObservable(this,i),!!this.queryObservable.currentResult().loading&&i.result()},e.prototype.componentDidMount=function(){if(this.hasMounted=!0,!this.props.skip&&(this.startQuerySubscription(),this.refetcherQueue)){var t=this.refetcherQueue,e=t.args,n=t.resolve,r=t.reject;this.queryObservable.refetch(e).then(n).catch(r)}},e.prototype.componentWillReceiveProps=function(t,e){if(t.skip&&!this.props.skip)return this.queryObservable.resetLastResults(),void this.removeQuerySubscription();var n=y(t,e);b(this.props,t)&&this.client===n||(this.client!==n&&(this.client=n,this.removeQuerySubscription(),this.queryObservable=null),this.props.query!==t.query&&(this.queryObservable.resetLastResults(),this.removeQuerySubscription()),this.updateQuery(t),t.skip||this.startQuerySubscription())},e.prototype.componentWillUnmount=function(){this.removeQuerySubscription(),this.hasMounted=!1},e.prototype.componentDidUpdate=function(t){(!c()(t.query,this.props.query)||!c()(t.variables,this.props.variables))&&this.handleErrorOrCompleted()},e.prototype.render=function(){var t=this,e=this.context,n=function(){return t.props.children(t.getQueryResult())};return e&&e.renderPromises?e.renderPromises.addQueryPromise(this,n):n()},e.prototype.extractOptsFromProps=function(t){this.operation=g(t.query),Object(o.b)(this.operation.type===h.Query);var e=t.displayName||"Query";return Object(a.a)({},t,{displayName:e,context:t.context||{},metadata:{reactComponent:{displayName:e}}})},e.prototype.initializeQueryObservable=function(t){var e=this.extractOptsFromProps(t);this.setOperations(e),this.context&&this.context.renderPromises&&(this.queryObservable=this.context.renderPromises.getSSRObservable(this)),this.queryObservable||(this.queryObservable=this.client.watchQuery(e))},e.prototype.setOperations=function(t){this.context.operations&&this.context.operations.set(this.operation.name,{query:t.query,variables:t.variables})},e.prototype.updateQuery=function(t){this.queryObservable?this.setOperations(t):this.initializeQueryObservable(t),this.queryObservable.setOptions(this.extractOptsFromProps(t)).catch((function(){return null}))},e.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var t=this.queryObservable.getLastError(),e=this.queryObservable.getLastResult();this.queryObservable.resetLastResults(),this.startQuerySubscription(),Object.assign(this.queryObservable,{lastError:t,lastResult:e})},e.contextTypes={client:i.object,operations:i.object,renderPromises:i.object},e.propTypes={client:i.object,children:i.func.isRequired,fetchPolicy:i.string,notifyOnNetworkStatusChange:i.bool,onCompleted:i.func,onError:i.func,pollInterval:i.number,query:i.object.isRequired,variables:i.object,ssr:i.bool,partialRefetch:i.bool,returnPartialData:i.bool},e}(r.Component),w={loading:!1,called:!1,error:void 0,data:void 0},x=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.hasMounted=!1,r.runMutation=function(t){void 0===t&&(t={}),r.onMutationStart();var e=r.generateNewMutationId();return r.mutate(t).then((function(t){return r.onMutationCompleted(t,e),t})).catch((function(t){if(r.onMutationError(t,e),!r.props.onError)throw t}))},r.mutate=function(t){var e=r.props,n=e.mutation,i=e.variables,o=e.optimisticResponse,s=e.update,u=e.context,c=void 0===u?{}:u,l=e.awaitRefetchQueries,f=void 0!==l&&l,h=e.fetchPolicy,p=Object(a.a)({},t),d=p.refetchQueries||r.props.refetchQueries;d&&d.length&&Array.isArray(d)&&(d=d.map((function(t){return"string"===typeof t&&r.context.operations&&r.context.operations.get(t)||t})),delete p.refetchQueries);var g=Object.assign({},i,p.variables);return delete p.variables,r.client.mutate(Object(a.a)({mutation:n,optimisticResponse:o,refetchQueries:d,awaitRefetchQueries:f,update:s,context:c,fetchPolicy:h,variables:g},p))},r.onMutationStart=function(){r.state.loading||r.props.ignoreResults||r.setState({loading:!0,error:void 0,data:void 0,called:!0})},r.onMutationCompleted=function(t,e){var n=r.props,i=n.onCompleted,o=n.ignoreResults,a=t.data,u=t.errors,c=u&&u.length>0?new s.b({graphQLErrors:u}):void 0,l=function(){return i?i(a):null};r.hasMounted&&r.isMostRecentMutation(e)&&!o?r.setState({loading:!1,data:a,error:c},l):l()},r.onMutationError=function(t,e){var n=r.props.onError,i=function(){return n?n(t):null};r.hasMounted&&r.isMostRecentMutation(e)?r.setState({loading:!1,error:t},i):i()},r.generateNewMutationId=function(){return r.mostRecentMutationId=r.mostRecentMutationId+1,r.mostRecentMutationId},r.isMostRecentMutation=function(t){return r.mostRecentMutationId===t},r.verifyDocumentIsMutation=function(t){var e=g(t);Object(o.b)(e.type===h.Mutation)},r.client=y(e,n),r.verifyDocumentIsMutation(e.mutation),r.mostRecentMutationId=0,r.state=w,r}return Object(a.c)(e,t),e.prototype.componentDidMount=function(){this.hasMounted=!0},e.prototype.componentWillUnmount=function(){this.hasMounted=!1},e.prototype.componentWillReceiveProps=function(t,e){var n=y(t,e);b(this.props,t)&&this.client===n||(this.props.mutation!==t.mutation&&this.verifyDocumentIsMutation(t.mutation),this.client!==n&&(this.client=n,this.setState(w)))},e.prototype.render=function(){var t=this.props.children,e=this.state,n=e.loading,r=e.data,i=e.error,o={called:e.called,loading:n,data:r,error:i,client:this.client};return t(this.runMutation,o)},e.contextTypes={client:i.object,operations:i.object},e.propTypes={mutation:i.object.isRequired,variables:i.object,optimisticResponse:i.object,refetchQueries:Object(i.oneOfType)([Object(i.arrayOf)(Object(i.oneOfType)([i.string,i.object])),i.func]),awaitRefetchQueries:i.bool,update:i.func,children:i.func.isRequired,onCompleted:i.func,onError:i.func,fetchPolicy:i.string},e}(r.Component);!function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.initialize=function(t){r.queryObservable||(r.queryObservable=r.client.subscribe({query:t.subscription,variables:t.variables,fetchPolicy:t.fetchPolicy}))},r.startSubscription=function(){r.querySubscription||(r.querySubscription=r.queryObservable.subscribe({next:r.updateCurrentData,error:r.updateError,complete:r.completeSubscription}))},r.getInitialState=function(){return{loading:!0,error:void 0,data:void 0}},r.updateCurrentData=function(t){var e=r,n=e.client,i=e.props.onSubscriptionData;r.setState({data:t.data,loading:!1,error:void 0}),i&&i({client:n,subscriptionData:t})},r.updateError=function(t){r.setState({error:t,loading:!1})},r.completeSubscription=function(){var t=r.props.onSubscriptionComplete;t&&t(),r.endSubscription()},r.endSubscription=function(){r.querySubscription&&(r.querySubscription.unsubscribe(),delete r.querySubscription)},r.client=y(e,n),r.initialize(e),r.state=r.getInitialState(),r}Object(a.c)(e,t),e.prototype.componentDidMount=function(){this.startSubscription()},e.prototype.componentWillReceiveProps=function(t,e){var n=y(t,e);if(!b(this.props.variables,t.variables)||this.client!==n||this.props.subscription!==t.subscription){var r=t.shouldResubscribe;"function"===typeof r&&(r=!!r(this.props,t));var i=!1===r;if(this.client!==n&&(this.client=n),!i)return this.endSubscription(),delete this.queryObservable,this.initialize(t),this.startSubscription(),void this.setState(this.getInitialState());this.initialize(t),this.startSubscription()}},e.prototype.componentWillUnmount=function(){this.endSubscription()},e.prototype.render=function(){var t=this.props.children;return t?t(Object.assign({},this.state,{variables:this.props.variables})):null},e.contextTypes={client:i.object},e.propTypes={subscription:i.object.isRequired,variables:i.object,children:i.func,onSubscriptionData:i.func,onSubscriptionComplete:i.func,shouldResubscribe:Object(i.oneOfType)([i.func,i.bool])}}(r.Component);!function(t){function e(e){var n=t.call(this,e)||this;return n.withRef=!1,n.setWrappedInstance=n.setWrappedInstance.bind(n),n}Object(a.c)(e,t),e.prototype.getWrappedInstance=function(){return Object(o.b)(this.withRef),this.wrappedInstance},e.prototype.setWrappedInstance=function(t){this.wrappedInstance=t}}(r.Component);!function(){function t(){this.queryPromises=new Map,this.queryInfoTrie=new Map}t.prototype.registerSSRObservable=function(t,e){this.lookupQueryInfo(t).observable=e},t.prototype.getSSRObservable=function(t){return this.lookupQueryInfo(t).observable},t.prototype.addQueryPromise=function(t,e){return this.lookupQueryInfo(t).seen?e():(this.queryPromises.set(t,new Promise((function(e){e(t.fetchData())}))),null)},t.prototype.hasPromises=function(){return this.queryPromises.size>0},t.prototype.consumeAndAwaitPromises=function(){var t=this,e=[];return this.queryPromises.forEach((function(n,r){t.lookupQueryInfo(r).seen=!0,e.push(n)})),this.queryPromises.clear(),Promise.all(e)},t.prototype.lookupQueryInfo=function(t){var e=this.queryInfoTrie,n=t.props,r=n.query,i=n.variables,o=e.get(r)||new Map;e.has(r)||e.set(r,o);var a=JSON.stringify(i),s=o.get(a)||{seen:!1,observable:null};return o.has(a)||o.set(a,s),s}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}));n(19);function r(t,e,n){if(null!==t)for(var i,o,a,s,u,c,l,f,h=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,v=g?t.features.length:1,m=0;m<v;m++){u=(f=!!(l=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var A=0;A<u;A++){var b=0,_=0;if(null!==(s=f?l.geometries[A]:l)){c=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,m,b,_))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],p,m,b,_))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-h;o++){if(!1===e(c[i][o],p,m,b,_))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for("MultiPolygon"===w&&(_=0),o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-h;a++){if(!1===e(c[i][o][a],p,m,b,_))return!1;p++}_++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function o(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function a(t,e,n){var r=n;return o(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0);function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){Object(r.a)(t,e,n[e])}))}return t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n(26),i={};function o(t){i=t}function a(t){var e;r.a.level>0&&i[t]&&(e=i[t]).call.apply(e,arguments)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},i={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")}},function(t,e,n){"use strict";function r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,"a",(function(){return r}))},function(t,e,n){var r=n(626).parse;function i(t){return t.replace(/[\s,]+/g," ").trim()}var o={},a={};var s=!0;function u(t,e){var n=Object.prototype.toString.call(t);if("[object Array]"===n)return t.map((function(t){return u(t,e)}));if("[object Object]"!==n)throw new Error("Unexpected input.");e&&t.loc&&delete t.loc,t.loc&&(delete t.loc.startToken,delete t.loc.endToken);var r,i,o,a=Object.keys(t);for(r in a)a.hasOwnProperty(r)&&(i=t[a[r]],"[object Object]"!==(o=Object.prototype.toString.call(i))&&"[object Array]"!==o||(t[a[r]]=u(i,!0)));return t}var c=!1;function l(t){var e=i(t);if(o[e])return o[e];var n=r(t,{experimentalFragmentVariables:c});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=u(n=function(t){for(var e,n={},r=[],o=0;o<t.definitions.length;o++){var u=t.definitions[o];if("FragmentDefinition"===u.kind){var c=u.name.value,l=i((e=u.loc).source.body.substring(e.start,e.end));a.hasOwnProperty(c)&&!a[c][l]?(s&&console.warn("Warning: fragment with name "+c+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),a[c][l]=!0):a.hasOwnProperty(c)||(a[c]={},a[c][l]=!0),n[l]||(n[l]=!0,r.push(u))}else r.push(u)}return t.definitions=r,t}(n),!1),o[e]=n,n}function f(){for(var t=Array.prototype.slice.call(arguments),e=t[0],n="string"===typeof e?e:e[0],r=1;r<t.length;r++)t[r]&&t[r].kind&&"Document"===t[r].kind?n+=t[r].loc.source.body:n+=t[r],n+=e[r];return l(n)}f.default=f,f.resetCaches=function(){o={},a={}},f.disableFragmentWarnings=function(){s=!1},f.enableExperimentalFragmentVariables=function(){c=!0},f.disableExperimentalFragmentVariables=function(){c=!1},t.exports=f},function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var r=n(1),i=n(2),o=n(6),a=n(3),s=n(40),u=n(5),c=n(58),l=n(90),f=n(97),h=n(121),p=n(10),d=n(308),g=n(31),y={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},v={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:y},m={removedProps:y},A=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(o.a)(this,Object(a.a)(e).call(this,t,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=i.target||(n.gl.webgl2?36662:34962),n.initialize(i),Object.seal(Object(s.a)(n)),n}return Object(u.a)(e,t),Object(i.a)(e,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerVertex(t))}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(d.a)("Buffer",t,v),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}},{key:"setProps",value:function(t){return"accessor"in(t=Object(d.a)("Buffer",t,m))&&this.setAccessor(t.accessor),this}},{key:"setAccessor",value:function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new l.a(t),this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,n=e.data,r=e.offset,i=void 0===r?0:r,o=e.srcOffset,a=void 0===o?0:o,s=t.byteLength||t.length;Object(g.a)(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==a||void 0!==s?(Object(f.a)(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,o=void 0===i?0:i,a=t.size,s=this.gl;return Object(f.a)(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,o=t.dstOffset,a=void 0===o?0:o,s=t.length,u=void 0===s?0:s;Object(f.a)(this.gl);var c,l,p=Object(h.c)(this.accessor.type||5126,{clamped:!1}),d=this._getAvailableElementCount(i),y=a;n?c=(l=n.length)-y:l=y+(c=Math.min(d,u||d));var v=Math.min(d,c);return u=u||v,Object(g.a)(u<=v),n=n||new p(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=t.offset,a=void 0===o?0:o,s=t.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(Object(g.a)(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=35345===n||35982===n;return o?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;Object(g.a)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);var i=Object(h.b)(t);return Object(g.a)(i),this.setAccessor(new l.a(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(g.a)(t>=0),this._trackDeallocatedMemory();var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=t/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:"_inferType",value:function(t){this.accessor.type||this.setAccessor(new l.a(this.accessor,{type:Object(h.b)(t)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"setByteLength",value:function(t){return p.h.deprecated("setByteLength","reallocate")(),this.reallocate(t)}},{key:"updateAccessor",value:function(t){return p.h.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new l.a(this.accessor,t),this}},{key:"type",get:function(){return p.h.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return p.h.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),e}(c.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIntermediatePosition=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},e.GeoJsonEditMode=void 0;var r=c(n(442)),i=c(n(206)),o=c(n(443)),a=c(n(628)),s=n(71),u=n(109);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d={type:"FeatureCollection",features:[]},g=[],y=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=[],(n="_clickSequence")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n,c;return e=t,(n=[{key:"getGuides",value:function(t){return d}},{key:"getTooltips",value:function(t){return g}},{key:"getSelectedFeature",value:function(t){return 1===t.selectedIndexes.length?t.data.features[t.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(t){var e=this.getSelectedFeature(t);return e?e.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(t){var e=t.data.features;return{type:"FeatureCollection",features:t.selectedIndexes.map((function(t){return e[t]}))}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(t){var e=t.mapCoords;this._clickSequence.push(e)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(t){return this.getGuides(t).features.find((function(t){return t.properties&&"tentative"===t.properties.guideType}))}},{key:"isSelectionPicked",value:function(t,e){if(!t.length)return!1;var n=(0,s.getNonGuidePicks)(t).map((function(t){return t.index})),r=(0,s.getPickedEditHandles)(t).map((function(t){return t.properties.featureIndex})),i=new Set([].concat(l(n),l(r)));return e.selectedIndexes.some((function(t){return i.has(t)}))}},{key:"rewindPolygon",value:function(t){var e=t.geometry;return"Polygon"===e.type||"MultiPolygon"===e.type?(0,a.default)(t):t}},{key:"getAddFeatureAction",value:function(t,e){var n=t,r="Feature"===n.type?n:{type:"Feature",properties:{},geometry:n},i=this.rewindPolygon(r),o=new u.ImmutableFeatureCollection(e).addFeature(i).getObject();return{updatedData:o,editType:"addFeature",editContext:{featureIndexes:[o.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(t,e){var n,r=t.features,i=new u.ImmutableFeatureCollection(e),o=i.getObject().features.length,a=[],s=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(r);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=c.properties,h=c.geometry;i=i.addFeature({type:"Feature",properties:l,geometry:h}),a.push(o+a.length)}}catch(p){s.e(p)}finally{s.f()}return{updatedData:i.getObject(),editType:"addFeature",editContext:{featureIndexes:a}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(t,e){var n=t,a=this.getSelectedFeature(e),s=e.modeConfig;if(s&&s.booleanOperation){if(!a||"Polygon"!==a.geometry.type&&"MultiPolygon"!==a.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var c,l="Feature"===n.type?n:{type:"Feature",geometry:n};if("union"===s.booleanOperation)c=(0,r.default)(a,l);else if("difference"===s.booleanOperation)c=(0,i.default)(a,l);else{if("intersection"!==s.booleanOperation)return console.warn("Invalid booleanOperation ".concat(s.booleanOperation)),null;c=(0,o.default)(a,l)}if(!c)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var f=e.selectedIndexes[0];return{updatedData:new u.ImmutableFeatureCollection(e.data).replaceGeometry(f,c.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[f]}}}return this.getAddFeatureAction(t,e.data)}},{key:"createTentativeFeature",value:function(t){return null}},{key:"handleClick",value:function(t,e){}},{key:"handlePointerMove",value:function(t,e){var n=this.createTentativeFeature(e);n&&e.onEdit({updatedData:e.data,editType:"updateTentativeFeature",editContext:{feature:n}})}},{key:"handleStartDragging",value:function(t,e){}},{key:"handleStopDragging",value:function(t,e){}},{key:"handleDragging",value:function(t,e){}},{key:"handleKeyUp",value:function(t,e){"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}])&&p(e.prototype,n),c&&p(e,c),t}();e.GeoJsonEditMode=y},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return y})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return m}));var r=n(95),i=n(13);function o(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a(t,e){var n=t%e;return n<0?e+n:n}function s(t){var e=t.viewMatrix,n=t.viewMatrixInverse;return{eye:[n[12],n[13],n[14]],direction:[-e[2],-e[6],-e[10]],up:[e[1],e[5],e[9]],right:[e[0],e[4],e[8]]}}var u,c=new i.Vector3,l=new i.Vector3,f=new i.Vector3,h=new i.Vector3,p=new i.Vector3,d=new i.Vector3,g=new i.Vector3;function y(t){var e=t.aspect,n=t.near,r=t.far,o=t.fovyRadians,a=t.position,s=t.direction,u=t.up,y=t.right;l.copy(s);var v=1/l.len();l.normalize(),c.copy(a),f.copy(u);var m=1/f.len();f.normalize(),h.copy(y).normalize();var A=2*Math.tan(o/2)*n*m,b=A*e;p.copy(l).scale(n*v).add(c),d.copy(l).scale(r*v).add(c);var _=l.clone().negate(),w=_.dot(p),x={near:{distance:w,normal:_},far:{distance:l.dot(d),normal:l.clone()}};return g.copy(h).scale(.5*b).add(p).subtract(c).normalize(),_=new i.Vector3(g).cross(f),w=c.dot(_),x.right={normal:_,distance:w},g.copy(h).scale(.5*-b).add(p).subtract(c).normalize(),_=new i.Vector3(f).cross(g),w=c.dot(_),x.left={normal:_,distance:w},g.copy(f).scale(.5*A).add(p).subtract(c).normalize(),_=new i.Vector3(h).cross(g),w=c.dot(_),x.top={normal:_,distance:w},g.copy(f).scale(.5*-A).add(p).subtract(c).normalize(),_=new i.Vector3(g).cross(h),w=c.dot(_),x.bottom={normal:_,distance:w},x}function v(t){return t-Math.fround(t)}function m(t,e){var n=e.size,i=void 0===n?1:n,o=e.startIndex,a=void 0===o?0:o,s=e.endIndex;Number.isFinite(s)||(s=t.length);var c=(s-a)/i;u=r.a.allocate(u,c,{type:Float32Array,size:2*i});for(var l=a,f=0;l<s;){for(var h=0;h<i;h++){var p=t[l++];u[f+h]=p,u[f+h+i]=v(p)}f+=2*i}return u.subarray(0,c*i*2)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return N})),n.d(e,"c",(function(){return X})),n.d(e,"e",(function(){return U}));var r=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),i=n(1),o=n(2),a=n(135),s=new a.a,u=new a.a,c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(i.a)(this,t),r=r||s.copy(e).add(n).scale(.5),this.center=new a.a(r),this.halfDiagonal=new a.a(n).subtract(this.center),this.minimum=new a.a(e),this.maximum=new a.a(n)}return Object(o.a)(t,[{key:"clone",value:function(){return new t(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}},{key:"intersectPlane",value:function(t){var e=this.halfDiagonal,n=u.from(t.normal),i=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?r.INSIDE:o+i<0?r.OUTSIDE:r.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e,n=s.from(t).subtract(this.center),r=this.halfDiagonal,i=0;return(e=Math.abs(n.x)-r.x)>0&&(i+=e*e),(e=Math.abs(n.y)-r.y)>0&&(i+=e*e),(e=Math.abs(n.z)-r.z)>0&&(i+=e*e),i}}]),t}(),l=n(27),f=new a.a,h=new a.a,p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,t),this.radius=-0,this.center=new a.a,this.fromCenterRadius(e,n)}return Object(o.a)(t,[{key:"fromCenterRadius",value:function(t,e){return this.center.from(t),this.radius=e,this}},{key:"fromCornerPoints",value:function(t,e){return e=f.from(e),this.center=(new a.a).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new t(this.center,this.radius)}},{key:"union",value:function(t){var e=this.center,n=this.radius,r=t.center,i=t.radius,o=f.copy(r).subtract(e),a=o.magnitude();if(n>=a+i)return this.clone();if(i>=a+n)return t.clone();var s=.5*(n+a+i);return h.copy(o).scale((-n+s)/a).add(e),this.center.copy(h),this.radius=s,this}},{key:"expand",value:function(t){var e=(t=f.from(t)).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}},{key:"intersectPlane",value:function(t){var e=this.center,n=this.radius,i=t.normal.dot(e)+t.distance;return i<-n?r.OUTSIDE:i<n?r.INTERSECTING:r.INSIDE}},{key:"transform",value:function(t){this.center.transform(t);var e=l.e(f,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){return(t=f.from(t)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}}]),t}(),d=n(18),g=n(322),y=n(188),v=new a.a,m=new a.a,A=new a.a,b=new a.a,_=new a.a,w=new a.a,x=new a.a,E=new a.a,O=new a.a,S=new a.a,T=0,P=1,M=2,C=3,I=4,R=5,k=6,j=7,L=8,N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(i.a)(this,t),this.center=(new a.a).from(e),this.halfAxes=new g.a(n)}return Object(o.a)(t,[{key:"fromCenterHalfSizeQuaternion",value:function(t,e,n){var r=new y.a(n),i=(new g.a).fromQuaternion(r);return i[0]=i[0]*e[0],i[1]=i[1]*e[0],i[2]=i[2]*e[0],i[3]=i[3]*e[1],i[4]=i[4]*e[1],i[5]=i[5]*e[1],i[6]=i[6]*e[2],i[7]=i[7]*e[2],i[8]=i[8]*e[2],this.center=(new a.a).from(t),this.halfAxes=i,this}},{key:"clone",value:function(){return new t(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p,e=this.halfAxes,n=e.getColumn(0,E),r=e.getColumn(1,O),i=e.getColumn(2,S),o=v.copy(n).add(r).add(i);return t.center.copy(this.center),t.radius=o.magnitude(),t}},{key:"intersectPlane",value:function(t){var e=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,u=Math.abs(o*i[T]+a*i[P]+s*i[M])+Math.abs(o*i[C]+a*i[I]+s*i[R])+Math.abs(o*i[k]+a*i[j]+s*i[L]),c=n.dot(e)+t.distance;return c<=-u?r.OUTSIDE:c>=u?r.INSIDE:r.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e=m.from(t).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,A),i=n.getColumn(1,b),o=n.getColumn(2,_),a=r.magnitude(),s=i.magnitude(),u=o.magnitude();r.normalize(),i.normalize(),o.normalize();var c,l=0;return(c=Math.abs(e.dot(r))-a)>0&&(l+=c*c),(c=Math.abs(e.dot(i))-s)>0&&(l+=c*c),(c=Math.abs(e.dot(o))-u)>0&&(l+=c*c),l}},{key:"computePlaneDistances",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=this.center,a=this.halfAxes,s=a.getColumn(0,A),u=a.getColumn(1,b),c=a.getColumn(2,_),l=w.copy(s).add(u).add(c).add(o),f=x.copy(l).subtract(t),h=e.dot(f);return r=Math.min(h,r),i=Math.max(h,i),l.copy(o).add(s).add(u).subtract(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),l.copy(o).add(s).subtract(u).add(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),l.copy(o).add(s).subtract(u).subtract(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).add(u).add(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).add(u).subtract(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).subtract(u).add(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(l).subtract(s).subtract(u).subtract(c),f.copy(l).subtract(t),h=e.dot(f),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}},{key:"getTransform",value:function(){}},{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new a.a(t).len(),new a.a(e).len(),new a.a(n).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new a.a(t).normalize(),i=new a.a(e).normalize(),o=new a.a(n).normalize();return(new y.a).fromMatrix3(new g.a([].concat(Object(d.a)(r),Object(d.a)(i),Object(d.a)(o))))}}]),t}(),D=n(72),F=n(20),B=new a.a,z=new a.a,U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,t),this.normal=new a.a,this.distance=-0,this.fromNormalDistance(e,n)}return Object(o.a)(t,[{key:"fromNormalDistance",value:function(t,e){return Object(D.a)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}},{key:"fromPointNormal",value:function(t,e){t=B.from(t),this.normal.from(e).normalize();var n=-this.normal.dot(t);return this.distance=n,this}},{key:"fromCoefficients",value:function(t,e,n,r){return this.normal.set(t,e,n),Object(D.a)(Object(F.j)(this.normal.len(),1)),this.distance=r,this}},{key:"clone",value:function(e){return new t(this.normal,this.distance)}},{key:"equals",value:function(t){return Object(F.j)(this.distance,t.distance)&&Object(F.j)(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var e=z.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}},{key:"projectPointOntoPlane",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=B.from(t);var n=this.getPointDistance(t),r=z.copy(this.normal).scale(n);return t.subtract(r).to(e)}}]),t}();function G(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var q=[new a.a([1,0,0]),new a.a([0,1,0]),new a.a([0,0,1])],H=new a.a,W=new a.a,X=(new U(new a.a(1,0,0),0),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(i.a)(this,t),this.planes=e,Object(D.a)(this.planes.every((function(t){return t instanceof U})))}return Object(o.a)(t,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),Object(o.a)(t,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*q.length;var e,n=t.center,r=t.radius,i=0,o=G(q);try{for(o.s();!(e=o.n()).done;){var a=e.value,s=this.planes[i],u=this.planes[i+1];s||(s=this.planes[i]=new U),u||(u=this.planes[i+1]=new U);var c=H.copy(a).scale(-r).add(n);a.dot(c);s.fromPointNormal(c,a);var l=H.copy(a).scale(r).add(n),f=W.copy(a).negate();f.dot(l);u.fromPointNormal(l,f),i+=2}}catch(h){o.e(h)}finally{o.f()}return this}},{key:"computeVisibility",value:function(t){Object(D.a)(t);var e,n=r.INSIDE,i=G(this.planes);try{for(i.s();!(e=i.n()).done;){var o=e.value;switch(t.intersectPlane(o)){case r.OUTSIDE:return r.OUTSIDE;case r.INTERSECTING:n=r.INTERSECTING}}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(e,n){if(Object(D.a)(e,"boundingVolume is required."),Object(D.a)(Number.isFinite(n),"parentPlaneMask is required."),n===t.MASK_OUTSIDE||n===t.MASK_INSIDE)return n;for(var i=t.MASK_INSIDE,o=this.planes,a=0;a<this.planes.length;++a){var s=a<31?1<<a:0;if(!(a<31&&0===(n&s))){var u=o[a],c=e.intersectPlane(u);if(c===r.OUTSIDE)return t.MASK_OUTSIDE;c===r.INTERSECTING&&(i|=s)}}return i}}]),t}()),Y=n(0),Q=n(162);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){Object(Y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var J=new a.a,$=new a.a,tt=new a.a,et=new a.a,nt=new a.a,rt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),e=K({near:1,far:5e8},e),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this._cullingVolume=new X([new U,new U,new U,new U,new U,new U]),this._perspectiveMatrix=new Q.a,this._infinitePerspective=new Q.a}return Object(o.a)(t,[{key:"clone",value:function(){return new t({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(e){return e&&e instanceof t&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}},{key:"computeCullingVolume",value:function(t,e,n){Object(D.a)(t,"position is required."),Object(D.a)(e,"direction is required."),Object(D.a)(n,"up is required.");var r=this._cullingVolume.planes;n=J.copy(n).normalize();var i=$.copy(e).cross(n).normalize(),o=tt.copy(e).multiplyByScalar(this.near).add(t),s=et.copy(e).multiplyByScalar(this.far).add(t),u=nt;return u.copy(i).multiplyByScalar(this.left).add(o).subtract(t).cross(n),r[0].fromPointNormal(t,u),u.copy(i).multiplyByScalar(this.right).add(o).subtract(t).cross(n).negate(),r[1].fromPointNormal(t,u),u.copy(n).multiplyByScalar(this.bottom).add(o).subtract(t).cross(i).negate(),r[2].fromPointNormal(t,u),u.copy(n).multiplyByScalar(this.top).add(o).subtract(t).cross(i),r[3].fromPointNormal(t,u),u=(new a.a).copy(e),r[4].fromPointNormal(o,u),u.negate(),r[5].fromPointNormal(s,u),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,e,n,r){it(this),Object(D.a)(Number.isFinite(t)&&Number.isFinite(e)),Object(D.a)(t>0),Object(D.a)(e>0),Object(D.a)(n>0),Object(D.a)(r);var i=1/this.near,o=this.top*i,a=2*n*o/e,s=2*n*(o=this.right*i)/t;return r.x=s,r.y=a,r}},{key:"projectionMatrix",get:function(){return it(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return it(this),this._infinitePerspective}}]),t}();function it(t){Object(D.a)(Number.isFinite(t.right)&&Number.isFinite(t.left)&&Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t.top,n=t.bottom,r=t.right,i=t.left,o=t.near,a=t.far;e===t._top&&n===t._bottom&&i===t._left&&r===t._right&&o===t._near&&a===t._far||(Object(D.a)(t.near>0&&t.near<t.far,"near must be greater than zero and less than far."),t._left=i,t._right=r,t._top=e,t._bottom=n,t._near=o,t._far=a,t._perspectiveMatrix=(new Q.a).frustum({left:i,right:r,bottom:n,top:e,near:o,far:a}),t._infinitePerspective=(new Q.a).frustum({left:i,right:r,bottom:n,top:e,near:o,far:1/0}))}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){Object(Y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),e=at({near:1,far:5e8,xOffset:0,yOffset:0},e),this._offCenterFrustum=new rt,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this.xOffset=e.xOffset,this._xOffset=this.xOffset,this.yOffset=e.yOffset,this._yOffset=this.yOffset}Object(o.a)(t,[{key:"clone",value:function(){return new t({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(e){return null!==(n=e)&&"undefined"!==typeof n&&e instanceof t&&(st(this),st(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum));var n}},{key:"computeCullingVolume",value:function(t,e,n){return st(this),this._offCenterFrustum.computeCullingVolume(t,e,n)}},{key:"getPixelDimensions",value:function(t,e,n,r){return st(this),this._offCenterFrustum.getPixelDimensions(t,e,n,r)}},{key:"projectionMatrix",get:function(){return st(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return st(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return st(this),this._fovy}},{key:"sseDenominator",get:function(){return st(this),this._sseDenominator}}])}();function st(t){Object(D.a)(Number.isFinite(t.fov)&&Number.isFinite(t.aspectRatio)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t._offCenterFrustum;t.fov===t._fov&&t.aspectRatio===t._aspectRatio&&t.near===t._near&&t.far===t._far&&t.xOffset===t._xOffset&&t.yOffset===t._yOffset||(Object(D.a)(t.fov>=0&&t.fov<Math.PI),Object(D.a)(t.aspectRatio>0),Object(D.a)(t.near>=0&&t.near<t.far),t._aspectRatio=t.aspectRatio,t._fov=t.fov,t._fovy=t.aspectRatio<=1?t.fov:2*Math.atan(Math.tan(.5*t.fov)/t.aspectRatio),t._near=t.near,t._far=t.far,t._sseDenominator=2*Math.tan(.5*t._fovy),t._xOffset=t.xOffset,t._yOffset=t.yOffset,e.top=t.near*Math.tan(.5*t._fovy),e.bottom=-e.top,e.right=t.aspectRatio*e.top,e.left=-e.right,e.near=t.near,e.far=t.far,e.right+=t.xOffset,e.left+=t.xOffset,e.top+=t.yOffset,e.bottom+=t.yOffset)}new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,Math.PI;n(323),new g.a,new g.a,new g.a,new g.a,new g.a;new a.a,new a.a,new a.a,new a.a,new a.a,new g.a,new g.a,new g.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(1),i=n(2),o=n(10),a=n(198),s=n(97),u=n(131),c=n(143),l=n(31),f=n(629),h="Resource subclass must define virtual methods",p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(s.b)(e);var i=n.id,o=n.userData,a=void 0===o?{}:o;this.gl=e,this.id=i||Object(c.c)(this.constructor.name),this.userData=a,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(i.a)(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.deleteChildren,n=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(t){t.delete()})),this}},{key:"bind",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(u.b)(this.gl,t),Object(l.a)(t);var n=this.constructor.PARAMETERS||{},r=n[t];if(r){var i=Object(o.g)(this.gl),a=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!a){var s=r.webgl1,c="webgl2"in r?r.webgl2:r.webgl1,f=i?c:s;return f}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=e.parameters,r=e.keys,i=this.constructor.PARAMETERS||{},a=Object(o.g)(this.gl),s={},c=n||Object.keys(i),l=!0,f=!1,h=void 0;try{for(var p,d=c[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g=p.value,y=i[g],v=y&&(!("webgl2"in y)||a)&&(!("extension"in y)||this.gl.getExtension(y.extension));if(v){var m=r?Object(u.a)(this.gl,g):g;s[m]=this.getParameter(g,t),r&&"GLenum"===y.type&&(s[m]=Object(u.a)(this.gl,s[m]))}}}catch(A){f=!0,h=A}finally{try{l||null==d.return||d.return()}finally{if(f)throw h}}return s}},{key:"setParameter",value:function(t,e){t=Object(u.b)(this.gl,t),Object(l.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(o.g)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Object(u.b)(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,n){return Object(f.a)(this,t,e,n)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(h)}},{key:"_deleteHandle",value:function(){throw new Error(h)}},{key:"_bindHandle",value:function(){throw new Error(h)}},{key:"_getOptsFromHandle",value:function(){throw new Error(h)}},{key:"_getParameter",value:function(t,e){throw new Error(h)}},{key:"_setParameter",value:function(t,e){throw new Error(h)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=a.a.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var t=this.constructor.name;a.a.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=a.a.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t),this.byteLength=t}},{key:"_trackDeallocatedMemory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,e=a.a.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(12),i=n(1),o=n(2),a=n(26),s=n(55),u=n(13),c=n(27),l=n(34),f=n(24),h=Math.PI/180,p=Object(s.a)(),d=[0,0,0],g={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?null:n,o=e.x,a=void 0===o?0:o,s=e.y,u=void 0===s?0:s,c=e.width,l=void 0===c?1:c,f=e.height,h=void 0===f?1:f;this.id=r||this.constructor.displayName||"viewport",this.x=a,this.y=u,this.width=l||1,this.height=h||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(o.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Object(u.equals)(e.projectionMatrix,this.projectionMatrix)&&Object(u.equals)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,o=this.projectPosition(t),a=Object(l.q)(o,this.pixelProjectionMatrix),s=Object(r.a)(a,2),u=s[0],c=s[1],f=i?c:this.height-c;return 2===t.length?[u,f]:[u,f,a[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,o=e.targetZ,a=Object(r.a)(t,3),s=a[0],u=a[1],c=a[2],f=i?u:this.height-u,h=o&&o*this.distanceScales.unitsPerMeter[2],p=Object(l.n)([s,f,c],this.pixelUnprojectionMatrix,h),d=this.unprojectPosition(p),g=Object(r.a)(d,3),y=g[0],v=g[1],m=g[2];return Number.isFinite(c)?[y,v,m]:Number.isFinite(o)?[y,v,o]:[y,v]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return this.isGeospatial?Object(l.l)(t):t}},{key:"unprojectFlat",value:function(t){return this.isGeospatial?Object(l.p)(t):t}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={targetZ:t.z||0},n=this.unproject([0,0],e),r=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?Object(l.f)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var t=this.projectionProps,e=t.near,n=t.far,r=t.fovyRadians,i=t.aspect;return Object.assign(this._frustumPlanes,Object(s.d)({aspect:i,near:e,far:n,fovyRadians:r,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,o=t.near,a=t.far;return e?(new u.Matrix4).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:a}):(new u.Matrix4).perspective({fovy:n,aspect:r,near:o,far:a})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,n=void 0===e?p:e,r=t.longitude,i=void 0===r?null:r,o=t.latitude,a=void 0===o?null:o,s=t.zoom,c=void 0===s?null:s,f=t.position,h=void 0===f?null:f,y=t.modelMatrix,v=void 0===y?null:y,m=t.focalDistance,A=void 0===m?1:m,b=t.distanceScales,_=void 0===b?null:b;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=c,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(l.h)({latitude:a})+Math.log2(A):0);var w=Math.pow(2,this.zoom);this.scale=w,this.distanceScales=this.isGeospatial?Object(l.f)({latitude:a,longitude:i}):_||g,this.focalDistance=A,this.distanceScales.metersPerUnit=new u.Vector3(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new u.Vector3(this.distanceScales.unitsPerMeter),this.position=d,this.meterOffset=d,h&&(this.position=h,this.modelMatrix=v,this.meterOffset=v?v.transformVector(h):h),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a})):this.center=h?this.projectPosition(h):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new u.Matrix4).multiplyRight(this.viewMatrixUncentered).translate(new u.Vector3(this.center||d).negate())}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.distanceScales,o=new u.Vector3(this.projectPosition([e,n,0]));if(r){var a=new u.Vector3(r).scale(i.unitsPerMeter);o.add(a)}return o}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,o=t.fovyRadians,a=t.fovy,s=void 0===a?75:a,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?1e3:l,p=t.focalDistance,d=void 0===p?1:p;this.projectionProps={orthographic:i,fovyRadians:o||s*h,aspect:this.width/this.height,focalDistance:d,near:c,far:f},this.projectionMatrix=n||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var t=Object(s.a)();c.h(t,t,this.projectionMatrix),c.h(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=c.f([],this.viewMatrix)||this.viewMatrix;var e=Object(s.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),n=e.eye,r=e.direction,i=e.up,o=e.right;this.cameraPosition=n,this.cameraDirection=r,this.cameraUp=i,this.cameraRight=o;var u=Object(s.a)(),l=Object(s.a)();c.o(u,u,[this.width/2,-this.height/2,1]),c.p(u,u,[1,-1,0]),c.h(l,u,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=u,this.pixelUnprojectionMatrix=c.f(Object(s.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||a.a.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?f.c.WEB_MERCATOR:f.c.WEB_MERCATOR_AUTO_OFFSET:f.c.IDENTITY}}]),t}();y.displayName="Viewport"},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(33);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(189);var i=n(155);function o(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"ArcLayer",(function(){return i.a})),n.d(e,"BitmapLayer",(function(){return o.a})),n.d(e,"IconLayer",(function(){return D})),n.d(e,"LineLayer",(function(){return z})),n.d(e,"PointCloudLayer",(function(){return U.a})),n.d(e,"ScatterplotLayer",(function(){return G.a})),n.d(e,"ColumnLayer",(function(){return V.a})),n.d(e,"GridCellLayer",(function(){return W})),n.d(e,"PathLayer",(function(){return X.a})),n.d(e,"PolygonLayer",(function(){return Y.a})),n.d(e,"GeoJsonLayer",(function(){return Q.a})),n.d(e,"TextLayer",(function(){return kt})),n.d(e,"SolidPolygonLayer",(function(){return jt.a})),n.d(e,"_MultiIconLayer",(function(){return tt}));var r,i=n(381),o=n(380),a=n(1),s=n(2),u=n(15),c=n(5),l=n(6),f=n(3),h=n(315),p=n(316),d=n(26),g=n(153),y=n(252),v=n(87),m=n(0),A=n(390),b=n(307),_=n(167),w=n(650),x=n(649),E=n(73);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(m.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var M=function(){},C=(r={},Object(m.a)(r,10241,9987),Object(m.a)(r,10240,9729),Object(m.a)(r,10242,33071),Object(m.a)(r,10243,33071),r);function I(t){return t&&(t.id||t.url)}function R(t,e,n){for(var r=0;r<e.length;r++){var i=e[r],o=i.icon,a=i.xOffset;t[I(o)]=Object.assign({},o,{x:a,y:n})}}var k=function(){function t(e,n){var r=n.onUpdate,i=void 0===r?M:r,o=n.onError,s=void 0===o?M:o;Object(a.a)(this,t),this.gl=e,this.onUpdate=i,this.onError=s,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return Object(s.a)(t,[{key:"finalize",value:function(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(t){var e=this._autoPacking?I(t):t;return this._mapping[e]||{}}},{key:"setProps",value:function(t){var e=t.loadOptions,n=t.autoPacking,r=t.iconAtlas,i=t.iconMapping,o=t.data,a=t.getIcon;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),a&&(this._getIcon=a),i&&(this._mapping=i),r&&this._updateIconAtlas(r),this._autoPacking&&(o||a)&&"undefined"!==typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(o))}},{key:"_updateIconAtlas",value:function(t){this._texture&&(this._texture.delete(),this._texture=null),this._externalTexture=t,this.onUpdate()}},{key:"_updateAutoPacking",value:function(t){var e=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};var r,i={},o=Object(E.a)(t),a=o.iterable,s=o.objectInfo,u=T(a);try{for(u.s();!(r=u.n()).done;){var c=r.value;s.index++;var l=e(c,s),f=I(l);if(!l)throw new Error("Icon is missing.");if(!l.url)throw new Error("Icon url is missing.");i[f]||n[f]&&l.url===n[f].url||(i[f]=S(S({},l),{},{source:c,sourceIndex:s.index}))}}catch(h){u.e(h)}finally{u.f()}return i}(t,this._getIcon,this._mapping)||{});if(e.length>0){var n=function(t){for(var e,n=t.icons,r=t.buffer,i=t.mapping,o=void 0===i?{}:i,a=t.xOffset,s=void 0===a?0:a,u=t.yOffset,c=void 0===u?0:u,l=t.rowHeight,f=void 0===l?0:l,h=t.canvasWidth,p=[],d=0;d<n.length;d++){var g=n[d];if(!o[I(g)]){var y=g.height,v=g.width;s+v+r>h&&(R(o,p,c),s=0,c=f+c+r,f=0,p=[]),p.push({icon:g,xOffset:s}),s=s+v+r,f=Math.max(f,y)}}return p.length>0&&R(o,p,c),{mapping:o,rowHeight:f,xOffset:s,yOffset:c,canvasWidth:h,canvasHeight:(e=f+c+r,Math.pow(2,Math.ceil(Math.log2(e))))}}({icons:e,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),r=n.mapping,i=n.xOffset,o=n.yOffset,a=n.rowHeight,s=n.canvasHeight;this._rowHeight=a,this._mapping=r,this._xOffset=i,this._yOffset=o,this._canvasHeight=s,this._texture||(this._texture=new _.a(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:C})),this._texture.height!==this._canvasHeight&&(this._texture=function(t,e,n,r){var i=e.width,o=e.height,a=Object(A.a)(e,{width:n,height:r});return Object(b.b)(e,a,{targetY:0,width:i,height:o}),e.delete(),a}(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(e)}}},{key:"_loadIcons",value:function(t){var e,n=this,r=this._canvas.getContext("2d"),i=T(t);try{var o=function(){var t=e.value;n._pendingCount++,Object(x.a)(t.url,w.a,n._loadOptions).then((function(e){var i=I(t),o=n._mapping[i],a=o.x,s=o.y,u=o.width,c=o.height,l=function(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}(r,e,u,c);n._texture.setSubImageData({data:l,x:a,y:s,width:u,height:c}),n._texture.generateMipmap(),n.onUpdate()})).catch((function(e){n.onError({url:t.url,source:t.source,sourceIndex:t.sourceIndex,loadOptions:n._loadOptions,error:e})})).finally((function(){n._pendingCount--}))};for(i.s();!(e=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}},{key:"isLoaded",get:function(){return 0===this._pendingCount}}]),t}();function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var L=[0,0,0,255],N={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(t){return t.position}},getIcon:{type:"accessor",value:function(t){return t.icon}},getColor:{type:"accessor",value:L},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},D=function(t){Object(c.a)(n,t);var e=j(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getShaders",value:function(){return Object(u.a)(Object(f.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[h.a,p.a]})}},{key:"initializeState",value:function(){this.state={iconManager:new k(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:L},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(t){var e=t.oldProps,r=t.props,i=t.changeFlags;Object(u.a)(Object(f.a)(n.prototype),"updateState",this).call(this,{props:r,oldProps:e,changeFlags:i});var o=this.getAttributeManager(),a=r.iconAtlas,s=r.iconMapping,c=r.data,l=r.getIcon,h=this.state.iconManager;h.setProps({loadOptions:r.loadOptions});var p=!1;if(a||this.internalState.isAsyncPropLoading("iconAtlas")?(e.iconAtlas!==r.iconAtlas&&h.setProps({iconAtlas:a,autoPacking:!1}),e.iconMapping!==r.iconMapping&&(h.setProps({iconMapping:s}),p=!0)):h.setProps({autoPacking:!0}),(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&h.setProps({data:c,getIcon:l}),p&&(o.invalidate("instanceOffsets"),o.invalidate("instanceIconFrames"),o.invalidate("instanceColorModes")),i.extensionsChanged){var d=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(d)}),o.invalidateAll()}}},{key:"finalizeState",value:function(){Object(u.a)(Object(f.a)(n.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.sizeScale,i=n.sizeMinPixels,o=n.sizeMaxPixels,a=n.sizeUnits,s=n.billboard,u=n.alphaCutoff,c=this.state.iconManager,l=this.context.viewport,f=c.getTexture();f&&this.state.model.setUniforms(Object.assign({},e,{iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeScale:r*("pixels"===a?l.metersPerPixel:1),sizeMinPixels:i,sizeMaxPixels:o,billboard:s,alphaCutoff:u})).draw()}},{key:"_getModel",value:function(t){return new y.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new v.a({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"_onError",value:function(t){var e=this.getCurrentLayer().props.onIconError;e?e(t):d.a.error(t.error)()}},{key:"getInstanceOffset",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.width/2-e.anchorX||0,e.height/2-e.anchorY||0]}},{key:"getInstanceColorMode",value:function(t){return this.state.iconManager.getIconMapping(t).mask?1:0}},{key:"getInstanceIconFrame",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.x||0,e.y||0,e.width||0,e.height||0]}},{key:"isLoaded",get:function(){return Object(u.a)(Object(f.a)(n.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}}]),n}(g.a);D.layerName="IconLayer",D.defaultProps=N;function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var B={getSourcePosition:{type:"accessor",value:function(t){return t.sourcePosition}},getTargetPosition:{type:"accessor",value:function(t){return t.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},z=function(t){Object(c.a)(n,t);var e=F(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getShaders",value:function(){return Object(u.a)(Object(f.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[h.a,p.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(u.a)(Object(f.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.widthUnits,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,u=r.wrapLongitude,c="pixels"===i?n.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({widthScale:o*c,widthMinPixels:a,widthMaxPixels:s,useShortestPath:u?1:0}).draw(),u&&this.state.model.setUniforms({useShortestPath:-1}).draw()}},{key:"_getModel",value:function(t){return new y.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new v.a({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0}))}},{key:"wrapLongitude",get:function(){return!1}}]),n}(g.a);z.layerName="LineLayer",z.defaultProps=B;var U=n(382),G=n(230),V=n(229),q=n(646);function H(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var W=function(t){Object(c.a)(n,t);var e=H(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getGeometry",value:function(t){return new q.a}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.elevationScale,i=n.extruded,o=n.offset,a=n.coverage,s=n.cellSize,u=n.angle;this.state.model.setUniforms(Object.assign({},e,{radius:s/2,angle:u,offset:o,extruded:i,coverage:a,elevationScale:r,edgeDistance:1,isWireframe:!1})).draw()}}]),n}(V.a);W.layerName="GridCellLayer",W.defaultProps={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",min:0,value:[1,1]}};var X=n(137),Y=n(328),Q=n(384),Z=n(12),K=n(296);function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var $=[],tt=function(t){Object(c.a)(n,t);var e=J(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getShaders",value:function(){return Object.assign({},Object(u.a)(Object(f.a)(n.prototype),"getShaders",this).call(this),{inject:{"vs:#decl":"\n  uniform float gamma;\n  varying float vGamma;\n","vs:#main-end":"\n  vGamma = gamma / (sizeScale * iconSize.y);\n"},fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform bool shouldDrawBackground;\nuniform vec3 backgroundColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    if (sdf) {\n      alpha = smoothstep(buffer - vGamma, buffer + vGamma, alpha);\n    }\n    float a = alpha * vColor.a;\n    \n    if (a < alphaCutoff) {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(backgroundColor, vColor.a);\n      } else {\n        discard;\n      }\n    } else {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(mix(backgroundColor, vColor.rgb, alpha), vColor.a * opacity);\n      } else {\n        gl_FragColor = vec4(vColor.rgb, a * opacity);\n      }\n      DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n    }\n  } else {\n    DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n  }\n}\n"})}},{key:"initializeState",value:function(){var t=this;Object(u.a)(Object(f.a)(n.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(e,n){var r=n.index,i=n.target;return t.encodePickingColor(r,i)}}})}},{key:"updateState",value:function(t){Object(u.a)(Object(f.a)(n.prototype),"updateState",this).call(this,t);var e=t.oldProps,r=t.props;if(r.backgroundColor!==e.backgroundColor){var i=Array.isArray(r.backgroundColor)?r.backgroundColor.map((function(t){return t/255})).slice(0,3):null;this.setState({backgroundColor:i})}}},{key:"draw",value:function(t){var e=t.uniforms,r=this.props.sdf,i=this.state.backgroundColor,o=Array.isArray(i);Object(u.a)(Object(f.a)(n.prototype),"draw",this).call(this,{uniforms:Object.assign({},e,{buffer:.75,gamma:.2,sdf:Boolean(r),backgroundColor:i||[0,0,0],shouldDrawBackground:o})})}},{key:"getInstanceOffset",value:function(t){var e=this;return t?Array.from(t).map((function(t){return Object(u.a)(Object(f.a)(n.prototype),"getInstanceOffset",e).call(e,t)})):$}},{key:"getInstanceColorMode",value:function(t){return 1}},{key:"getInstanceIconFrame",value:function(t){var e=this;return t?Array.from(t).map((function(t){return Object(u.a)(Object(f.a)(n.prototype),"getInstanceIconFrame",e).call(e,t)})):$}}]),n}(D);tt.layerName="MultiIconLayer",tt.defaultProps={backgroundColor:{type:"color",value:null,optional:!0},getIconOffsets:{type:"accessor",value:function(t){return t.offsets}},alphaCutoff:.001};var et=n(395),nt=n.n(et);function rt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ot=[];function at(t,e,n,r){for(var i=0,o=e;o<n;o++){var a=t[o],s=null,u=r&&r[a];u&&(s=u.width),i+=s}return i}function st(t,e,n,r,i,o){for(var a=e,s=0,u=e;u<n;u++){var c=at(t,u,u+1,i);s+c>r&&(a<u&&o.push(u),a=u,s=0),s+=c}return s}function ut(t,e,n,r,i,o){for(var a=e,s=e,u=e,c=0,l=e;l<n;l++)if(" "===t[l]?u=l+1:" "!==t[l+1]&&l+1!==n||(u=l+1),u>s){var f=at(t,s,u,i);c+f>r&&(a<s&&(o.push(s),a=s,c=0),f>r&&(f=st(t,s,u,r,i,o),a=o[o.length-1])),s=u,c+=f}return c}function ct(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=t.length);var a=[];return"break-all"===e?st(t,i,o,n,r,a):ut(t,i,o,n,r,a),a}function lt(t,e,n,r,i,o){for(var a=0,s=0,u=e;u<n;u++){var c=t[u],l=r[c];l?(s||(s=l.height),i[u]=a+l.width/2,a+=l.width):(d.a.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),i[u]=a,a+=32)}o[0]=a,o[1]=s}var ft=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;Object(a.a)(this,t),this.limit=e,this.clear()}return Object(s.a)(t,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(t){var e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}},{key:"set",value:function(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}},{key:"delete",value:function(t){this._cache[t]&&(this._deleteCache(t),this._deleteOrder(t))}},{key:"_deleteCache",value:function(t){delete this._cache[t]}},{key:"_deleteOrder",value:function(t){var e=this._order.findIndex((function(e){return e===t}));e>=0&&this._order.splice(e,1)}},{key:"_appendOrder",value:function(t){this._order.push(t)}}]),t}();function ht(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dt=function(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),gt="Monaco, monospace",yt="normal",vt=new ft(3),mt=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function At(t,e){var n=vt.get(t);if(!n)return e;var r=[],i=n.mapping,o=Object.keys(i);o=new Set(o);var a=e;return a instanceof Array&&(a=new Set(a)),a.forEach((function(t){o.has(t)||r.push(t)})),r}function bt(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function _t(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}var wt=function(){function t(){Object(a.a)(this,t),this.props={fontFamily:gt,fontWeight:yt,characterSet:dt,fontSize:64,buffer:2,sdf:!1,cutoff:.25,radius:3},this._key=null,this._atlas=null}return Object(s.a)(t,[{key:"setProps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mt.forEach((function(n){n in e&&(t.props[n]=e[n])}));var n=this._key;this._key=this._getKey();var r=At(this._key,this.props.characterSet),i=vt.get(this._key);if(i&&0===r.length)this._key!==n&&(this._atlas=i);else{var o=this._generateFontAtlas(this._key,r,i);this._atlas=o,vt.set(this._key,o)}}},{key:"_generateFontAtlas",value:function(t,e,n){var r=this.props,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=n&&n.data;f||((f=document.createElement("canvas")).width=1024);var h=f.getContext("2d");_t(h,i,a,o);var p=function(t){var e,n=t.characterSet,r=t.getFontWidth,i=t.fontHeight,o=t.buffer,a=t.maxCanvasWidth,s=t.mapping,u=void 0===s?{}:s,c=t.xOffset,l=void 0===c?0:c,f=t.yOffset,h=void 0===f?0:f,p=0,d=l,g=0,y=rt(n);try{for(y.s();!(e=y.n()).done;){var v=e.value;if(!u[v]){var m=r(v,g++);d+m+2*o>a&&(d=0,p++),u[v]={x:d+o,y:h+p*(i+2*o)+o,width:m,height:i},d+=m+2*o}}}catch(_){y.e(_)}finally{y.f()}var A,b=i+2*o;return{mapping:u,xOffset:d,yOffset:h+p*b,canvasHeight:(A=h+(p+1)*b,Math.pow(2,Math.ceil(Math.log2(A))))}}(Object.assign({getFontWidth:function(t){return h.measureText(t).width},fontHeight:1.2*a,buffer:s,characterSet:e,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),d=p.mapping,g=p.canvasHeight,y=p.xOffset,v=p.yOffset;if(f.height!==g){var m=h.getImageData(0,0,f.width,f.height);f.height=g,h.putImageData(m,0,0)}if(_t(h,i,a,o),u){var A,b=new nt.a(a,s,c,l,i,o),_=h.getImageData(0,0,b.size,b.size),w=ht(e);try{for(w.s();!(A=w.n()).done;){var x=A.value;bt(b.draw(x),_),h.putImageData(_,d[x].x-s,d[x].y-s)}}catch(T){w.e(T)}finally{w.f()}}else{var E,O=ht(e);try{for(O.s();!(E=O.n()).done;){var S=E.value;h.fillText(S,d[S].x,d[S].y+.9*a)}}catch(T){O.e(T)}finally{O.f()}}return{xOffset:y,yOffset:v,mapping:d,data:f,width:f.width,height:f.height}}},{key:"_getKey",value:function(){var t=this.props,e=t.fontFamily,n=t.fontWeight,r=t.fontSize,i=t.buffer,o=t.sdf,a=t.radius,s=t.cutoff;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(a," ").concat(s):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}},{key:"texture",get:function(){return this._atlas}},{key:"mapping",get:function(){return this._atlas&&this._atlas.mapping}},{key:"scale",get:function(){return 1.2}}]),t}();function xt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){Object(m.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Pt={fontSize:64,buffer:2,sdf:!1,radius:3,cutoff:.25},Mt={start:1,middle:0,end:-1},Ct={top:1,center:0,bottom:-1},It=["fontSize","buffer","sdf","radius","cutoff"],Rt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,backgroundColor:{type:"color",value:null,optional:!0},characterSet:dt,fontFamily:gt,fontWeight:yt,lineHeight:1,fontSettings:{},wordBreak:"word-break",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(t){return t.text}},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},kt=function(t){Object(c.a)(n,t);var e=Tt(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new wt}}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags,i=this._fontChanged(n,e);i&&this._updateFontAtlas(n,e);var o=i||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),o&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.index>=0?this.props.data[e.index]:null})}},{key:"_updateFontAtlas",value:function(t,e){var n=e.characterSet,r=e.fontSettings,i=e.fontFamily,o=e.fontWeight;this.state.fontAtlasManager.setProps(Object.assign({},Pt,r,{characterSet:n,fontFamily:i,fontWeight:o})),this.setNeedsRedraw(!0)}},{key:"_fontChanged",value:function(t,e){if(t.fontFamily!==e.fontFamily||t.characterSet!==e.characterSet||t.fontWeight!==e.fontWeight)return!0;if(t.fontSettings===e.fontSettings)return!1;var n=t.fontSettings||{},r=e.fontSettings||{};return It.some((function(t){return n[t]!==r[t]}))}},{key:"_updateText",value:function(){var t,e=this.props.data,n=e.attributes&&e.attributes.getText,r=this.props.getText,i=e.startIndices;if(n&&i){var o=function(t){var e=t.value,n=t.length,r=t.stride,i=t.offset,o=t.startIndices,a=e.BYTES_PER_ELEMENT,s=r?r/a:1,u=i?i/a:0,c=o[n]||Math.floor((e.length-u-a)/s)+1,l=new Array(n),f=e;if(s>1||u>0){f=new e.constructor(c);for(var h=0;h<c;h++)f[h]=e[h*s+u]}for(var p=0;p<n;p++){var d=o[p],g=o[p+1]||c;l[p]=String.fromCodePoint.apply(null,f.subarray(d,g))}return{texts:l,characterCount:c}}(St(St({},ArrayBuffer.isView(n)?{value:n}:n),{},{length:e.length,startIndices:i})),a=o.texts;t=o.characterCount,r=function(t,e){var n=e.index;return a[n]}}else{var s=Object(E.a)(e),u=s.iterable,c=s.objectInfo;i=[0],t=0;var l,f=xt(u);try{for(f.s();!(l=f.n()).done;){var h=l.value;c.index++;var p=r(h,c)||"";t+=Array.from(p).length,i.push(t)}}catch(d){f.e(d)}finally{f.f()}}this.setState({getText:r,startIndices:i,numInstances:t})}},{key:"getIconOffsets",value:function(t,e){for(var n=this.state.fontAtlasManager.mapping,r=this.state.getText,i=this.props,o=i.wordBreak,a=i.maxWidth,s=i.lineHeight,u=i.getTextAnchor,c=i.getAlignmentBaseline,l=function(t,e,n,r,i){for(var o=(t=Array.from(t)).length,a=new Array(o),s=new Array(o),u=new Array(o),c=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,l=[0,0],f=[],h=0,p=0,d=0,g=0;g<=o;g++){var y=t[g];if("\n"!==y&&g!==o||(d=g),d>p){for(var v=c?ct(t,n,r,i,p,d):ot,m=0;m<=v.length;m++){var A=0===m?p:v[m-1],b=m<v.length?v[m]:d;lt(t,A,b,i,a,f);for(var _=A;_<b;_++)s[_]=h+f[1]/2,u[_]=f[0];h+=f[1]*e,l[0]=c?r:Math.max(l[0],f[0])}p=d}"\n"===y&&(a[p]=0,s[p]=0,u[p]=0,p++)}return l[1]=h,{x:a,y:s,rowWidth:u,size:l}}(r(t,e)||"",s,o,a,n),f=l.x,h=l.y,p=l.rowWidth,d=Object(Z.a)(l.size,2),g=d[0],y=d[1],v=Mt["function"===typeof u?u(t,e):u],m=Ct["function"===typeof c?c(t,e):c],A=f.length,b=new Array(2*A),_=0,w=0;w<A;w++){var x=(1-v)*(g-p[w])/2;b[_++]=(v-1)*g/2+x+f[w],b[_++]=(m-1)*y/2+h[w]}return b}},{key:"renderLayers",value:function(){var t=this.state,e=t.startIndices,n=t.numInstances,r=t.getText,i=t.fontAtlasManager,o=i.scale,a=i.texture,s=i.mapping,u=t.styleVersion,c=this.props,l=c.data,f=c._dataDiff,h=c.backgroundColor,p=c.getPosition,d=c.getColor,g=c.getSize,y=c.getAngle,v=c.getPixelOffset,m=c.billboard,A=c.fontSettings,b=c.sizeScale,_=c.sizeUnits,w=c.sizeMinPixels,x=c.sizeMaxPixels,E=c.transitions,O=c.updateTriggers,S=this.getIconOffsets.bind(this);return new(this.getSubLayerClass("characters",tt))({sdf:A.sdf,iconAtlas:a,iconMapping:s,backgroundColor:h,getPosition:p,getColor:d,getSize:g,getAngle:y,getPixelOffset:v,billboard:m,sizeScale:b*o,sizeUnits:_,sizeMinPixels:w*o,sizeMaxPixels:x*o,transitions:E&&{getPosition:E.getPosition,getAngle:E.getAngle,getColor:E.getColor,getSize:E.getSize,getPixelOffset:E.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:O.getText,getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset,getIconOffsets:{getText:O.getText,getTextAnchor:O.getTextAnchor,getAlignmentBaseline:O.getAlignmentBaseline,styleVersion:u}}}),{data:l,_dataDiff:f,startIndices:e,numInstances:n,getIconOffsets:S,getIcon:r})}}]),n}(K.a);kt.layerName="TextLayer",kt.defaultProps=Rt;var jt=n(154)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(155);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";var r=n(402),i=n.n(r).a;e.a=i},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l}));var i=n(22),o={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof t&&t,document:"undefined"!==typeof document&&document},a=o.global||o.self||o.window,s="object"!==("undefined"===typeof r?"undefined":Object(i.a)(r))||"[object process]"!==String(r)||r.browser,u="function"===typeof importScripts,c="undefined"!==typeof r&&r.version&&r.version.match(/v([0-9]*)/),l=c&&parseFloat(c[1])||0}).call(this,n(62),n(78))},function(t,e,n){"use strict";function r(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,o=t.end,a=t.size,s=t.getData;o=o||n.length;var u=e.length,c=o-i;if(u>c)n.set(e.subarray(0,c),i);else if(n.set(e,i),s)for(var l=u;l<c;)for(var f=s(l,e),h=0;h<a;h++)n[i+l]=f[h]||0,l++}n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return l}));var i={interpolation:{duration:0,easing:function(t){return t}},spring:{stiffness:.05,damping:.5}};function o(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",Object.assign({},i[t.type],e,t)):null}function a(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function s(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function u(t){t.push(t.shift())}function c(t,e){var n=t.doublePrecision,r=t.settings,i=t.value,o=t.size,a=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*a}function l(t){var e=t.buffer,n=t.numInstances,i=t.attribute,o=t.fromLength,a=t.fromStartIndices,s=t.getData,u=void 0===s?function(t){return t}:s,l=i.doublePrecision&&i.value instanceof Float64Array?2:1,f=i.size*l,h=i.byteOffset,p=i.startIndices,d=a&&p,g=c(i,n),y=i.state.constant;if(d||!(o>=g)){var v=y?i.value:i.getBuffer().getData({srcByteOffset:h});if(i.settings.normalized&&!y){var m=u;u=function(t,e){return i._normalizeConstant(m(t,e))}}var A=y?function(t,e){return u(v,e)}:function(t,e){return u(v.subarray(t,t+f),e)},b=e.getData({length:o}),_=new Float32Array(g);!function(t){var e=t.source,n=t.target,i=t.size,o=t.getData,a=t.sourceStartIndices,s=t.targetStartIndices;if(!Array.isArray(s))return r({source:e,target:n,size:i,getData:o}),n;for(var u=0,c=0,l=o&&function(t,e){return o(t+c,e)},f=Math.min(a.length,s.length),h=1;h<f;h++){var p=a[h]*i,d=s[h]*i;r({source:e.subarray(u,p),target:n,start:c,end:d,size:i,getData:l}),u=p,c=d}c<n.length&&r({source:[],target:n,start:c,size:i,getData:l})}({source:b,target:_,sourceStartIndices:a,targetStartIndices:p,size:f,getData:A}),e.byteLength<_.byteLength+h&&e.reallocate(_.byteLength+h),e.subData({data:_,offset:h})}}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"loader assertion failed.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(t))return e;return[255*t[0],255*t[1],255*t[2],255*t[3]]},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(l(n),[i]),r)){r(e,n);break}return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var s={type:"LineString",coordinates:[t,e]},u=(0,a.point)(n),c=(0,o.default)(u,s),l=(0,i.default)(t,e),f=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?l-90:l-270,h=(0,r.default)(e,c,f),p=(0,r.default)(t,c,f);return[h.geometry.coordinates,p.geometry.coordinates]},e.distance2d=p,e.mix=d,e.nearestPointOnProjectedLine=function(t,e,n){var r=new s.default(n),i=t.geometry.coordinates.map((function(t){var e=c(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?0:o;return r.project([n,i,a])})),o=c(r.project(e.geometry.coordinates),2),a=o[0],u=o[1],l=1/0,f={};i.forEach((function(t,e){var n=c(t,2),r=n[0],o=n[1];if(0!==e){var s=c(i[e-1],2),h=s[0],p=s[1],d=p-o,g=r-h,y=h*o-r*p,v=d*d+g*g,m=Math.abs(d*a+g*u+y)/Math.sqrt(v);m<l&&(l=m,f={index:e,x0:(g*(g*a-d*u)-d*y)/v,y0:(d*(-g*a+d*u)-g*y)/v})}}));var h=f,g=h.index,y=h.x0,v=h.y0,m=c(i[g-1],3),A=m[0],b=m[1],_=m[2],w=void 0===_?0:_,x=c(i[g],3),E=x[0],O=x[1],S=x[2],T=void 0===S?0:S,P=p(A,b,E,O),M=p(A,b,y,v),C=d(w,T,M/P);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([y,v,C])},properties:{dist:l,index:g-1}}},e.getPickedEditHandle=function(t){var e=g(t);return e.length?e[0]:null},e.getPickedSnapSourceEditHandle=function(t){return g(t).find((function(t){return"snap-source"===t.properties.editHandleType}))},e.getNonGuidePicks=function(t){return t&&t.filter((function(t){return!t.isGuide}))},e.getPickedExistingEditHandle=function(t){return g(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"existing"===e.editHandleType}))},e.getPickedIntermediateEditHandle=function(t){return g(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"intermediate"===e.editHandleType}))},e.getPickedEditHandles=g,e.getEditHandlesForGeometry=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",r=[];switch(t.type){case"Point":r=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:e},geometry:{type:"Point",coordinates:t.coordinates}}];break;case"MultiPoint":case"LineString":r=r.concat(y(t.coordinates,[],e,n));break;case"Polygon":case"MultiLineString":for(var i=0;i<t.coordinates.length;i++)r=r.concat(y(t.coordinates[i],[i],e,n)),"Polygon"===t.type&&(r=r.slice(0,-1));break;case"MultiPolygon":for(var o=0;o<t.coordinates.length;o++)for(var a=0;a<t.coordinates[o].length;a++)r=(r=r.concat(y(t.coordinates[o][a],[o,a],e,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(t.type))}return r};var r=u(n(179)),i=u(n(92)),o=u(n(334)),a=n(44),s=u(n(335));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function d(t,e,n){return e*n+t*(1-n)}function g(t){return t&&t.filter((function(t){return t.isGuide&&"editHandle"===t.object.properties.guideType})).map((function(t){return t.object}))||[]}function y(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",i=[],o=0;o<t.length;o++){var a=t[o];i.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(l(e),[o]),featureIndex:n,editHandleType:r},geometry:{type:"Point",coordinates:a}})}return i}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return s}));var r=[],i=[];function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=r,a={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?o=t:t.length>0&&(i.length=t.length,o=i):o=r,(e>0||Number.isFinite(n))&&(o=(Array.isArray(o)?o:Array.from(o)).slice(e,n),a.index=e-1),{iterable:o,objectInfo:a}}function a(t){return t&&t[Symbol.asyncIterator]}function s(t,e){var n=e.size,r=e.stride,i=e.offset,o=e.startIndices,a=e.nested,s=t.BYTES_PER_ELEMENT,u=r?r/s:n,c=i?i/s:0,l=Math.floor((t.length-c)/u);return function(e,r){var i=r.index,s=r.target;if(!o){for(var f=i*u+c,h=0;h<n;h++)s[h]=t[f+h];return s}var p,d=o[i],g=o[i+1]||l;if(a){p=new Array(g-d);for(var y=d;y<g;y++){var v=y*u+c;s=new Array(n);for(var m=0;m<n;m++)s[m]=t[v+m];p[y-d]=s}}else if(u===n)p=t.subarray(d*n+c,g*n+c);else{p=new t.constructor((g-d)*n);for(var A=0,b=d;b<g;b++)for(var _=b*u+c,w=0;w<n;w++)p[A++]=t[_+w]}return p}}},function(t,e,n){"use strict";n.d(e,"f",(function(){return d})),n.d(e,"b",(function(){return y})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return w})),n.d(e,"c",(function(){return x}));var r=n(12),i=n(18),o=n(1),a=n(2),s=n(57),u=n(13);function c(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f=function(){function t(e,n,r){Object(o.a)(this,t),this.x=e,this.y=n,this.z=r}return Object(a.a)(t,[{key:"update",value:function(t){var e=t.viewport,n=t.cullingVolume,r=t.elevationBounds,i=t.minZ,o=t.maxZ,a=t.offset,s=t.project,u=this.getBoundingVolume(r,a,s);if(n.computeVisibility(u)<0)return!1;if(!this.childVisible){var l=this.z;if(l<o&&l>=i){var f=u.distanceTo(e.cameraPosition)*e.scale/e.height;l+=Math.floor(Math.log2(f))}if(l>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var h,p=c(this.children);try{for(p.s();!(h=p.n()).done;){h.value.update(t)}}catch(d){p.e(d)}finally{p.f()}return!0}},{key:"getSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&t.push(this),this._children){var e,n=c(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.getSelected(t)}}catch(i){n.e(i)}finally{n.f()}}return t}},{key:"getBoundingVolume",value:function(t,e,n){if(n){var r=m(this.x,this.y,this.z),i=m(this.x+1,this.y+1,this.z),o=m(this.x+.5,this.y+.5,this.z);r.z=t[1],i.z=t[1],o.z=t[0];var a=n(r),c=n(i),l=new u.Vector3(n(o)),f=Math.max(l.distance(a),l.distance(c));return new s.b(l,f)}var h=512/Math.pow(2,this.z),p=this.x*h+512*e,d=512-(this.y+1)*h;return new s.a([p,d,t[0]],[p+h,d+h,t[1]])}},{key:"children",get:function(){if(!this._children){var e=2*this.x,n=2*this.y,r=this.z+1;this._children=[new t(e,n,r),new t(e,n+1,r),new t(e+1,n,r),new t(e+1,n+1,r)]}return this._children}}]),t}();var h=512,p=[-1/0,-1/0,1/0,1/0],d={type:"url",value:"",validate:function(t){return"string"===typeof t||Array.isArray(t)&&t.every((function(t){return"string"===typeof t}))},equals:function(t,e){if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function g(t,e){var n=[e.transformPoint([t[0],t[1]]),e.transformPoint([t[2],t[1]]),e.transformPoint([t[0],t[3]]),e.transformPoint([t[2],t[3]])];return[Math.min.apply(Math,Object(i.a)(n.map((function(t){return t[0]})))),Math.min.apply(Math,Object(i.a)(n.map((function(t){return t[1]})))),Math.max.apply(Math,Object(i.a)(n.map((function(t){return t[0]})))),Math.max.apply(Math,Object(i.a)(n.map((function(t){return t[1]}))))]}function y(t,e){if(!t||!t.length)return null;Array.isArray(t)&&(t=t[Math.abs(e.x+e.y)%t.length]);var n=e.x,r=e.y,i=e.z;return t.replace("{x}",n).replace("{y}",r).replace("{z}",i).replace("{-y}",Math.pow(2,i)-r-1)}function v(t){return Math.pow(2,t)}function m(t,e,n){var r=v(n),i=t/r*360-180,o=Math.PI-2*Math.PI*e/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function A(t,e,n){var r=v(n);return[t/r*h,e/r*h]}function b(t,e,n,i){if(t.isGeospatial){var o=m(e,n,i),a=Object(r.a)(o,2),s=a[0],u=a[1],c=m(e+1,n+1,i),l=Object(r.a)(c,2);return{west:s,north:u,east:l[0],south:l[1]}}var f=A(e,n,i),h=Object(r.a)(f,2),p=h[0],d=h[1],g=A(e+1,n+1,i),y=Object(r.a)(g,2);return{left:p,top:d,right:y[0],bottom:y[1]}}function _(t,e,n,i){for(var o=function(t,e,n){return n?g(t,n).map((function(t){return t*e/h})):t.map((function(t){return t*e/h}))}(function(t,e,n){var i;if(e&&2===e.length){var o=Object(r.a)(e,2),a=o[0],s=o[1],u=t.getBounds({z:a}),c=t.getBounds({z:s});i=[Math.min(u[0],c[0]),Math.min(u[1],c[1]),Math.max(u[2],c[2]),Math.max(u[3],c[3])]}else i=t.getBounds();return t.isGeospatial?[Math.max(i[0],n[0]),Math.max(i[1],n[1]),Math.min(i[2],n[2]),Math.min(i[3],n[3])]:[Math.max(Math.min(i[0],n[2]),n[0]),Math.max(Math.min(i[1],n[3]),n[1]),Math.min(Math.max(i[2],n[0]),n[2]),Math.min(Math.max(i[3],n[1]),n[3])]}(t,null,n),v(e),i),a=Object(r.a)(o,4),s=a[0],u=a[1],c=a[2],l=a[3],f=[],p=Math.floor(s);p<c;p++)for(var d=Math.floor(u);d<l;d++)f.push({x:p,y:d,z:e});return f}function w(t){var e=t.viewport,n=t.maxZoom,r=t.minZoom,i=t.zRange,o=t.extent,a=t.tileSize,u=void 0===a?h:a,c=t.modelMatrix,l=t.modelMatrixInverse,d=Math.round(e.zoom+Math.log2(h/u));if(Number.isFinite(r)&&d<r){if(!o)return[];d=r}Number.isFinite(n)&&d>n&&(d=n);var y=o;return c&&l&&o&&!e.isGeospatial&&(y=g(o,c)),e.isGeospatial?function(t,e,n){var r=t.resolution?t.projectPosition:null,i=Object.values(t.getFrustumPlanes()).map((function(t){var e=t.normal,n=t.distance;return new s.e(e.clone().negate(),n)})),o=new s.c(i),a=t.distanceScales.unitsPerMeter[2],u=n&&n[0]*a||0,c=n&&n[1]*a||0,l=t.pitch<=60?e:0,h=new f(0,0,0),p={viewport:t,project:r,cullingVolume:o,elevationBounds:[u,c],minZ:l,maxZ:e,offset:0};if(h.update(p),t.subViewports&&t.subViewports.length>1){for(p.offset=-1;h.update(p)&&!(--p.offset<-3););for(p.offset=1;h.update(p)&&!(++p.offset>3););}return h.getSelected()}(e,d,i):_(e,d,y||p,l)}function x(t){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"UNITS",(function(){return d})),n.d(e,"h3IsValid",(function(){return k})),n.d(e,"h3IsPentagon",(function(){return j})),n.d(e,"h3IsResClassIII",(function(){return L})),n.d(e,"h3GetBaseCell",(function(){return N})),n.d(e,"h3GetFaces",(function(){return D})),n.d(e,"h3GetResolution",(function(){return F})),n.d(e,"geoToH3",(function(){return B})),n.d(e,"h3ToGeo",(function(){return z})),n.d(e,"h3ToGeoBoundary",(function(){return U})),n.d(e,"h3ToParent",(function(){return G})),n.d(e,"h3ToChildren",(function(){return V})),n.d(e,"h3ToCenterChild",(function(){return q})),n.d(e,"kRing",(function(){return H})),n.d(e,"kRingDistances",(function(){return W})),n.d(e,"hexRing",(function(){return X})),n.d(e,"polyfill",(function(){return Y})),n.d(e,"h3SetToMultiPolygon",(function(){return Q})),n.d(e,"compact",(function(){return Z})),n.d(e,"uncompact",(function(){return K})),n.d(e,"h3IndexesAreNeighbors",(function(){return J})),n.d(e,"getH3UnidirectionalEdge",(function(){return $})),n.d(e,"getOriginH3IndexFromUnidirectionalEdge",(function(){return tt})),n.d(e,"getDestinationH3IndexFromUnidirectionalEdge",(function(){return et})),n.d(e,"h3UnidirectionalEdgeIsValid",(function(){return nt})),n.d(e,"getH3IndexesFromUnidirectionalEdge",(function(){return rt})),n.d(e,"getH3UnidirectionalEdgesFromHexagon",(function(){return it})),n.d(e,"getH3UnidirectionalEdgeBoundary",(function(){return ot})),n.d(e,"h3Distance",(function(){return at})),n.d(e,"h3Line",(function(){return st})),n.d(e,"experimentalH3ToLocalIj",(function(){return ut})),n.d(e,"experimentalLocalIjToH3",(function(){return ct})),n.d(e,"pointDist",(function(){return lt})),n.d(e,"cellArea",(function(){return ft})),n.d(e,"exactEdgeLength",(function(){return ht})),n.d(e,"hexArea",(function(){return pt})),n.d(e,"edgeLength",(function(){return dt})),n.d(e,"numHexagons",(function(){return gt})),n.d(e,"getRes0Indexes",(function(){return yt})),n.d(e,"getPentagonIndexes",(function(){return vt})),n.d(e,"degsToRads",(function(){return mt})),n.d(e,"radsToDegs",(function(){return At}));var r=function(t){var e,n="undefined"!==typeof(t=t||{})?t:{},r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);var i,o=[],a="";document.currentScript&&(a=document.currentScript.src),a=0!==a.indexOf("blob:")?a.substr(0,a.lastIndexOf("/")+1):"",i=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)e(r.response);else{var i=Q(t);i?e(i.buffer):n()}},r.onerror=n,r.send(null)};var s=n.print||console.log.bind(console),u=n.printErr||console.warn.bind(console);for(e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);r=null,n.arguments&&(o=n.arguments);var c=0,l=function(){return c};var f=!1;function h(t){var e,r=n["_"+t];return e="Cannot call unknown function "+t+", make sure it is exported",r||ut("Assertion failed: "+e),r}function p(t,e,n,r,i){var o={string:function(t){var e=0;if(null!==t&&void 0!==t&&0!==t){var n=1+(t.length<<2);(function(t,e,n){(function(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a);if(s<=127){if(n>=o)break;e[n++]=s}else if(s<=2047){if(n+1>=o)break;e[n++]=192|s>>6,e[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;e[n++]=224|s>>12,e[n++]=128|s>>6&63,e[n++]=128|63&s}else{if(n+3>=o)break;e[n++]=240|s>>18,e[n++]=128|s>>12&63,e[n++]=128|s>>6&63,e[n++]=128|63&s}}e[n]=0})(t,m,e,n)})(t,e=tt(n),n)}return e},array:function(t){var e=tt(t.length);return function(t,e){v.set(t,e)}(t,e),e}};var a=h(t),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=nt()),s[c]=l(r[c])):s[c]=r[c]}var f=a.apply(null,s);return f=function(t){return"string"===e?g(t):"boolean"===e?Boolean(t):t}(f),0!==u&&et(u),f}var d="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function g(t,e){return t?function(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&d)return d.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}(m,t,e):""}var y,v,m,A,b,_,w;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function x(t,e){return t%e>0&&(t+=e-t%e),t}function E(t){y=t,n.HEAP8=v=new Int8Array(t),n.HEAP16=A=new Int16Array(t),n.HEAP32=b=new Int32Array(t),n.HEAPU8=m=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=new Uint32Array(t),n.HEAPF32=_=new Float32Array(t),n.HEAPF64=w=new Float64Array(t)}var O=n.TOTAL_MEMORY||33554432;function S(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var r=e.func;"number"===typeof r?void 0===e.arg?n.dynCall_v(r):n.dynCall_vi(r,e.arg):r(void 0===e.arg?null:e.arg)}else e()}}O=(y=n.buffer?n.buffer:new ArrayBuffer(O)).byteLength,E(y),b[6004]=5266928;var T=[],P=[],M=[],C=[];var I=Math.abs,R=Math.ceil,k=Math.floor,j=Math.min,L=0,N=null,D=null;n.preloadedImages={},n.preloadedAudios={};var F,B,z=null,U="data:application/octet-stream;base64,";function G(t){return String.prototype.startsWith?t.startsWith(U):0===t.indexOf(U)}z="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";function V(t){return t}function q(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t===t?t:t+" ["+t+"]"}))}function H(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function W(){return v.length}function X(t){try{var e=new ArrayBuffer(t);if(e.byteLength!=t)return;return new Int8Array(e).set(v),$(e),E(e),1}catch(n){}}var Y="function"===typeof atob?atob:function(t){var e,n,r,i,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=s.indexOf(t.charAt(c++))<<2|(i=s.indexOf(t.charAt(c++)))>>4,n=(15&i)<<4|(o=s.indexOf(t.charAt(c++)))>>2,r=(3&o)<<6|(a=s.indexOf(t.charAt(c++))),u+=String.fromCharCode(e),64!==o&&(u+=String.fromCharCode(n)),64!==a&&(u+=String.fromCharCode(r))}while(c<t.length);return u};function Q(t){if(G(t))return function(t){try{for(var e=Y(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}catch(i){throw new Error("Converting base64 string to bytes failed.")}}(t.slice(U.length))}var Z,K,J=function(t,e,n){var r=new t.Int8Array(n),i=new t.Int32Array(n),o=(new t.Uint8Array(n),new t.Float32Array(n),new t.Float64Array(n)),a=0|e.p,s=t.Math.floor,u=t.Math.abs,c=t.Math.sqrt,l=t.Math.pow,f=t.Math.cos,h=t.Math.sin,p=t.Math.tan,d=t.Math.acos,g=t.Math.asin,y=t.Math.atan,v=t.Math.atan2,m=t.Math.ceil,A=t.Math.imul,b=t.Math.min,_=t.Math.clz32,w=e.b,x=e.c,E=e.d,O=e.e,S=e.f,T=e.g,P=e.h,M=e.i,C=24048;function I(t,e,n,r){var i,o;0|R(t|=0,e|=0,n|=0,r|=0,0)&&(Me(0|r,0,(o=1+(0|A(3*n|0,n+1|0))|0)<<3|0),(i=0|Ae(o,4))&&(k(t,e,n,r,i,o,0),me(i)))}function R(t,e,n,r,o){t|=0,e|=0,n|=0,o|=0;var a,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0;if(a=C,C=C+16|0,d=a,i[(s=r|=0)>>2]=t,i[s+4>>2]=e,(s=0!=(0|o))&&(i[o>>2]=0),0|jt(t,e))return C=a,0|(d=1);i[d>>2]=0;t:do{if((0|n)>=1)if(s)for(f=0,h=1,p=1,u=0,s=t;;){if(!(u|f)){if(0==(0|(s=0|j(s,e,4,d)))&0==(0|(e=0|x()))){s=2;break t}if(0|jt(s,e)){s=1;break t}}if(0==(0|(s=0|j(s,e,0|i[16+(f<<2)>>2],d)))&0==(0|(e=0|x()))){s=2;break t}if(i[(t=r+(p<<3)|0)>>2]=s,i[t+4>>2]=e,i[o+(p<<2)>>2]=h,t=(0|(u=u+1|0))==(0|h),l=6==(0|(c=f+1|0)),0|jt(s,e)){s=1;break t}if((0|(h=h+(l&t&1)|0))>(0|n)){s=0;break}f=t?l?0:c:f,p=p+1|0,u=t?0:u}else for(f=0,h=1,p=1,u=0,s=t;;){if(!(u|f)){if(0==(0|(s=0|j(s,e,4,d)))&0==(0|(e=0|x()))){s=2;break t}if(0|jt(s,e)){s=1;break t}}if(0==(0|(s=0|j(s,e,0|i[16+(f<<2)>>2],d)))&0==(0|(e=0|x()))){s=2;break t}if(i[(t=r+(p<<3)|0)>>2]=s,i[t+4>>2]=e,t=(0|(u=u+1|0))==(0|h),l=6==(0|(c=f+1|0)),0|jt(s,e)){s=1;break t}if((0|(h=h+(l&t&1)|0))>(0|n)){s=0;break}f=t?l?0:c:f,p=p+1|0,u=t?0:u}else s=0}while(0);return C=a,0|(d=s)}function k(t,e,n,r,o,a,s){n|=0,r|=0,o|=0,a|=0,s|=0;var u,c,l=0,f=0,h=0,p=0,d=0;if(c=C,C=C+16|0,u=c,0==(0|(t|=0))&0==(0|(e|=0)))C=c;else{if(l=0|xe(0|t,0|e,0|a,((0|a)<0)<<31>>31|0),x(),!(0==(0|(d=0|i[(p=f=r+(l<<3)|0)>>2]))&0==(0|(p=0|i[p+4>>2]))|(h=(0|d)==(0|t)&(0|p)==(0|e))))do{h=(0|(p=0|i[(d=f=r+((l=(l+1|0)%(0|a)|0)<<3)|0)>>2]))==(0|t)&(0|(d=0|i[d+4>>2]))==(0|e)}while(!(0==(0|p)&0==(0|d)|h));l=o+(l<<2)|0,h&&(0|i[l>>2])<=(0|s)||(i[(d=f)>>2]=t,i[d+4>>2]=e,i[l>>2]=s,(0|s)>=(0|n)||(d=s+1|0,i[u>>2]=0,k(p=0|j(t,e,2,u),0|x(),n,r,o,a,d),i[u>>2]=0,k(p=0|j(t,e,3,u),0|x(),n,r,o,a,d),i[u>>2]=0,k(p=0|j(t,e,1,u),0|x(),n,r,o,a,d),i[u>>2]=0,k(p=0|j(t,e,5,u),0|x(),n,r,o,a,d),i[u>>2]=0,k(p=0|j(t,e,4,u),0|x(),n,r,o,a,d),i[u>>2]=0,k(p=0|j(t,e,6,u),0|x(),n,r,o,a,d))),C=c}}function j(t,e,n,r){t|=0,e|=0,n|=0;var o,a,s=0,u=0,c=0,l=0,f=0,h=0,p=0;if((0|i[(r|=0)>>2])>0){s=0;do{n=0|ut(n),s=s+1|0}while((0|s)<(0|i[r>>2]))}o=0|Ee(0|t,0|e,45),x(),a=127&o,u=0|Lt(t,e),s=0|Ee(0|t,0|e,52),x(),s&=15;t:do{if(s)for(;;){if(h=0|Ee(0|t,0|e,0|(f=3*(15-s|0)|0)),x(),h&=7,p=0==(0|zt(s)),s=s+-1|0,l=0|Oe(7,0,0|f),e&=~(0|x()),t=(f=0|Oe(0|i[(p?464:48)+(28*h|0)+(n<<2)>>2],0,0|f))|t&~l,e|=0|x(),!(n=0|i[(p?672:256)+(28*h|0)+(n<<2)>>2])){n=0;break t}if(!s){c=6;break}}else c=6}while(0);6==(0|c)&&(t|=h=0|Oe(0|(p=0|i[880+(28*a|0)+(n<<2)>>2]),0,45),e=0|x()|-1040385&e,n=0|i[4304+(28*a|0)+(n<<2)>>2],127==(127&p|0)&&(p=0|Oe(0|i[880+(28*a|0)+20>>2],0,45),e=0|x()|-1040385&e,n=0|i[4304+(28*a|0)+20>>2],t=0|Dt(p|t,e),e=0|x(),i[r>>2]=1+(0|i[r>>2]))),c=0|Ee(0|t,0|e,45),x(),c&=127;t:do{if(0|N(c)){e:do{if(1==(0|Lt(t,e))){if((0|a)!=(0|c)){if(0|z(c,0|i[7728+(28*a|0)>>2])){t=0|Bt(t,e),u=1,e=0|x();break}t=0|Dt(t,e),u=1,e=0|x();break}switch(0|u){case 5:t=0|Bt(t,e),e=0|x(),i[r>>2]=5+(0|i[r>>2]),u=0;break e;case 3:t=0|Dt(t,e),e=0|x(),i[r>>2]=1+(0|i[r>>2]),u=0;break e;default:return p=0,w(0|(h=0)),0|p}}else u=0}while(0);if((0|n)>0){s=0;do{t=0|Nt(t,e),e=0|x(),s=s+1|0}while((0|s)!=(0|n))}if((0|a)!=(0|c)){if(!(0|D(c))){if(0!=(0|u)|5!=(0|Lt(t,e)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&o){case 8:case 118:break t}3!=(0|Lt(t,e))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){s=0;do{t=0|Dt(t,e),e=0|x(),s=s+1|0}while((0|s)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,p=t,w(0|(h=e)),0|p}function L(t,e,n,r,a,s){e|=0,n|=0,r|=0,a|=0,s|=0;var u,c,l,f,h,p,d,g,y,v=0,m=0,A=0,b=0,_=0,w=0,E=0,O=0,S=0,T=0,P=0,M=0,I=0,R=0;if(y=C,C=C+48|0,p=y+32|0,d=y+16|0,g=y,(0|(v=0|i[(t|=0)>>2]))<=0)return C=y,0|(M=0);u=t+4|0,c=p+8|0,l=d+8|0,f=g+8|0,h=((0|e)<0)<<31>>31,P=0;t:for(;;){S=(m=0|i[u>>2])+(P<<4)|0,i[p>>2]=i[S>>2],i[p+4>>2]=i[S+4>>2],i[p+8>>2]=i[S+8>>2],i[p+12>>2]=i[S+12>>2],(0|P)==(v+-1|0)?(i[d>>2]=i[m>>2],i[d+4>>2]=i[m+4>>2],i[d+8>>2]=i[m+8>>2],i[d+12>>2]=i[m+12>>2]):(S=m+(P+1<<4)|0,i[d>>2]=i[S>>2],i[d+4>>2]=i[S+4>>2],i[d+8>>2]=i[S+8>>2],i[d+12>>2]=i[S+12>>2]),S=0|W(p,d,n);e:do{if((0|S)>0){T=+(0|S),O=0;n:for(;;){R=+(S-O|0),I=+(0|O),o[g>>3]=+o[p>>3]*R/T+ +o[d>>3]*I/T,o[f>>3]=+o[c>>3]*R/T+ +o[l>>3]*I/T,m=0|xe(0|(w=0|Ut(g,n)),0|(E=0|x()),0|e,0|h),x(),b=0|i[(A=v=s+(m<<3)|0)>>2],A=0|i[A+4>>2];r:do{if(0==(0|b)&0==(0|A))M=14;else for(_=0;;){if((0|_)>(0|e)){v=1;break r}if((0|b)==(0|w)&(0|A)==(0|E)){v=7;break r}if(0==(0|(b=0|i[(A=v=s+((m=(m+1|0)%(0|e)|0)<<3)|0)>>2]))&0==(0|(A=0|i[A+4>>2]))){M=14;break}_=_+1|0}}while(0);switch(14==(0|M)&&(M=0,0==(0|w)&0==(0|E)?v=7:(i[v>>2]=w,i[v+4>>2]=E,v=0|i[r>>2],i[(_=a+(v<<3)|0)>>2]=w,i[_+4>>2]=E,i[r>>2]=v+1,v=0)),7&v){case 7:case 0:break;default:break n}if((0|S)<=(0|(O=O+1|0))){M=8;break e}}if(0|v){v=-1,M=20;break t}}else M=8}while(0);if(8==(0|M)&&(M=0),(0|(P=P+1|0))>=(0|(v=0|i[t>>2]))){v=0,M=20;break}}return 20==(0|M)?(C=y,0|v):0}function N(t){return 0|i[7728+(28*(t|=0)|0)+16>>2]}function D(t){return 4==(0|(t|=0))|117==(0|t)|0}function F(t){return 0|i[11152+(216*(0|i[(t|=0)>>2])|0)+(72*(0|i[t+4>>2])|0)+(24*(0|i[t+8>>2])|0)+(i[t+12>>2]<<3)>>2]}function B(t){return 0|i[11152+(216*(0|i[(t|=0)>>2])|0)+(72*(0|i[t+4>>2])|0)+(24*(0|i[t+8>>2])|0)+(i[t+12>>2]<<3)+4>>2]}function z(t,e){return e|=0,(0|i[7728+(28*(t|=0)|0)+20>>2])==(0|e)?0|(e=1):0|(e=(0|i[7728+(28*t|0)+24>>2])==(0|e))}function U(t,e){return 0|i[880+(28*(t|=0)|0)+((e|=0)<<2)>>2]}function G(t,e){return e|=0,(0|i[880+(28*(t|=0)|0)>>2])==(0|e)?0|(e=0):(0|i[880+(28*t|0)+4>>2])==(0|e)?0|(e=1):(0|i[880+(28*t|0)+8>>2])==(0|e)?0|(e=2):(0|i[880+(28*t|0)+12>>2])==(0|e)?0|(e=3):(0|i[880+(28*t|0)+16>>2])==(0|e)?0|(e=4):(0|i[880+(28*t|0)+20>>2])==(0|e)?0|(e=5):0|((0|i[880+(28*t|0)+24>>2])==(0|e)?6:7)}function V(t){return+o[(t|=0)+16>>3]<+o[t+24>>3]|0}function q(t,e){t|=0;var n,r,i=0;return(i=+o[(e|=0)>>3])>=+o[t+8>>3]&&i<=+o[t>>3]?(n=+o[t+16>>3],i=+o[t+24>>3],e=(r=+o[e+8>>3])>=i,t=r<=n&1,n<i?e&&(t=1):e||(t=0),0|(e=0!=(0|t))):0|(e=0)}function H(t,e){t|=0,e|=0;var n,r,a,s,c,l,f=0,h=0;s=C,C=C+288|0,n=s+264|0,r=s+96|0,h=(f=a=s)+96|0;do{i[f>>2]=0,f=f+4|0}while((0|f)<(0|h));return Wt(e,a),qt(h=0|i[(f=a)>>2],f=0|i[f+4>>2],n),Ht(h,f,r),c=+Pt(n,r+8|0),o[n>>3]=+o[t>>3],o[(f=n+8|0)>>3]=+o[t+16>>3],o[r>>3]=+o[t+8>>3],o[(h=r+8|0)>>3]=+o[t+24>>3],l=+Pt(n,r),h=~~+m(+l*l/+Se(+ +u(+(+o[f>>3]-+o[h>>3])/(+o[n>>3]-+o[r>>3])),3)/(c*(2.59807621135*c)*.8)),C=s,0|(0==(0|h)?1:h)}function W(t,e,n){t|=0,e|=0,n|=0;var r,o,a,s,u,c=0,l=0;s=C,C=C+288|0,r=s+264|0,o=s+96|0,l=(c=a=s)+96|0;do{i[c>>2]=0,c=c+4|0}while((0|c)<(0|l));return Wt(n,a),qt(c=0|i[(l=a)>>2],l=0|i[l+4>>2],r),Ht(c,l,o),u=+Pt(r,o+8|0),l=~~+m(+ +Pt(t,e)/(2*u)),C=s,0|(0==(0|l)?1:l)}function X(t,e,n,r){e|=0,n|=0,r|=0,i[(t|=0)>>2]=e,i[t+4>>2]=n,i[t+8>>2]=r}function Y(t,e){t|=0;var n,r,a,s,c=0,l=0,f=0,h=0,p=0,d=0,g=0;i[(s=(e|=0)+8|0)>>2]=0,r=+o[t>>3],h=+u(+r),a=+o[t+8>>3],h+=.5*(p=+u(+a)/.8660254037844386),h-=+(0|(c=~~h)),p-=+(0|(t=~~p));do{if(h<.5){if(h<.3333333333333333){if(i[e>>2]=c,p<.5*(h+1)){i[e+4>>2]=t;break}t=t+1|0,i[e+4>>2]=t;break}if(t=(1&!(p<(g=1-h)))+t|0,i[e+4>>2]=t,g<=p&p<2*h){c=c+1|0,i[e>>2]=c;break}i[e>>2]=c;break}if(!(h<.6666666666666666)){if(c=c+1|0,i[e>>2]=c,p<.5*h){i[e+4>>2]=t;break}t=t+1|0,i[e+4>>2]=t;break}if(p<1-h){if(i[e+4>>2]=t,2*h-1<p){i[e>>2]=c;break}}else t=t+1|0,i[e+4>>2]=t;c=c+1|0,i[e>>2]=c}while(0);do{if(r<0){if(1&t){c=~~(+(0|c)-(2*(+((d=0|be(0|c,((0|c)<0)<<31>>31|0,0|(d=(t+1|0)/2|0),((0|d)<0)<<31>>31|0))>>>0)+4294967296*+(0|x()))+1)),i[e>>2]=c;break}c=~~(+(0|c)-2*(+((d=0|be(0|c,((0|c)<0)<<31>>31|0,0|(d=(0|t)/2|0),((0|d)<0)<<31>>31|0))>>>0)+4294967296*+(0|x()))),i[e>>2]=c;break}}while(0);d=e+4|0,a<0&&(c=c-((1|t<<1)/2|0)|0,i[e>>2]=c,t=0-t|0,i[d>>2]=t),l=t-c|0,(0|c)<0?(f=0-c|0,i[d>>2]=l,i[s>>2]=f,i[e>>2]=0,t=l,c=0):f=0,(0|t)<0&&(c=c-t|0,i[e>>2]=c,f=f-t|0,i[s>>2]=f,i[d>>2]=0,t=0),n=c-f|0,l=t-f|0,(0|f)<0&&(i[e>>2]=n,i[d>>2]=l,i[s>>2]=0,t=l,c=n,f=0),(0|(l=(0|f)<(0|(l=(0|t)<(0|c)?t:c))?f:l))<=0||(i[e>>2]=c-l,i[d>>2]=t-l,i[s>>2]=f-l)}function Q(t){var e,n=0,r=0,o=0,a=0,s=0;n=0|i[(t|=0)>>2],r=0|i[(e=t+4|0)>>2],(0|n)<0&&(r=r-n|0,i[e>>2]=r,i[(s=t+8|0)>>2]=(0|i[s>>2])-n,i[t>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[t>>2]=n,a=(0|i[(s=t+8|0)>>2])-r|0,i[s>>2]=a,i[e>>2]=0,r=0):(s=a=t+8|0,a=0|i[a>>2]),(0|a)<0&&(n=n-a|0,i[t>>2]=n,r=r-a|0,i[e>>2]=r,i[s>>2]=0,a=0),(0|(o=(0|a)<(0|(o=(0|r)<(0|n)?r:n))?a:o))<=0||(i[t>>2]=n-o,i[e>>2]=r-o,i[s>>2]=a-o)}function Z(t,e){e|=0;var n,r;r=0|i[(t|=0)+8>>2],n=+((0|i[t+4>>2])-r|0),o[e>>3]=+((0|i[t>>2])-r|0)-.5*n,o[e+8>>3]=.8660254037844386*n}function K(t,e,n){t|=0,e|=0,i[(n|=0)>>2]=(0|i[e>>2])+(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])+(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])+(0|i[t+8>>2])}function J(t,e,n){t|=0,e|=0,i[(n|=0)>>2]=(0|i[t>>2])-(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])-(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])-(0|i[e+8>>2])}function $(t,e){e|=0;var n,r=0;r=0|A(0|i[(t|=0)>>2],e),i[t>>2]=r,n=0|A(0|i[(r=t+4|0)>>2],e),i[r>>2]=n,e=0|A(0|i[(t=t+8|0)>>2],e),i[t>>2]=e}function tt(t){var e,n,r=0,o=0,a=0,s=0,u=0;u=(0|(n=0|i[(t|=0)>>2]))<0,t=(t=(o=(0|(s=((e=(0|(a=(0|i[t+4>>2])-(u?n:0)|0))<0)?0-a|0:0)+((0|i[t+8>>2])-(u?n:0))|0))<0)?0:s)-((a=(0|(o=(0|t)<(0|(o=(0|(r=(e?0:a)-(o?s:0)|0))<(0|(s=(u?0:n)-(e?a:0)-(o?s:0)|0))?r:s))?t:o))>0)?o:0)|0,r=r-(a?o:0)|0;t:do{switch(s-(a?o:0)|0){case 0:switch(0|r){case 0:return 0|(u=0==(0|t)?0:1==(0|t)?1:7);case 1:return 0|(u=0==(0|t)?2:1==(0|t)?3:7);default:break t}case 1:switch(0|r){case 0:return 0|(u=0==(0|t)?4:1==(0|t)?5:7);case 1:if(t)break t;return 0|(t=6);default:break t}}}while(0);return 0|(u=7)}function et(t){var e,n,r=0,o=0,a=0,s=0,u=0;o=0|i[(e=(t|=0)+8|0)>>2],a=0|ye(+((3*(r=(0|i[t>>2])-o|0)|0)-(o=(0|i[(n=t+4|0)>>2])-o|0)|0)/7),i[t>>2]=a,r=0|ye(+((o<<1)+r|0)/7),i[n>>2]=r,i[e>>2]=0,o=r-a|0,(0|a)<0?(u=0-a|0,i[n>>2]=o,i[e>>2]=u,i[t>>2]=0,r=o,a=0,o=u):o=0,(0|r)<0&&(a=a-r|0,i[t>>2]=a,o=o-r|0,i[e>>2]=o,i[n>>2]=0,r=0),u=a-o|0,s=r-o|0,(0|o)<0?(i[t>>2]=u,i[n>>2]=s,i[e>>2]=0,r=s,s=u,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|r)<(0|s)?r:s))?o:a))<=0||(i[t>>2]=s-a,i[n>>2]=r-a,i[e>>2]=o-a)}function nt(t){var e,n,r=0,o=0,a=0,s=0,u=0;o=0|i[(e=(t|=0)+8|0)>>2],a=0|ye(+(((r=(0|i[t>>2])-o|0)<<1)+(o=(0|i[(n=t+4|0)>>2])-o|0)|0)/7),i[t>>2]=a,r=0|ye(+((3*o|0)-r|0)/7),i[n>>2]=r,i[e>>2]=0,o=r-a|0,(0|a)<0?(u=0-a|0,i[n>>2]=o,i[e>>2]=u,i[t>>2]=0,r=o,a=0,o=u):o=0,(0|r)<0&&(a=a-r|0,i[t>>2]=a,o=o-r|0,i[e>>2]=o,i[n>>2]=0,r=0),u=a-o|0,s=r-o|0,(0|o)<0?(i[t>>2]=u,i[n>>2]=s,i[e>>2]=0,r=s,s=u,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|r)<(0|s)?r:s))?o:a))<=0||(i[t>>2]=s-a,i[n>>2]=r-a,i[e>>2]=o-a)}function rt(t){var e,n,r,o=0,a=0,s=0,u=0;o=0|i[(t|=0)>>2],a=0|i[(n=t+4|0)>>2],s=0|i[(r=t+8|0)>>2],u=a+(3*o|0)|0,i[t>>2]=u,a=s+(3*a|0)|0,i[n>>2]=a,o=(3*s|0)+o|0,i[r>>2]=o,s=a-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=s,i[r>>2]=o,i[t>>2]=0,a=s,s=0):s=u,(0|a)<0&&(s=s-a|0,i[t>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),e=s-o|0,u=a-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=u,i[r>>2]=0,s=e,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[t>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function it(t){var e,n,r,o=0,a=0,s=0,u=0;u=0|i[(t|=0)>>2],s=(3*(o=0|i[(n=t+4|0)>>2])|0)+u|0,u=(a=0|i[(r=t+8|0)>>2])+(3*u|0)|0,i[t>>2]=u,i[n>>2]=s,o=(3*a|0)+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[t>>2]=0,u=0):a=s,(0|a)<0&&(u=u-a|0,i[t>>2]=u,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),e=u-o|0,s=a-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=s,i[r>>2]=0,u=e,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|s)<(0|u)?s:u))?o:a))<=0||(i[t>>2]=u-a,i[n>>2]=s-a,i[r>>2]=o-a)}function ot(t,e){t|=0;var n,r,o,a=0,s=0,u=0;((e|=0)+-1|0)>>>0>=6||(u=(0|i[15472+(12*e|0)>>2])+(0|i[t>>2])|0,i[t>>2]=u,o=t+4|0,s=(0|i[15472+(12*e|0)+4>>2])+(0|i[o>>2])|0,i[o>>2]=s,r=t+8|0,e=(0|i[15472+(12*e|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=e,a=s-u|0,(0|u)<0?(e=e-u|0,i[o>>2]=a,i[r>>2]=e,i[t>>2]=0,s=0):(a=s,s=u),(0|a)<0&&(s=s-a|0,i[t>>2]=s,e=e-a|0,i[r>>2]=e,i[o>>2]=0,a=0),n=s-e|0,u=a-e|0,(0|e)<0?(i[t>>2]=n,i[o>>2]=u,i[r>>2]=0,s=n,e=0):u=a,(0|(a=(0|e)<(0|(a=(0|u)<(0|s)?u:s))?e:a))<=0||(i[t>>2]=s-a,i[o>>2]=u-a,i[r>>2]=e-a))}function at(t){var e,n,r,o=0,a=0,s=0,u=0;u=0|i[(t|=0)>>2],s=(o=0|i[(n=t+4|0)>>2])+u|0,u=(a=0|i[(r=t+8|0)>>2])+u|0,i[t>>2]=u,i[n>>2]=s,o=a+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[t>>2]=0,s=0):(a=s,s=u),(0|a)<0&&(s=s-a|0,i[t>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),e=s-o|0,u=a-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=u,i[r>>2]=0,s=e,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[t>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function st(t){var e,n,r,o=0,a=0,s=0,u=0;o=0|i[(t|=0)>>2],s=0|i[(n=t+4|0)>>2],a=0|i[(r=t+8|0)>>2],u=s+o|0,i[t>>2]=u,s=a+s|0,i[n>>2]=s,o=a+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[t>>2]=0,s=0):(a=s,s=u),(0|a)<0&&(s=s-a|0,i[t>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),e=s-o|0,u=a-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=u,i[r>>2]=0,s=e,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[t>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function ut(t){switch(0|(t|=0)){case 1:t=5;break;case 5:t=4;break;case 4:t=6;break;case 6:t=2;break;case 2:t=3;break;case 3:t=1}return 0|t}function ct(t){switch(0|(t|=0)){case 1:t=3;break;case 3:t=2;break;case 2:t=6;break;case 6:t=4;break;case 4:t=5;break;case 5:t=1}return 0|t}function lt(t){var e,n,r,o=0,a=0,s=0,u=0;o=0|i[(t|=0)>>2],a=0|i[(n=t+4|0)>>2],s=0|i[(r=t+8|0)>>2],u=a+(o<<1)|0,i[t>>2]=u,a=s+(a<<1)|0,i[n>>2]=a,o=(s<<1)+o|0,i[r>>2]=o,s=a-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=s,i[r>>2]=o,i[t>>2]=0,a=s,s=0):s=u,(0|a)<0&&(s=s-a|0,i[t>>2]=s,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),e=s-o|0,u=a-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=u,i[r>>2]=0,s=e,o=0):u=a,(0|(a=(0|o)<(0|(a=(0|u)<(0|s)?u:s))?o:a))<=0||(i[t>>2]=s-a,i[n>>2]=u-a,i[r>>2]=o-a)}function ft(t){var e,n,r,o=0,a=0,s=0,u=0;u=0|i[(t|=0)>>2],s=((o=0|i[(n=t+4|0)>>2])<<1)+u|0,u=(a=0|i[(r=t+8|0)>>2])+(u<<1)|0,i[t>>2]=u,i[n>>2]=s,o=(a<<1)+o|0,i[r>>2]=o,a=s-u|0,(0|u)<0?(o=o-u|0,i[n>>2]=a,i[r>>2]=o,i[t>>2]=0,u=0):a=s,(0|a)<0&&(u=u-a|0,i[t>>2]=u,o=o-a|0,i[r>>2]=o,i[n>>2]=0,a=0),e=u-o|0,s=a-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=s,i[r>>2]=0,u=e,o=0):s=a,(0|(a=(0|o)<(0|(a=(0|s)<(0|u)?s:u))?o:a))<=0||(i[t>>2]=u-a,i[n>>2]=s-a,i[r>>2]=o-a)}function ht(t,e){e|=0;var n,r,o,a=0,s=0,u=0;return o=(0|(r=(0|i[(t|=0)>>2])-(0|i[e>>2])|0))<0,n=(0|(s=(0|i[t+4>>2])-(0|i[e+4>>2])-(o?r:0)|0))<0,e=(e=(t=(0|(u=(o?0-r|0:0)+(0|i[t+8>>2])-(0|i[e+8>>2])+(n?0-s|0:0)|0))<0)?0:u)-((s=(0|(t=(0|e)<(0|(t=(0|(a=(n?0:s)-(t?u:0)|0))<(0|(u=(o?0:r)-(n?s:0)-(t?u:0)|0))?a:u))?e:t))>0)?t:0)|0,a=a-(s?t:0)|0,0|((0|(t=(0|(t=u-(s?t:0)|0))>-1?t:0-t|0))>(0|(e=(0|(a=(0|a)>-1?a:0-a|0))>(0|(e=(0|e)>-1?e:0-e|0))?a:e))?t:e)}function pt(t,e){e|=0;var n;n=0|i[(t|=0)+8>>2],i[e>>2]=(0|i[t>>2])-n,i[e+4>>2]=(0|i[t+4>>2])-n}function dt(t,e){e|=0;var n,r,o,a=0,s=0,u=0;s=0|i[(t|=0)>>2],i[e>>2]=s,t=0|i[t+4>>2],i[(r=e+4|0)>>2]=t,i[(o=e+8|0)>>2]=0,a=t-s|0,(0|s)<0?(t=0-s|0,i[r>>2]=a,i[o>>2]=t,i[e>>2]=0,s=0):(a=t,t=0),(0|a)<0&&(s=s-a|0,i[e>>2]=s,t=t-a|0,i[o>>2]=t,i[r>>2]=0,a=0),n=s-t|0,u=a-t|0,(0|t)<0?(i[e>>2]=n,i[r>>2]=u,i[o>>2]=0,a=u,u=n,t=0):u=s,(0|(s=(0|t)<(0|(s=(0|a)<(0|u)?a:u))?t:s))<=0||(i[e>>2]=u-s,i[r>>2]=a-s,i[o>>2]=t-s)}function gt(t){var e,n,r,o;n=(o=0|i[(e=(t|=0)+8|0)>>2])-(0|i[t>>2])|0,i[t>>2]=n,t=(0|i[(r=t+4|0)>>2])-o|0,i[r>>2]=t,i[e>>2]=0-(t+n)}function yt(t){var e,n,r=0,o=0,a=0,s=0,u=0;r=0-(o=0|i[(t|=0)>>2])|0,i[t>>2]=r,i[(e=t+8|0)>>2]=0,s=(a=0|i[(n=t+4|0)>>2])+o|0,(0|o)>0?(i[n>>2]=s,i[e>>2]=o,i[t>>2]=0,r=0,a=s):o=0,(0|a)<0?(u=r-a|0,i[t>>2]=u,o=o-a|0,i[e>>2]=o,i[n>>2]=0,s=u-o|0,r=0-o|0,(0|o)<0?(i[t>>2]=s,i[n>>2]=r,i[e>>2]=0,a=r,o=0):(a=0,s=u)):s=r,(0|(r=(0|o)<(0|(r=(0|a)<(0|s)?a:s))?o:r))<=0||(i[t>>2]=s-r,i[n>>2]=a-r,i[e>>2]=o-r)}function vt(t,e,n,r){e|=0,n|=0,r|=0;var a,s=0,u=0,c=0,l=0;if(a=C,C=C+32|0,function(t,e){e|=0;var n=0,r=0,i=0;n=+o[(t=t|0)>>3],r=+f(+n),n=+h(+n),o[e+16>>3]=n,n=+o[t+8>>3],i=r*+f(+n),o[e>>3]=i,n=r*+h(+n),o[e+8>>3]=n}(t|=0,u=a),i[n>>2]=0,s=+ue(15888,u),(c=+ue(15912,u))<s&&(i[n>>2]=1,s=c),(c=+ue(15936,u))<s&&(i[n>>2]=2,s=c),(c=+ue(15960,u))<s&&(i[n>>2]=3,s=c),(c=+ue(15984,u))<s&&(i[n>>2]=4,s=c),(c=+ue(16008,u))<s&&(i[n>>2]=5,s=c),(c=+ue(16032,u))<s&&(i[n>>2]=6,s=c),(c=+ue(16056,u))<s&&(i[n>>2]=7,s=c),(c=+ue(16080,u))<s&&(i[n>>2]=8,s=c),(c=+ue(16104,u))<s&&(i[n>>2]=9,s=c),(c=+ue(16128,u))<s&&(i[n>>2]=10,s=c),(c=+ue(16152,u))<s&&(i[n>>2]=11,s=c),(c=+ue(16176,u))<s&&(i[n>>2]=12,s=c),(c=+ue(16200,u))<s&&(i[n>>2]=13,s=c),(c=+ue(16224,u))<s&&(i[n>>2]=14,s=c),(c=+ue(16248,u))<s&&(i[n>>2]=15,s=c),(c=+ue(16272,u))<s&&(i[n>>2]=16,s=c),(c=+ue(16296,u))<s&&(i[n>>2]=17,s=c),(c=+ue(16320,u))<s&&(i[n>>2]=18,s=c),(c=+ue(16344,u))<s&&(i[n>>2]=19,s=c),(c=+d(+(1-.5*s)))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(C=a);if(n=0|i[n>>2],s=+St((s=+o[16368+(24*n|0)>>3])-+St(+function(t,e){t|=0;var n=0,r=0,i=0,a=0,s=0;return a=+o[(e=e|0)>>3],r=+f(+a),i=+o[e+8>>3]-+o[t+8>>3],s=r*+h(+i),n=+o[t>>3],+ +v(+s,+(+h(+a)*+f(+n)-+f(+i)*(r*+h(+n))))}(15568+(n<<4)|0,t))),l=0|zt(e)?+St(s+-.3334731722518321):s,s=+p(+c)/.381966011250105,(0|e)>0){u=0;do{s*=2.6457513110645907,u=u+1|0}while((0|u)!=(0|e))}c=+f(+l)*s,o[r>>3]=c,l=+h(+l)*s,o[r+8>>3]=l,C=a}function mt(t,e,n,r,a){e|=0,n|=0,r|=0,a|=0;var s=0,l=0;if((s=+function(t){var e=0,n=0;return n=+o[(t=t|0)>>3],e=+o[t+8>>3],+ +c(+(n*n+e*e))}(t|=0))<1e-16)return e=15568+(e<<4)|0,i[a>>2]=i[e>>2],i[a+4>>2]=i[e+4>>2],i[a+8>>2]=i[e+8>>2],void(i[a+12>>2]=i[e+12>>2]);if(l=+v(+ +o[t+8>>3],+ +o[t>>3]),(0|n)>0){t=0;do{s/=2.6457513110645907,t=t+1|0}while((0|t)!=(0|n))}r?(s/=3,n=0==(0|zt(n)),s=+y(.381966011250105*(n?s:s/2.6457513110645907))):(s=+y(.381966011250105*s),0|zt(n)&&(l=+St(l+.3334731722518321))),function(t,e,n,r){t|=0,e=+e,r|=0;var a=0,s=0,c=0,l=0;if((n=+n)<1e-16)return i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],void(i[r+12>>2]=i[t+12>>2]);s=e<0?e+6.283185307179586:e,s=e>=6.283185307179586?s+-6.283185307179586:s;do{if(!(s<1e-16)){if(a=+u(+(s+-3.141592653589793))<1e-16,e=+o[t>>3],a){e-=n,o[r>>3]=e,a=r;break}if(c=+f(+n),n=+h(+n),e=c*+h(+e)+ +f(+s)*(n*+f(+e)),e=+g(+((e=e>1?1:e)<-1?-1:e)),o[r>>3]=e,+u(+(e+-1.5707963267948966))<1e-16)return o[r>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+u(+(e+1.5707963267948966))<1e-16)return o[r>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if(l=+f(+e),s=n*+h(+s)/l,n=+o[t>>3],e=(c-+h(+e)*+h(+n))/+f(+n)/l,c=s>1?1:s,e=e>1?1:e,(e=+o[t+8>>3]+ +v(+(c<-1?-1:c),+(e<-1?-1:e)))>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);return void(o[r+8>>3]=e)}e=+o[t>>3]+n,o[r>>3]=e,a=r}while(0);if(+u(+(e+-1.5707963267948966))<1e-16)return o[a>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+u(+(e+1.5707963267948966))<1e-16)return o[a>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if((e=+o[t+8>>3])>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);o[r+8>>3]=e}(15568+(e<<4)|0,+St(+o[16368+(24*e|0)>>3]-l),s,a)}function At(t,e,n){e|=0,n|=0;var r,o;r=C,C=C+16|0,Z((t|=0)+4|0,o=r),mt(o,0|i[t>>2],e,0,n),C=r}function bt(t,e,n,r,a){t|=0,e|=0,n|=0,r|=0,a|=0;var s,u,c,l,f,h,p,d,g,y,v,m,A,b,_,w,x,O,S,T,P,M,I=0,R=0,k=0,j=0,L=0,N=0;if(M=C,C=C+272|0,j=M+240|0,S=M,T=M+224|0,P=M+208|0,v=M+176|0,m=M+160|0,A=M+192|0,b=M+144|0,_=M+128|0,w=M+112|0,x=M+96|0,O=M+80|0,i[(I=M+256|0)>>2]=e,i[j>>2]=i[t>>2],i[j+4>>2]=i[t+4>>2],i[j+8>>2]=i[t+8>>2],i[j+12>>2]=i[t+12>>2],_t(j,I,S),i[a>>2]=0,(0|(j=r+n+(5==(0|r)&1)|0))<=(0|n))C=M;else{u=T+4|0,c=v+4|0,l=n+5|0,f=16848+((s=0|i[I>>2])<<2)|0,h=16928+(s<<2)|0,p=_+8|0,d=w+8|0,g=x+8|0,y=P+4|0,k=n;t:for(;;){R=S+(((0|k)%5|0)<<4)|0,i[P>>2]=i[R>>2],i[P+4>>2]=i[R+4>>2],i[P+8>>2]=i[R+8>>2],i[P+12>>2]=i[R+12>>2];do{}while(2==(0|wt(P,s,0,1)));if((0|k)>(0|n)&0!=(0|zt(e))){if(i[v>>2]=i[P>>2],i[v+4>>2]=i[P+4>>2],i[v+8>>2]=i[P+8>>2],i[v+12>>2]=i[P+12>>2],Z(u,m),r=0|i[v>>2],I=0|i[17008+(80*r|0)+(i[T>>2]<<2)>>2],i[v>>2]=i[18608+(80*r|0)+(20*I|0)>>2],(0|(R=0|i[18608+(80*r|0)+(20*I|0)+16>>2]))>0){t=0;do{at(c),t=t+1|0}while((0|t)<(0|R))}switch(R=18608+(80*r|0)+(20*I|0)+4|0,i[A>>2]=i[R>>2],i[A+4>>2]=i[R+4>>2],i[A+8>>2]=i[R+8>>2],$(A,3*(0|i[f>>2])|0),K(c,A,c),Q(c),Z(c,b),L=+(0|i[h>>2]),o[_>>3]=3*L,o[p>>3]=0,N=-1.5*L,o[w>>3]=N,o[d>>3]=2.598076211353316*L,o[x>>3]=N,o[g>>3]=-2.598076211353316*L,0|i[17008+(80*(0|i[v>>2])|0)+(i[P>>2]<<2)>>2]){case 1:t=w,r=_;break;case 3:t=x,r=w;break;case 2:t=_,r=x;break;default:t=12;break t}ae(m,b,r,t,O),mt(O,0|i[v>>2],s,1,a+8+(i[a>>2]<<4)|0),i[a>>2]=1+(0|i[a>>2])}if((0|k)<(0|l)&&(Z(y,v),mt(v,0|i[P>>2],s,1,a+8+(i[a>>2]<<4)|0),i[a>>2]=1+(0|i[a>>2])),i[T>>2]=i[P>>2],i[T+4>>2]=i[P+4>>2],i[T+8>>2]=i[P+8>>2],i[T+12>>2]=i[P+12>>2],(0|(k=k+1|0))>=(0|j)){t=3;break}}3!=(0|t)?12==(0|t)&&E(22474,22521,581,22531):C=M}}function _t(t,e,n){t|=0,e|=0,n|=0;var r,o=0,a=0,s=0,u=0,c=0;r=C,C=C+128|0,a=r,u=20208,c=(s=o=r+64|0)+60|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|c));u=20272,c=(s=a)+60|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|c));o=(c=0==(0|zt(0|i[e>>2])))?o:a,lt(a=t+4|0),ft(a),0|zt(0|i[e>>2])&&(it(a),i[e>>2]=1+(0|i[e>>2])),i[n>>2]=i[t>>2],K(a,o,e=n+4|0),Q(e),i[n+16>>2]=i[t>>2],K(a,o+12|0,e=n+20|0),Q(e),i[n+32>>2]=i[t>>2],K(a,o+24|0,e=n+36|0),Q(e),i[n+48>>2]=i[t>>2],K(a,o+36|0,e=n+52|0),Q(e),i[n+64>>2]=i[t>>2],K(a,o+48|0,n=n+68|0),Q(n),C=r}function wt(t,e,n,r){n|=0,r|=0;var o,a,s,u,c,l,f=0,h=0,p=0,d=0,g=0;if(l=C,C=C+32|0,c=l+12|0,a=l,g=(t|=0)+4|0,d=0|i[16928+((e|=0)<<2)>>2],d=(u=0!=(0|r))?3*d|0:d,f=0|i[g>>2],o=0|i[(s=t+8|0)>>2],u){if((0|(f=o+f+(r=0|i[(h=t+12|0)>>2])|0))==(0|d))return C=l,0|(g=1);p=h}else f=o+f+(r=0|i[(p=t+12|0)>>2])|0;if((0|f)<=(0|d))return C=l,0|(g=0);do{if((0|r)>0){if(r=0|i[t>>2],(0|o)>0){h=18608+(80*r|0)+60|0,r=t;break}r=18608+(80*r|0)+40|0,n?(X(c,d,0,0),J(g,c,a),st(a),K(a,c,g),h=r,r=t):(h=r,r=t)}else h=18608+(80*(0|i[t>>2])|0)+20|0,r=t}while(0);if(i[r>>2]=i[h>>2],(0|i[(f=h+16|0)>>2])>0){r=0;do{at(g),r=r+1|0}while((0|r)<(0|i[f>>2]))}return t=h+4|0,i[c>>2]=i[t>>2],i[c+4>>2]=i[t+4>>2],i[c+8>>2]=i[t+8>>2],e=0|i[16848+(e<<2)>>2],$(c,u?3*e|0:e),K(g,c,g),Q(g),r=u&&((0|i[s>>2])+(0|i[g>>2])+(0|i[p>>2])|0)==(0|d)?1:2,C=l,0|(g=r)}function xt(t,e){t|=0,e|=0;var n=0;do{n=0|wt(t,e,0,1)}while(2==(0|n));return 0|n}function Et(t,e,n,r,a){t|=0,e|=0,n|=0,r|=0,a|=0;var s,u,c,l,f,h,p,d,g,y,v,m,A,b,_,w,x,O,S=0,T=0,P=0,M=0,I=0;if(O=C,C=C+240|0,b=O+208|0,_=O,w=O+192|0,x=O+176|0,g=O+160|0,y=O+144|0,v=O+128|0,m=O+112|0,A=O+96|0,i[(S=O+224|0)>>2]=e,i[b>>2]=i[t>>2],i[b+4>>2]=i[t+4>>2],i[b+8>>2]=i[t+8>>2],i[b+12>>2]=i[t+12>>2],Ot(b,S,_),i[a>>2]=0,(0|(d=r+n+(6==(0|r)&1)|0))<=(0|n))C=O;else{u=n+6|0,c=16928+((s=0|i[S>>2])<<2)|0,l=y+8|0,f=v+8|0,h=m+8|0,p=w+4|0,T=0,P=n,r=-1;t:for(;;){if(t=_+((S=(0|P)%6|0)<<4)|0,i[w>>2]=i[t>>2],i[w+4>>2]=i[t+4>>2],i[w+8>>2]=i[t+8>>2],i[w+12>>2]=i[t+12>>2],t=T,T=0|wt(w,s,0,1),(0|P)>(0|n)&0!=(0|zt(e))&&(1!=(0|t)&&(0|i[w>>2])!=(0|r))){switch(Z(_+(((S+5|0)%6|0)<<4)+4|0,x),Z(_+(S<<4)+4|0,g),M=+(0|i[c>>2]),o[y>>3]=3*M,o[l>>3]=0,I=-1.5*M,o[v>>3]=I,o[f>>3]=2.598076211353316*M,o[m>>3]=I,o[h>>3]=-2.598076211353316*M,S=0|i[b>>2],0|i[17008+(80*S|0)+(((0|r)==(0|S)?0|i[w>>2]:r)<<2)>>2]){case 1:t=v,r=y;break;case 3:t=m,r=v;break;case 2:t=y,r=m;break;default:t=8;break t}ae(x,g,r,t,A),0|se(x,A)||0|se(g,A)||(mt(A,0|i[b>>2],s,1,a+8+(i[a>>2]<<4)|0),i[a>>2]=1+(0|i[a>>2]))}if((0|P)<(0|u)&&(Z(p,x),mt(x,0|i[w>>2],s,1,a+8+(i[a>>2]<<4)|0),i[a>>2]=1+(0|i[a>>2])),(0|(P=P+1|0))>=(0|d)){t=3;break}r=0|i[w>>2]}3!=(0|t)?8==(0|t)&&E(22557,22521,746,22602):C=O}}function Ot(t,e,n){t|=0,e|=0,n|=0;var r,o=0,a=0,s=0,u=0,c=0;r=C,C=C+160|0,a=r,u=20336,c=(s=o=r+80|0)+72|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|c));u=20416,c=(s=a)+72|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|c));o=(c=0==(0|zt(0|i[e>>2])))?o:a,lt(a=t+4|0),ft(a),0|zt(0|i[e>>2])&&(it(a),i[e>>2]=1+(0|i[e>>2])),i[n>>2]=i[t>>2],K(a,o,e=n+4|0),Q(e),i[n+16>>2]=i[t>>2],K(a,o+12|0,e=n+20|0),Q(e),i[n+32>>2]=i[t>>2],K(a,o+24|0,e=n+36|0),Q(e),i[n+48>>2]=i[t>>2],K(a,o+36|0,e=n+52|0),Q(e),i[n+64>>2]=i[t>>2],K(a,o+48|0,e=n+68|0),Q(e),i[n+80>>2]=i[t>>2],K(a,o+60|0,n=n+84|0),Q(n),C=r}function St(t){var e;return e=(t=+t)<0?t+6.283185307179586:t,+(t>=6.283185307179586?e+-6.283185307179586:e)}function Tt(t,e){return e|=0,+u(+(+o[(t|=0)>>3]-+o[e>>3]))<17453292519943298e-27?0|(e=+u(+(+o[t+8>>3]-+o[e+8>>3]))<17453292519943298e-27):0|(e=0)}function Pt(t,e){t|=0;var n,r,i,a=0;return r=+o[(e|=0)>>3],n=+o[t>>3],a=(i=+h(.5*(r-n)))*i+(a=+h(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+f(+r)*+f(+n)*a),2*+v(+ +c(+a),+ +c(+(1-a)))*6371.007180918475}function Mt(t,e,n){t|=0,n|=0;var r,i,a,s,u=0,l=0,d=0,g=0,m=0,A=0;return A=+o[(e|=0)>>3],a=+o[t>>3],m=+h(.5*(A-a)),d=+o[e+8>>3],i=+o[t+8>>3],g=+h(.5*(d-i)),r=+f(+a),s=+f(+A),g=2*+v(+ +c(+(g=m*m+g*(s*r*g))),+ +c(+(1-g))),m=+o[n>>3],A=+h(.5*(m-A)),u=+o[n+8>>3],d=+h(.5*(u-d)),l=+f(+m),d=2*+v(+ +c(+(d=A*A+d*(s*l*d))),+ +c(+(1-d))),m=+h(.5*(a-m)),u=+h(.5*(i-u)),u=2*+v(+ +c(+(u=m*m+u*(r*l*u))),+ +c(+(1-u))),4*+y(+ +c(+ +p(.5*(l=.5*(g+d+u)))*+p(.5*(l-g))*+p(.5*(l-d))*+p(.5*(l-u))))}function Ct(t,e){return e=0|Ee(0|(t|=0),0|(e|=0),45),x(),127&e|0}function It(t,e){var n=0,r=0,i=0,o=0,a=0,s=0;if(!(!0&134217728==(-16777216&(e|=0)|0)))return 0|(e=0);if(a=0|Ee(0|(t|=0),0|e,45),x(),(a&=127)>>>0>121)return 0|(e=0);n=0|Ee(0|t,0|e,52),x(),n&=15;do{if(0|n){for(i=1,r=0;;){if(o=0|Ee(0|t,0|e,3*(15-i|0)|0),x(),0!=(0|(o&=7))&(1^r)){if(1==(0|o)&0!=(0|N(a))){s=0,r=13;break}r=1}if(7==(0|o)){s=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(s=1)}if(13==(0|r))return 0|s}}while(0);for(;;){if(s=0|Ee(0|t,0|e,3*(14-n|0)|0),x(),!(7==(7&s|0)&!0)){s=0,r=13;break}if(!(n>>>0<14)){s=1,r=13;break}n=n+1|0}return 13==(0|r)?0|s:0}function Rt(t,e,n){n|=0;var r=0,i=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),x(),(0|(r&=15))>=(0|n)){if((0|r)!=(0|n))if(n>>>0<=15){if(t|=i=0|Oe(0|n,0,52),e=0|x()|-15728641&e,(0|r)>(0|n))do{i=0|Oe(7,0,3*(14-n|0)|0),n=n+1|0,t|=i,e=0|x()|e}while((0|n)<(0|r))}else e=0,t=0}else e=0,t=0;return w(0|e),0|t}function kt(t,e,n,r){n|=0,r|=0;var o,a=0,s=0,u=0,c=0,l=0,f=0;if(u=0|Ee(0|(t|=0),0|(e|=0),52),x(),(0|n)<16&(0|(u&=15))<=(0|n)){if((0|u)==(0|n))return i[(n=r)>>2]=t,void(i[n+4>>2]=e);if(o=(0|(l=0|ee(7,n-u|0)))/7|0,c=0|Ee(0|t,0|e,45),x(),0|N(127&c)){t:do{if(u)for(s=1;;){if(a=0|Ee(0|t,0|e,3*(15-s|0)|0),x(),0|(a&=7))break t;if(!(s>>>0<u>>>0)){a=0;break}s=s+1|0}else a=0}while(0);s=0==(0|a)}else s=0;if(f=0|Oe(u+1|0,0,52),a=0|x()|-15728641&e,kt(e=(f|t)&~(e=0|Oe(7,0,0|(c=3*(14-u|0)|0))),u=a&~(0|x()),n,r),a=r+(o<<3)|0,!s)return kt((f=0|Oe(1,0,0|c))|e,0|x()|u,n,a),f=a+(o<<3)|0,kt((l=0|Oe(2,0,0|c))|e,0|x()|u,n,f),f=f+(o<<3)|0,kt((l=0|Oe(3,0,0|c))|e,0|x()|u,n,f),f=f+(o<<3)|0,kt((l=0|Oe(4,0,0|c))|e,0|x()|u,n,f),f=f+(o<<3)|0,kt((l=0|Oe(5,0,0|c))|e,0|x()|u,n,f),void kt((l=0|Oe(6,0,0|c))|e,0|x()|u,n,f+(o<<3)|0);s=a+(o<<3)|0,(0|l)>6&&(Me(0|a,0,(f=(s>>>0>(l=a+8|0)>>>0?s:l)+-1+(0-a)|0)+8&-8|0),a=l+(f>>>3<<3)|0),kt((f=0|Oe(2,0,0|c))|e,0|x()|u,n,a),f=a+(o<<3)|0,kt((l=0|Oe(3,0,0|c))|e,0|x()|u,n,f),f=f+(o<<3)|0,kt((l=0|Oe(4,0,0|c))|e,0|x()|u,n,f),f=f+(o<<3)|0,kt((l=0|Oe(5,0,0|c))|e,0|x()|u,n,f),kt((l=0|Oe(6,0,0|c))|e,0|x()|u,n,f+(o<<3)|0)}}function jt(t,e){var n=0,r=0,i=0;if(i=0|Ee(0|(t|=0),0|(e|=0),45),x(),!(0|N(127&i)))return 0|(i=0);i=0|Ee(0|t,0|e,52),x(),i&=15;t:do{if(i)for(r=1;;){if(n=0|Ee(0|t,0|e,3*(15-r|0)|0),x(),0|(n&=7))break t;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)}function Lt(t,e){var n=0,r=0,i=0;if(i=0|Ee(0|(t|=0),0|(e|=0),52),x(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|Ee(0|t,0|e,3*(15-r|0)|0),x(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function Nt(t,e){var n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(u=0|Ee(0|(t|=0),0|(e|=0),52),x(),!(u&=15))return u=t,w(0|(s=e)),0|u;for(s=1,n=0;;){r=0|Oe(7,0,0|(o=3*(15-s|0)|0)),i=0|x(),a=0|Ee(0|t,0|e,0|o),x(),t=(o=0|Oe(0|ut(7&a),0,0|o))|t&~r,e=(a=0|x())|e&~i;t:do{if(!n)if(0==(o&r|0)&0==(a&i|0))n=0;else if(r=0|Ee(0|t,0|e,52),x(),r&=15){n=1;e:for(;;){switch(a=0|Ee(0|t,0|e,3*(15-n|0)|0),x(),7&a){case 1:break e;case 0:break;default:n=1;break t}if(!(n>>>0<r>>>0)){n=1;break t}n=n+1|0}for(n=1;;){if(i=0|Ee(0|t,0|e,0|(a=3*(15-n|0)|0)),x(),o=0|Oe(7,0,0|a),e&=~(0|x()),t=t&~o|(a=0|Oe(0|ut(7&i),0,0|a)),e=0|e|x(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return w(0|e),0|t}function Dt(t,e){var n=0,r=0,i=0,o=0,a=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),x(),!(r&=15))return r=t,w(0|(n=e)),0|r;for(n=1;a=0|Ee(0|t,0|e,0|(o=3*(15-n|0)|0)),x(),i=0|Oe(7,0,0|o),e&=~(0|x()),t=(o=0|Oe(0|ut(7&a),0,0|o))|t&~i,e=0|x()|e,n>>>0<r>>>0;)n=n+1|0;return w(0|e),0|t}function Ft(t,e){var n=0,r=0,i=0,o=0,a=0,s=0,u=0;if(u=0|Ee(0|(t|=0),0|(e|=0),52),x(),!(u&=15))return u=t,w(0|(s=e)),0|u;for(s=1,n=0;;){r=0|Oe(7,0,0|(o=3*(15-s|0)|0)),i=0|x(),a=0|Ee(0|t,0|e,0|o),x(),t=(o=0|Oe(0|ct(7&a),0,0|o))|t&~r,e=(a=0|x())|e&~i;t:do{if(!n)if(0==(o&r|0)&0==(a&i|0))n=0;else if(r=0|Ee(0|t,0|e,52),x(),r&=15){n=1;e:for(;;){switch(a=0|Ee(0|t,0|e,3*(15-n|0)|0),x(),7&a){case 1:break e;case 0:break;default:n=1;break t}if(!(n>>>0<r>>>0)){n=1;break t}n=n+1|0}for(n=1;;){if(o=0|Oe(7,0,0|(i=3*(15-n|0)|0)),a=e&~(0|x()),e=0|Ee(0|t,0|e,0|i),x(),t=t&~o|(e=0|Oe(0|ct(7&e),0,0|i)),e=0|a|x(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return w(0|e),0|t}function Bt(t,e){var n=0,r=0,i=0,o=0,a=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),x(),!(r&=15))return r=t,w(0|(n=e)),0|r;for(n=1;o=0|Oe(7,0,0|(a=3*(15-n|0)|0)),i=e&~(0|x()),e=0|Ee(0|t,0|e,0|a),x(),t=(e=0|Oe(0|ct(7&e),0,0|a))|t&~o,e=0|x()|i,n>>>0<r>>>0;)n=n+1|0;return w(0|e),0|t}function zt(t){return 0|(0|(t|=0))%2}function Ut(t,e){t|=0;var n,r;return r=C,C=C+16|0,n=r,(e|=0)>>>0<=15&&2146435072!=(2146435072&i[t+4>>2]|0)&&2146435072!=(2146435072&i[t+8+4>>2]|0)?(!function(t,e,n){var r,i;r=C,C=C+16|0,vt(t|=0,e|=0,n|=0,i=r),Y(i,n+4|0),C=r}(t,e,n),e=0|function(t,e){t|=0;var n,r=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0;if(n=C,C=C+64|0,c=n+40|0,o=n+24|0,a=n+12|0,s=n,Oe(0|(e|=0),0,52),r=134225919|x(),!e)return(0|i[t+4>>2])>2||(0|i[t+8>>2])>2||(0|i[t+12>>2])>2?(c=0,w(0|(u=0)),C=n,0|c):(Oe(0|F(t),0,45),u=0|x()|r,c=-1,w(0|u),C=n,0|c);if(i[c>>2]=i[t>>2],i[c+4>>2]=i[t+4>>2],i[c+8>>2]=i[t+8>>2],i[c+12>>2]=i[t+12>>2],u=c+4|0,(0|e)>0)for(t=-1;i[o>>2]=i[u>>2],i[o+4>>2]=i[u+4>>2],i[o+8>>2]=i[u+8>>2],1&e?(et(u),i[a>>2]=i[u>>2],i[a+4>>2]=i[u+4>>2],i[a+8>>2]=i[u+8>>2],rt(a)):(nt(u),i[a>>2]=i[u>>2],i[a+4>>2]=i[u+4>>2],i[a+8>>2]=i[u+8>>2],it(a)),J(o,a,s),Q(s),l=0|Oe(7,0,0|(f=3*(15-e|0)|0)),r&=~(0|x()),t=(f=0|Oe(0|tt(s),0,0|f))|t&~l,r=0|x()|r,(0|e)>1;)e=e+-1|0;else t=-1;t:do{if((0|i[u>>2])<=2&&(0|i[c+8>>2])<=2&&(0|i[c+12>>2])<=2){if(e=0|Oe(0|(o=0|F(c)),0,45),e|=t,t=0|x()|-1040385&r,s=0|B(c),!(0|N(o))){if((0|s)<=0)break;for(a=0;;){if(o=0|Ee(0|e,0|t,52),x(),o&=15)for(r=1;c=0|Ee(0|e,0|t,0|(f=3*(15-r|0)|0)),x(),l=0|Oe(7,0,0|f),t&=~(0|x()),e=e&~l|(f=0|Oe(0|ut(7&c),0,0|f)),t=0|t|x(),r>>>0<o>>>0;)r=r+1|0;if((0|(a=a+1|0))==(0|s))break t}}a=0|Ee(0|e,0|t,52),x(),a&=15;e:do{if(a){r=1;n:for(;;){switch(f=0|Ee(0|e,0|t,3*(15-r|0)|0),x(),7&f){case 1:break n;case 0:break;default:break e}if(!(r>>>0<a>>>0))break e;r=r+1|0}if(0|z(o,0|i[c>>2]))for(r=1;l=0|Oe(7,0,0|(c=3*(15-r|0)|0)),f=t&~(0|x()),t=0|Ee(0|e,0|t,0|c),x(),e=e&~l|(t=0|Oe(0|ct(7&t),0,0|c)),t=0|f|x(),r>>>0<a>>>0;)r=r+1|0;else for(r=1;c=0|Ee(0|e,0|t,0|(f=3*(15-r|0)|0)),x(),l=0|Oe(7,0,0|f),t&=~(0|x()),e=e&~l|(f=0|Oe(0|ut(7&c),0,0|f)),t=0|t|x(),r>>>0<a>>>0;)r=r+1|0}}while(0);if((0|s)>0){r=0;do{e=0|Nt(e,t),t=0|x(),r=r+1|0}while((0|r)!=(0|s))}}else e=0,t=0}while(0);return f=e,w(0|(l=t)),C=n,0|f}(n,e),t=0|x()):(t=0,e=0),w(0|t),C=r,0|e}function Gt(t,e,n){var r,o=0,a=0,s=0;if(r=(n|=0)+4|0,a=0|Ee(0|(t|=0),0|(e|=0),52),x(),a&=15,s=0|Ee(0|t,0|e,45),x(),o=0==(0|a),0|N(127&s)){if(o)return 0|(s=1);o=1}else{if(o)return 0|(s=0);o=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?rt(r):it(r),s=0|Ee(0|t,0|e,3*(15-n|0)|0),x(),ot(r,7&s),n>>>0<a>>>0;)n=n+1|0;return 0|o}function Vt(t,e,n){n|=0;var r,o,a=0,s=0,u=0,c=0,l=0,f=0;o=C,C=C+16|0,r=o,f=0|Ee(0|(t|=0),0|(e|=0),45),x(),f&=127;t:do{if(0!=(0|N(f))&&(u=0|Ee(0|t,0|e,52),x(),0!=(0|(u&=15)))){a=1;e:for(;;){switch(l=0|Ee(0|t,0|e,3*(15-a|0)|0),x(),7&l){case 5:break e;case 0:break;default:a=e;break t}if(!(a>>>0<u>>>0)){a=e;break t}a=a+1|0}for(s=1,a=e;c=0|Oe(7,0,0|(e=3*(15-s|0)|0)),l=a&~(0|x()),a=0|Ee(0|t,0|a,0|e),x(),t=t&~c|(a=0|Oe(0|ct(7&a),0,0|e)),a=0|l|x(),s>>>0<u>>>0;)s=s+1|0}else a=e}while(0);if(l=7728+(28*f|0)|0,i[n>>2]=i[l>>2],i[n+4>>2]=i[l+4>>2],i[n+8>>2]=i[l+8>>2],i[n+12>>2]=i[l+12>>2],0|Gt(t,a,n)){if(c=n+4|0,i[r>>2]=i[c>>2],i[r+4>>2]=i[c+4>>2],i[r+8>>2]=i[c+8>>2],u=0|Ee(0|t,0|a,52),x(),l=15&u,1&u?(it(c),u=l+1|0):u=l,0|N(f)){t:do{if(l)for(e=1;;){if(s=0|Ee(0|t,0|a,3*(15-e|0)|0),x(),0|(s&=7)){a=s;break t}if(!(e>>>0<l>>>0)){a=0;break}e=e+1|0}else a=0}while(0);a=4==(0|a)&1}else a=0;if(0|wt(n,u,a,0)){if(0|N(f))do{}while(0!=(0|wt(n,u,0,0)));(0|u)!=(0|l)&&nt(c)}else(0|u)!=(0|l)&&(i[c>>2]=i[r>>2],i[c+4>>2]=i[r+4>>2],i[c+8>>2]=i[r+8>>2]);C=o}else C=o}function qt(t,e,n){n|=0;var r,i;r=C,C=C+16|0,Vt(t|=0,e|=0,i=r),e=0|Ee(0|t,0|e,52),x(),At(i,15&e,n),C=r}function Ht(t,e,n){n|=0;var r,i,o=0,a=0;i=C,C=C+16|0,Vt(t|=0,e|=0,r=i),o=0|Ee(0|t,0|e,45),x(),o=0==(0|N(127&o)),a=0|Ee(0|t,0|e,52),x(),a&=15;t:do{if(!o){if(0|a)for(o=1;;){if(!(0==((0|Oe(7,0,3*(15-o|0)|0))&t|0)&0==((0|x())&e|0)))break t;if(!(o>>>0<a>>>0))break;o=o+1|0}return bt(r,a,0,5,n),void(C=i)}}while(0);Et(r,a,0,6,n),C=i}function Wt(t,e){e|=0;var n,r=0,o=0,a=0,s=0,u=0,c=0;if(Oe(0|(t|=0),0,52),n=134225919|x(),(0|t)<1){o=0,r=0;do{0|N(o)&&(Oe(0|o,0,45),u=0|n|x(),i[(t=e+(r<<3)|0)>>2]=-1,i[t+4>>2]=u,r=r+1|0),o=o+1|0}while(122!=(0|o))}else{u=0,r=0;do{if(0|N(u)){for(Oe(0|u,0,45),o=1,a=-1,s=0|n|x();a&=~(c=0|Oe(7,0,3*(15-o|0)|0)),s&=~(0|x()),(0|o)!=(0|t);)o=o+1|0;i[(c=e+(r<<3)|0)>>2]=a,i[c+4>>2]=s,r=r+1|0}u=u+1|0}while(122!=(0|u))}}function Xt(t,e,n,r){var o,a=0,s=0,u=0,c=0,l=0;if(o=C,C=C+64|0,u=o,(0|(t|=0))==(0|(n|=0))&(0|(e|=0))==(0|(r|=0))|!1|134217728!=(2013265920&e|0)|!1|134217728!=(2013265920&r|0))return C=o,0|(u=0);if(a=0|Ee(0|t,0|e,52),x(),a&=15,s=0|Ee(0|n,0|r,52),x(),(0|a)!=(15&s|0))return C=o,0|(u=0);if(s=a+-1|0,a>>>0>1&&(l=0|Rt(t,e,s),c=0|x(),(0|l)==(0|(s=0|Rt(n,r,s)))&(0|c)==(0|x()))){if(a=0|Ee(0|t,0|e,0|(s=3*(15^a)|0)),x(),a&=7,s=0|Ee(0|n,0|r,0|s),x(),0==(0|a)|0==(0|(s&=7)))return C=o,0|(l=1);if((0|i[21136+(a<<2)>>2])==(0|s))return C=o,0|(l=1);if((0|i[21168+(a<<2)>>2])==(0|s))return C=o,0|(l=1)}s=(a=u)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|s));return I(t,e,1,u),a=(0|i[(l=u)>>2])==(0|n)&&(0|i[l+4>>2])==(0|r)||(0|i[(l=u+8|0)>>2])==(0|n)&&(0|i[l+4>>2])==(0|r)||(0|i[(l=u+16|0)>>2])==(0|n)&&(0|i[l+4>>2])==(0|r)||(0|i[(l=u+24|0)>>2])==(0|n)&&(0|i[l+4>>2])==(0|r)||(0|i[(l=u+32|0)>>2])==(0|n)&&(0|i[l+4>>2])==(0|r)||(0|i[(l=u+40|0)>>2])==(0|n)&&(0|i[l+4>>2])==(0|r)?1:1&((0|i[(a=u+48|0)>>2])==(0|n)?(0|i[a+4>>2])==(0|r):0),C=o,0|(l=a)}function Yt(t,e,n){n|=0;var r,o,a,s,u=0;if(a=C,C=C+16|0,o=a,u=0|Ee(0|(t|=0),0|(e|=0),56),x(),-1==(0|(e=0|function(t,e,n){n|=0;var r=0,o=0;if(r=0|jt(t=t|0,e=e|0),(n+-1|0)>>>0>5)return 0|(n=-1);if(1==(0|n)&(o=0!=(0|r)))return 0|(n=-1);return r=0|function(t,e){var n=0,r=0,o=0,a=0,s=0,u=0,c=0,l=0;if(l=C,C=C+32|0,a=l,Vt(t=t|0,e=e|0,o=l+16|0),s=0|Ct(t,e),c=0|Lt(t,e),function(t,e){t=7728+(28*(t|=0)|0)|0,i[(e|=0)>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2]}(s,a),e=0|function(t,e){t|=0;var n=0,r=0;if((e|=0)>>>0>20)return-1;do{if((0|i[11152+(216*e|0)>>2])!=(0|t))if((0|i[11152+(216*e|0)+8>>2])!=(0|t))if((0|i[11152+(216*e|0)+16>>2])!=(0|t))if((0|i[11152+(216*e|0)+24>>2])!=(0|t))if((0|i[11152+(216*e|0)+32>>2])!=(0|t))if((0|i[11152+(216*e|0)+40>>2])!=(0|t))if((0|i[11152+(216*e|0)+48>>2])!=(0|t))if((0|i[11152+(216*e|0)+56>>2])!=(0|t))if((0|i[11152+(216*e|0)+64>>2])!=(0|t))if((0|i[11152+(216*e|0)+72>>2])!=(0|t))if((0|i[11152+(216*e|0)+80>>2])!=(0|t))if((0|i[11152+(216*e|0)+88>>2])!=(0|t))if((0|i[11152+(216*e|0)+96>>2])!=(0|t))if((0|i[11152+(216*e|0)+104>>2])!=(0|t))if((0|i[11152+(216*e|0)+112>>2])!=(0|t))if((0|i[11152+(216*e|0)+120>>2])!=(0|t))if((0|i[11152+(216*e|0)+128>>2])!=(0|t)){if((0|i[11152+(216*e|0)+136>>2])!=(0|t)){if((0|i[11152+(216*e|0)+144>>2])==(0|t)){t=0,n=2,r=0;break}if((0|i[11152+(216*e|0)+152>>2])==(0|t)){t=0,n=2,r=1;break}if((0|i[11152+(216*e|0)+160>>2])==(0|t)){t=0,n=2,r=2;break}if((0|i[11152+(216*e|0)+168>>2])==(0|t)){t=1,n=2,r=0;break}if((0|i[11152+(216*e|0)+176>>2])==(0|t)){t=1,n=2,r=1;break}if((0|i[11152+(216*e|0)+184>>2])==(0|t)){t=1,n=2,r=2;break}if((0|i[11152+(216*e|0)+192>>2])==(0|t)){t=2,n=2,r=0;break}if((0|i[11152+(216*e|0)+200>>2])==(0|t)){t=2,n=2,r=1;break}if((0|i[11152+(216*e|0)+208>>2])==(0|t)){t=2,n=2,r=2;break}return-1}t=2,n=1,r=2}else t=2,n=1,r=1;else t=2,n=1,r=0;else t=1,n=1,r=2;else t=1,n=1,r=1;else t=1,n=1,r=0;else t=0,n=1,r=2;else t=0,n=1,r=1;else t=0,n=1,r=0;else t=2,n=0,r=2;else t=2,n=0,r=1;else t=2,n=0,r=0;else t=1,n=0,r=2;else t=1,n=0,r=1;else t=1,n=0,r=0;else t=0,n=0,r=2;else t=0,n=0,r=1;else t=0,n=0,r=0}while(0);return 0|i[11152+(216*e|0)+(72*n|0)+(24*t|0)+(r<<3)+4>>2]}(s,0|i[o>>2]),!(0|N(s)))return C=l,0|(c=e);switch(0|s){case 4:t=0,n=14;break;case 14:t=1,n=14;break;case 24:t=2,n=14;break;case 38:t=3,n=14;break;case 49:t=4,n=14;break;case 58:t=5,n=14;break;case 63:t=6,n=14;break;case 72:t=7,n=14;break;case 83:t=8,n=14;break;case 97:t=9,n=14;break;case 107:t=10,n=14;break;case 117:t=11,n=14;break;default:u=0,r=0}14==(0|n)&&(u=0|i[22096+(24*t|0)+8>>2],r=0|i[22096+(24*t|0)+16>>2]);(0|(t=0|i[o>>2]))!=(0|i[a>>2])&&(s=0|D(s))|(0|(t=0|i[o>>2]))==(0|r)&&(e=(e+1|0)%6|0);if(3==(0|c)&(0|t)==(0|r))return C=l,0|(c=(e+5|0)%6|0);if(!(5==(0|c)&(0|t)==(0|u)))return C=l,0|(c=e);return C=l,0|(c=(e+1|0)%6|0)}(t,e),o?0|(n=(5-r+(0|i[22384+(n<<2)>>2])|0)%5|0):0|(n=(6-r+(0|i[22416+(n<<2)>>2])|0)%6|0)}(r=(s=!0&268435456==(2013265920&e|0))?t:0,t=s?-2130706433&e|134217728:0,7&u))))return i[n>>2]=0,void(C=a);Vt(r,t,o),u=0|Ee(0|r,0|t,52),x(),u&=15,0|jt(r,t)?bt(o,u,e,2,n):Et(o,u,e,2,n),C=a}function Qt(t){t|=0;var e,n,r=0;return(e=0|Ae(1,12))||E(22691,22646,49,22704),0|(r=0|i[(n=t+4|0)>>2])?(i[(r=r+8|0)>>2]=e,i[n>>2]=e,0|e):(0|i[t>>2]&&E(22721,22646,61,22744),i[(r=t)>>2]=e,i[n>>2]=e,0|e)}function Zt(t,e){t|=0,e|=0;var n,r;return(r=0|ve(24))||E(22758,22646,78,22772),i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],i[r+12>>2]=i[e+12>>2],i[r+16>>2]=0,0|(n=0|i[(e=t+4|0)>>2])?(i[n+16>>2]=r,i[e>>2]=r,0|r):(0|i[t>>2]&&E(22787,22646,82,22772),i[t>>2]=r,i[e>>2]=r,0|r)}function Kt(t){var e,n,r=0,a=0,s=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0,w=0,x=0,O=0,S=0,T=0,P=0,M=0,C=0,I=0,R=0,k=0,j=0,L=0,N=0;if(0|i[(c=(t|=0)+8|0)>>2])return 0|(N=1);if(!(s=0|i[t>>2]))return 0|(N=0);r=s,a=0;do{a=a+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(a>>>0<2)return 0|(N=0);(n=0|ve(a<<2))||E(22807,22646,317,22826),(e=0|ve(a<<5))||E(22848,22646,321,22826),i[t>>2]=0,i[(P=t+4|0)>>2]=0,i[c>>2]=0,a=0,j=0,T=0,y=0;t:for(;;){if(g=0|i[s>>2]){l=0,f=g;do{if(p=+o[f+8>>3],r=f,f=0|i[f+16>>2],h=+o[(c=(d=0==(0|f))?g:f)+8>>3],+u(+(p-h))>3.141592653589793){N=14;break}l+=(h-p)*(+o[r>>3]+ +o[c>>3])}while(!d);if(14==(0|N)){N=0,l=0,r=g;do{S=+o[r+8>>3],R=0|i[(k=r+16|0)>>2],O=+o[(R=0==(0|R)?g:R)+8>>3],l+=(+o[r>>3]+ +o[R>>3])*((O<0?O+6.283185307179586:O)-(S<0?S+6.283185307179586:S)),r=0|i[(0==(0|r)?s:k)>>2]}while(0!=(0|r))}l>0?(i[n+(j<<2)>>2]=s,j=j+1|0,c=T,r=y):N=19}else N=19;if(19==(0|N)){N=0;do{if(!a){if(y){c=P,f=y+8|0,r=s,a=t;break}if(0|i[t>>2]){N=27;break t}c=P,f=t,r=s,a=t;break}if(0|i[(r=a+8|0)>>2]){N=21;break t}if(!(a=0|Ae(1,12))){N=23;break t}i[r>>2]=a,c=a+4|0,f=a,r=y}while(0);if(i[f>>2]=s,i[c>>2]=s,f=e+(T<<5)|0,d=0|i[s>>2]){for(o[(g=e+(T<<5)+8|0)>>3]=17976931348623157e292,o[(y=e+(T<<5)+24|0)>>3]=17976931348623157e292,o[f>>3]=-17976931348623157e292,o[(v=e+(T<<5)+16|0)>>3]=-17976931348623157e292,w=17976931348623157e292,x=-17976931348623157e292,c=0,m=d,p=17976931348623157e292,b=17976931348623157e292,_=-17976931348623157e292,h=-17976931348623157e292;l=+o[m>>3],S=+o[m+8>>3],m=0|i[m+16>>2],O=+o[((A=0==(0|m))?d:m)+8>>3],l<p&&(o[g>>3]=l,p=l),S<b&&(o[y>>3]=S,b=S),l>_?o[f>>3]=l:l=_,S>h&&(o[v>>3]=S,h=S),w=S>0&S<w?S:w,x=S<0&S>x?S:x,c|=+u(+(S-O))>3.141592653589793,!A;)_=l;c&&(o[v>>3]=x,o[y>>3]=w)}else i[f>>2]=0,i[f+4>>2]=0,i[f+8>>2]=0,i[f+12>>2]=0,i[f+16>>2]=0,i[f+20>>2]=0,i[f+24>>2]=0,i[f+28>>2]=0;c=T+1|0}if(s=0|i[(k=s+8|0)>>2],i[k>>2]=0,!s){N=45;break}T=c,y=r}if(21==(0|N))E(22624,22646,35,22658);else if(23==(0|N))E(22678,22646,37,22658);else if(27==(0|N))E(22721,22646,61,22744);else if(45==(0|N)){t:do{if((0|j)>0){for(k=0==(0|c),I=c<<2,R=0==(0|t),C=0,r=0;;){if(M=0|i[n+(C<<2)>>2],k)N=73;else{if(!(T=0|ve(I))){N=50;break}if(!(P=0|ve(I))){N=52;break}e:do{if(R)a=0;else{for(c=0,a=0,f=t;s=e+(c<<5)|0,0|Jt(0|i[f>>2],s,0|i[M>>2])?(i[T+(a<<2)>>2]=f,i[P+(a<<2)>>2]=s,A=a+1|0):A=a,f=0|i[f+8>>2];)c=c+1|0,a=A;if((0|A)>0)if(s=0|i[T>>2],1==(0|A))a=s;else for(v=0,m=-1,a=s,y=s;;){for(d=0|i[y>>2],s=0,f=0;g=(0|(c=0|i[i[T+(f<<2)>>2]>>2]))==(0|d)?s:s+(1&(0|Jt(c,0|i[P+(f<<2)>>2],0|i[d>>2])))|0,(0|(f=f+1|0))!=(0|A);)s=g;if(a=(c=(0|g)>(0|m))?y:a,(0|(s=v+1|0))==(0|A))break e;v=s,m=c?g:m,y=0|i[T+(s<<2)>>2]}else a=0}}while(0);if(me(T),me(P),a){if(s=0|i[(c=a+4|0)>>2])a=s+8|0;else if(0|i[a>>2]){N=70;break}i[a>>2]=M,i[c>>2]=M}else N=73}if(73==(0|N)){if(N=0,0|(r=0|i[M>>2]))do{P=r,r=0|i[r+16>>2],me(P)}while(0!=(0|r));me(M),r=2}if((0|(C=C+1|0))>=(0|j)){L=r;break t}}50==(0|N)?E(22863,22646,249,22882):52==(0|N)?E(22901,22646,252,22882):70==(0|N)&&E(22721,22646,61,22744)}else L=0}while(0);return me(n),me(e),0|(N=L)}return 0}function Jt(t,e,n){t|=0;var r,a=0,s=0,u=0,c=0,l=0,f=0,h=0;if(!(0|q(e|=0,n|=0)))return 0|(t=0);if(e=0|V(e),r=+o[n>>3],a=e&(a=+o[n+8>>3])<0?a+6.283185307179586:a,!(t=0|i[t>>2]))return 0|(t=0);if(e){e=0,n=t;t:for(;;){for(;c=+o[n>>3],f=+o[n+8>>3],h=0|i[(n=n+16|0)>>2],u=+o[(h=0==(0|h)?t:h)>>3],s=+o[h+8>>3],c>u?(l=c,c=f):(l=u,u=c,c=s,s=f),r<u|r>l;)if(!(n=0|i[n>>2])){n=22;break t}if(a=(c=c<0?c+6.283185307179586:c)==a|(f=s<0?s+6.283185307179586:s)==a?a+-2220446049250313e-31:a,((f+=(r-u)/(l-u)*(c-f))<0?f+6.283185307179586:f)>a&&(e^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|e}else{e=0,n=t;t:for(;;){for(;c=+o[n>>3],f=+o[n+8>>3],h=0|i[(n=n+16|0)>>2],u=+o[(h=0==(0|h)?t:h)>>3],s=+o[h+8>>3],c>u?(l=c,c=f):(l=u,u=c,c=s,s=f),r<u|r>l;)if(!(n=0|i[n>>2])){n=22;break t}if(s+(r-u)/(l-u)*(c-s)>(a=c==a|s==a?a+-2220446049250313e-31:a)&&(e^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|e}return 0}function $t(t,e,n,o,a){n|=0,o|=0,a|=0;var s,u,c,l,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0;if(l=C,C=C+32|0,b=l+16|0,c=l,f=0|Ee(0|(t|=0),0|(e|=0),52),x(),f&=15,v=0|Ee(0|n,0|o,52),x(),(0|f)!=(15&v|0))return C=l,0|(b=1);if(g=0|Ee(0|t,0|e,45),x(),g&=127,y=0|Ee(0|n,0|o,45),x(),v=(0|g)!=(0|(y&=127))){if(7==(0|(p=0|G(g,y))))return C=l,0|(b=2);7==(0|(d=0|G(y,g)))?E(22925,22949,151,22959):(m=p,h=d)}else m=0,h=0;s=0|N(g),u=0|N(y),i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0;do{if(m){if(p=(0|(y=0|i[4304+(28*g|0)+(m<<2)>>2]))>0,u)if(p){g=0,d=n,p=o;do{d=0|Ft(d,p),p=0|x(),1==(0|(h=0|ct(h)))&&(h=0|ct(1)),g=g+1|0}while((0|g)!=(0|y));y=h,g=d,d=p}else y=h,g=n,d=o;else if(p){g=0,d=n,p=o;do{d=0|Bt(d,p),p=0|x(),h=0|ct(h),g=g+1|0}while((0|g)!=(0|y));y=h,g=d,d=p}else y=h,g=n,d=o;if(Gt(g,d,b),v||E(22972,22949,181,22959),(p=0!=(0|s))&(h=0!=(0|u))&&E(22999,22949,182,22959),p){if(h=0|Lt(t,e),0|r[22032+(7*h|0)+m>>0]){f=3;break}g=d=0|i[21200+(28*h|0)+(m<<2)>>2],A=26}else if(h){if(h=0|Lt(g,d),0|r[22032+(7*h|0)+y>>0]){f=4;break}g=0,d=0|i[21200+(28*y|0)+(h<<2)>>2],A=26}else h=0;if(26==(0|A))if((0|d)<=-1&&E(23030,22949,212,22959),(0|g)<=-1&&E(23053,22949,213,22959),(0|d)>0){p=b+4|0,h=0;do{st(p),h=h+1|0}while((0|h)!=(0|d));h=g}else h=g;if(i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,ot(c,m),0|f)for(;0|zt(f)?rt(c):it(c),(0|f)>1;)f=f+-1|0;if((0|h)>0){f=0;do{st(c),f=f+1|0}while((0|f)!=(0|h))}K(A=b+4|0,c,A),Q(A),A=50}else if(Gt(n,o,b),0!=(0|s)&0!=(0|u))if((0|y)!=(0|g)&&E(23077,22949,243,22959),h=0|Lt(t,e),f=0|Lt(n,o),0|r[22032+(7*h|0)+f>>0])f=5;else if((0|(h=0|i[21200+(28*h|0)+(f<<2)>>2]))>0){p=b+4|0,f=0;do{st(p),f=f+1|0}while((0|f)!=(0|h));A=50}else A=50;else A=50}while(0);return 50==(0|A)&&(f=b+4|0,i[a>>2]=i[f>>2],i[a+4>>2]=i[f+4>>2],i[a+8>>2]=i[f+8>>2],f=0),C=l,0|(b=f)}function te(t,e,n,r){n|=0,r|=0;var o,a,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0;if(a=C,C=C+48|0,c=a+36|0,l=a+24|0,f=a+12|0,h=a,u=0|Ee(0|(t|=0),0|(e|=0),52),x(),u&=15,d=0|Ee(0|t,0|e,45),x(),o=0|N(d&=127),Oe(0|u,0,52),v=134225919|x(),i[(y=r)>>2]=-1,i[y+4>>2]=v,!u)return(0|i[n>>2])>1||(0|i[n+4>>2])>1||(0|i[n+8>>2])>1||127==(0|(s=0|U(d,0|tt(n))))?(C=a,0|(v=1)):(g=0|Oe(0|s,0,45),y=0|x(),y=-1040385&i[(d=r)+4>>2]|y,i[(v=r)>>2]=i[d>>2]|g,i[v+4>>2]=y,C=a,0|(v=0));for(i[c>>2]=i[n>>2],i[c+4>>2]=i[n+4>>2],i[c+8>>2]=i[n+8>>2];i[l>>2]=i[c>>2],i[l+4>>2]=i[c+4>>2],i[l+8>>2]=i[c+8>>2],0|zt(u)?(et(c),i[f>>2]=i[c>>2],i[f+4>>2]=i[c+4>>2],i[f+8>>2]=i[c+8>>2],rt(f)):(nt(c),i[f>>2]=i[c>>2],i[f+4>>2]=i[c+4>>2],i[f+8>>2]=i[c+8>>2],it(f)),J(l,f,h),Q(h),m=0|i[(y=r)>>2],y=0|i[y+4>>2],n=0|Oe(7,0,0|(A=3*(15-u|0)|0)),y&=~(0|x()),A=0|Oe(0|tt(h),0,0|A),y=0|x()|y,i[(v=r)>>2]=A|m&~n,i[v+4>>2]=y,(0|u)>1;)u=u+-1|0;t:do{if((0|i[c>>2])<=1&&(0|i[c+4>>2])<=1&&(0|i[c+8>>2])<=1){h=127==(0|(l=0|U(d,u=0|tt(c))))?0:0|N(l);e:do{if(u){if(o){if(c=21408+(28*(0|Lt(t,e))|0)+(u<<2)|0,(0|(c=0|i[c>>2]))>0){n=0;do{u=0|ut(u),n=n+1|0}while((0|n)!=(0|c))}if(1==(0|u)){s=3;break t}127==(0|(n=0|U(d,u)))&&E(23104,22949,376,23134),0|N(n)?E(23147,22949,377,23134):(g=c,p=u,s=n)}else g=0,p=u,s=l;if((0|(f=0|i[4304+(28*d|0)+(p<<2)>>2]))<=-1&&E(23178,22949,384,23134),!h){if((0|g)<=-1&&E(23030,22949,417,23134),0|g){u=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];do{n=0|Dt(n,c),c=0|x(),i[(A=r)>>2]=n,i[A+4>>2]=c,u=u+1|0}while((0|u)<(0|g))}if((0|f)<=0){u=54;break}for(u=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];;)if(n=0|Dt(n,c),c=0|x(),i[(A=r)>>2]=n,i[A+4>>2]=c,(0|(u=u+1|0))==(0|f)){u=54;break e}}if(7==(0|(l=0|G(s,d)))&&E(22925,22949,393,23134),n=0|i[(u=r)>>2],u=0|i[u+4>>2],(0|f)>0){c=0;do{n=0|Dt(n,u),u=0|x(),i[(A=r)>>2]=n,i[A+4>>2]=u,c=c+1|0}while((0|c)!=(0|f))}if(n=0|Lt(n,u),A=0|D(s),(0|(n=0|i[(A?21824:21616)+(28*l|0)+(n<<2)>>2]))<=-1&&E(23030,22949,412,23134),n){u=0,c=0|i[(l=r)>>2],l=0|i[l+4>>2];do{c=0|Nt(c,l),l=0|x(),i[(A=r)>>2]=c,i[A+4>>2]=l,u=u+1|0}while((0|u)<(0|n));u=54}else u=54}else if(0!=(0|o)&0!=(0|h))if(u=21408+(28*(A=0|Lt(t,e))|0)+((0|Lt(0|i[(u=r)>>2],0|i[u+4>>2]))<<2)|0,(0|(u=0|i[u>>2]))<=-1&&E(23201,22949,433,23134),u){s=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];do{n=0|Dt(n,c),c=0|x(),i[(A=r)>>2]=n,i[A+4>>2]=c,s=s+1|0}while((0|s)<(0|u));s=l,u=54}else s=l,u=55;else s=l,u=54}while(0);if(54==(0|u)&&h&&(u=55),55==(0|u)&&1==(0|Lt(0|i[(A=r)>>2],0|i[A+4>>2]))){s=4;break}v=0|i[(A=r)>>2],A=-1040385&i[A+4>>2],m=0|Oe(0|s,0,45),A=0|A|x(),i[(s=r)>>2]=v|m,i[s+4>>2]=A,s=0}else s=2}while(0);return C=a,0|(A=s)}function ee(t,e){var n=0;if(!(e|=0))return 0|(n=1);n=t|=0,t=1;do{t=0|A(0==(1&e|0)?1:n,t),e>>=1,n=0|A(n,n)}while(0!=(0|e));return 0|t}function ne(t,e,n){t|=0;var r,a,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0;if(!(0|q(e|=0,n|=0)))return 0|(d=0);if(e=0|V(e),a=+o[n>>3],s=e&(s=+o[n+8>>3])<0?s+6.283185307179586:s,(0|(d=0|i[t>>2]))<=0)return 0|(d=0);if(r=0|i[t+4>>2],e){e=0,n=-1,t=0;t:for(;;){for(p=t;l=+o[r+(p<<4)>>3],h=+o[r+(p<<4)+8>>3],c=+o[r+((t=(n+2|0)%(0|d)|0)<<4)>>3],u=+o[r+(t<<4)+8>>3],l>c?(f=l,l=h):(f=c,c=l,l=u,u=h),a<c|a>f;){if(!((0|(n=p+1|0))<(0|d))){n=22;break t}t=p,p=n,n=t}if(s=(l=l<0?l+6.283185307179586:l)==s|(h=u<0?u+6.283185307179586:u)==s?s+-2220446049250313e-31:s,((h+=(a-c)/(f-c)*(l-h))<0?h+6.283185307179586:h)>s&&(e^=1),(0|(t=p+1|0))>=(0|d)){n=22;break}n=p}if(22==(0|n))return 0|e}else{e=0,n=-1,t=0;t:for(;;){for(p=t;l=+o[r+(p<<4)>>3],h=+o[r+(p<<4)+8>>3],c=+o[r+((t=(n+2|0)%(0|d)|0)<<4)>>3],u=+o[r+(t<<4)+8>>3],l>c?(f=l,l=h):(f=c,c=l,l=u,u=h),a<c|a>f;){if(!((0|(n=p+1|0))<(0|d))){n=22;break t}t=p,p=n,n=t}if(u+(a-c)/(f-c)*(l-u)>(s=l==s|u==s?s+-2220446049250313e-31:s)&&(e^=1),(0|(t=p+1|0))>=(0|d)){n=22;break}n=p}if(22==(0|n))return 0|e}return 0}function re(t,e){e|=0;var n,r,a,s,c,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0;if(!(r=0|i[(t|=0)>>2]))return i[e>>2]=0,i[e+4>>2]=0,i[e+8>>2]=0,i[e+12>>2]=0,i[e+16>>2]=0,i[e+20>>2]=0,i[e+24>>2]=0,void(i[e+28>>2]=0);if(o[(a=e+8|0)>>3]=17976931348623157e292,o[(s=e+24|0)>>3]=17976931348623157e292,o[e>>3]=-17976931348623157e292,o[(c=e+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[t+4>>2],v=17976931348623157e292,m=-17976931348623157e292,A=0,t=-1,p=17976931348623157e292,d=17976931348623157e292,y=-17976931348623157e292,f=-17976931348623157e292,b=0;l=+o[n+(b<<4)>>3],g=+o[n+(b<<4)+8>>3],h=+o[n+(((0|(t=t+2|0))==(0|r)?0:t)<<4)+8>>3],l<p&&(o[a>>3]=l,p=l),g<d&&(o[s>>3]=g,d=g),l>y?o[e>>3]=l:l=y,g>f&&(o[c>>3]=g,f=g),v=g>0&g<v?g:v,m=g<0&g>m?g:m,A|=+u(+(g-h))>3.141592653589793,(0|(t=b+1|0))!=(0|r);)_=b,y=l,b=t,t=_;A&&(o[c>>3]=m,o[s>>3]=v)}}function ie(t,e){e|=0;var n,r=0,a=0,s=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0,w=0,x=0,E=0,O=0,S=0;if(m=0|i[(t|=0)>>2]){if(o[(A=e+8|0)>>3]=17976931348623157e292,o[(b=e+24|0)>>3]=17976931348623157e292,o[e>>3]=-17976931348623157e292,o[(_=e+16|0)>>3]=-17976931348623157e292,(0|m)>0){for(s=0|i[t+4>>2],y=17976931348623157e292,v=-17976931348623157e292,a=0,r=-1,h=17976931348623157e292,p=17976931348623157e292,g=-17976931348623157e292,l=-17976931348623157e292,w=0;c=+o[s+(w<<4)>>3],d=+o[s+(w<<4)+8>>3],f=+o[s+(((0|(O=r+2|0))==(0|m)?0:O)<<4)+8>>3],c<h&&(o[A>>3]=c,h=c),d<p&&(o[b>>3]=d,p=d),c>g?o[e>>3]=c:c=g,d>l&&(o[_>>3]=d,l=d),y=d>0&d<y?d:y,v=d<0&d>v?d:v,a|=+u(+(d-f))>3.141592653589793,(0|(r=w+1|0))!=(0|m);)O=w,g=c,w=r,r=O;a&&(o[_>>3]=v,o[b>>3]=y)}}else i[e>>2]=0,i[e+4>>2]=0,i[e+8>>2]=0,i[e+12>>2]=0,i[e+16>>2]=0,i[e+20>>2]=0,i[e+24>>2]=0,i[e+28>>2]=0;if(!((0|(r=0|i[(O=t+8|0)>>2]))<=0)){n=t+12|0,E=0;do{if(s=0|i[n>>2],a=E,b=e+((E=E+1|0)<<5)|0,_=0|i[s+(a<<3)>>2]){if(o[(w=e+(E<<5)+8|0)>>3]=17976931348623157e292,o[(t=e+(E<<5)+24|0)>>3]=17976931348623157e292,o[b>>3]=-17976931348623157e292,o[(x=e+(E<<5)+16|0)>>3]=-17976931348623157e292,(0|_)>0){for(m=0|i[s+(a<<3)+4>>2],y=17976931348623157e292,v=-17976931348623157e292,s=0,a=-1,A=0,h=17976931348623157e292,p=17976931348623157e292,d=-17976931348623157e292,l=-17976931348623157e292;c=+o[m+(A<<4)>>3],g=+o[m+(A<<4)+8>>3],f=+o[m+(((0|(a=a+2|0))==(0|_)?0:a)<<4)+8>>3],c<h&&(o[w>>3]=c,h=c),g<p&&(o[t>>3]=g,p=g),c>d?o[b>>3]=c:c=d,g>l&&(o[x>>3]=g,l=g),y=g>0&g<y?g:y,v=g<0&g>v?g:v,s|=+u(+(g-f))>3.141592653589793,(0|(a=A+1|0))!=(0|_);)S=A,A=a,d=c,a=S;s&&(o[x>>3]=v,o[t>>3]=y)}}else i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0,r=0|i[O>>2]}while((0|E)<(0|r))}}function oe(t,e,n){var r=0,o=0,a=0;if(!(0|ne(t|=0,e|=0,n|=0)))return 0|(o=0);if((0|i[(o=t+8|0)>>2])<=0)return 0|(o=1);for(r=t+12|0,t=0;;){if(a=t,t=t+1|0,0|ne((0|i[r>>2])+(a<<3)|0,e+(t<<5)|0,n)){t=0,r=6;break}if((0|t)>=(0|i[o>>2])){t=1,r=6;break}}return 6==(0|r)?0|t:0}function ae(t,e,n,r,i){e|=0,n|=0,r|=0,i|=0;var a,s,u,c,l,f,h,p=0;c=+o[(t|=0)>>3],u=+o[e>>3]-c,s=+o[t+8>>3],a=+o[e+8>>3]-s,f=+o[n>>3],p=((p=+o[r>>3]-f)*(s-(h=+o[n+8>>3]))-(c-f)*(l=+o[r+8>>3]-h))/(u*l-a*p),o[i>>3]=c+u*p,o[i+8>>3]=s+a*p}function se(t,e){return e|=0,+o[(t|=0)>>3]!=+o[e>>3]?0|(e=0):0|(e=+o[t+8>>3]==+o[e+8>>3])}function ue(t,e){e|=0;var n,r,i;return+((i=+o[(t|=0)>>3]-+o[e>>3])*i+(r=+o[t+8>>3]-+o[e+8>>3])*r+(n=+o[t+16>>3]-+o[e+16>>3])*n)}function ce(t,e,n){t|=0,n|=0;var r=0;(0|(e|=0))>0?(r=0|Ae(e,4),i[t>>2]=r,r||E(23230,23253,40,23267)):i[t>>2]=0,i[t+4>>2]=e,i[t+8>>2]=0,i[t+12>>2]=n}function le(t){var e,n,r,a=0,s=0,c=0,f=0;e=(t|=0)+4|0,n=t+12|0,r=t+8|0;t:for(;;){for(s=0|i[e>>2],a=0;;){if((0|a)>=(0|s))break t;if(c=0|i[t>>2],f=0|i[c+(a<<2)>>2])break;a=a+1|0}a=c+(~~(+u(+ +l(10,+ +(15-(0|i[n>>2])|0))*(+o[f>>3]+ +o[f+8>>3]))%+(0|s))>>>0<<2)|0,s=0|i[a>>2];e:do{if(0|s){if(c=f+32|0,(0|s)==(0|f))i[a>>2]=i[c>>2];else{if(!(a=0|i[(s=s+32|0)>>2]))break;for(;(0|a)!=(0|f);)if(!(a=0|i[(s=a+32|0)>>2]))break e;i[s>>2]=i[c>>2]}me(f),i[r>>2]=(0|i[r>>2])-1}}while(0)}me(0|i[t>>2])}function fe(t){var e,n=0,r=0;for(e=0|i[(t|=0)+4>>2],r=0;;){if((0|r)>=(0|e)){n=0,r=4;break}if(n=0|i[(0|i[t>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function he(t,e){e|=0;var n=0,r=0,a=0,s=0;if(n=~~(+u(+ +l(10,+ +(15-(0|i[(t|=0)+12>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,n=(0|i[t>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 0|(s=1);s=e+32|0;do{if((0|r)!=(0|e)){if(!(n=0|i[r+32>>2]))return 0|(s=1);for(a=n;;){if((0|a)==(0|e)){a=8;break}if(!(n=0|i[a+32>>2])){n=1,a=10;break}r=a,a=n}if(8==(0|a)){i[r+32>>2]=i[s>>2];break}if(10==(0|a))return 0|n}else i[n>>2]=i[s>>2]}while(0);return me(e),i[(s=t+8|0)>>2]=(0|i[s>>2])-1,0|(s=0)}function pe(t,e,n){t|=0,e|=0,n|=0;var r,a=0,s=0,c=0;(r=0|ve(40))||E(23283,23253,98,23296),i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],i[r+12>>2]=i[e+12>>2],i[(s=r+16|0)>>2]=i[n>>2],i[s+4>>2]=i[n+4>>2],i[s+8>>2]=i[n+8>>2],i[s+12>>2]=i[n+12>>2],i[r+32>>2]=0,s=~~(+u(+ +l(10,+ +(15-(0|i[t+12>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,s=(0|i[t>>2])+(s<<2)|0,a=0|i[s>>2];do{if(a){for(;!(0|Tt(a,e)&&0|Tt(a+16|0,n));)if(s=0|i[a+32>>2],!(0|i[(a=0==(0|s)?a:s)+32>>2])){c=10;break}if(10==(0|c)){i[a+32>>2]=r;break}return me(r),0|(c=a)}i[s>>2]=r}while(0);return i[(c=t+8|0)>>2]=1+(0|i[c>>2]),0|(c=r)}function de(t,e,n){e|=0,n|=0;var r=0,a=0;if(a=~~(+u(+ +l(10,+ +(15-(0|i[(t|=0)+12>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,!(a=0|i[(0|i[t>>2])+(a<<2)>>2]))return 0|(n=0);if(!n){for(t=a;;){if(0|Tt(t,e)){r=10;break}if(!(t=0|i[t+32>>2])){t=0,r=10;break}}if(10==(0|r))return 0|t}for(t=a;;){if(0|Tt(t,e)&&0|Tt(t+16|0,n)){r=10;break}if(!(t=0|i[t+32>>2])){t=0,r=10;break}}return 10==(0|r)?0|t:0}function ge(t,e){e|=0;var n=0;if(n=~~(+u(+ +l(10,+ +(15-(0|i[(t|=0)+12>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,!(t=0|i[(0|i[t>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|Tt(t,e)){e=5;break}if(!(t=0|i[t+32>>2])){t=0,e=5;break}}return 5==(0|e)?0|t:0}function ye(t){return 0|~~+function(t){return+ +Ce(+(t=+t))}(t=+t)}function ve(t){t|=0;var e,n=0,r=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0,w=0;e=C,C=C+16|0,d=e;do{if(t>>>0<245){if(t=(f=t>>>0<11?16:t+11&-8)>>>3,3&(r=(p=0|i[5829])>>>t)|0)return o=0|i[(r=(t=23356+((n=(1&r^1)+t|0)<<1<<2)|0)+8|0)>>2],(0|(s=0|i[(a=o+8|0)>>2]))==(0|t)?i[5829]=p&~(1<<n):(i[s+12>>2]=t,i[r>>2]=s),w=n<<3,i[o+4>>2]=3|w,i[(w=o+w+4|0)>>2]=1|i[w>>2],C=e,0|(w=a);if(f>>>0>(h=0|i[5831])>>>0){if(0|r)return n=((n=r<<t&((n=2<<t)|0-n))&0-n)-1|0,s=0|i[(t=(n=23356+((o=((r=(n>>>=c=n>>>12&16)>>>5&8)|c|(s=(n>>>=r)>>>2&4)|(t=(n>>>=s)>>>1&2)|(o=(n>>>=t)>>>1&1))+(n>>>o)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|i[(c=s+8|0)>>2]))==(0|n)?(t=p&~(1<<o),i[5829]=t):(i[r+12>>2]=n,i[t>>2]=r,t=p),u=(w=o<<3)-f|0,i[s+4>>2]=3|f,i[(a=s+f|0)+4>>2]=1|u,i[s+w>>2]=u,0|h&&(o=0|i[5834],r=23356+((n=h>>>3)<<1<<2)|0,t&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=u,i[5834]=a,C=e,0|(w=c);if(s=0|i[5830]){for(r=(s&0-s)-1|0,r=l=0|i[23620+(((o=(r>>>=a=r>>>12&16)>>>5&8)|a|(u=(r>>>=o)>>>2&4)|(c=(r>>>=u)>>>1&2)|(l=(r>>>=c)>>>1&1))+(r>>>l)<<2)>>2],c=l,l=(-8&i[l+4>>2])-f|0;(t=0|i[r+16>>2])||(t=0|i[r+20>>2]);)r=t,c=(a=(u=(-8&i[t+4>>2])-f|0)>>>0<l>>>0)?t:c,l=a?u:l;if((u=c+f|0)>>>0>c>>>0){a=0|i[c+24>>2],n=0|i[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|i[(t=c+20|0)>>2])&&!(n=0|i[(t=c+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(o=n+20|0)>>2])n=r,t=o;else{if(!(r=0|i[(o=n+16|0)>>2]))break;n=r,t=o}i[t>>2]=0,r=n}else r=0|i[c+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|a){if(n=0|i[c+28>>2],(0|c)==(0|i[(t=23620+(n<<2)|0)>>2])){if(i[t>>2]=r,!r){i[5830]=s&~(1<<n);break}}else if(i[((0|i[(w=a+16|0)>>2])==(0|c)?w:a+20|0)>>2]=r,!r)break;i[r+24>>2]=a,0|(n=0|i[c+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[c+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return l>>>0<16?(w=l+f|0,i[c+4>>2]=3|w,i[(w=c+w+4|0)>>2]=1|i[w>>2]):(i[c+4>>2]=3|f,i[u+4>>2]=1|l,i[u+l>>2]=l,0|h&&(o=0|i[5834],r=23356+((n=h>>>3)<<1<<2)|0,(n=1<<n)&p?n=0|i[(t=r+8|0)>>2]:(i[5829]=n|p,n=r,t=r+8|0),i[t>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=l,i[5834]=u),C=e,0|(w=c+8|0)}p=f}else p=f}else p=f}else if(t>>>0<=4294967231)if(f=-8&(t=t+11|0),o=0|i[5830]){a=0-f|0,l=(t>>>=8)?f>>>0>16777215?31:f>>>((l=14-((c=((v=t<<(p=(t+1048320|0)>>>16&8))+520192|0)>>>16&4)|p|(l=((v<<=c)+245760|0)>>>16&2))+(v<<l>>>15)|0)+7|0)&1|l<<1:0,r=0|i[23620+(l<<2)>>2];t:do{if(r)for(t=0,c=f<<(31==(0|l)?0:25-(l>>>1)|0),s=0;;){if((u=(-8&i[r+4>>2])-f|0)>>>0<a>>>0){if(!u){t=r,a=0,v=65;break t}t=r,a=u}if(s=0==(0|(v=0|i[r+20>>2]))|(0|v)==(0|(r=0|i[r+16+(c>>>31<<2)>>2]))?s:v,!r){r=s,v=61;break}c<<=1}else r=0,t=0,v=61}while(0);if(61==(0|v)){if(0==(0|r)&0==(0|t)){if(!(t=((t=2<<l)|0-t)&o)){p=f;break}p=(t&0-t)-1|0,t=0,r=0|i[23620+(((s=(p>>>=u=p>>>12&16)>>>5&8)|u|(c=(p>>>=s)>>>2&4)|(l=(p>>>=c)>>>1&2)|(r=(p>>>=l)>>>1&1))+(p>>>r)<<2)>>2]}r?v=65:(c=t,u=a)}if(65==(0|v))for(s=r;;){if(a=(r=(p=(-8&i[s+4>>2])-f|0)>>>0<a>>>0)?p:a,t=r?s:t,(r=0|i[s+16>>2])||(r=0|i[s+20>>2]),!r){c=t,u=a;break}s=r}if(0!=(0|c)&&u>>>0<((0|i[5831])-f|0)>>>0&&(h=c+f|0)>>>0>c>>>0){s=0|i[c+24>>2],n=0|i[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|i[(t=c+20|0)>>2])&&!(n=0|i[(t=c+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(a=n+20|0)>>2])n=r,t=a;else{if(!(r=0|i[(a=n+16|0)>>2]))break;n=r,t=a}i[t>>2]=0}else w=0|i[c+8>>2],i[w+12>>2]=n,i[n+8>>2]=w}while(0);do{if(s){if(t=0|i[c+28>>2],(0|c)==(0|i[(r=23620+(t<<2)|0)>>2])){if(i[r>>2]=n,!n){o&=~(1<<t),i[5830]=o;break}}else if(i[((0|i[(w=s+16|0)>>2])==(0|c)?w:s+20|0)>>2]=n,!n)break;i[n+24>>2]=s,0|(t=0|i[c+16>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),(t=0|i[c+20>>2])&&(i[n+20>>2]=t,i[t+24>>2]=n)}}while(0);t:do{if(u>>>0<16)w=u+f|0,i[c+4>>2]=3|w,i[(w=c+w+4|0)>>2]=1|i[w>>2];else{if(i[c+4>>2]=3|f,i[h+4>>2]=1|u,i[h+u>>2]=u,n=u>>>3,u>>>0<256){r=23356+(n<<1<<2)|0,(t=0|i[5829])&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=h,i[n+12>>2]=h,i[h+8>>2]=n,i[h+12>>2]=r;break}if(n=23620+((r=(n=u>>>8)?u>>>0>16777215?31:u>>>((r=14-((b=((w=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(r=((w<<=b)+245760|0)>>>16&2))+(w<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[h+28>>2]=r,i[(t=h+16|0)+4>>2]=0,i[t>>2]=0,!(o&(t=1<<r))){i[5830]=o|t,i[n>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break}n=0|i[n>>2];e:do{if((-8&i[n+4>>2]|0)!=(0|u)){for(o=u<<(31==(0|r)?0:25-(r>>>1)|0);t=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|u)){n=t;break e}o<<=1,n=t}i[r>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break t}}while(0);w=0|i[(_=n+8|0)>>2],i[w+12>>2]=h,i[_>>2]=h,i[h+8>>2]=w,i[h+12>>2]=n,i[h+24>>2]=0}}while(0);return C=e,0|(w=c+8|0)}p=f}else p=f;else p=-1}while(0);if((r=0|i[5831])>>>0>=p>>>0)return n=r-p|0,t=0|i[5834],n>>>0>15?(w=t+p|0,i[5834]=w,i[5831]=n,i[w+4>>2]=1|n,i[t+r>>2]=n,i[t+4>>2]=3|p):(i[5831]=0,i[5834]=0,i[t+4>>2]=3|r,i[(w=t+r+4|0)>>2]=1|i[w>>2]),C=e,0|(w=t+8|0);if((u=0|i[5832])>>>0>p>>>0)return b=u-p|0,i[5832]=b,_=(w=0|i[5835])+p|0,i[5835]=_,i[_+4>>2]=1|b,i[w+4>>2]=3|p,C=e,0|(w=w+8|0);if(0|i[5947]?t=0|i[5949]:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=-16&d^1431655768,t=4096),c=p+48|0,(f=(s=t+(l=p+47|0)|0)&(a=0-t|0))>>>0<=p>>>0)return C=e,0|(w=0);if(0|(t=0|i[5939])&&(d=(h=0|i[5937])+f|0)>>>0<=h>>>0|d>>>0>t>>>0)return C=e,0|(w=0);t:do{if(4&i[5940])n=0,v=143;else{r=0|i[5835];e:do{if(r){for(o=23764;!((d=0|i[o>>2])>>>0<=r>>>0&&(d+(0|i[o+4>>2])|0)>>>0>r>>>0);){if(!(t=0|i[o+8>>2])){v=128;break e}o=t}if((n=s-u&a)>>>0<2147483647)if((0|(t=0|Ie(0|n)))==((0|i[o>>2])+(0|i[o+4>>2])|0)){if(-1!=(0|t)){u=n,s=t,v=145;break t}}else o=t,v=136;else n=0}else v=128}while(0);do{if(128==(0|v))if(-1!=(0|(r=0|Ie(0)))&&(n=r,y=(n=(0==((y=(g=0|i[5948])+-1|0)&n|0)?0:(y+n&0-g)-n|0)+f|0)+(g=0|i[5937])|0,n>>>0>p>>>0&n>>>0<2147483647)){if(0|(d=0|i[5939])&&y>>>0<=g>>>0|y>>>0>d>>>0){n=0;break}if((0|(t=0|Ie(0|n)))==(0|r)){u=n,s=r,v=145;break t}o=t,v=136}else n=0}while(0);do{if(136==(0|v)){if(r=0-n|0,!(c>>>0>n>>>0&n>>>0<2147483647&-1!=(0|o))){if(-1==(0|o)){n=0;break}u=n,s=o,v=145;break t}if((t=l-n+(t=0|i[5949])&0-t)>>>0>=2147483647){u=n,s=o,v=145;break t}if(-1==(0|Ie(0|t))){Ie(0|r),n=0;break}u=t+n|0,s=o,v=145;break t}}while(0);i[5940]=4|i[5940],v=143}}while(0);if(143==(0|v)&&f>>>0<2147483647&&!(-1==(0|(b=0|Ie(0|f)))|1^(A=(m=(y=0|Ie(0))-b|0)>>>0>(p+40|0)>>>0)|b>>>0<y>>>0&-1!=(0|b)&-1!=(0|y)^1)&&(u=A?m:n,s=b,v=145),145==(0|v)){n=(0|i[5937])+u|0,i[5937]=n,n>>>0>(0|i[5938])>>>0&&(i[5938]=n),l=0|i[5835];t:do{if(l){for(n=23764;;){if((0|s)==((t=0|i[n>>2])+(r=0|i[n+4>>2])|0)){v=154;break}if(!(o=0|i[n+8>>2]))break;n=o}if(154==(0|v)&&(_=n+4|0,0==(8&i[n+12>>2]|0))&&s>>>0>l>>>0&t>>>0<=l>>>0){i[_>>2]=r+u,_=l+(b=0==(7&(b=l+8|0)|0)?0:0-b&7)|0,b=(w=(0|i[5832])+u|0)-b|0,i[5835]=_,i[5832]=b,i[_+4>>2]=1|b,i[l+w+4>>2]=40,i[5836]=i[5951];break}for(s>>>0<(0|i[5833])>>>0&&(i[5833]=s),r=s+u|0,n=23764;;){if((0|i[n>>2])==(0|r)){v=162;break}if(!(t=0|i[n+8>>2]))break;n=t}if(162==(0|v)&&0==(8&i[n+12>>2]|0)){i[n>>2]=s,i[(h=n+4|0)>>2]=(0|i[h>>2])+u,f=(h=s+(0==(7&(h=s+8|0)|0)?0:0-h&7)|0)+p|0,c=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-h-p|0,i[h+4>>2]=3|p;e:do{if((0|l)==(0|n))w=(0|i[5832])+c|0,i[5832]=w,i[5835]=f,i[f+4>>2]=1|w;else{if((0|i[5834])==(0|n)){w=(0|i[5831])+c|0,i[5831]=w,i[5834]=f,i[f+4>>2]=1|w,i[f+w>>2]=w;break}if(1==(3&(t=0|i[n+4>>2])|0)){u=-8&t,o=t>>>3;n:do{if(t>>>0<256){if(t=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|t)){i[5829]=i[5829]&~(1<<o);break}i[t+12>>2]=r,i[r+8>>2]=t;break}s=0|i[n+24>>2],t=0|i[n+12>>2];do{if((0|t)==(0|n)){if(t=0|i[(o=(r=n+16|0)+4|0)>>2])r=o;else if(!(t=0|i[r>>2])){t=0;break}for(;;)if(o=0|i[(a=t+20|0)>>2])t=o,r=a;else{if(!(o=0|i[(a=t+16|0)>>2]))break;t=o,r=a}i[r>>2]=0}else w=0|i[n+8>>2],i[w+12>>2]=t,i[t+8>>2]=w}while(0);if(!s)break;o=23620+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[o>>2])==(0|n)){if(i[o>>2]=t,0|t)break;i[5830]=i[5830]&~(1<<r);break n}if(i[((0|i[(w=s+16|0)>>2])==(0|n)?w:s+20|0)>>2]=t,!t)break n}while(0);if(i[t+24>>2]=s,0|(o=0|i[(r=n+16|0)>>2])&&(i[t+16>>2]=o,i[o+24>>2]=t),!(r=0|i[r+4>>2]))break;i[t+20>>2]=r,i[r+24>>2]=t}while(0);n=n+u|0,a=u+c|0}else a=c;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[f+4>>2]=1|a,i[f+a>>2]=a,n=a>>>3,a>>>0<256){r=23356+(n<<1<<2)|0,(t=0|i[5829])&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=f,i[n+12>>2]=f,i[f+8>>2]=n,i[f+12>>2]=r;break}n=a>>>8;do{if(n){if(a>>>0>16777215){o=31;break}o=a>>>((o=14-((b=((w=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(o=((w<<=b)+245760|0)>>>16&2))+(w<<o>>>15)|0)+7|0)&1|o<<1}else o=0}while(0);if(n=23620+(o<<2)|0,i[f+28>>2]=o,i[(t=f+16|0)+4>>2]=0,i[t>>2]=0,!((t=0|i[5830])&(r=1<<o))){i[5830]=t|r,i[n>>2]=f,i[f+24>>2]=n,i[f+12>>2]=f,i[f+8>>2]=f;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2]|0)!=(0|a)){for(o=a<<(31==(0|o)?0:25-(o>>>1)|0);t=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|a)){n=t;break n}o<<=1,n=t}i[r>>2]=f,i[f+24>>2]=n,i[f+12>>2]=f,i[f+8>>2]=f;break e}}while(0);w=0|i[(_=n+8|0)>>2],i[w+12>>2]=f,i[_>>2]=f,i[f+8>>2]=w,i[f+12>>2]=n,i[f+24>>2]=0}}while(0);return C=e,0|(w=h+8|0)}for(n=23764;!((t=0|i[n>>2])>>>0<=l>>>0&&(w=t+(0|i[n+4>>2])|0)>>>0>l>>>0);)n=0|i[n+8>>2];n=(t=(t=(a=w+-47|0)+(0==(7&(t=a+8|0)|0)?0:0-t&7)|0)>>>0<(a=l+16|0)>>>0?l:t)+8|0,_=s+(b=0==(7&(b=s+8|0)|0)?0:0-b&7)|0,b=(r=u+-40|0)-b|0,i[5835]=_,i[5832]=b,i[_+4>>2]=1|b,i[s+r+4>>2]=40,i[5836]=i[5951],i[(r=t+4|0)>>2]=27,i[n>>2]=i[5941],i[n+4>>2]=i[5942],i[n+8>>2]=i[5943],i[n+12>>2]=i[5944],i[5941]=s,i[5942]=u,i[5944]=0,i[5943]=n,n=t+24|0;do{_=n,i[(n=n+4|0)>>2]=7}while((_+8|0)>>>0<w>>>0);if((0|t)!=(0|l)){if(s=t-l|0,i[r>>2]=-2&i[r>>2],i[l+4>>2]=1|s,i[t>>2]=s,n=s>>>3,s>>>0<256){r=23356+(n<<1<<2)|0,(t=0|i[5829])&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=l,i[n+12>>2]=l,i[l+8>>2]=n,i[l+12>>2]=r;break}if(r=23620+((o=(n=s>>>8)?s>>>0>16777215?31:s>>>((o=14-((b=((w=n<<(_=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|_|(o=((w<<=b)+245760|0)>>>16&2))+(w<<o>>>15)|0)+7|0)&1|o<<1:0)<<2)|0,i[l+28>>2]=o,i[l+20>>2]=0,i[a>>2]=0,!((n=0|i[5830])&(t=1<<o))){i[5830]=n|t,i[r>>2]=l,i[l+24>>2]=r,i[l+12>>2]=l,i[l+8>>2]=l;break}n=0|i[r>>2];e:do{if((-8&i[n+4>>2]|0)!=(0|s)){for(o=s<<(31==(0|o)?0:25-(o>>>1)|0);t=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|s)){n=t;break e}o<<=1,n=t}i[r>>2]=l,i[l+24>>2]=n,i[l+12>>2]=l,i[l+8>>2]=l;break t}}while(0);w=0|i[(_=n+8|0)>>2],i[w+12>>2]=l,i[_>>2]=l,i[l+8>>2]=w,i[l+12>>2]=n,i[l+24>>2]=0}}else 0==(0|(w=0|i[5833]))|s>>>0<w>>>0&&(i[5833]=s),i[5941]=s,i[5942]=u,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,_=s+(b=0==(7&(b=s+8|0)|0)?0:0-b&7)|0,b=(w=u+-40|0)-b|0,i[5835]=_,i[5832]=b,i[_+4>>2]=1|b,i[s+w+4>>2]=40,i[5836]=i[5951]}while(0);if((n=0|i[5832])>>>0>p>>>0)return b=n-p|0,i[5832]=b,_=(w=0|i[5835])+p|0,i[5835]=_,i[_+4>>2]=1|b,i[w+4>>2]=3|p,C=e,0|(w=w+8|0)}return i[(w=23312)>>2]=12,C=e,0|(w=0)}function me(t){var e=0,n=0,r=0,o=0,a=0,s=0,u=0,c=0;if(t|=0){n=t+-8|0,o=0|i[5833],c=n+(e=-8&(t=0|i[t+-4>>2]))|0;do{if(1&t)u=n,s=n;else{if(r=0|i[n>>2],!(3&t))return;if(a=r+e|0,(s=n+(0-r)|0)>>>0<o>>>0)return;if((0|i[5834])==(0|s)){if(3!=(3&(e=0|i[(t=c+4|0)>>2])|0)){u=s,e=a;break}return i[5831]=a,i[t>>2]=-2&e,i[s+4>>2]=1|a,void(i[s+a>>2]=a)}if(n=r>>>3,r>>>0<256){if(t=0|i[s+8>>2],(0|(e=0|i[s+12>>2]))==(0|t)){i[5829]=i[5829]&~(1<<n),u=s,e=a;break}i[t+12>>2]=e,i[e+8>>2]=t,u=s,e=a;break}o=0|i[s+24>>2],t=0|i[s+12>>2];do{if((0|t)==(0|s)){if(t=0|i[(n=(e=s+16|0)+4|0)>>2])e=n;else if(!(t=0|i[e>>2])){t=0;break}for(;;)if(n=0|i[(r=t+20|0)>>2])t=n,e=r;else{if(!(n=0|i[(r=t+16|0)>>2]))break;t=n,e=r}i[e>>2]=0}else u=0|i[s+8>>2],i[u+12>>2]=t,i[t+8>>2]=u}while(0);if(o){if(e=0|i[s+28>>2],(0|i[(n=23620+(e<<2)|0)>>2])==(0|s)){if(i[n>>2]=t,!t){i[5830]=i[5830]&~(1<<e),u=s,e=a;break}}else if(i[((0|i[(u=o+16|0)>>2])==(0|s)?u:o+20|0)>>2]=t,!t){u=s,e=a;break}i[t+24>>2]=o,0|(n=0|i[(e=s+16|0)>>2])&&(i[t+16>>2]=n,i[n+24>>2]=t),(e=0|i[e+4>>2])?(i[t+20>>2]=e,i[e+24>>2]=t,u=s,e=a):(u=s,e=a)}else u=s,e=a}}while(0);if(!(s>>>0>=c>>>0)&&1&(r=0|i[(t=c+4|0)>>2])){if(2&r)i[t>>2]=-2&r,i[u+4>>2]=1|e,i[s+e>>2]=e,o=e;else{if((0|i[5835])==(0|c)){if(c=(0|i[5832])+e|0,i[5832]=c,i[5835]=u,i[u+4>>2]=1|c,(0|u)!=(0|i[5834]))return;return i[5834]=0,void(i[5831]=0)}if((0|i[5834])==(0|c))return c=(0|i[5831])+e|0,i[5831]=c,i[5834]=s,i[u+4>>2]=1|c,void(i[s+c>>2]=c);o=(-8&r)+e|0,n=r>>>3;do{if(r>>>0<256){if(e=0|i[c+8>>2],(0|(t=0|i[c+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<n);break}i[e+12>>2]=t,i[t+8>>2]=e;break}a=0|i[c+24>>2],t=0|i[c+12>>2];do{if((0|t)==(0|c)){if(t=0|i[(n=(e=c+16|0)+4|0)>>2])e=n;else if(!(t=0|i[e>>2])){n=0;break}for(;;)if(n=0|i[(r=t+20|0)>>2])t=n,e=r;else{if(!(n=0|i[(r=t+16|0)>>2]))break;t=n,e=r}i[e>>2]=0,n=t}else n=0|i[c+8>>2],i[n+12>>2]=t,i[t+8>>2]=n,n=t}while(0);if(0|a){if(t=0|i[c+28>>2],(0|i[(e=23620+(t<<2)|0)>>2])==(0|c)){if(i[e>>2]=n,!n){i[5830]=i[5830]&~(1<<t);break}}else if(i[((0|i[(r=a+16|0)>>2])==(0|c)?r:a+20|0)>>2]=n,!n)break;i[n+24>>2]=a,0|(e=0|i[(t=c+16|0)>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),0|(t=0|i[t+4>>2])&&(i[n+20>>2]=t,i[t+24>>2]=n)}}while(0);if(i[u+4>>2]=1|o,i[s+o>>2]=o,(0|u)==(0|i[5834]))return void(i[5831]=o)}if(t=o>>>3,o>>>0<256)return n=23356+(t<<1<<2)|0,(e=0|i[5829])&(t=1<<t)?t=0|i[(e=n+8|0)>>2]:(i[5829]=e|t,t=n,e=n+8|0),i[e>>2]=u,i[t+12>>2]=u,i[u+8>>2]=t,void(i[u+12>>2]=n);t=23620+((r=(t=o>>>8)?o>>>0>16777215?31:o>>>((r=14-((a=((c=t<<(s=(t+1048320|0)>>>16&8))+520192|0)>>>16&4)|s|(r=((c<<=a)+245760|0)>>>16&2))+(c<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[u+28>>2]=r,i[u+20>>2]=0,i[u+16>>2]=0,e=0|i[5830],n=1<<r;t:do{if(e&n){t=0|i[t>>2];e:do{if((-8&i[t+4>>2]|0)!=(0|o)){for(r=o<<(31==(0|r)?0:25-(r>>>1)|0);e=0|i[(n=t+16+(r>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|o)){t=e;break e}r<<=1,t=e}i[n>>2]=u,i[u+24>>2]=t,i[u+12>>2]=u,i[u+8>>2]=u;break t}}while(0);c=0|i[(s=t+8|0)>>2],i[c+12>>2]=u,i[s>>2]=u,i[u+8>>2]=c,i[u+12>>2]=t,i[u+24>>2]=0}else i[5830]=e|n,i[t>>2]=u,i[u+24>>2]=t,i[u+12>>2]=u,i[u+8>>2]=u}while(0);if(c=(0|i[5837])-1|0,i[5837]=c,!(0|c)){for(t=23772;t=0|i[t>>2];)t=t+8|0;i[5837]=-1}}}}function Ae(t,e){e|=0;var n=0;return(t|=0)?(n=0|A(e,t),(e|t)>>>0>65535&&(n=(0|(n>>>0)/(t>>>0))==(0|e)?n:-1)):n=0,(t=0|ve(n))&&3&i[t+-4>>2]?(Me(0|t,0,0|n),0|t):0|t}function be(t,e,n,r){return 0|(w(0|(r=(e|=0)-(r|=0)-((n|=0)>>>0>(t|=0)>>>0|0)>>>0)),t-n>>>0|0)}function _e(t){return 0|((t|=0)?31-(0|_(t^t-1))|0:32)}function we(t,e,n,r,o){o|=0;var a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0;if(f=t|=0,s=n|=0,u=p=r|=0,!(l=c=e|=0))return a=0!=(0|o),u?a?(i[o>>2]=0|t,i[o+4>>2]=0&e,o=0,0|(w(0|(p=0)),o)):(o=0,0|(w(0|(p=0)),o)):(a&&(i[o>>2]=(f>>>0)%(s>>>0),i[o+4>>2]=0),o=(f>>>0)/(s>>>0)>>>0,0|(w(0|(p=0)),o));a=0==(0|u);do{if(s){if(!a){if((a=(0|_(0|u))-(0|_(0|l))|0)>>>0<=31){s=h=a+1|0,t=f>>>(h>>>0)&(e=a-31>>31)|l<<(u=31-a|0),e&=l>>>(h>>>0),a=0,u=f<<u;break}return o?(i[o>>2]=0|t,i[o+4>>2]=c|0&e,o=0,0|(w(0|(p=0)),o)):(o=0,0|(w(0|(p=0)),o))}if((a=s-1|0)&s|0){s=u=33+(0|_(0|s))-(0|_(0|l))|0,t=(h=32-u|0)-1>>31&l>>>((d=u-32|0)>>>0)|(l<<h|f>>>(u>>>0))&(e=d>>31),e&=l>>>(u>>>0),a=f<<(g=64-u|0)&(c=h>>31),u=(l<<g|f>>>(d>>>0))&c|f<<h&u-33>>31;break}return 0|o&&(i[o>>2]=a&f,i[o+4>>2]=0),1==(0|s)?(g=0|t,0|(w(0|(d=c|0&e)),g)):(d=l>>>((g=0|_e(0|s))>>>0)|0,g=l<<32-g|f>>>(g>>>0)|0,0|(w(0|d),g))}if(a)return 0|o&&(i[o>>2]=(l>>>0)%(s>>>0),i[o+4>>2]=0),g=(l>>>0)/(s>>>0)>>>0,0|(w(0|(d=0)),g);if(!f)return 0|o&&(i[o>>2]=0,i[o+4>>2]=(l>>>0)%(u>>>0)),g=(l>>>0)/(u>>>0)>>>0,0|(w(0|(d=0)),g);if(!((a=u-1|0)&u))return 0|o&&(i[o>>2]=0|t,i[o+4>>2]=a&l|0&e),d=0,g=l>>>((0|_e(0|u))>>>0),0|(w(0|d),g);if((a=(0|_(0|u))-(0|_(0|l))|0)>>>0<=30){s=e=a+1|0,t=l<<(u=31-a|0)|f>>>(e>>>0),e=l>>>(e>>>0),a=0,u=f<<u;break}return o?(i[o>>2]=0|t,i[o+4>>2]=c|0&e,g=0,0|(w(0|(d=0)),g)):(g=0,0|(w(0|(d=0)),g))}while(0);if(s){l=0|function(t,e,n,r){return 0|(w((e|=0)+(r|=0)+((n=(t|=0)+(n|=0)>>>0)>>>0<t>>>0|0)>>>0|0),0|n)}(0|(h=0|n),0|(f=p|0&r),-1,-1),n=0|x(),c=u,u=0;do{r=c,c=a>>>31|c<<1,a=u|a<<1,be(0|l,0|n,0|(r=t<<1|r>>>31|0),0|(p=t>>>31|e<<1|0)),u=1&(d=(g=0|x())>>31|((0|g)<0?-1:0)<<1),t=0|be(0|r,0|p,d&h|0,(((0|g)<0?-1:0)>>31|((0|g)<0?-1:0)<<1)&f|0),e=0|x(),s=s-1|0}while(0!=(0|s));l=c,c=0}else l=u,c=0,u=0;return s=0,0|o&&(i[o>>2]=t,i[o+4>>2]=e),g=-2&(a<<1|0)|u,0|(w(0|(d=(0|a)>>>31|(l|s)<<1|0&(s<<1|a>>>31)|c)),g)}function xe(t,e,n,r){var o,a;return a=C,C=C+16|0,we(t|=0,e|=0,n|=0,r|=0,o=0|a),C=a,0|(w(0|i[o+4>>2]),0|i[o>>2])}function Ee(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(w(e>>>n|0),t>>>n|(e&(1<<n)-1)<<32-n):(w(0),e>>>n-32|0)}function Oe(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(w(e<<n|(t&(1<<n)-1<<32-n)>>>32-n|0),t<<n):(w(t<<n-32|0),0)}function Se(t,e){return e=+e,(t=+t)!=t?+e:e!=e?+t:+b(+t,+e)}function Te(t){return(t=+t)>=0?+s(t+.5):+m(t-.5)}function Pe(t,e,n){t|=0,e|=0;var o,a,s=0;if((0|(n|=0))>=8192)return T(0|t,0|e,0|n),0|t;if(a=0|t,o=t+n|0,(3&t)==(3&e)){for(;3&t;){if(!n)return 0|a;r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0,n=n-1|0}for(s=(n=-4&o|0)-64|0;(0|t)<=(0|s);)i[t>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2],i[t+16>>2]=i[e+16>>2],i[t+20>>2]=i[e+20>>2],i[t+24>>2]=i[e+24>>2],i[t+28>>2]=i[e+28>>2],i[t+32>>2]=i[e+32>>2],i[t+36>>2]=i[e+36>>2],i[t+40>>2]=i[e+40>>2],i[t+44>>2]=i[e+44>>2],i[t+48>>2]=i[e+48>>2],i[t+52>>2]=i[e+52>>2],i[t+56>>2]=i[e+56>>2],i[t+60>>2]=i[e+60>>2],t=t+64|0,e=e+64|0;for(;(0|t)<(0|n);)i[t>>2]=i[e>>2],t=t+4|0,e=e+4|0}else for(n=o-4|0;(0|t)<(0|n);)r[t>>0]=0|r[e>>0],r[t+1>>0]=0|r[e+1>>0],r[t+2>>0]=0|r[e+2>>0],r[t+3>>0]=0|r[e+3>>0],t=t+4|0,e=e+4|0;for(;(0|t)<(0|o);)r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0;return 0|a}function Me(t,e,n){e|=0;var o,a=0,s=0,u=0;if(o=(t|=0)+(n|=0)|0,e&=255,(0|n)>=67){for(;3&t;)r[t>>0]=e,t=t+1|0;for(u=e|e<<8|e<<16|e<<24,s=(a=-4&o|0)-64|0;(0|t)<=(0|s);)i[t>>2]=u,i[t+4>>2]=u,i[t+8>>2]=u,i[t+12>>2]=u,i[t+16>>2]=u,i[t+20>>2]=u,i[t+24>>2]=u,i[t+28>>2]=u,i[t+32>>2]=u,i[t+36>>2]=u,i[t+40>>2]=u,i[t+44>>2]=u,i[t+48>>2]=u,i[t+52>>2]=u,i[t+56>>2]=u,i[t+60>>2]=u,t=t+64|0;for(;(0|t)<(0|a);)i[t>>2]=u,t=t+4|0}for(;(0|t)<(0|o);)r[t>>0]=e,t=t+1|0;return o-n|0}function Ce(t){return(t=+t)>=0?+s(t+.5):+m(t-.5)}function Ie(t){t|=0;var e,n,r;return r=0|S(),(0|t)>0&(0|(e=(n=0|i[a>>2])+t|0))<(0|n)|(0|e)<0?(M(0|e),O(12),-1):(0|e)>(0|r)&&!(0|P(0|e))?(O(12),-1):(i[a>>2]=e,0|n)}return{___uremdi3:xe,_bitshift64Lshr:Ee,_bitshift64Shl:Oe,_calloc:Ae,_cellAreaKm2:function(t,e){var n,r,o,a=0;if(o=C,C=C+192|0,r=o,qt(t|=0,e|=0,n=o+168|0),Ht(t,e,r),(0|(e=0|i[r>>2]))>0){if(a=+Mt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1!=(0|e)){t=1;do{a+=+Mt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e))}}else a=0;return C=o,6371.007180918475*a*6371.007180918475},_cellAreaM2:function(t,e){var n,r,o,a=0;if(o=C,C=C+192|0,r=o,qt(t|=0,e|=0,n=o+168|0),Ht(t,e,r),(0|(e=0|i[r>>2]))>0){if(a=+Mt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1!=(0|e)){t=1;do{a+=+Mt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e))}}else a=0;return C=o,6371.007180918475*a*6371.007180918475*1e3*1e3},_cellAreaRads2:function(t,e){var n,r,o,a=0;if(o=C,C=C+192|0,r=o,qt(t|=0,e|=0,n=o+168|0),Ht(t,e,r),(0|(e=0|i[r>>2]))<=0)return C=o,+(a=0);if(a=+Mt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1==(0|e))return C=o,+a;t=1;do{a+=+Mt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e));return C=o,+a},_compact:function(t,e,n){e|=0;var r,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0,w=0,E=0,O=0,S=0;if(!(n|=0))return 0|(O=0);if(o=0|i[(a=t|=0)>>2],!0&0==(15728640&(a=0|i[a+4>>2])|0)){if((0|n)<=0)return 0|(O=0);if(i[(O=e)>>2]=o,i[O+4>>2]=a,1==(0|n))return 0|(O=0);o=1;do{E=0|i[(w=t+(o<<3)|0)+4>>2],i[(O=e+(o<<3)|0)>>2]=i[w>>2],i[O+4>>2]=E,o=o+1|0}while((0|o)!=(0|n));return 0|(o=0)}if(!(E=0|ve(w=n<<3)))return 0|(O=-3);if(Pe(0|E,0|t,0|w),!(r=0|Ae(n,8)))return me(E),0|(O=-3);o=n;t:for(;;){b=0|Ee(0|(h=0|i[(u=E)>>2]),0|(u=0|i[u+4>>2]),52),x(),_=(b&=15)+-1|0,A=(0|o)>0;e:do{if(A){if(m=((0|o)<0)<<31>>31,y=0|Oe(0|_,0,52),v=0|x(),_>>>0>15)for(a=0,t=h,n=u;;){if(!(0==(0|t)&0==(0|n))){if(s=0|Ee(0|t,0|n,52),x(),c=(0|(s&=15))<(0|_),s=(0|s)==(0|_),n=0|xe(0|(f=c?0:s?t:0),0|(t=c?0:s?n:0),0|o,0|m),x(),0==(0|(l=0|i[(c=s=r+(n<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2])))n=f;else for(y=0,g=n,d=c,n=f;;){if((0|y)>(0|o)){O=41;break t}if((0|l)==(0|n)&(-117440513&d|0)==(0|t)){f=0|Ee(0|l,0|d,56),x(),p=(f&=7)+1|0,v=0|Ee(0|l,0|d,45),x();n:do{if(0|N(127&v)){if(l=0|Ee(0|l,0|d,52),x(),!(l&=15)){c=6;break}for(c=1;;){if(!(0==((v=0|Oe(7,0,3*(15-c|0)|0))&n|0)&0==((0|x())&t|0))){c=7;break n}if(!(c>>>0<l>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((f+2|0)>>>0>c>>>0){O=51;break t}v=0|Oe(0|p,0,56),t=0|x()|-117440513&t,i[(c=s)>>2]=0,i[c+4>>2]=0,c=g,n|=v}else c=(g+1|0)%(0|o)|0;if(0==(0|(l=0|i[(d=s=r+(c<<3)|0)>>2]))&0==(0|(d=0|i[d+4>>2])))break;y=y+1|0,g=c}i[(v=s)>>2]=n,i[v+4>>2]=t}if((0|(a=a+1|0))>=(0|o))break e;t=0|i[(n=E+(a<<3)|0)>>2],n=0|i[n+4>>2]}for(a=0,t=h,n=u;;){if(!(0==(0|t)&0==(0|n))){if(c=0|Ee(0|t,0|n,52),x(),(0|(c&=15))>=(0|_)){if((0|c)!=(0|_)&&(t|=y,n=-15728641&n|v,c>>>0>=b>>>0)){s=_;do{g=0|Oe(7,0,3*(14-s|0)|0),s=s+1|0,t|=g,n=0|x()|n}while(s>>>0<c>>>0)}}else t=0,n=0;if(c=0|xe(0|t,0|n,0|o,0|m),x(),!(0==(0|(f=0|i[(l=s=r+(c<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2]))))for(g=0;;){if((0|g)>(0|o)){O=41;break t}if((0|f)==(0|t)&(-117440513&l|0)==(0|n)){p=0|Ee(0|f,0|l,56),x(),d=(p&=7)+1|0,S=0|Ee(0|f,0|l,45),x();n:do{if(0|N(127&S)){if(f=0|Ee(0|f,0|l,52),x(),!(f&=15)){l=6;break}for(l=1;;){if(!(0==((S=0|Oe(7,0,3*(15-l|0)|0))&t|0)&0==((0|x())&n|0))){l=7;break n}if(!(l>>>0<f>>>0)){l=6;break}l=l+1|0}}else l=7}while(0);if((p+2|0)>>>0>l>>>0){O=51;break t}S=0|Oe(0|d,0,56),n=0|x()|-117440513&n,i[(d=s)>>2]=0,i[d+4>>2]=0,t|=S}else c=(c+1|0)%(0|o)|0;if(0==(0|(f=0|i[(l=s=r+(c<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2])))break;g=g+1|0}i[(S=s)>>2]=t,i[S+4>>2]=n}if((0|(a=a+1|0))>=(0|o))break e;t=0|i[(n=E+(a<<3)|0)>>2],n=0|i[n+4>>2]}}}while(0);if((o+5|0)>>>0<11){O=99;break}if(!(v=0|Ae((0|o)/6|0,8))){O=58;break}e:do{if(A){g=0,d=0;do{if(!(0==(0|(a=0|i[(t=c=r+(g<<3)|0)>>2]))&0==(0|(t=0|i[t+4>>2])))){l=0|Ee(0|a,0|t,56),x(),n=(l&=7)+1|0,f=-117440513&t,S=0|Ee(0|a,0|t,45),x();n:do{if(0|N(127&S)){if(p=0|Ee(0|a,0|t,52),x(),0|(p&=15))for(s=1;;){if(!(0==(a&(S=0|Oe(7,0,3*(15-s|0)|0))|0)&0==(f&(0|x())|0)))break n;if(!(s>>>0<p>>>0))break;s=s+1|0}a|=t=0|Oe(0|n,0,56),t=0|x()|f,i[(n=c)>>2]=a,i[n+4>>2]=t,n=l+2|0}}while(0);7==(0|n)&&(i[(S=v+(d<<3)|0)>>2]=a,i[S+4>>2]=-117440513&t,d=d+1|0)}g=g+1|0}while((0|g)!=(0|o));if(A){if(y=((0|o)<0)<<31>>31,p=0|Oe(0|_,0,52),g=0|x(),_>>>0>15)for(t=0,a=0;;){do{if(!(0==(0|h)&0==(0|u))){for(l=0|Ee(0|h,0|u,52),x(),s=(0|(l&=15))<(0|_),l=(0|l)==(0|_),s=0|xe(0|(c=s?0:l?h:0),0|(l=s?0:l?u:0),0|o,0|y),x(),n=0;;){if((0|n)>(0|o)){O=98;break t}if((-117440513&(f=0|i[(S=r+(s<<3)|0)+4>>2])|0)==(0|l)&&(0|i[S>>2])==(0|c)){O=70;break}if((0|i[(S=r+((s=(s+1|0)%(0|o)|0)<<3)|0)>>2])==(0|c)&&(0|i[S+4>>2])==(0|l))break;n=n+1|0}if(70==(0|O)&&(O=0,!0&100663296==(117440512&f|0)))break;i[(S=e+(a<<3)|0)>>2]=h,i[S+4>>2]=u,a=a+1|0}}while(0);if((0|(t=t+1|0))>=(0|o)){o=d;break e}h=0|i[(u=E+(t<<3)|0)>>2],u=0|i[u+4>>2]}for(t=0,a=0;;){do{if(!(0==(0|h)&0==(0|u))){if(l=0|Ee(0|h,0|u,52),x(),(0|(l&=15))>=(0|_))if((0|l)!=(0|_))if(n=h|p,s=-15728641&u|g,l>>>0<b>>>0)l=s;else{c=_;do{S=0|Oe(7,0,3*(14-c|0)|0),c=c+1|0,n|=S,s=0|x()|s}while(c>>>0<l>>>0);l=s}else n=h,l=u;else n=0,l=0;for(c=0|xe(0|n,0|l,0|o,0|y),x(),s=0;;){if((0|s)>(0|o)){O=98;break t}if((-117440513&(f=0|i[(S=r+(c<<3)|0)+4>>2])|0)==(0|l)&&(0|i[S>>2])==(0|n)){O=93;break}if((0|i[(S=r+((c=(c+1|0)%(0|o)|0)<<3)|0)>>2])==(0|n)&&(0|i[S+4>>2])==(0|l))break;s=s+1|0}if(93==(0|O)&&(O=0,!0&100663296==(117440512&f|0)))break;i[(S=e+(a<<3)|0)>>2]=h,i[S+4>>2]=u,a=a+1|0}}while(0);if((0|(t=t+1|0))>=(0|o)){o=d;break e}h=0|i[(u=E+(t<<3)|0)>>2],u=0|i[u+4>>2]}}else a=0,o=d}else a=0,o=0}while(0);if(Me(0|r,0,0|w),Pe(0|E,0|v,o<<3|0),me(v),!o)break;e=e+(a<<3)|0}return 41==(0|O)?(me(E),me(r),0|(S=-1)):51==(0|O)?(me(E),me(r),0|(S=-2)):58==(0|O)?(me(E),me(r),0|(S=-3)):98==(0|O)?(me(v),me(E),me(r),0|(S=-1)):(99==(0|O)&&Pe(0|e,0|E,o<<3|0),me(E),me(r),0|(S=0))},_destroyLinkedPolygon:function(t){var e=0,n=0,r=0,o=0;if(t|=0)for(r=1;;){if(0|(e=0|i[t>>2]))do{if(0|(n=0|i[e>>2]))do{o=n,n=0|i[n+16>>2],me(o)}while(0!=(0|n));o=e,e=0|i[e+8>>2],me(o)}while(0!=(0|e));if(e=t,t=0|i[t+8>>2],r||me(e),!t)break;r=0}},_edgeLengthKm:function(t){return+ +o[20752+((t|=0)<<3)>>3]},_edgeLengthM:function(t){return+ +o[20880+((t|=0)<<3)>>3]},_emscripten_replace_memory:function(t){return r=new Int8Array(t),new Uint8Array(t),i=new Int32Array(t),new Float32Array(t),o=new Float64Array(t),n=t,!0},_exactEdgeLengthKm:function(t,e){var n,r,a=0,s=0,u=0,l=0,p=0,d=0;if(r=C,C=C+176|0,Yt(t|=0,e|=0,n=r),(0|(t=0|i[n>>2]))<=1)return C=r,+(u=0);e=t+-1|0,t=0,a=0,s=+o[n+8>>3],u=+o[n+16>>3];do{p=s,s=+o[n+8+((t=t+1|0)<<4)>>3],d=+h(.5*(s-p)),l=u,u=+o[n+8+(t<<4)+8>>3],l=d*d+(l=+h(.5*(u-l)))*(+f(+p)*+f(+s)*l),a+=2*+v(+ +c(+l),+ +c(+(1-l)))}while((0|t)!=(0|e));return C=r,+(d=6371.007180918475*a)},_exactEdgeLengthM:function(t,e){var n,r,a=0,s=0,u=0,l=0,p=0,d=0;if(r=C,C=C+176|0,Yt(t|=0,e|=0,n=r),(0|(t=0|i[n>>2]))<=1)return C=r,+(u=0);e=t+-1|0,t=0,a=0,s=+o[n+8>>3],u=+o[n+16>>3];do{p=s,s=+o[n+8+((t=t+1|0)<<4)>>3],d=+h(.5*(s-p)),l=u,u=+o[n+8+(t<<4)+8>>3],l=d*d+(l=+h(.5*(u-l)))*(+f(+p)*+f(+s)*l),a+=2*+v(+ +c(+l),+ +c(+(1-l)))}while((0|t)!=(0|e));return C=r,+(d=6371.007180918475*a*1e3)},_exactEdgeLengthRads:function(t,e){var n,r,a=0,s=0,u=0,l=0,p=0,d=0;if(r=C,C=C+176|0,Yt(t|=0,e|=0,n=r),(0|(t=0|i[n>>2]))<=1)return C=r,+(u=0);e=t+-1|0,t=0,a=0,s=+o[n+8>>3],u=+o[n+16>>3];do{p=s,s=+o[n+8+((t=t+1|0)<<4)>>3],d=+h(.5*(s-p)),l=u,u=+o[n+8+(t<<4)+8>>3],l=d*d+(l=+h(.5*(u-l)))*(+f(+s)*+f(+p)*l),a+=2*+v(+ +c(+l),+ +c(+(1-l)))}while((0|t)<(0|e));return C=r,+a},_experimentalH3ToLocalIj:function(t,e,n,r,i){var o,a;return i|=0,a=C,C=C+16|0,(t=0|$t(t|=0,e|=0,n|=0,r|=0,o=a))||(pt(o,i),t=0),C=a,0|t},_experimentalLocalIjToH3:function(t,e,n,r){var i,o;return t|=0,e|=0,r|=0,i=C,C=C+16|0,dt(n|=0,o=i),r=0|te(t,e,o,r),C=i,0|r},_free:me,_geoToH3:Ut,_getDestinationH3IndexFromUnidirectionalEdge:function(t,e){t|=0;var n,r,o=0;return n=C,C=C+16|0,o=n,!0&268435456==(2013265920&(e|=0)|0)?(r=0|Ee(0|t,0|e,56),x(),i[o>>2]=0,o=0|j(t,-2130706433&e|134217728,7&r,o),e=0|x(),w(0|e),C=n,0|o):(o=0,w(0|(e=0)),C=n,0|o)},_getH3IndexesFromUnidirectionalEdge:function(t,e,n){t|=0;var r,o,a,s,u=0;a=C,C=C+16|0,r=a,s=!0&268435456==(2013265920&(e|=0)|0),o=-2130706433&e|134217728,i[(u=n|=0)>>2]=s?t:0,i[u+4>>2]=s?o:0,s?(e=0|Ee(0|t,0|e,56),x(),i[r>>2]=0,t=0|j(t,o,7&e,r),e=0|x()):(t=0,e=0),i[(u=n+8|0)>>2]=t,i[u+4>>2]=e,C=a},_getH3UnidirectionalEdge:function(t,e,n,r){var o,a,s=0,u=0,c=0,l=0,f=0;if(a=C,C=C+16|0,o=a,!(0|Xt(t|=0,e|=0,n|=0,r|=0)))return l=0,w(0|(c=0)),C=a,0|l;for(c=-2130706433&e,s=(s=0==(0|jt(t,e)))?1:2;i[o>>2]=0,u=s+1|0,!((0|(f=0|j(t,e,s,o)))==(0|n)&(0|x())==(0|r));){if(!(u>>>0<7)){s=0,t=0,l=6;break}s=u}return 6==(0|l)?(w(0|s),C=a,0|t):(f=0|Oe(0|s,0,56),l=0|c|x()|268435456,f|=t,w(0|l),C=a,0|f)},_getH3UnidirectionalEdgeBoundary:Yt,_getH3UnidirectionalEdgesFromHexagon:function(t,e,n){n|=0;var r,o=0;r=0==(0|jt(t|=0,e|=0)),e&=-2130706433,i[(o=n)>>2]=r?t:0,i[o+4>>2]=r?285212672|e:0,i[(o=n+8|0)>>2]=t,i[o+4>>2]=301989888|e,i[(o=n+16|0)>>2]=t,i[o+4>>2]=318767104|e,i[(o=n+24|0)>>2]=t,i[o+4>>2]=335544320|e,i[(o=n+32|0)>>2]=t,i[o+4>>2]=352321536|e,i[(n=n+40|0)>>2]=t,i[n+4>>2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(t,e){var n;return t|=0,w(0|((n=!0&268435456==(2013265920&(e|=0)|0))?-2130706433&e|134217728:0)),0|(n?t:0)},_getPentagonIndexes:Wt,_getRes0Indexes:function(t){t|=0;var e=0,n=0,r=0;e=0;do{Oe(0|e,0,45),r=134225919|x(),i[(n=t+(e<<3)|0)>>2]=-1,i[n+4>>2]=r,e=e+1|0}while(122!=(0|e))},_h3Distance:function(t,e,n,r){var i,o,a;return n|=0,r|=0,a=C,C=C+32|0,o=a,t=0==(0|$t(t|=0,e|=0,t,e,i=a+12|0))&&0==(0|$t(t,e,n,r,o))?0|ht(i,o):-1,C=a,0|t},_h3GetBaseCell:Ct,_h3GetFaces:function t(e,n,r){r|=0;var o,a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0;o=C,C=C+128|0,h=o+112|0,u=o+96|0,p=o,s=0|Ee(0|(e|=0),0|(n|=0),52),x(),l=15&s,i[h>>2]=l,c=0|Ee(0|e,0|n,45),x(),c&=127;t:do{if(0|N(c)){if(0|l)for(a=1;;){if(!(0==((f=0|Oe(7,0,3*(15-a|0)|0))&e|0)&0==((0|x())&n|0))){s=0;break t}if(!(a>>>0<l>>>0))break;a=a+1|0}if(!(1&s))return f=0|Oe(l+1|0,0,52),p=0|x()|-15728641&n,t((f|e)&~(h=0|Oe(7,0,3*(14-l|0)|0)),p&~(0|x()),r),void(C=o);s=1}else s=0}while(0);Vt(e,n,u),s?(_t(u,h,p),f=5):(Ot(u,h,p),f=6);t:do{if(0|N(c))if(l)for(a=1;;){if(!(0==((c=0|Oe(7,0,3*(15-a|0)|0))&e|0)&0==((0|x())&n|0))){a=8;break t}if(!(a>>>0<l>>>0)){a=20;break}a=a+1|0}else a=20;else a=8}while(0);if(Me(0|r,-1,0|a),s){s=0;do{for(xt(u=p+(s<<4)|0,0|i[h>>2]),u=0|i[u>>2],a=0;!(-1==(0|(l=0|i[(c=r+(a<<2)|0)>>2]))|(0|l)==(0|u));)a=a+1|0;i[c>>2]=u,s=s+1|0}while((0|s)!=(0|f))}else{s=0;do{for(wt(u=p+(s<<4)|0,0|i[h>>2],0,1),u=0|i[u>>2],a=0;!(-1==(0|(l=0|i[(c=r+(a<<2)|0)>>2]))|(0|l)==(0|u));)a=a+1|0;i[c>>2]=u,s=s+1|0}while((0|s)!=(0|f))}C=o},_h3IndexesAreNeighbors:Xt,_h3IsPentagon:jt,_h3IsResClassIII:function(t,e){return e=0|Ee(0|(t|=0),0|(e|=0),52),x(),1&e|0},_h3IsValid:It,_h3Line:function(t,e,n,r,o){n|=0,r|=0,o|=0;var a,s=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0,w=0,x=0,E=0;if(a=C,C=C+48|0,c=a+12|0,x=a,0==(0|$t(t|=0,e|=0,t,e,s=a+24|0))&&0==(0|$t(t,e,n,r,c))){if((0|(w=0|ht(s,c)))<0)return C=a,0|(x=w);for(i[s>>2]=0,i[s+4>>2]=0,i[s+8>>2]=0,i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,$t(t,e,t,e,s),$t(t,e,n,r,c),gt(s),gt(c),w?(y=+(0|w),_=s,n=p=0|i[s>>2],r=d=0|i[(A=s+4|0)>>2],s=g=0|i[(b=s+8|0)>>2],v=+((0|i[c>>2])-p|0)/y,m=+((0|i[c+4>>2])-d|0)/y,y=+((0|i[c+8>>2])-g|0)/y):(A=r=s+4|0,b=g=s+8|0,_=s,n=0|i[s>>2],r=0|i[r>>2],s=0|i[g>>2],v=0,m=0,y=0),i[x>>2]=n,i[(g=x+4|0)>>2]=r,i[(d=x+8|0)>>2]=s,p=0;;){E=v*(f=+(0|p))+ +(0|n),l=m*f+ +(0|i[A>>2]),f=y*f+ +(0|i[b>>2]),r=~~+Te(+E),c=~~+Te(+l),n=~~+Te(+f),E=+u(+(+(0|r)-E)),l=+u(+(+(0|c)-l)),f=+u(+(+(0|n)-f));do{if(!(E>l&E>f)){if(h=0-r|0,l>f){s=h-n|0;break}s=c,n=h-c|0;break}r=0-(c+n)|0,s=c}while(0);if(i[x>>2]=r,i[g>>2]=s,i[d>>2]=n,yt(x),te(t,e,x,o+(p<<3)|0),(0|p)==(0|w))break;p=p+1|0,n=0|i[_>>2]}return C=a,0|(x=0)}return C=a,0|(x=-1)},_h3LineSize:function(t,e,n,r){var i,o,a;return n|=0,r|=0,a=C,C=C+32|0,o=a,t=0==(0|$t(t|=0,e|=0,t,e,i=a+12|0))&&0==(0|$t(t,e,n,r,o))?0|ht(i,o):-1,C=a,(t>>>31^1)+t|0},_h3SetToLinkedGeo:function(t,e,n){n|=0;var r,o,a,s=0;if(a=C,C=C+32|0,r=a,function(t,e,n){t|=0,n|=0;var r,o,a=0,s=0,u=0,c=0,l=0;if(o=C,C=C+176|0,r=o,(0|(e|=0))<1)return ce(n,0,0),void(C=o);c=0|Ee(0|i[(c=t)>>2],0|i[c+4>>2],52),x(),ce(n,(0|e)>6?e:6,15&c),c=0;do{if(Ht(0|i[(a=t+(c<<3)|0)>>2],0|i[a+4>>2],r),(0|(a=0|i[r>>2]))>0){l=0;do{u=r+8+(l<<4)|0,(s=0|de(n,a=r+8+(((0|(l=l+1|0))%(0|a)|0)<<4)|0,u))?he(n,s):pe(n,u,a),a=0|i[r>>2]}while((0|l)<(0|a))}c=c+1|0}while((0|c)!=(0|e));C=o}(t|=0,e|=0,o=a+16|0),i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,!(t=0|fe(o)))return Kt(n),le(o),void(C=a);do{e=0|Qt(n);do{Zt(e,t),s=t+16|0,i[r>>2]=i[s>>2],i[r+4>>2]=i[s+4>>2],i[r+8>>2]=i[s+8>>2],i[r+12>>2]=i[s+12>>2],he(o,t),t=0|ge(o,r)}while(0!=(0|t));t=0|fe(o)}while(0!=(0|t));Kt(n),le(o),C=a},_h3ToCenterChild:function(t,e,n){n|=0;var r=0,i=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),x(),(0|n)<16&(0|(r&=15))<=(0|n)){if((0|r)!=(0|n)&&(t|=i=0|Oe(0|n,0,52),e=0|x()|-15728641&e,(0|r)<(0|n)))do{i=0|Oe(7,0,3*(14-r|0)|0),r=r+1|0,t&=~i,e&=~(0|x())}while((0|r)<(0|n))}else e=0,t=0;return w(0|e),0|t},_h3ToChildren:kt,_h3ToGeo:qt,_h3ToGeoBoundary:Ht,_h3ToParent:Rt,_h3UnidirectionalEdgeIsValid:function(t,e){var n=0;if(!(!0&268435456==(2013265920&(e|=0)|0)))return 0|(n=0);switch(n=0|Ee(0|(t|=0),0|e,56),x(),7&n){case 0:case 7:return 0|(n=0)}return!0&16777216==(117440512&e|0)&0!=(0|jt(t,n=-2130706433&e|134217728))?0|(n=0):0|(n=0|It(t,n))},_hexAreaKm2:function(t){return+ +o[20496+((t|=0)<<3)>>3]},_hexAreaM2:function(t){return+ +o[20624+((t|=0)<<3)>>3]},_hexRing:function(t,e,n,r){t|=0,e|=0,r|=0;var o,a=0,s=0,u=0,c=0,l=0,f=0,h=0;if(o=C,C=C+16|0,h=o,!(n|=0))return i[(h=r)>>2]=t,i[h+4>>2]=e,C=o,0|(h=0);i[h>>2]=0;t:do{if(0|jt(t,e))t=1;else{if(s=(0|n)>0){a=0,f=t;do{if(0==(0|(f=0|j(f,e,4,h)))&0==(0|(e=0|x()))){t=2;break t}if(a=a+1|0,0|jt(f,e)){t=1;break t}}while((0|a)<(0|n));if(i[(l=r)>>2]=f,i[l+4>>2]=e,l=n+-1|0,s){s=0,u=1,a=f,t=e;do{if(0==(0|(a=0|j(a,t,2,h)))&0==(0|(t=0|x()))){t=2;break t}if(i[(c=r+(u<<3)|0)>>2]=a,i[c+4>>2]=t,u=u+1|0,0|jt(a,t)){t=1;break t}s=s+1|0}while((0|s)<(0|n));c=0,s=u;do{if(0==(0|(a=0|j(a,t,3,h)))&0==(0|(t=0|x()))){t=2;break t}if(i[(u=r+(s<<3)|0)>>2]=a,i[u+4>>2]=t,s=s+1|0,0|jt(a,t)){t=1;break t}c=c+1|0}while((0|c)<(0|n));u=0;do{if(0==(0|(a=0|j(a,t,1,h)))&0==(0|(t=0|x()))){t=2;break t}if(i[(c=r+(s<<3)|0)>>2]=a,i[c+4>>2]=t,s=s+1|0,0|jt(a,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));u=0;do{if(0==(0|(a=0|j(a,t,5,h)))&0==(0|(t=0|x()))){t=2;break t}if(i[(c=r+(s<<3)|0)>>2]=a,i[c+4>>2]=t,s=s+1|0,0|jt(a,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));u=0;do{if(0==(0|(a=0|j(a,t,4,h)))&0==(0|(t=0|x()))){t=2;break t}if(i[(c=r+(s<<3)|0)>>2]=a,i[c+4>>2]=t,s=s+1|0,0|jt(a,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));for(u=0;;){if(0==(0|(a=0|j(a,t,6,h)))&0==(0|(t=0|x()))){t=2;break t}if((0|u)!=(0|l)){if(i[(c=r+(s<<3)|0)>>2]=a,i[c+4>>2]=t,0|jt(a,t)){t=1;break t}s=s+1|0}if((0|(u=u+1|0))>=(0|n)){u=f,s=e;break}}}else u=f,a=f,s=e,t=e}else i[(u=r)>>2]=t,i[u+4>>2]=e,u=t,a=t,s=e,t=e;t=1&((0|u)!=(0|a)|(0|s)!=(0|t))}}while(0);return C=o,0|(h=t)},_i64Subtract:be,_kRing:I,_kRingDistances:function(t,e,n,r,i){var o;if(0|R(t|=0,e|=0,n|=0,r|=0,i|=0)){if(Me(0|r,0,(o=1+(0|A(3*n|0,n+1|0))|0)<<3|0),0|i)return Me(0|i,0,o<<2|0),void k(t,e,n,r,i,o,0);(i=0|Ae(o,4))&&(k(t,e,n,r,i,o,0),me(i))}},_llvm_minnum_f64:Se,_llvm_round_f64:Te,_malloc:ve,_maxFaceCount:function(t,e){var n=0,r=0;if(r=0|Ee(0|(t|=0),0|(e|=0),45),x(),!(0|N(127&r)))return 0|(r=2);if(r=0|Ee(0|t,0|e,52),x(),!(r&=15))return 0|(r=5);for(n=1;;){if(!(0==((0|Oe(7,0,3*(15-n|0)|0))&t|0)&0==((0|x())&e|0))){n=2,t=6;break}if(!(n>>>0<r>>>0)){n=5,t=6;break}n=n+1|0}return 6==(0|t)?0|n:0},_maxH3ToChildrenSize:function(t,e,n){return n|=0,t=0|Ee(0|(t|=0),0|(e|=0),52),x(),(0|n)<16&(0|(t&=15))<=(0|n)?0|(n=0|ee(7,n-t|0)):0|(n=0)},_maxKringSize:function(t){return 1+(0|A(3*(t|=0)|0,t+1|0))|0},_maxPolyfillSize:function(t,e){e|=0;var n,r=0,o=0,a=0,s=0,u=0;if(n=C,C=C+48|0,a=n+8|0,o=n,s=0|i[(u=t|=0)+4>>2],i[(r=o)>>2]=i[u>>2],i[r+4>>2]=s,re(o,a),a=0|H(a,e),e=0|i[o>>2],(0|(o=0|i[t+8>>2]))<=0)return C=n,0|(u=(u=(s=(0|a)<(0|(u=e)))?u:a)+12|0);r=0|i[t+12>>2],t=0;do{e=(0|i[r+(t<<3)>>2])+e|0,t=t+1|0}while((0|t)<(0|o));return C=n,0|(u=(u=(u=(0|a)<(0|e))?e:a)+12|0)},_maxUncompactSize:function(t,e,n){t|=0,n|=0;var r=0,o=0,a=0,s=0;if((0|(e|=0))<=0)return 0|(n=0);if((0|n)>=16){for(r=0;;){if(!(0==(0|i[(s=t+(r<<3)|0)>>2])&0==(0|i[s+4>>2]))){r=-1,o=13;break}if((0|(r=r+1|0))>=(0|e)){r=0,o=13;break}}if(13==(0|o))return 0|r}r=0,s=0;t:for(;;){a=0|i[(o=t+(s<<3)|0)>>2],o=0|i[o+4>>2];do{if(!(0==(0|a)&0==(0|o))){if(o=0|Ee(0|a,0|o,52),x(),(0|(o&=15))>(0|n)){r=-1,o=13;break t}if((0|o)==(0|n)){r=r+1|0;break}r=(0|ee(7,n-o|0))+r|0;break}}while(0);if((0|(s=s+1|0))>=(0|e)){o=13;break}}return 13==(0|o)?0|r:0},_memcpy:Pe,_memset:Me,_numHexagons:function(t){var e;return t=0|i[(e=21008+((t|=0)<<3)|0)>>2],w(0|i[e+4>>2]),0|t},_pentagonIndexCount:function(){return 12},_pointDistKm:Pt,_pointDistM:function(t,e){t|=0;var n,r,i,a=0;return r=+o[(e|=0)>>3],n=+o[t>>3],a=(i=+h(.5*(r-n)))*i+(a=+h(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+f(+r)*+f(+n)*a),2*+v(+ +c(+a),+ +c(+(1-a)))*6371.007180918475*1e3},_pointDistRads:function(t,e){t|=0;var n,r,i,a=0;return r=+o[(e|=0)>>3],n=+o[t>>3],a=(i=+h(.5*(r-n)))*i+(a=+h(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+f(+r)*+f(+n)*a),2*+v(+ +c(+a),+ +c(+(1-a)))},_polyfill:function(t,e,n){var r,o=0,a=0,s=0,u=0,c=0;if(r=C,C=C+48|0,o=r+8|0,a=r,0|function(t,e,n){e|=0,n|=0;var r=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,A=0,b=0,_=0,w=0,O=0,S=0,T=0,P=0,M=0,I=0,j=0,N=0,D=0,F=0,B=0;B=C,C=C+112|0,j=B+80|0,c=B+72|0,N=B,D=B+56|0,(F=0|ve(32+(i[(l=(t=t|0)+8|0)>>2]<<5)|0))||E(22848,22448,800,22456);if(ie(t,F),r=0|i[(a=t)+4>>2],i[(u=c)>>2]=i[a>>2],i[u+4>>2]=r,re(c,j),u=0|H(j,e),r=0|i[c>>2],(0|(a=0|i[l>>2]))>0){s=0|i[t+12>>2],o=0;do{r=(0|i[s+(o<<3)>>2])+r|0,o=o+1|0}while((0|o)!=(0|a))}if(o=0|Ae(I=(u=(0|u)<(0|r)?r:u)+12|0,8),f=0|Ae(I,8),i[j>>2]=0,M=0|i[(P=t)+4>>2],i[(r=c)>>2]=i[P>>2],i[r+4>>2]=M,0|(r=0|L(c,I,e,j,o,f)))return me(o),me(f),me(F),C=B,0|(F=r);t:do{if((0|i[l>>2])>0){for(a=t+12|0,r=0;s=0|L((0|i[a>>2])+(r<<3)|0,I,e,j,o,f),r=r+1|0,!(0|s);)if((0|r)>=(0|i[l>>2]))break t;return me(o),me(f),me(F),C=B,0|(F=s)}}while(0);(0|u)>-12&&Me(0|f,0,((0|I)>1?I:1)<<3|0);t:do{if((0|i[j>>2])>0){M=((0|I)<0)<<31>>31,_=o,w=f,O=o,S=o,T=f,P=o,r=o,v=o,m=f,A=f,b=f,o=f;e:for(;;){for(y=0|i[j>>2],d=0,g=0,a=0;;){u=(s=N)+56|0;do{i[s>>2]=0,s=s+4|0}while((0|s)<(0|u));if(0|R(c=0|i[(e=_+(d<<3)|0)>>2],e=0|i[e+4>>2],1,N,0)){u=(s=N)+56|0;do{i[s>>2]=0,s=s+4|0}while((0|s)<(0|u));0|(s=0|Ae(7,4))&&(k(c,e,1,N,s,7,0),me(s))}p=0;do{f=0|i[(h=N+(p<<3)|0)>>2],h=0|i[h+4>>2];n:do{if(!(0==(0|f)&0==(0|h))){if(c=0|xe(0|f,0|h,0|I,0|M),x(),!(0==(0|(e=0|i[(u=s=n+(c<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2]))))for(l=0;;){if((0|l)>(0|I))break e;if((0|e)==(0|f)&(0|u)==(0|h))break n;if(0==(0|(e=0|i[(u=s=n+((c=(c+1|0)%(0|I)|0)<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2])))break;l=l+1|0}0==(0|f)&0==(0|h)||(qt(f,h,D),0|oe(t,F,D)&&(i[(l=s)>>2]=f,i[l+4>>2]=h,i[(l=w+(a<<3)|0)>>2]=f,i[l+4>>2]=h,a=a+1|0))}}while(0);p=p+1|0}while(p>>>0<7);if((0|(g=g+1|0))>=(0|y))break;d=d+1|0}if((0|y)>0&&Me(0|O,0,y<<3|0),i[j>>2]=a,!((0|a)>0))break t;f=o,h=b,p=P,d=A,g=m,y=w,o=v,b=r,A=S,m=O,v=f,r=h,P=T,T=p,S=d,O=g,w=_,_=y}return me(S),me(T),me(F),C=B,0|(F=-1)}r=f}while(0);return me(F),me(o),me(r),C=B,0|(F=0)}(t|=0,e|=0,n|=0)){if(s=0|i[(c=t)+4>>2],i[(u=a)>>2]=i[c>>2],i[u+4>>2]=s,re(a,o),u=0|H(o,e),e=0|i[a>>2],(0|(s=0|i[t+8>>2]))>0){a=0|i[t+12>>2],o=0;do{e=(0|i[a+(o<<3)>>2])+e|0,o=o+1|0}while((0|o)!=(0|s))}(0|(e=(0|u)<(0|e)?e:u))<=-12||Me(0|n,0,8+(((0|(c=e+11|0))>0?c:0)<<3)|0),C=r}else C=r},_res0IndexCount:function(){return 122},_round:Ce,_sbrk:Ie,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(t,e,n,r,o){t|=0,n|=0,r|=0,o|=0;var a=0,s=0,u=0,c=0,l=0,f=0;if((0|(e|=0))<=0)return 0|(o=0);if((0|o)>=16){for(a=0;;){if(!(0==(0|i[(f=t+(a<<3)|0)>>2])&0==(0|i[f+4>>2]))){a=14;break}if((0|(a=a+1|0))>=(0|e)){s=0,a=16;break}}if(14==(0|a))return 0|((0|r)>0?-2:-1);if(16==(0|a))return 0|s}a=0,f=0;t:for(;;){s=0|i[(u=l=t+(f<<3)|0)>>2],u=0|i[u+4>>2];do{if(!(0==(0|s)&0==(0|u))){if((0|a)>=(0|r)){s=-1,a=16;break t}if(c=0|Ee(0|s,0|u,52),x(),(0|(c&=15))>(0|o)){s=-2,a=16;break t}if((0|c)==(0|o)){i[(l=n+(a<<3)|0)>>2]=s,i[l+4>>2]=u,a=a+1|0;break}if((0|(s=(0|ee(7,o-c|0))+a|0))>(0|r)){s=-1,a=16;break t}kt(0|i[l>>2],0|i[l+4>>2],o,n+(a<<3)|0),a=s}}while(0);if((0|(f=f+1|0))>=(0|e)){s=0,a=16;break}}return 16==(0|a)?0|s:0},establishStackSpace:function(t,e){C=t|=0},stackAlloc:function(t){var e;return e=C,C=(C=C+(t|=0)|0)+15&-16,0|e},stackRestore:function(t){C=t|=0},stackSave:function(){return 0|C}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:ut,b:function(t){c=t},c:l,d:function(t,e,n,r){ut("Assertion failed: "+g(t)+", at: "+[e?g(e):"unknown filename",n,r?g(r):"unknown function"])},e:function(t){return n.___errno_location&&(b[n.___errno_location()>>2]=t),t},f:W,g:function(t,e,n){m.set(m.subarray(e,e+n),t)},h:function(t){var e=W(),n=16777216,r=2130706432;if(t>r)return!1;for(var i=Math.max(e,16777216);i<t;)i=i<=536870912?x(2*i,n):Math.min(x((3*i+2147483648)/4,n),r);return!!X(i)},i:function(t){ut("OOM")},j:V,k:q,l:X,m:H,n:function(){var t=H();return n.extraStackTrace&&(t+="\n"+n.extraStackTrace()),q(t)},o:24032,p:24016},y),$=(n.___uremdi3=J.___uremdi3,n._bitshift64Lshr=J._bitshift64Lshr,n._bitshift64Shl=J._bitshift64Shl,n._calloc=J._calloc,n._cellAreaKm2=J._cellAreaKm2,n._cellAreaM2=J._cellAreaM2,n._cellAreaRads2=J._cellAreaRads2,n._compact=J._compact,n._destroyLinkedPolygon=J._destroyLinkedPolygon,n._edgeLengthKm=J._edgeLengthKm,n._edgeLengthM=J._edgeLengthM,n._emscripten_replace_memory=J._emscripten_replace_memory),tt=(n._exactEdgeLengthKm=J._exactEdgeLengthKm,n._exactEdgeLengthM=J._exactEdgeLengthM,n._exactEdgeLengthRads=J._exactEdgeLengthRads,n._experimentalH3ToLocalIj=J._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=J._experimentalLocalIjToH3,n._free=J._free,n._geoToH3=J._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=J._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=J._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=J._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=J._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=J._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=J._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=J._getPentagonIndexes,n._getRes0Indexes=J._getRes0Indexes,n._h3Distance=J._h3Distance,n._h3GetBaseCell=J._h3GetBaseCell,n._h3GetFaces=J._h3GetFaces,n._h3IndexesAreNeighbors=J._h3IndexesAreNeighbors,n._h3IsPentagon=J._h3IsPentagon,n._h3IsResClassIII=J._h3IsResClassIII,n._h3IsValid=J._h3IsValid,n._h3Line=J._h3Line,n._h3LineSize=J._h3LineSize,n._h3SetToLinkedGeo=J._h3SetToLinkedGeo,n._h3ToCenterChild=J._h3ToCenterChild,n._h3ToChildren=J._h3ToChildren,n._h3ToGeo=J._h3ToGeo,n._h3ToGeoBoundary=J._h3ToGeoBoundary,n._h3ToParent=J._h3ToParent,n._h3UnidirectionalEdgeIsValid=J._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=J._hexAreaKm2,n._hexAreaM2=J._hexAreaM2,n._hexRing=J._hexRing,n._i64Subtract=J._i64Subtract,n._kRing=J._kRing,n._kRingDistances=J._kRingDistances,n._llvm_minnum_f64=J._llvm_minnum_f64,n._llvm_round_f64=J._llvm_round_f64,n._malloc=J._malloc,n._maxFaceCount=J._maxFaceCount,n._maxH3ToChildrenSize=J._maxH3ToChildrenSize,n._maxKringSize=J._maxKringSize,n._maxPolyfillSize=J._maxPolyfillSize,n._maxUncompactSize=J._maxUncompactSize,n._memcpy=J._memcpy,n._memset=J._memset,n._numHexagons=J._numHexagons,n._pentagonIndexCount=J._pentagonIndexCount,n._pointDistKm=J._pointDistKm,n._pointDistM=J._pointDistM,n._pointDistRads=J._pointDistRads,n._polyfill=J._polyfill,n._res0IndexCount=J._res0IndexCount,n._round=J._round,n._sbrk=J._sbrk,n._sizeOfCoordIJ=J._sizeOfCoordIJ,n._sizeOfGeoBoundary=J._sizeOfGeoBoundary,n._sizeOfGeoCoord=J._sizeOfGeoCoord,n._sizeOfGeoPolygon=J._sizeOfGeoPolygon,n._sizeOfGeofence=J._sizeOfGeofence,n._sizeOfH3Index=J._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=J._sizeOfLinkedGeoPolygon,n._uncompact=J._uncompact,n.establishStackSpace=J.establishStackSpace,n.stackAlloc=J.stackAlloc),et=n.stackRestore=J.stackRestore,nt=n.stackSave=J.stackSave;if(n.asm=J,n.cwrap=function(t,e,n,r){var i=(n=n||[]).every((function(t){return"number"===t}));return"string"!==e&&i&&!r?h(t):function(){return p(t,e,n,arguments)}},n.setValue=function(t,e,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":v[t>>0]=e;break;case"i16":A[t>>1]=e;break;case"i32":b[t>>2]=e;break;case"i64":B=[e>>>0,(F=e,+I(F)>=1?F>0?(0|j(+k(F/4294967296),4294967295))>>>0:~~+R((F-+(~~F>>>0))/4294967296)>>>0:0)],b[t>>2]=B[0],b[t+4>>2]=B[1];break;case"float":_[t>>2]=e;break;case"double":w[t>>3]=e;break;default:ut("invalid type for setValue: "+n)}},n.getValue=function(t,e,n){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return v[t>>0];case"i16":return A[t>>1];case"i32":case"i64":return b[t>>2];case"float":return _[t>>2];case"double":return w[t>>3];default:ut("invalid type for getValue: "+e)}return null},n.getTempRet0=l,z){G(z)||(Z=z,z=n.locateFile?n.locateFile(Z,a):a+Z),L++,n.monitorRunDependencies&&n.monitorRunDependencies(L);var rt=function(t){t.byteLength&&(t=new Uint8Array(t)),m.set(t,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(t){if(L--,n.monitorRunDependencies&&n.monitorRunDependencies(L),0==L&&(null!==N&&(clearInterval(N),N=null),D)){var e=D;D=null,e()}}()},it=function(){i(z,rt,(function(){throw"could not load memory initializer "+z}))},ot=Q(z);if(ot)rt(ot.buffer);else if(n.memoryInitializerRequest){var at=function(){var t=n.memoryInitializerRequest,e=t.response;if(200!==t.status&&0!==t.status){var r=Q(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+t.status+", retrying "+z),void it();e=r.buffer}rt(e)};n.memoryInitializerRequest.response?setTimeout(at,0):n.memoryInitializerRequest.addEventListener("load",at)}else it()}function st(t){function e(){K||(K=!0,f||(S(P),S(M),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),C.unshift(t);var t;S(C)}()))}t=t||o,L>0||(!function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),T.unshift(t);var t;S(T)}(),L>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}function ut(t){throw n.onAbort&&n.onAbort(t),s(t+=""),u(t),f=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(D=function t(){K||st(),K||(D=t)},n.run=st,n.abort=ut,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return st(),t}("object"===typeof r?r:{}),i="number",o={};[["sizeOfH3Index",i],["sizeOfGeoCoord",i],["sizeOfGeoBoundary",i],["sizeOfGeoPolygon",i],["sizeOfGeofence",i],["sizeOfLinkedGeoPolygon",i],["sizeOfCoordIJ",i],["h3IsValid",i,[i,i]],["geoToH3",i,[i,i,i]],["h3ToGeo",null,[i,i,i]],["h3ToGeoBoundary",null,[i,i,i]],["maxKringSize",i,[i]],["kRing",null,[i,i,i,i]],["kRingDistances",null,[i,i,i,i,i]],["hexRing",null,[i,i,i,i]],["maxPolyfillSize",i,[i,i]],["polyfill",null,[i,i,i]],["h3SetToLinkedGeo",null,[i,i,i]],["destroyLinkedPolygon",null,[i]],["compact",i,[i,i,i]],["uncompact",i,[i,i,i,i,i]],["maxUncompactSize",i,[i,i,i]],["h3IsPentagon",i,[i,i]],["h3IsResClassIII",i,[i,i]],["h3GetBaseCell",i,[i,i]],["maxFaceCount",i,[i,i]],["h3GetFaces",null,[i,i,i]],["h3ToParent",i,[i,i,i]],["h3ToChildren",null,[i,i,i,i]],["h3ToCenterChild",i,[i,i,i]],["maxH3ToChildrenSize",i,[i,i,i]],["h3IndexesAreNeighbors",i,[i,i,i,i]],["getH3UnidirectionalEdge",i,[i,i,i,i]],["getOriginH3IndexFromUnidirectionalEdge",i,[i,i]],["getDestinationH3IndexFromUnidirectionalEdge",i,[i,i]],["h3UnidirectionalEdgeIsValid",i,[i,i]],["getH3IndexesFromUnidirectionalEdge",null,[i,i,i]],["getH3UnidirectionalEdgesFromHexagon",null,[i,i,i]],["getH3UnidirectionalEdgeBoundary",null,[i,i,i]],["h3Distance",i,[i,i,i,i]],["h3Line",i,[i,i,i,i,i]],["h3LineSize",i,[i,i,i,i]],["experimentalH3ToLocalIj",i,[i,i,i,i,i]],["experimentalLocalIjToH3",i,[i,i,i,i]],["hexAreaM2",i,[i]],["hexAreaKm2",i,[i]],["edgeLengthM",i,[i]],["edgeLengthKm",i,[i]],["pointDistM",i,[i,i]],["pointDistKm",i,[i,i]],["pointDistRads",i,[i,i]],["cellAreaM2",i,[i,i]],["cellAreaKm2",i,[i,i]],["cellAreaRads2",i,[i,i]],["exactEdgeLengthM",i,[i,i]],["exactEdgeLengthKm",i,[i,i]],["exactEdgeLengthRads",i,[i,i]],["numHexagons",i,[i]],["getRes0Indexes",null,[i]],["res0IndexCount",i],["getPentagonIndexes",null,[i,i]],["pentagonIndexCount",i]].forEach((function(t){o[t[0]]=r.cwrap.apply(r,t)}));var a=16,s=o.sizeOfH3Index(),u=o.sizeOfGeoCoord(),c=o.sizeOfGeoBoundary(),l=o.sizeOfGeoPolygon(),f=o.sizeOfGeofence(),h=o.sizeOfLinkedGeoPolygon(),p=o.sizeOfCoordIJ(),d={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function g(t){if("number"!==typeof t||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}var y=/[^0-9a-fA-F]/;function v(t){if(Array.isArray(t)&&2===t.length&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if("string"!==typeof t||y.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),a);return[parseInt(t.substring(t.length-8),a),e]}function m(t){if(t>=0)return t.toString(a);var e=b(8,(t&=2147483647).toString(a));return e=(parseInt(e[0],a)+8).toString(a)+e.substring(1)}function A(t,e){return m(e)+b(8,m(t))}function b(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r+=e}function _(t,e,n){for(var i=t.length,o=r._calloc(i,u),a=n?1:0,s=n?0:1,c=0;c<2*i;c+=2)r.HEAPF64.set([t[c/2][a],t[c/2][s]].map(mt),o/8+c);return r.HEAPU32.set([i,o],e/4),e}function w(t){return[t,r.getTempRet0()]}function x(t){var e=w(t),n=e[0],r=e[1];return r?A(n,r):null}function E(t,e){void 0===e&&(e=0);var n=r.getValue(t+4*e*2,"i32"),i=r.getValue(t+4*(2*e+1),"i32");return i?A(n,i):null}function O(t,e,n){r.HEAPU32.set(v(t),e/4+2*n)}function S(t,e){for(var n=[],r=0;r<e;r++){var i=E(t,r);null!==i&&n.push(i)}return n}function T(t,e){for(var n=e.length,r=0;r<n;r++)O(e[r],t,r)}function P(t,e){var n=r._calloc(1,u);return r.HEAPF64.set([t,e].map(mt),n/8),n}function M(t){return At(r.getValue(t,"double"))}function C(t){return[M(t),M(t+8)]}function I(t){return[M(t+8),M(t)]}function R(t,e,n){for(var i=r.getValue(t,"i32"),o=t+8,a=[],s=e?I:C,u=0;u<2*i;u+=2)a.push(s(o+8*u));return n&&a.push(a[0]),a}function k(t){var e=v(t),n=e[0],r=e[1];return Boolean(o.h3IsValid(n,r))}function j(t){var e=v(t),n=e[0],r=e[1];return Boolean(o.h3IsPentagon(n,r))}function L(t){var e=v(t),n=e[0],r=e[1];return Boolean(o.h3IsResClassIII(n,r))}function N(t){var e=v(t),n=e[0],r=e[1];return o.h3GetBaseCell(n,r)}function D(t){var e=v(t),n=e[0],i=e[1],a=o.maxFaceCount(n,i),s=r._malloc(4*a);o.h3GetFaces(n,i,s);var u=function(t,e){for(var n=[],i=0;i<e;i++){var o=r.getValue(t+4*i,"i32");o>=0&&n.push(o)}return n}(s,a);return r._free(s),u}function F(t){return"string"!==typeof t?-1:parseInt(t.charAt(1),a)}function B(t,e,n){var i=r._malloc(u);r.HEAPF64.set([t,e].map(mt),i/8);var a=x(o.geoToH3(i,n));return r._free(i),a}function z(t){var e=r._malloc(u),n=v(t),i=n[0],a=n[1];o.h3ToGeo(i,a,e);var s=C(e);return r._free(e),s}function U(t,e){var n=r._malloc(c),i=v(t),a=i[0],s=i[1];o.h3ToGeoBoundary(a,s,n);var u=R(n,e,e);return r._free(n),u}function G(t,e){var n=v(t),r=n[0],i=n[1];return x(o.h3ToParent(r,i,e))}function V(t,e){if(!k(t))return[];var n=v(t),i=n[0],a=n[1],u=o.maxH3ToChildrenSize(i,a,e),c=r._calloc(u,s);o.h3ToChildren(i,a,e,c);var l=S(c,u);return r._free(c),l}function q(t,e){var n=v(t),r=n[0],i=n[1];return x(o.h3ToCenterChild(r,i,e))}function H(t,e){var n=v(t),i=n[0],a=n[1],u=o.maxKringSize(e),c=r._calloc(u,s);o.kRing(i,a,e,c);var l=S(c,u);return r._free(c),l}function W(t,e){var n=v(t),i=n[0],a=n[1],u=o.maxKringSize(e),c=r._calloc(u,s),l=r._calloc(u,4);o.kRingDistances(i,a,e,c,l);for(var f=[],h=0;h<e+1;h++)f.push([]);for(var p=0;p<2*u;p+=2){var d=r.getValue(c+4*p,"i32"),g=r.getValue(c+4*(p+1),"i32"),y=r.getValue(l+p/2*4,"i32");0===d&&0===g||f[y].push(A(d,g))}return r._free(c),r._free(l),f}function X(t,e){var n=0===e?1:6*e,i=r._calloc(n,s);if(0!==o.hexRing.apply(o,v(t).concat([e],[i])))throw r._free(i),new Error("Failed to get hexRing (encountered a pentagon?)");var a=S(i,n);return r._free(i),a}function Y(t,e,n){if(g(e),n=Boolean(n),0===t.length||0===t[0].length)return[];"number"===typeof t[0][0]&&(t=[t]);var i=function(t,e){var n,i=t.length-1,o=r._calloc(l),a=0+f,s=a+4;if(_(t[0],o+0,e),i>0){n=r._calloc(i,f);for(var u=0;u<i;u++)_(t[u+1],n+f*u,e)}return r.setValue(o+a,i,"i32"),r.setValue(o+s,n,"i32"),o}(t,n),a=o.maxPolyfillSize(i,e),u=r._calloc(a,s);o.polyfill(i,e,u);var c=S(u,a);return r._free(u),function(t){var e=0+f,n=e+4;r._free(r.getValue(t+0,"i8*"));for(var i=r.getValue(t+e,"i32"),o=0;o<i;o++)r._free(r.getValue(t+n+f*o,"i8*"));r._free(t)}(i),c}function Q(t,e){if(!t||!t.length)return[];var n=t.length,i=r._calloc(n,s);T(i,t);var a=r._calloc(h),u=a;o.h3SetToLinkedGeo(i,n,a);var c=function(t,e){for(var n,i,o,a,s=[],u=e?I:C;t;){for(s.push(n=[]),i=r.getValue(t,"i8*");i;){for(n.push(o=[]),a=r.getValue(i,"i8*");a;)o.push(u(a)),a=r.getValue(a+16,"i8*");e&&o.push(o[0]),i=r.getValue(i+8,"i8*")}t=r.getValue(t+8,"i8*")}return s}(a,e);return o.destroyLinkedPolygon(u),r._free(u),r._free(i),c}function Z(t){if(!t||!t.length)return[];var e=t.length,n=r._calloc(e,s);T(n,t);var i=r._calloc(e,s);if(0!==o.compact(n,i,e))throw r._free(n),r._free(i),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var a=S(i,e);return r._free(n),r._free(i),a}function K(t,e){if(g(e),!t||!t.length)return[];var n=t.length,i=r._calloc(n,s);T(i,t);var a=o.maxUncompactSize(i,n,e),u=r._calloc(a,s);if(0!==o.uncompact(i,n,u,a,e))throw r._free(i),r._free(u),new Error("Failed to uncompact (bad resolution?)");var c=S(u,a);return r._free(i),r._free(u),c}function J(t,e){var n=v(t),r=n[0],i=n[1],a=v(e),s=a[0],u=a[1];return Boolean(o.h3IndexesAreNeighbors(r,i,s,u))}function $(t,e){var n=v(t),r=n[0],i=n[1],a=v(e),s=a[0],u=a[1];return x(o.getH3UnidirectionalEdge(r,i,s,u))}function tt(t){var e=v(t),n=e[0],r=e[1];return x(o.getOriginH3IndexFromUnidirectionalEdge(n,r))}function et(t){var e=v(t),n=e[0],r=e[1];return x(o.getDestinationH3IndexFromUnidirectionalEdge(n,r))}function nt(t){var e=v(t),n=e[0],r=e[1];return Boolean(o.h3UnidirectionalEdgeIsValid(n,r))}function rt(t){var e=v(t),n=e[0],i=e[1],a=r._calloc(2,s);o.getH3IndexesFromUnidirectionalEdge(n,i,a);var u=S(a,2);return r._free(a),u}function it(t){var e=v(t),n=e[0],i=e[1],a=r._calloc(6,s);o.getH3UnidirectionalEdgesFromHexagon(n,i,a);var u=S(a,6);return r._free(a),u}function ot(t,e){var n=r._malloc(c),i=v(t),a=i[0],s=i[1];o.getH3UnidirectionalEdgeBoundary(a,s,n);var u=R(n,e);return r._free(n),u}function at(t,e){var n=v(t),r=n[0],i=n[1],a=v(e),s=a[0],u=a[1];return o.h3Distance(r,i,s,u)}function st(t,e){var n=v(t),i=n[0],a=n[1],u=v(e),c=u[0],l=u[1],f=o.h3LineSize(i,a,c,l);if(f<0)throw new Error("Line cannot be calculated");var h=r._calloc(f,s);o.h3Line(i,a,c,l,h);var p=S(h,f);return r._free(h),p}function ut(t,e){var n,i=r._malloc(p),a=o.experimentalH3ToLocalIj.apply(o,v(t).concat(v(e),[i])),s=(n=i,{i:r.getValue(n,"i32"),j:r.getValue(n+4,"i32")});switch(r._free(i),a){case 0:return s;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function ct(t,e){if(!e||"number"!==typeof e.i||"number"!==typeof e.j)throw new Error("Coordinates must be provided as an {i, j} object");var n=r._malloc(p),i=r._malloc(s);!function(t,e){var n=e.i,i=e.j;r.setValue(t,n,"i32"),r.setValue(t+4,i,"i32")}(n,e);var a=o.experimentalLocalIjToH3.apply(o,v(t).concat([n],[i])),u=E(i);if(r._free(n),r._free(i),0!==a)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return u}function lt(t,e,n){var i,a=P(t[0],t[1]),s=P(e[0],e[1]);switch(n){case d.m:i=o.pointDistM(a,s);break;case d.km:i=o.pointDistKm(a,s);break;case d.rads:i=o.pointDistRads(a,s);break;default:i=null}if(r._free(a),r._free(s),null===i)throw new Error("Unknown unit: "+n);return i}function ft(t,e){var n=v(t),r=n[0],i=n[1];switch(e){case d.m2:return o.cellAreaM2(r,i);case d.km2:return o.cellAreaKm2(r,i);case d.rads2:return o.cellAreaRads2(r,i);default:throw new Error("Unknown unit: "+e)}}function ht(t,e){var n=v(t),r=n[0],i=n[1];switch(e){case d.m:return o.exactEdgeLengthM(r,i);case d.km:return o.exactEdgeLengthKm(r,i);case d.rads:return o.exactEdgeLengthRads(r,i);default:throw new Error("Unknown unit: "+e)}}function pt(t,e){switch(g(t),e){case d.m2:return o.hexAreaM2(t);case d.km2:return o.hexAreaKm2(t);default:throw new Error("Unknown unit: "+e)}}function dt(t,e){switch(g(t),e){case d.m:return o.edgeLengthM(t);case d.km:return o.edgeLengthKm(t);default:throw new Error("Unknown unit: "+e)}}function gt(t){g(t);var e=w(o.numHexagons(t)),n=e[0],r=e[1];return r?r*Math.pow(2,32)+n:n}function yt(){var t=o.res0IndexCount(),e=r._malloc(s*t);o.getRes0Indexes(e);var n=S(e,t);return r._free(e),n}function vt(t){g(t);var e=o.pentagonIndexCount(),n=r._malloc(s*e);o.getPentagonIndexes(t,n);var i=S(n,e);return r._free(n),i}function mt(t){return t*Math.PI/180}function At(t){return 180*t/Math.PI}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(250),i={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o=Object.freeze({});function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=void 0,c=Array.isArray(t),l=[t],f=-1,h=[],p=void 0,d=void 0,g=void 0,y=[],v=[],m=t;do{var A=++f===l.length,b=A&&0!==h.length;if(A){if(d=0===v.length?void 0:y[y.length-1],p=g,g=v.pop(),b){if(c)p=p.slice();else{for(var _={},w=0,x=Object.keys(p);w<x.length;w++){var E=x[w];_[E]=p[E]}p=_}for(var O=0,S=0;S<h.length;S++){var T=h[S][0],P=h[S][1];c&&(T-=O),c&&null===P?(p.splice(T,1),O++):p[T]=P}}f=a.index,l=a.keys,h=a.edits,c=a.inArray,a=a.prev}else{if(d=g?c?f:l[f]:void 0,null===(p=g?g[d]:m)||void 0===p)continue;g&&y.push(d)}var M=void 0;if(!Array.isArray(p)){if(!s(p))throw new Error("Invalid AST Node: "+Object(r.a)(p));var C=u(e,p.kind,A);if(C){if((M=C.call(e,p,d,g,y,v))===o)break;if(!1===M){if(!A){y.pop();continue}}else if(void 0!==M&&(h.push([d,M]),!A)){if(!s(M)){y.pop();continue}p=M}}}void 0===M&&b&&h.push([d,p]),A?y.pop():(a={inArray:c,index:f,keys:l,edits:h,prev:a},l=(c=Array.isArray(p))?p:n[p.kind]||[],f=-1,h=[],g&&v.push(g),g=p)}while(void 0!==a);return 0!==h.length&&(m=h[h.length-1][1]),m}function s(t){return Boolean(t&&"string"===typeof t.kind)}function u(t,e,n){var r=t[e];if(r){if(!n&&"function"===typeof r)return r;var i=n?r.leave:r.enter;if("function"===typeof i)return i}else{var o=n?t.leave:t.enter;if(o){if("function"===typeof o)return o;var a=o[e];if("function"===typeof a)return a}}}},,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(1),i=n(6),o=n(3),a=n(2),s=n(5),u=n(58),c=n(53),l=n(119),f=n(10),h=n(36),p=n(97),d=n(143),g=n(31),y=[9729,9728],v=h.global.WebGLBuffer||function(){},m=function(t){function e(t,n){var a;Object(r.a)(this,e);var s=n.id,u=void 0===s?Object(d.c)("texture"):s,c=n.handle,l=n.target;return(a=Object(i.a)(this,Object(o.a)(e).call(this,t,{id:u,handle:c}))).target=l,a.textureUnit=void 0,a.loaded=!1,a.width=void 0,a.height=void 0,a.depth=void 0,a.format=void 0,a.type=void 0,a.dataFormat=void 0,a.border=void 0,a.textureUnit=void 0,a.mipmaps=void 0,a}return Object(s.a)(e,t),Object(a.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&Object(l.d)(t,n))&&(!r||Object(l.e)(t,n))),i}}]),Object(a.a)(e,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then((function(n){return t.initialize(Object.assign({},e,{pixels:n,data:n}))})),this;var r=e.pixels,i=void 0===r?null:r,o=e.format,a=void 0===o?6408:o,s=e.border,u=void 0===s?0:s,c=e.recreate,l=void 0!==c&&c,h=e.parameters,p=void 0===h?{}:h,d=e.pixelStore,g=void 0===d?{}:d,y=e.textureUnit,v=void 0===y?void 0:y,m=e.mipmaps,A=void 0===m||m;n||(n=i);var b=e.width,_=e.height,w=e.dataFormat,x=e.type,E=e.depth,O=void 0===E?0:E,S=this._deduceParameters({format:a,type:x,dataFormat:w,compressed:!1,data:n,width:b,height:_});return b=S.width,_=S.height,w=S.dataFormat,x=S.type,this.width=b,this.height=_,this.depth=O,this.format=a,this.type=x,this.dataFormat=w,this.border=u,this.textureUnit=v,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),A&&this._isNPOT()&&(f.h.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),A=!1,this._updateForNPOT(p)),this.mipmaps=A,this.setImageData({data:n,width:b,height:_,depth:O,format:a,type:x,dataFormat:w,border:u,mipmaps:A,parameters:g}),A&&this.generateMipmap(),this.setParameters(p),l&&(this.data=n),this}},{key:"resize",value:function(t){var e=t.height,n=t.width,r=t.mipmaps,i=void 0!==r&&r;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(f.h.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(f.l)(this.gl,e,(function(){t.gl.generateMipmap(t.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(t){this._trackDeallocatedMemory("Texture");var e=t.target,n=void 0===e?this.target:e,r=t.pixels,i=void 0===r?null:r,o=t.level,a=void 0===o?0:o,s=t.format,u=void 0===s?this.format:s,c=t.border,h=void 0===c?this.border:c,d=t.offset,y=void 0===d?0:d,v=t.parameters,m=void 0===v?{}:v,A=t.data,b=void 0===A?null:A,_=t.type,w=void 0===_?this.type:_,x=t.width,E=void 0===x?this.width:x,O=t.height,S=void 0===O?this.height:O,T=t.dataFormat,P=void 0===T?this.dataFormat:T,M=t.compressed,C=void 0!==M&&M;b||(b=i);var I=this._deduceParameters({format:u,type:w,dataFormat:P,compressed:C,data:b,width:E,height:S});w=I.type,P=I.dataFormat,C=I.compressed,E=I.width,S=I.height;var R=this.gl;R.bindTexture(this.target,this.handle);var k,j=this._getDataType({data:b,compressed:C});if(b=j.data,k=j.dataType,Object(f.l)(this.gl,m,(function(){switch(k){case"null":R.texImage2D(n,a,u,E,S,h,P,w,b);break;case"typed-array":R.texImage2D(n,a,u,E,S,h,P,w,b,y);break;case"buffer":Object(p.a)(R),R.bindBuffer(35052,b.handle||b),R.texImage2D(n,a,u,E,S,h,P,w,y),R.bindBuffer(35052,null);break;case"browser-object":Object(f.g)(R)?R.texImage2D(n,a,u,E,S,h,P,w,b):R.texImage2D(n,a,u,P,w,b);break;case"compressed":R.compressedTexImage2D(n,a,u,E,S,h,b);break;default:Object(g.a)(!1,"Unknown image data type")}})),b&&b.byteLength)this._trackAllocatedMemory(b.byteLength,"Texture");else{var L=l.a[this.dataFormat]||4,N=l.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*L*N,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.data,s=void 0===a?null:a,u=t.x,l=void 0===u?0:u,h=t.y,d=void 0===h?0:h,y=t.width,m=void 0===y?this.width:y,A=t.height,b=void 0===A?this.height:A,_=t.level,w=void 0===_?0:_,x=t.format,E=void 0===x?this.format:x,O=t.type,S=void 0===O?this.type:O,T=t.dataFormat,P=void 0===T?this.dataFormat:T,M=t.compressed,C=void 0!==M&&M,I=t.offset,R=void 0===I?0:I,k=t.border,j=(void 0===k&&this.border,t.parameters),L=void 0===j?{}:j,N=this._deduceParameters({format:E,type:S,dataFormat:P,compressed:C,data:s,width:m,height:b});if(S=N.type,P=N.dataFormat,C=N.compressed,m=N.width,b=N.height,Object(g.a)(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=o),s&&s.data){var D=s;s=D.data,m=D.shape[0],b=D.shape[1]}s instanceof c.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(f.l)(this.gl,L,(function(){C?e.gl.compressedTexSubImage2D(r,w,l,d,m,b,E,s):null===s?e.gl.texSubImage2D(r,w,l,d,m,b,P,S,null):ArrayBuffer.isView(s)?e.gl.texSubImage2D(r,w,l,d,m,b,P,S,s,R):s instanceof v?(Object(p.a)(e.gl),e.gl.bindBuffer(35052,s),e.gl.texSubImage2D(r,w,l,d,m,b,P,S,R),e.gl.bindBuffer(35052,null)):Object(f.g)(e.gl)?e.gl.texSubImage2D(r,w,l,d,m,b,P,S,s):e.gl.texSubImage2D(r,w,l,d,P,S,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return f.h.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof c.a?{data:e.handle,dataType:"buffer"}:e instanceof v?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(t){var e=t.format,n=t.data,r=t.width,i=t.height,o=t.dataFormat,a=t.type,s=t.compressed,u=l.b[e];o=o||u&&u.dataFormat,a=a||u&&u.types[0],s=s||u&&u.compressed;var c=this._deduceImageSize(n,r,i);return{dataFormat:o,type:a,compressed:s,width:r=c.width,height:i=c.height,format:e,data:n}}},{key:"_deduceImageSize",value:function(t,e,n){var r;return r="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Object(g.a)(r,"Could not deduced texture size"),Object(g.a)(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),Object(g.a)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(g.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(f.g)(this.gl)&&(!(!this.width||!this.height)&&(!Object(d.b)(this.width)||!Object(d.b)(this.height)))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===y.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}]),e}(u.a)},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function i(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/a,t[1]=(n[1]*r+n[5]*i+n[9]*o)/a,t[2]=(n[2]*r+n[6]*i+n[10]*o)/a,t}function o(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function a(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3],t}function s(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"i",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"c",(function(){return h}));var r=n(17);function i(){var t=new r.a(9);return r.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function a(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=n*f+r*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(l*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null}function s(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function u(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1],d=n[2],g=n[3],y=n[4],v=n[5],m=n[6],A=n[7],b=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=g*r+y*a+v*c,t[4]=g*i+y*s+v*l,t[5]=g*o+y*u+v*f,t[6]=m*r+A*a+b*c,t[7]=m*i+A*s+b*l,t[8]=m*o+A*u+b*f,t}function c(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+c,t[7]=h*i+p*s+l,t[8]=h*o+p*u+f,t}function l(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*r,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=c,t[7]=l,t[8]=f,t}function f(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,g=o*a,y=o*s,v=o*u;return t[0]=1-f-d,t[3]=l-v,t[6]=h+y,t[1]=l+v,t[4]=1-c-d,t[7]=p-g,t[2]=h-y,t[5]=p+g,t[8]=1-c-f,t}},function(t,e,n){"use strict";(function(t,r){n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));var i=n(22),o={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof t&&t,document:"undefined"!==typeof document&&document,process:"object"===("undefined"===typeof r?"undefined":Object(i.a)(r))&&r},a=o.window||o.self||o.global,s=o.process||{};console}).call(this,n(62),n(78))},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(152),c=n(13);function l(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var f=["longitude","latitude","zoom","bearing","pitch"],h=["longitude","latitude","zoom"],p=function(t){Object(o.a)(n,t);var e=l(n);function n(t){return Object(r.a)(this,n),e.call(this,t||{compare:f,extract:f,required:h})}return Object(i.a)(n,[{key:"interpolateProps",value:function(t,e,n){var r={};for(var i in e)r[i]=Object(c.lerp)(t[i]||0,e[i]||0,n);return r}}]),n}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var r=n(1),i=n(2),o=n(83),a=n(102),s=function(){},u={BREAK:1,SNAP_TO_END:2,IGNORE:3},c={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new o.a,transitionInterruption:u.BREAK,onTransitionStart:s,onTransitionInterrupt:s,onTransitionEnd:s},l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.ControllerState=e,this.props=Object.assign({},c,n),this.propsInTransition=null,this.transition=new a.a(n.timeline),this.onViewStateChange=n.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(i.a)(t,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var e=!1,n=this.props;if(t=Object.assign({},c,t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=this.transition.settings,i=r.interruption,o=r.endProps,a=Object.assign({},n,i===u.SNAP_TO_END?o:this.propsInTransition||n);this._triggerTransition(a,t),e=!0}else this.transition.cancel();return e}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this.transition.inProgress?this.transition.settings.interruption===u.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0!==o){var a=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:a.start,endProps:a.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(t){var e=this;return function(n){e.propsInTransition=null,t(n)}}},{key:"_onTransitionUpdate",value:function(t){var e=t.time,n=t.settings,r=n.interpolator,i=n.startProps,o=n.endProps,a=n.duration,s=(0,n.easing)(e/a),u=r.interpolateProps(i,o,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,u)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),t}();l.defaultProps=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(0),i=n(1),o=n(2),a=n(84),s=n(35);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={transitionDuration:0},f=["wheel"],h=["panstart","panmove","panend"],p=["pinchstart","pinchmove","pinchend"],d=["doubletap"],g=["keydown"],y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),Object(s.a)(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new a.b(e,n),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Object(o.a)(t,[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(c(c({makeViewport:this.makeViewport},this.controllerStateProps),this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(t,e){var n=this.controllerStateProps,r=n.width,i=n.height;if(e&&e.handled)return!1;var o=t[0]>=0&&t[0]<=r&&t[1]>=0&&t[1]<=i;return o&&e&&e.stopPropagation(),o}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(t){"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),"makeViewport"in t&&(this.makeViewport=t.makeViewport),"dragMode"in t&&(this.dragMode=t.dragMode),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,r=t.dragPan,i=void 0===r||r,o=t.dragRotate,a=void 0===o||o,s=t.doubleClickZoom,u=void 0===s||s,c=t.touchZoom,l=void 0===c||c,y=t.touchRotate,v=void 0!==y&&y,m=t.keyboard,A=void 0===m||m,b=Boolean(this.onViewStateChange);this.toggleEvents(f,b&&n),this.toggleEvents(h,b&&(i||a)),this.toggleEvents(p,b&&(l||v)),this.toggleEvents(d,b&&u),this.toggleEvents(g,b&&A),this.scrollZoom=n,this.dragPan=i,this.dragRotate=a,this.doubleClickZoom=u,this.touchZoom=l,this.touchRotate=v,this.keyboard=A}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t.getViewportProps(),e),i=this.controllerState!==t;if(i){var o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:o})}Object.assign(this._state,t.getInteractiveState(),n),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t)||t.rightButton;(this.invertPan||"pan"===this.dragMode)&&(n=!n);var r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,l,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}},{key:"_onPanEnd",value:function(t){var e=this.controllerState[this._panMove?"panEnd":"rotateEnd"]();return this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,l,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,r=this.controllerState.getViewportProps(),i=e/r.width,o=n/r.height,a=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:o});return this.updateViewport(a,l,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=t.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:e,scale:r});return this.updateViewport(i,l,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,l,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,l,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.keyboard,i=r.zoomSpeed,o=r.moveSpeed,a=r.rotateSpeedX,s=r.rotateSpeedY,u=this.controllerState,c={};switch(t.srcEvent.code){case"Minus":e=n?u.zoomOut(i).zoomOut(i):u.zoomOut(i),c.isZooming=!0;break;case"Equal":e=n?u.zoomIn(i).zoomIn(i):u.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":n?(e=u.rotateLeft(a),c.isRotating=!0):(e=u.moveLeft(o),c.isPanning=!0);break;case"ArrowRight":n?(e=u.rotateRight(a),c.isRotating=!0):(e=u.moveRight(o),c.isPanning=!0);break;case"ArrowUp":n?(e=u.rotateUp(s),c.isRotating=!0):(e=u.moveUp(o),c.isPanning=!0);break;case"ArrowDown":n?(e=u.rotateDown(s),c.isRotating=!0):(e=u.moveDown(o),c.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),c),!0}},{key:"_getTransitionProps",value:function(){return l}},{key:"events",set:function(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(22),i=n(0),o=n(1),a=n(2),s=n(59),u=/([0-9]+\.?[0-9]*)(%|px)/;function c(t){switch(Object(r.a)(t)){case"number":return{position:t,relative:!1};case"string":var e=t.match(u);if(e&&e.length>=3){var n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function l(t,e){return t.relative?Math.round(t.position*e):t.position}var f=n(104),h=n(35);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,a=void 0===i?0:i,u=e.y,c=void 0===u?0:u,l=e.width,f=void 0===l?"100%":l,p=e.height,d=void 0===p?"100%":p,g=e.projectionMatrix,y=void 0===g?null:g,v=e.fovy,m=void 0===v?50:v,A=e.near,b=void 0===A?.1:A,_=e.far,w=void 0===_?1e3:_,x=e.modelMatrix,E=void 0===x?null:x,O=e.viewportInstance,S=void 0===O?null:O,T=e.type,P=void 0===T?s.a:T;Object(h.a)(!S||S instanceof s.a),this.viewportInstance=S,this.id=r||this.constructor.displayName||"view",this.type=P,this.props=Object.assign({},e,{id:this.id,projectionMatrix:y,fovy:m,near:b,far:w,modelMatrix:E}),this._parseDimensions({x:a,y:c,width:f,height:d}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(a.a)(t,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):Object(f.a)(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n}),o=d(d(d({},r),this.props),i);return this._getViewport(o)}},{key:"getViewStateId",value:function(){switch(Object(r.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===Object(r.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var e=Object.assign({},t);for(var n in this.props.viewState)"id"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:l(this._x,e),y:l(this._y,n),width:l(this._width,e),height:l(this._height,n)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"===typeof e&&(e={type:e}),Object.assign({},t,e)):null}},{key:"_getViewport",value:function(t){return new(0,this.type)(t)}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=c(e),this._y=c(n),this._width=c(r),this._height=c(i)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(48),i=n(1),o=n(2),a=n(143),s=n(31),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?Object(a.c)("geometry"):n,o=e.drawMode,s=void 0===o?u.TRIANGLES:o,c=e.attributes,l=void 0===c?{}:c,f=e.indices,h=void 0===f?null:f,p=e.vertexCount,d=void 0===p?null:p;this.id=r,this.drawMode=0|s,this.attributes={},this.userData={},this._setAttributes(l,h),this.vertexCount=d||this._calculateVertexCount(this.attributes,this.indices)}return Object(o.a)(t,null,[{key:"DRAW_MODE",get:function(){return u}}]),Object(o.a)(t,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Object(r.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}},{key:"_setAttributes",value:function(t,e){for(var n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var r=t[n];r=ArrayBuffer.isView(r)?{value:r}:r,Object(s.a)(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(Object(s.a)(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(t,e){if(e)return e.value.length;var n=1/0;for(var r in t){var i=t[r],o=i.value,a=i.size;!i.constant&&o&&a>=1&&(n=Math.min(n,o.length/a))}return Object(s.a)(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(237);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(70),i=n(238);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=n(157);function s(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?Object(a.a)(t):e}function u(t){var e=Object(i.a)();return function(){var n,i=Object(r.a)(t);if(e){var o=Object(r.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(168),i=n(1),o=n(2),a=n(121),s=n(31),u=n(308),c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},l={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},f=function(){function t(){var e=this;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(t){return e._assign(t)})),Object.freeze(this)}return Object(o.a)(t,null,[{key:"getBytesPerElement",value:function(t){return Object(a.c)(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return Object(s.a)(t.size),Object(a.c)(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Object(r.a)(t,[c].concat(n))}}]),Object(o.a)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(t=Object(u.a)("Accessor",t,l)).type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(333),i=n(444);function o(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=o(e,t);return n=(n+180)%360}(t,e);var a=i.getCoord(t),s=i.getCoord(e),u=r.degreesToRadians(a[0]),c=r.degreesToRadians(s[0]),l=r.degreesToRadians(a[1]),f=r.degreesToRadians(s[1]),h=Math.sin(c-u)*Math.cos(f),p=Math.cos(l)*Math.sin(f)-Math.sin(l)*Math.cos(f)*Math.cos(c-u);return r.radiansToDegrees(Math.atan2(h,p))}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(91),i=n(44);e.default=function(t,e,n){void 0===n&&(n={});var o=r.getCoord(t),a=r.getCoord(e),s=i.degreesToRadians(a[1]-o[1]),u=i.degreesToRadians(a[0]-o[0]),c=i.degreesToRadians(o[1]),l=i.degreesToRadians(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(l);return i.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(t)?i(t,e,[]):e(t)?[t]:[]}function i(t,e,n){for(var r=-1;++r<t.length;){var o=t[r];Array.isArray(o)?i(o,e,n):e(o)&&n.push(o)}return n}function o(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,c=0,l=i;c<s;c++)e[l++]=n[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u);return e}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";var r=n(1),i=n(2),o=function(){function t(e){Object(r.a)(this,t),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}return Object(i.a)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"allocate",value:function(t,e,n){var r,i=n.size,o=void 0===i?1:i,a=n.type,s=n.padding,u=void 0===s?0:s,c=n.copy,l=void 0!==c&&c,f=n.initialize,h=void 0!==f&&f,p=n.maxCount,d=a||t&&t.constructor||Float32Array,g=e*o+u;if(ArrayBuffer.isView(t)){if(g<=t.length)return t;if(g*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new d(t.buffer,0,g)}p&&(r=p*o+u);var y=this._allocate(d,g,h,r);return t&&l?y.set(t):h||y.fill(0,0,4),this._release(t),y}},{key:"release",value:function(t){this._release(t)}},{key:"_allocate",value:function(t,e,n,r){var i=Math.max(Math.ceil(e*this.props.overAlloc),1);i>r&&(i=r);var o=this._pool,a=t.BYTES_PER_ELEMENT*i,s=o.findIndex((function(t){return t.byteLength>=a}));if(s>=0){var u=new t(o.splice(s,1)[0],0,i);return n&&u.fill(0),u}return new t(i)}},{key:"_release",value:function(t){if(ArrayBuffer.isView(t)){var e=this._pool,n=t.buffer,r=n.byteLength,i=e.findIndex((function(t){return t.byteLength>=r}));i<0?e.push(n):(i>0||e.length<this.props.poolSize)&&e.splice(i,0,n),e.length>this.props.poolSize&&e.shift()}}}]),t}();e.a=new o},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return g})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return b}));var r,i,o,a=n(12),s=n(18),u=n(0),c=n(25),l=(r={},Object(u.a)(r,3042,!1),Object(u.a)(r,32773,new Float32Array([0,0,0,0])),Object(u.a)(r,32777,32774),Object(u.a)(r,34877,32774),Object(u.a)(r,32969,1),Object(u.a)(r,32968,0),Object(u.a)(r,32971,1),Object(u.a)(r,32970,0),Object(u.a)(r,3106,new Float32Array([0,0,0,0])),Object(u.a)(r,3107,[!0,!0,!0,!0]),Object(u.a)(r,2884,!1),Object(u.a)(r,2885,1029),Object(u.a)(r,2929,!1),Object(u.a)(r,2931,1),Object(u.a)(r,2932,513),Object(u.a)(r,2928,new Float32Array([0,1])),Object(u.a)(r,2930,!0),Object(u.a)(r,3024,!0),Object(u.a)(r,36006,null),Object(u.a)(r,2886,2305),Object(u.a)(r,33170,4352),Object(u.a)(r,2849,1),Object(u.a)(r,32823,!1),Object(u.a)(r,32824,0),Object(u.a)(r,10752,0),Object(u.a)(r,32938,1),Object(u.a)(r,32939,!1),Object(u.a)(r,3089,!1),Object(u.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(u.a)(r,2960,!1),Object(u.a)(r,2961,0),Object(u.a)(r,2968,4294967295),Object(u.a)(r,36005,4294967295),Object(u.a)(r,2962,519),Object(u.a)(r,2967,0),Object(u.a)(r,2963,4294967295),Object(u.a)(r,34816,519),Object(u.a)(r,36003,0),Object(u.a)(r,36004,4294967295),Object(u.a)(r,2964,7680),Object(u.a)(r,2965,7680),Object(u.a)(r,2966,7680),Object(u.a)(r,34817,7680),Object(u.a)(r,34818,7680),Object(u.a)(r,34819,7680),Object(u.a)(r,2978,[0,0,1024,1024]),Object(u.a)(r,3333,4),Object(u.a)(r,3317,4),Object(u.a)(r,37440,!1),Object(u.a)(r,37441,!1),Object(u.a)(r,37443,37444),Object(u.a)(r,35723,4352),Object(u.a)(r,36010,null),Object(u.a)(r,35977,!1),Object(u.a)(r,3330,0),Object(u.a)(r,3332,0),Object(u.a)(r,3331,0),Object(u.a)(r,3314,0),Object(u.a)(r,32878,0),Object(u.a)(r,3316,0),Object(u.a)(r,3315,0),Object(u.a)(r,32877,0),r),f=function(t,e,n){return e?t.enable(n):t.disable(n)},h=function(t,e,n){return t.hint(n,e)},p=function(t,e,n){return t.pixelStorei(n,e)};function d(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var g=(i={},Object(u.a)(i,3042,f),Object(u.a)(i,32773,(function(t,e){return t.blendColor.apply(t,Object(s.a)(e))})),Object(u.a)(i,32777,"blendEquation"),Object(u.a)(i,34877,"blendEquation"),Object(u.a)(i,32969,"blendFunc"),Object(u.a)(i,32968,"blendFunc"),Object(u.a)(i,32971,"blendFunc"),Object(u.a)(i,32970,"blendFunc"),Object(u.a)(i,3106,(function(t,e){return t.clearColor.apply(t,Object(s.a)(e))})),Object(u.a)(i,3107,(function(t,e){return t.colorMask.apply(t,Object(s.a)(e))})),Object(u.a)(i,2884,f),Object(u.a)(i,2885,(function(t,e){return t.cullFace(e)})),Object(u.a)(i,2929,f),Object(u.a)(i,2931,(function(t,e){return t.clearDepth(e)})),Object(u.a)(i,2932,(function(t,e){return t.depthFunc(e)})),Object(u.a)(i,2928,(function(t,e){return t.depthRange.apply(t,Object(s.a)(e))})),Object(u.a)(i,2930,(function(t,e){return t.depthMask(e)})),Object(u.a)(i,3024,f),Object(u.a)(i,35723,h),Object(u.a)(i,36006,(function(t,e){var n=Object(c.h)(t)?36009:36160;return t.bindFramebuffer(n,e)})),Object(u.a)(i,2886,(function(t,e){return t.frontFace(e)})),Object(u.a)(i,33170,h),Object(u.a)(i,2849,(function(t,e){return t.lineWidth(e)})),Object(u.a)(i,32823,f),Object(u.a)(i,32824,"polygonOffset"),Object(u.a)(i,10752,"polygonOffset"),Object(u.a)(i,35977,f),Object(u.a)(i,32938,"sampleCoverage"),Object(u.a)(i,32939,"sampleCoverage"),Object(u.a)(i,3089,f),Object(u.a)(i,3088,(function(t,e){return t.scissor.apply(t,Object(s.a)(e))})),Object(u.a)(i,2960,f),Object(u.a)(i,2961,(function(t,e){return t.clearStencil(e)})),Object(u.a)(i,2968,(function(t,e){return t.stencilMaskSeparate(1028,e)})),Object(u.a)(i,36005,(function(t,e){return t.stencilMaskSeparate(1029,e)})),Object(u.a)(i,2962,"stencilFuncFront"),Object(u.a)(i,2967,"stencilFuncFront"),Object(u.a)(i,2963,"stencilFuncFront"),Object(u.a)(i,34816,"stencilFuncBack"),Object(u.a)(i,36003,"stencilFuncBack"),Object(u.a)(i,36004,"stencilFuncBack"),Object(u.a)(i,2964,"stencilOpFront"),Object(u.a)(i,2965,"stencilOpFront"),Object(u.a)(i,2966,"stencilOpFront"),Object(u.a)(i,34817,"stencilOpBack"),Object(u.a)(i,34818,"stencilOpBack"),Object(u.a)(i,34819,"stencilOpBack"),Object(u.a)(i,2978,(function(t,e){return t.viewport.apply(t,Object(s.a)(e))})),Object(u.a)(i,3333,p),Object(u.a)(i,3317,p),Object(u.a)(i,37440,p),Object(u.a)(i,37441,p),Object(u.a)(i,37443,p),Object(u.a)(i,3330,p),Object(u.a)(i,3332,p),Object(u.a)(i,3331,p),Object(u.a)(i,36010,(function(t,e){return t.bindFramebuffer(36008,e)})),Object(u.a)(i,3314,p),Object(u.a)(i,32878,p),Object(u.a)(i,3316,p),Object(u.a)(i,3315,p),Object(u.a)(i,32877,p),Object(u.a)(i,"framebuffer",(function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)})),Object(u.a)(i,"blend",(function(t,e){return e?t.enable(3042):t.disable(3042)})),Object(u.a)(i,"blendColor",(function(t,e){return t.blendColor.apply(t,Object(s.a)(e))})),Object(u.a)(i,"blendEquation",(function(t,e){e=d(e)?e:[e,e],t.blendEquationSeparate.apply(t,Object(s.a)(e))})),Object(u.a)(i,"blendFunc",(function(t,e){e=d(e)&&2===e.length?[].concat(Object(s.a)(e),Object(s.a)(e)):e,t.blendFuncSeparate.apply(t,Object(s.a)(e))})),Object(u.a)(i,"clearColor",(function(t,e){return t.clearColor.apply(t,Object(s.a)(e))})),Object(u.a)(i,"clearDepth",(function(t,e){return t.clearDepth(e)})),Object(u.a)(i,"clearStencil",(function(t,e){return t.clearStencil(e)})),Object(u.a)(i,"colorMask",(function(t,e){return t.colorMask.apply(t,Object(s.a)(e))})),Object(u.a)(i,"cull",(function(t,e){return e?t.enable(2884):t.disable(2884)})),Object(u.a)(i,"cullFace",(function(t,e){return t.cullFace(e)})),Object(u.a)(i,"depthTest",(function(t,e){return e?t.enable(2929):t.disable(2929)})),Object(u.a)(i,"depthFunc",(function(t,e){return t.depthFunc(e)})),Object(u.a)(i,"depthMask",(function(t,e){return t.depthMask(e)})),Object(u.a)(i,"depthRange",(function(t,e){return t.depthRange.apply(t,Object(s.a)(e))})),Object(u.a)(i,"dither",(function(t,e){return e?t.enable(3024):t.disable(3024)})),Object(u.a)(i,"derivativeHint",(function(t,e){t.hint(35723,e)})),Object(u.a)(i,"frontFace",(function(t,e){return t.frontFace(e)})),Object(u.a)(i,"mipmapHint",(function(t,e){return t.hint(33170,e)})),Object(u.a)(i,"lineWidth",(function(t,e){return t.lineWidth(e)})),Object(u.a)(i,"polygonOffsetFill",(function(t,e){return e?t.enable(32823):t.disable(32823)})),Object(u.a)(i,"polygonOffset",(function(t,e){return t.polygonOffset.apply(t,Object(s.a)(e))})),Object(u.a)(i,"sampleCoverage",(function(t,e){return t.sampleCoverage.apply(t,Object(s.a)(e))})),Object(u.a)(i,"scissorTest",(function(t,e){return e?t.enable(3089):t.disable(3089)})),Object(u.a)(i,"scissor",(function(t,e){return t.scissor.apply(t,Object(s.a)(e))})),Object(u.a)(i,"stencilTest",(function(t,e){return e?t.enable(2960):t.disable(2960)})),Object(u.a)(i,"stencilMask",(function(t,e){var n=e=d(e)?e:[e,e],r=Object(a.a)(n,2),i=r[0],o=r[1];t.stencilMaskSeparate(1028,i),t.stencilMaskSeparate(1029,o)})),Object(u.a)(i,"stencilFunc",(function(t,e){var n=e=d(e)&&3===e.length?[].concat(Object(s.a)(e),Object(s.a)(e)):e,r=Object(a.a)(n,6),i=r[0],o=r[1],u=r[2],c=r[3],l=r[4],f=r[5];t.stencilFuncSeparate(1028,i,o,u),t.stencilFuncSeparate(1029,c,l,f)})),Object(u.a)(i,"stencilOp",(function(t,e){var n=e=d(e)&&3===e.length?[].concat(Object(s.a)(e),Object(s.a)(e)):e,r=Object(a.a)(n,6),i=r[0],o=r[1],u=r[2],c=r[3],l=r[4],f=r[5];t.stencilOpSeparate(1028,i,o,u),t.stencilOpSeparate(1029,c,l,f)})),Object(u.a)(i,"viewport",(function(t,e){return t.viewport.apply(t,Object(s.a)(e))})),i);function y(t,e,n){return void 0!==e[t]?e[t]:n[t]}var v={blendEquation:function(t,e,n){return t.blendEquationSeparate(y(32777,e,n),y(34877,e,n))},blendFunc:function(t,e,n){return t.blendFuncSeparate(y(32969,e,n),y(32968,e,n),y(32971,e,n),y(32970,e,n))},polygonOffset:function(t,e,n){return t.polygonOffset(y(32824,e,n),y(10752,e,n))},sampleCoverage:function(t,e,n){return t.sampleCoverage(y(32938,e,n),y(32939,e,n))},stencilFuncFront:function(t,e,n){return t.stencilFuncSeparate(1028,y(2962,e,n),y(2967,e,n),y(2963,e,n))},stencilFuncBack:function(t,e,n){return t.stencilFuncSeparate(1029,y(34816,e,n),y(36003,e,n),y(36004,e,n))},stencilOpFront:function(t,e,n){return t.stencilOpSeparate(1028,y(2964,e,n),y(2965,e,n),y(2966,e,n))},stencilOpBack:function(t,e,n){return t.stencilOpSeparate(1029,y(34817,e,n),y(34818,e,n),y(34819,e,n))}},m={enable:function(t,e){return t(Object(u.a)({},e,!0))},disable:function(t,e){return t(Object(u.a)({},e,!1))},pixelStorei:function(t,e,n){return t(Object(u.a)({},e,n))},hint:function(t,e,n){return t(Object(u.a)({},e,n))},bindFramebuffer:function(t,e,n){var r;switch(e){case 36160:return t((r={},Object(u.a)(r,36006,n),Object(u.a)(r,36010,n),r));case 36009:return t(Object(u.a)({},36006,n));case 36008:return t(Object(u.a)({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t(Object(u.a)({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},Object(u.a)(n,32777,e),Object(u.a)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},Object(u.a)(r,32777,e),Object(u.a)(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},Object(u.a)(r,32969,e),Object(u.a)(r,32968,n),Object(u.a)(r,32971,e),Object(u.a)(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var o;return t((o={},Object(u.a)(o,32969,e),Object(u.a)(o,32968,n),Object(u.a)(o,32971,r),Object(u.a)(o,32970,i),o))},clearColor:function(t,e,n,r,i){return t(Object(u.a)({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t(Object(u.a)({},2931,e))},clearStencil:function(t,e){return t(Object(u.a)({},2961,e))},colorMask:function(t,e,n,r,i){return t(Object(u.a)({},3107,[e,n,r,i]))},cullFace:function(t,e){return t(Object(u.a)({},2885,e))},depthFunc:function(t,e){return t(Object(u.a)({},2932,e))},depthRange:function(t,e,n){return t(Object(u.a)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(Object(u.a)({},2930,e))},frontFace:function(t,e){return t(Object(u.a)({},2886,e))},lineWidth:function(t,e){return t(Object(u.a)({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},Object(u.a)(r,32824,e),Object(u.a)(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},Object(u.a)(r,32938,e),Object(u.a)(r,32939,n),r))},scissor:function(t,e,n,r,i){return t(Object(u.a)({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},Object(u.a)(n,2968,e),Object(u.a)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(Object(u.a)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},Object(u.a)(i,2962,e),Object(u.a)(i,2967,n),Object(u.a)(i,2963,r),Object(u.a)(i,34816,e),Object(u.a)(i,36003,n),Object(u.a)(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var o;return t((o={},Object(u.a)(o,1028===e?2962:34816,n),Object(u.a)(o,1028===e?2967:36003,r),Object(u.a)(o,1028===e?2963:36004,i),o))},stencilOp:function(t,e,n,r){var i;return t((i={},Object(u.a)(i,2964,e),Object(u.a)(i,2965,n),Object(u.a)(i,2966,r),Object(u.a)(i,34817,e),Object(u.a)(i,34818,n),Object(u.a)(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var o;return t((o={},Object(u.a)(o,1028===e?2964:34817,n),Object(u.a)(o,1028===e?2965:34818,r),Object(u.a)(o,1028===e?2966:34819,i),o))},viewport:function(t,e,n,r,i){return t(Object(u.a)({},2978,[e,n,r,i]))}},A=function(t,e){return t.isEnabled(e)},b=(o={},Object(u.a)(o,3042,A),Object(u.a)(o,2884,A),Object(u.a)(o,2929,A),Object(u.a)(o,3024,A),Object(u.a)(o,32823,A),Object(u.a)(o,32926,A),Object(u.a)(o,32928,A),Object(u.a)(o,3089,A),Object(u.a)(o,2960,A),Object(u.a)(o,35977,A),o)},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));var r=n(31),i=n(10),o="Invalid WebGLRenderingContext";function a(t){Object(r.a)(Object(i.f)(t),o)}function s(t){Object(r.a)(Object(i.g)(t),"Requires WebGL2")}},function(t,e,n){var r=n(350),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return d}));var r=n(1),i=n(2),o=n(96),a=n(124),s=n(25);function u(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function c(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var a=n.apply(void 0,[t.state._updateCache].concat(i)),s=a.valueChanged,u=a.oldValue;return s&&r.apply(void 0,i),u},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function l(t){var e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,s=void 0!==i&&i,u=n.log,c=void 0===u?function(){}:u;Object(r.a)(this,t),this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=s?Object(a.a)(e):Object.assign({},o.c),this.log=c,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];Object(a.c)(this.gl,t,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t){Object(s.a)(void 0!==i);var o=t[i],a=this.cache[i];Object(s.d)(o,a)||(n=!0,e=a,r&&!(i in r)&&(r[i]=a),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}]),t}();function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,a=n.copyState;if(Object(s.a)(void 0!==a),!e.state){var h="undefined"!==typeof t?t:window;for(var p in h.polyfillContext&&h.polyfillContext(e),e.state=new f(e,{copyState:a,enable:i}),l(e),o.b){var d=o.b[p];c(e,p,d)}u(e,"getParameter"),u(e,"isEnabled")}return e.state.enable=i,e}function p(t){t.state||h(t,{copyState:!1}),t.state.push()}function d(t){Object(s.a)(t.state),t.state.pop()}}).call(this,n(62))},function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n(0),i=n(12),o=n(1),a=n(6),s=n(40),u=n(3),c=n(15),l=n(2),f=n(5),h=n(10),p=n(58),d=n(167),g=n(141),y=n(255),v=n(307),m=n(631),A=n(97),b=n(131),_=n(31),w="Multiple render targets not supported",x=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,e),(n=Object(a.a)(this,Object(u.a)(e).call(this,t,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.ownResources=[],n.initialize(r),Object.seal(Object(s.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new e(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),Object(l.a)(e,[{key:"initialize",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,o=t.attachments,a=void 0===o?null:o,s=t.color,u=void 0===s||s,c=t.depth,l=void 0===c||c,f=t.stencil,h=void 0!==f&&f,p=t.check,d=void 0===p||p,g=t.readBuffer,y=t.drawBuffers;if(Object(_.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var v in a){var m=a[v];(Array.isArray(m)?m[0]:m).resize({width:n,height:i})}else a=this._createDefaultAttachments(u,l,h,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:g,drawBuffers:y}),a&&d&&this.checkStatus()}},{key:"delete",value:function(){var t=!0,n=!1,r=void 0;try{for(var i,o=this.ownResources[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.delete()}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}Object(c.a)(Object(u.a)(e.prototype),"delete",this).call(this)}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,o=t.clearAttachments,a=void 0!==o&&o,s=t.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:a,resizeAttachments:u});var c=this.gl,l=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,l||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return Object(_.a)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&h.h.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:"attach",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,o=void 0!==r&&r,a=n.resizeAttachments,s=void 0===a||a,u={};o&&Object.keys(this.attachments).forEach((function(t){u[t]=null})),Object.assign(u,t);var c=this.gl.bindFramebuffer(36160,this.handle);for(var l in u){Object(_.a)(void 0!==l,"Misspelled framebuffer binding point?");var f=Number(l),h=u[f],p=h;if(p)if(p instanceof g.a)this._attachRenderbuffer({attachment:f,renderbuffer:p});else if(Array.isArray(h)){var d=Object(i.a)(h,3),y=d[0],v=d[1],m=void 0===v?0:v,A=d[2],b=void 0===A?0:A;p=y,this._attachTexture({attachment:f,texture:y,layer:m,level:b})}else this._attachTexture({attachment:f,texture:p,layer:0,level:0});else this._unattach(f);s&&p&&p.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,c||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!e.attachments[t]})).forEach((function(t){delete e.attachments[t]}))}},{key:"checkStatus",value:function(){this.gl;var t=this.getStatus();if(36053!==t)throw new Error(E(t));return this}},{key:"getStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.depth,r=t.stencil,i=t.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&Object(y.a)(this.gl,{color:e,depth:n,stencil:r}),o.forEach((function(t,e){Object(y.b)({drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,a||null),this}},{key:"readPixels",value:function(){return h.h.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return h.h.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return h.h.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return h.h.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return h.h.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return h.h.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.width,u=t.height,c=this.gl;Object(A.a)(c);var l=c.bindFramebuffer(36008,this.handle);return 0===i&&0===a&&void 0===s&&void 0===u?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,a,s,u),c.bindFramebuffer(36008,l),this}},{key:"getAttachmentParameter",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(b.a)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=e?Object(b.a)(this.gl,c):c;r[l]=this.getAttachmentParameter(t,c,e)}}catch(f){o=!0,a=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}},{key:"getParameters",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=0,i=e;r<i.length;r++){var o=i[r],a=Number(o),s=t?Object(b.a)(this.gl,a):a;n[s]=this.getAttachmentParameters(a,t)}return n}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(Object(v.a)(this),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>h.h.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=Object(v.a)(this,{maxHeight:100});return h.h.image({logLevel:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(t,e,n,i,o){var a,s=null;t&&((s=s||{})[36064]=new d.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:(a={},Object(r.a)(a,10241,9729),Object(r.a)(a,10240,9729),Object(r.a)(a,10242,33071),Object(r.a)(a,10243,33071),a)}),this.ownResources.push(s[36064]));return e&&n?((s=s||{})[33306]=new g.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):e?((s=s||{})[36096]=new g.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):n&&Object(_.a)(!1),s}},{key:"_unattach",value:function(t){var e=this.attachments[t];e&&(e instanceof g.a?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,o=t.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:a.framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(t){return t<34069?t+34069:t}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:Object(_.a)(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(t){var e=this.gl;Object(h.g)(e)?e.readBuffer(t):Object(_.a)(36064===t||1029===t,w),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(t){var e=this.gl;if(Object(h.g)(e))e.drawBuffers(t);else{var n=e.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(t):Object(_.a)(1===t.length&&(36064===t[0]||1029===t[0]),w)}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(t){var e=Object(m.a)(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),e}(p.a);function E(t){return(x.STATUS||{})[t]||"Framebuffer error ".concat(t)}x.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(1),i=n(2);function o(){}var a={onStart:o,onUpdate:o,onInterrupt:o,onEnd:o},s=function(){function t(e){Object(r.a)(this,t),this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}return Object(i.a)(t,[{key:"start",value:function(t){this.cancel(),this.settings=Object.assign({},a,t),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var t=this.timeline,e=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),t}()},function(t,e,n){"use strict";function r(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=i(t.properties),e.geometry=o(t.geometry),e}function i(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"===typeof r?null===r?e[n]=null:r.length?e[n]=r.map((function(t){return t})):e[n]=i(r):e[n]=r})),e):e}function o(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return o(t)})),e):(e.coordinates=a(t.coordinates),e)}function a(t){return"object"!==typeof t[0]?t.slice():t.map((function(t){return a(t)}))}e.a=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return r(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return r(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(t);default:throw new Error("unknown GeoJSON type")}}},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var n in t){var i=t[n],o=e[n];if(!(i===o||Array.isArray(i)&&Array.isArray(o)&&r(i,o)))return!1}return!0}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(70);function i(t,e,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var r="vs",i="fs"},function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return u}));var r=n(66),i=n(21),o=n(7),a=n(16);!function(t){function e(e,n){var r=t.call(this,e)||this;return r.link=n,r}Object(o.c)(e,t)}(Error);function s(t){return t.request.length<=1}function u(t){return new r.a((function(e){e.error(t)}))}function c(t,e){var n=Object(o.a)({},t);return Object.defineProperty(e,"setContext",{enumerable:!1,value:function(t){n="function"===typeof t?Object(o.a)({},n,t(n)):Object(o.a)({},n,t)}}),Object.defineProperty(e,"getContext",{enumerable:!1,value:function(){return Object(o.a)({},n)}}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return function(t){var e=t.query,n=t.variables,r=t.operationName;return JSON.stringify([r,e,n])}(e)}}),e}function l(t,e){return e?e(t):r.a.of()}function f(t){return"function"===typeof t?new y(t):t}function h(){return new y((function(){return r.a.of()}))}function p(t){return 0===t.length?h():t.map(f).reduce((function(t,e){return t.concat(e)}))}function d(t,e,n){var i=f(e),o=f(n||new y(l));return s(i)&&s(o)?new y((function(e){return t(e)?i.request(e)||r.a.of():o.request(e)||r.a.of()})):new y((function(e,n){return t(e)?i.request(e,n)||r.a.of():o.request(e,n)||r.a.of()}))}var g=function(t,e){var n=f(t);if(s(n))return n;var i=f(e);return s(i)?new y((function(t){return n.request(t,(function(t){return i.request(t)||r.a.of()}))||r.a.of()})):new y((function(t,e){return n.request(t,(function(t){return i.request(t,e)||r.a.of()}))||r.a.of()}))},y=function(){function t(t){t&&(this.request=t)}return t.prototype.split=function(e,n,r){return this.concat(d(e,n,r||new t(l)))},t.prototype.concat=function(t){return g(this,t)},t.prototype.request=function(t,e){throw new i.a(1)},t.empty=h,t.from=p,t.split=d,t.execute=v,t}();function v(t,e){return t.request(c(e.context,function(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName="string"!==typeof e.query?Object(a.n)(e.query):""),e}(function(t){for(var e=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(e.indexOf(o)<0)throw new i.a(2)}return t}(e))))||r.a.of()}},,function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ImmutableFeatureCollection=void 0;var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"featureCollection",void 0),this.featureCollection=e}var e,n,i;return e=t,(n=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry,i="Polygon"===r.type||"MultiPolygon"===r.type,o=a({},r,{coordinates:f(r.coordinates,e,n,i)});return this.replaceGeometry(t,o)}},{key:"removePosition",value:function(t,e){var n=this.featureCollection.features[t].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&Array.isArray(e)&&0===e[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&Array.isArray(e)&&0===e[0]&&0===e[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var r="Polygon"===n.type||"MultiPolygon"===n.type,i=a({},n,{coordinates:h(n.coordinates,e,r)});return function(t){switch(t.type){case"Polygon":!function(t){for(var e=t.coordinates,n=1;n<e.length;n++)d(e,n)&&n--}(t);break;case"MultiLineString":!function(t){for(var e=0;e<t.coordinates.length;e++)1===t.coordinates[e].length&&(t.coordinates.splice(e,1),e--)}(t);break;case"MultiPolygon":!function(t){for(var e=0;e<t.coordinates.length;e++){var n=t.coordinates[e];n[0].length<=3&&(t.coordinates.splice(e,1),e--);for(var r=1;r<n.length;r++)d(n,r)&&r--}}(t)}}(i),this.replaceGeometry(t,i)}},{key:"addPosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry;if("Point"===r.type)throw new Error("Unable to add a position to a Point feature");var i="Polygon"===r.type||"MultiPolygon"===r.type,o=a({},r,{coordinates:p(r.coordinates,e,n,i)});return this.replaceGeometry(t,o)}},{key:"replaceGeometry",value:function(e,n){var i=a({},this.featureCollection.features[e],{geometry:n});return new t(a({},this.featureCollection,{features:[].concat(r(this.featureCollection.features.slice(0,e)),[i],r(this.featureCollection.features.slice(e+1)))}))}},{key:"addFeature",value:function(t){return this.addFeatures([t])}},{key:"addFeatures",value:function(e){return new t(a({},this.featureCollection,{features:[].concat(r(this.featureCollection.features),r(e))}))}},{key:"deleteFeature",value:function(t){return this.deleteFeatures([t])}},{key:"deleteFeatures",value:function(e){var n=r(this.featureCollection.features);e.sort();for(var i=e.length-1;i>=0;i--){var o=e[i];o>=0&&o<n.length&&n.splice(o,1)}return new t(a({},this.featureCollection,{features:n}))}}])&&s(e.prototype,n),i&&s(e,i),t}();function l(t,e){if(2===t.length&&3===e.length){var n=e[2];return[t[0],t[1],n]}return t}function f(t,e,n,i){if(!e)return t;if(0===e.length)return l(n,t);if(1===e.length){var o=[].concat(r(t.slice(0,e[0])),[l(n,t[e[0]])],r(t.slice(e[0]+1)));return!i||0!==e[0]&&e[0]!==t.length-1||(o[0]=l(n,t[0]),o[t.length-1]=l(n,t[0])),o}return[].concat(r(t.slice(0,e[0])),[f(t[e[0]],e.slice(1,e.length),n,i)],r(t.slice(e[0]+1)))}function h(t,e,n){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");if(1===e.length){var i=[].concat(r(t.slice(0,e[0])),r(t.slice(e[0]+1)));return!n||0!==e[0]&&e[0]!==t.length-1||(0===e[0]?i[i.length-1]=i[0]:e[0]===t.length-1&&(i[0]=i[i.length-1])),i}return[].concat(r(t.slice(0,e[0])),[h(t[e[0]],e.slice(1,e.length),n)],r(t.slice(e[0]+1)))}function p(t,e,n,i){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");return 1===e.length?[].concat(r(t.slice(0,e[0])),[n],r(t.slice(e[0]))):[].concat(r(t.slice(0,e[0])),[p(t[e[0]],e.slice(1,e.length),n,i)],r(t.slice(e[0]+1)))}function d(t,e){return t[e].length<=3&&(t.splice(e,1),!0)}e.ImmutableFeatureCollection=c},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f}));var r=n(22),i=n(69),o=n(302);function a(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){if(o.toArrayBuffer&&(t=o.toArrayBuffer(t)),t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.buffer;if("string"===typeof t){var e=t;return(new TextEncoder).encode(e).buffer}return t&&"object"===Object(r.a)(t)&&t._toArrayBuffer?t._toArrayBuffer():Object(i.a)(!1)}function c(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;for(var r=new Uint8Array(t),i=new Uint8Array(e),o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function l(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e.map((function(t){return t instanceof ArrayBuffer?new Uint8Array(t):t})),o=i.reduce((function(t,e){return t+e.byteLength}),0),s=new Uint8Array(o),u=0,c=a(i);try{for(c.s();!(r=c.n()).done;){var l=r.value;s.set(l,u),u+=l.byteLength}}catch(f){c.e(f)}finally{c.f()}return s.buffer}function f(t,e,n){var r=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}},function(t,e,n){(function(e,r){var i;i=function(t,n,i,o,a,s,u,c,l,f,h,p,d,g){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/namespace/cloudinary-core.js")}({"./src/namespace/cloudinary-core.js":function(t,n,i){"use strict";i.r(n),i.d(n,"ClientHintsMetaTag",(function(){return Rr})),i.d(n,"Cloudinary",(function(){return Jr})),i.d(n,"Condition",(function(){return le})),i.d(n,"Configuration",(function(){return ye})),i.d(n,"crc32",(function(){return u})),i.d(n,"FetchLayer",(function(){return Fe})),i.d(n,"HtmlTag",(function(){return wn})),i.d(n,"ImageTag",(function(){return Qn})),i.d(n,"Layer",(function(){return me})),i.d(n,"PictureTag",(function(){return pr})),i.d(n,"SubtitlesLayer",(function(){return Ie})),i.d(n,"TextLayer",(function(){return Oe})),i.d(n,"Transformation",(function(){return mn})),i.d(n,"utf8_encode",(function(){return s})),i.d(n,"Util",(function(){return a})),i.d(n,"VideoTag",(function(){return Or}));var o={};i.r(o),i.d(o,"VERSION",(function(){return K})),i.d(o,"CF_SHARED_CDN",(function(){return J})),i.d(o,"OLD_AKAMAI_SHARED_CDN",(function(){return $})),i.d(o,"AKAMAI_SHARED_CDN",(function(){return tt})),i.d(o,"SHARED_CDN",(function(){return et})),i.d(o,"DEFAULT_TIMEOUT_MS",(function(){return nt})),i.d(o,"DEFAULT_POSTER_OPTIONS",(function(){return rt})),i.d(o,"DEFAULT_VIDEO_SOURCE_TYPES",(function(){return it})),i.d(o,"SEO_TYPES",(function(){return ot})),i.d(o,"DEFAULT_IMAGE_PARAMS",(function(){return at})),i.d(o,"DEFAULT_VIDEO_PARAMS",(function(){return st})),i.d(o,"DEFAULT_VIDEO_SOURCES",(function(){return ut})),i.d(o,"DEFAULT_EXTERNAL_LIBRARIES",(function(){return ct})),i.d(o,"PLACEHOLDER_IMAGE_MODES",(function(){return lt})),i.d(o,"ACCESSIBILITY_MODES",(function(){return ft})),i.d(o,"URL_KEYS",(function(){return ht}));var a={};i.r(a),i.d(a,"getSDKAnalyticsSignature",(function(){return y})),i.d(a,"getAnalyticsOptions",(function(){return m})),i.d(a,"assign",(function(){return b.a})),i.d(a,"cloneDeep",(function(){return w.a})),i.d(a,"compact",(function(){return E.a})),i.d(a,"difference",(function(){return S.a})),i.d(a,"functions",(function(){return P.a})),i.d(a,"identity",(function(){return C.a})),i.d(a,"includes",(function(){return R.a})),i.d(a,"isArray",(function(){return j.a})),i.d(a,"isPlainObject",(function(){return N.a})),i.d(a,"isString",(function(){return F.a})),i.d(a,"merge",(function(){return z.a})),i.d(a,"contains",(function(){return R.a})),i.d(a,"isIntersectionObserverSupported",(function(){return Y})),i.d(a,"isNativeLazyLoadSupported",(function(){return Q})),i.d(a,"detectIntersection",(function(){return Z})),i.d(a,"omit",(function(){return dt})),i.d(a,"allStrings",(function(){return yt})),i.d(a,"without",(function(){return vt})),i.d(a,"isNumberLike",(function(){return mt})),i.d(a,"smartEscape",(function(){return At})),i.d(a,"defaults",(function(){return bt})),i.d(a,"objectProto",(function(){return _t})),i.d(a,"objToString",(function(){return wt})),i.d(a,"isObject",(function(){return xt})),i.d(a,"funcTag",(function(){return Et})),i.d(a,"reWords",(function(){return St})),i.d(a,"camelCase",(function(){return Tt})),i.d(a,"snakeCase",(function(){return Pt})),i.d(a,"convertKeys",(function(){return Mt})),i.d(a,"withCamelCaseKeys",(function(){return Ct})),i.d(a,"withSnakeCaseKeys",(function(){return It})),i.d(a,"base64Encode",(function(){return Rt})),i.d(a,"base64EncodeURL",(function(){return kt})),i.d(a,"extractUrlParams",(function(){return jt})),i.d(a,"patchFetchFormat",(function(){return Lt})),i.d(a,"optionConsume",(function(){return Nt})),i.d(a,"isEmpty",(function(){return Dt})),i.d(a,"isElement",(function(){return G.a})),i.d(a,"isFunction",(function(){return q.a})),i.d(a,"trim",(function(){return W.a})),i.d(a,"getData",(function(){return Ft})),i.d(a,"setData",(function(){return Bt})),i.d(a,"getAttribute",(function(){return zt})),i.d(a,"setAttribute",(function(){return Ut})),i.d(a,"removeAttribute",(function(){return Gt})),i.d(a,"setAttributes",(function(){return Vt})),i.d(a,"hasClass",(function(){return qt})),i.d(a,"addClass",(function(){return Ht})),i.d(a,"getStyles",(function(){return Wt})),i.d(a,"cssExpand",(function(){return Xt})),i.d(a,"domStyle",(function(){return Yt})),i.d(a,"curCSS",(function(){return Qt})),i.d(a,"cssValue",(function(){return Zt})),i.d(a,"augmentWidthOrHeight",(function(){return Kt})),i.d(a,"getWidthOrHeight",(function(){return $t})),i.d(a,"width",(function(){return te}));var s=function(t){var e,n,r,i,o,a,s,u;if(null===t||"undefined"===typeof t)return"";for(u="",o=void 0,r=void 0,o=r=0,s=(a=t+"").length,i=0;i<s;)n=null,(e=a.charCodeAt(i))<128?r++:n=e>127&&e<2048?String.fromCharCode(e>>6|192,63&e|128):String.fromCharCode(e>>12|224,e>>6&63|128,63&e|128),null!==n&&(r>o&&(u+=a.slice(o,r)),u+=n,o=r=i+1),i++;return r>o&&(u+=a.slice(o,s)),u},u=function(t){var e,n,r,i;for(e=0,i=0,e^=-1,n=0,r=(t=s(t)).length;n<r;)i=255&(e^t.charCodeAt(n)),e=e>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8),n++;return(e^=-1)<0&&(e+=4294967296),e};function c(t,e,n){return e>>=0,n=String("undefined"!==typeof n?n:" "),t.length>e?String(t):((e-=t.length)>n.length&&(n+=function(t,e){for(var n="";e>0;)n+=t,e--;return n}(n,e/n.length)),n.slice(0,e)+String(t))}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f,h=0,p={};(f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",function(t){if(Array.isArray(t))return l(t)}(f)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(f)||function(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){var e=h.toString(2);e=c(e,6,"0"),p[e]=t,h++}));var d=p;function g(t){var e="",n=6*t.split(".").length,r=function(t){if(t.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return t.split(".").reverse().map((function(t){return c(t,2,"0")})).join(".")}(t),i=parseInt(r.split(".").join("")).toString(2);if((i=c(i,n,"0")).length%6!==0)throw"Version must be smaller than 43.21.26)";return i.match(/.{1,6}/g).forEach((function(t){e+=d[t]})),e}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var e=v(t.techVersion),n=g(t.sdkSemver),r=g(e),i=t.feature,o=t.sdkCode,a="A";return"".concat(a).concat(o).concat(n).concat(r).concat(i)}catch(s){return"E"}}function v(t){var e=t.split(".");return"".concat(e[0],".").concat(e[1])}function m(t){var e={sdkSemver:t.sdkSemver,techVersion:t.techVersion,sdkCode:t.sdkCode,feature:"0"};return t.urlAnalytics?(t.accessibility&&(e.feature="D"),"lazy"===t.loading&&(e.feature="C"),t.responsive&&(e.feature="A"),t.placeholder&&(e.feature="B"),e):{}}var A=i("lodash/assign"),b=i.n(A),_=i("lodash/cloneDeep"),w=i.n(_),x=i("lodash/compact"),E=i.n(x),O=i("lodash/difference"),S=i.n(O),T=i("lodash/functions"),P=i.n(T),M=i("lodash/identity"),C=i.n(M),I=i("lodash/includes"),R=i.n(I),k=i("lodash/isArray"),j=i.n(k),L=i("lodash/isPlainObject"),N=i.n(L),D=i("lodash/isString"),F=i.n(D),B=i("lodash/merge"),z=i.n(B),U=i("lodash/isElement"),G=i.n(U),V=i("lodash/isFunction"),q=i.n(V),H=i("lodash/trim"),W=i.n(H);function X(t){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(){return"object"===("undefined"===typeof window?"undefined":X(window))&&window.IntersectionObserver}function Q(){return"object"===("undefined"===typeof HTMLImageElement?"undefined":X(HTMLImageElement))&&HTMLImageElement.prototype.loading}function Z(t,e){try{if(Q()||!Y())return void e();var n=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&(e(),n.unobserve(t.target))}))}),{threshold:[0,.01]});n.observe(t)}catch(r){e()}}var K="2.5.0",J="d3jpl91pxevbkh.cloudfront.net",$="cloudinary-a.akamaihd.net",tt="res.cloudinary.com",et=tt,nt=1e4,rt={format:"jpg",resource_type:"video"},it=["webm","mp4","ogv"],ot={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"},at={resource_type:"image",transformation:[],type:"upload"},st={fallback_content:"",resource_type:"video",source_transformation:{},source_types:it,transformation:[],type:"upload"},ut=[{type:"mp4",codecs:"hev1",transformations:{video_codec:"h265"}},{type:"webm",codecs:"vp9",transformations:{video_codec:"vp9"}},{type:"mp4",transformations:{video_codec:"auto"}},{type:"webm",transformations:{video_codec:"auto"}}],ct={seeThru:"https://unpkg.com/seethru@4/dist/seeThru.min.js"},lt={blur:[{effect:"blur:2000",quality:1,fetch_format:"auto"}],pixelate:[{effect:"pixelate",quality:1,fetch_format:"auto"}],"predominant-color-pixel":[{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:1,height:1,gravity:"north_east"},{fetch_format:"auto",quality:"auto"}],"predominant-color":[{variables:[["$currWidth","w"],["$currHeight","h"]]},{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:10,height:10,gravity:"north_east"},{width:"$currWidth",height:"$currHeight",crop:"fill"},{fetch_format:"auto",quality:"auto"}],vectorize:[{effect:"vectorize:3:0.1",fetch_format:"svg"}]},ft={darkmode:"tint:75:black",brightmode:"tint:50:white",monochrome:"grayscale",colorblind:"assist_colorblind"},ht=["accessibility","api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","placeholder","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","signature","ssl_detected","type","url_suffix","use_root_path","version"];function pt(t){return(pt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){t=t||{};var n=Object.keys(t).filter((function(t){return!R()(e,t)})),r={};return n.forEach((function(e){return r[e]=t[e]})),r}var gt,yt=function(t){return t.length&&t.every(F.a)},vt=function(t,e){return t.filter((function(t){return t!==e}))},mt=function(t){return null!=t&&!isNaN(parseFloat(t))},At=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/([^a-zA-Z0-9_.\-\/:]+)/g;return t.replace(e,(function(t){return t.split("").map((function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})).join("")}))},bt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){var n,r;for(n in e)r=e[n],void 0===t[n]&&(t[n]=r);return t}),t)},_t=Object.prototype,wt=_t.toString,xt=function(t){var e;return e=pt(t),!!t&&("object"===e||"function"===e)},Et="[object Function]",Ot=function(t){return xt(t)&&wt.call(t)===Et},St=RegExp("[A-Z]+(?=[A-Z][a-z]+)|[A-Z]?[a-z]+|[A-Z]+|[0-9]+","g"),Tt=function(t){var e=t.match(St);return(e=e.map((function(t){return t.charAt(0).toLocaleUpperCase()+t.slice(1).toLocaleLowerCase()})))[0]=e[0].toLocaleLowerCase(),e.join("")},Pt=function(t){var e=t.match(St);return(e=e.map((function(t){return t.toLocaleLowerCase()}))).join("_")},Mt=function(t,e){var n,r;for(var i in n={},t)r=t[i],e&&(i=e(i)),Dt(i)||(n[i]=r);return n},Ct=function(t){return Mt(t,Tt)},It=function(t){return Mt(t,Pt)},Rt="undefined"!==typeof btoa&&Ot(btoa)?btoa:"undefined"!==typeof e&&Ot(e)?function(t){return t instanceof e||(t=new e.from(String(t),"binary")),t.toString("base64")}:function(t){throw new Error("No base64 encoding function found")},kt=function(t){try{t=decodeURI(t)}finally{t=encodeURI(t)}return Rt(t)};function jt(t){return ht.reduce((function(e,n){return null!=t[n]&&(e[n]=t[n]),e}),{})}function Lt(t){null==t&&(t={}),"fetch"===t.type&&null==t.fetch_format&&(t.fetch_format=Nt(t,"format"))}function Nt(t,e,n){var r=t[e];return delete t[e],null!=r?r:n}function Dt(t){if(null==t)return!0;if("number"==typeof t.length)return 0===t.length;if("number"==typeof t.size)return 0===t.size;if("object"==pt(t)){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}return!0}var Ft=function(t,e){switch(!1){case!(null==t):return;case!q()(t.getAttribute):return t.getAttribute("data-".concat(e));case!q()(t.getAttr):return t.getAttr("data-".concat(e));case!q()(t.data):return t.data(e);case!(q()("undefined"!==typeof jQuery&&jQuery.fn&&jQuery.fn.data)&&G()(t)):return jQuery(t).data(e)}},Bt=function(t,e,n){switch(!1){case!(null==t):return;case!q()(t.setAttribute):return t.setAttribute("data-".concat(e),n);case!q()(t.setAttr):return t.setAttr("data-".concat(e),n);case!q()(t.data):return t.data(e,n);case!(q()("undefined"!==typeof jQuery&&jQuery.fn&&jQuery.fn.data)&&G()(t)):return jQuery(t).data(e,n)}},zt=function(t,e){switch(!1){case!(null==t):return;case!q()(t.getAttribute):return t.getAttribute(e);case!q()(t.attr):return t.attr(e);case!q()(t.getAttr):return t.getAttr(e)}},Ut=function(t,e,n){switch(!1){case!(null==t):return;case!q()(t.setAttribute):return t.setAttribute(e,n);case!q()(t.attr):return t.attr(e,n);case!q()(t.setAttr):return t.setAttr(e,n)}},Gt=function(t,e){switch(!1){case!(null==t):return;case!q()(t.removeAttribute):return t.removeAttribute(e);default:return Ut(t,void 0)}},Vt=function(t,e){var n,r,i;for(n in r=[],e)null!=(i=e[n])?r.push(Ut(t,n,i)):r.push(Gt(t,n));return r},qt=function(t,e){if(G()(t))return t.className.match(new RegExp("\\b".concat(e,"\\b")))},Ht=function(t,e){if(!t.className.match(new RegExp("\\b".concat(e,"\\b"))))return t.className=W()("".concat(t.className," ").concat(e))},Wt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):window.getComputedStyle(t,null)},Xt=["Top","Right","Bottom","Left"];gt=function(t,e){var n,r;return n=9===t.nodeType?t.documentElement:t,t===(r=e&&e.parentNode)||!(!r||1!==r.nodeType||!n.contains(r))};var Yt=function(t,e){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style)return t.style[e]},Qt=function(t,e,n){var r,i,o,a,s,u;return a=/^margin/,u=void 0,i=void 0,r=void 0,o=void 0,s=t.style,(n=n||Wt(t))&&(o=n.getPropertyValue(e)||n[e]),n&&(""!==o||gt(t.ownerDocument,t)||(o=Yt(t,e)),Jt.test(o)&&a.test(e)&&(u=s.width,i=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=u,s.minWidth=i,s.maxWidth=r)),void 0!==o?o+"":o},Zt=function(t,e,n,r){var i;return i=Qt(t,e,r),n?parseFloat(i):i},Kt=function(t,e,n,r,i){var o,a,s,u,c;if(n===(r?"border":"content"))return 0;for(c=0,o=0,a=(u="width"===e?["Right","Left"]:["Top","Bottom"]).length;o<a;o++)s=u[o],"margin"===n&&(c+=Zt(t,n+s,!0,i)),r?("content"===n&&(c-=Zt(t,"padding".concat(s),!0,i)),"margin"!==n&&(c-=Zt(t,"border".concat(s,"Width"),!0,i))):(c+=Zt(t,"padding".concat(s),!0,i),"padding"!==n&&(c+=Zt(t,"border".concat(s,"Width"),!0,i)));return c},Jt=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),$t=function(t,e,n){var r,i,o,a;if(a=!0,o="width"===e?t.offsetWidth:t.offsetHeight,i=Wt(t),r="border-box"===Zt(t,"boxSizing",!1,i),o<=0||null==o){if(((o=Qt(t,e,i))<0||null==o)&&(o=t.style[e]),Jt.test(o))return o;a=r&&o===t.style[e],o=parseFloat(o)||0}return o+Kt(t,e,n||(r?"border":"content"),a,i)},te=function(t){return $t(t,"width","content")};function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expressions=[],null!=e&&this.expressions.push(t.normalize(e))}var e,n,r;return e=t,r=[{key:"new",value:function(t){return new this(t)}},{key:"normalize",value:function(e){var n,r,i;return null==e?e:(e=String(e),n=new RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g"),e=e.replace(n,(function(e){return t.OPERATORS[e]})),r="("+Object.keys(t.PREDEFINED_VARS).join("|")+")",i=new RegExp(r,"g"),(e=e.replace(i,(function(n,r,i){return"$"===e[i-1]?n:t.PREDEFINED_VARS[n]}))).replace(/[ _]+/g,"_"))}},{key:"variable",value:function(t,e){return new this(t).value(e)}},{key:"width",value:function(){return new this("width")}},{key:"height",value:function(){return new this("height")}},{key:"initialWidth",value:function(){return new this("initialWidth")}},{key:"initialHeight",value:function(){return new this("initialHeight")}},{key:"aspectRatio",value:function(){return new this("aspectRatio")}},{key:"initialAspectRatio",value:function(){return new this("initialAspectRatio")}},{key:"pageCount",value:function(){return new this("pageCount")}},{key:"faceCount",value:function(){return new this("faceCount")}},{key:"currentPage",value:function(){return new this("currentPage")}},{key:"tags",value:function(){return new this("tags")}},{key:"pageX",value:function(){return new this("pageX")}},{key:"pageY",value:function(){return new this("pageY")}}],(n=[{key:"serialize",value:function(){return t.normalize(this.expressions.join("_"))}},{key:"toString",value:function(){return this.serialize()}},{key:"getParent",value:function(){return this.parent}},{key:"setParent",value:function(t){return this.parent=t,this}},{key:"predicate",value:function(e,n,r){return null!=t.OPERATORS[n]&&(n=t.OPERATORS[n]),this.expressions.push("".concat(e,"_").concat(n,"_").concat(r)),this}},{key:"and",value:function(){return this.expressions.push("and"),this}},{key:"or",value:function(){return this.expressions.push("or"),this}},{key:"then",value:function(){return this.getParent().if(this.toString())}},{key:"height",value:function(t,e){return this.predicate("h",t,e)}},{key:"width",value:function(t,e){return this.predicate("w",t,e)}},{key:"aspectRatio",value:function(t,e){return this.predicate("ar",t,e)}},{key:"pageCount",value:function(t,e){return this.predicate("pc",t,e)}},{key:"faceCount",value:function(t,e){return this.predicate("fc",t,e)}},{key:"value",value:function(t){return this.expressions.push(t),this}}])&&ee(e.prototype,n),r&&ee(e,r),t}();ne.OPERATORS={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},ne.PREDEFINED_VARS={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp","preview:duration":"preview:duration",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_duration:"idu",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialDuration:"idu",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},ne.BOUNDRY="[ _]+";var re=ne;function ie(t){return(ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function se(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){return!e||"object"!==ie(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var le=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(o,t);var e,n,r,i=se(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t)}return e=o,(n=[{key:"height",value:function(t,e){return this.predicate("h",t,e)}},{key:"width",value:function(t,e){return this.predicate("w",t,e)}},{key:"aspectRatio",value:function(t,e){return this.predicate("ar",t,e)}},{key:"pageCount",value:function(t,e){return this.predicate("pc",t,e)}},{key:"faceCount",value:function(t,e){return this.predicate("fc",t,e)}},{key:"duration",value:function(t,e){return this.predicate("du",t,e)}},{key:"initialDuration",value:function(t,e){return this.predicate("idu",t,e)}}])&&oe(e.prototype,n),r&&oe(e,r),o}(re);function fe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return he(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var de=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.configuration=null==e?{}:w()(e),bt(this.configuration,ge)}var e,n,i;return e=t,(n=[{key:"init",value:function(){return this.fromEnvironment(),this.fromDocument(),this}},{key:"set",value:function(t,e){return this.configuration[t]=e,this}},{key:"get",value:function(t){return this.configuration[t]}},{key:"merge",value:function(t){return b()(this.configuration,w()(t)),this}},{key:"fromDocument",value:function(){var t,e,n,r;if(r="undefined"!==typeof document&&null!==document?document.querySelectorAll('meta[name^="cloudinary_"]'):void 0)for(e=0,n=r.length;e<n;e++)t=r[e],this.configuration[t.getAttribute("name").replace("cloudinary_","")]=t.getAttribute("content");return this}},{key:"fromEnvironment",value:function(){var t,e,n,i=this;return"undefined"!==typeof r&&null!==r&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLOUDINARY_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLOUDINARY_URL,(n=/cloudinary:\/\/(?:(\w+)(?:\:([\w-]+))?@)?([\w\.-]+)(?:\/([^?]*))?(?:\?(.+))?/.exec(t))&&(null!=n[3]&&(this.configuration.cloud_name=n[3]),null!=n[1]&&(this.configuration.api_key=n[1]),null!=n[2]&&(this.configuration.api_secret=n[2]),null!=n[4]&&(this.configuration.private_cdn=null!=n[4]),null!=n[4]&&(this.configuration.secure_distribution=n[4]),null!=(e=n[5])&&e.split("&").forEach((function(t){var e=fe(t.split("="),2),n=e[0],r=e[1];null==r&&(r=!0),i.configuration[n]=r})))),this}},{key:"config",value:function(t,e){switch(!1){case void 0===e:return this.set(t,e),this.configuration;case!F()(t):return this.get(t);case!N()(t):return this.merge(t),this.configuration;default:return this.configuration}}},{key:"toOptions",value:function(){return w()(this.configuration)}}])&&pe(e.prototype,n),i&&pe(e,i),t}(),ge={responsive_class:"cld-responsive",responsive_use_breakpoints:!0,round_dpr:!0,secure:"https:"===("undefined"!==typeof window&&null!==window&&window.location?window.location.protocol:void 0)};de.CONFIG_PARAMS=["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version","externalLibraries","max_timeout_ms"];var ye=de;function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var me=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={},null!=e&&["resourceType","type","publicId","format"].forEach((function(t){var r;return n.options[t]=null!=(r=e[t])?r:e[Pt(t)]}))}var e,n,r;return e=t,(n=[{key:"resourceType",value:function(t){return this.options.resourceType=t,this}},{key:"type",value:function(t){return this.options.type=t,this}},{key:"publicId",value:function(t){return this.options.publicId=t,this}},{key:"getPublicId",value:function(){var t;return null!=(t=this.options.publicId)?t.replace(/\//g,":"):void 0}},{key:"getFullPublicId",value:function(){return null!=this.options.format?this.getPublicId()+"."+this.options.format:this.getPublicId()}},{key:"format",value:function(t){return this.options.format=t,this}},{key:"toString",value:function(){var t;if(t=[],null==this.options.publicId)throw"Must supply publicId";return"image"!==this.options.resourceType&&t.push(this.options.resourceType),"upload"!==this.options.type&&t.push(this.options.type),t.push(this.getFullPublicId()),E()(t).join(":")}},{key:"clone",value:function(){return new this.constructor(this.options)}}])&&ve(e.prototype,n),r&&ve(e,r),t}();function Ae(t){return(Ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function we(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var i=Ee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(t,e){return!e||"object"!==Ae(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oe=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(o,t);var e,n,r,i=we(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),null!=t&&["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","fontHinting","fontAntialiasing","text"].forEach((function(n){var r;return e.options[n]=null!=(r=t[n])?r:t[Pt(n)]})),e.options.resourceType="text",e}return e=o,(n=[{key:"resourceType",value:function(t){throw"Cannot modify resourceType for text layers"}},{key:"type",value:function(t){throw"Cannot modify type for text layers"}},{key:"format",value:function(t){throw"Cannot modify format for text layers"}},{key:"fontFamily",value:function(t){return this.options.fontFamily=t,this}},{key:"fontSize",value:function(t){return this.options.fontSize=t,this}},{key:"fontWeight",value:function(t){return this.options.fontWeight=t,this}},{key:"fontStyle",value:function(t){return this.options.fontStyle=t,this}},{key:"textDecoration",value:function(t){return this.options.textDecoration=t,this}},{key:"textAlign",value:function(t){return this.options.textAlign=t,this}},{key:"stroke",value:function(t){return this.options.stroke=t,this}},{key:"letterSpacing",value:function(t){return this.options.letterSpacing=t,this}},{key:"lineSpacing",value:function(t){return this.options.lineSpacing=t,this}},{key:"fontHinting",value:function(t){return this.options.fontHinting=t,this}},{key:"fontAntialiasing",value:function(t){return this.options.fontAntialiasing=t,this}},{key:"text",value:function(t){return this.options.text=t,this}},{key:"toString",value:function(){var t,e,n,r,i,o,a,s,u,c;if(s=this.textStyleIdentifier(),null!=this.options.publicId&&(r=this.getFullPublicId()),null!=this.options.text){if(e=!Dt(r),n=!Dt(s),e&&n||!e&&!n)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";for(i=/\$\([a-zA-Z]\w*\)/g,a=0,c=At(this.options.text,/[,\/]/g),u="";o=i.exec(c);)u+=At(c.slice(a,o.index)),u+=o[0],a=o.index+o[0].length;u+=At(c.slice(a))}return t=[this.options.resourceType,s,r,u],E()(t).join(":")}},{key:"textStyleIdentifier",value:function(){var t;if(t=[],"normal"!==this.options.fontWeight&&t.push(this.options.fontWeight),"normal"!==this.options.fontStyle&&t.push(this.options.fontStyle),"none"!==this.options.textDecoration&&t.push(this.options.textDecoration),t.push(this.options.textAlign),"none"!==this.options.stroke&&t.push(this.options.stroke),Dt(this.options.letterSpacing)&&!mt(this.options.letterSpacing)||t.push("letter_spacing_"+this.options.letterSpacing),Dt(this.options.lineSpacing)&&!mt(this.options.lineSpacing)||t.push("line_spacing_"+this.options.lineSpacing),Dt(this.options.fontAntialiasing)||t.push("antialias_"+this.options.fontAntialiasing),Dt(this.options.fontHinting)||t.push("hinting_"+this.options.fontHinting),!Dt(E()(t))){if(Dt(this.options.fontFamily))throw"Must supply fontFamily. ".concat(t);if(Dt(this.options.fontSize)&&!mt(this.options.fontSize))throw"Must supply fontSize."}return t.unshift(this.options.fontFamily,this.options.fontSize),t=E()(t).join("_")}}])&&be(e.prototype,n),r&&be(e,r),o}(me);function Se(t){return(Se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){return(Te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ce(t);if(e){var i=Ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(t,e){return!e||"object"!==Se(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ie=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Te(t,e)}(n,t);var e=Pe(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t)).options.resourceType="subtitles",r}return n}(Oe);function Re(t){return(Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Le(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=De(t);if(e){var i=De(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ne(t,e){return!e||"object"!==Re(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fe=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(o,t);var e,n,r,i=Le(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),F()(t)?e.options.url=t:(null!=t?t.url:void 0)&&(e.options.url=t.url),e}return e=o,(n=[{key:"url",value:function(t){return this.options.url=t,this}},{key:"toString",value:function(){return"fetch:".concat(kt(this.options.url))}}])&&ke(e.prototype,n),r&&ke(e,r),o}(me);function Be(t){return(Be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e,n){return(ze="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=He(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ue(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ge(t,e)}function Ge(t,e){return(Ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=He(t);if(e){var i=He(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(t,e){return!e||"object"!==Be(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ye(t,e,n){return e&&Xe(t.prototype,e),n&&Xe(t,n),t}var Qe=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.a;We(this,t),this.name=e,this.shortName=n,this.process=r}return Ye(t,[{key:"set",value:function(t){return this.origValue=t,this}},{key:"serialize",value:function(){var t,e;return t=this.value(),e=j()(t)||N()(t)||F()(t)?!Dt(t):null!=t,null!=this.shortName&&e?"".concat(this.shortName,"_").concat(t):""}},{key:"value",value:function(){return this.process(this.origValue)}}],[{key:"norm_color",value:function(t){return null!=t?t.replace(/^#/,"rgb:"):void 0}},{key:"build_array",value:function(t){return null==t?[]:j()(t)?t:[t]}},{key:"process_video_params",value:function(t){var e;switch(t.constructor){case Object:return e="","codec"in t&&(e=t.codec,"profile"in t&&(e+=":"+t.profile,"level"in t&&(e+=":"+t.level))),e;case String:return t;default:return null}}}]),t}(),Ze=function(t){Ue(n,t);var e=Ve(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return We(this,n),(i=e.call(this,t,r,a)).sep=o,i}return Ye(n,[{key:"serialize",value:function(){if(null!=this.shortName){var t=this.value();if(Dt(t))return"";if(F()(t))return"".concat(this.shortName,"_").concat(t);var e=t.map((function(t){return q()(t.serialize)?t.serialize():t})).join(this.sep);return"".concat(this.shortName,"_").concat(e)}return""}},{key:"value",value:function(){var t=this;return j()(this.origValue)?this.origValue.map((function(e){return t.process(e)})):this.process(this.origValue)}},{key:"set",value:function(t){return null==t||j()(t)?ze(He(n.prototype),"set",this).call(this,t):ze(He(n.prototype),"set",this).call(this,[t])}}]),n}(Qe),Ke=function(t){Ue(n,t);var e=Ve(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return We(this,n),(r=e.call(this,t,i,a)).sep=o,r}return Ye(n,[{key:"serialize",value:function(){var t=this,e="",n=this.value();if(Dt(n))return e;if(yt(n)){var r=n.join(this.sep);Dt(r)||(e="".concat(this.shortName,"_").concat(r))}else e=n.map((function(e){return F()(e)&&!Dt(e)?"".concat(t.shortName,"_").concat(e):q()(e.serialize)?e.serialize():N()(e)&&!Dt(e)?new mn(e).serialize():void 0})).filter((function(t){return t}));return e}},{key:"set",value:function(t){return this.origValue=t,j()(this.origValue)?ze(He(n.prototype),"set",this).call(this,this.origValue):ze(He(n.prototype),"set",this).call(this,[this.origValue])}}]),n}(Qe),Je=function(t){Ue(n,t);var e=Ve(n);function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.norm_range_value;return We(this,n),e.call(this,t,r,i)}return Ye(n,null,[{key:"norm_range_value",value:function(t){var e=String(t).match(new RegExp("^(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?$"));if(e){var n=null!=e[5]?"p":"";t=(e[1]||e[4])+n}return t}}]),n}(Qe),$e=function(t){Ue(n,t);var e=Ve(n);function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.a;return We(this,n),e.call(this,t,r,i)}return Ye(n,[{key:"serialize",value:function(){return this.value()}}]),n}(Qe),tn=function(t){Ue(n,t);var e=Ve(n);function n(){return We(this,n),e.apply(this,arguments)}return Ye(n,[{key:"value",value:function(){if(null==this.origValue)return"";var t;if(this.origValue instanceof me)t=this.origValue;else if(N()(this.origValue)){var e=Ct(this.origValue);t="text"===e.resourceType||null!=e.text?new Oe(e):"subtitles"===e.resourceType?new Ie(e):"fetch"===e.resourceType||null!=e.url?new Fe(e):new me(e)}else t=F()(this.origValue)?/^fetch:.+/.test(this.origValue)?new Fe(this.origValue.substr(6)):this.origValue:"";return t.toString()}}],[{key:"textStyle",value:function(t){return new Oe(t).textStyleIdentifier()}}]),n}(Qe);function en(t){return(en="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=an(t);if(e){var i=an(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return on(this,n)}}function on(t,e){return!e||"object"!==en(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fn(t,e,n){return e&&ln(t.prototype,e),n&&ln(t,n),t}function hn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach((function(e){Object.keys(e).forEach((function(n){null!=e[n]&&(t[n]=e[n])}))})),t}var pn=function(){function t(e){var n,r;cn(this,t),n=void 0,r={},this.toOptions=function(t){var e={};if(null==t&&(t=!0),Object.keys(r).forEach((function(t){return e[t]=r[t].origValue})),hn(e,this.otherOptions),t&&!Dt(this.chained)){var n=this.chained.map((function(t){return t.toOptions()}));n.push(e),hn(e={},this.otherOptions),e.transformation=n}return e},this.setParent=function(t){return n=t,null!=t&&this.fromOptions("function"===typeof t.toOptions?t.toOptions():void 0),this},this.getParent=function(){return n},this.param=function(t,e,n,i,o){return null==o&&(o=q()(i)?i:C.a),r[e]=new Qe(e,n,o).set(t),this},this.rawParam=function(t,e,n,i,o){return o=gn(arguments),r[e]=new $e(e,n,o).set(t),this},this.rangeParam=function(t,e,n,i,o){return o=gn(arguments),r[e]=new Je(e,n,o).set(t),this},this.arrayParam=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:":",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return o=gn(arguments),r[e]=new Ze(e,n,i,o).set(t),this},this.transformationParam=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return o=gn(arguments),r[e]=new Ke(e,n,i,o).set(t),this},this.layerParam=function(t,e,n){return r[e]=new tn(e,n).set(t),this},this.getValue=function(t){var e=r[t]&&r[t].value();return null!=e?e:this.otherOptions[t]},this.get=function(t){return r[t]},this.remove=function(t){var e;switch(!1){case null==r[t]:return e=r[t],delete r[t],e.origValue;case null==this.otherOptions[t]:return e=this.otherOptions[t],delete this.otherOptions[t],e;default:return null}},this.keys=function(){var t;return function(){var e;for(t in e=[],r)null!=t&&e.push(t.match(dn)?t:Pt(t));return e}().sort()},this.toPlainObject=function(){var t,e,n;for(e in t={},r)t[e]=r[e].value(),N()(t[e])&&(t[e]=w()(t[e]));return Dt(this.chained)||((n=this.chained.map((function(t){return t.toPlainObject()}))).push(t),t={transformation:n}),t},this.chain=function(){var t;return 0!==Object.getOwnPropertyNames(r).length&&(t=new this.constructor(this.toOptions(!1)),this.resetTransformations(),this.chained.push(t)),this},this.resetTransformations=function(){return r={},this},this.otherOptions={},this.chained=[],this.fromOptions(e)}return fn(t,[{key:"fromOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e instanceof t)this.fromTransformation(e);else for(var n in(F()(e)||j()(e))&&(e={transformation:e}),(e=w()(e,(function(e){if(e instanceof t||e instanceof Layer)return new e.clone}))).if&&(this.set("if",e.if),delete e.if),e){var r=e[n];null!=r&&(n.match(dn)?"$attr"!==n&&this.set("variable",n,r):this.set(n,r))}return this}},{key:"fromTransformation",value:function(e){var n=this;return e instanceof t&&e.keys().forEach((function(t){return n.set(t,e.get(t).origValue)})),this}},{key:"set",value:function(t){var e;e=Tt(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return R()(vn.methods,e)?this[e].apply(this,r):this.otherOptions[t]=r[0],this}},{key:"hasLayer",value:function(){return this.getValue("overlay")||this.getValue("underlay")}},{key:"serialize",value:function(){var t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,g,y;for(c=this.chained.map((function(t){return t.serialize()})),r=this.keys(),p=null!=(i=this.get("transformation"))?i.serialize():void 0,t=null!=(o=this.get("if"))?o.serialize():void 0,g=function(t){var e,n,r,i,o;if(j()(t)){for(i=[],e=0,n=t.length;e<n;e++){var a=sn(t[e],2);r=a[0],o=a[1],i.push("".concat(r,"_").concat(re.normalize(o)))}return i}return t}(null!=(a=this.get("variables"))?a.value():void 0),r=S()(r,["transformation","if","variables"]),y=[],f=[],e=0,n=r.length;e<n;e++)(l=r[e]).match(dn)?y.push(l+"_"+re.normalize(null!=(s=this.get(l))?s.value():void 0)):f.push(null!=(u=this.get(l))?u.serialize():void 0);switch(!1){case!F()(p):f.push(p);break;case!j()(p):c=c.concat(p)}return f=function(){var t,e,n;for(n=[],t=0,e=f.length;t<e;t++)d=f[t],(j()(d)&&!Dt(d)||!j()(d)&&d)&&n.push(d);return n}(),f=y.sort().concat(g).concat(f.sort()),"if_end"===t?f.push(t):Dt(t)||f.unshift(t),Dt(h=E()(f).join(this.param_separator))||c.push(h),E()(c).join(this.trans_separator)}},{key:"toHtmlAttributes",value:function(){var t,e,n,r,i,o,a,s,u=this;return n={},Object.keys(this.otherOptions).forEach((function(e){o=u.otherOptions[e],s=Pt(e),R()(vn.PARAM_NAMES,s)||R()(ht,s)||(t=/^html_/.test(e)?e.slice(5):e,n[t]=o)})),this.keys().forEach((function(t){/^html_/.test(t)&&(n[Tt(t.slice(5))]=u.getValue(t))})),this.hasLayer()||this.getValue("angle")||R()(["fit","limit","lfill"],this.getValue("crop"))||(a=null!=(r=this.get("width"))?r.origValue:void 0,e=null!=(i=this.get("height"))?i.origValue:void 0,parseFloat(a)>=1&&null==n.width&&(n.width=a),parseFloat(e)>=1&&null==n.height&&(n.height=e)),n}},{key:"toHtml",value:function(){var t;return null!=(t=this.getParent())&&"function"===typeof t.toHtml?t.toHtml():void 0}},{key:"toString",value:function(){return this.serialize()}},{key:"clone",value:function(){return new this.constructor(this.toOptions(!0))}}],[{key:"listNames",value:function(){return vn.methods}},{key:"isValidParamName",value:function(t){return vn.methods.indexOf(Tt(t))>=0}}]),t}(),dn=/^\$[a-zA-Z0-9]+$/;function gn(t){var e;return e=null!=t?t[t.length-1]:void 0,q()(e)?e:void 0}function yn(t){var e=t.function_type,n=t.source;return"remote"===e?[e,btoa(n)].join(":"):"wasm"===e?[e,n].join(":"):void 0}pn.prototype.trans_separator="/",pn.prototype.param_separator=",";var vn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(n,t);var e=rn(n);function n(t){return cn(this,n),e.call(this,t)}return fn(n,[{key:"angle",value:function(t){return this.arrayParam(t,"angle","a",".",re.normalize)}},{key:"audioCodec",value:function(t){return this.param(t,"audio_codec","ac")}},{key:"audioFrequency",value:function(t){return this.param(t,"audio_frequency","af")}},{key:"aspectRatio",value:function(t){return this.param(t,"aspect_ratio","ar",re.normalize)}},{key:"background",value:function(t){return this.param(t,"background","b",Qe.norm_color)}},{key:"bitRate",value:function(t){return this.param(t,"bit_rate","br")}},{key:"border",value:function(t){return this.param(t,"border","bo",(function(t){return N()(t)?(t=b()({},{color:"black",width:2},t),"".concat(t.width,"px_solid_").concat(Qe.norm_color(t.color))):t}))}},{key:"color",value:function(t){return this.param(t,"color","co",Qe.norm_color)}},{key:"colorSpace",value:function(t){return this.param(t,"color_space","cs")}},{key:"crop",value:function(t){return this.param(t,"crop","c")}},{key:"customFunction",value:function(t){return this.param(t,"custom_function","fn",(function(){return yn(t)}))}},{key:"customPreFunction",value:function(t){if(!this.get("custom_function"))return this.rawParam(t,"custom_function","",(function(){return(t=yn(t))?"fn_pre:".concat(t):t}))}},{key:"defaultImage",value:function(t){return this.param(t,"default_image","d")}},{key:"delay",value:function(t){return this.param(t,"delay","dl")}},{key:"density",value:function(t){return this.param(t,"density","dn")}},{key:"duration",value:function(t){return this.rangeParam(t,"duration","du")}},{key:"dpr",value:function(t){return this.param(t,"dpr","dpr",(function(t){return(null!=(t=t.toString())?t.match(/^\d+$/):void 0)?t+".0":re.normalize(t)}))}},{key:"effect",value:function(t){return this.arrayParam(t,"effect","e",":",re.normalize)}},{key:"else",value:function(){return this.if("else")}},{key:"endIf",value:function(){return this.if("end")}},{key:"endOffset",value:function(t){return this.rangeParam(t,"end_offset","eo")}},{key:"fallbackContent",value:function(t){return this.param(t,"fallback_content")}},{key:"fetchFormat",value:function(t){return this.param(t,"fetch_format","f")}},{key:"format",value:function(t){return this.param(t,"format")}},{key:"flags",value:function(t){return this.arrayParam(t,"flags","fl",".")}},{key:"gravity",value:function(t){return this.param(t,"gravity","g")}},{key:"fps",value:function(t){return this.param(t,"fps","fps",(function(t){return F()(t)?t:j()(t)?t.join("-"):t}))}},{key:"height",value:function(t){var e=this;return this.param(t,"height","h",(function(){return e.getValue("crop")||e.getValue("overlay")||e.getValue("underlay")?re.normalize(t):null}))}},{key:"htmlHeight",value:function(t){return this.param(t,"html_height")}},{key:"htmlWidth",value:function(t){return this.param(t,"html_width")}},{key:"if",value:function(){var t,e,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(a){case"else":return this.chain(),this.param(a,"if","if");case"end":for(this.chain(),t=r=this.chained.length-1;r>=0&&"end"!==(e=this.chained[t].getValue("if"))&&(null==e||(i=n.new().if(e),this.chained[t].remove("if"),o=this.chained[t],this.chained[t]=n.new().transformation([i,o]),"else"===e));t=r+=-1);return this.param(a,"if","if");case"":return le.new().setParent(this);default:return this.param(a,"if","if",(function(t){return le.new(t).toString()}))}}},{key:"keyframeInterval",value:function(t){return this.param(t,"keyframe_interval","ki")}},{key:"ocr",value:function(t){return this.param(t,"ocr","ocr")}},{key:"offset",value:function(t){var e,n,r=sn(q()(null!=t?t.split:void 0)?t.split(".."):j()(t)?t:[null,null],2);if(n=r[0],e=r[1],null!=n&&this.startOffset(n),null!=e)return this.endOffset(e)}},{key:"opacity",value:function(t){return this.param(t,"opacity","o",re.normalize)}},{key:"overlay",value:function(t){return this.layerParam(t,"overlay","l")}},{key:"page",value:function(t){return this.param(t,"page","pg")}},{key:"poster",value:function(t){return this.param(t,"poster")}},{key:"prefix",value:function(t){return this.param(t,"prefix","p")}},{key:"quality",value:function(t){return this.param(t,"quality","q",re.normalize)}},{key:"radius",value:function(t){return this.arrayParam(t,"radius","r",":",re.normalize)}},{key:"rawTransformation",value:function(t){return this.rawParam(t,"raw_transformation")}},{key:"size",value:function(t){var e,n;if(q()(null!=t?t.split:void 0)){var r=sn(t.split("x"),2);return n=r[0],e=r[1],this.width(n),this.height(e)}}},{key:"sourceTypes",value:function(t){return this.param(t,"source_types")}},{key:"sourceTransformation",value:function(t){return this.param(t,"source_transformation")}},{key:"startOffset",value:function(t){return this.rangeParam(t,"start_offset","so")}},{key:"streamingProfile",value:function(t){return this.param(t,"streaming_profile","sp")}},{key:"transformation",value:function(t){return this.transformationParam(t,"transformation","t")}},{key:"underlay",value:function(t){return this.layerParam(t,"underlay","u")}},{key:"variable",value:function(t,e){return this.param(e,t,t)}},{key:"variables",value:function(t){return this.arrayParam(t,"variables")}},{key:"videoCodec",value:function(t){return this.param(t,"video_codec","vc",Qe.process_video_params)}},{key:"videoSampling",value:function(t){return this.param(t,"video_sampling","vs")}},{key:"width",value:function(t){var e=this;return this.param(t,"width","w",(function(){return e.getValue("crop")||e.getValue("overlay")||e.getValue("underlay")?re.normalize(t):null}))}},{key:"x",value:function(t){return this.param(t,"x","x",re.normalize)}},{key:"y",value:function(t){return this.param(t,"y","y",re.normalize)}},{key:"zoom",value:function(t){return this.param(t,"zoom","z",re.normalize)}}],[{key:"new",value:function(t){return new n(t)}}]),n}(pn);vn.methods=["angle","audioCodec","audioFrequency","aspectRatio","background","bitRate","border","color","colorSpace","crop","customFunction","customPreFunction","defaultImage","delay","density","duration","dpr","effect","else","endIf","endOffset","fallbackContent","fetchFormat","format","flags","gravity","fps","height","htmlHeight","htmlWidth","if","keyframeInterval","ocr","offset","opacity","overlay","page","poster","prefix","quality","radius","rawTransformation","size","sourceTypes","sourceTransformation","startOffset","streamingProfile","transformation","underlay","variable","variables","videoCodec","videoSampling","width","x","y","zoom"],vn.PARAM_NAMES=vn.methods.map(Pt).concat(ye.CONFIG_PARAMS);var mn=vn;function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bn(t,e){return e?!0===e?t:"".concat(t,'="').concat(e,'"'):void 0}function _n(t){return F()(t)?t.replace('"',"&#34;").replace("'","&#39;"):t}var wn=function(){function t(e,n,r){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.publicId=n,null==r&&(N()(n)?(r=n,this.publicId=void 0):r={}),(i=new mn(r)).setParent(this),this.transformation=function(){return i}}var e,n,r;return e=t,r=[{key:"new",value:function(t,e,n){return new this(t,e,n)}},{key:"isResponsive",value:function(t,e){var n;return n=Ft(t,"src-cache")||Ft(t,"src"),qt(t,e)&&/\bw_auto\b/.exec(n)}}],(n=[{key:"htmlAttrs",value:function(t){var e,n;return function(){var r;for(e in r=[],t)(n=_n(t[e]))&&r.push(bn(e,n));return r}().sort().join(" ")}},{key:"getOptions",value:function(){return this.transformation().toOptions()}},{key:"getOption",value:function(t){return this.transformation().getValue(t)}},{key:"attributes",value:function(){var t=this.transformation().toHtmlAttributes();return Object.keys(t).forEach((function(e){N()(t[e])&&delete t[e]})),t.attributes&&(z()(t,t.attributes),delete t.attributes),t}},{key:"setAttr",value:function(t,e){return this.transformation().set("html_".concat(t),e),this}},{key:"getAttr",value:function(t){return this.attributes()["html_".concat(t)]||this.attributes()[t]}},{key:"removeAttr",value:function(t){var e;return null!=(e=this.transformation().remove("html_".concat(t)))?e:this.transformation().remove(t)}},{key:"content",value:function(){return""}},{key:"openTag",value:function(){var t="<"+this.name,e=this.htmlAttrs(this.attributes());return e&&e.length>0&&(t+=" "+e),t+">"}},{key:"closeTag",value:function(){return"</".concat(this.name,">")}},{key:"toHtml",value:function(){return this.openTag()+this.content()+this.closeTag()}},{key:"toDOM",value:function(){var t,e,n,r;if(!q()("undefined"!==typeof document&&null!==document?document.createElement:void 0))throw"Can't create DOM if document is not present!";for(e in t=document.createElement(this.name),n=this.attributes())r=n[e],t.setAttribute(e,r);return t}}])&&An(e.prototype,n),r&&An(e,r),t}();function xn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function En(t){return!!t&&!!t.match(/^https?:\//)}function On(t,e){if(e.cloud_name&&"/"===e.cloud_name[0])return"/res"+e.cloud_name;var n="http://",r="",i="res",o=".cloudinary.com",a="/"+e.cloud_name;return e.protocol&&(n=e.protocol+"//"),e.private_cdn&&(r=e.cloud_name+"-",a=""),e.cdn_subdomain&&(i="res-"+function(t){return u(t)%5+1}(t)),e.secure?(n="https://",!1===e.secure_cdn_subdomain&&(i="res"),null!=e.secure_distribution&&e.secure_distribution!==$&&e.secure_distribution!==et&&(r="",i="",o=e.secure_distribution)):e.cname&&(n="http://",r="",i=e.cdn_subdomain?"a"+(u(t)%5+1)+".":"",o=e.cname),[n,r,i,o,a].join("")}function Sn(t){return encodeURIComponent(t).replace(/%3A/g,":").replace(/%2F/g,"/")}function Tn(t){var e=t.cloud_name,n=t.url_suffix;return e?n&&n.match(/[\.\/]/)?"url_suffix should not include . or /":void 0:"Unknown cloud_name"}function Pn(t,e){var n=e.type;return En(t)||"fetch"!==n?t:function(t){var e=document.location.protocol+"//"+document.location.host;return"?"===t[0]?e+=document.location.pathname:"/"!==t[0]&&(e+=document.location.pathname.replace(/\/[^\/]*$/,"/")),e+t}(t)}function Mn(t,e){if(En(t)&&("upload"===e.type||"asset"===e.type))return t;var n=function(t,e){var n=e.force_version||"undefined"===typeof e.force_version,r=t.indexOf("/")<0||t.match(/^v[0-9]+/)||En(t)||e.version;return n&&!r&&(e.version=1),e.version?"v".concat(e.version):""}(t,e),r=function(t){var e=t||{},n=e.placeholder,r=e.accessibility,i=xn(e,["placeholder","accessibility"]),o=new mn(i);return r&&ft[r]&&o.chain().effect(ft[r]),n&&("predominant-color"===n&&o.getValue("width")&&o.getValue("height")&&(n+="-pixel"),(lt[n]||lt.blur).forEach((function(t){return o.chain().transformation(t)}))),o.serialize()}(e),i=On(t,e),o=function(t){var e=t.signature,n=!e||0===e.indexOf("s--")&&"--"===e.substr(-2);return delete t.signature,n?e:"s--".concat(e,"--")}(e),a=function(t){var e,n=t.resource_type,r=void 0===n?"image":n,i=t.type,o=void 0===i?"upload":i,a=t.url_suffix,s=t.use_root_path,u=t.shorten,c=r;if(N()(c)&&(c=(e=c).resource_type,o=e.type,u=e.shorten),null==o&&(o="upload"),null!=a&&(c=ot["".concat(c,"/").concat(o)],o=null,null==c))throw new Error("URL Suffix only supported for ".concat(Object.keys(ot).join(", ")));if(s){if(("image"!==c||"upload"!==o)&&"images"!==c)throw new Error("Root path only supported for image/upload");c=null,o=null}return u&&"image"===c&&"upload"===o&&(c="iu",o=null),[c,o].join("/")}(e);return t=function(t,e){if(En(t))t=Sn(t);else{try{t=decodeURIComponent(t)}catch(n){}t=Sn(t),e.url_suffix&&(t=t+"/"+e.url_suffix),e.format&&(e.trust_public_id||(t=t.replace(/\.(jpg|png|gif|webp)$/,"")),t=t+"."+e.format)}return t}(t,e),E()([i,a,o,r,n,t]).join("/").replace(/([^:])\/+/g,"$1/").replace(" ","%20")}function Cn(t,e){return t instanceof mn&&(t=t.toOptions()),"fetch"===(t=bt({},t,e,at)).type&&(t.fetch_format=t.fetch_format||t.format),t}function In(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return t;t=Pn(t,e=Cn(e,n));var r=Tn(e);if(r)throw r;var i=Mn(t,e);if(e.urlAnalytics){var o=m(e),a=y(o),s="?";i.indexOf("?")>=0&&(s="&"),i="".concat(i).concat(s,"_a=").concat(a)}return i}function Rn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return kn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t){var e=t.breakpoints||[];if(e.length)return e;var n=Rn([t.min_width,t.max_width,t.max_images].map(Number),3),r=n[0],i=n[1],o=n[2];if([r,i,o].some(isNaN))throw"Either (min_width, max_width, max_images) or breakpoints must be provided to the image srcset attribute";if(r>i)throw"min_width must be less than max_width";if(o<=0)throw"max_images must be a positive integer";1===o&&(r=i);for(var a=Math.ceil((i-r)/Math.max(o-1,1)),s=r;s<i;s+=a)e.push(s);return e.push(i),e}var Ln=Dt;function Nn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=jt(r);return n=n||r,i.raw_transformation=new mn([z.a({},n),{crop:"scale",width:e}]).toString(),In(t,i)}function Dn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jn(e)}function Fn(t,e,n,r){return Lt(r=w.a(r)),e.map((function(e){return"".concat(Nn(t,e,n,r)," ").concat(e,"w")})).join(", ")}function Bn(t){return null==t?"":t.map((function(t){return"(max-width: ".concat(t,"px) ").concat(t,"px")})).join(", ")}function zn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};if(Ln(n))return i;var o=!e.sizes&&!0===n.sizes,a=!e.srcset;if(a||o){var s=Dn(t,n,r);if(a){var u=n.transformation,c=Fn(t,s,u,r);Ln(c)||(i.srcset=c)}if(o){var l=Bn(s);Ln(l)||(i.sizes=l)}}return i}function Un(t){return(Un="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qn(t,e,n){return(qn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Hn(t,e){return(Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yn(t);if(e){var i=Yn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xn(this,n)}}function Xn(t,e){return!e||"object"!==Un(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(o,t);var e,n,r,i=Wn(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Gn(this,o),i.call(this,"img",t,e)}return e=o,(n=[{key:"closeTag",value:function(){return""}},{key:"attributes",value:function(){var t,e,n;t=qn(Yn(o.prototype),"attributes",this).call(this)||{},e=this.getOptions();var r=this.getOption("srcset"),i=this.getOption("attributes")||{},a={};return F()(r)?a.srcset=r:a=zn(this.publicId,i,r,e),Dt(a)||(delete e.width,delete e.height),z()(t,a),null==t[n=e.responsive&&!e.client_hints?"data-src":"src"]&&(t[n]=In(this.publicId,this.getOptions())),t}}])&&Vn(e.prototype,n),r&&Vn(e,r),o}(wn);function Zn(t){return(Zn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $n(t,e,n){return($n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function er(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rr(t);if(e){var i=rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nr(this,n)}}function nr(t,e){return!e||"object"!==Zn(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(o,t);var e,n,r,i=er(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kn(this,o),i.call(this,"source",t,e)}return e=o,(n=[{key:"closeTag",value:function(){return""}},{key:"attributes",value:function(){var t=this.getOption("srcset"),e=$n(rr(o.prototype),"attributes",this).call(this)||{},n=this.getOptions();return z()(e,zn(this.publicId,e,t,n)),e.srcset||(e.srcset=In(this.publicId,n)),!e.media&&n.media&&(e.media=function(t){var e=[];return null!=t&&(null!=t.min_width&&e.push("(min-width: ".concat(t.min_width,"px)")),null!=t.max_width&&e.push("(max-width: ".concat(t.max_width,"px)"))),e.join(" and ")}(n.media)),e}}])&&Jn(e.prototype,n),r&&Jn(e,r),o}(wn);function or(t){return(or="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t,e,n){return(ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cr(t,e){return(cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var i=hr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){return!e||"object"!==or(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cr(t,e)}(o,t);var e,n,r,i=lr(o);function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return ar(this,o),(e=i.call(this,"picture",t,n)).widthList=r,e}return e=o,(n=[{key:"content",value:function(){var t=this;return this.widthList.map((function(e){var n=e.min_width,r=e.max_width,i=e.transformation,o=t.getOptions(),a=new mn(o);return a.chain().fromOptions("string"===typeof i?{raw_transformation:i}:i),(o=jt(o)).media={min_width:n,max_width:r},o.transformation=a,new ir(t.publicId,o).toHtml()})).join("")+new Qn(this.publicId,this.getOptions()).toHtml()}},{key:"attributes",value:function(){var t=ur(hr(o.prototype),"attributes",this).call(this);return delete t.width,delete t.height,t}},{key:"closeTag",value:function(){return"</"+this.name+">"}}])&&sr(e.prototype,n),r&&sr(e,r),o}(wn);function dr(t){return(dr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e,n){return(vr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_r(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ar(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_r(t);if(e){var i=_r(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return br(this,n)}}function br(t,e){return!e||"object"!==dr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _r(t){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wr=["source_types","source_transformation","fallback_content","poster","sources"],xr=["webm","mp4","ogv"],Er={format:"jpg",resource_type:"video"},Or=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}(o,t);var e,n,r,i=Ar(o);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gr(this,o),e=bt({},e,st),i.call(this,"video",t.replace(/\.(mp4|ogv|webm)$/,""),e)}return e=o,(n=[{key:"setSourceTransformation",value:function(t){return this.transformation().sourceTransformation(t),this}},{key:"setSourceTypes",value:function(t){return this.transformation().sourceTypes(t),this}},{key:"setPoster",value:function(t){return this.transformation().poster(t),this}},{key:"setFallbackContent",value:function(t){return this.transformation().fallbackContent(t),this}},{key:"content",value:function(){var t=this,e=this.transformation().getValue("source_types"),n=this.transformation().getValue("source_transformation"),r=this.transformation().getValue("fallback_content"),i=this.getOption("sources"),o=[];return j()(i)&&!Dt(i)?o=i.map((function(e){var n=In(t.publicId,bt({},e.transformations||{},{resource_type:"video",format:e.type}),t.getOptions());return t.createSourceTag(n,e.type,e.codecs)})):(Dt(e)&&(e=xr),j()(e)&&(o=e.map((function(e){var r=In(t.publicId,bt({},n[e]||{},{resource_type:"video",format:e}),t.getOptions());return t.createSourceTag(r,e)})))),o.join("")+r}},{key:"attributes",value:function(){var t=this.getOption("source_types"),e=this.getOption("poster");if(void 0===e&&(e={}),N()(e)){var n=null!=e.public_id?at:Er;e=In(e.public_id||this.publicId,bt({},e,n,this.getOptions()))}var r=vr(_r(o.prototype),"attributes",this).call(this)||{};return r=dt(r,wr),!Dt(this.getOption("sources"))||Dt(t)||j()(t)||(r.src=In(this.publicId,this.getOptions(),{resource_type:"video",format:t})),null!=e&&(r.poster=e),r}},{key:"createSourceTag",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if(!Dt(e)){var i="ogv"===e?"ogg":e;if(r="video/"+i,!Dt(n)){var o=j()(n)?n.join(", "):n;r+="; codecs="+o}}return"<source "+this.htmlAttrs({src:t,type:r})+">"}}])&&yr(e.prototype,n),r&&yr(e,r),o}(wn);function Sr(t){return(Sr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var i=Ir(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(t,e){return!e||"object"!==Sr(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(o,t);var e,n,r,i=Mr(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"meta",void 0,b()({"http-equiv":"Accept-CH",content:"DPR, Viewport-Width, Width"},t))}return e=o,(n=[{key:"closeTag",value:function(){return""}}])&&Tr(e.prototype,n),r&&Tr(e,r),o}(wn);function kr(t){return function(t){if(Array.isArray(t))return jr(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return jr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Lr,Nr,Dr,Fr,Br,zr,Ur=function(t,e,n,r){return new Promise((function(i,o){t.innerHTML=e.videoTag(n,r).toHtml(),t.querySelector(".cld-transparent-video").style.width="100%",i(t)}))},Gr=function(t,e){t.transformation?t.transformation.push({flags:[e]}):(t.flags||(t.flags=[]),"string"===typeof t.flags&&(t.flags=[t.flags]),t.flags.push(e))},Vr=function(t){t.autoplay=!0,t.muted=!0,t.controls=!1,t.max_timeout_ms=t.max_timeout_ms||nt,t.class=t.class||"",t.class+=" cld-transparent-video",t.externalLibraries=t.externalLibraries||{},t.externalLibraries.seeThru||(t.externalLibraries.seeThru=ct.seeThru),Gr(t,"alpha")},qr=function(t,e,n){return new Promise((function(r,i){if(n)r();else{var o=document.createElement("script");o.src=t;var a=setTimeout((function(){i({status:"error",message:"Timeout loading script ".concat(t)})}),e);o.onerror=function(){clearTimeout(a),i({status:"error",message:"Error loading ".concat(t)})},o.onload=function(){clearTimeout(a),r()},document.head.appendChild(o)}}))},Hr=function(t,e){return new Promise((function(n,r){var i=setTimeout((function(){r({status:"error",message:"Timeout loading Blob URL"})}),e),o=new XMLHttpRequest;o.responseType="blob",o.onload=function(t){clearTimeout(i),n({status:"success",payload:{blobURL:URL.createObjectURL(o.response)}})},o.onerror=function(){clearTimeout(i),r({status:"error",message:"Error loading Blob URL"})},o.open("GET",t,!0),o.send()}))},Wr=function(t){var e=t.autoplay,n=t.playsinline,r=t.loop,i=t.muted,o=t.poster,a=t.blobURL,s=t.videoURL,u=document.createElement("video");return u.style.visibility="hidden",u.position="absolute",u.x=0,u.y=0,u.src=a,u.setAttribute("data-video-url",s),e&&u.setAttribute("autoplay",e),n&&u.setAttribute("playsinline",n),r&&u.setAttribute("loop",r),i&&u.setAttribute("muted",i),i&&(u.muted=i),o&&u.setAttribute("poster",o),u.onload=function(){URL.revokeObjectURL(a)},u},Xr=function(t,e,n,r){var i=window,o=i.seeThru,a=i.setTimeout,s=i.clearTimeout;return new Promise((function(i,u){var c=a((function(){u({status:"error",message:"Timeout instantiating seeThru instance"})}),e);if(o)var l=o.create(t).ready((function(){s(c);var t=l.getCanvas();t.style.width="100%",t.className+=" "+n,r&&l.play(),i(l)}));else u({status:"error",message:"Error instantiating seeThru instance"})}))},Yr=function(t,e,n){var r=n.poster,i=n.autoplay,o=n.playsinline,a=n.loop,s=n.muted;return e+=".mp4",new Promise((function(u,c){qr(n.externalLibraries.seeThru,n.max_timeout_ms,window.seeThru).then((function(){Hr(e,n.max_timeout_ms).then((function(l){var f=l.payload,h=Wr({blobURL:f.blobURL,videoURL:e,poster:r,autoplay:i,playsinline:o,loop:a,muted:s});t.appendChild(h),Xr(h,n.max_timeout_ms,n.class,n.autoplay).then((function(){u(t)})).catch((function(t){c(t)}))})).catch((function(t){var e=t.status,n=t.message;c({status:e,message:n})}))})).catch((function(t){var e=t.status,n=t.message;c({status:e,message:n})}))}))},Qr=function(){return new Promise((function(t,e){var n=document.createElement("video"),r=n.canPlayType&&n.canPlayType('video/webm; codecs="vp9"');t("maybe"===r||"probably"===r)}))};function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Dr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e*Math.ceil(t/e)},Nr=function(t,e){var n;for(n=t.length-2;n>=0&&t[n]>=e;)n--;return t[n+1]},Lr=function(t,e,n,r){var i,o,a,s;return!(s=null!=(i=null!=(o=null!=(a=r.responsive_use_breakpoints)?a:r.responsive_use_stoppoints)?o:this.config("responsive_use_breakpoints"))?i:this.config("responsive_use_stoppoints"))||"resize"===s&&!r.resizing?e:this.calc_breakpoint(t,e,n)},Fr=function(t){var e,n;for(e=0;(t=null!=t?t.parentNode:void 0)instanceof Element&&!e;)n=window.getComputedStyle(t),/^inline/.test(n.display)||(e=te(t));return e},zr=function(t,e){return t.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+this.device_pixel_ratio(e))},Br=function(t,e){var n;return t>(n=Ft(e,"width")||0)&&(n=t,Bt(e,"width",t)),n};var Kr=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.devicePixelRatioCache={},this.responsiveConfig={},this.responsiveResizeInitialized=!1,n=new ye(e),this.config=function(t,e){return n.config(t,e)},this.fromDocument=function(){return n.fromDocument(),this},this.fromEnvironment=function(){return n.fromEnvironment(),this},this.init=function(){return n.init(),this}}var e,n,r;return e=t,r=[{key:"new",value:function(t){return new this(t)}}],(n=[{key:"url",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return In(t,e,this.config())}},{key:"video_url",value:function(t,e){return e=b()({resource_type:"video"},e),this.url(t,e)}},{key:"video_thumbnail_url",value:function(t,e){return e=b()({},rt,e),this.url(t,e)}},{key:"transformation_string",value:function(t){return new mn(t).serialize()}},{key:"image",value:function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=this.imageTag(t,i),e=null!=(r=null!=i.client_hints?i.client_hints:this.config("client_hints"))&&r,null!=i.src||e||n.setAttr("src",""),n=n.toDOM(),e||(Bt(n,"src-cache",this.url(t,i)),this.cloudinary_update(n,i)),n}},{key:"imageTag",value:function(t,e){var n;return(n=new Qn(t,this.config())).transformation().fromOptions(e),n}},{key:"pictureTag",value:function(t,e){var n;return(n=new pr(t,this.config())).transformation().fromOptions(e),n}},{key:"sourceTag",value:function(t,e){var n;return(n=new ir(t,this.config())).transformation().fromOptions(e),n}},{key:"video_thumbnail",value:function(t,e){return this.image(t,z()({},rt,e))}},{key:"facebook_profile_image",value:function(t,e){return this.image(t,b()({type:"facebook"},e))}},{key:"twitter_profile_image",value:function(t,e){return this.image(t,b()({type:"twitter"},e))}},{key:"twitter_name_profile_image",value:function(t,e){return this.image(t,b()({type:"twitter_name"},e))}},{key:"gravatar_image",value:function(t,e){return this.image(t,b()({type:"gravatar"},e))}},{key:"fetch_image",value:function(t,e){return this.image(t,b()({type:"fetch"},e))}},{key:"video",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.videoTag(t,e).toHtml()}},{key:"videoTag",value:function(t,e){return e=bt({},e,this.config()),new Or(t,e)}},{key:"sprite_css",value:function(t,e){return e=b()({type:"sprite"},e),t.match(/.css$/)||(e.format="css"),this.url(t,e)}},{key:"responsive",value:function(t){var e,n,r,i,o,a=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.responsiveConfig=z()(this.responsiveConfig||{},t),i=null!=(e=this.responsiveConfig.responsive_class)?e:this.config("responsive_class"),s&&this.cloudinary_update("img.".concat(i,", img.cld-hidpi"),this.responsiveConfig),(null==(n=null!=(r=this.responsiveConfig.responsive_resize)?r:this.config("responsive_resize"))||n)&&!this.responsiveResizeInitialized){this.responsiveConfig.resizing=this.responsiveResizeInitialized=!0,o=null;var u=function(){var t,e,n,r,s,u;return t=null!=(e=null!=(n=a.responsiveConfig.responsive_debounce)?n:a.config("responsive_debounce"))?e:100,r=function(){o&&(clearTimeout(o),o=null)},s=function(){return a.cloudinary_update("img.".concat(i),a.responsiveConfig)},u=function(){return r(),s()},t?(r(),void(o=setTimeout(u,t))):s()};return window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}}},{key:"calc_breakpoint",value:function(t,e,n){var r=Ft(t,"breakpoints")||Ft(t,"stoppoints")||this.config("breakpoints")||this.config("stoppoints")||Dr;return q()(r)?r(e,n):(F()(r)&&(r=r.split(",").map((function(t){return parseInt(t)})).sort((function(t,e){return t-e}))),Nr(r,e))}},{key:"calc_stoppoint",value:function(t,e,n){return this.calc_breakpoint(t,e,n)}},{key:"device_pixel_ratio",value:function(t){t=null==t||t;var e=("undefined"!==typeof window&&null!==window?window.devicePixelRatio:void 0)||1;t&&(e=Math.ceil(e)),(e<=0||NaN===e)&&(e=1);var n=e.toString();return n.match(/^\d+$/)&&(n+=".0"),n}},{key:"processImageTags",value:function(t,e){if(Dt(t))return this;e=bt({},e||{},this.config());var n=t.filter((function(t){return/^img$/i.test(t.tagName)})).map((function(t){var n=b()({width:t.getAttribute("width"),height:t.getAttribute("height"),src:t.getAttribute("src")},e),r=n.source||n.src;delete n.source,delete n.src;var i=new mn(n).toHtmlAttributes();return Bt(t,"src-cache",In(r,n)),t.setAttribute("width",i.width),t.setAttribute("height",i.height),t}));return this.cloudinary_update(n,e),this}},{key:"cloudinary_update",value:function(t,e){var n,r,i,o,a=this;if(null===t)return this;null==e&&(e={});var s,u=null!=e.responsive?e.responsive:this.config("responsive");t=function(t){return j()(t)?t:"NodeList"===t.constructor.name?kr(t):F()(t)?Array.prototype.slice.call(document.querySelectorAll(t),0):[t]}(t),s=this.responsiveConfig&&null!=this.responsiveConfig.responsive_class?this.responsiveConfig.responsive_class:null!=e.responsive_class?e.responsive_class:this.config("responsive_class");var c=null!=e.round_dpr?e.round_dpr:this.config("round_dpr");return t.forEach((function(l){if(/img/i.test(l.tagName)){var f=!0;if(u&&Ht(l,s),!Dt(r=Ft(l,"src-cache")||Ft(l,"src"))){if(r=zr.call(a,r,c),wn.isResponsive(l,s))if(0!==(n=Fr(l))){switch(!1){case!/w_auto:breakpoints/.test(r):o=Br(n,l),r=r.replace(/w_auto:breakpoints([_0-9]*)(:[0-9]+)?/,"w_auto:breakpoints$1:".concat(o));break;case!(i=/w_auto(:(\d+))?/.exec(r)):o=Lr.call(a,l,n,i[2],e),o=Br(o,l),r=r.replace(/w_auto[^,\/]*/g,"w_".concat(o))}Gt(l,"width"),e.responsive_preserve_height||Gt(l,"height")}else f=!1;var h="lazy"===e.loading&&!a.isNativeLazyLoadSupported()&&a.isLazyLoadSupported()&&!t[0].getAttribute("src");(f||h)&&a.setAttributeIfExists(t[0],"width","data-width"),f&&!h&&Ut(l,"src",r)}}})),this}},{key:"setAttributeIfExists",value:function(t,e,n){var r=t.getAttribute(n);null!=r&&Ut(t,e,r)}},{key:"isLazyLoadSupported",value:function(){return window&&"IntersectionObserver"in window}},{key:"isNativeLazyLoadSupported",value:function(){return"loading"in HTMLImageElement.prototype}},{key:"transformation",value:function(t){return mn.new(this.config()).fromOptions(t).setParent(this)}},{key:"injectTransparentVideoElement",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,o){t||o({status:"error",message:"Expecting htmlElContainer to be HTMLElement"}),Vr(r);var a=n.video_url(e,r);Qr().then((function(s){var u;s?(u=Ur(t,n,e,r),i(t)):u=Yr(t,a,r),u.then((function(){i(t)})).catch((function(t){var e=t.status,n=t.message;o({status:e,message:n})}))})).catch((function(t){var e=t.status,n=t.message;o({status:e,message:n})}))}))}}])&&Zr(e.prototype,n),r&&Zr(e,r),t}();b()(Kr,o);var Jr=Kr;n.default={ClientHintsMetaTag:Rr,Cloudinary:Jr,Condition:le,Configuration:ye,crc32:u,FetchLayer:Fe,HtmlTag:wn,ImageTag:Qn,Layer:me,PictureTag:pr,SubtitlesLayer:Ie,TextLayer:Oe,Transformation:mn,utf8_encode:s,Util:a,VideoTag:Or}},"lodash/assign":function(e,n){e.exports=t},"lodash/cloneDeep":function(t,e){t.exports=n},"lodash/compact":function(t,e){t.exports=i},"lodash/difference":function(t,e){t.exports=o},"lodash/functions":function(t,e){t.exports=a},"lodash/identity":function(t,e){t.exports=s},"lodash/includes":function(t,e){t.exports=u},"lodash/isArray":function(t,e){t.exports=c},"lodash/isElement":function(t,e){t.exports=l},"lodash/isFunction":function(t,e){t.exports=f},"lodash/isPlainObject":function(t,e){t.exports=h},"lodash/isString":function(t,e){t.exports=p},"lodash/merge":function(t,e){t.exports=d},"lodash/trim":function(t,e){t.exports=g}})},t.exports=i(n(512),n(532),n(580),n(581),n(594),n(282),n(596),n(123),n(602),n(181),n(293),n(370),n(603),n(609))}).call(this,n(509).Buffer,n(78))},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function i(t){var e,n={};return function(i){for(var o in i)if(!r(i[o],n[o])){e=t(i),n=i;break}return e}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p}));var r,i=n(12),o=n(0),a=n(31),s=5126,u=5124,c=5125,l=(r={},Object(o.a)(r,s,[s,1,"float"]),Object(o.a)(r,35664,[s,2,"vec2"]),Object(o.a)(r,35665,[s,3,"vec3"]),Object(o.a)(r,35666,[s,4,"vec4"]),Object(o.a)(r,u,[u,1,"int"]),Object(o.a)(r,35667,[u,2,"ivec2"]),Object(o.a)(r,35668,[u,3,"ivec3"]),Object(o.a)(r,35669,[u,4,"ivec4"]),Object(o.a)(r,c,[c,1,"uint"]),Object(o.a)(r,36294,[c,2,"uvec2"]),Object(o.a)(r,36295,[c,3,"uvec3"]),Object(o.a)(r,36296,[c,4,"uvec4"]),Object(o.a)(r,35670,[s,1,"bool"]),Object(o.a)(r,35671,[s,2,"bvec2"]),Object(o.a)(r,35672,[s,3,"bvec3"]),Object(o.a)(r,35673,[s,4,"bvec4"]),Object(o.a)(r,35674,[s,8,"mat2"]),Object(o.a)(r,35685,[s,8,"mat2x3"]),Object(o.a)(r,35686,[s,8,"mat2x4"]),Object(o.a)(r,35675,[s,12,"mat3"]),Object(o.a)(r,35687,[s,12,"mat3x2"]),Object(o.a)(r,35688,[s,12,"mat3x4"]),Object(o.a)(r,35676,[s,16,"mat4"]),Object(o.a)(r,35689,[s,16,"mat4x2"]),Object(o.a)(r,35690,[s,16,"mat4x3"]),r);function f(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(a.a)(!1),0}}function h(t){var e=l[t];if(!e)return null;var n=Object(i.a)(e,2);return{type:n[0],components:n[1]}}function p(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=s}for(var n in l){var r=Object(i.a)(l[n],3),o=r[0],a=r[1],u=r[2];if(o===t&&a===e)return{glType:n,name:u}}return null}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(0),i=n(69);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);var e=t.parseTextSync||t.parseSync||t.parse||t.parseStream||t.parseInBatches,n=t.options&&t.options[t.id];return e=e||n&&n.workerUrl}function u(t){var e;return Object(i.a)(t,"null loader"),Object(i.a)(s(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=a(a({},t=t[0]),{},{options:a(a({},t.options),e)})),t.extension&&(t.extensions=t.extensions||t.extension,delete t.extension),Array.isArray(t.extensions)||(t.extensions=[t.extensions]),Object(i.a)(t.extensions&&t.extensions.length>0&&t.extensions[0]),(t.parseTextSync||t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}},function(t,e,n){"use strict";var r=n(19),i=n(39);e.a=function(t,e,n,o){if(o=o||{},!Object(r.g)(o))throw new Error("options is invalid");var a=o.units,s=o.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var u=Object(r.a)(e,a,"meters"),c=Object(i.a)(t),l=function(t,e,n,i){i=void 0===i?r.c:Number(i);var o=e/i,a=t[0]*Math.PI/180,s=Object(r.b)(t[1]),u=Object(r.b)(n),c=o*Math.cos(u),l=s+c;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var f=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(f)>1e-11?c/f:Math.cos(s),p=o*Math.sin(u)/h;return[(180*(a+p)/Math.PI+540)%360-180,180*l/Math.PI]}(c,u,n);return l[0]+=l[0]-c[0]>180?-360:c[0]-l[0]>180?360:0,Object(r.j)(l,s)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return S})),n.d(e,"a",(function(){return T}));var r=n(0),i=n(67),o=n(32),a=n(4),s=n.n(a),u=n(11),c=n(145),l=n(140);function f(t){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,!e.headers.get("Content-Type").includes("application/json")){t.next=10;break}return t.t0=n,t.next=7,e.text();case 7:n=t.t0+=t.sent,t.next=11;break;case 10:n+=e.statusText;case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t.catch(1),t.abrupt("return",n);case 16:return t.abrupt("return",n);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function p(t){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(s.a.mark((function t(e){var n,r,i=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},"string"===typeof e){t.next=5;break}return t.next=4,Object(l.b)(e);case 4:return t.abrupt("return",t.sent);case 5:return e=Object(c.a)(e),t.next=8,fetch(e,n);case 8:if((r=t.sent).ok||!n.throws){t.next=15;break}return t.t0=Error,t.next=13,f(r);case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var g=n(1),y=n(2),v=function(){function t(){Object(g.a)(this,t)}return Object(y.a)(t,[{key:"log",value:function(){return function(t){}}},{key:"info",value:function(){return function(t){}}},{key:"warn",value:function(){return function(t){}}},{key:"error",value:function(){return function(t){}}}]),t}();function m(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function t(){Object(g.a)(this,t),this.console=console}return Object(y.a)(t,[{key:"log",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.log).bind.apply(t,[this.console].concat(n))}},{key:"info",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.info).bind.apply(t,[this.console].concat(n))}},{key:"warn",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.warn).bind.apply(t,[this.console].concat(n))}},{key:"error",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.error).bind.apply(t,[this.console].concat(n))}}]),t}()),metadata:!1,transforms:[],reuseWorkers:!0},x={dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},E=function(){i.a.loaders=i.a.loaders||{};var t=i.a.loaders;return t._state=t._state||{},t._state},O=function(){var t=E();return t.globalOptions=t.globalOptions||_({},w),t.globalOptions};function S(t,e,n,r){return n=n||[],function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;P(t,null,n,w,x,e);var r,i=m(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=t&&t[o.id]||{},s=o.options&&o.options[o.id]||{},u=o.defaultOptions&&o.defaultOptions[o.id]||{};P(a,o.id,n,s,u,e)}}catch(c){i.e(c)}finally{i.f()}}(t,n=Array.isArray(n)?n:[n]),C(e,t,r)}function T(t,e){var n=O(),r=t.fetch||n.fetch;return"function"===typeof r?r:Object(o.f)(r)?function(t){return p(t,r)}:e&&e.fetch?e.fetch:function(e){return p(e,t)}}function P(t,e,n,r,i,a){var s=e||"Top level",u=e?"".concat(e,"."):"";for(var c in t){var l=!e&&Object(o.f)(t[c]);if(!(c in r))if(c in i)n.warn("".concat(s," loader option '").concat(u).concat(c,"' deprecated, use '").concat(i[c],"'"));else if(!l){var f=M(c,a);n.warn("".concat(s," loader option '").concat(u).concat(c,"' not recognized. ").concat(f))}}}function M(t,e){var n,r=t.toLowerCase(),i="",o=m(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;for(var s in a.options){if(t===s)return"Did you mean '".concat(a.id,".").concat(s,"'?");var u=s.toLowerCase();(r.startsWith(u)||u.startsWith(r))&&(i=i||"Did you mean '".concat(a.id,".").concat(s,"'?"))}}}catch(c){o.e(c)}finally{o.f()}return i}function C(t,e,n){var r=_({},t.options||{});return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new v),I(r,O()),I(r,e),r}function I(t,e){for(var n in e)if(n in e){var r=e[n];Object(o.g)(r)&&Object(o.g)(t[n])?t[n]=_(_({},t[n]),e[n]):t[n]=e[n]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return _})),n.d(e,"b",(function(){return w}));var r=n(1),i=n(2),o=n(20);!function(){function t(e){Object(r.a)(this,t),this.points=e,this.isClosed=Object(o.j)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}Object(i.a)(t,[{key:"getSignedArea",value:function(){var t=0;return this.forEachSegment((function(e,n){t+=(e[0]+n[0])*(e[1]-n[1])})),t/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(t){for(var e=this.points.length,n=0;n<e-1;n++)t(this.points[n],this.points[n+1],n,n+1);this.isClosed||t(this.points[e-1],this.points[0],e-1,0)}}])}();function a(t,e){var n=e.length,r=t.length;if(r>0){for(var i=!0,o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(var a=0;a<n;a++)t[r+a]=e[a];return!0}function s(t,e){for(var n=e.length,r=0;r<n;r++)t[r]=e[r]}function u(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=r+e*n,a=0;a<n;a++)i[a]=t[o+a];return i}function c(t,e,n,r){var i,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)i=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)i=(r[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;i=(r[0]-t[0])/(e[0]-t[0]),o=0}for(var s=0;s<t.length;s++)a[s]=(1&o)===s?r[o]:i*(e[s]-t[s])+t[s];return a}function l(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function f(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,o=void 0===i?2:i,f=r.broken,h=void 0!==f&&f,p=r.gridResolution,d=void 0===p?10:p,v=r.gridOffset,m=void 0===v?[0,0]:v,A=r.startIndex,b=void 0===A?0:A,_=r.endIndex,w=void 0===_?t.length:_,x=(w-b)/o,E=[],O=[E],S=u(t,0,o,b),T=g(S,d,m,[]),P=[];a(E,S);for(var M=1;M<x;M++){for(n=l(e=u(t,M,o,b,e),T);n;){c(S,e,n,T,P);var C=l(P,T);C&&(c(S,P,C,T,P),n=C),a(E,P),s(S,P),y(T,d,n),h&&E.length>o&&(E=[],O.push(E),a(E,S)),n=l(e,T)}a(E,e),s(S,e)}return h?O:O[0]}function h(t,e){for(var n=0;n<e.length;n++)t.push(e[n]);return t}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return[];for(var r=n.size,i=void 0===r?2:r,o=n.gridResolution,a=void 0===o?10:o,s=n.gridOffset,u=void 0===s?[0,0]:s,c=n.edgeTypes,f=void 0!==c&&c,p=[],y=[{pos:t,types:f&&new Array(t.length/i).fill(1),holes:e||[]}],m=[[],[]],A=[];y.length;){var b=y.shift(),_=b.pos,w=b.types,x=b.holes;v(_,i,x[0]||_.length,m),A=g(m[0],a,u,A);var E=l(m[1],A);if(E){var O=d(_,w,i,0,x[0]||_.length,A,E),S={pos:O[0].pos,types:O[0].types,holes:[]},T={pos:O[1].pos,types:O[1].types,holes:[]};y.push(S,T);for(var P=0;P<x.length;P++)(O=d(_,w,i,x[P],x[P+1]||_.length,A,E))[0]&&(S.holes.push(S.pos.length),S.pos=h(S.pos,O[0].pos),f&&(S.types=h(S.types,O[0].types))),O[1]&&(T.holes.push(T.pos.length),T.pos=h(T.pos,O[1].pos),f&&(T.types=h(T.types,O[1].types)))}else{var M={positions:_};f&&(M.edgeTypes=w),x.length&&(M.holeIndices=x),p.push(M)}}return p}function d(t,e,n,r,i,o,l){for(var f,h,p,d=(i-r)/n,g=[],y=[],v=[],m=[],A=[],b=u(t,d-1,n,r),_=Math.sign(8&l?b[1]-o[3]:b[0]-o[2]),w=e&&e[d-1],x=0,E=0,O=0;O<d;O++)f=u(t,O,n,r,f),h=Math.sign(8&l?f[1]-o[3]:f[0]-o[2]),p=e&&e[r/n+O],h&&_&&_!==h&&(c(b,f,l,o,A),a(g,A)&&v.push(w),a(y,A)&&m.push(w)),h<=0?(a(g,f)&&v.push(p),x-=h):v.length&&(v[v.length-1]=0),h>=0?(a(y,f)&&m.push(p),E+=h):m.length&&(m[m.length-1]=0),s(b,f),_=h,w=p;return[x?{pos:g,types:e&&v}:null,E?{pos:y,types:e&&m}:null]}function g(t,e,n,r){var i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function y(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function v(t,e,n,r){for(var i=1/0,o=-1/0,a=1/0,s=-1/0,u=0;u<n;u+=e){var c=t[u],l=t[u+1];i=c<i?c:i,o=c>o?c:o,a=l<a?l:a,s=l>s?l:s}return r[0][0]=i,r[0][1]=a,r[1][0]=o,r[1][1]=s,r}function m(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b=85.051129;function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.size,r=void 0===n?2:n,i=e.startIndex,o=void 0===i?0:i,a=e.endIndex,s=void 0===a?t.length:a,u=e.normalize,c=void 0===u||u,l=t.slice(o,s);O(l,r,0,s-o);var h=f(l,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(c){var p,d=m(h);try{for(d.s();!(p=d.n()).done;){var g=p.value;S(g,r)}}catch(y){d.e(y)}finally{d.f()}}return h}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,i=void 0===r?2:r,o=n.normalize,a=void 0===o||o,s=n.edgeTypes,u=void 0!==s&&s;e=e||[];for(var c=[],l=[],f=0,h=0,d=0;d<=e.length;d++){for(var g=e[d]||t.length,y=h,v=x(t,i,f,g),A=v;A<g;A++)c[h++]=t[A];for(var b=f;b<v;b++)c[h++]=t[b];O(c,i,y,h),E(c,i,y,h,n.maxLatitude),f=g,l[d]=h}l.pop();var _=p(c,l,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:u});if(a){var w,T=m(_);try{for(T.s();!(w=T.n()).done;){var P=w.value;S(P.positions,i)}}catch(M){T.e(M)}finally{T.f()}}return _}function x(t,e,n,r){for(var i=-1,o=-1,a=n+1;a<r;a+=e){var s=Math.abs(t[a]);s>i&&(i=s,o=a-1)}return o}function E(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b,o=t[n],s=t[r-e];if(Math.abs(o-s)>180){var c=u(t,0,e,n);c[0]+=360*Math.round((s-o)/360),a(t,c),c[1]=Math.sign(c[1])*i,a(t,c),c[0]=o,a(t,c)}}function O(t,e,n,r){for(var i,o=t[0],a=n;a<r;a+=e){var s=(i=t[a])-o;(s>180||s<-180)&&(i-=360*Math.round(s/360)),t[a]=o=i}}function S(t,e){for(var n,r=t.length/e,i=0;i<r&&((n=t[i*e])+180)%360===0;i++);var o=360*-Math.round(n/360);if(0!==o)for(var a=0;a<r;a++)t[a*e]+=o}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return h}));var r,i,o,a=n(0),s=n(10),u=(r={},Object(a.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(a.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(a.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(a.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(a.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(a.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(a.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(a.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(a.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r),c=(i={},Object(a.a)(i,6403,1),Object(a.a)(i,36244,1),Object(a.a)(i,33319,2),Object(a.a)(i,33320,2),Object(a.a)(i,6407,3),Object(a.a)(i,36248,3),Object(a.a)(i,6408,4),Object(a.a)(i,36249,4),Object(a.a)(i,6402,1),Object(a.a)(i,34041,1),Object(a.a)(i,6406,1),Object(a.a)(i,6409,1),Object(a.a)(i,6410,2),i),l=(o={},Object(a.a)(o,5126,4),Object(a.a)(o,5125,4),Object(a.a)(o,5124,4),Object(a.a)(o,5123,2),Object(a.a)(o,5122,2),Object(a.a)(o,5131,2),Object(a.a)(o,5120,1),Object(a.a)(o,5121,1),o);function f(t,e){var n=u[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(s.g)(t)&&n.gl2||n.gl1;return"string"===typeof r?t.getExtension(r):r}function h(t,e){var n=u[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=Object.prototype,i=r.toString,o=r.hasOwnProperty,a=new Map;function s(t,e){try{return u(t,e)}finally{a.clear()}}function u(t,e){if(t===e)return!0;var n=i.call(t);if(n!==i.call(e))return!1;switch(n){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":if(c(t,e))return!0;var r=Object.keys(t),a=Object.keys(e),s=r.length;if(s!==a.length)return!1;for(var l=0;l<s;++l)if(!o.call(e,r[l]))return!1;for(l=0;l<s;++l){var f=r[l];if(!u(t[f],e[f]))return!1}return!0;case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t===+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":if(t.size!==e.size)return!1;if(c(t,e))return!0;for(var h=t.entries(),p="[object Map]"===n;;){var d=h.next();if(d.done)break;var g=d.value,y=g[0],v=g[1];if(!e.has(y))return!1;if(p&&!u(v,e.get(y)))return!1}return!0}return!1}function c(t,e){var n=a.get(t);if(n){if(n.has(e))return!0}else a.set(t,n=new Set);return n.add(e),!1}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return a}));function r(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function o(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,o=void 0===i?4:i,a=t.temp,s=n*o;a=a||new Uint8Array(s);for(var u=0;u<r/2;++u){var c=u*s,l=(r-u-1)*s;a.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(a,l)}}function a(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)a[4*(s*i+u)+c]=e[4*(2*s*n+2*u)+c];return{data:a,width:i,height:o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,f,h=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,v=g?t.features.length:1,m=0;m<v;m++){u=(f=!!(l=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var A=0;A<u;A++){var b=0,_=0;if(null!==(s=f?l.geometries[A]:l)){c=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,m,b,_))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],p,m,b,_))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-h;o++){if(!1===e(c[r][o],p,m,b,_))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(_=0,o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-h;a++){if(!1===e(c[r][o][a],p,m,b,_))return!1;p++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function u(t,e){s(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:s,coordinates:t.coordinates[c]};if(!1===e(r.feature(l,i),n,c))return!1}}))}function c(t,e){u(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,f=0;return!1!==i(t,(function(i,s,h,p,d){if(void 0===u||n>c||p>l||d>f)return u=i,c=n,l=p,f=d,void(a=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function l(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,i=!1;return c(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r},e.lineEach=l,e.lineReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),r.lineString([c[s],c[s+1]],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),r.lineString([c[a][s],c[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),r.lineString([c[o][s],c[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),r.lineString([c[o][a][s],c[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),r.point(c[o],u,e);case"LineString":return s<0&&(s=c.length+s),r.point(c[s],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),r.point(c[a][s],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),r.point(c[o][s],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),r.point(c[o][a][s],u,e)}throw new Error("geojson is invalid")}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return c}));var r=n(96),i=n(100),o=n(25);function a(t,e){if(Object(o.a)(Object(o.g)(t),"setParameters requires a WebGL context"),!Object(o.f)(e)){var n={};for(var i in e){var a=Number(i),s=r.e[i];s&&("string"===typeof s?n[s]=!0:s(t,e[i],a))}var u=t.state&&t.state.cache;if(u)for(var c in n){(0,r.a[c])(t,e,u)}}}function s(t,e){if("number"===typeof(e=e||r.c)){var n=e,i=r.d[n];return i?i(t,n):t.getParameter(n)}var o=Array.isArray(e)?e:Object.keys(e),a={},s=!0,u=!1,c=void 0;try{for(var l,f=o[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r.d[h];a[h]=p?p(t,Number(h)):t.getParameter(Number(h))}}catch(d){u=!0,c=d}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return a}function u(t){a(t,r.c)}function c(t,e,n){if(Object(o.f)(e))return n(t);var r,s=e.nocatch,u=void 0===s||s;if(Object(i.c)(t),a(t,e),u)r=n(t),Object(i.b)(t);else try{r=n(t)}finally{Object(i.b)(t)}return r}},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(248),c=n(10),l=n(255),f=n(26);function h(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var g=function(t){Object(o.a)(n,t);var e=d(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(t){var e=this.gl;return Object(c.k)(e,{framebuffer:t.target}),this._drawLayers(t)}},{key:"_drawLayers",value:function(t){var e=t.viewports,n=t.views,r=t.onViewportActive,i=t.clearCanvas,o=void 0===i||i,a=this.gl;o&&function(t){var e=t.drawingBufferWidth,n=t.drawingBufferHeight;Object(c.k)(t,{viewport:[0,0,e,n]}),t.clear(16640)}(a);var s,u=[],l=h(e);try{for(l.s();!(s=l.n()).done;){var f=s.value,p=f.viewport||f,d=n&&n[p.id];r(p);var g=this._getDrawLayerParams(p,t);t.view=d;var y,v=h(p.subViewports||[p]);try{for(v.s();!(y=v.n()).done;){var m=y.value;t.viewport=m;var A=this._drawLayersInViewport(a,t,g);u.push(A)}}catch(b){v.e(b)}finally{v.f()}}}catch(b){l.e(b)}finally{l.f()}return u}},{key:"_getDrawLayerParams",value:function(t,e){for(var n=e.layers,r=e.pass,i=void 0===r?"unknown":r,o=e.layerFilter,a=e.effects,s=e.moduleParameters,u=[],c=y(),l=0;l<n.length;l++){var f=n[l],h=this._shouldDrawLayer(f,t,i,o),p={shouldDrawLayer:h,layerRenderIndex:c(f,h)};h&&(p.moduleParameters=this._getModuleParameters(f,a,i,s),p.layerParameters=this.getLayerParameters(f,l)),u[l]=p}return u}},{key:"_drawLayersInViewport",value:function(t,e,n){var r=e.layers,i=e.onError,o=e.viewport,a=e.view,s=function(t,e){var n=e.viewport,r=t.canvas?t.canvas.clientHeight||t.canvas.height:100,i=n,o=Object(c.c)(t);return[i.x*o,(r-i.y-i.height)*o,i.width*o,i.height*o]}(t,{viewport:o});if(a&&a.props.clear){var u=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Object(c.l)(t,{scissorTest:!0,scissor:s},(function(){return Object(l.a)(t,u)}))}var h={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(c.k)(t,{viewport:s});for(var p=0;p<r.length;p++){var d=r[p],g=n[p],y=g.shouldDrawLayer,v=g.layerRenderIndex,m=g.moduleParameters,A=g.layerParameters;if(y&&d.props.pickable&&h.pickableCount++,d.isComposite)h.compositeCount++;else if(y){h.visibleCount++,m.viewport=o;try{d.drawLayer({moduleParameters:m,uniforms:{layerIndex:v},parameters:A})}catch(b){i?i(b,d):f.a.error("error during drawing of ".concat(d),b)()}}}return h}},{key:"shouldDrawLayer",value:function(t){return!0}},{key:"getModuleParameters",value:function(t,e){return null}},{key:"getLayerParameters",value:function(t,e){return t.props.parameters}},{key:"_shouldDrawLayer",value:function(t,e,n,r){var i=this.shouldDrawLayer(t)&&t.props.visible;return i&&r&&(i=r({layer:t,viewport:e,isPicking:n.startsWith("picking"),renderPass:n})),i&&t.activateViewport(e),i}},{key:"_getModuleParameters",value:function(t,e,n,r){var i=Object.assign(Object.create(t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Object(c.c)(this.gl)});if(e){var o,a=h(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;Object.assign(i,s.getModuleParameters(t))}}catch(u){a.e(u)}finally{a.f()}}return Object.assign(i,this.getModuleParameters(t,e),r)}}]),n}(u.a);function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=function r(i,o){var a,s=i.props._offset,u=i.id,c=i.parent&&i.parent.id;if(c&&!(c in e)&&r(i.parent,!1),c in n){var l=n[c]=n[c]||y(e[c],e);a=l(i,o),n[u]=l}else Number.isFinite(s)?(a=s+(e[c]||0),n[u]=null):a=t;return o&&a>=t&&(t=a+1),e[u]=a,a};return r}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),i=n(2),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.id,i=void 0===n?"effect":n;this.id=i,this.props={},Object.assign(this.props,e)}return Object(i.a)(t,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(158);var c=n(168);function l(t){var e="function"===typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Object(c.a)(t,arguments,Object(s.a)(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(u.a)(r,t)})(t)}var f=n(20),h=n(72);function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var d=function(t){Object(o.a)(n,t);var e=p(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"to",value:function(t){return t===this?this:Object(f.m)(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(f.f)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(f.l)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(f.j)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]+=o[a];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]-=o[a];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"check",value:function(){if(f.f.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:"ELEMENTS",get:function(){return Object(h.a)(!1),0}},{key:"RANK",get:function(){return Object(h.a)(!1),0}},{key:"elements",get:function(){return this}}]),n}(l(Array))},function(t,e,n){"use strict";n.r(e),e.default={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=!1,i=!0;function o(t){var e=a(t);return function(t){var e=a(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,r)))return null;return{mimeType:"image/png",width:e.getUint32(16,r),height:e.getUint32(20,r)}}(e)||function(t){var e=a(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,r)&&255===e.getUint8(2)))return null;var n=function(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:n}}(),i=n.tableMarkers,o=n.sofMarkers,s=2;for(;s+9<e.byteLength;){var u=e.getUint16(s,r);if(o.has(u))return{mimeType:"image/jpeg",height:e.getUint16(s+5,r),width:e.getUint16(s+7,r)};if(!i.has(u))return null;s+=2,s+=e.getUint16(s,r)}return null}(e)||function(t){var e=a(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,r)))return null;return{mimeType:"image/gif",width:e.getUint16(6,i),height:e.getUint16(8,i)}}(e)||function(t){var e=a(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,r)&&e.getUint32(2,i)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,i),height:e.getUint32(22,i)}}(e)}function a(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c}));var r=n(32),i=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,o=/^([-\w.]+\/[-\w.+]+)/;function a(t){if("string"!==typeof t)return"";var e=t.match(i);return e?e[1]:""}var s=/\?.*/;function u(t){if(Object(r.i)(t)){var e=function(t){if("string"!==typeof t)return"";var e=t.match(o);return e?e[1]:t}(t.headers.get("content-type")),n=a(t.url);return{url:l(t.url||""),type:e||n||null}}return Object(r.b)(t)?{url:l(t.name||""),type:t.type||""}:"string"===typeof t?{url:l(t),type:a(t)}:{url:"",type:""}}function c(t){return Object(r.i)(t)?t.headers["content-length"]||-1:Object(r.b)(t)?t.size:"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function l(t){return t.replace(s,"")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(31);function i(t,e){if("string"!==typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var i=t[e=e.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function o(t,e){for(var n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}},,function(t,e,n){var r=n(513),i=n(518);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(182),i=n(514),o=n(515),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(161),c=n(20),l=n(23),f=n(29),h=n(80);function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var d=[0,0,0],g={},y=function(t){Object(o.a)(n,t);var e=p(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,n),t=e.call(this,-0,-0,-0),1===arguments.length&&Object(c.m)(i)?t.copy(i):(c.f.debug&&(Object(l.a)(i),Object(l.a)(o),Object(l.a)(a)),t[0]=i,t[1]=o,t[2]=a),t}return Object(i.a)(n,null,[{key:"ZERO",get:function(){return g.ZERO=g.ZERO||Object.freeze(new n(0,0,0,0))}}]),Object(i.a)(n,[{key:"set",value:function(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return c.f.debug&&(Object(l.a)(t.x),Object(l.a)(t.y),Object(l.a)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"angle",value:function(t){return f.a(this,t)}},{key:"cross",value:function(t){return f.c(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?d:n;return f.k(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?d:n;return f.l(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?d:n;return f.m(this,this,r,e),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return f.q(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(h.c)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return f.p(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Object(h.b)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return f.r(this,this,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(l.a)(t)}}]),n}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),i=n(2),o=n(13),a=[255,255,255],s=[0,0,-1],u=0,c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.color,i=void 0===n?a:n,c=e.intensity,l=void 0===c?1:c,f=e.direction,h=void 0===f?s:f,p=e._shadow,d=void 0!==p&&p;this.id=e.id||"directional-".concat(u++),this.color=i,this.intensity=l,this.type="directional",this.direction=new o.Vector3(h).normalize().toArray(),this.shadow=d}return Object(i.a)(t,[{key:"getProjectedLight",value:function(){return this}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(315),l=n(316),f=n(26),h=n(153),p=n(252),d=n(87),g=n(0),y=n(311),v=n(118);function m(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(g.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var x=function(t){Object(a.a)(n,t);var e=w(n);function n(t){return Object(r.a)(this,n),e.call(this,_(_({},t),{},{attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}}))}return Object(i.a)(n,[{key:"getGeometryFromBuffer",value:function(t){return this.normalize?Object(o.a)(Object(u.a)(n.prototype),"getGeometryFromBuffer",this).call(this,t):function(){return null}}},{key:"normalizeGeometry",value:function(t){return this.normalize?function(t,e,n,r){var i=t;if(Array.isArray(t[0])){var o=t.length*e;i=new Array(o);for(var a=0;a<t.length;a++)for(var s=0;s<e;s++)i[a*e+s]=t[a][s]||0}return n?Object(v.c)(i,{size:e,gridResolution:n}):r?Object(v.d)(i,{size:e}):i}(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}},{key:"get",value:function(t){return this.attributes[t]}},{key:"getGeometrySize",value:function(t){if(Array.isArray(t[0])){var e,n=0,r=m(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=this.getGeometrySize(i)}}catch(a){r.e(a)}finally{r.f()}return n}var o=this.getPathLength(t);return o<2?0:this.isClosed(t)?o<3?0:o+2:o}},{key:"updateGeometryAttributes",value:function(t,e){if(0!==e.geometrySize)if(t&&Array.isArray(t[0])){var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.getGeometrySize(i);e.geometrySize=o,this.updateGeometryAttributes(i,e),e.vertexStart+=o}}catch(a){r.e(a)}finally{r.f()}}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}},{key:"_updateSegmentTypes",value:function(t,e){var n=this.attributes.segmentTypes,r=this.isClosed(t),i=e.vertexStart,o=e.geometrySize;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}},{key:"_updatePositions",value:function(t,e){var n=this.attributes.positions;if(n)for(var r=e.vertexStart,i=e.geometrySize,o=new Array(3),a=r,s=0;s<i;a++,s++)this.getPointOnPath(t,s,o),n[3*a]=o[0],n[3*a+1]=o[1],n[3*a+2]=o[2]}},{key:"getPathLength",value:function(t){return t.length/this.positionSize}},{key:"getPointOnPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.positionSize;e*r>=t.length&&(e+=1-t.length/r);var i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}},{key:"isClosed",value:function(t){if(!this.normalize)return this.opts.loop;var e=this.positionSize,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}]),n}(y.a);function E(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var O=[0,0,0,255],S={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(t){return t.path}},getColor:{type:"accessor",value:O},getWidth:{type:"accessor",value:1}},T={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},P=function(t){Object(a.a)(n,t);var e=E(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){return Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * jointType * 4.0 * flipIfTrue(isStartCap), isJoint);\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (jointType > 0.0 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (jointType == 0.0 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){var t=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:T,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:T,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:T,defaultValue:O},instancePickingColors:{size:3,type:5121,accessor:function(e,n){var r=n.index,i=n.target;return t.encodePickingColor(e&&e.__source?e.__source.index:r,i)}}}),this.setState({pathTesselator:new x({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&f.a.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=t.oldProps,r=t.props,i=t.changeFlags;Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:r,oldProps:e,changeFlags:i});var a=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var s=this.state.pathTesselator,c=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:c.getPath,buffers:c,normalize:!r._pathType,loop:"loop"===r._pathType,getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),i.dataChanged||a.invalidateAll()}if(i.extensionsChanged){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),a.invalidateAll()}}},{key:"getPickingInfo",value:function(t){var e=Object(o.a)(Object(u.a)(n.prototype),"getPickingInfo",this).call(this,t),r=e.index,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((function(t){return t.__source.index===r}))),e}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.rounded,o=r.billboard,a=r.miterLimit,s=r.widthUnits,u=r.widthScale,c=r.widthMinPixels,l=r.widthMaxPixels,f="pixels"===s?n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},e,{jointType:Number(i),billboard:o,widthScale:u*f,miterLimit:a,widthMinPixels:c,widthMaxPixels:l})).draw()}},{key:"_getModel",value:function(t){return new p.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new d.a({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(t){var e=this.state.pathTesselator;t.startIndices=e.vertexStarts,t.value=e.get("positions")}},{key:"calculateSegmentTypes",value:function(t){var e=this.state.pathTesselator;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}},{key:"wrapLongitude",get:function(){return!1}}]),n}(h.a);P.layerName="PathLayer",P.defaultProps=S},function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(0),c=n(94),l=n(296),f=n(384),h=n(649),p=n(12),d=n(4),g=n.n(d),y=n(11),v=n(26),m=function(){function t(e){var n=e.x,i=e.y,o=e.z,a=e.onTileLoad,s=e.onTileError;Object(r.a)(this,t),this.x=n,this.y=i,this.z=o,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this._isCancelled=!1,this.onTileLoad=a,this.onTileError=s}return Object(i.a)(t,[{key:"_loadData",value:function(){var t=Object(y.a)(g.a.mark((function t(e,n){var r,i,o,a,s,u,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.x,i=this.y,o=this.z,a=this.bbox,this._abortController=new AbortController,s=this._abortController.signal,t.next=5,n.scheduleRequest(this,(function(t){return t.isSelected?1:-1}));case 5:if(u=t.sent){t.next=9;break}return this._isCancelled=!0,t.abrupt("return");case 9:if(!this._isCancelled){t.next=12;break}return u.done(),t.abrupt("return");case 12:return t.prev=12,t.next=15,e({x:r,y:i,z:o,bbox:a,signal:s});case 15:c=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(12),l=t.t0||!0;case 21:return t.prev=21,u.done(),this._isCancelled&&!c?this._isLoaded=!1:(this._isLoaded=!0,this._isCancelled=!1),t.finish(21);case 25:if(this._isLoaded){t.next=27;break}return t.abrupt("return");case 27:l?this.onTileError(l,this):(this.content=c,this.onTileLoad(this));case 28:case"end":return t.stop()}}),t,this,[[12,18,21,25]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadData",value:function(t,e){var n=this;t&&(this._isCancelled=!1,this._loader=this._loadData(t,e),this._loader.finally((function(){n._loader=void 0})))}},{key:"abort",value:function(){this.isLoaded||(this._isCancelled=!0,this._abortController.abort())}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isLoading",get:function(){return Boolean(this._loader)}},{key:"isCancelled",get:function(){return this._isCancelled}},{key:"byteLength",get:function(){var t=this.content?this.content.byteLength:0;return Number.isFinite(t)||v.a.error("byteLength not defined in tile data")(),t}}]),t}(),A=n(74),b=n(345),_=n(13);function w(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E="best-available",O=function(){function t(e){var n=this;Object(r.a)(this,t),this.opts=e,this._getTileData=e.getTileData,this.onTileError=e.onTileError,this.onTileLoad=function(t){e.onTileLoad(t),n.opts.maxCacheByteSize&&(n._cacheByteSize+=t.byteLength,n._resizeCache())},this.onTileUnload=e.onTileUnload,this._requestScheduler=new b.a({maxRequests:e.maxRequests,throttleRequests:e.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(e)}return Object(i.a)(t,[{key:"setOptions",value:function(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}},{key:"update",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.zRange,i=n.modelMatrix,o=new _.Matrix4(i),a=!o.equals(this._modelMatrix);if(!t.equals(this._viewport)||a){a&&(this._modelMatrixInverse=i&&o.clone().invert(),this._modelMatrix=i&&o),this._viewport=t;var s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map((function(t){return e._getTile(t,!0)})),this._dirty&&this._rebuildTree()}var u=this.updateTileStates();return this._dirty&&this._resizeCache(),u&&this._frameNumber++,this._frameNumber}},{key:"getTileIndices",value:function(t){var e=t.viewport,n=t.maxZoom,r=t.minZoom,i=t.zRange,o=t.modelMatrix,a=t.modelMatrixInverse,s=this.opts,u=s.tileSize,c=s.extent;return Object(A.a)({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:u,extent:c,modelMatrix:o,modelMatrixInverse:a})}},{key:"getTileMetadata",value:function(t){var e=t.x,n=t.y,r=t.z;return{bbox:Object(A.e)(this._viewport,e,n,r)}}},{key:"getParentIndex",value:function(t){return t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),t.z-=1,t}},{key:"updateTileStates",value:function(){this._updateTileStates(this.selectedTiles);var t,e=this.opts.maxRequests,n=[],r=0,i=!1,o=w(this._cache.values());try{for(o.s();!(t=o.n()).done;){var a=t.value,s=Boolean(1&a.state);a.isVisible!==s&&(i=!0,a.isVisible=s),a.isSelected=5===a.state,a.isLoading&&(r++,a.isSelected||n.push(a))}}catch(u){o.e(u)}finally{o.f()}if(e>0)for(;r>e&&n.length>0;){n.shift().abort(),r--}return i}},{key:"_rebuildTree",value:function(){var t,e=this._cache,n=w(e.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.parent=null,r.children.length=0}}catch(u){n.e(u)}finally{n.f()}var i,o=w(e.values());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this._getNearestAncestor(a.x,a.y,a.z);a.parent=s,s&&s.children.push(a)}}catch(u){o.e(u)}finally{o.f()}}},{key:"_updateTileStates",value:function(t){var e,n=this._cache,r=this.opts.refinementStrategy||E,i=w(n.values());try{for(i.s();!(e=i.n()).done;){e.value.state=0}}catch(h){i.e(h)}finally{i.f()}var o,a=w(t);try{for(a.s();!(o=a.n()).done;){o.value.state=5}}catch(h){a.e(h)}finally{a.f()}if("never"!==r){var s,u=w(t);try{for(u.s();!(s=u.n()).done;){T(s.value,r)}}catch(h){u.e(h)}finally{u.f()}var c,l=w(t);try{for(l.s();!(c=l.n()).done;){var f=c.value;S(f)&&P(f)}}catch(h){l.e(h)}finally{l.f()}}}},{key:"_resizeCache",value:function(){var t=this._cache,e=this.opts,n=e.maxCacheSize||(e.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=e.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>r){var i,o=w(t);try{for(o.s();!(i=o.n()).done;){var a=Object(p.a)(i.value,2),s=a[0],u=a[1];if(u.isVisible||(this._cacheByteSize-=e.maxCacheByteSize?u.byteLength:0,t.delete(s),this.onTileUnload(u)),t.size<=n&&this._cacheByteSize<=r)break}}catch(c){o.e(c)}finally{o.f()}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((function(t,e){return t.z-e.z})),this._dirty=!1)}},{key:"_getTile",value:function(t,e){var n=t.x,r=t.y,i=t.z,o="".concat(n,",").concat(r,",").concat(i),a=this._cache.get(o);return!a&&e?(a=new m({x:n,y:r,z:i,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(a,this.getTileMetadata(a)),a.loadData(this._getTileData,this._requestScheduler),this._cache.set(o,a),this._dirty=!0):a&&a.isCancelled&&!a.isLoading&&a.loadData(this._getTileData,this._requestScheduler),a}},{key:"_getNearestAncestor",value:function(t,e,n){for(var r=this._minZoom,i=void 0===r?0:r,o={x:t,y:e,z:n};o.z>i;){o=this.getParentIndex(o);var a=this._getTile(o);if(a)return a}return null}},{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles.every((function(t){return t.isLoaded}))}}]),t}();function S(t){for(var e=t;e;){if(!1&e.state)return!0;if(e.isLoaded)return!1;e=e.parent}return!0}function T(t,e){for(var n,r=3;n=t.parent;){if(t.isLoaded&&(r=4,e===E))return;n.state=Math.max(n.state,r),t=n}}function P(t){var e,n=w(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.state=Math.max(r.state,3),r.isLoaded||P(r)}}catch(i){n.e(i)}finally{n.f()}}function M(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var I={data:[],dataComparator:A.f.equals,renderSubLayers:{type:"function",value:function(t){return new f.a(t)},compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:function(t){},compare:!1},onTileUnload:{type:"function",value:function(t){},compare:!1},onTileError:{type:"function",value:function(t){return console.error(t)},compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:E,zRange:null,fetch:{type:"function",value:function(t,e){var n=e.layer,r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({signal:e.signal},n.getLoadOptions()||{});return Object(h.a)(t,r)},compare:!1},maxRequests:6},R=function(t){Object(o.a)(n,t);var e=M(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"initializeState",value:function(){this.state={tiles:[],isLoaded:!1}}},{key:"shouldUpdateState",value:function(t){return t.changeFlags.somethingChanged}},{key:"updateState",value:function(t){var e=t.props,n=(t.oldProps,t.context,t.changeFlags),r=this.state.tileset;if(!r||n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getTileData)){var i=Number.isFinite(this.state.maxZoom)?this.state.maxZoom:e.maxZoom,o=Number.isFinite(this.state.minZoom)?this.state.minZoom:e.minZoom,a=e.tileSize,s=e.maxCacheSize,u=e.maxCacheByteSize,c=e.refinementStrategy,l=e.extent,f=e.maxRequests;r=new O({getTileData:this.getTileData.bind(this),maxCacheSize:s,maxCacheByteSize:u,maxZoom:i,minZoom:o,tileSize:a,refinementStrategy:c,extent:l,onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this),maxRequests:f}),this.setState({tileset:r})}else(n.propsChanged||n.updateTriggersChanged)&&(r.setOptions(e),this.state.tileset.tiles.forEach((function(t){t.layers=null})));this._updateTileset()}},{key:"_updateTileset",value:function(){var t=this.state.tileset,e=this.props,n=e.zRange,r=e.modelMatrix,i=t.update(this.context.viewport,{zRange:n,modelMatrix:r}),o=t.isLoaded,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}},{key:"_onViewportLoad",value:function(){var t=this.state.tileset,e=this.props.onViewportLoad;e&&e(t.selectedTiles.map((function(t){return t.data})))}},{key:"_onTileLoad",value:function(t){this.getCurrentLayer().props.onTileLoad(t),t.isVisible&&this.setNeedsUpdate()}},{key:"_onTileError",value:function(t,e){var n=this.getCurrentLayer();n.props.onTileError(t),n._updateTileset(),e.isVisible&&this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(t){this.getCurrentLayer().props.onTileUnload(t)}},{key:"getTileData",value:function(t){var e=this.props.data,n=this.getCurrentLayer().props,r=n.getTileData,i=n.fetch,o=t.signal;return t.url=Object(A.b)(e,t),r?r(t):t.url?i(t.url,{layer:this,signal:o}):null}},{key:"renderSubLayers",value:function(t){return this.props.renderSubLayers(t)}},{key:"getHighlightedObjectIndex",value:function(){return-1}},{key:"getPickingInfo",value:function(t){var e=t.info,n=t.sourceLayer;return e.sourceLayer=n,e.tile=n.props.tile,e}},{key:"renderLayers",value:function(){var t=this,e=this.props.visible;return this.state.tileset.tiles.map((function(n){var r=e&&n.isVisible,i=t.getHighlightedObjectIndex(n);if(n.isLoaded)if(n.layers)!n.layers[0]||n.layers[0].props.visible===r&&n.layers[0].props.highlightedObjectIndex===i||(n.layers=n.layers.map((function(t){return t.clone({visible:r,highlightedObjectIndex:i})})));else{var o=t.renderSubLayers(Object.assign({},t.props,{id:"".concat(t.id,"-").concat(n.x,"-").concat(n.y,"-").concat(n.z),data:n.data,visible:r,_offset:0,tile:n,highlightedObjectIndex:i}));n.layers=Object(c.b)(o,Boolean)}else;return n.layers}))}},{key:"isLoaded",get:function(){return this.state.tileset.selectedTiles.every((function(t){return t.layers&&t.layers.every((function(t){return t.isLoaded}))}))}}]),n}(l.a);R.layerName="TileLayer",R.defaultProps=I},function(t,e,n){"use strict";var r=n(644),i=n(24),o=Object.keys(i.a).map((function(t){return"const int COORDINATE_SYSTEM_".concat(t," = ").concat(i.a[t],";")})).join(""),a=Object.keys(i.c).map((function(t){return"const int PROJECTION_MODE_".concat(t," = ").concat(i.c[t],";")})).join(""),s="".concat(o,"\n").concat(a,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),u=n(159),c={};e.a={name:"project",dependencies:[r.a],vs:s,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return t.viewport?Object(u.b)(t):{}}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(4),i=n.n(r),o=n(11),a=n(32),s=n(130);function u(t){return c.apply(this,arguments)}function c(){return(c=Object(o.a)(i.a.mark((function t(e){var n,r,o,u,c,l,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(a.i)(e)){t.next=2;break}return t.abrupt("return",e);case 2:return n={},(r=Object(s.a)(e))>=0&&(n["content-length"]=String(r)),o=Object(s.b)(e),u=o.url,(c=o.type)&&(n["content-type"]=c),t.next=9,d(e);case 9:return(l=t.sent)&&(n["x-first-bytes"]=l),"string"===typeof e&&(e=(new TextEncoder).encode(e)),f=new Response(e,{headers:n}),Object.defineProperty(f,"url",{value:u}),t.abrupt("return",f);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,h(e);case 3:throw n=t.sent,new Error(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function t(e){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,r=e.headers.get("Content-Type"),o=e.statusText,!r.includes("application/json")){t.next=11;break}return t.t0=o,t.t1=" ",t.next=9,e.text();case 9:t.t2=t.sent,o=t.t0+=t.t1.concat.call(t.t1,t.t2);case 11:n=(n+=o).length>60?"".concat(n.slice(60),"..."):n,t.next=17;break;case 15:t.prev=15,t.t3=t.catch(1);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function d(t){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(i.a.mark((function t(e){var n,r,o,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=5,"string"!==typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,n)));case 3:if(!(e instanceof Blob)){t.next=8;break}return r=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){return t(e.target&&e.target.result)},e.readAsDataURL(r)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return o=e.slice(0,n),a=y(o),t.abrupt("return","data:base64,".concat(a));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r,i=n(1),o=n(6),a=n(3),s=n(40),u=n(2),c=n(5),l=n(58),f=n(0),h="EXT_color_buffer_float",p=(r={},Object(f.a)(r,33189,{bpp:2}),Object(f.a)(r,33190,{gl2:!0,bpp:3}),Object(f.a)(r,36012,{gl2:!0,bpp:4}),Object(f.a)(r,36168,{bpp:1}),Object(f.a)(r,34041,{bpp:4}),Object(f.a)(r,35056,{gl2:!0,bpp:4}),Object(f.a)(r,36013,{gl2:!0,bpp:5}),Object(f.a)(r,32854,{bpp:2}),Object(f.a)(r,36194,{bpp:2}),Object(f.a)(r,32855,{bpp:2}),Object(f.a)(r,33321,{gl2:!0,bpp:1}),Object(f.a)(r,33330,{gl2:!0,bpp:1}),Object(f.a)(r,33329,{gl2:!0,bpp:1}),Object(f.a)(r,33332,{gl2:!0,bpp:2}),Object(f.a)(r,33331,{gl2:!0,bpp:2}),Object(f.a)(r,33334,{gl2:!0,bpp:4}),Object(f.a)(r,33333,{gl2:!0,bpp:4}),Object(f.a)(r,33323,{gl2:!0,bpp:2}),Object(f.a)(r,33336,{gl2:!0,bpp:2}),Object(f.a)(r,33335,{gl2:!0,bpp:2}),Object(f.a)(r,33338,{gl2:!0,bpp:4}),Object(f.a)(r,33337,{gl2:!0,bpp:4}),Object(f.a)(r,33340,{gl2:!0,bpp:8}),Object(f.a)(r,33339,{gl2:!0,bpp:8}),Object(f.a)(r,32849,{gl2:!0,bpp:3}),Object(f.a)(r,32856,{gl2:!0,bpp:4}),Object(f.a)(r,32857,{gl2:!0,bpp:4}),Object(f.a)(r,36220,{gl2:!0,bpp:4}),Object(f.a)(r,36238,{gl2:!0,bpp:4}),Object(f.a)(r,36975,{gl2:!0,bpp:4}),Object(f.a)(r,36214,{gl2:!0,bpp:8}),Object(f.a)(r,36232,{gl2:!0,bpp:8}),Object(f.a)(r,36226,{gl2:!0,bpp:16}),Object(f.a)(r,36208,{gl2:!0,bpp:16}),Object(f.a)(r,33325,{gl2:h,bpp:2}),Object(f.a)(r,33327,{gl2:h,bpp:4}),Object(f.a)(r,34842,{gl2:h,bpp:8}),Object(f.a)(r,33326,{gl2:h,bpp:4}),Object(f.a)(r,33328,{gl2:h,bpp:8}),Object(f.a)(r,34836,{gl2:h,bpp:16}),Object(f.a)(r,35898,{gl2:h,bpp:4}),r),d=n(10),g=n(31);function y(t,e,n){var r=n[e];if(!r)return!1;var i=Object(d.g)(t)&&r.gl2||r.gl1;return"string"===typeof i?t.getExtension(i):i}var v=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,e),(n=Object(o.a)(this,Object(a.a)(e).call(this,t,r))).initialize(r),Object.seal(Object(s.a)(n)),n}return Object(c.a)(e,t),Object(u.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null},n=e.format;return!n||y(t,n,p)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),Object(u.a)(e,[{key:"initialize",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,o=void 0===i?1:i,a=t.samples,s=void 0===a?0:a;return Object(g.a)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(d.g)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,e,r,o):this.gl.renderbufferStorage(36161,e,r,o),this.format=e,this.width=r,this.height=o,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*p[this.format].bpp),this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}]),e}(l.a)},function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var r="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!==typeof window?window:t,o=("undefined"!==typeof t||window,"undefined"!==typeof document&&document,!1);try{var a={get passive(){return o=!0,!0}};i.addEventListener("test",a,a),i.removeEventListener("test",a,a)}catch(s){}}).call(this,n(62))},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}));var r=n(31),i={};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";i[t]=i[t]||1;var e=i[t]++;return"".concat(t,"-").concat(e)}function a(t){return Object(r.a)("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function s(t){var e=!0;for(var n in t){e=!1;break}return e}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r="",i={};function o(t){for(var e in i)if(t.startsWith(e)){var n=i[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(r).concat(t)),t}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n(111);function i(t){return t+3&-4}function o(t,e,n){return Object(r.c)(t,e,n)}function a(t,e,n){var r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{var o=t.byteOffset,a=t.byteLength;r=new Uint8Array(t.buffer,o,a)}return e.set(r,n),n+i(r.byteLength)}},function(t,e,n){var r=n(280),i=n(281);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?i(n,c,l):r(n,c,l)}return n}},function(t,e,n){var r=n(181),i=n(354);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(356),i=n(530),o=n(148);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(0),i=n(1),o=n(2),a=n(40),s=n(5),u=n(6),c=n(3),l=n(59),f=n(34),h=n(43),p=n(13);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var v=function(t){Object(s.a)(n,t);var e=y(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,n);var o=r.latitude,s=void 0===o?0:o,u=r.longitude,c=void 0===u?0:u,l=r.zoom,h=void 0===l?11:l,d=r.pitch,g=void 0===d?0:d,y=r.bearing,v=void 0===y?0:y,m=r.nearZMultiplier,A=void 0===m?.1:m,b=r.farZMultiplier,_=void 0===b?1.01:b,w=r.orthographic,x=void 0!==w&&w,E=r.repeat,O=void 0!==E&&E,S=r.worldOffset,T=void 0===S?0:S,P=r.width,M=r.height,C=r.altitude,I=void 0===C?1.5:C,R=Math.pow(2,h);P=P||1,M=M||1,I=Math.max(.75,I);var k=Object(f.j)({width:P,height:M,pitch:g,altitude:I,nearZMultiplier:A,farZMultiplier:_}),j=k.fov,L=k.aspect,N=k.focalDistance,D=k.near,F=k.far,B=Object(f.k)({height:M,pitch:g,bearing:v,scale:R,altitude:I});if(T){var z=(new p.Matrix4).translate([512*T,0,0]);B=z.multiplyLeft(B)}var U=Object.assign({},r,{width:P,height:M,viewMatrix:B,longitude:c,latitude:s,zoom:h,orthographic:x,fovyRadians:j,aspect:L,focalDistance:x?N:1,near:D,far:F});return(t=e.call(this,U)).latitude=s,t.longitude=c,t.zoom=h,t.pitch=g,t.bearing=v,t.altitude=I,t.orthographic=x,t._subViewports=O?[]:null,Object.freeze(Object(a.a)(t)),t}return Object(o.a)(n,[{key:"addMetersToLngLat",value:function(t,e){return Object(f.b)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(f.n)(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=h.a([],i,h.d([],r)),a=h.a([],this.center,o);return this.unprojectFlat(a)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(f.e)(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(f.c)(Object.assign({width:r,height:i,bounds:t},e)),a=o.longitude,s=o.latitude,u=o.zoom;return new n({width:r,height:i,longitude:a,latitude:s,zoom:u})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var t=this.getBounds(),e=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360),i=e;i<=r;i++){var o=i?new n(g(g({},this),{},{worldOffset:i})):this;this._subViewports.push(o)}return this._subViewports}}]),n}(l.a);v.displayName="WebMercatorViewport"},function(t,e,n){"use strict";n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return C}));var r=n(0),i=n(12),o=n(1),a=n(2),s=n(5),u=n(6),c=n(3),l=n(13),f=n(85),h=n(166),p=n(34),d=n(35),g=n(83),y=n(84);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var b={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new g.a,transitionInterruption:y.a.BREAK},_={transitionDuration:0},w=0,x=0,E=1.5,O=0,S=20,T=0,P=60,M=function(t){Object(s.a)(n,t);var e=A(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.makeViewport,a=r.width,s=r.height,u=r.latitude,c=r.longitude,l=r.zoom,f=r.bearing,h=void 0===f?x:f,p=r.pitch,g=void 0===p?w:p,y=r.altitude,v=void 0===y?E:y,m=r.maxZoom,A=void 0===m?S:m,b=r.minZoom,_=void 0===b?O:b,M=r.maxPitch,C=void 0===M?P:M,I=r.minPitch,R=void 0===I?T:I,k=r.startPanLngLat,j=r.startZoomLngLat,L=r.startBearing,N=r.startPitch,D=r.startZoom;return Object(o.a)(this,n),Object(d.a)(Number.isFinite(c),"`longitude` must be supplied"),Object(d.a)(Number.isFinite(u),"`latitude` must be supplied"),Object(d.a)(Number.isFinite(l),"`zoom` must be supplied"),(t=e.call(this,{width:a,height:s,latitude:u,longitude:c,zoom:l,bearing:h,pitch:g,altitude:v,maxZoom:A,minZoom:_,maxPitch:C,minPitch:R}))._interactiveState={startPanLngLat:k,startZoomLngLat:j,startBearing:L,startPitch:N,startZoom:D},t.makeViewport=i,t}return Object(a.a)(n,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var o=this._calculateNewLngLat({startPanLngLat:r,pos:e}),a=Object(i.a)(o,2),s=a[0],u=a[1];return this._getUpdatedState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=void 0===e?0:e,r=t.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),c=u.pitch,l=u.bearing;return this._getUpdatedState({bearing:l,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,o=this._interactiveState,a=o.startZoom,s=o.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,s=this._unproject(n)||this._unproject(e));var u=this._calculateNewZoom({scale:r,startZoom:a}),c=this.makeViewport(m(m({},this._viewportProps),{},{zoom:u})).getMapCenterByLngLatPosition({lngLat:s,pos:e}),l=Object(i.a)(c,2),f=l[0],h=l[1];return this._getUpdatedState({zoom:u,longitude:f,latitude:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-t})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(m(m(m({makeViewport:this.makeViewport},this._viewportProps),this._interactiveState),t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Object(l.clamp)(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=Object(l.clamp)(a,o,i),Object.assign(t,Object(p.m)(t)),t}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom,a=n+Math.log2(e);return Object(l.clamp)(a,o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=Object(l.clamp)(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}}]),n}(h.a),C=function(t){Object(s.a)(n,t);var e=A(n);function n(t){return Object(o.a)(this,n),t.dragMode=t.dragMode||"pan",e.call(this,M,t)}return Object(a.a)(n,[{key:"_getTransitionProps",value:function(){return b}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,r=this.getCenter(t),o=Object(i.a)(r,2)[1],a=o-n,s=this.controllerState.getViewportProps(),u=s.width,c=s.height,l=e/u,f=0;n>0?Math.abs(c-a)>5&&(f=n/(a-c)*1.2):n<0&&a>5&&(f=1-o/a),f=Math.min(1,Math.max(-1,f));var h=this.controllerState.rotate({deltaScaleX:l,deltaScaleY:f});return this.updateViewport(h,_,{isDragging:!0,isRotating:!0})}}]),n}(f.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),i=n(2),o=n(13),a=n(35);function s(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e,i=n.compare,o=n.extract,a=n.required;this._propsToCompare=i,this._propsToExtract=o,this._requiredProps=a}return Object(i.a)(t,[{key:"arePropsEqual",value:function(t,e){var n,r=s(this._propsToCompare||Object.keys(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!(i in t)||!(i in e)||!Object(o.equals)(t[i],e[i]))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"initializeProps",value:function(t,e){var n;if(this._propsToExtract){var r,i={},o={},a=s(this._propsToExtract);try{for(a.s();!(r=a.n()).done;){var u=r.value;i[u]=t[u],o[u]=e[u]}}catch(c){a.e(c)}finally{a.f()}n={start:i,end:o}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(t,e,n){return e}},{key:"getDuration",value:function(t,e){return e.transitionDuration}},{key:"_checkRequiredProps",value:function(t){this._requiredProps&&this._requiredProps.forEach((function(e){var n=t[e];Object(a.a)(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return Nt}));var r=n(12),i=n(1),o=n(2),a=n(5),s=n(6),u=n(3),c=n(24),l=n(228),f=n(0),h=n(68),p=n(13),d=n(102);function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var y=function(t){Object(a.a)(n,t);var e=g(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"_onUpdate",value:function(){var t=this.time,e=this.settings,n=e.fromValue,r=e.toValue,i=e.duration,o=(0,e.easing)(t/i);this._value=Object(p.lerp)(n,r,o)}},{key:"value",get:function(){return this._value}}]),n}(d.a);function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var m=1e-5;function A(t,e,n,r,i){var o=e-t;return(n-e)*i+-o*r+o+e}function b(t,e){if(Array.isArray(t)){for(var n=0,r=0;r<t.length;r++){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}var _=function(t){Object(a.a)(n,t);var e=v(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"_onUpdate",value:function(){var t=this.settings,e=t.fromValue,n=t.toValue,r=t.damping,i=t.stiffness,o=this._prevValue,a=void 0===o?e:o,s=this._currValue,u=void 0===s?e:s,c=function(t,e,n,r,i){if(Array.isArray(n)){for(var o=[],a=0;a<n.length;a++)o[a]=A(t[a],e[a],n[a],r,i);return o}return A(t,e,n,r,i)}(a,u,n,r,i),l=b(c,n),f=b(c,u);l<m&&f<m&&(c=n,this.end()),this._prevValue=u,this._currValue=c}},{key:"value",get:function(){return this._currValue}}]),n}(d.a),w=n(26);function x(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T,P={interpolation:y,spring:_},M=function(){function t(e){Object(i.a)(this,t),this.transitions=new Map,this.timeline=e}return Object(o.a)(t,[{key:"add",value:function(t,e,n,r){var i=this.transitions;if(i.has(t)){var o=i.get(t),a=o.value;e=void 0===a?o.settings.fromValue:a,this.remove(t)}if(r=Object(h.e)(r)){var s=P[r.type];if(s){var u=new s(this.timeline);u.start(S(S({},r),{},{fromValue:e,toValue:n})),i.set(t,u)}else w.a.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(t){var e=this.transitions;e.has(t)&&(e.get(t).cancel(),e.delete(t))}},{key:"update",value:function(){var t,e={},n=x(this.transitions);try{for(n.s();!(t=n.n()).done;){var i=Object(r.a)(t.value,2),o=i[0],a=i[1];a.update(),e[o]=a.value,a.inProgress||this.remove(o)}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"clear",value:function(){var t,e=x(this.transitions.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.remove(n)}}catch(r){e.e(r)}finally{e.f()}}},{key:"active",get:function(){return this.transitions.size>0}}]),t}(),C=n(186),I=n(225),R=n(49),k=n(10),j=n(35),L=n(113),N=n(224),D=n(191),F=n(95),B=n(50),z=n(73),U=n(22),G=n(167);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=(T={},Object(f.a)(T,10241,9987),Object(f.a)(T,10240,9729),Object(f.a)(T,10242,33071),Object(f.a)(T,10243,33071),T),W={};var X={boolean:{validate:function(t,e){return!0},equal:function(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate:function(t,e){return e.optional&&!t||K(t)&&(3===t.length||4===t.length)},equal:function(t,e,n){return Y(t,e)}},accessor:{validate:function(t,e){var n=J(t);return"function"===n||n===J(e.value)},equal:function(t,e,n){return"function"===typeof e||Y(t,e)}},array:{validate:function(t,e){return e.optional&&!t||K(t)},equal:function(t,e,n){return n.compare?Y(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||"function"===typeof t},equal:function(t,e,n){return!n.compare||t===e}},data:{transform:function(t,e,n){var r=(n?n.props:{}).dataTransform;return r&&t?r(t):t}},image:{transform:function(t,e,n){return function(t,e){var n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof G.a)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});var r=new G.a(n,q(q({},e),{},{parameters:q(q({},H),t.props.textureParameters)}));return W[r.id]=!0,r}(n,t)},release:function(t){var e;(e=t)&&e instanceof G.a&&W[e.id]&&(e.delete(),delete W[e.id])}}};function Y(t,e){if(t===e)return!0;if(!K(t)||!K(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Q(t,e){switch(J(e)){case"object":return Z(t,e);case"array":return Z(t,{type:"array",value:e,compare:!1});case"boolean":return Z(t,{type:"boolean",value:e});case"number":return Z(t,{type:"number",value:e});case"function":return Z(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Z(t,e){return"type"in e?Object.assign({name:t},X[e.type],e):"value"in e?Object.assign({name:t,type:J(e.value)},e):{name:t,type:"object",value:e}}function K(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function J(t){return K(t)?"array":null===t?"null":Object(U.a)(t)}function $(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var et=B.b.COMPONENT,nt=B.b.ASYNC_ORIGINAL,rt=B.b.ASYNC_RESOLVED,it=B.b.ASYNC_DEFAULTS;function ot(){var t=this,e=at(t.constructor),n=Object.create(e);n[et]=t,n[nt]={},n[rt]={};for(var r=0;r<arguments.length;++r){var i=arguments[r];for(var o in i)n[o]=i[o]}return Object.freeze(n),n}function at(t){var e=ct(t,"_mergedDefaultProps");return e||(function(t){if(!t.prototype)return;var e=Object.getPrototypeOf(t),n=at(e),i=function(t){for(var e={},n={},i={},o=0,a=Object.entries(t);o<a.length;o++){var s=Object(r.a)(a[o],2),u=s[0],c=s[1];if(c&&c.deprecatedFor)i[u]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var l=Q(u,c);e[u]=l,n[u]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(ct(t,"defaultProps")||{}),o=function(t,e,n){var r=Object.create(null);Object.assign(r,e,t);var i=function(t){var e=ct(t,"layerName")||ct(t,"componentName");e||w.a.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(i.defaultProps,n,t),a=Object.assign({},e._propTypes,i.propTypes);!function(t,e){var n={},r={};for(var i in e){var o=e[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=st(a))}t[it]=n,t[nt]={},Object.defineProperties(t,r)}(o,a);var s=Object.assign({},e._deprecatedProps,i.deprecatedProps);(function(t,e){var n=function(n){Object.defineProperty(t,n,{enumerable:!1,set:function(t){var r,i="".concat(this.id,": ").concat(n),o=$(e[n]);try{for(o.s();!(r=o.n()).done;){var a=r.value;ut(this,a)||(this[a]=t)}}catch(s){o.e(s)}finally{o.f()}w.a.deprecated(i,e[n].join("/"))()}})};for(var r in e)n(r)})(o,s),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=s}(t),t._mergedDefaultProps)}function st(t){return{enumerable:!0,set:function(e){"string"===typeof e||e instanceof Promise||Object(z.c)(e)?this[nt][t]=e:this[rt][t]=e},get:function(){if(this[rt]){if(t in this[rt])return this[rt][t]||this[it][t];if(t in this[nt]){var e=this[et]&&this[et].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[it][t]}}return this[it][t]}}}function ut(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ct(t,e){return ut(t,e)&&t[e]}var lt=n(4),ft=n.n(lt),ht=n(11),pt=n(160),dt=B.b.ASYNC_ORIGINAL,gt=B.b.ASYNC_RESOLVED,yt=B.b.ASYNC_DEFAULTS,vt=Object.freeze({}),mt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(i.a)(this,t),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=vt,this.oldAsyncProps=null}return Object(o.a)(t,[{key:"finalize",value:function(){for(var t in this.asyncProps){var e=this.asyncProps[t];e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var t in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){if(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(var n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}},{key:"reloadAsyncProp",value:function(t,e){this._watchPromise(t,Promise.resolve(e))}},{key:"setAsyncProps",value:function(t){var e=t[gt]||{},n=t[dt]||t,r=t[yt]||{};for(var i in e){var o=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,o),e[i]=this.getAsyncProp(i)}for(var a in n){var s=n[a];this._createAsyncPropData(a,r[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function(t,e){if(this._didAsyncInputValueChange(t,e)){if("string"===typeof e){var n=this.layer&&this.layer.props.fetch;n&&(e=n(e,{propName:t,layer:this.layer}))}e instanceof Promise?this._watchPromise(t,e):Object(z.c)(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e)}}},{key:"_didAsyncInputValueChange",value:function(t,e){var n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}},{key:"_setPropValue",value:function(t,e){var n=this.asyncProps[t];e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this.freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:"_watchPromise",value:function(t,e){var n=this,r=this.asyncProps[t];r.pendingLoadCount++;var i=r.pendingLoadCount;e.then((function(e){e=n._postProcessValue(r,e),n._setAsyncPropValue(t,e,i);var o=n.layer&&n.layer.props.onDataLoad;"data"===t&&o&&o(e,{propName:t,layer:n.layer})})).catch((function(t){return w.a.error(t)()}))}},{key:"_resolveAsyncIterable",value:function(){var t=Object(ht.a)(ft.a.mark((function t(e,n){var r,i,o,a,s,u,c,l,f,h,p,d,g,y;return ft.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"data"!==e&&this._setPropValue(e,n),(r=this.asyncProps[e]).pendingLoadCount++,i=r.pendingLoadCount,o=[],a=0,s=!0,u=!1,t.prev=8,l=Object(pt.a)(n);case 10:return t.next=12,l.next();case 12:return f=t.sent,s=f.done,t.next=16,f.value;case 16:if(h=t.sent,s){t.next=27;break}p=h,d=this.component?this.component.props:{},g=d.dataTransform,o=g?g(p,o):o.concat(p),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(e,o,i);case 24:s=!0,t.next=10;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(8),u=!0,c=t.t0;case 33:if(t.prev=33,t.prev=34,s||null==l.return){t.next=38;break}return t.next=38,l.return();case 38:if(t.prev=38,!u){t.next=41;break}throw c;case 41:return t.finish(38);case 42:return t.finish(33);case 43:(y=this.layer&&this.layer.props.onDataLoad)&&y(o,{propName:e,layer:this.layer});case 45:case"end":return t.stop()}}),t,this,[[8,29,33,43],[34,,38,42]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_postProcessValue",value:function(t,e){var n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}},{key:"_createAsyncPropData",value:function(t,e){if(!this.asyncProps[t]){var n=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}]),t}(),At=B.b.ASYNC_ORIGINAL,bt=B.b.ASYNC_RESOLVED,_t=B.b.ASYNC_DEFAULTS,wt=0,xt=function(){function t(){Object(i.a)(this,t),this.props=ot.apply(this,arguments),this.id=this.props.id,this.count=wt++,this.lifecycle=B.a.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(o.a)(t,[{key:"clone",value:function(t){var e=this.props,n={};for(var r in e[_t])r in e[bt]?n[r]=e[bt][r]:r in e[At]&&(n[r]=e[At][r]);return new this.constructor(Object.assign({},e,n,t))}},{key:"_initState",value:function(){this.internalState=new mt({})}},{key:"stats",get:function(){return this.internalState.stats}}]),t}();function Et(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}xt.componentName="Component",xt.defaultProps={};var Ot=function(t){Object(a.a)(n,t);var e=Et(n);function n(t){var r,o=t.attributeManager,a=t.layer;return Object(i.a)(this,n),(r=e.call(this,a)).attributeManager=o,r.model=null,r.needsRedraw=!0,r.subLayers=null,r}return Object(o.a)(n,[{key:"layer",get:function(){return this.component},set:function(t){this.component=t}}]),n}(mt),St=n(34),Tt=n(649);function Pt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ct(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var It=Math.pow(2,24)-1,Rt=Object.freeze([]),kt=Object(L.a)((function(t){var e=t.oldViewport,n=t.viewport;return e.equals(n)})),jt=new Uint8ClampedArray(0),Lt={data:{type:"data",value:Rt,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var n=e.propName,r=e.layer,i=r.context.resourceManager,o=r.getLoadOptions(),a=i.contains(t);return a||o||(i.add({resourceId:t,data:t,persistent:!1}),a=!0),a?i.subscribe({resourceId:t,onChange:function(t){return r.internalState.reloadAsyncProp(n,t)},consumerId:r.id,requestId:n}):Object(Tt.a)(t,o)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:c.a.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Nt=function(t){Object(a.a)(n,t);var e=Ct(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(t){var e=this.context.viewport,n=Object(D.a)(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),i=Object(St.q)(n,e.pixelProjectionMatrix),o=Object(r.a)(i,3),a=o[0],s=o[1],u=o[2];return 2===t.length?[a,s]:[a,s,u]}},{key:"unproject",value:function(t){return this.context.viewport.unproject(t)}},{key:"projectPosition",value:function(t){return Object(D.b)(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var t=this.props.coordinateSystem;return t===c.a.DEFAULT||t===c.a.LNGLAT||t===c.a.CARTESIAN}},{key:"onHover",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:"onClick",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:"decodePickingColor",value:function(t){Object(j.a)(t instanceof Uint8Array);var e=Object(r.a)(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(t){var e,n=Pt(this.props.extensions);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=Object(N.a)(t,r.getShaders.call(this,r))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){var e=t.oldProps,n=t.props,r=(t.context,t.changeFlags),i=this.getAttributeManager();if(r.dataChanged&&i){var o=r.dataChanged;if(Array.isArray(o)){var a,s=Pt(o);try{for(s.s();!(a=s.n()).done;){var u=a.value;i.invalidateAll(u)}}catch(g){s.e(g)}finally{s.f()}}else i.invalidateAll()}var c=e.highlightedObjectIndex>=0||e.pickable,l=n.highlightedObjectIndex>=0||n.pickable;if(c!==l&&i){var f=i.attributes,h=f.pickingColors,p=f.instancePickingColors,d=h||p;d&&(l&&d.constant&&(d.constant=!1,i.invalidate(d.id)),d.value||l||(d.constant=!0,d.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var t,e=Pt(this.getModels());try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(r){e.e(r)}finally{e.f()}var n=this.getAttributeManager();n&&n.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(t){var e,n=Pt(this.getModels());try{for(n.s();!(e=n.n()).done;){e.value.draw(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:"activateViewport",value:function(t){var e=this.internalState.viewport;this.internalState.viewport=t,e&&kt({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}},{key:"updateAttributes",value:function(t){var e,n=Pt(this.getModels());try{for(n.s();!(e=n.n()).done;){var r=e.value;this._setModelAttributes(r,t)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t),r=this.getStartIndices(t);e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"_updateUniformTransition",value:function(){var t=this.internalState.uniformTransitions;if(t.active){var e=t.update(),n=Object.create(this.props);for(var r in e)Object.defineProperty(n,r,{value:e[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(t,e){var n=e.numInstances;if(!t.constant){var r=jt.length/3;if(r<n){n>It&&w.a.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();for(var i=(jt=F.a.allocate(jt,n,{size:3,copy:!0,maxCount:Math.max(n,It)})).length/3,o=[],a=r;a<i;a++)this.encodePickingColor(a,o),jt[3*a+0]=o[0],jt[3*a+1]=o[1],jt[3*a+2]=o[2]}t.value=jt.subarray(0,3*n)}}},{key:"_setModelAttributes",value:function(t,e){var n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}},{key:"clearPickingColor",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors,i=n||r,o=this.decodePickingColor(t),a=i.getVertexOffset(o),s=i.getVertexOffset(o+1);i.buffer.subData({data:new Uint8Array(s-a),offset:a})}},{key:"restorePickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors;(e||n).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Object(I.a)(t.data)}},{key:"getStartIndices",value:function(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){Object(R.a)("layer.initialize",this),this._initState(),this.initializeState(this.context);var t,e=Pt(this.props.extensions);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.initializeState.call(this,this.context,n)}}catch(r){e.e(r)}finally{e.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var t=this.needsUpdate();Object(R.a)("layer.update",this,t),t&&this._updateState()}},{key:"_updateState",value:function(){var t=this.props,e=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||e,this.props=n;var r=this._getUpdateParams(),i=this.getModels();if(this.context.gl)this.updateState(r);else try{this.updateState(r)}catch(c){}var o,a=Pt(this.props.extensions);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateState.call(this,r,s)}}catch(l){a.e(l)}finally{a.f()}var u=this.getModels()[0]!==i[0];this._updateModules(r,u),this.isComposite?this._renderLayers(r):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.context.viewport=e,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function(){Object(R.a)("layer.finalize",this),Object(j.a)(this.internalState&&this.state),this.finalizeState(this.context);var t,e=Pt(this.props.extensions);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.finalizeState.call(this,n)}}catch(r){e.e(r)}finally{e.f()}}},{key:"drawLayer",value:function(t){var e=this,n=t.moduleParameters,r=void 0===n?null:n,i=t.uniforms,o=void 0===i?{}:i,a=t.parameters,s=void 0===a?{}:a;this._updateAttributeTransition();var u=this.props;this.props=this.internalState.propsInTransition||u;var c=this.props.opacity;o.opacity=Math.pow(c,1/2.2),r&&this.setModuleParameters(r);var l=this.props.getPolygonOffset,f=l&&l(o)||[0,0];Object(k.k)(this.context.gl,{polygonOffset:f}),Object(k.l)(this.context.gl,s,(function(){var t,n={moduleParameters:r,uniforms:o,parameters:s,context:e.context},i=Pt(e.props.extensions);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.draw.call(e,n,a)}}catch(u){i.e(u)}finally{i.f()}e.draw(n)})),this.props=u}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this.internalState.changeFlags;for(var n in t)if(t[n]){var r=!1;switch(n){case"dataChanged":Array.isArray(e[n])&&(e[n]=Array.isArray(t[n])?e[n].concat(t[n]):t[n],r=!0);default:e[n]||(e[n]=t[n],r=!0)}r&&Object(R.a)("layer.changeFlag",this,n,t)}var i=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;e.propsOrDataChanged=i,e.somethingChanged=i||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(t,e){var n=Object(C.b)(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,e[i],t[i],t.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){Object(C.c)(this.props)}},{key:"setModuleParameters",value:function(t){var e,n=Pt(this.getModels());try{for(n.s();!(e=n.n()).done;){e.value.updateModuleSettings(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_updateModules",value:function(t,e){var n=t.props,r=t.oldProps,i=n.autoHighlight,o=n.highlightedObjectIndex,a=n.highlightColor;if(e||r.autoHighlight!==i||r.highlightedObjectIndex!==o||r.highlightColor!==a){var s={};i||(s.pickingSelectedColor=null),Array.isArray(a)&&(s.pickingHighlightColor=a),Number.isInteger(o)&&(s.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(s)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(t);return e=e||r}},{key:"_getAttributeManager",value:function(){return new l.a(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){Object(j.a)(!this.internalState&&!this.state),Object(j.a)(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Ot({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return w.a.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t}}),this.internalState.layer=this,this.internalState.uniformTransitions=new M(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){Object(R.a)("layer.matched",this,this===t);var e=t.state,n=t.internalState;Object(j.a)(e&&n),this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]),n}(xt);Nt.layerName="Layer",Nt.defaultProps=Lt},function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(315),l=n(658),f=n(316),h=n(24),p=n(153),d=n(631),g=n(301),y=n(252),v=n(87),m=n(0),A=n(193),b=n(311),_=n(118);function w(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(m.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var T=function(t){Object(a.a)(n,t);var e=S(n);function n(t){Object(r.a)(this,n);var i=t.fp64,o=t.IndexType,a=void 0===o?Uint32Array:o;return e.call(this,O(O({},t),{},{attributes:{positions:{size:3,type:i?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:a,size:1}}}))}return Object(i.a)(n,[{key:"get",value:function(t){var e=this.attributes;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}},{key:"updateGeometry",value:function(t){Object(o.a)(Object(u.a)(n.prototype),"updateGeometry",this).call(this,t);var e=this.buffers.indices;e&&(this.vertexCount=(e.value||e).length)}},{key:"normalizeGeometry",value:function(t){if(this.normalize){if(t=A.b(t,this.positionSize),this.opts.resolution)return Object(_.a)(t.positions||t,t.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return Object(_.b)(t.positions||t,t.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return t}},{key:"getGeometrySize",value:function(t){if(Array.isArray(t)&&!Number.isFinite(t[0])){var e,n=0,r=w(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=this.getGeometrySize(i)}}catch(o){r.e(o)}finally{r.f()}return n}return(t.positions||t).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(t){return this.normalize||!this.buffers.indices?Object(o.a)(Object(u.a)(n.prototype),"getGeometryFromBuffer",this).call(this,t):function(){return null}}},{key:"updateGeometryAttributes",value:function(t,e){if(Array.isArray(t)&&!Number.isFinite(t[0])){var n,r=w(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.getGeometrySize(i);e.geometrySize=o,this.updateGeometryAttributes(i,e),e.vertexStart+=o,e.indexStart=this.indexStarts[e.geometryIndex+1]}}catch(a){r.e(a)}finally{r.f()}}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}},{key:"_updateIndices",value:function(t,e){var n=e.geometryIndex,r=e.vertexStart,i=e.indexStart,o=this.attributes,a=this.indexStarts,s=this.typedArrayManager,u=o.indices;if(u){var c=i,l=A.a(t,this.positionSize,this.opts.preproject);u=s.allocate(u,i+l.length,{copy:!0});for(var f=0;f<l.length;f++)u[c++]=l[f]+r;a[n+1]=i+l.length,o.indices=u}}},{key:"_updatePositions",value:function(t,e){var n=e.vertexStart,r=e.geometrySize,i=this.attributes.positions,o=this.positionSize;if(i)for(var a=t.positions||t,s=n,u=0;u<r;s++,u++){var c=a[u*o],l=a[u*o+1],f=o>2?a[u*o+2]:0;i[3*s]=c,i[3*s+1]=l,i[3*s+2]=f}}},{key:"_updateVertexValid",value:function(t,e){var n=e.vertexStart,r=e.geometrySize,i=this.attributes.vertexValid,o=this.positionSize,a=t&&t.holeIndices;if(t&&t.edgeTypes?i.set(t.edgeTypes,n):i.fill(1,n,n+r),a)for(var s=0;s<a.length;s++)i[n+a[s]/o-1]=0;i[n+r-1]=0}}]),n}(b.a),P="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",M="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(P,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),C="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(P,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64Low = instancePositions64Low;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64Low = nextPositions64Low;\n\n  calculatePosition(props);\n}\n");function I(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var R=[0,0,0,255],k={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(t){return t.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:R},getLineColor:{type:"accessor",value:R},material:!0},j={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},L=function(t){Object(a.a)(n,t);var e=I(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(t){return Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"top"===t?M:C,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{},modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){var t=this,e=this.context,n=e.gl,r=e.viewport,i=this.props.coordinateSystem;r.isGeospatial&&i===h.a.DEFAULT&&(i=h.a.LNGLAT),this.setState({numInstances:0,polygonTesselator:new T({preproject:i===h.a.LNGLAT&&r.projectFlat,fp64:this.use64bitPositions(),IndexType:!n||Object(d.c)(n,g.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:j,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:j,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:j,accessor:"getFillColor",defaultValue:R,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:j,accessor:"getLineColor",defaultValue:R,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(e,n){var r=n.index,i=n.target;return t.encodePickingColor(e&&e.__source?e.__source.index:r,i)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(t){var e=Object(o.a)(Object(u.a)(n.prototype),"getPickingInfo",this).call(this,t),r=e.index,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((function(t){return t.__source.index===r}))),e}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.extruded,i=n.filled,o=n.wireframe,a=n.elevationScale,s=this.state,u=s.topModel,c=s.sideModel,l=s.polygonTesselator,f=Object.assign({},e,{extruded:Boolean(r),elevationScale:a});c&&(c.setInstanceCount(l.instanceCount-1),c.setUniforms(f),o&&(c.setDrawMode(3),c.setUniforms({isWireframe:!0}).draw()),i&&(c.setDrawMode(6),c.setUniforms({isWireframe:!1}).draw())),u&&(u.setVertexCount(l.vertexCount),u.setUniforms(f).draw())}},{key:"updateState",value:function(t){Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,t),this.updateGeometry(t);var e=t.props,r=t.oldProps,i=t.changeFlags,a=this.getAttributeManager();(i.extensionsChanged||e.filled!==r.filled||e.extruded!==r.extruded)&&(this.state.models&&this.state.models.forEach((function(t){return t.delete()})),this.setState(this._getModels(this.context.gl)),a.invalidateAll())}},{key:"updateGeometry",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.state.polygonTesselator,i=e.data.attributes||{};r.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:r.instanceCount,startIndices:r.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(t){var e,n,r=this.props,i=r.id,o=r.filled,a=r.extruded;if(o){var s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,e=new y.a(t,Object.assign({},s,{id:"".concat(i,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return a&&((n=new y.a(t,Object.assign({},this.getShaders("side"),{id:"".concat(i,"-side"),geometry:new v.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[n,e].filter(Boolean),topModel:e,sideModel:n}}},{key:"calculateIndices",value:function(t){var e=this.state.polygonTesselator;t.startIndices=e.indexStarts,t.value=e.get("indices")}},{key:"calculatePositions",value:function(t){var e=this.state.polygonTesselator;t.startIndices=e.vertexStarts,t.value=e.get("positions")}},{key:"calculateVertexValid",value:function(t){t.value=this.state.polygonTesselator.get("vertexValid")}},{key:"wrapLongitude",get:function(){return!1}}]),n}(p.a);L.layerName="SolidPolygonLayer",L.defaultProps=k},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(189);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return g}));var r=n(27),i=n(41),o=n(24),a=n(113),s=n(35),u=[0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[0,0,0],h=[0,0,0],p=Object(a.a)((function(t){var e=t.viewport,n=t.devicePixelRatio,a=t.coordinateSystem,s=t.coordinateOrigin,l=function(t,e,n){var o=t.viewMatrixUncentered,a=t.projectionMatrix,s=t.viewMatrix,l=t.viewProjectionMatrix,f=u,h=t.cameraPosition,p=d(t,e,n),g=p.geospatialOrigin,y=p.shaderCoordinateOrigin;if(p.offsetMode){var v=t.projectPosition(g||y);h=[h[0]-v[0],h[1]-v[1],h[2]-v[2]],v[3]=1,f=i.n([],v,l),s=o||s,l=r.h([],a,s),l=r.h([],l,c)}return{viewMatrix:s,viewProjectionMatrix:l,projectionCenter:f,cameraPosCommon:h,shaderCoordinateOrigin:y,geospatialOrigin:g}}(e,a,s),h=l.projectionCenter,p=l.viewProjectionMatrix,g=l.cameraPosCommon,y=l.shaderCoordinateOrigin,v=l.geospatialOrigin,m=e.getDistanceScales(),A=[e.width*n,e.height*n],b={project_uCoordinateSystem:a,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:y,project_uCenter:h,project_uViewportSize:A,project_uDevicePixelRatio:n,project_uFocalDistance:e.focalDistance||1,project_uCommonUnitsPerMeter:m.unitsPerMeter,project_uCommonUnitsPerWorldUnit:m.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:f,project_uScale:e.scale,project_uViewProjectionMatrix:p,project_uCameraPosition:g};if(v){var _=e.getDistanceScales(v);switch(a){case o.a.METER_OFFSETS:b.project_uCommonUnitsPerWorldUnit=_.unitsPerMeter,b.project_uCommonUnitsPerWorldUnit2=_.unitsPerMeter2;break;case o.a.LNGLAT:case o.a.LNGLAT_OFFSETS:b.project_uCommonUnitsPerWorldUnit=_.unitsPerDegree,b.project_uCommonUnitsPerWorldUnit2=_.unitsPerDegree2;break;case o.a.CARTESIAN:b.project_uCommonUnitsPerWorldUnit=[1,1,_.unitsPerMeter[2]],b.project_uCommonUnitsPerWorldUnit2=[0,0,_.unitsPerMeter2[2]]}}return b}));function d(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,i=r,a=!0;switch(n=e===o.a.LNGLAT_OFFSETS||e===o.a.METER_OFFSETS?r:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case o.c.WEB_MERCATOR:e!==o.a.LNGLAT&&e!==o.a.CARTESIAN||(a=!1);break;case o.c.WEB_MERCATOR_AUTO_OFFSET:e===o.a.LNGLAT?i=n:e===o.a.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],n=t.unprojectPosition(i),i[0]-=r[0],i[1]-=r[1],i[2]-=r[2]);break;case o.c.IDENTITY:i=t.position.map(Math.fround);break;case o.c.GLOBE:a=!1,n=null;break;default:a=!1}return i[2]=i[2]||0,{geospatialOrigin:n,shaderCoordinateOrigin:i,offsetMode:a}}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,a=void 0===i?null:i,u=t.coordinateSystem,c=void 0===u?o.a.DEFAULT:u,f=t.coordinateOrigin,h=t.autoWrapLongitude,d=void 0!==h&&h;t.projectionMode,t.positionOrigin;Object(s.a)(e),c===o.a.DEFAULT&&(c=e.isGeospatial?o.a.LNGLAT:o.a.CARTESIAN);var g=p({viewport:e,devicePixelRatio:r,coordinateSystem:c,coordinateOrigin:f});return g.project_uWrapLongitude=d,g.project_uModelMatrix=a||l,g}},function(t,e,n){"use strict";function r(t){var e;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(127),c=n(23),l=n(72);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var h=function(t){Object(o.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"copy",value:function(t){return Object(l.a)(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(c.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(c.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]*=o[a];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]/=o[a];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return Object(l.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(c.a)(this[t])}},{key:"setComponent",value:function(t,e){return Object(l.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}}]),n}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(12),i=n(1),o=n(2),a=n(5),s=n(6),u=n(3),c=n(23),l=n(242),f=n(80),h=n(27),p=n(43),d=n(29),g=n(41);function y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var v=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),m=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),A=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),b={},_=function(t){Object(a.a)(n,t);var e=y(n);function n(t){var r;return Object(i.a)(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(o.a)(n,[{key:"INDICES",get:function(){return A}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return b.IDENTITY=b.IDENTITY||Object.freeze(new n(v)),b.IDENTITY}},{key:"ZERO",get:function(){return b.ZERO=b.ZERO||Object.freeze(new n(m)),b.ZERO}}]),Object(o.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=p,this[14]=d,this[15]=g,this.check()}},{key:"setRowMajor",value:function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,g){return this[0]=t,this[1]=i,this[2]=u,this[3]=h,this[4]=e,this[5]=o,this[6]=c,this[7]=p,this[8]=n,this[9]=a,this[10]=l,this[11]=d,this[12]=r,this[13]=s,this[14]=f,this[15]=g,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(v)}},{key:"fromQuaternion",value:function(t){return h.c(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,o=t.top,a=t.near,s=t.far;return s===1/0?n._computeInfinitePerspectiveOffCenter(this,e,r,i,o,a):h.d(this,e,r,i,o,a,s),this.check()}},{key:"lookAt",value:function(t,e,n){if(1===arguments.length){var r=t;t=r.eye,e=r.center,n=r.up}return e=e||[0,0,0],n=n||[0,1,0],h.g(this,t,e,n),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return h.i(this,e,n,r,i,a,u),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?500:l;if(r>2*Math.PI)throw Error("radians");var h=r/2,p=s*Math.tan(h),d=p*o;return(new n).ortho({left:-d,right:d,bottom:-p,top:p,near:c,far:f})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=void 0===e?void 0:e,r=t.fov,i=void 0===r?45*Math.PI/180:r,o=t.aspect,a=void 0===o?1:o,s=t.near,u=void 0===s?.1:s,c=t.far,l=void 0===c?500:c;if((n=n||i)>2*Math.PI)throw Error("radians");return h.j(this,n,a,u,l),this.check()}},{key:"determinant",value:function(){return h.a(this)}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}},{key:"transpose",value:function(){return h.q(this,this),this.check()}},{key:"invert",value:function(){return h.f(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return h.h(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return h.h(this,this,t),this.check()}},{key:"rotateX",value:function(t){return h.l(this,this,t),this.check()}},{key:"rotateY",value:function(t){return h.m(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return h.n(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],o=e[2];return this.rotateX(n).rotateY(i).rotateZ(o)}},{key:"rotateAxis",value:function(t,e){return h.k(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?h.o(this,this,t):h.o(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return h.p(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(e=g.n(e||[-0,-0,-0,-0],t,this),Object(c.b)(e,4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=p.j(e||[-0,-0],t,this);break;case 3:e=d.q(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=Object(f.a)(e||[-0,-0],t,this);break;case 3:e=Object(f.c)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"transformPoint",value:function(t,e){return Object(c.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return Object(c.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,n,r,i,o){var a=2*o/(n-e),s=2*o/(i-r),u=(n+e)/(n-e),c=(i+r)/(i-r),l=-2*o;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=u,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=l,t[15]=0,t}}]),n}(l.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(12),i=n(1),o=n(2),a=n(5),s=n(6),u=n(3),c=n(127),l=n(20),f=n(23),h=n(188);function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var d="Unknown Euler angle order",g=.99999;var y=function(t){Object(a.a)(n,t);var e=p(n);function n(){var t,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.DefaultOrder;(Object(i.a)(this,n),t=e.call(this,-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0]))?(r=t).fromVector3.apply(r,arguments):t.set(o,a,s,u);return t}return Object(o.a)(n,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return n.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return n.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),Object(o.a)(n,[{key:"fromQuaternion",value:function(t){var e=Object(r.a)(t,4),i=e[0],o=e[1],a=e[2],s=e[3],u=o*o,c=-2*(u+a*a)+1,l=2*(i*o+s*a),f=-2*(i*a-s*o),h=2*(o*a+s*i),p=-2*(i*i+u)+1;return f=(f=f>1?1:f)<-1?-1:f,new n(Math.atan2(h,p),Math.asin(f),Math.atan2(l,c),n.RollPitchYaw)}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check()}},{key:"validate",value:function(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,e,r){return this.set(t,e,r,n.ZYX)}},{key:"fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DefaultOrder;return this._fromRotationMatrix(t,e),this.check()}},{key:"getRotationMatrix",value:function(t){return this._getRotationMatrix(t)}},{key:"getQuaternion",value:function(){var t=new h.a;switch(this[4]){case n.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case n.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case n.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case n.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case n.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case n.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(d)}}},{key:"_fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DefaultOrder,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],f=r[2],h=r[6],p=r[10];switch(e=e||this[3]){case n.XYZ:this[1]=Math.asin(Object(l.d)(a,-1,1)),Math.abs(a)<g?(this[0]=Math.atan2(-c,p),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(h,u),this[2]=0);break;case n.YXZ:this[0]=Math.asin(-Object(l.d)(c,-1,1)),Math.abs(c)<g?(this[1]=Math.atan2(a,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-f,i),this[2]=0);break;case n.ZXY:this[0]=Math.asin(Object(l.d)(h,-1,1)),Math.abs(h)<g?(this[1]=Math.atan2(-f,p),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case n.ZYX:this[1]=Math.asin(-Object(l.d)(f,-1,1)),Math.abs(f)<g?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case n.YZX:this[2]=Math.asin(Object(l.d)(s,-1,1)),Math.abs(s)<g?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-f,i)):(this[0]=0,this[1]=Math.atan2(a,p));break;case n.XZY:this[2]=Math.asin(-Object(l.d)(o,-1,1)),Math.abs(o)<g?(this[0]=Math.atan2(h,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,p),this[1]=0);break;default:throw new Error(d)}return this[3]=e,this}},{key:"_getRotationMatrix",value:function(t){var e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=this.x,i=this.y,o=this.z,a=Math.cos(r),s=Math.cos(i),u=Math.cos(o),c=Math.sin(r),l=Math.sin(i),f=Math.sin(o);switch(this[3]){case n.XYZ:var h=a*u,p=a*f,g=c*u,y=c*f;e[0]=s*u,e[4]=-s*f,e[8]=l,e[1]=p+g*l,e[5]=h-y*l,e[9]=-c*s,e[2]=y-h*l,e[6]=g+p*l,e[10]=a*s;break;case n.YXZ:var v=s*u,m=s*f,A=l*u,b=l*f;e[0]=v+b*c,e[4]=A*c-m,e[8]=a*l,e[1]=a*f,e[5]=a*u,e[9]=-c,e[2]=m*c-A,e[6]=b+v*c,e[10]=a*s;break;case n.ZXY:var _=s*u,w=s*f,x=l*u,E=l*f;e[0]=_-E*c,e[4]=-a*f,e[8]=x+w*c,e[1]=w+x*c,e[5]=a*u,e[9]=E-_*c,e[2]=-a*l,e[6]=c,e[10]=a*s;break;case n.ZYX:var O=a*u,S=a*f,T=c*u,P=c*f;e[0]=s*u,e[4]=T*l-S,e[8]=O*l+P,e[1]=s*f,e[5]=P*l+O,e[9]=S*l-T,e[2]=-l,e[6]=c*s,e[10]=a*s;break;case n.YZX:var M=a*s,C=a*l,I=c*s,R=c*l;e[0]=s*u,e[4]=R-M*f,e[8]=I*f+C,e[1]=f,e[5]=a*u,e[9]=-c*u,e[2]=-l*u,e[6]=C*f+I,e[10]=M-R*f;break;case n.XZY:var k=a*s,j=a*l,L=c*s,N=c*l;e[0]=s*u,e[4]=-f,e[8]=l*u,e[1]=k*f+N,e[5]=a*u,e[9]=j*f-L,e[2]=L*f-j,e[6]=c*u,e[10]=N*f+k;break;default:throw new Error(d)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"toQuaternion",value:function(){var t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),n=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch),a=t*n*i+e*r*o,s=t*r*i-e*n*o,u=t*n*o+e*r*i,c=e*n*i-t*r*o;return new h.a(s,u,c,a)}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(f.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(f.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(f.a)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){this[0]=Object(f.a)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){this[1]=Object(f.a)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){this[2]=Object(f.a)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){this[0]=Object(f.a)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){this[1]=Object(f.a)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){this[2]=Object(f.a)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){this[0]=Object(f.a)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){this[1]=Object(f.a)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){this[2]=Object(f.a)(t)}},{key:"order",get:function(){return this[3]},set:function(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(d);return t}(t)}}]),n}(c.a)},function(t,e,n){"use strict";var r=n(46);e.a=function(t){var e=[1/0,1/0,-1/0,-1/0];return Object(r.a)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},function(t,e,n){"use strict";var r=n(18),i=n(12),o=n(24),a=n(139),s=n(13),u=n(113),c=n(34);function l(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=Object(u.a)((function(t){var e=t.viewport,n=t.center;return new s.Matrix4(e.viewProjectionMatrix).invert().transform(n)})),p=Object(u.a)((function(t){var e,n=t.viewport,o=t.shadowMatrices,a=[],u=n.pixelUnprojectionMatrix,f=n.isGeospatial?void 0:1,h=[[0,0,f],[n.width,0,f],[0,n.height,f],[n.width,n.height,f],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map((function(t){return function(t,e){var n=Object(i.a)(t,3),r=n[0],o=n[1],a=n[2],s=Object(c.n)([r,o,a],e);if(Number.isFinite(a))return s;return[s[0],s[1],0]}(t,u)})),p=l(o);try{var d=function(){var t=e.value,i=t.clone().translate(new s.Vector3(n.center).negate()),o=h.map((function(t){return i.transform(t)})),u=(new s.Matrix4).ortho({left:Math.min.apply(Math,Object(r.a)(o.map((function(t){return t[0]})))),right:Math.max.apply(Math,Object(r.a)(o.map((function(t){return t[0]})))),bottom:Math.min.apply(Math,Object(r.a)(o.map((function(t){return t[1]})))),top:Math.max.apply(Math,Object(r.a)(o.map((function(t){return t[1]})))),near:Math.min.apply(Math,Object(r.a)(o.map((function(t){return-t[2]})))),far:Math.max.apply(Math,Object(r.a)(o.map((function(t){return-t[2]}))))});a.push(u.multiplyRight(t))};for(p.s();!(e=p.n()).done;)d()}catch(g){p.e(g)}finally{p.f()}return a})),d=[0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function y(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||d,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=h({viewport:t.viewport,center:e.project_uCenter}),i=[],a=p({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice(),u=0;u<t.shadowMatrices.length;u++){var c=a[u],l=c.clone().translate(new s.Vector3(t.viewport.center).negate());e.project_uCoordinateSystem===o.a.LNGLAT&&e.project_uProjectionMode===o.c.WEB_MERCATOR?(a[u]=l,i[u]=r):(a[u]=c.clone().multiplyRight(g),i[u]=l.transform(r))}for(var f=0;f<a.length;f++)n["shadow_uViewProjectionMatrices[".concat(f,"]")]=a[f],n["shadow_uProjectCenters[".concat(f,"]")]=i[f],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(f)]=t.shadowMaps[f]:n["shadow_uShadowMap".concat(f)]=t.dummyShadowMap;return n}e.a={name:"shadow",dependencies:[a.a],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){var n={},r=t.shadowEnabled,i=void 0===r||r;return i&&t.shadowMatrices&&t.shadowMatrices.length>0?Object.assign(n,y(t,e)):Object.assign(n,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),n}return{}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1),i=n(2),o=n(35),a=function(){function t(e){Object(r.a)(this,t),Object(o.a)(Number.isFinite(e.width),"`width` must be supplied"),Object(o.a)(Number.isFinite(e.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(e)}return Object(i.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),i=n(6),o=n(3),a=n(40),s=n(2),u=n(5),c=n(79),l=n(97),f=n(31),h="";function p(t,e){return Object(f.a)("string"===typeof t),t=h+t,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(t,".")))},i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(o){r(o)}}))}var d=function(t){function e(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(l.b)(t),(s instanceof Promise||"string"===typeof s)&&(s={data:s}),"string"===typeof s.data&&(s=Object.assign({},s,{data:p(s.data)})),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,Object.assign({},s,{target:3553})))).initialize(s),Object.seal(Object(a.a)(n)),n}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:"isSupported",value:function(t,e){return c.a.isSupported(t,e)}}]),e}(c.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(158);function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,n){return(o=i()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&Object(r.a)(o,n.prototype),o}).apply(null,arguments)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n(8),i=n(235),o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a="html",s="svg",u=function(t){var e,n,r,i={};if(t===a)r=document.createElement("div");else{if(t!==s)throw new Error('Invalid element type "'+t+'" for createPortalNode: must be "html" or "svg".');r=document.createElementNS("http://www.w3.org/2000/svg","g")}var o={element:r,elementType:t,setPortalProps:function(t){i=t},getInitialPortalProps:function(){return i},mount:function(r,i){if(i!==n){if(o.unmount(),r!==e&&!function(t,e){if(e===a)return t instanceof HTMLElement;if(e===s)return t instanceof SVGElement;throw new Error('Unrecognized element type "'+e+'" for validateElementType.')}(r,t))throw new Error('Invalid element type for portal: "'+t+'" portalNodes must be used with '+t+" elements, but OutPortal is within <"+r.tagName+">.");r.replaceChild(o.element,i),e=r,n=i}},unmount:function(t){t&&t!==n||e&&n&&(e.replaceChild(n,o.element),e=void 0,n=void 0)}};return o},c=function(t){function e(e){var n=t.call(this,e)||this;return n.addPropsChannel=function(){Object.assign(n.props.node,{setPortalProps:function(t){n.setState({nodeProps:t})}})},n.state={nodeProps:n.props.node.getInitialPortalProps()},n}return o(e,t),e.prototype.componentDidMount=function(){this.addPropsChannel()},e.prototype.componentDidUpdate=function(){this.addPropsChannel()},e.prototype.render=function(){var t=this,e=this.props,n=e.children,o=e.node;return i.createPortal(r.Children.map(n,(function(e){return r.isValidElement(e)?r.cloneElement(e,t.state.nodeProps):e})),o.element)},e}(r.PureComponent),l=function(t){function e(e){var n=t.call(this,e)||this;return n.placeholderNode=r.createRef(),n.passPropsThroughPortal(),n}return o(e,t),e.prototype.passPropsThroughPortal=function(){var t=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(t)},e.prototype.componentDidMount=function(){var t=this.props.node;this.currentPortalNode=t;var e=this.placeholderNode.current,n=e.parentNode;t.mount(n,e),this.passPropsThroughPortal()},e.prototype.componentDidUpdate=function(){var t=this.props.node;this.currentPortalNode&&t!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=t);var e=this.placeholderNode.current,n=e.parentNode;t.mount(n,e),this.passPropsThroughPortal()},e.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},e.prototype.render=function(){return r.createElement("div",{ref:this.placeholderNode})},e}(r.PureComponent),f=u.bind(null,a);u.bind(null,s)},function(t,e,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){"use strict";function t(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var n={},r={};function i(t,e){var i,o,s;return e?(s=0<=(t>>>=0)&&t<256)&&(o=r[t])?o:(i=a(t,(0|t)<0?-1:0,!0),s&&(r[t]=i),i):(s=-128<=(t|=0)&&t<128)&&(o=n[t])?o:(i=a(t,t<0?-1:0,!1),s&&(n[t]=i),i)}function o(t,e){if(isNaN(t)||!isFinite(t))return e?y:g;if(e){if(t<0)return y;if(t>=h)return _}else{if(t<=-p)return w;if(t+1>=p)return b}return t<0?o(-t,e).neg():a(t%f|0,t/f|0,e)}function a(e,n,r){return new t(e,n,r)}t.fromInt=i,t.fromNumber=o,t.fromBits=a;var s=Math.pow;function u(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"===typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(t.substring(1),e,n).neg();for(var i=o(s(n,8)),a=g,c=0;c<t.length;c+=8){var l=Math.min(8,t.length-c),f=parseInt(t.substring(c,c+l),n);if(l<8){var h=o(s(n,l));a=a.mul(h).add(o(f))}else a=(a=a.mul(i)).add(o(f))}return a.unsigned=e,a}function c(e){return e instanceof t?e:"number"===typeof e?o(e):"string"===typeof e?u(e):a(e.low,e.high,e.unsigned)}t.fromString=u,t.fromValue=c;var l=65536,f=l*l,h=f*f,p=h/2,d=i(1<<24),g=i(0);t.ZERO=g;var y=i(0,!0);t.UZERO=y;var v=i(1);t.ONE=v;var m=i(1,!0);t.UONE=m;var A=i(-1);t.NEG_ONE=A;var b=a(-1,2147483647,!1);t.MAX_VALUE=b;var _=a(-1,-1,!0);t.MAX_UNSIGNED_VALUE=_;var w=a(0,-2147483648,!1);t.MIN_VALUE=w;var x=t.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},x.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var e=o(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=o(s(t,6),this.unsigned),a=this,u="";;){var c=a.div(i),l=(a.sub(c.mul(i)).toInt()>>>0).toString(t);if((a=c).isZero())return l+u;for(;l.length<6;)l="0"+l;u=""+l+u}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},x.isZero=function(){return 0===this.high&&0===this.low},x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1===(1&this.low)},x.isEven=function(){return 0===(1&this.low)},x.equals=function(t){return e(t)||(t=c(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&this.high===t.high&&this.low===t.low},x.eq=x.equals,x.notEquals=function(t){return!this.eq(t)},x.neq=x.notEquals,x.lessThan=function(t){return this.comp(t)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(t){return this.comp(t)<=0},x.lte=x.lessThanOrEqual,x.greaterThan=function(t){return this.comp(t)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(t){return this.comp(t)>=0},x.gte=x.greaterThanOrEqual,x.compare=function(t){if(e(t)||(t=c(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(v)},x.neg=x.negate,x.add=function(t){e(t)||(t=c(t));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=t.high>>>16,u=65535&t.high,l=t.low>>>16,f=0,h=0,p=0,d=0;return p+=(d+=o+(65535&t.low))>>>16,h+=(p+=i+l)>>>16,f+=(h+=r+u)>>>16,f+=n+s,a((p&=65535)<<16|(d&=65535),(f&=65535)<<16|(h&=65535),this.unsigned)},x.subtract=function(t){return e(t)||(t=c(t)),this.add(t.neg())},x.sub=x.subtract,x.multiply=function(t){if(this.isZero())return g;if(e(t)||(t=c(t)),t.isZero())return g;if(this.eq(w))return t.isOdd()?w:g;if(t.eq(w))return this.isOdd()?w:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(d)&&t.lt(d))return o(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,u=t.high>>>16,l=65535&t.high,f=t.low>>>16,h=65535&t.low,p=0,y=0,v=0,m=0;return v+=(m+=s*h)>>>16,y+=(v+=i*h)>>>16,v&=65535,y+=(v+=s*f)>>>16,p+=(y+=r*h)>>>16,y&=65535,p+=(y+=i*f)>>>16,y&=65535,p+=(y+=s*l)>>>16,p+=n*h+r*f+i*l+s*u,a((v&=65535)<<16|(m&=65535),(p&=65535)<<16|(y&=65535),this.unsigned)},x.mul=x.multiply,x.divide=function(t){if(e(t)||(t=c(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:g;var n,r,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return m;i=y}else{if(this.eq(w))return t.eq(v)||t.eq(A)?w:t.eq(w)?v:(n=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?v:A:(r=this.sub(t.mul(n)),i=n.add(r.div(t)));if(t.eq(w))return this.unsigned?y:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=g}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:s(2,a-48),l=o(n),f=l.mul(t);f.isNegative()||f.gt(r);)f=(l=o(n-=u,this.unsigned)).mul(t);l.isZero()&&(l=v),i=i.add(l),r=r.sub(f)}return i},x.div=x.divide,x.modulo=function(t){return e(t)||(t=c(t)),this.sub(this.div(t).mul(t))},x.mod=x.modulo,x.not=function(){return a(~this.low,~this.high,this.unsigned)},x.and=function(t){return e(t)||(t=c(t)),a(this.low&t.low,this.high&t.high,this.unsigned)},x.or=function(t){return e(t)||(t=c(t)),a(this.low|t.low,this.high|t.high,this.unsigned)},x.xor=function(t){return e(t)||(t=c(t)),a(this.low^t.low,this.high^t.high,this.unsigned)},x.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?a(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):a(0,this.low<<t-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(t){return e(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?a(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):a(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0===(t&=63))return this;var n=this.high;return t<32?a(this.low>>>t|n<<32-t,n>>>t,this.unsigned):a(32===t?n:n>>>t-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},x.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},x.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p}));var r=n(73),i=n(24);function o(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=Math.PI/180,u=new Float32Array(16),c=new Float32Array(12);function l(t,e,n){var r=e[0]*s,i=e[1]*s,o=e[2]*s,a=Math.sin(o),u=Math.sin(r),c=Math.sin(i),l=Math.cos(o),f=Math.cos(r),h=Math.cos(i),p=n[0],d=n[1],g=n[2];t[0]=p*h*f,t[1]=p*c*f,t[2]=p*-u,t[3]=d*(-c*l+h*u*a),t[4]=d*(h*l+c*u*a),t[5]=d*f*a,t[6]=g*(c*a+h*u*l),t[7]=g*(-h*a+c*u*l),t[8]=g*f*l}function f(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var h={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(t,e){var n=e.startRow,i=e.endRow,a=this.props,s=a.data,h=a.getOrientation,p=a.getScale,d=a.getTranslation,g=a.getTransformMatrix,y=Array.isArray(g),v=y&&16===g.length,m=Array.isArray(p),A=Array.isArray(h),b=Array.isArray(d),_=v||!y&&Boolean(g(s[0]));t.constant=_?v:A&&m&&b;var w=t.value;if(t.constant){var x;if(_)u.set(g),x=f(u);else l(x=c,h,p),x.set(d,9);t.value=new Float32Array(x)}else{var E,O=n*t.size,S=Object(r.a)(s,n,i),T=S.iterable,P=S.objectInfo,M=o(T);try{for(M.s();!(E=M.n()).done;){var C=E.value;P.index++;var I=void 0;if(_)u.set(v?g:g(C,P)),I=f(u);else l(I=c,A?h:h(C,P),m?p:p(C,P)),I.set(b?d:d(C,P),9);w[O++]=I[0],w[O++]=I[1],w[O++]=I[2],w[O++]=I[3],w[O++]=I[4],w[O++]=I[5],w[O++]=I[6],w[O++]=I[7],w[O++]=I[8],w[O++]=I[9],w[O++]=I[10],w[O++]=I[11]}}catch(R){M.e(R)}finally{M.f()}}}};function p(t,e){return e===i.a.CARTESIAN||e===i.a.METER_OFFSETS||e===i.a.DEFAULT&&!t.isGeospatial}},function(t,e,n){"use strict";(function(t){var r,i=n(387),o=n(60),a=n(61),s=n(64),u=n(65),c=n(33),l=n(157),f=n(56),h=n(88),p=n(89),d=(n(299),"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{});function g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function y(t,e){return t(e={exports:{}},e.exports),e.exports}function v(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var m=y((function(t,e){(function(){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function i(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function o(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function a(t){return function(e){return t(e)}}function s(t,e){return t.has(e)}function u(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function c(t,e){return function(n){return t(e(n))}}function l(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function f(){}function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function p(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function g(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function y(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new g;++e<n;)this.add(t[e])}function v(t){this.size=(this.__data__=new p(t)).size}function m(t,e){var n=Bn(t),r=!n&&Fn(t),i=!n&&!r&&zn(t),o=!n&&!r&&!i&&Vn(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!Ye.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||W(c,u))||s.push(c);return s}function A(t,e,n){var r=t[e];Ye.call(t,e)&&it(r,n)&&(n!==Ot||e in t)||_(t,e,n)}function b(t,e){for(var n=t.length;n--;)if(it(t[n][0],e))return n;return-1}function _(t,e,n){"__proto__"==e&&un?un(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function w(t,e,n,i,o,a){var s,u=e&Ct,c=e&It,l=e&Rt;if(n&&(s=o?n(t,i,o,a):n(t)),s!==Ot)return s;if(!ut(t))return t;var f=Bn(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ye.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t,s)}else{var h=jn(t),p=h==Xt||h==Yt;if(zn(t))return function(t,e){if(e)return t.slice();var n=t.length,r=en?en(n):new t.constructor(n);return t.copy(r),r}(t,u);if(h==Jt||h==Ut||p&&!o){if(s=c||p?{}:function(t){return"function"!=typeof t.constructor||Q(t)?{}:Pn(nn(t))}(t),!u)return c?function(t,e){return F(t,kn(t),e)}(t,function(t,e){return t&&F(e,mt(e),t)}(s,t)):function(t,e){return F(t,Rn(t),e)}(t,function(t,e){return t&&F(e,vt(e),t)}(s,t))}else{if(!Ce[h])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case se:return D(t);case qt:case Ht:return new r(+t);case ue:return function(t,e){return new t.constructor(e?D(t.buffer):t.buffer,t.byteOffset,t.byteLength)}(t,n);case ce:case le:case fe:case he:case pe:case de:case ge:case ye:case ve:return function(t,e){return new t.constructor(e?D(t.buffer):t.buffer,t.byteOffset,t.length)}(t,n);case Qt:return new r;case Zt:case re:return new r(t);case ee:return function(t){var e=new t.constructor(t.source,xe.exec(t));return e.lastIndex=t.lastIndex,e}(t);case ne:return new r;case ie:return function(t){return Sn?Object(Sn.call(t)):{}}(t)}}(t,h,u)}}a||(a=new v);var d=a.get(t);if(d)return d;if(a.set(t,s),Gn(t))return t.forEach((function(r){s.add(w(r,e,n,r,t,a))})),s;if(Un(t))return t.forEach((function(r,i){s.set(i,w(r,e,n,i,t,a))})),s;var g=f?Ot:(l?c?G:U:c?mt:vt)(t);return r(g||t,(function(r,i){g&&(r=t[i=r]),A(s,i,w(r,e,n,i,t,a))})),s}function x(t,e){return t&&Cn(t,e,vt)}function E(t,e){for(var n=0,r=(e=N(e,t)).length;null!=t&&n<r;)t=t[$(e[n++])];return n&&n==r?t:Ot}function O(t,e,n){var r=e(t);return Bn(t)?r:i(r,n(t))}function S(t){return null==t?t===Ot?oe:Kt:sn&&sn in Object(t)?function(t){var e=Ye.call(t,sn),n=t[sn];try{t[sn]=Ot;var r=!0}catch(t){}var i=Ze.call(t);return r&&(e?t[sn]=n:delete t[sn]),i}(t):function(t){return Ze.call(t)}(t)}function T(t,e){return null!=t&&e in Object(t)}function P(t){return ct(t)&&S(t)==Ut}function M(t,e,n,r,i){return t===e||(null==t||null==e||!ct(t)&&!ct(e)?t!==t&&e!==e:function(t,e,n,r,i,o){var a=Bn(t),s=Bn(e),u=a?Gt:jn(t),c=s?Gt:jn(e),l=(u=u==Ut?Jt:u)==Jt,f=(c=c==Ut?Jt:c)==Jt,h=u==c;if(h&&zn(t)){if(!zn(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new v),a||Vn(t)?B(t,e,n,r,i,o):z(t,e,u,n,r,i,o);if(!(n&kt)){var p=l&&Ye.call(t,"__wrapped__"),d=f&&Ye.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,y=d?e.value():e;return o||(o=new v),i(g,y,n,r,o)}}return!!h&&(o||(o=new v),function(t,e,n,r,i,o){var a=n&kt,s=U(t),u=s.length;if(u!=U(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:Ye.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var h=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<u;){var d=t[l=s[c]],g=e[l];if(r)var y=a?r(g,d,l,e,t,o):r(d,g,l,t,e,o);if(!(y===Ot?d===g||i(d,g,n,r,o):y)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var v=t.constructor,m=e.constructor;v!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(h=!1)}return o.delete(t),o.delete(e),h}(t,e,n,r,i,o))}(t,e,n,r,M,i))}function C(t){return!(!ut(t)||function(t){return!!Qe&&Qe in t}(t))&&(at(t)?Ke:Se).test(tt(t))}function I(t){return"function"==typeof t?t:null==t?bt:"object"==typeof t?Bn(t)?k(t[0],t[1]):function(t){var e=function(t){for(var e=vt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Z(i)]}return e}(t);return 1==e.length&&e[0][2]?K(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(c===Ot&&!(u in t))return!1}else{var f=new v;if(r)var h=r(c,l,u,t,e,f);if(!(h===Ot?M(l,c,kt|jt,r,f):h))return!1}}return!0}(n,t,e)}}(t):wt(t)}function R(t){if(!ut(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Q(t),n=[];for(var r in t)("constructor"!=r||!e&&Ye.call(t,r))&&n.push(r);return n}function k(t,e){return Y(t)&&Z(e)?K($(t),e):function(n){var r=gt(n,t);return r===Ot&&r===e?yt(n,t):M(e,r,kt|jt)}}function j(t,e){return Ln(J(t,e,bt),t+"")}function L(t){if("string"==typeof t)return t;if(Bn(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,L)+"";if(lt(t))return Tn?Tn.call(t):"";var e=t+"";return"0"==e&&1/t==-Dt?"-0":e}function N(t,e){return Bn(t)?t:Y(t,e)?[t]:Nn(dt(t))}function D(t){var e=new t.constructor(t.byteLength);return new tn(e).set(new tn(t)),e}function F(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):Ot;u===Ot&&(u=t[s]),i?_(n,s,u):A(n,s,u)}return n}function B(t,e,n,r,i,a){var u=n&kt,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var f=a.get(t);if(f&&a.get(e))return f==e;var h=-1,p=!0,d=n&jt?new y:Ot;for(a.set(t,e),a.set(e,t);++h<c;){var g=t[h],v=e[h];if(r)var m=u?r(v,g,h,e,t,a):r(g,v,h,t,e,a);if(m!==Ot){if(m)continue;p=!1;break}if(d){if(!o(e,(function(t,e){if(!s(d,e)&&(g===t||i(g,t,n,r,a)))return d.push(e)}))){p=!1;break}}else if(g!==v&&!i(g,v,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function z(t,e,n,r,i,o,a){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case se:return!(t.byteLength!=e.byteLength||!o(new tn(t),new tn(e)));case qt:case Ht:case Zt:return it(+t,+e);case Wt:return t.name==e.name&&t.message==e.message;case ee:case re:return t==e+"";case Qt:var s=u;case ne:var c=r&kt;if(s||(s=l),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;r|=jt,a.set(t,e);var h=B(s(t),s(e),r,i,o,a);return a.delete(t),h;case ie:if(Sn)return Sn.call(t)==Sn.call(e)}return!1}function U(t){return O(t,vt,Rn)}function G(t){return O(t,mt,kn)}function V(){var t=f.iteratee||_t;return t=t===_t?I:t,arguments.length?t(arguments[0],arguments[1]):t}function q(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function H(t,e){var n=function(t,e){return null==t?Ot:t[e]}(t,e);return C(n)?n:Ot}function W(t,e){var n=typeof t;return!!(e=null==e?Ft:e)&&("number"==n||"symbol"!=n&&Pe.test(t))&&t>-1&&t%1==0&&t<e}function X(t,e,n){if(!ut(n))return!1;var r=typeof e;return!!("number"==r?ot(n)&&W(e,n.length):"string"==r&&e in n)&&it(n[e],t)}function Y(t,e){if(Bn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!lt(t))||Ae.test(t)||!me.test(t)||null!=e&&t in Object(e)}function Q(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||He)}function Z(t){return t===t&&!ut(t)}function K(t,e){return function(n){return null!=n&&n[t]===e&&(e!==Ot||t in Object(n))}}function J(t,e,r){return e=hn(e===Ot?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=hn(i.length-e,0),s=Array(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=i[o];return u[e]=r(s),n(t,this,u)}}function $(t){if("string"==typeof t||lt(t))return t;var e=t+"";return"0"==e&&1/t==-Dt?"-0":e}function tt(t){if(null!=t){try{return Xe.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function et(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ht(n);return i<0&&(i=hn(r+i,0)),function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,V(e,3),i)}function nt(t,e){return(Bn(t)?r:Mn)(t,V(e,3))}function rt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Tt);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(rt.Cache||g),n}function it(t,e){return t===e||t!==t&&e!==e}function ot(t){return null!=t&&st(t.length)&&!at(t)}function at(t){if(!ut(t))return!1;var e=S(t);return e==Xt||e==Yt||e==Vt||e==te}function st(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ft}function ut(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ct(t){return null!=t&&"object"==typeof t}function lt(t){return"symbol"==typeof t||ct(t)&&S(t)==ie}function ft(t){return t?(t=pt(t))===Dt||t===-Dt?(t<0?-1:1)*Bt:t===t?t:0:0===t?t:0}function ht(t){var e=ft(t),n=e%1;return e===e?n?e-n:e:0}function pt(t){if("number"==typeof t)return t;if(lt(t))return zt;if(ut(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ut(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_e,"");var n=Oe.test(t);return n||Te.test(t)?Ie(t.slice(2),n?2:8):Ee.test(t)?zt:+t}function dt(t){return null==t?"":L(t)}function gt(t,e,n){var r=null==t?Ot:E(t,e);return r===Ot?n:r}function yt(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=N(e,t)).length,o=!1;++r<i;){var a=$(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&st(i)&&W(a,i)&&(Bn(t)||Fn(t))}(t,e,T)}function vt(t){return ot(t)?m(t):function(t){if(!Q(t))return fn(t);var e=[];for(var n in Object(t))Ye.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}function mt(t){return ot(t)?m(t,!0):R(t)}function At(t){return function(){return t}}function bt(t){return t}function _t(t){return I("function"==typeof t?t:w(t,Ct))}function wt(t){return Y(t)?function(t){return function(e){return null==e?Ot:e[t]}}($(t)):function(t){return function(e){return E(e,t)}}(t)}function xt(){return[]}function Et(){return!1}var Ot,St=200,Tt="Expected a function",Pt="__lodash_hash_undefined__",Mt=500,Ct=1,It=2,Rt=4,kt=1,jt=2,Lt=800,Nt=16,Dt=1/0,Ft=9007199254740991,Bt=17976931348623157e292,zt=NaN,Ut="[object Arguments]",Gt="[object Array]",Vt="[object AsyncFunction]",qt="[object Boolean]",Ht="[object Date]",Wt="[object Error]",Xt="[object Function]",Yt="[object GeneratorFunction]",Qt="[object Map]",Zt="[object Number]",Kt="[object Null]",Jt="[object Object]",$t="[object Promise]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",le="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",pe="[object Int32Array]",de="[object Uint8Array]",ge="[object Uint8ClampedArray]",ye="[object Uint16Array]",ve="[object Uint32Array]",me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_e=/^\s+|\s+$/g,we=/\\(\\)?/g,xe=/\w*$/,Ee=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Me={};Me[ce]=Me[le]=Me[fe]=Me[he]=Me[pe]=Me[de]=Me[ge]=Me[ye]=Me[ve]=!0,Me[Ut]=Me[Gt]=Me[se]=Me[qt]=Me[ue]=Me[Ht]=Me[Wt]=Me[Xt]=Me[Qt]=Me[Zt]=Me[Jt]=Me[ee]=Me[ne]=Me[re]=Me[ae]=!1;var Ce={};Ce[Ut]=Ce[Gt]=Ce[se]=Ce[ue]=Ce[qt]=Ce[Ht]=Ce[ce]=Ce[le]=Ce[fe]=Ce[he]=Ce[pe]=Ce[Qt]=Ce[Zt]=Ce[Jt]=Ce[ee]=Ce[ne]=Ce[re]=Ce[ie]=Ce[de]=Ce[ge]=Ce[ye]=Ce[ve]=!0,Ce[Wt]=Ce[Xt]=Ce[ae]=!1;var Ie=parseInt,Re="object"==typeof d&&d&&d.Object===Object&&d,ke="object"==typeof self&&self&&self.Object===Object&&self,je=Re||ke||Function("return this")(),Le=e&&!e.nodeType&&e,Ne=Le&&t&&!t.nodeType&&t,De=Ne&&Ne.exports===Le,Fe=De&&Re.process,Be=function(){try{return Fe&&Fe.binding&&Fe.binding("util")}catch(n){}}(),ze=Be&&Be.isMap,Ue=Be&&Be.isSet,Ge=Be&&Be.isTypedArray,Ve=Array.prototype,qe=Function.prototype,He=Object.prototype,We=je["__core-js_shared__"],Xe=qe.toString,Ye=He.hasOwnProperty,Qe=function(){var t=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ze=He.toString,Ke=RegExp("^"+Xe.call(Ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=De?je.Buffer:Ot,$e=je.Symbol,tn=je.Uint8Array,en=Je?Je.allocUnsafe:Ot,nn=c(Object.getPrototypeOf,Object),rn=Object.create,on=He.propertyIsEnumerable,an=Ve.splice,sn=$e?$e.toStringTag:Ot,un=function(){try{var t=H(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),cn=Object.getOwnPropertySymbols,ln=Je?Je.isBuffer:Ot,fn=c(Object.keys,Object),hn=Math.max,pn=Date.now,dn=H(je,"DataView"),gn=H(je,"Map"),yn=H(je,"Promise"),vn=H(je,"Set"),mn=H(je,"WeakMap"),An=H(Object,"create"),bn=tt(dn),_n=tt(gn),wn=tt(yn),xn=tt(vn),En=tt(mn),On=$e?$e.prototype:Ot,Sn=On?On.valueOf:Ot,Tn=On?On.toString:Ot,Pn=function(){function t(){}return function(e){if(!ut(e))return{};if(rn)return rn(e);t.prototype=e;var n=new t;return t.prototype=Ot,n}}();h.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},h.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},h.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===Pt?Ot:n}return Ye.call(e,t)?e[t]:Ot},h.prototype.has=function(t){var e=this.__data__;return An?e[t]!==Ot:Ye.call(e,t)},h.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===Ot?Pt:e,this},p.prototype.clear=function(){this.__data__=[],this.size=0},p.prototype.delete=function(t){var e=this.__data__,n=b(e,t);return!(n<0)&&(n==e.length-1?e.pop():an.call(e,n,1),--this.size,!0)},p.prototype.get=function(t){var e=this.__data__,n=b(e,t);return n<0?Ot:e[n][1]},p.prototype.has=function(t){return b(this.__data__,t)>-1},p.prototype.set=function(t,e){var n=this.__data__,r=b(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},g.prototype.clear=function(){this.size=0,this.__data__={hash:new h,map:new(gn||p),string:new h}},g.prototype.delete=function(t){var e=q(this,t).delete(t);return this.size-=e?1:0,e},g.prototype.get=function(t){return q(this,t).get(t)},g.prototype.has=function(t){return q(this,t).has(t)},g.prototype.set=function(t,e){var n=q(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},y.prototype.add=y.prototype.push=function(t){return this.__data__.set(t,Pt),this},y.prototype.has=function(t){return this.__data__.has(t)},v.prototype.clear=function(){this.__data__=new p,this.size=0},v.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},v.prototype.get=function(t){return this.__data__.get(t)},v.prototype.has=function(t){return this.__data__.has(t)},v.prototype.set=function(t,e){var n=this.__data__;if(n instanceof p){var r=n.__data__;if(!gn||r.length<St-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new g(r)}return n.set(t,e),this.size=n.size,this};var Mn=function(t,e){return function(n,r){if(null==n)return n;if(!ot(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(x),Cn=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}(),In=un?function(t,e){return un(t,"toString",{configurable:!0,enumerable:!1,value:At(e),writable:!0})}:bt,Rn=cn?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(cn(t),(function(e){return on.call(t,e)})))}:xt,kn=cn?function(t){for(var e=[];t;)i(e,Rn(t)),t=nn(t);return e}:xt,jn=S;(dn&&jn(new dn(new ArrayBuffer(1)))!=ue||gn&&jn(new gn)!=Qt||yn&&jn(yn.resolve())!=$t||vn&&jn(new vn)!=ne||mn&&jn(new mn)!=ae)&&(jn=function(t){var e=S(t),n=e==Jt?t.constructor:Ot,r=n?tt(n):"";if(r)switch(r){case bn:return ue;case _n:return Qt;case wn:return $t;case xn:return ne;case En:return ae}return e});var Ln=function(t){var e=0,n=0;return function(){var r=pn(),i=Nt-(r-n);if(n=r,i>0){if(++e>=Lt)return arguments[0]}else e=0;return t.apply(Ot,arguments)}}(In),Nn=function(t){var e=rt(t,(function(t){return n.size===Mt&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(be,(function(t,n,r,i){e.push(r?i.replace(we,"$1"):n||t)})),e})),Dn=function(t){return function(e,n,r){var i=Object(e);if(!ot(e)){var o=V(n,3);e=vt(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:Ot}}(et);rt.Cache=g;var Fn=P(function(){return arguments}())?P:function(t){return ct(t)&&Ye.call(t,"callee")&&!on.call(t,"callee")},Bn=Array.isArray,zn=ln||Et,Un=ze?a(ze):function(t){return ct(t)&&jn(t)==Qt},Gn=Ue?a(Ue):function(t){return ct(t)&&jn(t)==ne},Vn=Ge?a(Ge):function(t){return ct(t)&&st(t.length)&&!!Me[S(t)]},qn=function(t){return j((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:Ot,a=i>2?n[2]:Ot;for(o=t.length>3&&"function"==typeof o?(i--,o):Ot,a&&X(n[0],n[1],a)&&(o=i<3?Ot:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}((function(t,e){if(Q(e)||ot(e))return F(e,vt(e),t),Ot;for(var n in e)Ye.call(e,n)&&A(t,n,e[n])})),Hn=j((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:Ot;for(i&&X(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=mt(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===Ot||it(l,He[c])&&!Ye.call(t,c))&&(t[c]=o[c])}return t}));f.assign=qn,f.constant=At,f.defaults=Hn,f.iteratee=_t,f.keys=vt,f.keysIn=mt,f.matchesProperty=function(t,e){return k(t,w(e,Ct))},f.memoize=rt,f.property=wt,f.clone=function(t){return w(t,Rt)},f.eq=it,f.find=Dn,f.findIndex=et,f.forEach=nt,f.forOwn=function(t,e){return t&&x(t,V(e,3))},f.get=gt,f.hasIn=yt,f.identity=bt,f.isArguments=Fn,f.isArray=Bn,f.isArrayLike=ot,f.isBuffer=zn,f.isEqual=function(t,e){return M(t,e)},f.isFunction=at,f.isLength=st,f.isMap=Un,f.isObject=ut,f.isObjectLike=ct,f.isSet=Gn,f.isSymbol=lt,f.isTypedArray=Vn,f.stubArray=xt,f.stubFalse=Et,f.toFinite=ft,f.toInteger=ht,f.toNumber=pt,f.toString=dt,f.each=nt,f.VERSION="4.17.5",Ne?((Ne.exports=f)._=f,Le._=f):je._=f}).call(d)})),A=new(g(y((function(t,e){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(!s&&v)return v();if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var o=v,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r={},i=Object.create,o=Object.defineProperties,a=Object.defineProperty,s=function(t){var e=void 0===arguments[1]?{}:arguments[1];return{value:t,configurable:!!e.c,writable:!!e.w,enumerable:!!e.e}},u=void 0;try{var c=a({},"y",{get:function(){return 1}});u=1===c.y}catch(t){u=!1}var l={},f=function(t){t=String(t);for(var e="",n=0;l[t+e];)e=n+=1;l[t+e]=1;var r="Symbol("+t+e+")";return u&&a(Object.prototype,r,{get:void 0,set:function(t){a(this,r,s(t,{c:!0,w:!0}))},configurable:!0,enumerable:!1}),r},h=i(null);function p(t){if(this instanceof p)throw new TypeError("Symbol is not a constructor");t=void 0===t?"":String(t);var e=f(t);return u?i(h,{__description__:s(t),__tag__:s(e)}):e}o(p,{for:s((function(t){var e=String(t);if(r[e])return r[e];var n=p(e);return r[e]=n,n})),keyFor:s((function(t){if(u&&(!(e=t)||"Symbol"!==e[p.toStringTag]))throw new TypeError(t+" is not a symbol");var e;for(var n in r)if(r[n]===t)return u?r[n].__description__:r[n].substr(7,r[n].length-8)}))}),o(p,{hasInstance:s(p("hasInstance")),isConcatSpreadable:s(p("isConcatSpreadable")),iterator:s(p("iterator")),match:s(p("match")),replace:s(p("replace")),search:s(p("search")),species:s(p("species")),split:s(p("split")),toPrimitive:s(p("toPrimitive")),toStringTag:s(p("toStringTag")),unscopables:s(p("unscopables"))}),o(h,{constructor:s(p),toString:s((function(){return this.__tag__})),valueOf:s((function(){return"Symbol("+this.__description__+")"}))}),u&&a(h,p.toStringTag,s("Symbol",{c:!0})),e.exports="function"==typeof Symbol?Symbol:p},{}],2:[function(t,e,n){function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}i.prototype._events=void 0,i.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);e<n;e++)r[e]=this._events[t][e].fn;return r},i.prototype.emit=function(t,e,n,r,i,o){if(!this._events||!this._events[t])return!1;var a,s,u=this._events[t],c=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,i),!0;case 6:return u.fn.call(u.context,e,n,r,i,o),!0}for(s=1,a=new Array(c-1);s<c;s++)a[s-1]=arguments[s];u.fn.apply(u.context,a)}else{var l,f=u.length;for(s=0;s<f;s++)switch(u[s].once&&this.removeListener(t,u[s].fn,!0),c){case 1:u[s].fn.call(u[s].context);break;case 2:u[s].fn.call(u[s].context,e);break;case 3:u[s].fn.call(u[s].context,e,n);break;default:if(!a)for(l=1,a=new Array(c-1);l<c;l++)a[l-1]=arguments[l];u[s].fn.apply(u[s].context,a)}}return!0},i.prototype.on=function(t,e,n){var i=new r(e,n||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},i.prototype.once=function(t,e,n){var i=new r(e,n||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},i.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],i=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&i.push(r),!r.fn))for(var o=0,a=r.length;o<a;o++)(r[o].fn!==e||n&&!r[o].once)&&i.push(r[o]);return i.length?this._events[t]=1===i.length?i[0]:i:delete this._events[t],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.EventEmitter=i,i.EventEmitter2=i,i.EventEmitter3=i,e.exports=i},{}],3:[function(t,e,n){e.exports.Dispatcher=t("./lib/Dispatcher")},{"./lib/Dispatcher":4}],4:[function(t,e,n){var r=t("./invariant"),i=1;function o(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}o.prototype.register=function(t){var e="ID_"+i++;return this.$Dispatcher_callbacks[e]=t,e},o.prototype.unregister=function(t){r(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},o.prototype.waitFor=function(t){r(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?r(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(r(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},o.prototype.dispatch=function(t){r(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},o.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},o.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},o.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},o.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},e.exports=o},{"./invariant":5}],5:[function(t,e,n){e.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;u=new Error("Invariant Violation: "+e.replace(/%s/g,(function(){return c[l++]})))}throw u.framesToPop=1,u}}},{}],6:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}n.default=function(t,e,n,r,i){var o=u.uid(t[s.ACTIONS_REGISTRY],e+"."+n);t[s.ACTIONS_REGISTRY][o]=1;var l=a.default.for("alt/"+o),f={namespace:e,name:n,id:o,symbol:l},h=new c(t,l,r,i,f),p=h[s.ACTION_HANDLER];p.defer=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];setTimeout((function(){h[s.ACTION_HANDLER].apply(null,e)}))},p[s.ACTION_KEY]=l,p.data=f;var d=t.actions[e];return d[u.uid(d,n)]=p,p};var o,a=(o=t("es-symbol"))&&o.__esModule?o:{default:o},s=i(t("../symbols/symbols")),u=i(t("../utils/AltUtils")),c=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this[s.ACTION_UID]=n,this[s.ACTION_HANDLER]=r.bind(this),this.actions=i,this.actionDetails=o,this.alt=e}return r(t,[{key:"dispatch",value:function(t){this.alt.dispatch(this[s.ACTION_UID],t,this.actionDetails)}}]),t}();e.exports=n.default},{"../symbols/symbols":10,"../utils/AltUtils":11,"es-symbol":1}],7:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}var a=o(t("eventemitter3")),s=o(t("es-symbol")),u=i(t("../symbols/symbols")),c=i(t("../../utils/functions")),l=(0,s.default)(),f=function(){function t(e,n,r,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this[l]=new a.default,this[u.LIFECYCLE]=n[u.LIFECYCLE],this[u.STATE_CONTAINER]=r||n,this._storeName=n._storeName,this.boundListeners=n[u.ALL_LISTENERS],this.StoreModel=i,c.assign(this,n[u.PUBLIC_METHODS]),this.dispatchToken=e.dispatcher.register((function(t){if(o[u.LIFECYCLE].emit("beforeEach",t,o[u.STATE_CONTAINER]),n[u.LISTENERS][t.action]){var e=!1;try{e=n[u.LISTENERS][t.action](t.data)}catch(e){if(!n[u.HANDLING_ERRORS])throw e;o[u.LIFECYCLE].emit("error",e,t,o[u.STATE_CONTAINER])}!1!==e&&o.emitChange()}o[u.LIFECYCLE].emit("afterEach",t,o[u.STATE_CONTAINER])})),this[u.LIFECYCLE].emit("init")}return r(t,[{key:"getEventEmitter",value:function(){return this[l]}},{key:"emitChange",value:function(){this[l].emit("change",this[u.STATE_CONTAINER])}},{key:"listen",value:function(t){var e=this;return this[l].on("change",t),function(){return e.unlisten(t)}}},{key:"unlisten",value:function(t){this[u.LIFECYCLE].emit("unlisten"),this[l].removeListener("change",t)}},{key:"getState",value:function(){return this.StoreModel.config.getState.call(this,this[u.STATE_CONTAINER])}}]),t}();n.default=f,e.exports=n.default},{"../../utils/functions":13,"../symbols/symbols":10,"es-symbol":1,eventemitter3:2}],8:[function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0});var i,o=(i=t("es-symbol"))&&i.__esModule?i:{default:i},a=r(t("../symbols/symbols")),s=r(t("../../utils/functions")),u={waitFor:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)throw new ReferenceError("Dispatch tokens not provided");var r=e;1===e.length&&(r=Array.isArray(e[0])?e[0]:e);var i=r.map((function(t){return t.dispatchToken||t}));this.dispatcher.waitFor(i)},exportAsync:function(t){this.registerAsync(t)},registerAsync:function(t){var e=this,n=0,r=s.isFunction(t)?t(this.alt):t,i=Object.keys(r).reduce((function(t,i){var o=r[i],u=s.isFunction(o)?o(e):o;return["success","error","loading"].forEach((function(t){if(u[t]&&!u[t][a.ACTION_KEY])throw new Error(t+" handler must be an action function")})),t[i]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=e.getInstance().getState(),a=u.local&&u.local.apply(u,[o].concat(r)),s=u.shouldFetch?u.shouldFetch.apply(u,[o].concat(r)):!a,c=u.interceptResponse||function(t){return t};s?(n+=1,u.loading&&u.loading(c(null,u.loading)),u.remote.apply(u,[o].concat(r)).then((function(t){n-=1,u.success(c(t,u.success))})).catch((function(t){n-=1,u.error(c(t,u.error))}))):e.emitChange()},t}),{});this.exportPublicMethods(i),this.exportPublicMethods({isLoading:function(){return n>0}})},exportPublicMethods:function(t){var e=this;s.eachObject((function(t,n){if(!s.isFunction(n))throw new TypeError("exportPublicMethods expects a function");e[a.PUBLIC_METHODS][t]=n}),[t])},emitChange:function(){this.getInstance().emitChange()},on:function(t,e){"error"===t&&(this[a.HANDLING_ERRORS]=!0),this[a.LIFECYCLE].on(t,e.bind(this))},bindAction:function(t,e){if(!t)throw new ReferenceError("Invalid action reference passed in");if(!s.isFunction(e))throw new TypeError("bindAction expects a function");if(e.length>1)throw new TypeError("Action handler in store "+this._storeName+" for "+(t[a.ACTION_KEY]||t).toString()+" was defined with two parameters. Only a single parameter is passed through the dispatcher, did you mean to pass in an Object instead?");var n=t[a.ACTION_KEY]?t[a.ACTION_KEY]:t;this[a.LISTENERS][n]=e.bind(this),this[a.ALL_LISTENERS].push(o.default.keyFor(n))},bindActions:function(t){var e=this;s.eachObject((function(t,n){var r=t.replace(/./,(function(t){return"on"+t[0].toUpperCase()})),i=null;if(e[t]&&e[r])throw new ReferenceError("You have multiple action handlers bound to an action: "+t+" and "+r);e[t]?i=e[t]:e[r]&&(i=e[r]),i&&e.bindAction(n,i)}),[t])},bindListeners:function(t){var e=this;s.eachObject((function(t,n){var r=e[t];if(!r)throw new ReferenceError(t+" defined but does not exist in "+e._storeName);Array.isArray(n)?n.forEach((function(t){e.bindAction(t,r)})):e.bindAction(n,r)}),[t])}};n.default=u,e.exports=n.default},{"../../utils/functions":13,"../symbols/symbols":10,"es-symbol":1}],9:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=Function.prototype.bind,i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;c=u=void 0,r=!1;var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0}};function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}n.createStoreConfig=function(t,e){e.config=l.assign({getState:function(t){return l.assign({},t)},setState:l.assign},t,e.config)},n.transformStore=function(t,e){return t.reduce((function(t,e){return e(t)}),e)},n.createStoreFromObject=function(t,e,n){var r=void 0,i=d({},t,n,l.assign({getInstance:function(){return r},setState:function(t){p(this,r,t)}},e));return i.bindListeners&&h.default.bindListeners.call(i,i.bindListeners),i.lifecycle&&l.eachObject((function(t,e){h.default.on.call(i,t,e)}),[i.lifecycle]),r=l.assign(new f.default(t,i,i.state,e),i.publicMethods,{displayName:n})},n.createStoreFromClass=function(t,e,n){for(var o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var u=void 0,h=e.config,g=function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),e}(e);d(g.prototype,t,n,{getInstance:function(){return u},setState:function(t){p(this,u,t)}});var y=new(r.apply(g,[null].concat(a)));return h.bindListeners&&y.bindListeners(h.bindListeners),h.datasource&&y.exportAsync(h.datasource),u=l.assign(new f.default(t,y,y[t.config.stateKey]||y[h.stateKey]||null,e),c.getInternalMethods(e),h.publicMethods,{displayName:n})};var s=a(t("eventemitter3")),u=o(t("../symbols/symbols")),c=o(t("../utils/AltUtils")),l=o(t("../../utils/functions")),f=a(t("./AltStore")),h=a(t("./StoreMixin"));function p(t,e,n){if(n){var r=e.StoreModel.config,i=l.isFunction(n)?n(e[u.STATE_CONTAINER]):n;e[u.STATE_CONTAINER]=r.setState.call(t,e[u.STATE_CONTAINER],i),t.alt.dispatcher.isDispatching()||t.emitChange()}}function d(t,e,n,r){return t[u.ALL_LISTENERS]=[],t[u.LIFECYCLE]=new s.default,t[u.LISTENERS]={},t[u.PUBLIC_METHODS]={},l.assign(t,h.default,{_storeName:n,alt:e,dispatcher:e.dispatcher},r)}},{"../../utils/functions":13,"../symbols/symbols":10,"../utils/AltUtils":11,"./AltStore":7,"./StoreMixin":8,eventemitter3:2}],10:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=t("es-symbol"))&&r.__esModule?r:{default:r},o=(0,i.default)();n.ACTION_HANDLER=o;var a=(0,i.default)();n.ACTION_KEY=a;var s=(0,i.default)();n.ACTIONS_REGISTRY=s;var u=(0,i.default)();n.ACTION_UID=u;var c=(0,i.default)();n.ALL_LISTENERS=c;var l=(0,i.default)();n.HANDLING_ERRORS=l;var f=(0,i.default)();n.INIT_SNAPSHOT=f;var h=(0,i.default)();n.LAST_SNAPSHOT=h;var p=(0,i.default)();n.LIFECYCLE=p;var d=(0,i.default)();n.LISTENERS=d;var g=(0,i.default)();n.PUBLIC_METHODS=g;var y=(0,i.default)();n.STATE_CONTAINER=y},{"es-symbol":1}],11:[function(t,e,n){function r(){}Object.defineProperty(n,"__esModule",{value:!0}),n.getInternalMethods=function(t,e){var n=e?o:i,r=e?t.prototype:t;return Object.getOwnPropertyNames(r).reduce((function(t,e){return-1!==n.indexOf(e)||(t[e]=r[e]),t}),{})},n.warn=function(t){"undefined"!=typeof console&&console.warn(new ReferenceError(t))},n.uid=function(t,e){for(var n=0,r=e;Object.hasOwnProperty.call(t,r);)r=e+String(++n);return r},n.formatAsConstant=function(t){return t.replace(/[a-z]([A-Z])/g,(function(t){return t[0]+"_"+t[1].toLowerCase()})).toUpperCase()},n.dispatchIdentity=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.dispatch(n.length?[t].concat(n):t)};var i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(r.prototype)},{}],12:[function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.setAppState=function(t,e,n){var r=t.deserialize(e);o.eachObject((function(e,a){var s,u,c=t.stores[e];c&&(s=c.StoreModel.config,u=c[i.STATE_CONTAINER],s.onDeserialize&&(r[e]=s.onDeserialize(a)||a),o.eachObject((function(t){return delete u[t]}),[u]),o.assign(u,r[e]),n(c))}),[r])},n.snapshot=function(t){var e=void 0===arguments[1]?[]:arguments[1];return(e.length?e:Object.keys(t.stores)).reduce((function(e,n){var r=n.displayName||n,o=t.stores[r],a=o.StoreModel.config;o[i.LIFECYCLE].emit("snapshot");var s=a.onSerialize&&a.onSerialize(o[i.STATE_CONTAINER]);return e[r]=s||o.getState(),e}),{})},n.saveInitialSnapshot=function(t,e){var n=t.deserialize(t.serialize(t.stores[e][i.STATE_CONTAINER]));t[i.INIT_SNAPSHOT][e]=n,t[i.LAST_SNAPSHOT][e]=n},n.filterSnapshots=function(t,e,n){return n.reduce((function(t,n){var r=n.displayName||n;if(!e[r])throw new ReferenceError(r+" is not a valid store");return t[r]=e[r],t}),{})};var i=r(t("../symbols/symbols")),o=r(t("../../utils/functions"))},{"../../utils/functions":13,"../symbols/symbols":10}],13:[function(t,e,n){function r(t,e){e.forEach((function(e){Object.keys(Object(e)).forEach((function(n){t(n,e[n])}))}))}Object.defineProperty(n,"__esModule",{value:!0}),n.eachObject=r,n.assign=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return r((function(e,n){return t[e]=n}),n),t},n.isFunction=function(t){return"function"==typeof t}},{}],14:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=Function.prototype.bind,i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;c=u=void 0,r=!1;var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0}},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u,c=t("flux"),l=a(t("./utils/StateFunctions")),f=a(t("./symbols/symbols")),h=a(t("../utils/functions")),p=a(t("./store")),d=a(t("./utils/AltUtils")),g=(u=t("./actions"))&&u.__esModule?u:{default:u},y=function(){function t(){var e=void 0===arguments[0]?{}:arguments[0];s(this,t),this.config=e,this.serialize=e.serialize||JSON.stringify,this.deserialize=e.deserialize||JSON.parse,this.dispatcher=e.dispatcher||new c.Dispatcher,this.actions={global:{}},this.stores={},this.storeTransforms=e.storeTransforms||[],this[f.ACTIONS_REGISTRY]={},this[f.INIT_SNAPSHOT]={},this[f.LAST_SNAPSHOT]={}}return o(t,[{key:"dispatch",value:function(t,e,n){this.dispatcher.dispatch({action:t,data:e,details:n})}},{key:"createUnsavedStore",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.displayName||"";p.createStoreConfig(this.config,t);var o=p.transformStore(this.storeTransforms,t);return h.isFunction(o)?p.createStoreFromClass.apply(p,[this,o,i].concat(n)):p.createStoreFromObject(this,o,i)}},{key:"createStore",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=e||t.displayName||t.name||"";p.createStoreConfig(this.config,t);var a=p.transformStore(this.storeTransforms,t);!this.stores[o]&&o||(this.stores[o]?d.warn("A store named "+o+" already exists, double check your store names or pass in your own custom identifier for each store"):d.warn("Store name was not specified"),o=d.uid(this.stores,o));var s=h.isFunction(a)?p.createStoreFromClass.apply(p,[this,a,o].concat(r)):p.createStoreFromObject(this,a,o);return this.stores[o]=s,l.saveInitialSnapshot(this,o),s}},{key:"generateActions",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.createActions(e.reduce((function(t,e){return t[e]=d.dispatchIdentity,t}),{name:"global"}))}},{key:"createAction",value:function(t,e,n){return(0,g.default)(this,"global",t,e,n)}},{key:"createActions",value:function(t){for(var e=arguments.length,n=Array(e>2?e-2:0),a=2;a<e;a++)n[a-2]=arguments[a];var u=this,c=void 0===arguments[1]?{}:arguments[1],l={},p=d.uid(this[f.ACTIONS_REGISTRY],t.displayName||t.name||"Unknown");return h.isFunction(t)?function(){h.assign(l,d.getInternalMethods(t,!0));var e=function(e){function n(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(n,t),o(n,[{key:"generateActions",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){l[t]=d.dispatchIdentity}))}}]),n}();h.assign(l,new(r.apply(e,[null].concat(n))))}():h.assign(l,t),this.actions[p]=this.actions[p]||{},h.eachObject((function(t,e){if(h.isFunction(e)){c[t]=(0,g.default)(u,p,t,e,c);var n=d.formatAsConstant(t);c[n]=c[t][f.ACTION_KEY]}}),[l]),c}},{key:"takeSnapshot",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=l.snapshot(this,e);return h.assign(this[f.LAST_SNAPSHOT],r),this.serialize(r)}},{key:"rollback",value:function(){l.setAppState(this,this.serialize(this[f.LAST_SNAPSHOT]),(function(t){t[f.LIFECYCLE].emit("rollback"),t.emitChange()}))}},{key:"recycle",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length?l.filterSnapshots(this,this[f.INIT_SNAPSHOT],e):this[f.INIT_SNAPSHOT];l.setAppState(this,this.serialize(r),(function(t){t[f.LIFECYCLE].emit("init"),t.emitChange()}))}},{key:"flush",value:function(){var t=this.serialize(l.snapshot(this));return this.recycle(),t}},{key:"bootstrap",value:function(t){l.setAppState(this,t,(function(t){t[f.LIFECYCLE].emit("bootstrap"),t.emitChange()}))}},{key:"prepare",value:function(t,e){var n={};if(!t.displayName)throw new ReferenceError("Store provided does not have a name");return n[t.displayName]=e,this.serialize(n)}},{key:"addActions",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.actions[t]=Array.isArray(e)?this.generateActions.apply(this,e):this.createActions.apply(this,[e].concat(r))}},{key:"addStore",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.createStore.apply(this,[e,t].concat(r))}},{key:"getActions",value:function(t){return this.actions[t]}},{key:"getStore",value:function(t){return this.stores[t]}}]),t}();n.default=y,e.exports=n.default},{"../utils/functions":13,"./actions":6,"./store":9,"./symbols/symbols":10,"./utils/AltUtils":11,"./utils/StateFunctions":12,flux:3}]},{},[14])(14)}))));A.serialize=function(){return""},A.deserialize=function(){return""};var b=A.generateActions("containerMounted","containerResized","fatalError","featureCreated","fontsLoaded","forceHD","onBoundsFocused","onLocationFocused","overlayDisplayed","needsRender","pause","play","renderedFeatureDisplayed","renderedFeatureRegister","setFieldOfView","setHD","setSize"),_=A.generateActions("animateAlongFeature","doubleTapZoom","featureClicked","featureSelected","focusOnBounds","focusOnFeature","focusOnLocation","focusOnTarget","inputEnded","inputStarted","orbitTarget","panToPosition","rotateLeft","rotateRight","selectFeatures","setCamera","setCameraMode","setCameraPosition","setCameraTarget","setCurrentPlace","setEnvironment","setGeography","setSecondaryParams","setTerrainEffectContours","setTerrainEffectFlats","setTerrainEffectGrade","setTerrainEffectHeight","setTerrainEffectNone","startFlyover","toggleWidgets","zoomIn","zoomOut"),w={focusOnBounds:function(t){if(!t.sw||!t.sw.longitude||!t.sw.latitude||!t.ne||!t.ne.longitude||!t.ne.latitude)return console.log("Invalid target passed"),console.log("Please use following format: { sw: { latitude: 44.5, longitude: 6.3 }, ne: { latitude: 44.4, longitude: 6.4 } }"),void console.log("{ longitude: 1.23, latitude: 4.56 }");var e={onComplete:b.onBoundsFocused};m.defaults(e,t),setTimeout((function(){_.focusOnBounds(e)}),0)},focusOnLocation:function(t){if(!t.longitude||!t.latitude)return console.log("Invalid target passed"),console.log("Please use following format:"),void console.log("{ longitude: 1.23, latitude: 4.56 }");var e={onComplete:b.onLocationFocused};m.defaults(e,t),setTimeout((function(){_.focusOnLocation(e)}),0)},orbitTarget:function(){setTimeout((function(){_.orbitTarget()}),0)},setCameraMode:function(t){setTimeout((function(){_.setCameraMode(t)}),0)}},x=A.generateActions("configureCamera","configureElevationDatasource","configureImageryDatasource","setAppContainer","setCameraModeControlVisible","setCompassVisible","setDisplayErrors","setLayersControlVisible","setResourceUrl","setRotationControlVisible","setSeasonControlVisible","setUserLocationControlVisible","setZoomControlVisible"),E={configureControls:function(t){if(t){var e={},n=["minDistance","maxBounds","maxDistance","minPolarAngle","maxPolarAngle","noPan","noRotate","noZoom"];for(var r in n){var i=n[r];t.hasOwnProperty(i)&&(e[i]=t[i])}setTimeout((function(){x.configureCamera(e)}),0)}else console.log("No configuration passed")}},O=A.generateActions("addBuiltinOverlay","addOverlay","elevationBigProgress","elevationProgress","featuresProgress","imageryBigProgress","imageryProgress","removeOverlay","setElevation","setElevationBig","setFeatures","setHeightOffset","setHeightOffsetBig","setImagery","setImageryBig","setLiabilityUsed","setOSMUsed","setSRTMUsed","setTerrainMesh","updateHeightMap","updateOverlay"),S={};function T(){this.appContainer=null,this.bindListeners({onBoundsFocused:b.onBoundsFocused,onLocationFocused:b.onLocationFocused,fatalError:b.fatalError,signalUserInteraction:_.inputStarted,setElevation:O.setElevation,setElevationBig:O.setElevationBig})}S.init=function(t){var e=t.container,n=t.datasource;if(void 0!==e&&null!==e)if(void 0!==n&&null!==n){var r=n.elevation,i=n.imagery;void 0!==r&&void 0!==r.apiKey?void 0!==i&&void 0!==i.urlFormat?(x.configureElevationDatasource(r),x.configureImageryDatasource(i),x.setAppContainer(e)):console.error("Error: imagery datasource configuration is invalid"):console.error("Error: elevation datasource configuration is invalid")}else console.error("Error: tried to init Procedural API without datasource definition");else console.error("Error: tried to init Procedural API with invalid container")},T.prototype.fatalError=function(t){"function"===typeof S.onLocationError&&S.onLocationError(t)},T.prototype.onBoundsFocused=function(){"function"===typeof S.onBoundsFocused&&S.onBoundsFocused()},T.prototype.onLocationFocused=function(){"function"===typeof S.onLocationFocused&&S.onLocationFocused()},T.prototype.setElevation=function(){},T.prototype.setElevationBig=function(){},S.setDisplayErrors=function(t){setTimeout((function(){x.setDisplayErrors(t)}),0)},T.prototype.signalUserInteraction=function(){"function"===typeof S.onUserInteraction&&S.onUserInteraction()},T.displayName="CoreExport",A.createStore(T);var P=.05,M={snap:function(t){return Math.round(t/P)*P},datafileForLocation:function(t,e){t=M.snap(t);var n=(e=M.snap(e))>0?"N":"S",r=t>0?"E":"W";t=Math.abs(t),e=Math.abs(e);var i=P.toPrecision().split(".")[1];return i=i?i.length:0,t=t.toFixed(i),n+(e=e.toFixed(i))+r+t}},C={env:{turbidity:2.928118393234672,reileigh:.631430584918957,mieCoefficient:.006765327695560254,mieDirectionalG:.9020436927413672,luminance:.7892882311486963,inclination:.6376744186046512,azimuth:.881,sun:!1,fogDropoff:9e-6,fogIntensity:1.1,exposureBias:1.25,whitePoint:2.5,ambientColor:"#2d3034",diffuseColor:"#aeafa4",backscatterColor:"#181d20",ambientOcclusion:1.17}},I={};I.datafileForLocation=function(t){if(!t||isNaN(t.latitude)||isNaN(t.longitude))return null;var e=M.snap(t.longitude),n=M.snap(t.latitude);return M.datafileForLocation(e,n)},I.displayLocation=function(t){t?isNaN(t.latitude)||isNaN(t.longitude)?b.fatalError("Invalid place data passed"):setTimeout((function(){_.setCurrentPlace(function(t){var e=C;return e.name=I.datafileForLocation(t),e.location=[t.longitude,t.latitude],t.features&&(e.features=t.features),e}(t))}),0):b.fatalError("No place data passed")};var R,k,j,L,N,D,F=y((function(t,e){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(1));e.default=i.default,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(2)),o=r(n(6)),a=r(n(3)),s=r(n(7)),u=r(n(8)),c=r(n(10)),l=r(n(11)),f=r(n(12)),h=r(n(13)),p=r(n(14)),d=r(n(15)),g=r(n(16)),y=r(n(9)),v=r(n(17));e.default={color:{Color:i.default,math:o.default,interpret:a.default},controllers:{Controller:s.default,BooleanController:u.default,OptionController:c.default,StringController:l.default,NumberController:f.default,NumberControllerBox:h.default,NumberControllerSlider:p.default,FunctionController:d.default,ColorController:g.default},dom:{dom:y.default},gui:{GUI:v.default},GUI:v.default},t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||f.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(f.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function a(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||f.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(f.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}e.__esModule=!0;var s=r(n(3)),u=r(n(6)),c=r(n(4)),l=r(n(5)),f=function(){function t(){if(i(this,t),this.__state=s.default.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return t.prototype.toString=function(){return(0,c.default)(this)},t.prototype.toHexString=function(){return(0,c.default)(this,!0)},t.prototype.toOriginal=function(){return this.__state.conversion.write(this)},t}();f.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=u.default.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");l.default.extend(t.__state,u.default.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},f.recalculateHSV=function(t){var e=u.default.rgb_to_hsv(t.r,t.g,t.b);l.default.extend(t.__state,{s:e.s,v:e.v}),l.default.isNaN(e.h)?l.default.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},f.COMPONENTS=["r","g","b","h","s","v","hex","a"],o(f.prototype,"r",2),o(f.prototype,"g",1),o(f.prototype,"b",0),a(f.prototype,"h"),a(f.prototype,"s"),a(f.prototype,"v"),Object.defineProperty(f.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(f.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=u.default.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),e.default=f,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(4)),o=r(n(5)),a=[{litmus:o.default.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:i.default},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:i.default},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:i.default},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:i.default}}},{litmus:o.default.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:o.default.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:o.default.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(o.default.isNumber(t.r)&&o.default.isNumber(t.g)&&o.default.isNumber(t.b)&&o.default.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(o.default.isNumber(t.r)&&o.default.isNumber(t.g)&&o.default.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(o.default.isNumber(t.h)&&o.default.isNumber(t.s)&&o.default.isNumber(t.v)&&o.default.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(o.default.isNumber(t.h)&&o.default.isNumber(t.s)&&o.default.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],s=void 0,u=void 0,c=function(){u=!1;var t=arguments.length>1?o.default.toArray(arguments):arguments[0];return o.default.each(a,(function(e){if(e.litmus(t))return o.default.each(e.conversions,(function(e,n){if(s=e.read(t),!1===u&&!1!==s)return u=s,s.conversionName=n,s.conversion=e,o.default.BREAK})),o.default.BREAK})),u};e.default=c,t.exports=e.default},function(t,e){e.__esModule=!0,e.default=function(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var l=t.hex.toString(16);l.length<6;)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+",a:"+a+"}":"unknown format"},t.exports=e.default},function(t,e){e.__esModule=!0;var n=Array.prototype.forEach,r=Array.prototype.slice,i={BREAK:{},extend:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(t)if(n&&t.forEach&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){var i=void 0,o=void 0;for(i=0,o=t.length;i<o;i++)if(i in t&&e.call(r,t[i],i)===this.BREAK)return}else for(var a in t)if(e.call(r,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){function i(){r=null,n||t.apply(o,a)}var o=this,a=arguments,s=n||!r;clearTimeout(r),r=setTimeout(i,e),s&&t.apply(o,a)}},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}};e.default=i,t.exports=e.default},function(t,e){e.__esModule=!0;var n=void 0,r={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,r){return r<<(n=8*e)|t&~(255<<n)}};e.default=r,t.exports=e.default},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,r){n(this,t),this.initialValue=e[r],this.domElement=document.createElement("div"),this.object=e,this.property=r,this.__onChange=void 0,this.__onFinishChange=void 0}return t.prototype.onChange=function(t){return this.__onChange=t,this},t.prototype.onFinishChange=function(t){return this.__onFinishChange=t,this},t.prototype.setValue=function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},t.prototype.getValue=function(){return this.object[this.property]},t.prototype.updateDisplay=function(){return this},t.prototype.isModified=function(){return this.initialValue!==this.getValue()},t}();e.default=r,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=r(n(7)),u=r(n(9)),c=function(t){function e(n,r){function a(){c.setValue(!c.__prev)}i(this,e);var s=o(this,t.call(this,n,r)),c=s;return s.__prev=s.getValue(),s.__checkbox=document.createElement("input"),s.__checkbox.setAttribute("type","checkbox"),u.default.bind(s.__checkbox,"change",a,!1),s.domElement.appendChild(s.__checkbox),s.updateDisplay(),s}return a(e,t),e.prototype.setValue=function(e){var n=t.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n},e.prototype.updateDisplay=function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),t.prototype.updateDisplay.call(this)},e}(s.default);e.default=c,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if("0"===t||o.default.isUndefined(t))return 0;var e=t.match(u);return o.default.isNull(e)?0:parseFloat(e[1])}e.__esModule=!0;var o=r(n(5)),a={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},s={};o.default.each(a,(function(t,e){o.default.each(t,(function(t){s[t]=e}))}));var u=/(\d+(\.\d+)?)px/,c={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;o.default.isUndefined(i)&&(i=!0),o.default.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},a=s[e];if(!a)throw new Error("Event type "+e+" not supported.");var u=document.createEvent(a);switch(a){case"MouseEvents":var c=i.x||i.clientX||0,l=i.y||i.clientY||0;u.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,c,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var f=u.initKeyboardEvent||u.initKeyEvent;o.default.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),f(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:u.initEvent(e,i.bubbles||!1,i.cancelable||!0)}o.default.defaults(u,r),t.dispatchEvent(u)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),c},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),c},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return c},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return c},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return i(e["border-left-width"])+i(e["border-right-width"])+i(e["padding-left"])+i(e["padding-right"])+i(e.width)},getHeight:function(t){var e=getComputedStyle(t);return i(e["border-top-width"])+i(e["border-bottom-width"])+i(e["padding-top"])+i(e["padding-bottom"])+i(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};e.default=c,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=r(n(7)),u=r(n(9)),c=r(n(5)),l=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,n,r)),l=a,f=s;if(s.__select=document.createElement("select"),c.default.isArray(l)){var h={};c.default.each(l,(function(t){h[t]=t})),l=h}return c.default.each(l,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),f.__select.appendChild(n)})),s.updateDisplay(),u.default.bind(s.__select,"change",(function(){var t=this.options[this.selectedIndex].value;f.setValue(t)})),s.domElement.appendChild(s.__select),s}return a(e,t),e.prototype.setValue=function(e){var n=t.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n},e.prototype.updateDisplay=function(){return u.default.isActive(this.__select)?this:(this.__select.value=this.getValue(),t.prototype.updateDisplay.call(this))},e}(s.default);e.default=l,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=r(n(7)),u=r(n(9)),c=function(t){function e(n,r){function a(){l.setValue(l.__input.value)}function s(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}i(this,e);var c=o(this,t.call(this,n,r)),l=c;return c.__input=document.createElement("input"),c.__input.setAttribute("type","text"),u.default.bind(c.__input,"keyup",a),u.default.bind(c.__input,"change",a),u.default.bind(c.__input,"blur",s),u.default.bind(c.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),c.updateDisplay(),c.domElement.appendChild(c.__input),c}return a(e,t),e.prototype.updateDisplay=function(){return u.default.isActive(this.__input)||(this.__input.value=this.getValue()),t.prototype.updateDisplay.call(this)},e}(s.default);e.default=c,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}e.__esModule=!0;var u=r(n(7)),c=r(n(5)),l=function(t){function e(n,r,a){i(this,e);var u=o(this,t.call(this,n,r)),l=a||{};return u.__min=l.min,u.__max=l.max,u.__step=l.step,c.default.isUndefined(u.__step)?0===u.initialValue?u.__impliedStep=1:u.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(u.initialValue))/Math.LN10))/10:u.__impliedStep=u.__step,u.__precision=s(u.__impliedStep),u}return a(e,t),e.prototype.setValue=function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),t.prototype.setValue.call(this,n)},e.prototype.min=function(t){return this.__min=t,this},e.prototype.max=function(t){return this.__max=t,this},e.prototype.step=function(t){return this.__step=t,this.__impliedStep=t,this.__precision=s(t),this},e}(u.default);e.default=l,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}e.__esModule=!0;var u=r(n(12)),c=r(n(9)),l=r(n(5)),f=function(t){function e(n,r,a){function s(){var t=parseFloat(y.__input.value);l.default.isNaN(t)||y.setValue(t)}function u(){y.__onFinishChange&&y.__onFinishChange.call(y,y.getValue())}function f(){u()}function h(t){var e=v-t.clientY;y.setValue(y.getValue()+e*y.__impliedStep),v=t.clientY}function p(){c.default.unbind(window,"mousemove",h),c.default.unbind(window,"mouseup",p),u()}function d(t){c.default.bind(window,"mousemove",h),c.default.bind(window,"mouseup",p),v=t.clientY}i(this,e);var g=o(this,t.call(this,n,r,a));g.__truncationSuspended=!1;var y=g,v=void 0;return g.__input=document.createElement("input"),g.__input.setAttribute("type","text"),c.default.bind(g.__input,"change",s),c.default.bind(g.__input,"blur",f),c.default.bind(g.__input,"mousedown",d),c.default.bind(g.__input,"keydown",(function(t){13===t.keyCode&&(y.__truncationSuspended=!0,this.blur(),y.__truncationSuspended=!1,u())})),g.updateDisplay(),g.domElement.appendChild(g.__input),g}return a(e,t),e.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision),t.prototype.updateDisplay.call(this)},e}(u.default);e.default=f,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}e.__esModule=!0;var u=r(n(12)),c=r(n(9)),l=function(t){function e(n,r,a,u,l){function f(t){document.activeElement.blur(),c.default.bind(window,"mousemove",h),c.default.bind(window,"mouseup",p),h(t)}function h(t){t.preventDefault();var e=g.__background.getBoundingClientRect();return g.setValue(s(t.clientX,e.left,e.right,g.__min,g.__max)),!1}function p(){c.default.unbind(window,"mousemove",h),c.default.unbind(window,"mouseup",p),g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())}i(this,e);var d=o(this,t.call(this,n,r,{min:a,max:u,step:l})),g=d;return d.__background=document.createElement("div"),d.__foreground=document.createElement("div"),c.default.bind(d.__background,"mousedown",f),c.default.addClass(d.__background,"slider"),c.default.addClass(d.__foreground,"slider-fg"),d.updateDisplay(),d.__background.appendChild(d.__foreground),d.domElement.appendChild(d.__background),d}return a(e,t),e.prototype.updateDisplay=function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",t.prototype.updateDisplay.call(this)},e}(u.default);e.default=l,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=r(n(7)),u=r(n(9)),c=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,n,r)),c=s;return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===a?"Fire":a,u.default.bind(s.__button,"click",(function(t){return t.preventDefault(),c.fire(),!1})),u.default.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return a(e,t),e.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},e}(s.default);e.default=c,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r){t.style.background="",p.default.each(g,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}function u(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}e.__esModule=!0;var c=r(n(7)),l=r(n(9)),f=r(n(2)),h=r(n(3)),p=r(n(5)),d=function(t){function e(n,r){function a(t){v(t),l.default.bind(window,"mousemove",v),l.default.bind(window,"mouseup",c)}function c(){l.default.unbind(window,"mousemove",v),l.default.unbind(window,"mouseup",c),y()}function d(){var t=(0,h.default)(this.value);!1!==t?(b.__color.__state=t,b.setValue(b.__color.toOriginal())):this.value=b.__color.toString()}function g(){l.default.unbind(window,"mousemove",m),l.default.unbind(window,"mouseup",g),y()}function y(){b.__onFinishChange&&b.__onFinishChange.call(b,b.__color.toOriginal())}function v(t){t.preventDefault();var e=b.__saturation_field.getBoundingClientRect(),n=(t.clientX-e.left)/(e.right-e.left),r=1-(t.clientY-e.top)/(e.bottom-e.top);return r>1?r=1:r<0&&(r=0),n>1?n=1:n<0&&(n=0),b.__color.v=r,b.__color.s=n,b.setValue(b.__color.toOriginal()),!1}function m(t){t.preventDefault();var e=b.__hue_field.getBoundingClientRect(),n=1-(t.clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),b.__color.h=360*n,b.setValue(b.__color.toOriginal()),!1}i(this,e);var A=o(this,t.call(this,n,r));A.__color=new f.default(A.getValue()),A.__temp=new f.default(0);var b=A;A.domElement=document.createElement("div"),l.default.makeSelectable(A.domElement,!1),A.__selector=document.createElement("div"),A.__selector.className="selector",A.__saturation_field=document.createElement("div"),A.__saturation_field.className="saturation-field",A.__field_knob=document.createElement("div"),A.__field_knob.className="field-knob",A.__field_knob_border="2px solid ",A.__hue_knob=document.createElement("div"),A.__hue_knob.className="hue-knob",A.__hue_field=document.createElement("div"),A.__hue_field.className="hue-field",A.__input=document.createElement("input"),A.__input.type="text",A.__input_textShadow="0 1px 1px ",l.default.bind(A.__input,"keydown",(function(t){13===t.keyCode&&d.call(this)})),l.default.bind(A.__input,"blur",d),l.default.bind(A.__selector,"mousedown",(function(){l.default.addClass(this,"drag").bind(window,"mouseup",(function(){l.default.removeClass(b.__selector,"drag")}))}));var _=document.createElement("div");return p.default.extend(A.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),p.default.extend(A.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:A.__field_knob_border+(A.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),p.default.extend(A.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),p.default.extend(A.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),p.default.extend(_.style,{width:"100%",height:"100%",background:"none"}),s(_,"top","rgba(0,0,0,0)","#000"),p.default.extend(A.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),u(A.__hue_field),p.default.extend(A.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:A.__input_textShadow+"rgba(0,0,0,0.7)"}),l.default.bind(A.__saturation_field,"mousedown",a),l.default.bind(A.__field_knob,"mousedown",a),l.default.bind(A.__hue_field,"mousedown",(function(t){m(t),l.default.bind(window,"mousemove",m),l.default.bind(window,"mouseup",g)})),A.__saturation_field.appendChild(_),A.__selector.appendChild(A.__field_knob),A.__selector.appendChild(A.__saturation_field),A.__selector.appendChild(A.__hue_field),A.__hue_field.appendChild(A.__hue_knob),A.domElement.appendChild(A.__input),A.domElement.appendChild(A.__selector),A.updateDisplay(),A}return a(e,t),e.prototype.updateDisplay=function(){var t=(0,h.default)(this.getValue());if(!1!==t){var e=!1;p.default.each(f.default.COMPONENTS,(function(n){if(!p.default.isUndefined(t[n])&&!p.default.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&p.default.extend(this.__color.__state,t)}p.default.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;p.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),p.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})},e}(c.default),g=["-moz-","-o-","-webkit-","-ms-",""];e.default=d,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function o(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function a(t,e,n){if(n.__li=e,n.__gui=t,I.default.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),u(t,n.object,n.property,{before:r,factoryArgs:[I.default.toArray(arguments)]})}if(I.default.isArray(e)||I.default.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),u(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof S.default){var r=new O.default(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});I.default.each(["updateDisplay","onChange","onFinishChange","step"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),C.default.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof O.default){var i=function(e){if(I.default.isNumber(n.__min)&&I.default.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=u(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=I.default.compose(i,n.min),n.max=I.default.compose(i,n.max)}else n instanceof x.default?(C.default.bind(e,"click",(function(){C.default.fakeEvent(n.__checkbox,"click")})),C.default.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof E.default?(C.default.bind(e,"click",(function(){C.default.fakeEvent(n.__button,"click")})),C.default.bind(e,"mouseover",(function(){C.default.addClass(n.__button,"hover")})),C.default.bind(e,"mouseout",(function(){C.default.removeClass(n.__button,"hover")}))):n instanceof T.default&&(C.default.addClass(e,"color"),n.updateDisplay=I.default.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=I.default.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&o(t.getRoot(),!0),e}),n.setValue)}function s(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o[N])return;a=o[N]}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function u(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var o=void 0;if(r.color)o=new T.default(e,n);else{var u=[e,n].concat(r.factoryArgs);o=_.default.apply(t,u)}r.before instanceof w.default&&(r.before=r.before.__li),s(t,o),C.default.addClass(o.domElement,"c");var c=document.createElement("span");C.default.addClass(c,"property-name"),c.innerHTML=o.property;var l=document.createElement("div");l.appendChild(c),l.appendChild(o.domElement);var f=i(t,l,r.before);return C.default.addClass(f,V.CLASS_CONTROLLER_ROW),o instanceof T.default?C.default.addClass(f,"color"):C.default.addClass(f,m(o.getValue())),a(t,f,o),t.__controllers.push(o),o}function c(t,e){return document.location.href+"."+e}function l(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function f(t,e){e.style.display=t.useLocalStorage?"block":"none"}function h(t){var e=t.__save_row=document.createElement("li");C.default.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),C.default.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",C.default.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",C.default.addClass(r,"button"),C.default.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",C.default.addClass(i,"button"),C.default.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",C.default.addClass(o,"button"),C.default.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?I.default.each(t.load.remembered,(function(e,n){l(t,n,n===t.preset)})):l(t,N,!1),C.default.bind(a,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),D){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(c(t,"isLocal"))&&u.setAttribute("checked","checked"),f(t,s),C.default.bind(u,"change",(function(){t.useLocalStorage=!t.useLocalStorage,f(t,s)}))}var h=document.getElementById("dg-new-constructor");C.default.bind(h,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||F.hide()})),C.default.bind(n,"click",(function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),F.show(),h.focus(),h.select()})),C.default.bind(r,"click",(function(){t.save()})),C.default.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),C.default.bind(o,"click",(function(){t.revert()}))}function p(t){function e(e){return e.preventDefault(),t.width+=i-e.clientX,t.onResize(),i=e.clientX,!1}function n(){C.default.removeClass(t.__closeButton,V.CLASS_DRAG),C.default.unbind(window,"mousemove",e),C.default.unbind(window,"mouseup",n)}function r(r){return r.preventDefault(),i=r.clientX,C.default.addClass(t.__closeButton,V.CLASS_DRAG),C.default.bind(window,"mousemove",e),C.default.bind(window,"mouseup",n),!1}var i=void 0;t.__resize_handle=document.createElement("div"),I.default.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),C.default.bind(t.__resize_handle,"mousedown",r),C.default.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function d(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function g(t,e){var n={};return I.default.each(t.__rememberedObjects,(function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];I.default.each(a,(function(t,n){o[n]=e?t.initialValue:t.getValue()})),n[i]=o})),n}function y(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}function v(t){0!==t.length&&P.default.call(window,(function(){v(t)})),I.default.each(t,(function(t){t.updateDisplay()}))}e.__esModule=!0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A=r(n(18)),b=r(n(19)),_=r(n(20)),w=r(n(7)),x=r(n(8)),E=r(n(15)),O=r(n(13)),S=r(n(14)),T=r(n(16)),P=r(n(21)),M=r(n(22)),C=r(n(9)),I=r(n(5)),R=r(n(23));A.default.inject(R.default);var k="dg",j=72,L=20,N="Default",D=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),F=void 0,B=!0,z=void 0,U=!1,G=[],V=function t(e){function n(){var t=r.getRoot();t.width+=1,I.default.defer((function(){t.width-=1}))}var r=this,o=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),C.default.addClass(this.domElement,k),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=I.default.defaults(o,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),o=I.default.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),I.default.isUndefined(o.load)?o.load={preset:N}:o.preset&&(o.load.preset=o.preset),I.default.isUndefined(o.parent)&&o.hideable&&G.push(this),o.resizable=I.default.isUndefined(o.parent)&&o.resizable,o.autoPlace&&I.default.isUndefined(o.scrollable)&&(o.scrollable=!0);var a=D&&"true"===localStorage.getItem(c(this,"isLocal")),s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return r.parent?r.getRoot().preset:o.load.preset},set:function(t){r.parent?r.getRoot().preset=t:o.load.preset=t,y(this),r.revert()}},width:{get:function(){return o.width},set:function(t){o.width=t,d(r,t)}},name:{get:function(){return o.name},set:function(t){o.name=t,titleRowName&&(titleRowName.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(e){o.closed=e,o.closed?C.default.addClass(r.__ul,t.CLASS_CLOSED):C.default.removeClass(r.__ul,t.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return a},set:function(t){D&&(a=t,t?C.default.bind(window,"unload",s):C.default.unbind(window,"unload",s),localStorage.setItem(c(r,"isLocal"),t))}}}),I.default.isUndefined(o.parent)){if(o.closed=!1,C.default.addClass(this.domElement,t.CLASS_MAIN),C.default.makeSelectable(this.domElement,!1),D&&a){r.useLocalStorage=!0;var u=localStorage.getItem(c(this,"gui"));u&&(o.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,C.default.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),o.closeOnTop?(C.default.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(C.default.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),C.default.bind(this.__closeButton,"click",(function(){r.closed=!r.closed}))}else{void 0===o.closed&&(o.closed=!0);var l=document.createTextNode(o.name);C.default.addClass(l,"controller-name");var f=i(r,l),h=function(t){return t.preventDefault(),r.closed=!r.closed,!1};C.default.addClass(this.__ul,t.CLASS_CLOSED),C.default.addClass(f,"title"),C.default.bind(f,"click",h),o.closed||(this.closed=!1)}o.autoPlace&&(I.default.isUndefined(o.parent)&&(B&&(z=document.createElement("div"),C.default.addClass(z,k),C.default.addClass(z,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(z),B=!1),z.appendChild(this.domElement),C.default.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||d(r,o.width)),this.__resizeHandler=function(){r.onResizeDebounced()},C.default.bind(window,"resize",this.__resizeHandler),C.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),C.default.bind(this.__ul,"transitionend",this.__resizeHandler),C.default.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&p(this),s=function(){D&&"true"===localStorage.getItem(c(r,"isLocal"))&&localStorage.setItem(c(r,"gui"),JSON.stringify(r.getSaveObject()))},this.saveToLocalStorageIfPossible=s,o.parent||n()};V.toggleHide=function(){U=!U,I.default.each(G,(function(t){t.domElement.style.display=U?"none":""}))},V.CLASS_AUTO_PLACE="a",V.CLASS_AUTO_PLACE_CONTAINER="ac",V.CLASS_MAIN="main",V.CLASS_CONTROLLER_ROW="cr",V.CLASS_TOO_TALL="taller-than-window",V.CLASS_CLOSED="closed",V.CLASS_CLOSE_BUTTON="close-button",V.CLASS_CLOSE_TOP="close-top",V.CLASS_CLOSE_BOTTOM="close-bottom",V.CLASS_DRAG="drag",V.DEFAULT_WIDTH=245,V.TEXT_CLOSED="Close Controls",V.TEXT_OPEN="Open Controls",V._keydownHandler=function(t){"text"===document.activeElement.type||t.which!==j&&t.keyCode!==j||V.toggleHide()},C.default.bind(window,"keydown",V._keydownHandler,!1),I.default.extend(V.prototype,{add:function(t,e){return u(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return u(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;I.default.defer((function(){e.onResize()}))},destroy:function(){this.autoPlace&&z.removeChild(this.domElement),C.default.unbind(window,"keydown",V._keydownHandler,!1),C.default.unbind(window,"resize",this.__resizeHandler),this.saveToLocalStorageIfPossible&&C.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new V(e);this.__folders[t]=n;var r=i(this,n.domElement);return C.default.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=C.default.getOffset(t.__ul).top,n=0;I.default.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=C.default.getHeight(e))})),window.innerHeight-e-L<n?(C.default.addClass(t.domElement,V.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-L+"px"):(C.default.removeClass(t.domElement,V.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&I.default.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:I.default.debounce((function(){this.onResize()}),50),remember:function(){if(I.default.isUndefined(F)&&((F=new M.default).domElement.innerHTML=b.default),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;I.default.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&h(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&d(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=g(this)),t.folders={},I.default.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=g(this),o(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[N]=g(this,!0)),this.load.remembered[t]=g(this),this.preset=t,l(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){I.default.each(this.__controllers,(function(e){this.getRoot().load.remembered?s(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),I.default.each(this.__folders,(function(t){t.revert(t)})),t||o(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&v(this.__listening)},updateDisplay:function(){I.default.each(this.__controllers,(function(t){t.updateDisplay()})),I.default.each(this.__folders,(function(t){t.updateDisplay()}))}}),e.default=V,t.exports=e.default},function(t,e){t.exports={load:function(t,e){var n=e||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}}}},function(t,e){t.exports="<div id=dg-save class=\"dg dialogue\"> Here's the new load parameter for your <code>GUI</code>'s constructor: <textarea id=dg-new-constructor></textarea> <div id=dg-save-locally> <input id=dg-local-storage type=checkbox /> Automatically save values to <code>localStorage</code> on exit. <div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do. </div> </div> </div>"},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(10)),o=r(n(13)),a=r(n(14)),s=r(n(11)),u=r(n(15)),c=r(n(8)),l=r(n(5)),f=function(t,e){var n=t[e];return l.default.isArray(arguments[2])||l.default.isObject(arguments[2])?new i.default(t,e,arguments[2]):l.default.isNumber(n)?l.default.isNumber(arguments[2])&&l.default.isNumber(arguments[3])?l.default.isNumber(arguments[4])?new a.default(t,e,arguments[2],arguments[3],arguments[4]):new a.default(t,e,arguments[2],arguments[3]):l.default.isNumber(arguments[4])?new o.default(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new o.default(t,e,{min:arguments[2],max:arguments[3]}):l.default.isString(n)?new s.default(t,e):l.default.isFunction(n)?new u.default(t,e,""):l.default.isBoolean(n)?new c.default(t,e):null};e.default=f,t.exports=e.default},function(t,e){function n(t){setTimeout(t,1e3/60)}e.__esModule=!0,e.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=r(n(9)),a=r(n(5)),s=function(){function t(){i(this,t),this.backgroundElement=document.createElement("div"),a.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),o.default.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;o.default.bind(this.backgroundElement,"click",(function(){e.hide()}))}return t.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.default.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))},t.prototype.hide=function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",o.default.unbind(t.domElement,"webkitTransitionEnd",e),o.default.unbind(t.domElement,"transitionend",e),o.default.unbind(t.domElement,"oTransitionEnd",e)};o.default.bind(this.domElement,"webkitTransitionEnd",e),o.default.bind(this.domElement,"transitionend",e),o.default.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},t.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-o.default.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-o.default.getHeight(this.domElement)/2+"px"},t}();e.default=s,t.exports=e.default},function(t,e,n){(t.exports=n(24)()).push([t.id,".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{transition:height .1s ease-out;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px Lucida Grande,sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}}])})),B=g(F),z=(F.dat,function(t){if("set"!==t.slice(0,3))throw new Error("Action must be called setX");return t.charAt(3).toLowerCase()+t.slice(4)});function U(t){function e(){var e={};for(R=0,k=t.length;R<k;R++)j=t[R],L=j[0],D=j[1],N=L.data.name,this[z(N)]=D,e[N]=L;this.bindListeners(e)}for(R=0,k=t.length;R<k;R++)j=t[R],L=j[0],N=L.data.name,e.prototype[N]=function(t){return function(e){this[t]=e}}(z(N));return e}var G=U([[_.setEnvironment,{}]]);G.displayName="EnvironmentStore";var V=A.createStore(G);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e});var q={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},H={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},W=100,X=300,Y=306,Q=1e3,Z=1001,K=1002,J=1003,$=1004,tt=1005,et=1006,nt=1007,rt=1008,it=1009,ot=1012,at=1014,st=1015,ut=1016,ct=1020,lt=1022,ft=1023,ht=1026,pt=1027,dt=33776,gt=33777,yt=33778,vt=33779,mt=35840,At=35841,bt=35842,_t=35843,wt=37492,xt=37496,Et=2400,Ot=2401,St=2402,Tt=3e3,Pt=3001,Mt=3007,Ct=3002,It=3004,Rt=3005,kt=3006,jt=7680,Lt=35044,Nt=35048;function Dt(){}Object.assign(Dt.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});for(var Ft=[],Bt=0;Bt<256;Bt++)Ft[Bt]=(Bt<16?"0":"")+Bt.toString(16);var zt,Ut={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Ft[255&t]+Ft[t>>8&255]+Ft[t>>16&255]+Ft[t>>24&255]+"-"+Ft[255&e]+Ft[e>>8&255]+"-"+Ft[e>>16&15|64]+Ft[e>>24&255]+"-"+Ft[63&n|128]+Ft[n>>8&255]+"-"+Ft[n>>16&255]+Ft[n>>24&255]+Ft[255&r]+Ft[r>>8&255]+Ft[r>>16&255]+Ft[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Ut.DEG2RAD},radToDeg:function(t){return t*Ut.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),c=o((e+r)/2),l=a((e+r)/2),f=o((e-r)/2),h=a((e-r)/2),p=o((r-e)/2),d=a((r-e)/2);"XYX"===i?t.set(s*l,u*f,u*h,s*c):"YZY"===i?t.set(u*h,s*l,u*f,s*c):"ZXZ"===i?t.set(u*f,u*h,s*l,s*c):"XZX"===i?t.set(s*l,u*d,u*p,s*c):"YXY"===i?t.set(u*p,s*l,u*d,s*c):"ZYZ"===i?t.set(u*d,u*p,s*l,s*c):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function Gt(t,e){this.x=t||0,this.y=e||0}function Vt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Gt.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Gt.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(Vt.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],f=n[2],h=n[5],p=n[8],d=r[0],g=r[3],y=r[6],v=r[1],m=r[4],A=r[7],b=r[2],_=r[5],w=r[8];return i[0]=o*d+a*v+s*b,i[3]=o*g+a*m+s*_,i[6]=o*y+a*A+s*w,i[1]=u*d+c*v+l*b,i[4]=u*g+c*m+l*_,i[7]=u*y+c*A+l*w,i[2]=f*d+h*v+p*b,i[5]=f*g+h*m+p*_,i[8]=f*y+h*A+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=n[8],p=h*u-c*f,d=c*l-h*s,g=f*s-u*l,y=i*p+o*d+a*g;if(0===y){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var m=1/y;return r[0]=p*m,r[1]=(a*f-h*o)*m,r[2]=(c*o-a*u)*m,r[3]=d*m,r[4]=(h*i-a*l)*m,r[5]=(a*s-c*i)*m,r[6]=g*m,r[7]=(o*l-f*i)*m,r[8]=(u*i-o*s)*m,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var qt={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===zt&&(zt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),zt.width=t.width,zt.height=t.height;var n=zt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=zt}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Ht=0;function Wt(t,e,n,r,i,o,a,s,u,c){Object.defineProperty(this,"id",{value:Ht++}),this.uuid=Ut.generateUUID(),this.name="",this.image=void 0!==t?t:Wt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Wt.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Z,this.wrapT=void 0!==r?r:Z,this.magFilter=void 0!==i?i:et,this.minFilter=void 0!==o?o:rt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:ft,this.internalFormat=null,this.type=void 0!==s?s:it,this.offset=new Gt(0,0),this.repeat=new Gt(1,1),this.center=new Gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Tt,this.version=0,this.onUpdate=null}function Xt(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function Yt(t,e,n){this.width=t,this.height=e,this.scissor=new Xt(0,0,t,e),this.scissorTest=!1,this.viewport=new Xt(0,0,t,e),n=n||{},this.texture=new Wt(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:et,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Qt(t,e,n){Yt.call(this,t,e,n),this.samples=4}function Zt(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}Wt.DEFAULT_IMAGE=void 0,Wt.DEFAULT_MAPPING=X,Wt.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Wt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Ut.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(qt.getDataURL(r[o]))}else i=qt.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==X)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Q:t.x=t.x-Math.floor(t.x);break;case Z:t.x=t.x<0?0:1;break;case K:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Q:t.y=t.y-Math.floor(t.y);break;case Z:t.y=t.y<0?0:1;break;case K:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Wt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(Xt.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(Xt.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],c=s[4],l=s[8],f=s[1],h=s[5],p=s[9],d=s[2],g=s[6],y=s[10];if(Math.abs(c-f)<o&&Math.abs(l-d)<o&&Math.abs(p-g)<o){if(Math.abs(c+f)<a&&Math.abs(l+d)<a&&Math.abs(p+g)<a&&Math.abs(u+h+y-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var v=(u+1)/2,m=(h+1)/2,A=(y+1)/2,b=(c+f)/4,_=(l+d)/4,w=(p+g)/4;return v>m&&v>A?v<o?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(v)),i=_/n):m>A?m<o?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(m)),i=w/r):A<o?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(A)),r=w/i),this.set(n,r,i,e),this}var x=Math.sqrt((g-p)*(g-p)+(l-d)*(l-d)+(f-c)*(f-c));return Math.abs(x)<.001&&(x=1),this.x=(g-p)/x,this.y=(l-d)/x,this.z=(f-c)/x,this.w=Math.acos((u+h+y-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Yt.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Yt,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Qt.prototype=Object.assign(Object.create(Yt.prototype),{constructor:Qt,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Yt.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(Zt,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],f=i[o+0],h=i[o+1],p=i[o+2],d=i[o+3];if(l!==d||s!==f||u!==h||c!==p){var g=1-a,y=s*f+u*h+c*p+l*d,v=y>=0?1:-1,m=1-y*y;if(m>Number.EPSILON){var A=Math.sqrt(m),b=Math.atan2(A,y*v);g=Math.sin(g*b)/A,a=Math.sin(a*b)/A}var _=a*v;if(s=s*g+f*_,u=u*g+h*_,c=c*g+p*_,l=l*g+d*_,g===1-a){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(Zt.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Zt.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),f=s(n/2),h=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l-f*h*p):"YXZ"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l+f*h*p):"ZXY"===o?(this._x=f*c*l-u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l-f*h*p):"ZYX"===o?(this._x=f*c*l-u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l+f*h*p):"YZX"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l-f*h*p):"XZY"===o&&(this._x=f*c*l-u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l+f*h*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],f=n[10],h=r+s+f;return h>0?(e=.5/Math.sqrt(h+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-c)*e,this._z=(a-i)*e):r>s&&r>f?(e=2*Math.sqrt(1+r-s-f),this._w=(l-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+c)/e):s>f?(e=2*Math.sqrt(1+s-r-f),this._w=(o-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+f-r-s),this._w=(a-i)/e,this._x=(o+c)/e,this._y=(u+l)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Ut.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),f=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Kt=new $t,Jt=new Zt;function $t(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign($t.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Jt.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(Jt.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,l=s*r+i*n-o*e,f=-i*e-o*n-a*r;return this.x=u*s+f*-i+c*-a-l*-o,this.y=c*s+f*-o+l*-i-u*-a,this.z=l*s+f*-a+u*-o-c*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return Kt.copy(this).projectOnVector(t),this.sub(Kt)},reflect:function(t){return this.sub(Kt.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(Ut.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var te=new $t,ee=new se,ne=new $t(0,0,0),re=new $t(1,1,1),ie=new $t,oe=new $t,ae=new $t;function se(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(se.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,g){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=i,y[5]=o,y[9]=a,y[13]=s,y[2]=u,y[6]=c,y[10]=l,y[14]=f,y[3]=h,y[7]=p,y[11]=d,y[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new se).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/te.setFromMatrixColumn(t,0).length(),i=1/te.setFromMatrixColumn(t,1).length(),o=1/te.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var f=o*c,h=o*l,p=a*c,d=a*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=h+p*u,e[5]=f-d*u,e[9]=-a*s,e[2]=d-f*u,e[6]=p+h*u,e[10]=o*s}else if("YXZ"===t.order){var g=s*c,y=s*l,v=u*c,m=u*l;e[0]=g+m*a,e[4]=v*a-y,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=y*a-v,e[6]=m+g*a,e[10]=o*s}else if("ZXY"===t.order){g=s*c,y=s*l,v=u*c,m=u*l;e[0]=g-m*a,e[4]=-o*l,e[8]=v+y*a,e[1]=y+v*a,e[5]=o*c,e[9]=m-g*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){f=o*c,h=o*l,p=a*c,d=a*l;e[0]=s*c,e[4]=p*u-h,e[8]=f*u+d,e[1]=s*l,e[5]=d*u+f,e[9]=h*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var A=o*s,b=o*u,_=a*s,w=a*u;e[0]=s*c,e[4]=w-A*l,e[8]=_*l+b,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=b*l+_,e[10]=A-w*l}else if("XZY"===t.order){A=o*s,b=o*u,_=a*s,w=a*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=A*l+w,e[5]=o*c,e[9]=b*l-_,e[2]=_*l-b,e[6]=a*c,e[10]=w*l+A}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(ne,t,re)},lookAt:function(t,e,n){var r=this.elements;return ae.subVectors(t,e),0===ae.lengthSq()&&(ae.z=1),ae.normalize(),ie.crossVectors(n,ae),0===ie.lengthSq()&&(1===Math.abs(n.z)?ae.x+=1e-4:ae.z+=1e-4,ae.normalize(),ie.crossVectors(n,ae)),ie.normalize(),oe.crossVectors(ae,ie),r[0]=ie.x,r[4]=oe.x,r[8]=ae.x,r[1]=ie.y,r[5]=oe.y,r[9]=ae.y,r[2]=ie.z,r[6]=oe.z,r[10]=ae.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],f=n[9],h=n[13],p=n[2],d=n[6],g=n[10],y=n[14],v=n[3],m=n[7],A=n[11],b=n[15],_=r[0],w=r[4],x=r[8],E=r[12],O=r[1],S=r[5],T=r[9],P=r[13],M=r[2],C=r[6],I=r[10],R=r[14],k=r[3],j=r[7],L=r[11],N=r[15];return i[0]=o*_+a*O+s*M+u*k,i[4]=o*w+a*S+s*C+u*j,i[8]=o*x+a*T+s*I+u*L,i[12]=o*E+a*P+s*R+u*N,i[1]=c*_+l*O+f*M+h*k,i[5]=c*w+l*S+f*C+h*j,i[9]=c*x+l*T+f*I+h*L,i[13]=c*E+l*P+f*R+h*N,i[2]=p*_+d*O+g*M+y*k,i[6]=p*w+d*S+g*C+y*j,i[10]=p*x+d*T+g*I+y*L,i[14]=p*E+d*P+g*R+y*N,i[3]=v*_+m*O+A*M+b*k,i[7]=v*w+m*S+A*C+b*j,i[11]=v*x+m*T+A*I+b*L,i[15]=v*E+m*P+A*R+b*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],f=t[10],h=t[14];return t[3]*(+i*s*l-r*u*l-i*a*f+n*u*f+r*a*h-n*s*h)+t[7]*(+e*s*h-e*u*f+i*o*f-r*o*h+r*u*c-i*s*c)+t[11]*(+e*u*l-e*a*h-i*o*l+n*o*h+i*a*c-n*u*c)+t[15]*(-r*a*c-e*s*l+e*a*f+r*o*l-n*o*f+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],f=r[7],h=r[8],p=r[9],d=r[10],g=r[11],y=r[12],v=r[13],m=r[14],A=r[15],b=p*m*f-v*d*f+v*l*g-c*m*g-p*l*A+c*d*A,_=y*d*f-h*m*f-y*l*g+u*m*g+h*l*A-u*d*A,w=h*v*f-y*p*f+y*c*g-u*v*g-h*c*A+u*p*A,x=y*p*l-h*v*l-y*c*d+u*v*d+h*c*m-u*p*m,E=i*b+o*_+a*w+s*x;if(0===E){var O="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(O);return console.warn(O),this.identity()}var S=1/E;return n[0]=b*S,n[1]=(v*d*s-p*m*s-v*a*g+o*m*g+p*a*A-o*d*A)*S,n[2]=(c*m*s-v*l*s+v*a*f-o*m*f-c*a*A+o*l*A)*S,n[3]=(p*l*s-c*d*s-p*a*f+o*d*f+c*a*g-o*l*g)*S,n[4]=_*S,n[5]=(h*m*s-y*d*s+y*a*g-i*m*g-h*a*A+i*d*A)*S,n[6]=(y*l*s-u*m*s-y*a*f+i*m*f+u*a*A-i*l*A)*S,n[7]=(u*d*s-h*l*s+h*a*f-i*d*f-u*a*g+i*l*g)*S,n[8]=w*S,n[9]=(y*p*s-h*v*s-y*o*g+i*v*g+h*o*A-i*p*A)*S,n[10]=(u*v*s-y*c*s+y*o*f-i*v*f-u*o*A+i*c*A)*S,n[11]=(h*c*s-u*p*s-h*o*f+i*p*f+u*o*g-i*c*g)*S,n[12]=x*S,n[13]=(h*v*a-y*p*a+y*o*d-i*v*d-h*o*m+i*p*m)*S,n[14]=(y*c*a-u*v*a-y*o*l+i*v*l+u*o*m-i*c*m)*S,n[15]=(u*p*a-h*c*a+h*o*l-i*p*l-u*o*d+i*c*d)*S,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,p=i*l,d=o*c,g=o*l,y=a*l,v=s*u,m=s*c,A=s*l,b=n.x,_=n.y,w=n.z;return r[0]=(1-(d+y))*b,r[1]=(h+A)*b,r[2]=(p-m)*b,r[3]=0,r[4]=(h-A)*_,r[5]=(1-(f+y))*_,r[6]=(g+v)*_,r[7]=0,r[8]=(p+m)*w,r[9]=(g-v)*w,r[10]=(1-(f+d))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=te.set(r[0],r[1],r[2]).length(),o=te.set(r[4],r[5],r[6]).length(),a=te.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],ee.copy(this);var s=1/i,u=1/o,c=1/a;return ee.elements[0]*=s,ee.elements[1]*=s,ee.elements[2]*=s,ee.elements[4]*=u,ee.elements[5]*=u,ee.elements[6]*=u,ee.elements[8]*=c,ee.elements[9]*=c,ee.elements[10]*=c,e.setFromRotationMatrix(ee),n.x=i,n.y=o,n.z=a,this},makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),f=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*s,f=(n+r)*u,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var ue=new se,ce=new Zt;function le(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||le.DefaultOrder}function fe(){this.mask=1}le.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],le.DefaultOrder="XYZ",Object.defineProperties(le.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(le.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Ut.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],f=i[2],h=i[6],p=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return ue.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ue,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return ce.setFromEuler(this),this.setFromQuaternion(ce,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new $t(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(fe.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!==(this.mask&t.mask)}});var he=0,pe=new $t,de=new Zt,ge=new se,ye=new $t,ve=new $t,me=new $t,Ae=new Zt,be=new $t(1,0,0),_e=new $t(0,1,0),we=new $t(0,0,1),xe={type:"added"},Ee={type:"removed"};function Oe(){Object.defineProperty(this,"id",{value:he++}),this.uuid=Ut.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Oe.DefaultUp.clone();var t=new $t,e=new le,n=new Zt,r=new $t(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new se},normalMatrix:{value:new Vt}}),this.matrix=new se,this.matrixWorld=new se,this.matrixAutoUpdate=Oe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new fe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Se(){Oe.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Oe.DefaultUp=new $t(0,1,0),Oe.DefaultMatrixAutoUpdate=!0,Oe.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Oe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return de.setFromAxisAngle(t,e),this.quaternion.multiply(de),this},rotateOnWorldAxis:function(t,e){return de.setFromAxisAngle(t,e),this.quaternion.premultiply(de),this},rotateX:function(t){return this.rotateOnAxis(be,t)},rotateY:function(t){return this.rotateOnAxis(_e,t)},rotateZ:function(t){return this.rotateOnAxis(we,t)},translateOnAxis:function(t,e){return pe.copy(t).applyQuaternion(this.quaternion),this.position.add(pe.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(be,t)},translateY:function(t){return this.translateOnAxis(_e,t)},translateZ:function(t){return this.translateOnAxis(we,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(ge.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?ye.copy(t):ye.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),ve.setFromMatrixPosition(this.matrixWorld),this.isCamera?ge.lookAt(ve,ye,this.up):ge.lookAt(ye,ve,this.up),this.quaternion.setFromRotationMatrix(ge),r&&(ge.extractRotation(r.matrixWorld),de.setFromRotationMatrix(ge),this.quaternion.premultiply(de.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(xe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Ee)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),ge.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ge.multiply(t.parent.matrixWorld)),t.applyMatrix4(ge),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new $t),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Zt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ve,t,me),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new $t),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ve,Ae,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new $t),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(t.shapes,c)}else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));r.material=l}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var f=g(t.geometries),h=g(t.materials),p=g(t.textures),d=g(t.images);a=g(t.shapes);f.length>0&&(n.geometries=f),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function g(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),Se.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Se,isScene:!0,copy:function(t,e){return Oe.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Oe.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Te=[new $t,new $t,new $t,new $t,new $t,new $t,new $t,new $t],Pe=new $t,Me=new ze,Ce=new $t,Ie=new $t,Re=new $t,ke=new $t,je=new $t,Le=new $t,Ne=new $t,De=new $t,Fe=new $t,Be=new $t;function ze(t,e){this.min=void 0!==t?t:new $t(1/0,1/0,1/0),this.max=void 0!==e?e:new $t(-1/0,-1/0,-1/0)}function Ue(t,e,n,r,i){var o,a;for(o=0,a=t.length-3;o<=a;o+=3){Be.fromArray(t,o);var s=i.x*Math.abs(Be.x)+i.y*Math.abs(Be.y)+i.z*Math.abs(Be.z),u=e.dot(Be),c=n.dot(Be),l=r.dot(Be);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}Object.assign(ze.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],f=t[s+2];c<e&&(e=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>o&&(o=l),f>a&&(a=f)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),f=t.getZ(s);c<e&&(e=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>o&&(o=l),f>a&&(a=f)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Pe.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new $t),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new $t),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Me.copy(e.boundingBox),Me.applyMatrix4(t.matrixWorld),this.union(Me));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new $t),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Pe),Pe.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(Ne),De.subVectors(this.max,Ne),Ce.subVectors(t.a,Ne),Ie.subVectors(t.b,Ne),Re.subVectors(t.c,Ne),ke.subVectors(Ie,Ce),je.subVectors(Re,Ie),Le.subVectors(Ce,Re);var e=[0,-ke.z,ke.y,0,-je.z,je.y,0,-Le.z,Le.y,ke.z,0,-ke.x,je.z,0,-je.x,Le.z,0,-Le.x,-ke.y,ke.x,0,-je.y,je.x,0,-Le.y,Le.x,0];return!!Ue(e,Ce,Ie,Re,De)&&(!!Ue(e=[1,0,0,0,1,0,0,0,1],Ce,Ie,Re,De)&&(Fe.crossVectors(ke,je),Ue(e=[Fe.x,Fe.y,Fe.z],Ce,Ie,Re,De)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new $t),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Pe.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Pe).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(Te[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Te[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Te[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Te[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Te[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Te[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Te[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Te[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Te)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Ge=new ze;function Ve(t,e){this.center=void 0!==t?t:new $t,this.radius=void 0!==e?e:0}Object.assign(Ve.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):Ge.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new $t),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ze),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});new $t,new $t,new $t,new $t,new $t,new $t,new $t;function qe(){}var He=new $t,We=new $t,Xe=new Vt;function Ye(t,e){this.normal=void 0!==t?t:new $t(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Ye.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var r=He.subVectors(n,e).cross(We.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new $t),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new $t);var n=t.delta(He),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new $t),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Xe.getNormalMatrix(t),r=this.coplanarPoint(He).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Qe=new $t,Ze=new $t,Ke=new $t,Je=new $t,$e=new $t,tn=new $t,en=new $t,nn=new $t,rn=new $t,on=new $t;function an(t,e,n){this.a=void 0!==t?t:new $t,this.b=void 0!==e?e:new $t,this.c=void 0!==n?n:new $t}Object.assign(an,{getNormal:function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new $t),r.subVectors(n,e),Qe.subVectors(t,e),r.cross(Qe);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,n,r,i){Qe.subVectors(r,e),Ze.subVectors(n,e),Ke.subVectors(t,e);var o=Qe.dot(Qe),a=Qe.dot(Ze),s=Qe.dot(Ke),u=Ze.dot(Ze),c=Ze.dot(Ke),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new $t),0===l)return i.set(-2,-1,-1);var f=1/l,h=(u*s-a*c)*f,p=(o*c-a*s)*f;return i.set(1-h-p,p,h)},containsPoint:function(t,e,n,r){return an.getBarycoord(t,e,n,r,Je),Je.x>=0&&Je.y>=0&&Je.x+Je.y<=1},getUV:function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Je),s.set(0,0),s.addScaledVector(i,Je.x),s.addScaledVector(o,Je.y),s.addScaledVector(a,Je.z),s},isFrontFacing:function(t,e,n,r){return Qe.subVectors(n,e),Ze.subVectors(t,e),Qe.cross(Ze).dot(r)<0}}),Object.assign(an.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Qe.subVectors(this.c,this.b),Ze.subVectors(this.a,this.b),.5*Qe.cross(Ze).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new $t),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return an.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Ye),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return an.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return an.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return an.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return an.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new $t);var n,r,i=this.a,o=this.b,a=this.c;$e.subVectors(o,i),tn.subVectors(a,i),nn.subVectors(t,i);var s=$e.dot(nn),u=tn.dot(nn);if(s<=0&&u<=0)return e.copy(i);rn.subVectors(t,o);var c=$e.dot(rn),l=tn.dot(rn);if(c>=0&&l<=c)return e.copy(o);var f=s*l-c*u;if(f<=0&&s>=0&&c<=0)return n=s/(s-c),e.copy(i).addScaledVector($e,n);on.subVectors(t,a);var h=$e.dot(on),p=tn.dot(on);if(p>=0&&h<=p)return e.copy(a);var d=h*u-s*p;if(d<=0&&u>=0&&p<=0)return r=u/(u-p),e.copy(i).addScaledVector(tn,r);var g=c*p-h*l;if(g<=0&&l-c>=0&&h-p>=0)return en.subVectors(a,o),r=(l-c)/(l-c+(h-p)),e.copy(o).addScaledVector(en,r);var y=1/(g+d+f);return n=d*y,r=f*y,e.copy(i).addScaledVector($e,n).addScaledVector(tn,r)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},un={h:0,s:0,l:0},cn={h:0,s:0,l:0};function ln(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function fn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function hn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function pn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function dn(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new $t,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ln,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(ln.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=Ut.euclideanModulo(t,1),e=Ut.clamp(e,0,1),n=Ut.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=fn(i,r,t+1/3),this.g=fn(i,r,t),this.b=fn(i,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=sn[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=hn(t.r),this.g=hn(t.g),this.b=hn(t.b),this},copyLinearToSRGB:function(t){return this.r=pn(t.r),this.g=pn(t.g),this.b=pn(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(un),un.h+=t,un.s+=e,un.l+=n,this.setHSL(un.h,un.s,un.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(un),t.getHSL(cn);var n=Ut.lerp(un.h,cn.h,e),r=Ut.lerp(un.s,cn.s,e),i=Ut.lerp(un.l,cn.l,e);return this.setHSL(n,r,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),ln.NAMES=sn,Object.assign(dn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var gn=0;function yn(){Object.defineProperty(this,"id",{value:gn++}),this.uuid=Ut.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=W,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jt,this.stencilZFail=jt,this.stencilZPass=jt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function vn(){}yn.prototype=Object.assign(Object.create(Dt.prototype),{constructor:yn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(yn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});var mn=new $t;function An(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Lt,this.updateRange={offset:0,count:-1},this.version=0}function bn(t,e,n){An.call(this,new Int8Array(t),e,n)}function _n(t,e,n){An.call(this,new Uint8Array(t),e,n)}function wn(t,e,n){An.call(this,new Uint8ClampedArray(t),e,n)}function xn(t,e,n){An.call(this,new Int16Array(t),e,n)}function En(t,e,n){An.call(this,new Uint16Array(t),e,n)}function On(t,e,n){An.call(this,new Int32Array(t),e,n)}function Sn(t,e,n){An.call(this,new Uint32Array(t),e,n)}function Tn(t,e,n){An.call(this,new Float32Array(t),e,n)}function Pn(t,e,n){An.call(this,new Float64Array(t),e,n)}function Mn(){}function Cn(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Object.defineProperty(An.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(An.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ln),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Gt),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new $t),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Xt),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){for(var e=0,n=this.count;e<n;e++)mn.x=this.getX(e),mn.y=this.getY(e),mn.z=this.getZ(e),mn.applyMatrix3(t),this.setXYZ(e,mn.x,mn.y,mn.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)mn.x=this.getX(e),mn.y=this.getY(e),mn.z=this.getZ(e),mn.applyMatrix4(t),this.setXYZ(e,mn.x,mn.y,mn.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)mn.x=this.getX(e),mn.y=this.getY(e),mn.z=this.getZ(e),mn.applyNormalMatrix(t),this.setXYZ(e,mn.x,mn.y,mn.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)mn.x=this.getX(e),mn.y=this.getY(e),mn.z=this.getZ(e),mn.transformDirection(t),this.setXYZ(e,mn.x,mn.y,mn.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),bn.prototype=Object.create(An.prototype),bn.prototype.constructor=bn,_n.prototype=Object.create(An.prototype),_n.prototype.constructor=_n,wn.prototype=Object.create(An.prototype),wn.prototype.constructor=wn,xn.prototype=Object.create(An.prototype),xn.prototype.constructor=xn,En.prototype=Object.create(An.prototype),En.prototype.constructor=En,On.prototype=Object.create(An.prototype),On.prototype.constructor=On,Sn.prototype=Object.create(An.prototype),Sn.prototype.constructor=Sn,Tn.prototype=Object.create(An.prototype),Tn.prototype.constructor=Tn,Pn.prototype=Object.create(An.prototype),Pn.prototype.constructor=Pn;var In=1,Rn=new se,kn=new Oe,jn=new $t,Ln=new ze,Nn=new ze,Dn=new $t;function Fn(){Object.defineProperty(this,"id",{value:In+=2}),this.uuid=Ut.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Fn.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Fn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Cn(t)>65535?Sn:En)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Vt).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Rn.makeRotationX(t),this.applyMatrix4(Rn),this},rotateY:function(t){return Rn.makeRotationY(t),this.applyMatrix4(Rn),this},rotateZ:function(t){return Rn.makeRotationZ(t),this.applyMatrix4(Rn),this},translate:function(t,e,n){return Rn.makeTranslation(t,e,n),this.applyMatrix4(Rn),this},scale:function(t,e,n){return Rn.makeScale(t,e,n),this.applyMatrix4(Rn),this},lookAt:function(t){return kn.lookAt(t),kn.updateMatrix(),this.applyMatrix4(kn.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(jn).negate(),this.translate(jn.x,jn.y,jn.z),this},setFromObject:function(t){var e=t.geometry;return t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e),this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Tn(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Mn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new An(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new An(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.setAttribute("color",new An(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new An(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new An(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,!1){for(var s=[],u=(!1)[a],c=0,l=u.length;c<l;c++){var f=u[c],h=new Tn(3*f.data.length,3);h.name=f.name,s.push(h.copyVector3sArray(f.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new Tn(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var d=new Tn(4*t.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ze);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Ln.setFromBufferAttribute(i),this.morphTargetsRelative?(Dn.addVectors(this.boundingBox.min,Ln.min),this.boundingBox.expandByPoint(Dn),Dn.addVectors(this.boundingBox.max,Ln.max),this.boundingBox.expandByPoint(Dn)):(this.boundingBox.expandByPoint(Ln.min),this.boundingBox.expandByPoint(Ln.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ve);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(Ln.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];Nn.setFromBufferAttribute(o),this.morphTargetsRelative?(Dn.addVectors(Ln.min,Nn.min),Ln.expandByPoint(Dn),Dn.addVectors(Ln.max,Nn.max),Ln.expandByPoint(Dn)):(Ln.expandByPoint(Nn.min),Ln.expandByPoint(Nn.max))}Ln.getCenter(n);var a=0;for(r=0,i=t.count;r<i;r++)Dn.fromBufferAttribute(t,r),a=Math.max(a,n.distanceToSquared(Dn));if(e)for(r=0,i=e.length;r<i;r++){o=e[r];for(var s=this.morphTargetsRelative,u=0,c=o.count;u<c;u++)Dn.fromBufferAttribute(o,u),s&&(jn.fromBufferAttribute(t,u),Dn.add(jn)),a=Math.max(a,n.distanceToSquared(Dn))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new An(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,c=e.normal.array,l=new $t,f=new $t,h=new $t,p=new $t,d=new $t;if(t){var g=t.array;for(i=0,o=t.count;i<o;i+=3)a=3*g[i+0],s=3*g[i+1],u=3*g[i+2],l.fromArray(n,a),f.fromArray(n,s),h.fromArray(n,u),p.subVectors(h,f),d.subVectors(l,f),p.cross(d),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)l.fromArray(n,i),f.fromArray(n,i+3),h.fromArray(n,i+6),p.subVectors(h,f),d.subVectors(l,f),p.cross(d),c[i]=p.x,c[i+1]=p.y,c[i+2]=p.z,c[i+3]=p.x,c[i+4]=p.y,c[i+5]=p.z,c[i+6]=p.x,c[i+7]=p.y,c[i+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,u=Math.min(a.length,i.length-s),c=0,l=s;c<u;c++,l++)i[l]=a[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Dn.x=t.getX(e),Dn.y=t.getY(e),Dn.z=t.getZ(e),Dn.normalize(),t.setXYZ(e,Dn.x,Dn.y,Dn.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),o=0,a=0,s=0,u=e.length;s<u;s++){o=e[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new An(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Fn,n=this.index.array,r=this.attributes;for(var i in r){var o=t(r[i],n);e.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],u=a[i],c=0,l=u.length;c<l;c++){o=t(u[c],n);s.push(o)}e.morphAttributes[i]=s}e.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,h=(c=0,f.length);c<h;c++){var p=f[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(h=i[n]).toJSON();""!==h.name&&(o.name=h.name),t.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],c=[],l=0,f=u.length;l<f;l++){var h;o=(h=u[l]).toJSON();""!==h.name&&(o.name=h.name),c.push(o)}c.length>0&&(a[n]=c,s=!0)}s&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(t.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),t},clone:function(){return(new Fn).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.setAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],c=s[e];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[e]=u}this.morphTargetsRelative=t.morphTargetsRelative;var l=t.groups;for(n=0,r=l.length;n<r;n++){var f=l[n];this.addGroup(f.start,f.count,f.materialIndex)}var h=t.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Bn=new se,zn=new qe,Un=new Ve,Gn=new $t,Vn=new $t,qn=new $t,Hn=(new $t,new $t,new $t,new $t,new $t,new $t,new Gt),Wn=new Gt,Xn=new Gt,Yn=new $t,Qn=new $t;function Zn(t,e){Oe.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Fn,this.material=void 0!==e?e:new vn,this.updateMorphTargets()}function Kn(t,e,n,r,i,o,a,s){if(null===(1===e.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==e.side,s)))return null;Qn.copy(s),Qn.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(Qn);return u<n.near||u>n.far?null:{distance:u,point:Qn.clone(),object:t}}function Jn(t,e,n,r,i,o,a,s,u,c,l,f){Gn.fromBufferAttribute(i,c),Vn.fromBufferAttribute(i,l),qn.fromBufferAttribute(i,f);t.morphTargetInfluences;var h=Kn(t,e,n,r,Gn,Vn,qn,Yn);if(h){s&&(Hn.fromBufferAttribute(s,c),Wn.fromBufferAttribute(s,l),Xn.fromBufferAttribute(s,f),h.uv=an.getUV(Yn,Gn,Vn,qn,Hn,Wn,Xn,new Gt)),u&&(Hn.fromBufferAttribute(u,c),Wn.fromBufferAttribute(u,l),Xn.fromBufferAttribute(u,f),h.uv2=an.getUV(Yn,Gn,Vn,qn,Hn,Wn,Xn,new Gt));var p=new dn(c,l,f);an.getNormal(Gn,Vn,qn,p.normal),h.face=p}return h}Zn.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Zn,isMesh:!0,copy:function(t){return Oe.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{false.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Un.copy(r.boundingSphere),Un.applyMatrix4(o),!1!==t.ray.intersectsSphere(Un)&&(Bn.getInverse(o),zn.copy(t.ray).applyMatrix4(Bn),null===r.boundingBox||!1!==zn.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a,s,u,c,l,f,h,p,d,g=r.index,y=r.attributes.position,v=r.morphAttributes.position,m=r.morphTargetsRelative,A=r.attributes.uv,b=r.attributes.uv2,_=r.groups,w=r.drawRange;if(null!==g)if(Array.isArray(i))for(c=0,f=_.length;c<f;c++)for(d=i[(p=_[c]).materialIndex],l=Math.max(p.start,w.start),h=Math.min(p.start+p.count,w.start+w.count);l<h;l+=3)a=g.getX(l),s=g.getX(l+1),u=g.getX(l+2),(n=Jn(this,d,t,zn,y,v,m,A,b,a,s,u))&&(n.faceIndex=Math.floor(l/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(c=Math.max(0,w.start),f=Math.min(g.count,w.start+w.count);c<f;c+=3)a=g.getX(c),s=g.getX(c+1),u=g.getX(c+2),(n=Jn(this,i,t,zn,y,v,m,A,b,a,s,u))&&(n.faceIndex=Math.floor(c/3),e.push(n));else if(void 0!==y)if(Array.isArray(i))for(c=0,f=_.length;c<f;c++)for(d=i[(p=_[c]).materialIndex],l=Math.max(p.start,w.start),h=Math.min(p.start+p.count,w.start+w.count);l<h;l+=3)(n=Jn(this,d,t,zn,y,v,m,A,b,a=l,s=l+1,u=l+2))&&(n.faceIndex=Math.floor(l/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(c=Math.max(0,w.start),f=Math.min(y.count,w.start+w.count);c<f;c+=3)(n=Jn(this,i,t,zn,y,v,m,A,b,a=c,s=c+1,u=c+2))&&(n.faceIndex=Math.floor(c/3),e.push(n))}else if(r.isGeometry){var x,E,O,S,T=Array.isArray(i),P=r.vertices,M=r.faces,C=r.faceVertexUvs[0];C.length>0&&(S=C);for(var I=0,R=M.length;I<R;I++){var k=M[I],j=T?i[k.materialIndex]:i;if(void 0!==j&&(x=P[k.a],E=P[k.b],O=P[k.c],n=Kn(this,j,t,zn,x,E,O,Yn))){if(S&&S[I]){var L=S[I];Hn.copy(L[0]),Wn.copy(L[1]),Xn.copy(L[2]),n.uv=an.getUV(Yn,x,E,O,Hn,Wn,Xn,new Gt)}n.face=k,n.faceIndex=I,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var $n=0,tr=new se,er=new Oe,nr=new $t;function rr(){Object.defineProperty(this,"id",{value:$n+=2}),this.uuid=Ut.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}rr.prototype=Object.assign(Object.create(Dt.prototype),{constructor:rr,isGeometry:!0,applyMatrix4:function(t){for(var e=(new Vt).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(t)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return tr.makeRotationX(t),this.applyMatrix4(tr),this},rotateY:function(t){return tr.makeRotationY(t),this.applyMatrix4(tr),this},rotateZ:function(t){return tr.makeRotationZ(t),this.applyMatrix4(tr),this},translate:function(t,e,n){return tr.makeTranslation(t,e,n),this.applyMatrix4(tr),this},scale:function(t,e,n){return tr.makeScale(t,e,n),this.applyMatrix4(tr),this},lookAt:function(t){return er.lookAt(t),er.updateMatrix(),this.applyMatrix4(er.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=0;c<i.length;c+=3)e.vertices.push((new $t).fromArray(i,c)),void 0!==a&&e.colors.push((new ln).fromArray(a,c));function l(t,n,r,i){var c=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],l=new dn(t,n,r,void 0===o?[]:[(new $t).fromArray(o,3*t),(new $t).fromArray(o,3*n),(new $t).fromArray(o,3*r)],c,i);e.faces.push(l),void 0!==s&&e.faceVertexUvs[0].push([(new Gt).fromArray(s,2*t),(new Gt).fromArray(s,2*n),(new Gt).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new Gt).fromArray(u,2*t),(new Gt).fromArray(u,2*n),(new Gt).fromArray(u,2*r)])}var f=t.groups;if(f.length>0)for(c=0;c<f.length;c++)for(var h=f[c],p=h.start,d=p,g=p+h.count;d<g;d+=3)void 0!==n?l(n[d],n[d+1],n[d+2],h.materialIndex):l(d,d+1,d+2,h.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)l(n[c],n[c+1],n[c+2]);else for(c=0;c<i.length/3;c+=3)l(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(nr).negate(),this.translate(nr.x,nr.y,nr.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new se;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var t=new $t,e=new $t,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new $t;if(t){var s,u,c,l=new $t,f=new $t;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],l.subVectors(c,u),f.subVectors(s,u),l.cross(f),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new rr;for(o.faces=this.faces,t=0,e=(!1).length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new $t,c={a:new $t,b:new $t,c:new $t},a.push(u),s.push(c)}var u,c,l=this.morphNormals[t];for(o.vertices=(!1)[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=l.faceNormals[n],c=l.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ze),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ve),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,c=this.colors,l=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new Vt).getNormalMatrix(e));for(var f=0,h=a.length;f<h;f++){var p=a[f].clone();void 0!==e&&p.applyMatrix4(e),o.push(p)}for(f=0,h=l.length;f<h;f++)c.push(l[f].clone());for(f=0,h=u.length;f<h;f++){var d,g,y,v=u[f],m=v.vertexNormals,A=v.vertexColors;(d=new dn(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(var b=0,_=m.length;b<_;b++)g=m[b].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),d.vertexNormals.push(g);d.color.copy(v.color);for(b=0,_=A.length;b<_;b++)y=A[b],d.vertexColors.push(y.clone());d.materialIndex=v.materialIndex+n,s.push(d)}for(f=0,h=t.faceVertexUvs.length;f<h;f++){var w=t.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);for(b=0,_=w.length;b<_;b++){for(var x=w[b],E=[],O=0,S=x.length;O<S;O++)E.push(x[O].clone());this.faceVertexUvs[f].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},c=[],l=[],f=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f)]?(u[e]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[e]];var h=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var d=h[n];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var g=this.vertices.length-c.length;return this.vertices=c,g},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new $t(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===e&&(r=[]),a&&a.length===e&&(i=[]);for(n=0;n<e;n++){var s=t[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],l={},f=[],h={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=void 0!==this.faceVertexUvs[0][i],g=p.normal.length()>0,y=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,m=p.vertexColors.length>0,A=0;if(A=x(A,0,0),A=x(A,1,!0),A=x(A,2,!1),A=x(A,3,d),A=x(A,4,g),A=x(A,5,y),A=x(A,6,v),A=x(A,7,m),a.push(A),a.push(p.a,p.b,p.c),a.push(p.materialIndex),d){var b=this.faceVertexUvs[0][i];a.push(S(b[0]),S(b[1]),S(b[2]))}if(g&&a.push(E(p.normal)),y){var _=p.vertexNormals;a.push(E(_[0]),E(_[1]),E(_[2]))}if(v&&a.push(O(p.color)),m){var w=p.vertexColors;a.push(O(w[0]),O(w[1]),O(w[2]))}}function x(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]||(u[e]=s.length/3,s.push(t.x,t.y,t.z)),u[e]}function O(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]||(l[e]=c.length,c.push(t.getHex())),l[e]}function S(t){var e=t.x.toString()+t.y.toString();return void 0!==h[e]||(h[e]=f.length/2,f.push(t.x,t.y)),h[e]}return t.data={},t.data.vertices=r,t.data.normals=s,c.length>0&&(t.data.colors=c),f.length>0&&(t.data.uvs=[f]),t.data.faces=a,t},clone:function(){return(new rr).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=l.length;r<i;r++){var f=l[r],h=[];for(o=0,a=f.length;o<a;o++){var p=f[o];h.push(p.clone())}this.faceVertexUvs[e].push(h)}}var d=!1;for(e=0,n=d.length;e<n;e++){var g={};if(g.name=d[e].name,void 0!==d[e].vertices)for(g.vertices=[],r=0,i=d[e].vertices.length;r<i;r++)g.vertices.push(d[e].vertices[r].clone());if(void 0!==d[e].normals)for(g.normals=[],r=0,i=d[e].normals.length;r<i;r++)g.normals.push(d[e].normals[r].clone());(!1).push(g)}var y=t.morphNormals;for(e=0,n=y.length;e<n;e++){var v={};if(void 0!==y[e].vertexNormals)for(v.vertexNormals=[],r=0,i=y[e].vertexNormals.length;r<i;r++){var m=y[e].vertexNormals[r],A={};A.a=m.a.clone(),A.b=m.b.clone(),A.c=m.c.clone(),v.vertexNormals.push(A)}if(void 0!==y[e].faceNormals)for(v.faceNormals=[],r=0,i=y[e].faceNormals.length;r<i;r++)v.faceNormals.push(y[e].faceNormals[r].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var _=t.skinIndices;for(e=0,n=_.length;e<n;e++)this.skinIndices.push(_[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var x=t.boundingBox;null!==x&&(this.boundingBox=x.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ir=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t,r,i,o,a,s){var u;return Object(f.a)(this,n),(u=e.call(this)).type="BoxGeometry",u.parameters={width:t,height:r,depth:i,widthSegments:o,heightSegments:a,depthSegments:s},u.fromBufferGeometry(new or(t,r,i,o,a,s)),u.mergeVertices(),u}return n}(rr),or=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t,r,i,o,a,s){var u;Object(f.a)(this,n),(u=e.call(this)).type="BoxBufferGeometry",u.parameters={width:t,height:r,depth:i,widthSegments:o,heightSegments:a,depthSegments:s};var c=Object(l.a)(u);t=t||1,r=r||1,i=i||1,o=Math.floor(o)||1,a=Math.floor(a)||1,s=Math.floor(s)||1;var h=[],p=[],d=[],g=[],y=0,v=0;function m(t,e,n,r,i,o,a,s,u,l,f){var m,A,b=o/u,_=a/l,w=o/2,x=a/2,E=s/2,O=u+1,S=l+1,T=0,P=0,M=new $t;for(A=0;A<S;A++){var C=A*_-x;for(m=0;m<O;m++){var I=m*b-w;M[t]=I*r,M[e]=C*i,M[n]=E,p.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[n]=s>0?1:-1,d.push(M.x,M.y,M.z),g.push(m/u),g.push(1-A/l),T+=1}}for(A=0;A<l;A++)for(m=0;m<u;m++){var R=y+m+O*A,k=y+m+O*(A+1),j=y+(m+1)+O*(A+1),L=y+(m+1)+O*A;h.push(R,k,L),h.push(k,j,L),P+=6}c.addGroup(v,P,f),v+=P,y+=T}return m("z","y","x",-1,-1,i,r,t,s,a,0),m("z","y","x",1,-1,i,r,-t,s,a,1),m("x","z","y",1,1,t,i,r,o,s,2),m("x","z","y",1,-1,t,i,-r,o,s,3),m("x","y","z",1,-1,t,r,i,o,a,4),m("x","y","z",-1,-1,t,r,-i,o,a,5),u.setIndex(h),u.setAttribute("position",new Tn(p,3)),u.setAttribute("normal",new Tn(d,3)),u.setAttribute("uv",new Tn(g,2)),u}return n}(Fn);function ar(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function sr(t){for(var e={},n=0;n<t.length;n++){var r=ar(t[n]);for(var i in r)e[i]=r[i]}return e}var ur={clone:ar,merge:sr};function cr(t){yn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="",this.fragmentShader="",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function lr(){Oe.call(this),this.type="Camera",this.matrixWorldInverse=new se,this.projectionMatrix=new se,this.projectionMatrixInverse=new se}function fr(t,e,n,r){lr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}cr.prototype=Object.create(yn.prototype),cr.prototype.constructor=cr,cr.prototype.isShaderMaterial=!0,cr.prototype.copy=function(t){return yn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ar(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},cr.prototype.toJSON=function(t){var e=yn.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},lr.prototype=Object.assign(Object.create(Oe.prototype),{constructor:lr,isCamera:!0,copy:function(t,e){return Oe.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new $t),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Oe.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Oe.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),fr.prototype=Object.assign(Object.create(lr.prototype),{constructor:fr,isPerspectiveCamera:!0,copy:function(t,e){return lr.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Ut.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Ut.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Ut.RAD2DEG*Math.atan(Math.tan(.5*Ut.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Ut.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Oe.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var hr=90;function pr(t,e,n,r){Oe.call(this),this.type="CubeCamera";var i=new fr(hr,1,t,e);i.up.set(0,-1,0),i.lookAt(new $t(1,0,0)),this.add(i);var o=new fr(hr,1,t,e);o.up.set(0,-1,0),o.lookAt(new $t(-1,0,0)),this.add(o);var a=new fr(hr,1,t,e);a.up.set(0,0,1),a.lookAt(new $t(0,1,0)),this.add(a);var s=new fr(hr,1,t,e);s.up.set(0,0,-1),s.lookAt(new $t(0,-1,0)),this.add(s);var u=new fr(hr,1,t,e);u.up.set(0,-1,0),u.lookAt(new $t(0,0,1)),this.add(u);var c=new fr(hr,1,t,e);c.up.set(0,-1,0),c.lookAt(new $t(0,0,-1)),this.add(c),r=r||{format:lt,magFilter:et,minFilter:et},this.renderTarget=new dr(n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,o),t.setRenderTarget(r,2),t.render(e,a),t.setRenderTarget(r,3),t.render(e,s),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=l,t.setRenderTarget(r,5),t.render(e,c),t.setRenderTarget(n)},this.clear=function(t,e,n,r){for(var i=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,r);t.setRenderTarget(i)}}function dr(){}function gr(t,e,n,r,i,o,a,s,u,c,l,f){Wt.call(this,null,o,a,s,u,c,r,i,l,f),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==u?u:J,this.minFilter=void 0!==c?c:J,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}pr.prototype=Object.create(Oe.prototype),pr.prototype.constructor=pr,gr.prototype=Object.create(Wt.prototype),gr.prototype.constructor=gr,gr.prototype.isDataTexture=!0;var yr=new Ve,vr=new $t;function mr(t,e,n,r,i,o){this.planes=[void 0!==t?t:new Ye,void 0!==e?e:new Ye,void 0!==n?n:new Ye,void 0!==r?r:new Ye,void 0!==i?i:new Ye,void 0!==o?o:new Ye]}Object.assign(mr.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],g=n[12],y=n[13],v=n[14],m=n[15];return e[0].setComponents(a-r,l-s,d-f,m-g).normalize(),e[1].setComponents(a+r,l+s,d+f,m+g).normalize(),e[2].setComponents(a+i,l+u,d+h,m+y).normalize(),e[3].setComponents(a-i,l-u,d-h,m-y).normalize(),e[4].setComponents(a-o,l-c,d-p,m-v).normalize(),e[5].setComponents(a+o,l+c,d+p,m+v).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),yr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(yr)},intersectsSprite:function(t){return yr.center.set(0,0,0),yr.radius=.7071067811865476,yr.applyMatrix4(t.matrixWorld),this.intersectsSphere(yr)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(vr.x=r.normal.x>0?t.max.x:t.min.x,vr.y=r.normal.y>0?t.max.y:t.min.y,vr.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(vr)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Ar={common:{diffuse:{value:new ln(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Vt},uv2Transform:{value:new Vt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ln(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ln(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new ln(15658734)},opacity:{value:1},center:{value:new Gt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Vt}}};function br(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function _r(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var o=r.get(e);void 0===o?r.set(e,function(e,n){var r=e.array,i=e.usage,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){var o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,e,i),o.version=e.version)}}}function wr(){}function xr(t,e,n,r){Fn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,o,a=(t=t||1)/2,s=(e=e||1)/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,f=c+1,h=t/u,p=e/c,d=[],g=[],y=[],v=[];for(o=0;o<f;o++){var m=o*p-s;for(i=0;i<l;i++){var A=i*h-a;g.push(A,-m,0),y.push(0,0,1),v.push(i/u),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var b=i+l*o,_=i+l*(o+1),w=i+1+l*(o+1),x=i+1+l*o;d.push(b,_,x),d.push(_,w,x)}this.setIndex(d),this.setAttribute("position",new Tn(g,3)),this.setAttribute("normal",new Tn(y,3)),this.setAttribute("uv",new Tn(v,2))}xr.prototype=Object.create(Fn.prototype),xr.prototype.constructor=xr;var Er={alphamap_fragment:"",alphamap_pars_fragment:"",alphatest_fragment:"",aomap_fragment:"",aomap_pars_fragment:"",begin_vertex:"",beginnormal_vertex:"",bsdfs:"",bumpmap_pars_fragment:"",clipping_planes_fragment:"",clipping_planes_pars_fragment:"",clipping_planes_pars_vertex:"",clipping_planes_vertex:"",color_fragment:"",color_pars_fragment:"",color_pars_vertex:"",color_vertex:"",common:"",cube_uv_reflection_fragment:"",defaultnormal_vertex:"",displacementmap_pars_vertex:"",displacementmap_vertex:"",emissivemap_fragment:"",emissivemap_pars_fragment:"",encodings_fragment:"",encodings_pars_fragment:"",envmap_fragment:"",envmap_common_pars_fragment:"",envmap_pars_fragment:"",envmap_pars_vertex:"",envmap_physical_pars_fragment:"",envmap_vertex:"",fog_vertex:"",fog_pars_vertex:"",fog_fragment:"",fog_pars_fragment:"",gradientmap_pars_fragment:"",lightmap_fragment:"",lightmap_pars_fragment:"",lights_lambert_vertex:"",lights_pars_begin:"",lights_toon_fragment:"",lights_toon_pars_fragment:"",lights_phong_fragment:"",lights_phong_pars_fragment:"",lights_physical_fragment:"",lights_physical_pars_fragment:"",lights_fragment_begin:"",lights_fragment_maps:"",lights_fragment_end:"",logdepthbuf_fragment:"",logdepthbuf_pars_fragment:"",logdepthbuf_pars_vertex:"",logdepthbuf_vertex:"",map_fragment:"",map_pars_fragment:"",map_particle_fragment:"",map_particle_pars_fragment:"",metalnessmap_fragment:"",metalnessmap_pars_fragment:"",morphnormal_vertex:"",morphtarget_pars_vertex:"",morphtarget_vertex:"",normal_fragment_begin:"",normal_fragment_maps:"",normalmap_pars_fragment:"",clearcoat_normal_fragment_begin:"",clearcoat_normal_fragment_maps:"",clearcoat_normalmap_pars_fragment:"",packing:"",premultiplied_alpha_fragment:"",project_vertex:"",dithering_fragment:"",dithering_pars_fragment:"",roughnessmap_fragment:"",roughnessmap_pars_fragment:"",shadowmap_pars_fragment:"",shadowmap_pars_vertex:"",shadowmap_vertex:"",shadowmask_pars_fragment:"",skinbase_vertex:"",skinning_pars_vertex:"",skinning_vertex:"",skinnormal_vertex:"",specularmap_fragment:"",specularmap_pars_fragment:"",tonemapping_fragment:"",tonemapping_pars_fragment:"",uv_pars_fragment:"",uv_pars_vertex:"",uv_vertex:"",uv2_pars_fragment:"",uv2_pars_vertex:"",uv2_vertex:"",worldpos_vertex:"",background_frag:"",background_vert:"",cube_frag:"",cube_vert:"",depth_frag:"",depth_vert:"",distanceRGBA_frag:"",distanceRGBA_vert:"",equirect_frag:"",equirect_vert:"",linedashed_frag:"",linedashed_vert:"",meshbasic_frag:"",meshbasic_vert:"",meshlambert_frag:"",meshlambert_vert:"",meshmatcap_frag:"",meshmatcap_vert:"",meshtoon_frag:"",meshtoon_vert:"",meshphong_frag:"",meshphong_vert:"",meshphysical_frag:"",meshphysical_vert:"",normal_frag:"",normal_vert:"",points_frag:"",points_vert:"",shadow_frag:"",shadow_vert:"",sprite_frag:"",sprite_vert:""},Or={basic:{uniforms:sr([Ar.common,Ar.specularmap,Ar.envmap,Ar.aomap,Ar.lightmap,Ar.fog]),vertexShader:Er.meshbasic_vert,fragmentShader:Er.meshbasic_frag},lambert:{uniforms:sr([Ar.common,Ar.specularmap,Ar.envmap,Ar.aomap,Ar.lightmap,Ar.emissivemap,Ar.fog,Ar.lights,{emissive:{value:new ln(0)}}]),vertexShader:Er.meshlambert_vert,fragmentShader:Er.meshlambert_frag},phong:{uniforms:sr([Ar.common,Ar.specularmap,Ar.envmap,Ar.aomap,Ar.lightmap,Ar.emissivemap,Ar.bumpmap,Ar.normalmap,Ar.displacementmap,Ar.fog,Ar.lights,{emissive:{value:new ln(0)},specular:{value:new ln(1118481)},shininess:{value:30}}]),vertexShader:Er.meshphong_vert,fragmentShader:Er.meshphong_frag},standard:{uniforms:sr([Ar.common,Ar.envmap,Ar.aomap,Ar.lightmap,Ar.emissivemap,Ar.bumpmap,Ar.normalmap,Ar.displacementmap,Ar.roughnessmap,Ar.metalnessmap,Ar.fog,Ar.lights,{emissive:{value:new ln(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Er.meshphysical_vert,fragmentShader:Er.meshphysical_frag},toon:{uniforms:sr([Ar.common,Ar.specularmap,Ar.aomap,Ar.lightmap,Ar.emissivemap,Ar.bumpmap,Ar.normalmap,Ar.displacementmap,Ar.gradientmap,Ar.fog,Ar.lights,{emissive:{value:new ln(0)},specular:{value:new ln(1118481)},shininess:{value:30}}]),vertexShader:Er.meshtoon_vert,fragmentShader:Er.meshtoon_frag},matcap:{uniforms:sr([Ar.common,Ar.bumpmap,Ar.normalmap,Ar.displacementmap,Ar.fog,{matcap:{value:null}}]),vertexShader:Er.meshmatcap_vert,fragmentShader:Er.meshmatcap_frag},points:{uniforms:sr([Ar.points,Ar.fog]),vertexShader:Er.points_vert,fragmentShader:Er.points_frag},dashed:{uniforms:sr([Ar.common,Ar.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Er.linedashed_vert,fragmentShader:Er.linedashed_frag},depth:{uniforms:sr([Ar.common,Ar.displacementmap]),vertexShader:Er.depth_vert,fragmentShader:Er.depth_frag},normal:{uniforms:sr([Ar.common,Ar.bumpmap,Ar.normalmap,Ar.displacementmap,{opacity:{value:1}}]),vertexShader:Er.normal_vert,fragmentShader:Er.normal_frag},sprite:{uniforms:sr([Ar.sprite,Ar.fog]),vertexShader:Er.sprite_vert,fragmentShader:Er.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null}},vertexShader:Er.background_vert,fragmentShader:Er.background_frag},cube:{uniforms:sr([Ar.envmap,{opacity:{value:1}}]),vertexShader:Er.cube_vert,fragmentShader:Er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Er.equirect_vert,fragmentShader:Er.equirect_frag},distanceRGBA:{uniforms:sr([Ar.common,Ar.displacementmap,{referencePosition:{value:new $t},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Er.distanceRGBA_vert,fragmentShader:Er.distanceRGBA_frag},shadow:{uniforms:sr([Ar.lights,Ar.fog,{color:{value:new ln(0)},opacity:{value:1}}]),vertexShader:Er.shadow_vert,fragmentShader:Er.shadow_frag}};function Sr(t,e,n,r){var i,o,a=new ln(0),s=0,u=null,c=0,l=null;function f(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),f(a,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){f(a,s=t)},render:function(e,r,h,p){var d=r.background,g=t.xr,y=g.getSession&&g.getSession();if(y&&"additive"===y.environmentBlendMode&&(d=null),null===d?f(a,s):d&&d.isColor&&(f(d,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&d.mapping===Y){void 0===o&&((o=new Zn(new or(1,1,1),new cr({type:"BackgroundCubeMaterial",uniforms:ar(Or.cube.uniforms),vertexShader:Or.cube.vertexShader,fragmentShader:Or.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return(!1).value}}),n.update(o));var v=d;(!1).value=v,o.material.uniforms.flipEnvMap.value=1,u===d&&c===v.version&&l===t.toneMapping||(o.material.needsUpdate=!0,u=d,c=v.version,l=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new Zn(new xr(2,2),new cr({type:"BackgroundMaterial",uniforms:ar(Or.background.uniforms),vertexShader:Or.background.vertexShader,fragmentShader:Or.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),u===d&&c===d.version&&l===t.toneMapping||(i.material.needsUpdate=!0,u=d,c=d.version,l=t.toneMapping),e.unshift(i,i.geometry,i.material,0,0,null))}}}function Tr(t,e,n,r){var i,o=r.isWebGL2;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(r,a,s,u){if(0!==u){var c,l;if(o)c=t,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](i,a,s,u),n.update(s,i,u)}}}function Pr(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),l=t.getParameter(35660),f=t.getParameter(3379),h=t.getParameter(34076),p=t.getParameter(34921),d=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),v=l>0,m=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:f,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:d,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:m,floatVertexTextures:v&&m,maxSamples:o?t.getParameter(36183):0}}function Mr(){var t=this,e=null,n=0,r=!1,i=!1,o=new Ye,a=new Vt,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,r,i){var u=null!==e?e.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var l=r+4*u,f=n.matrixWorldInverse;a.getNormalMatrix(f),(null===c||c.length<l)&&(c=new Float32Array(l));for(var h=0,p=r;h!==u;++h,p+=4)o.copy(e[h]).applyMatrix4(f,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return t.numPlanes=u,t.numIntersection=0,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=c(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,l,f,h){if(!r||null===t||0===t.length||i&&!a)i?c(null):u();else{var p=i?0:n,d=4*p,g=f.clippingState||null;s.value=g,g=c(t,l,d,h);for(var y=0;y!==d;++y)g[y]=e[y];f.clippingState=g,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Cr(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function Ir(t,e,n){var r=new WeakMap,i=new WeakMap;function o(t){var a=t.target,s=r.get(a);for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),r.delete(a);var c=i.get(s);c&&(e.remove(c),i.delete(s)),n.memory.geometries--}function a(t){var n=[],r=t.index,o=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],f=s[u+1],h=s[u+2];n.push(l,f,f,h,h,l)}}else{s=o.array;a=o.version;for(u=0,c=s.length/3-1;u<c;u+=3){l=u+0,f=u+1,h=u+2;n.push(l,f,f,h,h,l)}}var p=new(Cn(n)>65535?Sn:En)(n,1);p.version=a,e.update(p,34963);var d=i.get(t);d&&e.remove(d),i.set(t,p)}return{get:function(t,e){var i=r.get(e);return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Fn).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)},update:function(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var o=t.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var e=i.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return i.get(t)}}}function Rr(t,e,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)},this.renderInstances=function(r,u,c,l){if(0!==l){var f,h;if(s)f=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(f=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[h](i,c,o,u*a,l),n.update(c,i,l)}}}function kr(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(r=r||1,e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function jr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Lr(t){var e={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=void 0===s?0:s.length,c=e[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];e[i.id]=c}var f=!1,h=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<u;l++){0!==(d=c[l])[1]&&h&&i.deleteAttribute("morphNormal"+l)}for(l=0;l<u;l++){(d=c[l])[0]=l,d[1]=s[l]}c.sort(jr);var p=0;for(l=0;l<8;l++){var d;if(d=c[l]){var g=d[0],y=d[1];if(y){f,h&&i.setAttribute("morphNormal"+l,h[g]),n[l]=y,p+=y;continue}}n[l]=0}var v=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(t,"morphTargetBaseInfluence",v),a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Nr(t,e,n,r){var i=new WeakMap;return{update:function(t){var n=r.render.frame,o=t.geometry,a=e.get(t,o);return i.get(a)!==n&&(o.isGeometry&&a.updateFromObject(t),e.update(a),i.set(a,n)),a},dispose:function(){i=new WeakMap}}}function Dr(){}function Fr(){}function Br(){}Object.defineProperty(Dr.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var zr=new Wt,Ur=new Fr,Gr=new Br,Vr=new Dr,qr=[],Hr=[],Wr=new Float32Array(16),Xr=new Float32Array(9),Yr=new Float32Array(4);function Qr(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=qr[i];if(void 0===o&&(o=new Float32Array(i),qr[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function Zr(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Kr(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Jr(t,e){var n=Hr[e];void 0===n&&(n=new Int32Array(e),Hr[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function $r(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ti(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Zr(n,e))return;t.uniform2fv(this.addr,e),Kr(n,e)}}function ei(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Zr(n,e))return;t.uniform3fv(this.addr,e),Kr(n,e)}}function ni(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Zr(n,e))return;t.uniform4fv(this.addr,e),Kr(n,e)}}function ri(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Zr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Kr(n,e)}else{if(Zr(n,r))return;Yr.set(r),t.uniformMatrix2fv(this.addr,!1,Yr),Kr(n,r)}}function ii(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Zr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Kr(n,e)}else{if(Zr(n,r))return;Xr.set(r),t.uniformMatrix3fv(this.addr,!1,Xr),Kr(n,r)}}function oi(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Zr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Kr(n,e)}else{if(Zr(n,r))return;Wr.set(r),t.uniformMatrix4fv(this.addr,!1,Wr),Kr(n,r)}}function ai(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||zr,i)}function si(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ur,i)}function ui(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Gr,i)}function ci(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Vr,i)}function li(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function fi(t,e){var n=this.cache;Zr(n,e)||(t.uniform2iv(this.addr,e),Kr(n,e))}function hi(t,e){var n=this.cache;Zr(n,e)||(t.uniform3iv(this.addr,e),Kr(n,e))}function pi(t,e){var n=this.cache;Zr(n,e)||(t.uniform4iv(this.addr,e),Kr(n,e))}function di(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function gi(t,e){t.uniform1fv(this.addr,e)}function yi(t,e){t.uniform1iv(this.addr,e)}function vi(t,e){t.uniform2iv(this.addr,e)}function mi(t,e){t.uniform3iv(this.addr,e)}function Ai(t,e){t.uniform4iv(this.addr,e)}function bi(t,e){var n=Qr(e,this.size,2);t.uniform2fv(this.addr,n)}function _i(t,e){var n=Qr(e,this.size,3);t.uniform3fv(this.addr,n)}function wi(t,e){var n=Qr(e,this.size,4);t.uniform4fv(this.addr,n)}function xi(t,e){var n=Qr(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ei(t,e){var n=Qr(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Oi(t,e){var n=Qr(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Si(t,e,n){var r=e.length,i=Jr(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||zr,i[o])}function Ti(t,e,n){var r=e.length,i=Jr(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||Vr,i[o])}function Pi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return $r;case 35664:return ti;case 35665:return ei;case 35666:return ni;case 35674:return ri;case 35675:return ii;case 35676:return oi;case 5124:case 35670:return li;case 35667:case 35671:return fi;case 35668:case 35672:return hi;case 35669:case 35673:return pi;case 5125:return di;case 35678:case 36198:case 36298:case 36306:case 35682:return ai;case 35679:case 36299:case 36307:return ui;case 35680:case 36300:case 36308:case 36293:return ci;case 36289:case 36303:case 36311:case 36292:return si}}(e.type)}function Mi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return gi;case 35664:return bi;case 35665:return _i;case 35666:return wi;case 35674:return xi;case 35675:return Ei;case 35676:return Oi;case 5124:case 35670:return yi;case 35667:case 35671:return vi;case 35668:case 35672:return mi;case 35669:case 35673:return Ai;case 35678:case 36198:case 36298:case 36306:case 35682:return Si;case 35680:case 36300:case 36308:case 36293:return Ti}}(e.type)}function Ci(t){this.id=t,this.seq=[],this.map={}}Mi.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Kr(e,t)},Ci.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var Ii=/([\w\d_]+)(\])?(\[|\.)?/g;function Ri(t,e){t.seq.push(e),t.map[e.id]=e}function ki(t,e,n){var r=t.name,i=r.length;for(Ii.lastIndex=0;;){var o=Ii.exec(r),a=Ii.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Ri(n,void 0===c?new Pi(s,t,e):new Mi(s,t,e));break}var l=n.map[s];void 0===l&&Ri(n,l=new Ci(s)),n=l}}function ji(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);ki(i,t.getUniformLocation(e,i.name),this)}}function Li(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}ji.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},ji.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},ji.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},ji.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Ni=0;function Di(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function Fi(t){return""!==t}function Bi(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Ui=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gi(t){return t.replace(Ui,Vi)}function Vi(t,e){var n=Er[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Gi(n)}var qi=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function Hi(t){return t.replace(qi,Wi)}function Wi(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Xi(t,e,n){var r,i,o=t.getContext(),a=n.defines,s=n.vertexShader,u=n.fragmentShader,c=(t.gammaFactor>0&&t.gammaFactor,n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",t.extensionShaderTextureLOD&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fi).join("\n")}(n)),l=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(a),f=o.createProgram();(r=[l].filter(Fi).join("\n")).length>0&&(r+="\n"),(i=[c,l].filter(Fi).join("\n")).length>0&&(i+="\n"),s=zi(s=Bi(s=Gi(s),n),n),u=zi(u=Bi(u=Gi(u),n),n),s=Hi(s),u=Hi(u),n.isWebGL2;var h,p,d=i+u,g=Li(o,35633,r+s),y=Li(o,35632,d);if(o.attachShader(f,g),o.attachShader(f,y),void 0!==n.index0AttributeName&&o.bindAttribLocation(f,0,n.index0AttributeName),o.linkProgram(f),t.debug.checkShaderErrors){var v=o.getProgramInfoLog(f).trim(),m=o.getShaderInfoLog(g).trim(),A=o.getShaderInfoLog(y).trim(),b=!0,_=!0;if(!1===o.getProgramParameter(f,35714)){b=!1;var w=Di(o,g,"vertex"),x=Di(o,y,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(f,35715),"gl.getProgramInfoLog",v,w,x)}else""!==v?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",v):""!==m&&""!==A||(_=!1);_&&(this.diagnostics={runnable:b,programLog:v,vertexShader:{log:m,prefix:r},fragmentShader:{log:A,prefix:i}})}return o.detachShader(f,g),o.detachShader(f,y),o.deleteShader(g),o.deleteShader(y),this.getUniforms=function(){return void 0===h&&(h=new ji(o,f)),h},this.getAttributes=function(){return void 0===p&&(p=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(o,f)),p},this.destroy=function(){o.deleteProgram(f),this.program=void 0},this.name=n.shaderName,this.id=Ni++,this.cacheKey=e,this.usedTimes=1,this.program=f,this.vertexShader=g,this.fragmentShader=y,this}function Yi(t,e,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,u=(n.maxVertexUniforms,n.vertexTextures),c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function l(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Tt,e}this.getParameters=function(r,f,h,p,d,g,y){var v=p.fog,m=null,A=c[r.type];null!==r.precision&&(s=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",s,"instead.");var b=function(t,e){var n;if(e){var r=Or[e];n={name:t.type,uniforms:ur.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}}else n={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};return n}(r,A);r.onBeforeCompile(b,t);var _=t.getRenderTarget();return{isWebGL2:i,shaderID:A,shaderName:b.name,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,defines:r.defines,isRawShaderMaterial:!0,isShaderMaterial:!0,precision:s,instancing:!1,supportsVertexTextures:u,outputEncoding:null!==_?l(_.texture):t.outputEncoding,map:!!r.map,mapEncoding:l(r.map),matcap:!!r.matcap,matcapEncoding:l(r.matcap),envMap:!1,envMapMode:m,envMapEncoding:l(m),envMapCubeUV:!1,lightMap:!!r.lightMap,lightMapEncoding:l(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:l(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!r.map||!!r.bumpMap||!!r.normalMap||!!r.specularMap||!!r.alphaMap||!!r.emissiveMap||!!r.roughnessMap||!!r.metalnessMap||!!r.clearcoatNormalMap||!!r.displacementMap,uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap)&&!!r.displacementMap,fog:!!v,useFog:r.fog,fogExp2:v&&v.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&!1,maxBones:0,useVertexTexture:a,morphTargets:!1,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numRectAreaLights:f.rectArea.length,numHemiLights:f.hemi.length,numDirLightShadows:f.directionalShadowMap.length,numPointLightShadows:f.pointShadowMap.length,numSpotLightShadows:f.spotShadowMap.length,numClippingPlanes:d,numClipIntersection:g,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawbuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==e.get("EXT_shader_texture_lod"),onBeforeCompile:r.onBeforeCompile}},this.getProgramCacheKey=function(t){var e=[];if(t.shaderID?e.push(t.shaderID):(e.push(t.fragmentShader),e.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)e.push(n),e.push(t.defines[n]);return e.push(t.onBeforeCompile.toString()),e.join()},this.acquireProgram=function(e,n){for(var i,o=0,a=r.length;o<a;o++){var s=r[o];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new Xi(t,n,e),r.push(i)),i},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function Qi(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Zi(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ki(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ji(){var t=[],e=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,u){var c=t[e];return void 0===c?(c={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},t[e]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=o,c.program=o.program||i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),e++,c}return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(t,e,i,a,s,u){var c=o(t,e,i,a,s,u);(!0===i.transparent?r:n).push(c)},unshift:function(t,e,i,a,s,u){var c=o(t,e,i,a,s,u);(!0===i.transparent?r:n).unshift(c)},finish:function(){for(var n=e,r=t.length;n<r;n++){var i=t[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Zi),r.length>1&&r.sort(e||Ki)}}}function $i(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}return{get:function(n,r){var i,o=t.get(n);return void 0===o?(i=new Ji,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):void 0===(i=o.get(r))&&(i=new Ji,o.set(r,i)),i},dispose:function(){t=new WeakMap}}}function to(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new $t,color:new ln};break;case"SpotLight":n={position:new $t,direction:new $t,color:new ln,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new $t,color:new ln,distance:0,decay:0};break;case"HemisphereLight":n={direction:new $t,skyColor:new ln,groundColor:new ln};break;case"RectAreaLight":n={color:new ln,position:new $t,halfWidth:new $t,halfHeight:new $t}}return t[e.id]=n,n}}}var eo=0;function no(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ro(){new to,function(){var t={}}();for(var t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},e=0;e<9;e++)t.probe.push(new $t);new $t,new se,new se;return{setup:function(e,n,r){for(var i=0;i<9;i++)t.probe[i].set(0,0,0);r.matrixWorldInverse,e.sort(no),i=0;for(var o=e.length;i<o;i++){var a=e[i];a.color,a.intensity,a.distance,a.shadow&&a.shadow.map&&a.shadow.map.texture}t.ambient[0]=0,t.ambient[1]=0,t.ambient[2]=0;var s=t.hash;0===s.directionalLength&&0===s.pointLength&&0===s.spotLength&&0===s.rectAreaLength&&0===s.hemiLength&&0===s.numDirectionalShadows&&0===s.numPointShadows&&0===s.numSpotShadows||(t.directional.length=0,t.spot.length=0,t.rectArea.length=0,t.point.length=0,t.hemi.length=0,t.directionalShadow.length=0,t.directionalShadowMap.length=0,t.pointShadow.length=0,t.pointShadowMap.length=0,t.spotShadow.length=0,t.spotShadowMap.length=0,t.directionalShadowMatrix.length=0,t.pointShadowMatrix.length=0,t.spotShadowMatrix.length=0,s.directionalLength=0,s.pointLength=0,s.spotLength=0,s.rectAreaLength=0,s.hemiLength=0,s.numDirectionalShadows=0,s.numPointShadows=0,s.numSpotShadows=0,t.version=eo++)},state:t}}function io(){var t=new ro,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function oo(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}return{get:function(n,r){var i;return!1===t.has(n)?(i=new io,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):!1===t.get(n).has(r)?(i=new io,t.get(n).set(r,i)):i=t.get(n).get(r),i},dispose:function(){t=new WeakMap}}}function ao(t){yn.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function so(){}ao.prototype=Object.create(yn.prototype),ao.prototype.constructor=ao,ao.prototype.isMeshDepthMaterial=!0,ao.prototype.copy=function(t){return yn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this};function uo(){this.render=function(){}}function co(t,e,n){var r,i,o=n.isWebGL2;var a=new function(){var e=!1,n=new Xt,r=null,i=new Xt(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?U(2929):G(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},u=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(t){e||(t?U(2960):G(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}},l=t.getParameter(34921),f=new Uint8Array(l),h=new Uint8Array(l),p=new Uint8Array(l),d={},g=null,y=null,v=null,m=null,A=null,b=null,_=null,w=null,x=null,E=!1,O=null,S=null,T=null,P=null,M=null,C=t.getParameter(35661),I=!1,R=0,k=t.getParameter(7938);-1!==k.indexOf("WebGL")?(R=parseFloat(/^WebGL\ ([0-9])/.exec(k)[1]),I=R>=1):-1!==k.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(k)[1]),I=R>=2);var j=null,L={},N=new Xt,D=new Xt;function F(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var B={};function z(n,r){(f[n]=1,0===h[n]&&(t.enableVertexAttribArray(n),h[n]=1),p[n]!==r)&&((o?t:e.get("ANGLE_instanced_arrays"))[o?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),p[n]=r)}function U(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function G(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}B[3553]=F(3553,3553,1),B[34067]=F(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),u.setClear(0),U(2929),s.setFunc(3),Y(!1),Q(1),U(2884),X(0);var V=(r={},Object(c.a)(r,W,32774),Object(c.a)(r,101,32778),Object(c.a)(r,102,32779),r);if(o)V[103]=32775,V[104]=32776;else{var q=e.get("EXT_blend_minmax");null!==q&&(V[103]=q.MIN_EXT,V[104]=q.MAX_EXT)}var H=(i={},Object(c.a)(i,200,0),Object(c.a)(i,201,1),Object(c.a)(i,202,768),Object(c.a)(i,204,770),Object(c.a)(i,210,776),Object(c.a)(i,208,774),Object(c.a)(i,206,772),Object(c.a)(i,203,769),Object(c.a)(i,205,771),Object(c.a)(i,209,775),Object(c.a)(i,207,773),i);function X(e,n,r,i,o,a,s,u){if(0!==e){if(y||(U(3042),y=!0),5===e)o=o||n,a=a||r,s=s||i,n===m&&o===_||(t.blendEquationSeparate(V[n],V[o]),m=n,_=o),r===A&&i===b&&a===w&&s===x||(t.blendFuncSeparate(H[r],H[i],H[a],H[s]),A=r,b=i,w=a,x=s),v=e,E=null;else if(e!==v||u!==E){if(m===W&&_===W||(t.blendEquation(32774),m=W,_=W),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}A=null,b=null,w=null,x=null,v=e,E=u}}else y&&(G(3042),y=!1)}function Y(e){O!==e&&(e?t.frontFace(2304):t.frontFace(2305),O=e)}function Q(e){0!==e?(U(2884),e!==S&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):G(2884),S=e}function Z(e,n,r){e?(U(32823),P===n&&M===r||(t.polygonOffset(n,r),P=n,M=r)):G(32823)}function K(e){void 0===e&&(e=33984+C-1),j!==e&&(t.activeTexture(e),j=e)}function J(e,n){null===j&&K();var r=L[j];void 0===r&&(r={type:void 0,texture:void 0},L[j]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||B[e]),r.type=e,r.texture=n)}return{buffers:{color:a,depth:s,stencil:u},initAttributes:function(){for(var t=0,e=f.length;t<e;t++)f[t]=0},enableAttribute:function(t){z(t,0)},enableAttributeAndDivisor:z,disableUnusedAttributes:function(){for(var e=0,n=h.length;e!==n;++e)h[e]!==f[e]&&(t.disableVertexAttribArray(e),h[e]=0)},enable:U,disable:G,useProgram:function(e){return g!==e&&(t.useProgram(e),g=e,!0)},setBlending:X,setMaterial:function(t,e){2===t.side?G(2884):U(2884);var n=1===t.side;e&&(n=!n),Y(n),1===t.blending&&!1===t.transparent?X(0):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),a.setMask(t.colorWrite);var r=t.stencilWrite;u.setTest(r),r&&(u.setMask(t.stencilWriteMask),u.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),u.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Z(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:Y,setCullFace:Q,setLineWidth:function(e){e!==T&&(I&&t.lineWidth(e),T=e)},setPolygonOffset:Z,setScissorTest:function(t){t?U(3089):G(3089)},activeTexture:K,bindTexture:J,activeAndBindTexture:function(t,e,n){var r=L[t];(void 0===r||r.type!==e||r.texture!==n)&&(K(t),J(e,n))},unbindTexture:function(){var e=L[j];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===D.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),D.copy(e))},reset:function(){for(var e=0;e<h.length;e++)1===h[e]&&(t.disableVertexAttribArray(e),h[e]=0);d={},j=null,L={},g=null,v=null,O=null,S=null,a.reset(),s.reset(),u.reset()}}}function lo(t,e,n,r,i,o,a){var s,u,l,f=i.isWebGL2,h=i.maxTextures,p=(i.maxCubemapSize,i.maxTextureSize),d=i.maxSamples,g=(new WeakMap,!1);try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(D){}function y(t,e){return g?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(t){return Ut.isPowerOfTwo(t.width)&&Ut.isPowerOfTwo(t.height)}function m(t,e){return t.generateMipmaps&&e&&t.minFilter!==J&&t.minFilter!==et}function A(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function b(n,r,i){if(!1===f)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325===o||33326===o||34842===o||34836===o?e.get("EXT_color_buffer_float"):34843!==o&&34837!==o||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),o}function _(t){return t===J||t===$||t===tt?9728:9729}function w(e){var n=e.target;n.removeEventListener("dispose",w),function(e){var n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),a.memory.textures--}function x(e){var n=e.target;n.removeEventListener("dispose",x),function(e){var n=r.get(e),i=r.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}(n),a.memory.textures--}var E=0;function O(t,e){var i=r.get(t);if(t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void I(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeAndBindTexture(33984+e,3553,i.__webglTexture)}function S(){}function T(){}var P=(s={},Object(c.a)(s,Q,10497),Object(c.a)(s,Z,33071),Object(c.a)(s,K,33648),s),M=(u={},Object(c.a)(u,J,9728),Object(c.a)(u,$,9984),Object(c.a)(u,tt,9986),Object(c.a)(u,et,9729),Object(c.a)(u,nt,9985),Object(c.a)(u,rt,9987),u);function C(n,o,a){a?(t.texParameteri(n,10242,P[o.wrapS]),t.texParameteri(n,10243,P[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,P[o.wrapR]),t.texParameteri(n,10240,M[o.magFilter]),t.texParameteri(n,10241,M[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===Z&&o.wrapT===Z||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,_(o.magFilter)),t.texParameteri(n,10241,_(o.minFilter)),o.minFilter!==J&&o.minFilter!==et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=e.get("EXT_texture_filter_anisotropic");if(s){if(o.type===st&&null===e.get("OES_texture_float_linear"))return;if(o.type===ut&&null===(f||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function I(e,r,i){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),function(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",w),e.__webglTexture=t.createTexture(),a.memory.textures++)}(e,r),n.activeTexture(33984+i),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var u=function(t){return!f&&(t.wrapS!==Z||t.wrapT!==Z||t.minFilter!==J&&t.minFilter!==et)}(r)&&!1===v(r.image),c=function(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?Ut.floorPowerOfTwo:Math.floor,a=o(i*t.width),s=o(i*t.height);void 0===l&&(l=y(a,s));var u=n?y(a,s):l;return u.width=a,u.height=s,u.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),u}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}(r.image,u,!1,p),h=v(c)||f,d=o.convert(r.format),g=o.convert(r.type),_=b(r.internalFormat,d,g);C(s,r,h);var x,E=r.mipmaps;if(r.isDepthTexture){if(_=6402,r.type===st){if(!1===f)throw new Error("Float Depth Texture only supported in WebGL2.0");_=36012}else f&&(_=33189);r.format===ht&&6402===_&&r.type!==ot&&r.type!==at&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=ot,g=o.convert(r.type)),r.format===pt&&(_=34041,r.type!==ct&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ct,g=o.convert(r.type))),n.texImage2D(3553,0,_,c.width,c.height,0,d,g,null)}else if(r.isDataTexture)if(E.length>0&&h){for(var O=0,S=E.length;O<S;O++)x=E[O],n.texImage2D(3553,O,_,x.width,x.height,0,d,g,x.data);r.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else n.texImage2D(3553,0,_,c.width,c.height,0,d,g,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(O=0,S=E.length;O<S;O++)x=E[O],r.format!==ft&&r.format!==lt?null!==d?n.compressedTexImage2D(3553,O,_,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,O,_,x.width,x.height,0,d,g,x.data);e.__maxMipLevel=E.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,_,c.width,c.height,c.depth,0,d,g,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,_,c.width,c.height,c.depth,0,d,g,c.data),e.__maxMipLevel=0;else if(E.length>0&&h){for(O=0,S=E.length;O<S;O++)x=E[O],n.texImage2D(3553,O,_,d,g,x);r.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else n.texImage2D(3553,0,_,d,g,c),e.__maxMipLevel=0;m(r,h)&&A(s,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(e,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type),l=b(i.texture.internalFormat,u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function k(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(r){var i=L(n);t.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=L(n);t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),u=b(n.texture.internalFormat,a,s);if(r){i=L(n);t.renderbufferStorageMultisample(36161,i,u,n.width,n.height)}else t.renderbufferStorage(36161,u,n.width,n.height)}t.bindRenderbuffer(36161,null)}function j(e){var n=r.get(e);e.depthTexture?function(e,n){0;if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),O(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ht)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==pt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e):(t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),k(n.__webglDepthbuffer,e));t.bindFramebuffer(36160,null)}function L(t){return f&&t.isWebGLMultisampleRenderTarget?Math.min(d,t.samples):0}var N=!1;this.allocateTextureUnit=function(){var t=E;return t>=h&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+h),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=O,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=S,this.setTextureCubeDynamic=T,this.setupRenderTarget=function(e){var i=r.get(e),s=r.get(e.texture);e.addEventListener("dispose",x),s.__webglTexture=t.createTexture(),a.memory.textures++;var u=!0===e.isWebGLMultisampleRenderTarget,c=v(e)||f;if(i.__webglFramebuffer=t.createFramebuffer(),u)if(f){i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var l=o.convert(e.texture.format),h=o.convert(e.texture.type),p=b(e.texture.internalFormat,l,h),d=L(e);t.renderbufferStorageMultisample(36161,d,p,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),k(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");n.bindTexture(3553,s.__webglTexture),C(3553,e.texture,c),R(i.__webglFramebuffer,e,36064,3553),m(e.texture,c)&&A(3553,e.texture,e.width,e.height),n.bindTexture(3553,null),e.depthBuffer&&j(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(m(e,v(t)||f)){var i=3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),A(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(f){var n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var i=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),N=!0),t=t.texture),O(t,e)},this.safeSetTextureCube=function(t,e){Array.isArray(t.image)&&t.image.length}}function fo(t,e,n){var r=n.isWebGL2;return{convert:function(t){var n;if(t===it)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(t===ot)return 5123;if(1013===t)return 5124;if(t===at)return 5125;if(t===st)return 5126;if(t===ut)return r?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(t===lt)return 6407;if(t===ft)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===ht)return 6402;if(t===pt)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(t===dt||t===gt||t===yt||t===vt){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===dt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===gt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===yt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===vt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===mt||t===At||t===bt||t===_t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===mt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===At)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===bt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===_t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===wt||t===xt)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(t===wt)return n.COMPRESSED_RGB8_ETC2;if(t===xt)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:t===ct?r?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ho(){Oe.call(this),this.type="Group"}function po(){this.getDevice=function(){}}function go(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,f=null,h=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Tt,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,g,y,v,m,A,b,_,w,x,E,O,S,T,P,M,C,I=this,R=!1,k=null,j=0,L=0,N=null,D=null,F=-1,B={geometry:null,program:null,wireframe:!1},z=null,U=null,G=new Xt,V=new Xt,q=null,H=e.width,W=e.height,X=1,Y=null,Q=null,Z=new Xt(0,0,H,W),K=new Xt(0,0,H,W),J=!1,$=new mr,tt=new Mr,et=!1,nt=!1,rt=new se,ot=new $t;try{var at={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l,xrCompatible:!0};if(e.addEventListener("webglcontextlost",pt,!1),e.addEventListener("webglcontextrestored",dt,!1),null===(p=n||e.getContext("webgl",at)||e.getContext("experimental-webgl",at)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(St){throw console.error("THREE.WebGLRenderer: "+St.message),St}function ct(){d=new Cr(p),!1===(g=new Pr(p,d,t)).isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),C=new fo(p,d,g),(y=new co(p,d,g)).scissor(V.copy(K).multiplyScalar(X).floor()),y.viewport(G.copy(Z).multiplyScalar(X).floor()),v=new kr(p),m=new Qi,A=new lo(p,d,y,m,g,C,v),b=new _r(p,g),_=new Ir(p,b,v),w=new Nr(p,_,b,v),T=new Lr(p),x=new Yi(I,d,g),E=new $i,O=new oo,S=new Sr(I,y,w,s),P=new Tr(p,d,v,g),M=new Rr(p,d,v,g),v.programs=x.programs,I.capabilities=g,I.extensions=d,I.properties=m,I.renderLists=E,I.state=y,I.info=v}ct();var lt=new po(I,p);this.xr=lt;var ht=new uo(I,w,g.maxTextureSize);function pt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,ct()}function gt(t){var e=t.target;e.removeEventListener("dispose",gt),function(t){yt(t),m.remove(t)}(e)}function yt(t){var e=m.get(t).program;t.program=void 0,void 0!==e&&x.releaseProgram(e)}this.shadowMap=ht,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=d.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=d.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(t){void 0!==t&&(X=t,this.setSize(H,W,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Gt),t.set(H,W)},this.setSize=function(t,n,r){lt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=t,W=n,e.width=Math.floor(t*X),e.height=Math.floor(n*X),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Gt),t.set(H*X,W*X).floor()},this.setDrawingBufferSize=function(t,n,r){H=t,W=n,X=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Xt),t.copy(G)},this.getViewport=function(t){return t.copy(Z)},this.setViewport=function(t,e,n,r){t.isVector4?Z.set(t.x,t.y,t.z,t.w):Z.set(t,e,n,r),y.viewport(G.copy(Z).multiplyScalar(X).floor())},this.getScissor=function(t){return t.copy(K)},this.setScissor=function(t,e,n,r){t.isVector4?K.set(t.x,t.y,t.z,t.w):K.set(t,e,n,r),y.scissor(V.copy(K).multiplyScalar(X).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(t){y.setScissorTest(J=t)},this.setOpaqueSort=function(t){Y=t},this.setTransparentSort=function(t){Q=t},this.getClearColor=function(){return S.getClearColor()},this.setClearColor=function(){S.setClearColor.apply(S,arguments)},this.getClearAlpha=function(){return S.getClearAlpha()},this.setClearAlpha=function(){S.setClearAlpha.apply(S,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",pt,!1),e.removeEventListener("webglcontextrestored",dt,!1),E.dispose(),O.dispose(),m.dispose(),w.dispose(),lt.dispose(),At.stop()},this.renderBufferImmediate=function(t,e){y.initAttributes();var n=m.get(t);t.hasPositions&&!n.position&&(n.position=p.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),t.hasColors&&!n.color&&(n.color=p.createBuffer());var r=e.getAttributes();t.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,t.positionArray,35048),y.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,t.normalArray,35048),y.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,t.uvArray,35048),y.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,t.colorArray,35048),y.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),y.disableUnusedAttributes(),p.drawArrays(4,0,t.count),t.count=0};var vt=new Se;this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=vt);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Et(t,e,r,i);y.setMaterial(r,a);var u=!1;B.geometry===n.id&&B.program===s.id&&B.wireframe===(!0===r.wireframe)||(B.geometry=n.id,B.program=s.id,B.wireframe=!0===r.wireframe,u=!0),r.morphNormals&&(T.update(i,n,r,s),u=!0);var c=n.index,l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;var f,h=1;!0===r.wireframe&&(c=_.getWireframeAttribute(n),h=2);var v=P;null!==c&&(f=b.get(c),(v=M).setIndex(f)),u&&(!function(t,e,n,r){if(!1===g.isWebGL2&&e.isInstancedBufferGeometry&&null===d.get("ANGLE_instanced_arrays"))return;y.initAttributes();var i=e.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var c=i[s];if(void 0!==c){var l=c.normalized,f=c.itemSize;if(void 0===(x=b.get(c)))continue;var h=x.buffer,v=x.type,m=x.bytesPerElement;if(c.isInterleavedBufferAttribute){var A=c.data,_=A.stride,w=c.offset;A&&A.isInstancedInterleavedBuffer?(y.enableAttributeAndDivisor(u,A.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=A.meshPerAttribute*A.count)):y.enableAttribute(u),p.bindBuffer(34962,h),p.vertexAttribPointer(u,f,v,l,_*m,w*m)}else c.isInstancedBufferAttribute?(y.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=c.meshPerAttribute*c.count)):y.enableAttribute(u),p.bindBuffer(34962,h),p.vertexAttribPointer(u,f,v,l,0,0)}else if("instanceMatrix"===s){var x;if(void 0===(x=b.get(t.instanceMatrix)))continue;h=x.buffer,v=x.type;y.enableAttributeAndDivisor(u+0,1),y.enableAttributeAndDivisor(u+1,1),y.enableAttributeAndDivisor(u+2,1),y.enableAttributeAndDivisor(u+3,1),p.bindBuffer(34962,h),p.vertexAttribPointer(u+0,4,v,!1,64,0),p.vertexAttribPointer(u+1,4,v,!1,64,16),p.vertexAttribPointer(u+2,4,v,!1,64,32),p.vertexAttribPointer(u+3,4,v,!1,64,48)}else if(void 0!==a){var E=a[s];if(void 0!==E)switch(E.length){case 2:p.vertexAttrib2fv(u,E);break;case 3:p.vertexAttrib3fv(u,E);break;case 4:p.vertexAttrib4fv(u,E);break;default:p.vertexAttrib1fv(u,E)}}}}y.disableUnusedAttributes()}(i,n,r,s),null!==c&&p.bindBuffer(34963,f.buffer));var m=null!==c?c.count:l.count,A=n.drawRange.start*h,w=n.drawRange.count*h,x=null!==o?o.start*h:0,E=null!==o?o.count*h:1/0,O=Math.max(A,x),S=Math.min(m,A+w,x+E)-1,C=Math.max(0,S-O+1);if(0!==C){if(i.isMesh)!0===r.wireframe?(y.setLineWidth(r.wireframeLinewidth*(null===N?X:1)),v.setMode(1)):v.setMode(4);else i.isSprite&&v.setMode(4);n.isInstancedBufferGeometry?v.renderInstances(n,O,C,n.maxInstancedCount):v.render(O,C)}},this.compile=function(t,e){(h=O.get(t,e)).init(),t.traverse((function(t){0})),h.setupLights(e);var n={};t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)e.material[r].uuid in n===!1&&(xt(e.material[r],t,e),n[e.material[r].uuid]=!0);else e.material.uuid in n===!1&&(xt(e.material,t,e),n[e.material.uuid]=!0)}))};var mt=null;var At=new br;function bt(t,e,n,r){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isSprite){if(!t.frustumCulled||$.intersectsSprite(t)){r&&ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);var i=w.update(t);(o=t.material).visible&&f.push(t,i,o,n,ot.z,null)}}else if(t.isImmediateRenderObject)r&&ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt),f.push(t,null,t.material,n,ot.z,null);else if(t.isMesh&&(!t.frustumCulled||$.intersectsObject(t))){r&&ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);i=w.update(t);var o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&f.push(t,i,l,n,ot.z,c)}else o.visible&&f.push(t,i,o,n,ot.z,null)}var h=t.children;for(s=0,u=h.length;s<u;s++)bt(h[s],e,n,r)}}function _t(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){U=n;for(var f=n.cameras,p=0,d=f.length;p<d;p++){var g=f[p];s.layers.test(g.layers)&&(y.viewport(G.copy(g.viewport)),h.setupLights(g),wt(s,e,g,u,c,l))}}else U=null,wt(s,e,n,u,c,l)}}function wt(t,e,n,r,i,o){if(t.onBeforeRender(I,e,n,r,i,o),h=O.get(e,U||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=Et(n,e,i,t);y.setMaterial(i),B.geometry=null,B.program=null,B.wireframe=!1,function(t,e){t.render((function(t){I.renderBufferImmediate(t,e)}))}(t,a)}else I.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(I,e,n,r,i,o),h=O.get(e,U||n)}function xt(t,e,n){var r=m.get(t),i=h.state.lights,o=h.state.shadowsArray,a=i.state.version,s=x.getParameters(t,i.state,o,e,tt.numPlanes,tt.numIntersection,n),u=x.getProgramCacheKey(s),c=r.program,l=!0;if(void 0===c)t.addEventListener("dispose",gt);else if(c.cacheKey!==u)yt(t);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,l=!1;else{if(void 0!==s.shaderID)return;l=!1}l&&(c=x.acquireProgram(s,u),r.program=c,r.uniforms=s.uniforms,r.environment=null,r.outputEncoding=I.outputEncoding,t.program=c);var f=c.getAttributes();if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<I.maxMorphNormals;p++)f["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var d=r.uniforms;!0===t.clipping&&(r.numClippingPlanes=tt.numPlanes,r.numIntersection=tt.numIntersection,d.clippingPlanes=tt.uniform),r.fog=e.fog,r.needsLights=function(t){return t.isShadowMaterial||!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),y=ji.seqWithValue(g.seq,d);r.uniformsList=y}function Et(t,e,n,r){A.resetTextureUnits();var i=e.fog,o=m.get(n),a=h.state.lights;if(et&&(nt||t!==z)){var s=t===z&&n.id===F;tt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,o,s)}n.version===o.__version?void 0===o.program||n.fog&&o.fog!==i||null!==o.environment||o.needsLights&&o.lightsStateVersion!==a.state.version?xt(n,e,r):void 0===o.numClippingPlanes||o.numClippingPlanes===tt.numPlanes&&o.numIntersection===tt.numIntersection?o.outputEncoding!==I.outputEncoding&&xt(n,e,r):xt(n,e,r):(xt(n,e,r),o.__version=n.version);var u,c,l=!1,f=!1,d=!1,v=o.program,b=v.getUniforms(),_=o.uniforms;if(y.useProgram(v.program)&&(l=!0,f=!0,d=!0),n.id!==F&&(F=n.id,f=!0),l||z!==t){b.setValue(p,"projectionMatrix",t.projectionMatrix),g.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),z!==t&&(z=t,f=!0,d=!0);var w=b.map.cameraPosition;void 0!==w&&w.setValue(p,ot.setFromMatrixPosition(t.matrixWorld)),n.isMeshBasicMaterial,b.setValue(p,"isOrthographic",!0===t.isOrthographicCamera),n.isMeshBasicMaterial,b.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){b.setOptional(p,r,"bindMatrix"),b.setOptional(p,r,"bindMatrixInverse");var x=r.skeleton;if(x){var E=x.bones;if(g.floatVertexTextures){if(void 0===x.boneTexture){var O=Math.sqrt(4*E.length);O=Ut.ceilPowerOfTwo(O),O=Math.max(O,4);var S=new Float32Array(O*O*4);S.set(x.boneMatrices);var T=new gr(S,O,O,ft,st);x.boneMatrices=S,x.boneTexture=T,x.boneTextureSize=O}b.setValue(p,"boneTexture",x.boneTexture,A),b.setValue(p,"boneTextureSize",x.boneTextureSize)}else b.setOptional(p,x,"boneMatrices")}}return(f||o.receiveShadow!==r.receiveShadow)&&(o.receiveShadow=r.receiveShadow,b.setValue(p,"receiveShadow",r.receiveShadow)),f&&(b.setValue(p,"toneMappingExposure",I.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",I.toneMappingWhitePoint),o.needsLights&&(c=d,(u=_).ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.directionalLightShadows.needsUpdate=c,u.pointLights.needsUpdate=c,u.pointLightShadows.needsUpdate=c,u.spotLights.needsUpdate=c,u.spotLightShadows.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),i&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(_,i),n.isMeshBasicMaterial?Ot(_,n):n.isMeshMatcapMaterial?(Ot(_,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDepthMaterial?(Ot(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshNormalMaterial?(Ot(_,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(_,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(_,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*X,t.scale.value=.5*W,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(_,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(_,n):n.isShadowMaterial&&(_.color.value.copy(n.color),_.opacity.value=n.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=Ar.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=Ar.LTC_2),ji.upload(p,o.uniformsList,_,A),n.uniformsNeedUpdate=!1),!0===n.uniformsNeedUpdate&&(ji.upload(p,o.uniformsList,_,A),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(p,"center",r.center),b.setValue(p,"modelViewMatrix",r.modelViewMatrix),b.setValue(p,"normalMatrix",r.normalMatrix),b.setValue(p,"modelMatrix",r.matrixWorld),v}function Ot(t,e,n){t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap);var r,i,o=n;o&&((!1).value=o,t.flipEnvMap.value=1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=m.get(o).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?r=e.map:e.specularMap?r=e.specularMap:e.displacementMap?r=e.displacementMap:e.normalMap?r=e.normalMap:e.bumpMap?r=e.bumpMap:e.roughnessMap?r=e.roughnessMap:e.metalnessMap?r=e.metalnessMap:e.alphaMap?r=e.alphaMap:e.emissiveMap&&(r=e.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),e.aoMap?i=e.aoMap:e.lightMap&&(i=e.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}At.setAnimationLoop((function(t){lt.isPresenting||mt&&mt(t)})),"undefined"!==typeof window&&At.setContext(window),this.setAnimationLoop=function(t){mt=t,lt.setAnimationLoop(t),At.start()},this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),e&&e.isCamera){if(!R){B.geometry=null,B.program=null,B.wireframe=!1,F=-1,z=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),lt.enabled&&lt.isPresenting&&(e=lt.getCamera(e)),(h=O.get(t,e)).init(),t.onBeforeRender(I,t,e,n||N),rt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),$.setFromProjectionMatrix(rt),nt=this.localClippingEnabled,et=tt.init(this.clippingPlanes,nt,e),(f=E.get(t,e)).init(),bt(t,e,0,I.sortObjects),f.finish(),!0===I.sortObjects&&f.sort(Y,Q),et&&tt.beginShadows();var i=h.state.shadowsArray;ht.render(i,t,e),h.setupLights(e),et&&tt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),S.render(f,t,e,r);var o=f.opaque,a=f.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&_t(o,t,e,s),a.length&&_t(a,t,e,s)}else o.length&&_t(o,t,e),a.length&&_t(a,t,e);t.onAfterRender(I,t,e),null!==N&&(A.updateRenderTargetMipmap(N),A.updateMultisampleRenderTarget(N)),y.buffers.depth.setTest(!0),y.buffers.depth.setMask(!0),y.buffers.color.setMask(!0),y.setPolygonOffset(!1),f=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){k!==t&&null===N&&p.bindFramebuffer(36160,t),k=t},this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return N},this.setRenderTarget=function(t,e,n){N=t,j=e,L=n,t&&void 0===m.get(t).__webglFramebuffer&&A.setupRenderTarget(t);var r=k;if(t){var i=m.get(t).__webglFramebuffer;r=t.isWebGLMultisampleRenderTarget?m.get(t).__webglMultisampledFramebuffer:i,G.copy(t.viewport),V.copy(t.scissor),q=t.scissorTest}else G.copy(Z).multiplyScalar(X).floor(),V.copy(K).multiplyScalar(X).floor(),q=J;D!==r&&(p.bindFramebuffer(36160,r),D=r),y.viewport(G),y.scissor(V),y.setScissorTest(q)},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=m.get(t).__webglFramebuffer;if(s){var u=!1;s!==D&&(p.bindFramebuffer(36160,s),u=!0);try{var c=t.texture,l=c.format,f=c.type;if(l!==ft&&C.convert(l)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(f!==it&&C.convert(f)!==p.getParameter(35738)&&(f!==st||!(g.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float")))&&(f!==ut||!(g.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&p.readPixels(e,n,r,i,C.convert(l),C.convert(f),o)}finally{u&&p.bindFramebuffer(36160,D)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=C.convert(e.format);A.setTexture2D(e,0),p.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),y.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=C.convert(n.format),s=C.convert(n.type);A.setTexture2D(n,0),p.pixelStorei(37440,n.flipY),p.pixelStorei(37441,n.premultiplyAlpha),p.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?p.texSubImage2D(3553,r||0,t.x,t.y,i,o,a,s,e.image.data):p.texSubImage2D(3553,r||0,t.x,t.y,a,s,e.image),y.unbindTexture()},this.initTexture=function(t){A.setTexture2D(t,0),y.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function yo(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Lt,this.updateRange={offset:0,count:-1},this.version=0}ho.prototype=Object.assign(Object.create(Oe.prototype),{constructor:ho,isGroup:!0}),Object.assign(po.prototype,Dt.prototype),Object.defineProperty(yo.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(yo.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var vo=new $t;function mo(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Ao(){}Object.defineProperties(mo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(mo.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)vo.x=this.getX(e),vo.y=this.getY(e),vo.z=this.getZ(e),vo.applyMatrix4(t),this.setXYZ(e,vo.x,vo.y,vo.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}});new $t,new $t,new $t,new Gt,new Gt,new se,new $t,new $t,new $t,new Gt,new Gt,new Gt;var bo=new $t,_o=new $t;function wo(){Oe.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}wo.prototype=Object.assign(Object.create(Oe.prototype),{constructor:wo,isLOD:!0,copy:function(t){Oe.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){bo.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(bo);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){bo.setFromMatrixPosition(t.matrixWorld),_o.setFromMatrixPosition(this.matrixWorld);var n=bo.distanceTo(_o)/t.zoom;e[0].object.visible=!0;for(var r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){var e=Oe.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}});new se,new se;function xo(){}new se,new se,new Zn;function Eo(){}new $t,new se,new qe,new Ve;new $t,new $t;function Oo(){}new se,new qe,new Ve,new $t;function So(t,e,n,r,i,o,a,s,u,c,l,f){Wt.call(this,null,o,a,s,u,c,r,i,l,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function To(t,e,n,r,i,o,a,s,u,c){if((c=void 0!==c?c:ht)!==ht&&c!==pt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ht&&(n=ot),void 0===n&&c===pt&&(n=ct),Wt.call(this,null,r,i,o,a,s,c,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:J,this.minFilter=void 0!==s?s:J,this.flipY=!1,this.generateMipmaps=!1}function Po(){}function Mo(){}function Co(){}function Io(){}function Ro(){}function ko(){}function jo(){}function Lo(){}function No(){}function Do(){}function Fo(){}function Bo(){}function zo(){}function Uo(){}function Go(){}function Vo(){}function qo(){}function Ho(){}function Wo(){}So.prototype=Object.create(Wt.prototype),So.prototype.constructor=So,So.prototype.isCompressedTexture=!0,To.prototype=Object.create(Wt.prototype),To.prototype.constructor=To,To.prototype.isDepthTexture=!0;var Xo={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Xo.area(t)<0},triangulateShape:""};function Yo(){}function Qo(){}function Zo(){}function Ko(){}function Jo(){}function $o(t,e,n,r,i,o,a){Fn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,c=Math.min(o+a,Math.PI),l=0,f=[],h=new $t,p=new $t,d=[],g=[],y=[],v=[];for(u=0;u<=n;u++){var m=[],A=u/n,b=0;for(0==u&&0==o?b=.5/e:u==n&&c==Math.PI&&(b=-.5/e),s=0;s<=e;s++){var _=s/e;h.x=-t*Math.cos(r+_*i)*Math.sin(o+A*a),h.y=t*Math.cos(o+A*a),h.z=t*Math.sin(r+_*i)*Math.sin(o+A*a),g.push(h.x,h.y,h.z),p.copy(h).normalize(),y.push(p.x,p.y,p.z),v.push(_+b,1-A),m.push(l++)}f.push(m)}for(u=0;u<n;u++)for(s=0;s<e;s++){var w=f[u][s+1],x=f[u][s],E=f[u+1][s],O=f[u+1][s+1];(0!==u||o>0)&&d.push(w,x,O),(u!==n-1||c<Math.PI)&&d.push(x,E,O)}this.setIndex(d),this.setAttribute("position",new Tn(g,3)),this.setAttribute("normal",new Tn(y,3)),this.setAttribute("uv",new Tn(v,2))}function ta(){}function ea(){}function na(){}function ra(){}function ia(){}function oa(){}function aa(){}function sa(){}function ua(){}function ca(){}function la(){}function fa(){}function ha(){}$o.prototype=Object.create(Fn.prototype),$o.prototype.constructor=$o;function pa(){}function da(t){cr.call(this,t),this.type="RawShaderMaterial"}function ga(){}function ya(){}function va(){}function ma(){}function Aa(){}function ba(){}function _a(t){yn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ln(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function wa(){}da.prototype=Object.create(cr.prototype),da.prototype.constructor=da,da.prototype.isRawShaderMaterial=!0,_a.prototype=Object.create(yn.prototype),_a.prototype.constructor=_a,_a.prototype.isMeshMatcapMaterial=!0,_a.prototype.copy=function(t){return yn.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};var xa={arraySlice:function(t,e,n){return xa.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r,i){i=i||30;var o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],c=u.getValueSize(),l=[],f=[],h=0;h<u.times.length;++h){var p=u.times[h]*i;if(!(p<n||p>=r)){l.push(u.times[h]);for(var d=0;d<c;++d)f.push(u.values[h*c+d])}}0!==l.length&&(u.times=xa.convertArray(l,u.times.constructor),u.values=xa.convertArray(f,u.values.constructor),a.push(u))}o.tracks=a;var g=1/0;for(s=0;s<o.tracks.length;++s)g>o.tracks[s].times[0]&&(g=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*g);return o.resetDuration(),o}};function Ea(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Oa(t,e,n,r){Ea.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Sa(t,e,n,r){Ea.call(this,t,e,n,r)}function Ta(t,e,n,r){Ea.call(this,t,e,n,r)}function Pa(){}function Ma(){}function Ca(){}function Ia(){}function Ra(){}function ka(){}function ja(){}Object.assign(Ea.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ea.prototype,{beforeStart_:Ea.prototype.copySampleValue_,afterEnd_:Ea.prototype.copySampleValue_}),Oa.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Oa,DefaultSettings_:{endingStart:Et,endingEnd:Et},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ot:i=t,a=2*e-n;break;case St:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ot:o=t,s=2*n-e;break;case St:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(n-e)/(r-e),d=p*p,g=d*p,y=-f*g+2*f*d-f*p,v=(1+f)*g+(-1.5-2*f)*d+(-.5+f)*p+1,m=(-1-h)*g+(1.5+h)*d+.5*p,A=h*g-h*d,b=0;b!==a;++b)i[b]=y*o[c+b]+v*o[u+b]+m*o[s+b]+A*o[l+b];return i}}),Sa.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Sa,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),l=1-c,f=0;f!==a;++f)i[f]=o[u+f]*l+o[s+f]*c;return i}}),Ta.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Ta,interpolate_:function(t){return this.copySampleValue_(t-1)}});var La={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Na(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var r=u[e],i=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}}var Da=new Na;function Fa(t){this.manager=void 0!==t?t:Da,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Fa.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var Ba={};function za(t){Fa.call(this,t)}function Ua(t){Fa.call(this,t)}function Ga(t){Fa.call(this,t)}function Va(t){Fa.call(this,t)}function qa(){}function Ha(t){Fa.call(this,t)}function Wa(){this.type="Curve",this.arcLengthDivisions=200}function Xa(t,e,n,r,i,o,a,s){Wa.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ya(t,e,n,r,i,o){Xa.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Qa(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,c*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}za.prototype=Object.assign(Object.create(Fa.prototype),{constructor:za,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=La.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===Ba[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],c=a[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var l,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var h=new Uint8Array(c.length),p=0;p<c.length;p++)h[p]=c.charCodeAt(p);l="blob"===f?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var d=new DOMParser;l=d.parseFromString(c,s);break;case"json":l=JSON.parse(c);break;default:l=c}setTimeout((function(){e&&e(l),i.manager.itemEnd(t)}),0)}catch(v){setTimeout((function(){r&&r(v),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Ba[t]=[],Ba[t].push({onLoad:e,onProgress:n,onError:r});var g=new XMLHttpRequest;for(var y in g.open("GET",t,!0),g.addEventListener("load",(function(e){var n=this.response,r=Ba[t];if(delete Ba[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),La.add(t,n);for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),g.addEventListener("progress",(function(e){for(var n=Ba[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),g.addEventListener("error",(function(e){var n=Ba[t];delete Ba[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),g.addEventListener("abort",(function(e){var n=Ba[t];delete Ba[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)g.setRequestHeader(y,this.requestHeader[y]);g.send(null)}return i.manager.itemStart(t),g}Ba[t].push({onLoad:e,onProgress:n,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Ua.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Ua,load:function(t,e,n,r){var i=this,o=new za(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=ja.parse(t[n]);e.push(r)}return e}}),Ga.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Ga,load:function(t,e,n,r){var i=this,o=[],a=new So;a.image=o;var s=new za(this.manager);function u(u){s.load(t[u],(function(t){var n=i.parse(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=et),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,f=t.length;l<f;++l)u(l);else s.load(t,(function(t){var n=i.parse(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=et),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}),Va.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Va,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=La.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),La.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}),Ha.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Ha,load:function(t,e,n,r){var i=new Wt,o=new Va(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?lt:ft,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Wa.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)o+=(e=this.getPoint(n/t)).distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n);return this.getPoint(r).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i,o=new $t,a=[],s=[],u=[],c=new $t,l=new se;for(n=0;n<=t;n++)r=n/t,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new $t,u[0]=new $t;var f=Number.MAX_VALUE,h=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(h<=f&&(f=h,o.set(1,0,0)),p<=f&&(f=p,o.set(0,1,0)),d<=f&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),u[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(Ut.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(c,i))),u[n].crossVectors(a[n],s[n]);if(!0===e)for(i=Math.acos(Ut.clamp(s[0].dot(s[t]),-1,1)),i/=t,a[0].dot(c.crossVectors(s[0],s[t]))>0&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Xa.prototype=Object.create(Wa.prototype),Xa.prototype.constructor=Xa,Xa.prototype.isEllipseCurve=!0,Xa.prototype.getPoint=function(t,e){for(var n=e||new Gt,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=s-this.aX,h=u-this.aY;s=f*c-h*l+this.aX,u=f*l+h*c+this.aY}return n.set(s,u)},Xa.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Xa.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Xa.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ya.prototype=Object.create(Xa.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isArcCurve=!0;var Za=new $t,Ka=new Qa,Ja=new Qa,$a=new Qa;function ts(t,e,n,r){Wa.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function es(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function ns(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function rs(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function is(t,e,n,r){Wa.call(this),this.type="CubicBezierCurve",this.v0=t||new Gt,this.v1=e||new Gt,this.v2=n||new Gt,this.v3=r||new Gt}function os(t,e,n,r){Wa.call(this),this.type="CubicBezierCurve3",this.v0=t||new $t,this.v1=e||new $t,this.v2=n||new $t,this.v3=r||new $t}function as(t,e){Wa.call(this),this.type="LineCurve",this.v1=t||new Gt,this.v2=e||new Gt}function ss(t,e){Wa.call(this),this.type="LineCurve3",this.v1=t||new $t,this.v2=e||new $t}function us(t,e,n){Wa.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Gt,this.v1=e||new Gt,this.v2=n||new Gt}function cs(t,e,n){Wa.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new $t,this.v1=e||new $t,this.v2=n||new $t}function ls(t){Wa.call(this),this.type="SplineCurve",this.points=t||[]}ts.prototype=Object.create(Wa.prototype),ts.prototype.constructor=ts,ts.prototype.isCatmullRomCurve3=!0,ts.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new $t,s=this.points,u=s.length,c=(u-(this.closed?0:1))*t,l=Math.floor(c),f=c-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/u)+1)*u:0===f&&l===u-1&&(l=u-2,f=1),this.closed||l>0?n=s[(l-1)%u]:(Za.subVectors(s[0],s[1]).add(s[0]),n=Za),r=s[l%u],i=s[(l+1)%u],this.closed||l+2<u?o=s[(l+2)%u]:(Za.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Za),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),h),d=Math.pow(r.distanceToSquared(i),h),g=Math.pow(i.distanceToSquared(o),h);d<1e-4&&(d=1),p<1e-4&&(p=d),g<1e-4&&(g=d),Ka.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,d,g),Ja.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,d,g),$a.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,d,g)}else"catmullrom"===this.curveType&&(Ka.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Ja.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),$a.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Ka.calc(f),Ja.calc(f),$a.calc(f)),a},ts.prototype.copy=function(t){Wa.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},ts.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},ts.prototype.fromJSON=function(t){Wa.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new $t).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},is.prototype=Object.create(Wa.prototype),is.prototype.constructor=is,is.prototype.isCubicBezierCurve=!0,is.prototype.getPoint=function(t,e){var n=e||new Gt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(rs(t,r.x,i.x,o.x,a.x),rs(t,r.y,i.y,o.y,a.y)),n},is.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},is.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},is.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},os.prototype=Object.create(Wa.prototype),os.prototype.constructor=os,os.prototype.isCubicBezierCurve3=!0,os.prototype.getPoint=function(t,e){var n=e||new $t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(rs(t,r.x,i.x,o.x,a.x),rs(t,r.y,i.y,o.y,a.y),rs(t,r.z,i.z,o.z,a.z)),n},os.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},os.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},os.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},as.prototype=Object.create(Wa.prototype),as.prototype.constructor=as,as.prototype.isLineCurve=!0,as.prototype.getPoint=function(t,e){var n=e||new Gt;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},as.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},as.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},as.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},as.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},as.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ss.prototype=Object.create(Wa.prototype),ss.prototype.constructor=ss,ss.prototype.isLineCurve3=!0,ss.prototype.getPoint=function(t,e){var n=e||new $t;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},ss.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ss.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ss.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ss.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},us.prototype=Object.create(Wa.prototype),us.prototype.constructor=us,us.prototype.isQuadraticBezierCurve=!0,us.prototype.getPoint=function(t,e){var n=e||new Gt,r=this.v0,i=this.v1,o=this.v2;return n.set(ns(t,r.x,i.x,o.x),ns(t,r.y,i.y,o.y)),n},us.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},us.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},us.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},cs.prototype=Object.create(Wa.prototype),cs.prototype.constructor=cs,cs.prototype.isQuadraticBezierCurve3=!0,cs.prototype.getPoint=function(t,e){var n=e||new $t,r=this.v0,i=this.v1,o=this.v2;return n.set(ns(t,r.x,i.x,o.x),ns(t,r.y,i.y,o.y),ns(t,r.z,i.z,o.z)),n},cs.prototype.copy=function(t){return Wa.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},cs.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},cs.prototype.fromJSON=function(t){return Wa.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ls.prototype=Object.create(Wa.prototype),ls.prototype.constructor=ls,ls.prototype.isSplineCurve=!0,ls.prototype.getPoint=function(t,e){var n=e||new Gt,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(es(a,s.x,u.x,c.x,l.x),es(a,s.y,u.y,c.y,l.y)),n},ls.prototype.copy=function(t){Wa.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},ls.prototype.toJSON=function(){var t=Wa.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},ls.prototype.fromJSON=function(t){Wa.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Gt).fromArray(r))}return this};var fs=Object.freeze({__proto__:null,ArcCurve:Ya,CatmullRomCurve3:ts,CubicBezierCurve:is,CubicBezierCurve3:os,EllipseCurve:Xa,LineCurve:as,LineCurve3:ss,QuadraticBezierCurve:us,QuadraticBezierCurve3:cs,SplineCurve:ls});function hs(){Wa.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ps(t){hs.call(this),this.type="Path",this.currentPoint=new Gt,t&&this.setFromPoints(t)}function ds(t){ps.call(this,t),this.uuid=Ut.generateUUID(),this.type="Shape",this.holes=[]}function gs(){}function ys(t,e,n,r,i,o){lr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}hs.prototype=Object.assign(Object.create(Wa.prototype),{constructor:hs,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new as(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Wa.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Wa.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){Wa.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new fs[r.type]).fromJSON(r))}return this}}),ps.prototype=Object.assign(Object.create(hs.prototype),{constructor:ps,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new as(this.currentPoint.clone(),new Gt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){var i=new us(this.currentPoint.clone(),new Gt(t,e),new Gt(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){var a=new is(this.currentPoint.clone(),new Gt(t,e),new Gt(n,r),new Gt(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(t){var e=new ls([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,r,i,o,a,s),this},absellipse:function(t,e,n,r,i,o,a,s){var u=new Xa(t,e,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return hs.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=hs.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return hs.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),ds.prototype=Object.assign(Object.create(ps.prototype),{constructor:ds,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ps.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=ps.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){ps.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new ps).fromJSON(r))}return this}}),ys.prototype=Object.assign(Object.create(lr.prototype),{constructor:ys,isOrthographicCamera:!0,copy:function(t,e){return lr.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Oe.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var vs={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(i){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function ms(){Fn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function As(t,e,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),An.call(this,t,e,n),this.meshPerAttribute=r||1}ms.prototype=Object.assign(Object.create(Fn.prototype),{constructor:ms,isInstancedBufferGeometry:!0,copy:function(t){return Fn.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Fn.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),As.prototype=Object.assign(Object.create(An.prototype),{constructor:As,isInstancedBufferAttribute:!0,copy:function(t){return An.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=An.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});Int8Array,Uint8Array,"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var bs;function _s(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Fa.call(this,t),this.options=void 0}function ws(){this.type="ShapePath",this.color=new ln,this.subPaths=[],this.currentPath=null}function xs(t){this.type="Font",this.data=t}function Es(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,c,l,f,h,p,d=new ws;if(o.o)for(var g=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),y=0,v=g.length;y<v;){switch(g[y++]){case"m":a=g[y++]*e+n,s=g[y++]*e+r,d.moveTo(a,s);break;case"l":a=g[y++]*e+n,s=g[y++]*e+r,d.lineTo(a,s);break;case"q":u=g[y++]*e+n,c=g[y++]*e+r,l=g[y++]*e+n,f=g[y++]*e+r,d.quadraticCurveTo(l,f,u,c);break;case"b":u=g[y++]*e+n,c=g[y++]*e+r,l=g[y++]*e+n,f=g[y++]*e+r,h=g[y++]*e+n,p=g[y++]*e+r,d.bezierCurveTo(l,f,h,p,u,c)}}return{offsetX:o.ha*e,path:d}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}_s.prototype=Object.assign(Object.create(Fa.prototype),{constructor:_s,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=La.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===i.options?createImageBitmap(t):createImageBitmap(t,i.options)})).then((function(n){La.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(ws.prototype,{moveTo:function(t,e){return this.currentPath=new ps,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new ds;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],u=-u,s=e[i],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var l=c*(t.x-a.x)-u*(t.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=Xo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],(u=new ds).curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=t?!l:l;var f,h,p=[],d=[],g=[],y=0;d[y]=void 0,g[y]=[];for(var v=0,m=o.length;v<m;v++)a=i(f=(s=o[v]).getPoints()),(a=t?!a:a)?(!l&&d[y]&&y++,d[y]={s:new ds,p:f},d[y].s.curves=s.curves,l&&y++,g[y]=[]):g[y].push({h:s,p:f[0]});if(!d[0])return n(o);if(d.length>1){for(var A=!1,b=[],_=0,w=d.length;_<w;_++)p[_]=[];for(_=0,w=d.length;_<w;_++)for(var x=g[_],E=0;E<x.length;E++){for(var O=x[E],S=!0,T=0;T<d.length;T++)r(O.p,d[T].p)&&(_!==T&&b.push({froms:_,tos:T,hole:E}),S?(S=!1,p[T].push(O)):A=!0);S&&p[_].push(O)}b.length>0&&(A||(g=p))}v=0;for(var P=d.length;v<P;v++){u=d[v].s,c.push(u);for(var M=0,C=(h=g[v]).length;M<C;M++)u.holes.push(h[M].h)}return c}}),Object.assign(xs.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=o;else{var f=Es(l,i,s,u,n);s+=f.offsetX,a.push(f.path)}}return a}(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}});var Os={getContext:function(){return void 0===bs&&(bs=new(window.AudioContext||window.webkitAudioContext)),bs},setContext:function(t){bs=t}};function Ss(){}function Ts(){}function Ps(t,e,n){Ts.call(this,void 0,n);var r=(new ln).set(t),i=(new ln).set(e),o=new $t(r.r,r.g,r.b),a=new $t(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function Ms(t,e){Ts.call(this,void 0,e);var n=(new ln).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Ps.prototype=Object.assign(Object.create(Ts.prototype),{constructor:Ps,isHemisphereLightProbe:!0,copy:function(t){return Ts.prototype.copy.call(this,t),this},toJSON:function(t){return Ts.prototype.toJSON.call(this,t)}}),Ms.prototype=Object.assign(Object.create(Ts.prototype),{constructor:Ms,isAmbientLightProbe:!0,copy:function(t){return Ts.prototype.copy.call(this,t),this},toJSON:function(t){return Ts.prototype.toJSON.call(this,t)}});var Cs=new se,Is=new se;function Rs(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function ks(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Rs.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,r,i=t.projectionMatrix.clone(),o=e.eyeSep/2,a=o*e.near/e.focus,s=e.near*Math.tan(Ut.DEG2RAD*e.fov*.5)/e.zoom;Is.elements[12]=-o,Cs.elements[12]=o,n=-s*e.aspect+a,r=s*e.aspect+a,i.elements[0]=2*e.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*e.aspect-a,r=s*e.aspect-a,i.elements[0]=2*e.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Is),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Cs)}}),Object.assign(ks.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var js=new $t,Ls=new Zt,Ns=new $t,Ds=new $t;function Fs(){Oe.call(this),this.type="AudioListener",this.context=Os.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ks}function Bs(t){Oe.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Fs.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Fs,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Oe.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(js,Ls,Ns),Ds.set(0,0,-1).applyQuaternion(Ls),e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(js.x,r),e.positionY.linearRampToValueAtTime(js.y,r),e.positionZ.linearRampToValueAtTime(js.z,r),e.forwardX.linearRampToValueAtTime(Ds.x,r),e.forwardY.linearRampToValueAtTime(Ds.y,r),e.forwardZ.linearRampToValueAtTime(Ds.z,r),e.upX.linearRampToValueAtTime(n.x,r),e.upY.linearRampToValueAtTime(n.y,r),e.upZ.linearRampToValueAtTime(n.z,r)}else e.setPosition(js.x,js.y,js.z),e.setOrientation(Ds.x,Ds.y,Ds.z,n.x,n.y,n.z)}}),Bs.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Bs,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var zs=new $t,Us=new Zt,Gs=new $t,Vs=new $t;function qs(t){Bs.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Hs(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}qs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:qs,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(Oe.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(zs,Us,Gs),Vs.set(0,0,1).applyQuaternion(Us);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(zs.x,n),e.positionY.linearRampToValueAtTime(zs.y,n),e.positionZ.linearRampToValueAtTime(zs.z,n),e.orientationX.linearRampToValueAtTime(Vs.x,n),e.orientationY.linearRampToValueAtTime(Vs.y,n),e.orientationZ.linearRampToValueAtTime(Vs.z,n)}else e.setPosition(zs.x,zs.y,zs.z),e.setOrientation(Vs.x,Vs.y,Vs.z)}}}),Object.assign(Hs.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}});var Ws="\\[\\]\\.:\\/",Xs=new RegExp("[\\[\\]\\.:\\/]","g"),Ys="[^\\[\\]\\.:\\/]",Qs="[^"+Ws.replace("\\.","")+"]",Zs=/((?:WC+[\/:])*)/.source.replace("WC",Ys),Ks=/(WCOD+)?/.source.replace("WCOD",Qs),Js=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ys),$s=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ys),tu=new RegExp("^"+Zs+Ks+Js+$s+"$"),eu=["material","materials","bones"];function nu(t,e,n){this.path=e,this.parsedPath=n||nu.parseTrackName(e),this.node=nu.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function ru(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function iu(t,e,n){yo.call(this,t,e),this.meshPerAttribute=n||1}function ou(){}function au(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}Object.assign(nu,{Composite:function(){},create:function(t,e,n){return new nu(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Xs,"")},parseTrackName:function(t){var e=tu.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==eu.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;var o=t(i.children);if(o)return o}return null}(t.children);if(r)return r}return null}}),Object.assign(nu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=nu.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(nu.prototype,{_getValue_unbound:nu.prototype.getValue,_setValue_unbound:nu.prototype.setValue}),ru.prototype.clone=function(){return new ru(void 0===this.value.clone?this.value:this.value.clone())},iu.prototype=Object.assign(Object.create(yo.prototype),{constructor:iu,isInstancedInterleavedBuffer:!0,copy:function(t){return yo.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(au.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Ut.clamp(e/this.radius,-1,1))),this}});new Gt;new $t,new $t;function su(t){Oe.call(this),this.material=t,this.render=function(){}}su.prototype=Object.create(Oe.prototype),su.prototype.constructor=su,su.prototype.isImmediateRenderObject=!0;new $t;new $t,new se,new se;new $t,new ln,new ln;new $t,new $t,new $t;new $t,new lr;new ze;new $t;Math.pow(2,8),r={},Object(c.a)(r,Tt,0),Object(c.a)(r,Pt,1),Object(c.a)(r,Ct,2),Object(c.a)(r,It,3),Object(c.a)(r,Rt,4),Object(c.a)(r,kt,5),Object(c.a)(r,Mt,6),new ys;var uu=(1+Math.sqrt(5))/2,cu=1/uu;new $t(1,1,1),new $t(-1,1,1),new $t(1,1,-1),new $t(-1,1,-1),new $t(0,uu,cu),new $t(0,uu,-cu),new $t(cu,0,uu),new $t(-cu,0,uu),new $t(uu,cu,0),new $t(-uu,cu,0);function lu(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ts.call(this,t),this.type="catmullrom",this.closed=!0}function fu(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ts.call(this,t),this.type="catmullrom"}function hu(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ts.call(this,t),this.type="catmullrom"}Wa.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Wa.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(hs.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new rr,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new $t(i.x,i.y,i.z||0))}return e}}),Object.assign(ps.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),lu.prototype=Object.create(ts.prototype),fu.prototype=Object.create(ts.prototype),hu.prototype=Object.create(ts.prototype),Object.assign(hu.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Object.assign(Fa.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),vs.extractUrlBase(t)}}),Fa.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(ze.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),mr.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Object.assign(Ut,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ut.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ut.ceilPowerOfTwo(t)}}),Object.assign(Vt.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(se.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new $t).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),Ye.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Zt.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(an.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(an,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),an.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),an.getNormal(t,e,n,r)}}),Object.assign(ds.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Yo(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ia(this,t)}}),Object.assign(Gt.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign($t.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xt.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(rr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Oe.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Oe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Zn.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Zn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(wo.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(xo.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Wa.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),fr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(gs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(An.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Nt},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Nt)}}}),Object.assign(An.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Nt:Lt),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Fn.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new An(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Fn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(ou.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(yo.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Nt},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(yo.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Nt:Lt),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.defineProperties(ru.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(yn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ln}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(va.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(cr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(go.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(go.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Pt:Tt}}}),Object.defineProperties(uo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Bs.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Ss).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Hs.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},pr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var pu={merge:function(t,e,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};qt.crossOrigin=void 0,qt.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ha;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},qt.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new qa;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},qt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},qt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var du={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"114"}}));var gu=Object.freeze({__proto__:null,ACESFilmicToneMapping:5,AddEquation:W,AddOperation:2,AdditiveBlending:2,AlphaFormat:1021,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:function(){},AmbientLightProbe:Ms,AnimationClip:ja,AnimationLoader:Ua,AnimationMixer:function(){},AnimationObjectGroup:function(){},AnimationUtils:xa,ArcCurve:Ya,ArrayCamera:function(){},ArrowHelper:function(){},Audio:Bs,AudioAnalyser:Hs,AudioContext:Os,AudioListener:Fs,AudioLoader:Ss,AxesHelper:function(){},AxisHelper:function(){},BackSide:1,BasicDepthPacking:3200,BasicShadowMap:0,BinaryTextureLoader:function(){},Bone:function(){},BooleanKeyframeTrack:Pa,BoundingBoxHelper:function(){},Box2:function(){},Box3:ze,Box3Helper:function(){},BoxBufferGeometry:or,BoxGeometry:ir,BoxHelper:function(){},BufferAttribute:An,BufferGeometry:Fn,BufferGeometryLoader:function(){},ByteType:1010,Cache:La,Camera:lr,CameraHelper:function(){},CanvasRenderer:function(){},CanvasTexture:function(){},CatmullRomCurve3:ts,CineonToneMapping:4,CircleBufferGeometry:ha,CircleGeometry:fa,ClampToEdgeWrapping:Z,Clock:ks,ClosedSplineCurve3:lu,Color:ln,ColorKeyframeTrack:Ma,CompressedTexture:So,CompressedTextureLoader:Ga,ConeBufferGeometry:la,ConeGeometry:ca,CubeCamera:pr,CubeGeometry:ir,CubeReflectionMapping:301,CubeRefractionMapping:302,CubeTexture:Dr,CubeTextureLoader:qa,CubeUVReflectionMapping:Y,CubeUVRefractionMapping:307,CubicBezierCurve:is,CubicBezierCurve3:os,CubicInterpolant:Oa,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:Wa,CurvePath:hs,CustomBlending:5,CylinderBufferGeometry:ua,CylinderGeometry:sa,Cylindrical:function(){},DataTexture:gr,DataTexture2DArray:Fr,DataTexture3D:Br,DataTextureLoader:function(){},DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:Da,DepthFormat:ht,DepthStencilFormat:pt,DepthTexture:To,DirectionalLight:function(){},DirectionalLightHelper:function(){},DirectionalLightShadow:function(){},DiscreteInterpolant:Ta,DodecahedronBufferGeometry:zo,DodecahedronGeometry:Bo,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicBufferAttribute:function(){},DynamicCopyUsage:35050,DynamicDrawUsage:Nt,DynamicReadUsage:35049,EdgesGeometry:aa,EdgesHelper:function(){},EllipseCurve:Xa,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,Euler:le,EventDispatcher:Dt,ExtrudeBufferGeometry:Qo,ExtrudeGeometry:Yo,Face3:dn,Face4:function(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new dn(t,e,n,i,o,a)},FaceColors:1,FileLoader:za,FlatShading:1,Float32Attribute:function(){},Float32BufferAttribute:Tn,Float64Attribute:function(){},Float64BufferAttribute:Pn,FloatType:st,Fog:function(){},FogExp2:function(){},Font:xs,FontLoader:function(){},FrontFaceDirectionCCW:1,FrontFaceDirectionCW:0,FrontSide:0,Frustum:mr,GammaEncoding:Mt,Geometry:rr,GeometryUtils:pu,GreaterDepth:6,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:function(){},Group:ho,HalfFloatType:ut,HemisphereLight:function(){},HemisphereLightHelper:function(){},HemisphereLightProbe:Ps,IcosahedronBufferGeometry:Fo,IcosahedronGeometry:Do,ImageBitmapLoader:_s,ImageLoader:Va,ImageUtils:qt,ImmediateRenderObject:su,IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:As,InstancedBufferGeometry:ms,InstancedInterleavedBuffer:iu,InstancedMesh:function(){},Int16Attribute:function(){},Int16BufferAttribute:xn,Int32Attribute:function(){},Int32BufferAttribute:On,Int8Attribute:function(){},Int8BufferAttribute:bn,IntType:1013,InterleavedBuffer:yo,InterleavedBufferAttribute:mo,Interpolant:Ea,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,InvertStencilOp:5386,JSONLoader:function(){},KeepStencilOp:jt,KeyframeTrack:function(){},LOD:wo,LatheBufferGeometry:ra,LatheGeometry:na,Layers:fe,LensFlare:function(){},LessDepth:2,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:gs,LightProbe:Ts,LightShadow:function(){},Line:function(){},Line3:function(){},LineBasicMaterial:Eo,LineCurve:as,LineCurve3:ss,LineDashedMaterial:wa,LineLoop:function(){},LinePieces:1,LineSegments:function(){},LineStrip:0,LinearEncoding:Tt,LinearFilter:et,LinearInterpolant:Sa,LinearMipMapLinearFilter:1008,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:rt,LinearMipmapNearestFilter:nt,LinearToneMapping:1,Loader:Fa,LoaderUtils:vs,LoadingManager:Na,LogLuvEncoding:3003,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,LuminanceAlphaFormat:1025,LuminanceFormat:1024,MOUSE:q,Material:yn,MaterialLoader:function(){},Math:Ut,MathUtils:Ut,Matrix3:Vt,Matrix4:se,MaxEquation:104,Mesh:Zn,MeshBasicMaterial:vn,MeshDepthMaterial:ao,MeshDistanceMaterial:so,MeshFaceMaterial:function(){},MeshLambertMaterial:ba,MeshMatcapMaterial:_a,MeshNormalMaterial:Aa,MeshPhongMaterial:va,MeshPhysicalMaterial:ya,MeshStandardMaterial:ga,MeshToonMaterial:ma,MinEquation:103,MirroredRepeatWrapping:K,MixOperation:1,MultiMaterial:function(){},MultiplyBlending:4,MultiplyOperation:0,NearestFilter:J,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:tt,NearestMipmapNearestFilter:$,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColors:0,NoToneMapping:0,NormalBlending:1,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:Ca,Object3D:Oe,ObjectLoader:function(){},ObjectSpaceNormalMap:1,OctahedronBufferGeometry:No,OctahedronGeometry:Lo,OneFactor:201,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:205,OneMinusSrcColorFactor:203,OrthographicCamera:ys,PCFShadowMap:1,PCFSoftShadowMap:2,PMREMGenerator:function(){},ParametricBufferGeometry:Co,ParametricGeometry:Mo,Particle:function(){},ParticleBasicMaterial:function(){},ParticleSystem:function(){},ParticleSystemMaterial:function(){},Path:ps,PerspectiveCamera:fr,Plane:Ye,PlaneBufferGeometry:xr,PlaneGeometry:wr,PlaneHelper:function(){},PointCloud:function(){},PointCloudMaterial:function(){},PointLight:function(){},PointLightHelper:function(){},Points:function(){},PointsMaterial:Oo,PolarGridHelper:function(){},PolyhedronBufferGeometry:Ro,PolyhedronGeometry:Io,PositionalAudio:qs,PropertyBinding:nu,PropertyMixer:function(){},QuadraticBezierCurve:us,QuadraticBezierCurve3:cs,Quaternion:Zt,QuaternionKeyframeTrack:Ia,QuaternionLinearInterpolant:function(){},REVISION:"114",RGBADepthPacking:3201,RGBAFormat:ft,RGBAIntegerFormat:1033,RGBA_ASTC_10x10_Format:37819,RGBA_ASTC_10x5_Format:37816,RGBA_ASTC_10x6_Format:37817,RGBA_ASTC_10x8_Format:37818,RGBA_ASTC_12x10_Format:37820,RGBA_ASTC_12x12_Format:37821,RGBA_ASTC_4x4_Format:37808,RGBA_ASTC_5x4_Format:37809,RGBA_ASTC_5x5_Format:37810,RGBA_ASTC_6x5_Format:37811,RGBA_ASTC_6x6_Format:37812,RGBA_ASTC_8x5_Format:37813,RGBA_ASTC_8x6_Format:37814,RGBA_ASTC_8x8_Format:37815,RGBA_ETC2_EAC_Format:xt,RGBA_PVRTC_2BPPV1_Format:_t,RGBA_PVRTC_4BPPV1_Format:bt,RGBA_S3TC_DXT1_Format:gt,RGBA_S3TC_DXT3_Format:yt,RGBA_S3TC_DXT5_Format:vt,RGBDEncoding:kt,RGBEEncoding:Ct,RGBEFormat:1023,RGBFormat:lt,RGBIntegerFormat:1032,RGBM16Encoding:Rt,RGBM7Encoding:It,RGB_ETC1_Format:36196,RGB_ETC2_Format:wt,RGB_PVRTC_2BPPV1_Format:At,RGB_PVRTC_4BPPV1_Format:mt,RGB_S3TC_DXT1_Format:dt,RGFormat:1030,RGIntegerFormat:1031,RawShaderMaterial:da,Ray:qe,Raycaster:ou,RectAreaLight:function(){},RedFormat:1028,RedIntegerFormat:1029,ReinhardToneMapping:2,RepeatWrapping:Q,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingBufferGeometry:ea,RingGeometry:ta,SRGB8_ALPHA8_ASTC_10x10_Format:37851,SRGB8_ALPHA8_ASTC_10x5_Format:37848,SRGB8_ALPHA8_ASTC_10x6_Format:37849,SRGB8_ALPHA8_ASTC_10x8_Format:37850,SRGB8_ALPHA8_ASTC_12x10_Format:37852,SRGB8_ALPHA8_ASTC_12x12_Format:37853,SRGB8_ALPHA8_ASTC_4x4_Format:37840,SRGB8_ALPHA8_ASTC_5x4_Format:37841,SRGB8_ALPHA8_ASTC_5x5_Format:37842,SRGB8_ALPHA8_ASTC_6x5_Format:37843,SRGB8_ALPHA8_ASTC_6x6_Format:37844,SRGB8_ALPHA8_ASTC_8x5_Format:37845,SRGB8_ALPHA8_ASTC_8x6_Format:37846,SRGB8_ALPHA8_ASTC_8x8_Format:37847,Scene:Se,SceneUtils:du,ShaderChunk:Er,ShaderLib:Or,ShaderMaterial:cr,ShadowMaterial:pa,Shape:ds,ShapeBufferGeometry:oa,ShapeGeometry:ia,ShapePath:ws,ShapeUtils:Xo,ShortType:1011,Skeleton:xo,SkeletonHelper:function(){},SkinnedMesh:function(){},SmoothShading:2,Sphere:Ve,SphereBufferGeometry:$o,SphereGeometry:Jo,Spherical:au,SphericalHarmonics3:function(){},SphericalReflectionMapping:305,Spline:hu,SplineCurve:ls,SplineCurve3:fu,SpotLight:function(){},SpotLightHelper:function(){},SpotLightShadow:function(){},Sprite:function(){},SpriteMaterial:Ao,SrcAlphaFactor:204,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Lt,StaticReadUsage:35045,StereoCamera:Rs,StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:Ra,SubtractEquation:101,SubtractiveBlending:3,TOUCH:H,TangentSpaceNormalMap:0,TetrahedronBufferGeometry:jo,TetrahedronGeometry:ko,TextBufferGeometry:Ko,TextGeometry:Zo,Texture:Wt,TextureLoader:Ha,TorusBufferGeometry:Wo,TorusGeometry:Ho,TorusKnotBufferGeometry:qo,TorusKnotGeometry:Vo,Triangle:an,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeBufferGeometry:Go,TubeGeometry:Uo,UVMapping:X,Uint16Attribute:function(){},Uint16BufferAttribute:En,Uint32Attribute:function(){},Uint32BufferAttribute:Sn,Uint8Attribute:function(){},Uint8BufferAttribute:_n,Uint8ClampedAttribute:function(){},Uint8ClampedBufferAttribute:wn,Uncharted2ToneMapping:3,Uniform:ru,UniformsLib:Ar,UniformsUtils:ur,UnsignedByteType:it,UnsignedInt248Type:ct,UnsignedIntType:at,UnsignedShort4444Type:1017,UnsignedShort5551Type:1018,UnsignedShort565Type:1019,UnsignedShortType:ot,VSMShadowMap:3,Vector2:Gt,Vector3:$t,Vector4:Xt,VectorKeyframeTrack:ka,Vertex:function(){},VertexColors:2,VideoTexture:function(){},WebGLCubeRenderTarget:dr,WebGLMultisampleRenderTarget:Qt,WebGLRenderTarget:Yt,WebGLRenderTargetCube:function(){},WebGLRenderer:go,WebGLUtils:fo,WireframeGeometry:Po,WireframeHelper:function(){},WrapAroundEnding:St,XHRLoader:function(){},ZeroCurvatureEnding:Et,ZeroFactor:200,ZeroSlopeEnding:Ot,ZeroStencilOp:0,sRGBEncoding:Pt});function yu(){var t=this;this.paused=!1,this.time=0,this.bindListeners({play:b.play,pause:b.pause});window.requestAnimationFrame((function e(n){window.requestAnimationFrame(e),t.paused||(t.time=n,t.emitChange())}))}se.prototype.getInverse=function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],f=r[7],h=r[8],p=r[9],d=r[10],g=r[11],y=r[12],v=r[13],m=r[14],A=r[15],b=i*c,_=i*p,w=i*v,x=i*l,E=u*o,O=u*p,S=u*v,T=u*a,P=h*o,M=h*c,C=h*v,I=h*a,R=h*l,k=y*p,j=y*d,L=y*s,N=y*g,D=o*l,F=o*f,B=c*a,z=c*d,U=p*a,G=p*l,V=p*m,q=v*a,H=v*l,W=v*d,X=d*A,Y=m*s,Q=m*f,Z=m*g,K=p*Q-W*f+H*g-c*Z-G*A+c*X,J=j*f-h*Q-N*l+u*Z+R*A-u*X,$=C*f-k*f+N*c-S*g-M*A+O*A,tt=y*G-h*H-j*c+u*W+M*m-O*m,et=i*K+o*J+a*$+s*tt;if(0===et){var nt="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(nt);return console.warn(nt),this.identity()}return n[0]=K,n[1]=W*s-V*s-q*g+o*Z+U*A-o*X,n[2]=c*Y-H*s+q*f-o*Q-B*A+D*A,n[3]=G*s-z*s-U*f+F*d+B*g-D*g,n[4]=J,n[5]=h*Y-j*s+N*a-i*Z-I*A+i*X,n[6]=L*l-u*Y-y*a*f+i*Q+T*A-x*A,n[7]=u*d*s-R*s+I*f-i*d*f-T*g+x*g,n[8]=$,n[9]=k*s-C*s-N*o+w*g+P*A-_*A,n[10]=S*s-L*c+y*F-w*f-E*A+b*A,n[11]=M*s-O*s-h*F+_*f+E*g-b*g,n[12]=tt,n[13]=C*a-k*a+j*o-i*W-P*m+i*V,n[14]=y*B-S*a-y*D+i*H+E*m-b*m,n[15]=O*a-M*a+R*o-i*G-E*d+i*z,this.multiplyScalar(1/et)},yu.prototype.play=function(){return this.paused=!1,!1},yu.prototype.pause=function(){return this.paused=!0,!1},yu.displayName="AnimationStore";var vu=A.createStore(yu),mu=A.generateActions("panToPosition","setPosition","toggleTracking");function Au(){this.needsRender=!1,this.animating=!1,this.env=!1,this.clock=new gu.Clock,this.bindListeners({scheduleRender:[mu.panToPosition,mu.setPosition,O.addBuiltinOverlay,O.addOverlay,O.setFeatures,O.setImageryBig,b.containerMounted,b.containerResized,b.needsRender,b.setHD,_.featureSelected,_.focusOnLocation,_.inputEnded,_.setCameraMode,_.setCamera,_.setCameraTarget,_.setCameraPosition,_.setTerrainEffectContours,_.setTerrainEffectFlats,_.setTerrainEffectGrade,_.setTerrainEffectHeight,_.setTerrainEffectNone],scheduleRenderAnimated:O.updateOverlay}),vu.listen(this.tick.bind(this))}Au.prototype.scheduleRender=function(t){return t&&(t.animating&&(this.animating=!0),t.env&&(this.env=!0)),this.needsRender=!0,!1},Au.prototype.scheduleRenderAnimated=function(){return this.scheduleRender({animating:!0})},console.warn("Need to fix controls&render loop"),Au.prototype.tick=function(){this.needsRender&&(this.clock.getElapsedTime(),this.emitChange()),this.animating=!1,this.env=!1},Au.displayName="RenderStore";var bu=A.createStore(Au),_u=document.createElement("canvas"),wu=_u.getContext("webgl")||_u.getContext("experimental-webgl");_u=void 0;var xu,Eu=function(t,e){var n=wu.createShader(t);if(wu.shaderSource(n,e),wu.compileShader(n),!wu.getShaderParameter(n,wu.COMPILE_STATUS)){var r=wu.getShaderInfoLog(n);return console.error("Error compiling shader:\n\n",e,r),null}return n},Ou=function(t,e){var n=wu.createProgram(),r=wu.attachShader(n,Eu(wu.VERTEX_SHADER,t)),i=wu.attachShader(n,Eu(wu.FRAGMENT_SHADER,e));if(wu.linkProgram(n),!wu.getProgramParameter(n,wu.LINK_STATUS)){var o=wu.getProgramInfoLog(n);return console.error("Error linking program",n,o),null}return wu.deleteShader(r),wu.deleteShader(i),n},Su=function(){arguments.length&&console.log.apply(console,arguments)},Tu=performance||Date;xu={raw:function(){var t=arguments[1].toUpperCase(),e=[t],n=arguments[2],r=["eventCategory","eventAction","eventLabel","eventValue","timingCategory","timingVar","timingLabel","timingValue"];r.forEach((function(t){void 0!==n[t]&&("timingValue"===t?e.push(n[t].toFixed(0)+"ms"):e.push(n[t]))})),Su.apply(window,e)},event:function(t,e,n,r){var i={};t&&(i.eventCategory=t),e&&(i.eventAction=e),n&&(i.eventLabel=n),r&&(i.eventValue=r),xu.raw("send","event",i)},timing:function(t,e,n,r){var i={};t&&(i.timingCategory=t),e&&(i.timingVar=e),n&&(i.timingLabel=n),r&&(i.timingValue=Math.round(r)),xu.raw("send","timing",i)},onload:null,now:function(){return Tu.now()}},setTimeout((function(){xu.onload&&xu.onload()}));var Pu=xu,Mu=null!==wu?wu.getSupportedExtensions():[],Cu=["ANGLE_instanced_arrays","OES_standard_derivatives"].filter((function(t){return-1===Mu.indexOf(t)})),Iu=["WEBGL_depth_texture"].filter((function(t){return-1===Mu.indexOf(t)}));Pu.onload=function(){if(Pu.event("webgl","supported",Ru.supported?"yes":"no"),Pu.event("webgl","render_565",Ru.render565?"yes":"no"),Ru.missing.length>0)for(var t=0;t<Ru.missing.length;t++)Pu.event("webgl","missing_extension",Ru.missing[t]);if(Ru.missingOptional.length>0)for(t=0;t<Ru.missingOptional.length;t++)Pu.event("webgl","missing_optional_extension",Ru.missingOptional[t])};var Ru={supported:null!==wu,supports:function(t){return-1!==Mu.indexOf(t)},extensions:Mu,render565:!1,s3tc:!1,pvrtc:!1,missing:Cu,missingOptional:Iu,workers:!!window.Worker};if(Ru.supported){var ku=Ou("void main() { gl_Position = vec4( 1.0, 1.0, 1.0, 1.0); }","precision mediump float; uniform sampler2D uiiii_tex; void main() { gl_FragColor = texture2D( uiiii_tex, vec2( 0.5, 0.5 ) ); }");Ru.render565=function(t,e){var n,r,i=!1;try{if(t&&!wu.getExtension(t))return!1;n=wu.createTexture(),wu.bindTexture(wu.TEXTURE_2D,n),wu.texImage2D(wu.TEXTURE_2D,0,wu.RGB,1,1,0,wu.RGB,e,null),wu.texParameteri(wu.TEXTURE_2D,wu.TEXTURE_MIN_FILTER,wu.NEAREST),wu.texParameteri(wu.TEXTURE_2D,wu.TEXTURE_MAG_FILTER,wu.NEAREST),r=wu.createFramebuffer(),wu.bindFramebuffer(wu.FRAMEBUFFER,r),wu.framebufferTexture2D(wu.FRAMEBUFFER,wu.COLOR_ATTACHMENT0,wu.TEXTURE_2D,n,0),i=wu.checkFramebufferStatus(wu.FRAMEBUFFER)===wu.FRAMEBUFFER_COMPLETE}catch(o){i=!1}finally{n&&wu.deleteTexture(n),r&&wu.deleteFramebuffer(r)}return i}(null,wu.UNSIGNED_SHORT_5_6_5),wu.deleteProgram(ku),ku=void 0;var ju=wu.getExtension("WEBGL_compressed_texture_s3tc")||wu.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||wu.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),Lu=wu.getExtension("WEBGL_compressed_texture_pvrtc")||wu.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");Ru.s3tc=null!==ju,Ru.pvrtc=null!==Lu,Ru.depthTexture=Ru.supports("WEBGL_depth_texture")}function Nu(){this.width=256,this.height=256,this.lastResize=0,this.renderRatio=1,this.renderWidth=256,this.renderHeight=256,this.pixelRatio=window.devicePixelRatio,this.canvasWidth=256,this.canvasHeight=256,this.aspect=1,this.fov=70,this.lodScale=10,this.hd=!0,this.forceHd=!1,this.lowDefMove=Ru.depthTexture,this.lowDefScale=1,this.element=document.createElement("div"),this.element.style.position="relative",this.element.style.width="100%",this.element.style.height="100%",this.bindListeners({containerResized:[b.containerResized,b.containerMounted],featureSelected:_.featureSelected,setFieldOfView:b.setFieldOfView,forceHD:b.forceHD,setHD:b.setHD,setSize:b.setSize,inputStarted:_.inputStarted,inputEnded:_.inputEnded}),this.exportPublicMethods({toClipSpace:this.toClipSpace.bind(this),fromClipSpace:this.fromClipSpace.bind(this),flipY:this.flipY.bind(this)});var t=this;vu.listen((function(){if(0!==t.element.offsetWidth&&0!==t.element.offsetHeight){var e=t.element.getBoundingClientRect();e.width/e.height===t.aspect&&t.element.offsetWidth===t.width&&t.element.offsetHeight===t.height||b.containerResized()}}))}Nu.prototype.containerResized=function(){if(this.element.offsetWidth>0&&this.element.offsetHeight>0){var t=this.element.getBoundingClientRect();this.aspect=t.width/t.height,this.setSize({width:this.element.offsetWidth,height:this.element.offsetHeight}),this.lastResize=bu.getState().clock.getElapsedTime()}},Nu.prototype.featureSelected=function(t){return this.element.style.cursor=t?"pointer":"auto",!1},Nu.prototype.updateSizes=function(){this.renderWidth=this.width*this.renderRatio,this.renderHeight=this.height*this.renderRatio,this.pixelRatio=Ru.depthTexture?window.devicePixelRatio:this.renderRatio,this.canvasWidth=this.width*this.pixelRatio,this.canvasHeight=this.height*this.pixelRatio},Nu.prototype.getRenderRatio=function(){if(!Ru.depthTexture)return 1;for(var t=[1,1.2,1.5,2],e=0,n=this,r=function(e){return t[e]*n.width*t[e]*n.height};t[e+1]&&r(e+1)<15e5;)e++;return t[e]},Nu.prototype.inputStarted=function(){if(!this.lowDefMove)return!1;var t=this.getRenderRatio();this.renderRatio=Math.max(.8,.75*t),this.lowDefScale=this.renderRatio/t,this.updateSizes()},Nu.prototype.inputEnded=function(){if(!this.lowDefMove)return!1;this.renderRatio=this.getRenderRatio(),this.lowDefScale=1,this.updateSizes()},Nu.prototype.setSize=function(t){this.width=t.width,this.height=t.height,this.lodScale=1.5*Math.min(1e3/this.width,1),this.renderRatio=this.getRenderRatio(),this.updateSizes()},Nu.prototype.forceHD=function(t){this.forceHd=t,this.renderRatio=this.getRenderRatio(),this.updateSizes()},Nu.prototype.setHD=function(t){this.hd=t,this.renderRatio=this.getRenderRatio(),this.updateSizes()},Nu.prototype.setFieldOfView=function(t){this.fov=t},Nu.prototype.toClipSpace=function(t){return new gu.Vector2(t.x/this.width*2-1,1-t.y/this.height*2)},Nu.prototype.fromClipSpace=function(t){return new gu.Vector2(.5*(1+t.x)*this.width,.5*(1-t.y)*this.height)},Nu.prototype.flipY=function(t){return new gu.Vector2(t.x,this.height-t.y)},Nu.displayName="ContainerStore";var Du=A.createStore(Nu),Fu=new gu.PerspectiveCamera(45,1,250,25e5);Du.listen((function(t){Fu.aspect=t.aspect,Fu.fov=t.fov/Math.max(Fu.aspect,1),Fu.updateProjectionMatrix()}));var Bu=function(t){var e=Du.getState().element;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new $t,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=.17*Math.PI,this.maxPolarAngle=.33*Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=.5,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=50,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.lock2D=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,MINUS:189,PLUS:187},this.mouseButtons={LEFT:q.ROTATE,MIDDLE:q.DOLLY,RIGHT:q.PAN},this.touches={ONE:H.ROTATE,TWO:H.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.setDistanceToTarget=function(t){bu.getState().clock.getElapsedTime()-Du.getState().lastResize>1&&(r.target.sub(r.object.position),r.target.setLength(t),r.target.add(r.object.position))},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),a=o.NONE},this.update=function(){var e=new $t,n=(new Zt).setFromUnitVectors(t.up,new $t(0,1,0)),c=n.clone().inverse(),d=new $t,g=new Zt;return function(){var t=r.object.position;e.copy(t).sub(r.target),e.applyQuaternion(n),u.setFromVector3(e),r.autoRotate&&a===o.NONE&&O(2*Math.PI/60/60*r.autoRotateSpeed),r.lock2D?(void 0===r._oldPhi&&(r._oldPhi=u.phi),l.phi=-u.phi):void 0!==r._oldPhi&&(l.phi=r._oldPhi-u.phi,Math.abs(l.phi)<.05&&delete r._oldPhi),r.enableDamping?(u.theta+=l.theta*r.dampingFactor,u.phi+=l.phi*r.dampingFactor):(u.theta+=l.theta,u.phi+=l.phi),u.theta=Math.max(r.minAzimuthAngle,Math.min(r.maxAzimuthAngle,u.theta)),r.lock2D||void 0!==r._oldPhi||(u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi))),u.makeSafe(),f-=1;var y=2*r.dampingFactor;return u.radius*=1+f*y,u.radius=Math.max(r.minDistance,Math.min(r.maxDistance,u.radius)),!0===r.enableDamping?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),e.setFromSpherical(u),e.applyQuaternion(c),t.copy(r.target).add(e),r.object.lookAt(r.target),!0===r.enableDamping?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),f*=1-y,f+=1,!!(p||d.distanceToSquared(r.object.position)>s||8*(1-g.dot(r.object.quaternion))>s)&&(r.dispatchEvent(i),r.object.position.forceHeight=!0,_.setCamera({position:r.object.position,target:r.target}),d.copy(r.object.position),g.copy(r.object.quaternion),p=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",J,!1),r.domElement.removeEventListener("mousedown",G,!1),r.domElement.removeEventListener("wheel",X,{capture:!1,passive:!1}),r.domElement.removeEventListener("touchstart",Q,!1),r.domElement.removeEventListener("touchend",K,!1),r.domElement.removeEventListener("touchmove",Z,!1),r.domElement.ownerDocument.removeEventListener("mousemove",V,!1),r.domElement.ownerDocument.removeEventListener("mouseup",W,!1),r.domElement.removeEventListener("keydown",Y,!1)};var n,r=this,i={type:"change"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=o.NONE,s=1e-6,u=new au,l=new au,f=1,h=new $t,p=!1,d=new Gt,g=new Gt,y=new Gt,v=new Gt,m=new Gt,A=new Gt,b=new Gt,w=new Gt,x=new Gt;function E(t){return Math.pow(.97,void 0!==t?.01*Math.abs(t):r.zoomSpeed)}function O(t){l.theta-=t}function S(t){l.phi-=t}var T=function(){var t=new $t;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),h.add(t)}}(),P=function(){var t=new $t;return function(e,n){!0===r.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(r.object.up,t)),t.multiplyScalar(e),h.add(t)}}(),M=function(){var t=new $t;return function(e,n){var i=r.domElement;if(r.object.isPerspectiveCamera){var o=r.object.position;t.copy(o).sub(r.target);var a=t.length();a*=Math.tan(r.object.fov/2*Math.PI/180),T(2*e*a/i.clientHeight,r.object.matrix),P(2*n*a/i.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(T(e*(r.object.right-r.object.left)/r.object.zoom/i.clientWidth,r.object.matrix),P(n*(r.object.top-r.object.bottom)/r.object.zoom/i.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function C(t){r.object.isPerspectiveCamera?f/=t:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*t)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function I(t){r.object.isPerspectiveCamera?f*=t:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/t)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(t){d.set(t.clientX,t.clientY)}function k(t){v.set(t.clientX,t.clientY)}function j(t){var e;r.dispatchEvent((e={type:"click",srcElement:t.srcElement||t.target,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY},Object(c.a)(e,"pageY",t.pageY),Object(c.a)(e,"altKey",t.altKey),Object(c.a)(e,"detail",t.clickCount),e))}function L(t){if(1==t.touches.length)d.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);d.set(e,n)}}function N(t){if(1==t.touches.length)v.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);v.set(e,n)}}function D(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);b.set(0,r)}function F(t){if(1==t.touches.length)g.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);g.set(e,n)}y.subVectors(g,d).multiplyScalar(r.rotateSpeed);var i=r.domElement;O(2*Math.PI*y.x/i.clientHeight),S(2*Math.PI*y.y/i.clientHeight),d.copy(g)}function B(t){if(1==t.touches.length)m.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);m.set(e,n)}A.subVectors(m,v).multiplyScalar(r.panSpeed),M(A.x,A.y),v.copy(m)}function z(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);w.set(0,i),x.set(0,Math.pow(w.y/b.y,r.zoomSpeed)),C(x.y),b.copy(w)}function U(t){var e=bu.getState().clock.getElapsedTime();(!n||e-n.time>.3)&&((n=t).time=e,n.clickCount=0),n.clickCount++}function G(t){if(!1!==r.enabled){var e;switch(t.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus(),t.button){case 0:e=r.mouseButtons.LEFT;break;case 1:e=r.mouseButtons.MIDDLE;break;case 2:e=r.mouseButtons.RIGHT;break;default:e=-1}switch(e){case q.DOLLY:if(!1===r.enableZoom)return;!function(t){b.set(t.clientX,t.clientY)}(t),a=o.DOLLY;break;case q.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===r.enablePan)return;k(t),a=o.PAN}else{if(!1===r.enableRotate)return;R(t),a=o.ROTATE}break;case q.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===r.enableRotate)return;R(t),a=o.ROTATE}else{if(!1===r.enablePan)return;k(t),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&(r.domElement.ownerDocument.addEventListener("mousemove",V,!1),r.domElement.ownerDocument.addEventListener("mouseup",W,!1),U(t),_.inputStarted())}}function V(t){if(!1!==r.enabled)switch(t.preventDefault(),a){case o.ROTATE:if(!1===r.enableRotate)return;!function(t){g.set(t.clientX,t.clientY),y.subVectors(g,d).multiplyScalar(r.rotateSpeed);var e=r.domElement;O(2*Math.PI*y.x/e.clientHeight),S(2*Math.PI*y.y/e.clientHeight),d.copy(g),r.update()}(t);break;case o.DOLLY:if(!1===r.enableZoom)return;!function(t){w.set(t.clientX,t.clientY),x.subVectors(w,b),x.y>0?C(E()):x.y<0&&I(E()),b.copy(w),r.update()}(t);break;case o.PAN:if(!1===r.enablePan)return;!function(t){m.set(t.clientX,t.clientY),A.subVectors(m,v).multiplyScalar(r.panSpeed),M(A.x,A.y),v.copy(m),r.update()}(t)}}function W(t){!1!==r.enabled&&(_.inputEnded(),function(t){var e=bu.getState().clock.getElapsedTime();n.clientX===t.clientX&&n.clientY===t.clientY&&e-n.time<.3&&j(n)}(t),r.domElement.ownerDocument.removeEventListener("mousemove",V,!1),r.domElement.ownerDocument.removeEventListener("mouseup",W,!1),a=o.NONE)}function X(t){!1===r.enabled||!1===r.enableZoom||a!==o.NONE&&a!==o.ROTATE||(t.preventDefault(),t.stopPropagation(),_.inputStarted(),function(t){var e=t.deltaY;t.deltaMode===t.DOM_DELTA_LINE?e*=32:t.deltaMode===t.DOM_DELTA_PAGE&&(e*=100),e<0?I(E(e)):e>0&&C(E(e)),r.update()}(t),_.inputEnded())}function Y(t){!1!==r.enabled&&!1!==r.enableKeys&&!1!==r.enablePan&&function(t){var e=!1;switch(t.keyCode){case r.keys.UP:M(0,r.keyPanSpeed),e=!0;break;case r.keys.BOTTOM:M(0,-r.keyPanSpeed),e=!0;break;case r.keys.LEFT:M(r.keyPanSpeed,0),e=!0;break;case r.keys.RIGHT:M(-r.keyPanSpeed,0),e=!0;break;case r.keys.MINUS:C(E(300)),e=!0;break;case r.keys.PLUS:I(E(300)),e=!0}e&&(t.preventDefault(),r.update())}(t)}function Q(t){if(!1!==r.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(r.touches.ONE){case H.ROTATE:if(!1===r.enableRotate)return;L(t),a=o.TOUCH_ROTATE;break;case H.PAN:if(!1===r.enablePan)return;N(t),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(r.touches.TWO){case H.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(t){r.enableZoom&&D(t),r.enablePan&&N(t)}(t),a=o.TOUCH_DOLLY_PAN;break;case H.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(t){r.enableZoom&&D(t),r.enableRotate&&L(t)}(t),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&(_.inputStarted(),U(t))}}function Z(t){if(!1!==r.enabled)switch(t.preventDefault(),t.stopPropagation(),a){case o.TOUCH_ROTATE:if(!1===r.enableRotate)return;F(t),r.update();break;case o.TOUCH_PAN:if(!1===r.enablePan)return;B(t),r.update();break;case o.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(t){r.enableZoom&&z(t),r.enablePan&&B(t)}(t),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(t){r.enableZoom&&z(t),r.enableRotate&&F(t)}(t),r.update();break;default:a=o.NONE}}function K(t){!1!==r.enabled&&(_.inputEnded(),function(t){var e=bu.getState().clock.getElapsedTime();1===n.touches.length&&Math.abs(n.pageX-t.pageX)<25&&Math.abs(n.pageY-t.pageY)<25&&e-n.time<.3&&j(n)}(t),a=o.NONE)}function J(t){!1!==r.enabled&&t.preventDefault()}r.domElement.addEventListener("contextmenu",J,!1),r.domElement.addEventListener("mousedown",G,!1),r.domElement.addEventListener("wheel",X,!1),r.domElement.addEventListener("touchstart",Q,!1),r.domElement.addEventListener("touchend",K,!1),r.domElement.addEventListener("touchmove",Z,!1),r.domElement.addEventListener("keydown",Y,!1),-1===r.domElement.tabIndex&&(r.domElement.tabIndex=0),this.update()};(Bu.prototype=Object.create(Dt.prototype)).constructor=Bu;var zu=function(t,e){Bu.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=q.PAN,this.mouseButtons.RIGHT=q.ROTATE,this.touches.ONE=H.PAN,this.touches.TWO=H.DOLLY_ROTATE};(zu.prototype=Object.create(Dt.prototype)).constructor=zu;var Uu=Math.PI/180,Gu=180/Math.PI;function Vu(t){var e=qu(t[0]+1,t[2]);return[qu(t[0],t[2]),Hu(t[1]+1,t[2]),e,Hu(t[1],t[2])]}function qu(t,e){return t/Math.pow(2,e)*360-180}function Hu(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return Gu*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function Wu(t,e,n){var r=Ju(t,e,n);return r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r}function Xu(t){return[[2*t[0],2*t[1],t[2]+1],[2*t[0]+1,2*t[1],t[2]+1],[2*t[0]+1,2*t[1]+1,t[2]+1],[2*t[0],2*t[1]+1,t[2]+1]]}function Yu(t){return t[0]%2===0&&t[1]%2===0?[t[0]/2,t[1]/2,t[2]-1]:t[0]%2===0&&!t[1]%2===0?[t[0]/2,(t[1]-1)/2,t[2]-1]:!t[0]%2===0&&t[1]%2===0?[(t[0]-1)/2,t[1]/2,t[2]-1]:[(t[0]-1)/2,(t[1]-1)/2,t[2]-1]}function Qu(t){return Xu(Yu(t))}function Zu(t,e){for(var n=0;n<t.length;n++)if(Ku(t[n],e))return!0;return!1}function Ku(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ju(t,e,n){var r=Math.sin(e*Uu),i=Math.pow(2,n);return[i*(t/360+.5),i*(.5-.25*Math.log((1+r)/(1-r))/Math.PI),n]}var $u={tileToGeoJSON:function(t){var e=Vu(t);return{type:"Polygon",coordinates:[[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]],[e[0],e[1]]]]}},tileToBBOX:Vu,getChildren:Xu,getParent:Yu,getSiblings:Qu,hasTile:Zu,hasSiblings:function(t,e){for(var n=Qu(t),r=0;r<n.length;r++)if(!Zu(e,n[r]))return!1;return!0},tilesEqual:Ku,tileToQuadkey:function(t){for(var e="",n=t[2];n>0;n--){var r=0,i=1<<n-1;0!==(t[0]&i)&&r++,0!==(t[1]&i)&&(r+=2),e+=r.toString()}return e},quadkeyToTile:function(t){for(var e=0,n=0,r=t.length,i=r;i>0;i--){var o=1<<i-1,a=+t[r-i];1===a&&(e|=o),2===a&&(n|=o),3===a&&(e|=o,n|=o)}return[e,n,r]},pointToTile:Wu,bboxToTile:function(t){var e=Wu(t[0],t[1],32),n=Wu(t[2],t[3],32),r=[e[0],e[1],n[0],n[1]],i=function(t){for(var e=28,n=0;n<e;n++){var r=1<<32-(n+1);if((t[0]&r)!==(t[2]&r)||(t[1]&r)!==(t[3]&r))return n}return e}(r);return 0===i?[0,0,0]:[r[0]>>>32-i,r[1]>>>32-i,i]},pointToTileFraction:Ju},tc=($u.tileToGeoJSON,$u.tileToBBOX,$u.getChildren,$u.getParent,$u.getSiblings,$u.hasTile,$u.hasSiblings,$u.tilesEqual,$u.tileToQuadkey,$u.quadkeyToTile,$u.pointToTile,$u.bboxToTile,$u.pointToTileFraction,{center:new gu.Vector2(0,0),center3035:new gu.Vector2(0,0),projector:null,calculateGlobalOffset:function(t,e){var n=$u.pointToTileFraction(t,e,7),r=Object(u.a)(n,3),i=r[0],o=r[1],a=r[2],s=Math.pow(2,15-a)*tc.calculateSceneScale(t,e);return new gu.Vector2(-i,o).multiplyScalar(s)},calculateSceneScale:function(t,e){var n=$u.pointToTile(t,e,15),r=$u.tileToBBOX(n);return tc.project([r[2],r[3]]).sub(tc.project([r[0],r[1]])).x},project:function(t,e){if("number"!==typeof t[0])return t.map((function(t){return tc.project(t,e)}));var n=tc.projector.forward(t);return e||(n[0]-=tc.center.x,n[1]-=tc.center.y),new gu.Vector3(n[0],n[1],t[2])},unproject:function(t,e){if(Array.isArray(t))return t.map((function(t){return tc.unproject(t,e)}));var n=[t.x,t.y];e||(n[0]+=tc.center.x,n[1]+=tc.center.y);var r=tc.projector.inverse(n);return[r[0],r[1],t.z]},unproject3035:function(t,e){if(Array.isArray(t[0]))return t.map((function(t){return tc.unproject3035(t,e)}));var n=[t[0],t[1]];e||(n[0]+=tc.center3035.x,n[1]+=tc.center3035.y);var r=tc.projector3035.inverse(n);return[r[0],r[1],t.z]},vectorize:function(t){if("number"!==typeof t[0]){for(var e=new Array(t.length),n=0,r=t.length;n<r;n++)e[n]=tc.vectorize(t[n]);return e}return new gu.Vector3(t[0],t[1],t[2])},vectorizeFeature:function(t){return t.projected?tc.vectorize(t.geometry.coordinates):tc.project(t.geometry.coordinates)}});function ec(){this.clock=new gu.Clock,this.lastInput=this.clock.getElapsedTime(),this.interacting=!1,this.bindListeners({onInput:[mu.toggleTracking,_.animateAlongFeature,_.doubleTapZoom,_.focusOnFeature,_.focusOnLocation,_.focusOnTarget,_.inputStarted,_.inputEnded,_.rotateLeft,_.rotateRight,_.featureClicked,_.setCurrentPlace,_.startFlyover,_.zoomIn,_.zoomOut],inputStarted:_.inputStarted,inputEnded:_.inputEnded})}ec.prototype.onInput=function(){this.lastInput=this.clock.getElapsedTime()},ec.prototype.inputStarted=function(){this.interacting=!0},ec.prototype.inputEnded=function(){this.interacting=!1,this.onInput()},ec.displayName="UserInputStore";var nc=A.createStore(ec),rc={cancelStack:[],transition:function(t,e,n,r){if(typeof e===typeof n){var i;if(r.lerp)i=r.lerp;else if(e instanceof gu.Vector3)i=rc.lerp.vector3;else{if(isNaN(e))return Su("Error: no lerp function for object:"),void Su(e);i=rc.lerp.scalar}void 0===r&&(r={}),void 0===r.duration&&(r.duration=1),void 0===r.ease?r.ease=rc.smootherstep:"function"===typeof rc[r.ease]&&(r.ease=rc[r.ease]);var o={startTime:null,options:r,step:function(){o.startTime||(o.startTime=(new Date).getTime());var a=.001*((new Date).getTime()-o.startTime)/r.duration;if(a>=1){a=1,vu.unlisten(o.step);var s=rc.cancelStack.indexOf(o.step);-1!==s&&rc.cancelStack.splice(s,1)}var u=r.ease(a);t(i(e,n,u)),1===a&&"function"===typeof r.onComplete&&r.onComplete()}};r.doNotCancel||rc.cancelStack.push(o),vu.listen(o.step)}else Su("Error: types do not match for transition:",typeof e,"!==",typeof n)},cubicOut:function(t){return Math.pow(t,3)},cubicIn:function(t){return 1-Math.pow(1-t,3)},linear:function(t){return t},smootherstep:function(t){return gu.Math.smootherstep(t,0,1)},lerp:{scalar:function(t,e,n){return isNaN(t)?e:t+n*(e-t)},array:function(t,e,n){return t.map((function(t,r){return rc.lerp.scalar(t,e[r],n)}))},vector3:function(t,e,n){return t.clone().lerp(e,n)},vector3Hop:function(t){return function(e,n,r){var i=rc.lerp.vector3(e,n,r);return i.z+=t*(1-Math.pow(2*r-1,2)),i}},vector3AngularHop:function(t,e){var n=new gu.Vector3,r=new gu.Vector3,i=new gu.Vector3(0,0,1);return function(o,a,s){var u=n.subVectors(o,t).z,c=r.subVectors(a,t).z;n.setZ(0),r.setZ(0);var l=n.length(),f=r.length(),h=Math.atan2(r.y,r.x)-Math.atan2(n.y,n.x);h>Math.PI&&(h-=2*Math.PI),h<-Math.PI&&(h+=2*Math.PI);var p=rc.lerp.scalar(u,c,s),d=rc.lerp.scalar(l,f,s);return n.applyAxisAngle(i,h*s).setLength(d).setZ(p),n.add(t),n.z+=e*(1-Math.pow(2*s-1,2)),n}},vector3Angular:function(t){return rc.lerp.vector3AngularHop(t,0)},params:function(t,e,n){var r={};for(var i in e)if(e.hasOwnProperty(i)){if(void 0===t[i]){r[i]=e[i];continue}if("number"===typeof e[i])r[i]=(1-n)*t[i]+n*e[i];else if("string"===typeof e[i]){var o=new gu.Color(t[i]),a=new gu.Color(e[i]),s="#"+o.lerp(a,n).getHexString();r[i]=s}else r[i]=e[i]}return r}}};function ic(){this.tooFar=!0,this.tracking=!1,this.parameters=["latitude","longitude","altitude","accuracy","altitudeAccuracy","heading","speed"],this.latitude=null,this.longitude=null,this.altitude=0,this.accuracy=0,this.altitudeAccuracy=0,this.heading=0,this.speed=0,this.bindListeners({panToPosition:mu.panToPosition,setPosition:mu.setPosition,cancelTracking:[_.doubleTapZoom,_.setCamera],toggleTracking:mu.toggleTracking})}nc.listen((function(){for(var t;t=rc.cancelStack.pop();)"function"===typeof t.options.onCancel&&t.options.onCancel(),vu.unlisten(t.step)})),ic.prototype.checkTooFar=function(){if(this.longitude&&this.latitude){var t=[this.longitude,this.latitude,0],e=tc.project(t),n=1e5;this.tooFar=Math.abs(e.x)>n||Math.abs(e.y)>n}else this.tooFar=!0},ic.prototype.setPosition=function(t){var e=this;this.parameters.forEach((function(n){e[n]=t.coords[n]})),this.checkTooFar()},ic.prototype.panToPosition=function(t){if(!this.longitude||!this.latitude)return this.setPosition(t);if(null===t.longitude||null===t.latitude)return this.setPosition(t);var e={coords:{}},n=this;this.parameters.forEach((function(t){e.coords[t]=n[t]}));rc.transition(mu.setPosition,e,t,{duration:1,lerp:function(t,e,r){var i={coords:{}};return n.parameters.forEach((function(n){i.coords[n]=rc.lerp.scalar(t.coords[n],e.coords[n],r)})),i}})},ic.prototype.cancelTracking=function(){this.tracking=!1},ic.prototype.toggleTracking=function(){this.tracking=!this.tracking},ic.displayName="CurrentLocationStore";var oc=A.createStore(ic),ac=y((function(t,e){t.exports=function(){function t(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(dt,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(dt,"")===i)return t[n]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=yt}function n(t){return new e(t).output()}function r(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,o=n.reduce((function(t,e){return i(e,t),t}),r);e&&(t[e]=o)}function i(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void i(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var o;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&i(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&i(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void r(e,n,t);default:for(o=-1;++o<t.length;)if(!Array.isArray(t[o]))return i(t,e[n]);return r(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function o(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}function a(t){return t*wt}function s(t){function e(e){return e*(t.to_meter||1)}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=t.AXIS[r][0].toLowerCase();-1!==s.indexOf("north")?n+="n":-1!==s.indexOf("south")?n+="s":-1!==s.indexOf("east")?n+="e":-1!==s.indexOf("west")&&(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var u=t.GEOGCS;"GEOGCS"===t.type&&(u=t),u&&(u.DATUM?t.datumCode=u.DATUM.name.toLowerCase():t.datumCode=u.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),u.DATUM&&u.DATUM.SPHEROID&&(t.ellps=u.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=u.DATUM.SPHEROID.a,t.rf=parseFloat(u.DATUM.SPHEROID.rf,10)),u.DATUM&&u.DATUM.TOWGS84&&(t.datum_params=u.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach((function(e){return o(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function u(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?u[t]=gt(arguments[1]):u[t]=xt(arguments[1]):u[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?u.apply(e,t):u(t)}));if("string"==typeof t){if(t in u)return u[t]}else"EPSG"in t?u["EPSG:"+t.EPSG]=t:"ESRI"in t?u["ESRI:"+t.ESRI]=t:"IAU2000"in t?u["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function c(t){return"string"==typeof t}function l(t){return t in u}function f(t){return Et.some((function(e){return t.indexOf(e)>-1}))}function h(e){var n=t(e,"authority");if(n){var r=t(n,"epsg");return r&&Ot.indexOf(r)>-1}}function p(e){var n=t(e,"extension");if(n)return t(n,"proj4")}function d(t){return"+"===t[0]}function g(t){if(!c(t))return t;if(l(t))return u[t];if(f(t)){var e=xt(t);if(h(e))return u["EPSG:3857"];var n=p(e);return n?gt(n):e}return d(t)?gt(t):void 0}function y(t){return t}function v(t,e){var n=jt.length;return t.names?(jt[n]=t,t.names.forEach((function(t){kt[t.toLowerCase()]=n})),this):(console.log(e),!0)}function m(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(it+a*(ot+a*at)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}function A(e,n,r,i,o){if(!e){var a=t(Nt,i);a||(a=Dt),e=a.a,n=a.b,r=a.rf}return r&&!n&&(n=(1-1/r)*e),(0===r||Math.abs(e-n)<st)&&(o=!0,n=e),{a:e,b:n,rf:r,sphere:o}}function b(t,e,n,r,i,o){var a={};return a.datum_type=void 0===t||"none"===t?et:tt,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=J),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=$,a.datum_params[3]*=nt,a.datum_params[4]*=nt,a.datum_params[5]*=nt,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=r,a.es=i,a.ep2=o,a}function _(e,n){if(!(this instanceof _))return new _(e);n=n||function(t){if(t)throw t};var r=g(e);if("object"==typeof r){var i=_.projections.get(r.projName);if(i){if(r.datumCode&&"none"!==r.datumCode){var o=t(Ft,r.datumCode);o&&(r.datum_params=o.towgs84?o.towgs84.split(","):null,r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var a=A(r.a,r.b,r.rf,r.ellps,r.sphere),s=m(a.a,a.b,a.rf,r.R_A),u=r.datum||b(r.datumCode,r.datum_params,a.a,a.b,s.es,s.ep2);St(this,r),St(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=u,this.init(),n(null,this)}else n(e)}else n(e)}function w(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===J?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==$||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}function x(t,e,n){var r,i,o,a,s=t.x,u=t.y,c=t.z?t.z:0;if(u<-rt&&u>-1.001*rt)u=-rt;else if(u>rt&&u<1.001*rt)u=rt;else{if(u<-rt)return{x:-1/0,y:-1/0,z:t.z};if(u>rt)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+c)*a*Math.cos(s),y:(r+c)*a*Math.sin(s),z:(r*(1-e)+c)*i}}function E(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,d,g,y,v,m,A=t.x,b=t.y,_=t.z?t.z:0;if(i=Math.sqrt(A*A+b*b),o=Math.sqrt(A*A+b*b+_*_),i/n<1e-12){if(v=0,o/n<1e-12)return m=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(b,A);a=_/o,f=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),h=a*u,y=0;do{y++,c=e*(l=n/Math.sqrt(1-e*h*h))/(l+(m=i*f+_*h-l*(1-e*h*h))),g=(d=a*(u=1/Math.sqrt(1-c*(2-c)*s*s)))*f-(p=s*(1-c)*u)*h,f=p,h=d}while(g*g>1e-24&&y<30);return{x:v,y:Math.atan(d/Math.abs(p)),z:m}}function O(t,e,n){if(e===J)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===$){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6];return{x:c*(t.x-u*t.y+s*t.z)+r,y:c*(u*t.x+t.y-a*t.z)+i,z:c*(-s*t.x+a*t.y+t.z)+o}}}function S(t,e,n){if(e===J)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===$){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=(t.x-r)/c,f=(t.y-i)/c,h=(t.z-o)/c;return{x:l+u*f-s*h,y:-u*l+f+a*h,z:s*l-a*f+h}}}function T(t){return t===J||t===$}function P(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function M(t,e){return(t.datum.datum_type===J||t.datum.datum_type===$)&&"WGS84"!==e.datumCode||(e.datum.datum_type===J||e.datum.datum_type===$)&&"WGS84"!==t.datumCode}function C(t,e,n){var r;return Array.isArray(n)&&(n=Ut(n)),Gt(n),t.datum&&e.datum&&M(t,e)&&(n=C(t,r=new _("WGS84"),n),t=r),"enu"!==t.axis&&(n=zt(t,!1,n)),"longlat"===t.projName?n={x:n.x*ut,y:n.y*ut,z:n.z||0}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=Bt(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*ct,y:n.y*ct,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?zt(e,!0,n):n}function I(t,e,n){var r,i,o;return Array.isArray(n)?(r=C(t,e,n)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=C(t,e,n),2===(o=Object.keys(n)).length||o.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]})),i)}function R(t){return t instanceof _?t:t.oProj?t.oProj:_(t)}function k(t,e,n){t=R(t);var r,i=!1;return void 0===e?(e=t,t=Vt,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=Vt,i=!0),e=R(e),n?I(t,e,n):(r={forward:function(n){return I(t,e,n)},inverse:function(n){return I(e,t,n)}},i&&(r.oProj=e),r)}function j(t,e){return e=e||5,U(F({lat:t[1],lon:t[0]}),e)}function L(t){var e=B(H(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function N(t){return t*(Math.PI/180)}function D(t){return t/Math.PI*180}function F(t){var e,n,r,i,o,a,s=t.lat,u=t.lon,c=6378137,l=N(s),f=N(u);a=Math.floor((u+180)/6)+1,180===u&&(a=60),s>=56&&s<64&&u>=3&&u<12&&(a=32),s>=72&&s<84&&(u>=0&&u<9?a=31:u>=9&&u<21?a=33:u>=21&&u<33?a=35:u>=33&&u<42&&(a=37)),o=N(6*(a-1)-180+3),e=c/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),n=Math.tan(l)*Math.tan(l),r=.006739496752268451*Math.cos(l)*Math.cos(l);var h=.9996*e*((i=Math.cos(l)*(f-o))+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,p=.9996*(c*(.9983242984503243*l-.002514607064228144*Math.sin(2*l)+2639046602129982e-21*Math.sin(4*l)-3.418046101696858e-9*Math.sin(6*l))+e*Math.tan(l)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));return s<0&&(p+=1e7),{northing:Math.round(p),easting:Math.round(h),zoneNumber:a,zoneLetter:z(s)}}function B(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,c,l,f,h,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),g=n-5e5,y=e;r<"N"&&(y-=1e7),l=6*(i-1)-180+3,h=(f=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*f)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*f)+151*d*d*d/96*Math.sin(6*f),o=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),u=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),c=g/(.9996*o);var v=h-o*Math.tan(h)/u*(c*c/2-(5+3*a+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);v=D(v);var m,A=(c-(1+2*a+s)*c*c*c/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*c*c*c*c*c/120)/Math.cos(h);if(A=l+D(A),t.accuracy){var b=B({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});m={top:b.lat,right:b.lon,bottom:v,left:A}}else m={lat:v,lon:A};return m}function z(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function U(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+G(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function G(t,e,n){var r=V(n);return q(Math.floor(t/1e5),Math.floor(e/1e5)%20,r)}function V(t){var e=t%qt;return 0===e&&(e=qt),e}function q(t,e,n){var r=n-1,i=Ht.charCodeAt(r),o=Wt.charCodeAt(r),a=i+t-1,s=o+e,u=!1;return a>Kt&&(a=a-Kt+Xt-1,u=!0),(a===Yt||i<Yt&&a>Yt||(a>Yt||i<Yt)&&u)&&a++,(a===Qt||i<Qt&&a>Qt||(a>Qt||i<Qt)&&u)&&++a===Yt&&a++,a>Kt&&(a=a-Kt+Xt-1),s>Zt?(s=s-Zt+Xt-1,u=!0):u=!1,(s===Yt||o<Yt&&s>Yt||(s>Yt||o<Yt)&&u)&&s++,(s===Qt||o<Qt&&s>Qt||(s>Qt||o<Qt)&&u)&&++s===Yt&&s++,s>Zt&&(s=s-Zt+Xt-1),String.fromCharCode(a)+String.fromCharCode(s)}function H(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=V(a),c=W(r.charAt(0),u),l=X(r.charAt(1),u);l<Y(s);)l+=2e6;var f=n-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,p,d,g=f/2,y=0,v=0;return g>0&&(h=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*h,d=t.substring(o+g),v=parseFloat(d)*h),{easting:y+c,northing:v+l,zoneLetter:s,zoneNumber:a,accuracy:h}}function W(t,e){for(var n=Ht.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===Yt&&n++,n===Qt&&n++,n>Kt){if(i)throw"Bad character: "+t;n=Xt,i=!0}r+=1e5}return r}function X(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Wt.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===Yt&&n++,n===Qt&&n++,n>Zt){if(i)throw"Bad character: "+t;n=Xt,i=!0}r+=1e5}return r}function Y(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Q(t,e,n){if(!(this instanceof Q))return new Q(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function Z(t){var e,n=[];return n[0]=t*te,e=t*t,n[0]+=e*ee,n[1]=e*re,e*=t,n[0]+=e*ne,n[1]+=e*ie,n[2]=e*oe,n}function K(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var J=1,$=2,tt=4,et=5,nt=484813681109536e-20,rt=Math.PI/2,it=.16666666666666666,ot=.04722222222222222,at=.022156084656084655,st=1e-10,ut=.017453292519943295,ct=57.29577951308232,lt=Math.PI/4,ft=2*Math.PI,ht={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},pt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},dt=/[\s_\-\/\(\)]/g,gt=function(e){var n,r,i,o={},a=e.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*ut},lat_1:function(t){o.lat1=t*ut},lat_2:function(t){o.lat2=t*ut},lat_ts:function(t){o.lat_ts=t*ut},lon_0:function(t){o.long0=t*ut},lon_1:function(t){o.long1=t*ut},lon_2:function(t){o.long2=t*ut},alpha:function(t){o.alpha=parseFloat(t)*ut},lonc:function(t){o.longc=t*ut},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(e){o.units=e;var n=t(pt,e);n&&(o.to_meter=n.to_meter)},from_greenwich:function(t){o.from_greenwich=t*ut},pm:function(e){var n=t(ht,e);o.from_greenwich=(n||parseFloat(e))*ut},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)}};for(n in a)r=a[n],n in s?"function"==typeof(i=s[n])?i(r):o[i]=r:o[n]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},yt=1,vt=/\s/,mt=/[A-Za-z]/,At=/[A-Za-z84]/,bt=/[,\]]/,_t=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;vt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case yt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(bt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=yt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=yt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!_t.test(t)){if(bt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},e.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},e.prototype.keyword=function(t){if(At.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=yt)}if(!bt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},e.prototype.neutral=function(t){if(mt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(_t.test(t))return this.word=t,void(this.state=3);if(!bt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var wt=.017453292519943295,xt=function(t){var e=n(t),r=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",r]);var a={};return i(e,a),s(a),a};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(u);var Et=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Ot=["3857","900913","3785","102113"],St=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},Tt=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},Pt=function(t){return t<0?-1:1},Mt=function(t){return Math.abs(t)<=3.14159265359?t:t-Pt(t)*ft},Ct=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(rt-e))/r},It=function(t,e){for(var n,r,i=.5*t,o=rt-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=rt-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999},Rt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Tt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*ct>90&&i*ct<-90&&r*ct>180&&r*ct<-180)return null;if(Math.abs(Math.abs(i)-rt)<=st)return null;if(this.sphere)e=this.x0+this.a*this.k0*Mt(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(lt+.5*i));else{var o=Math.sin(i),a=Ct(this.e,i,o);e=this.x0+this.a*this.k0*Mt(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=rt-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=It(this.e,o)))return null}return e=Mt(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:y,inverse:y,names:["longlat","identity"]}],kt={},jt=[],Lt={start:function(){Rt.forEach(v)},add:v,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==kt[e]&&jt[kt[e]]?jt[kt[e]]:void 0}},Nt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Dt=Nt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Nt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Ft={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};_.projections=Lt,_.projections.start();var Bt=function(t,e,n){return w(t,e)||t.datum_type===et||e.datum_type===et?n:t.es!==e.es||t.a!==e.a||T(t.datum_type)||T(e.datum_type)?(n=x(n,t.es,t.a),T(t.datum_type)&&(n=O(n,t.datum_type,t.datum_params)),T(e.datum_type)&&(n=S(n,e.datum_type,e.datum_params)),E(n,e.es,e.a,e.b)):n},zt=function(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"w":case"n":case"s":c[i]=r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c},Ut=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Gt=function(t){P(t.x),P(t.y)},Vt=_("WGS84"),qt=6,Ht="AJSAJS",Wt="AFAFAF",Xt=65,Yt=73,Qt=79,Zt=86,Kt=90,Jt={forward:j,inverse:function(t){var e=B(H(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:L};Q.fromMGRS=function(t){return new Q(L(t))},Q.prototype.toMGRS=function(t){return j([this.x,this.y],t)};var $t=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e},te=.3333333333333333,ee=.17222222222222222,ne=.10257936507936508,re=.06388888888888888,ie=.0664021164021164,oe=.016415012942191543,ae={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-rt)<st?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<st?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=$t(this.e,1),this.mmf=.5/(1-this.es),this.apa=Z(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=$t(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,u,c,l,f=t.x,h=t.y;if(f=Mt(f-this.long0),this.sphere){if(o=Math.sin(h),l=Math.cos(h),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+l*r:1+this.sinph0*o+this.cosph0*l*r)<=st)return null;e=(n=Math.sqrt(2/n))*l*Math.sin(f),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*l*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(h+this.phi0)<st)return null;n=lt-.5*h,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(f),n*=r}}else{switch(s=0,u=0,c=0,r=Math.cos(f),i=Math.sin(f),o=Math.sin(h),a=$t(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:c=1+u*r;break;case this.N_POLE:c=rt+h,a=this.qp-a;break;case this.S_POLE:c=h-rt,a=this.qp+a}if(Math.abs(c)<st)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*s-this.sinb1*u*r):(c=Math.sqrt(2/(1+u*r)))*s*this.ymf,e=this.xmf*c*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,u=t.x/this.a,c=t.y/this.a;if(this.sphere){var l,f=0,h=0;if((n=.5*(l=Math.sqrt(u*u+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=Math.sin(n),f=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(l)<=st?0:Math.asin(c*h/l),u*=h,c=f*l;break;case this.OBLIQ:n=Math.abs(l)<=st?this.phi0:Math.asin(f*this.sinph0+c*h*this.cosph0/l),u*=h*this.cosph0,c=(f-Math.sin(n)*this.sinph0)*l;break;case this.N_POLE:c=-c,n=rt-n;break;case this.S_POLE:n-=rt}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,c):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,c*=this.dd,(a=Math.sqrt(u*u+c*c))<st)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),u*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+c*i*this.cosb1/a,o=this.qp*s,c=a*this.cosb1*r-c*this.sinb1*i):(s=c*i/a,o=this.qp*s,c=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(o=u*u+c*c))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(u,c),n=K(Math.asin(s),this.apa)}return t.x=Mt(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},se=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},ue={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u=t.x,c=t.y;return r=Mt(u-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=st)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=se(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=st?(s=this.lat0,t.x=a,t.y=s,t):(s=se(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-rt,Math.abs(o)<=st?(a=Mt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=Mt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]};return k.defaultDatum="WGS84",k.Proj=_,k.WGS84=new k.Proj("WGS84"),k.Point=Q,k.toPoint=Ut,k.defs=u,k.transform=C,k.mgrs=Jt,k.version="2.6.2-alpha",function(t){t.Proj.projections.add(ae),t.Proj.projections.add(ue)}(k),k}()}));function sc(){this.projection=null,this.location=null,this.globalOffset=new gu.Vector2,this.sceneScale=1,this.bindListeners({setCurrentPlace:_.setCurrentPlace}),this.exportPublicMethods({positionToTileFraction:this.positionToTileFraction.bind(this)})}ac.defs([["EPSG:3035","+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"]]),sc.prototype.setCurrentPlace=function(t){this.location=t.location,this.projection="EPSG:3857";var e=M.snap(this.location[0]),n=M.snap(this.location[1]);tc.projector=ac(this.projection),tc.center=tc.project([e,n],!0),tc.projector3035=ac("EPSG:3035");var r=tc.projector3035.forward([e,n]);tc.center3035={x:r[0],y:r[1]},this.sceneScale=tc.calculateSceneScale(e,n),this.globalOffset=tc.calculateGlobalOffset(e,n)},sc.prototype.positionToTileFraction=function(t,e){var n=t.clone();return n.x-=this.globalOffset.x,n.y+=this.globalOffset.y,n.divideScalar(this.sceneScale*Math.pow(2,15-e)),[n.x,n.y,e]},sc.displayName="GeoprojectStore";var uc=A.createStore(sc);function cc(){this.appContainer=null,this.datasource={},this.fatalError=!1,this.initialized=!1,this.resourceUrl=null,this.bindListeners({configureElevationDatasource:x.configureElevationDatasource,configureImageryDatasource:x.configureImageryDatasource,setAppContainer:x.setAppContainer,setFatalError:b.fatalError,setResourceUrl:x.setResourceUrl})}cc.prototype.checkInitialized=function(){this.initialized=null!==this.appContainer&&null!==this.resourceUrl},cc.prototype.configureElevationDatasource=function(t){this.datasource.elevation=t},cc.prototype.configureImageryDatasource=function(t){this.datasource.imagery=t},cc.prototype.setFatalError=function(){this.fatalError=!0},cc.prototype.setAppContainer=function(t){this.appContainer=t,this.checkInitialized()},cc.prototype.setResourceUrl=function(t){this.resourceUrl=t,this.checkInitialized()},cc.displayName="AppStore";var lc=A.createStore(cc),fc=new URLSearchParams(window.location.search.slice(1)),hc=16,pc=256;fc.has("elevationPoolSize")&&(hc=Number.parseInt(fc.get("elevationPoolSize"))),fc.has("imageryPoolSize")&&(pc=Number.parseInt(fc.get("imageryPoolSize")));var dc=hc,gc=512,yc=pc,vc=fc.has("interpolateFloat"),mc=new gu.WebGLRenderer({alpha:!0,antialias:!1,clearColor:0,logarithmicDepthBuffer:!1});mc.sortObjects=!0,mc.autoClear=!1,mc.autoClearColor=!1,mc.autoClearDepth=!0,mc.autoClearStencil=!1,mc.domElement.selectable=!1,mc.toneMapping=gu.NoToneMapping;var Ac=Du.getState();mc.setPixelRatio(Ac.pixelRatio),mc.setSize(Ac.width,Ac.height),Du.listen((function(t){mc.setPixelRatio(t.pixelRatio),mc.setSize(t.width,t.height)}));var bc=function(){function t(e){Object(f.a)(this,t),this.capacity=e,this.index=0,this.items=[]}return Object(s.a)(t,[{key:"next",value:function(){var t;return t=this.index>=this.capacity?this.items.splice(0,1)[0]:this.index++,this.items.push(t),t}},{key:"tap",value:function(t){var e=this.items.indexOf(t);-1!==e&&(this.items.splice(e,1),this.items.push(t))}}]),t}(),_c=new("undefined"===typeof createImageBitmap?gu.ImageLoader:gu.ImageBitmapLoader),wc=document.createElement("canvas"),xc=gc,Ec=gc;wc.width=xc,wc.height=Ec;var Oc=wc.getContext("2d"),Sc=262144,Tc=function(){function t(e){var n=e.apiKey,r=e.poolSize,i=e.textureSize,o=e.useFloat,a=e.urlFormat;Object(f.a)(this,t),this.apiKey=n,this.urlFormat=a,this.useFloat=!!o,this.hasUpdates=!1,this.listeners=[],this.lookup={},this.fetching={},this.imgCache={},this.indexPool=new bc(r);var s=Math.sqrt(r);s%1&&console.error("poolSize needs to be a power of 2");var u=i*s,c=this.useFloat&&!vc?gu.NearestFilter:gu.LinearFilter;if(this.textureArray=new gu.DataTexture(null,u,u,this.useFloat?gu.AlphaFormat:gu.RGBAFormat,this.useFloat?gu.FloatType:gu.UnsignedByteType,gu.UVMapping,gu.ClampToEdgeWrapping,gu.ClampToEdgeWrapping,c,c,mc.capabilities.getMaxAnisotropy()),this.textureArray.__blocks=s,this.textureArray.useFloat=this.useFloat,this.useFloat){this.indirectionTexture=new gu.DataTexture(null,1024,1024,gu.RGBAFormat,gu.FloatType,gu.UVMapping,gu.ClampToEdgeWrapping,gu.ClampToEdgeWrapping,gu.NearestFilter,gu.NearestFilter,1)}}return Object(s.a)(t,[{key:"urlForTile",value:function(t,e,n){return this.urlFormat.replace("{x}",t).replace("{y}",e).replace("{z}",n).replace("{apiKey}",this.apiKey)}},{key:"fetchIfNeeded",value:function(t){var e=this;if(void 0===this.lookup[t]&&void 0===this.fetching[t])if(Object.values(this.fetching).length>32)Su("throttling...");else{var n=this.findNewIndex(t);this.fetching[t]=n;var r=this.urlForTile.apply(this,Object(a.a)($u.quadkeyToTile(t)));_c.load(r,(function(r){if(e.imgCache[t]=r,function(t,e,n){var r=t.image.width/t.__blocks,i=t.image.height/t.__blocks,o=r*(Math.floor(e)%t.__blocks),a=i*Math.floor(Math.floor(e)/t.__blocks);if(t.useFloat){Oc.drawImage(n,0,0);for(var s=Oc.getImageData(0,0,xc,Ec).data,u=new Float32Array(Sc),c=-32768,l=new DataView(s.buffer),f=0;f<Sc;++f){var h=l.getUint16(4*f,!1)+c;u[f]=h===c?0:h}mc.copyTextureToTexture({x:o,y:a},{image:{data:u,width:xc,height:Ec},isDataTexture:!0},t)}else mc.copyTextureToTexture({x:o,y:a},{image:n},t)}(e.textureArray,n,r),delete e.fetching[t],e.lookup[t]=n,e.useFloat){var i=document.getElementById("elevation-tile-count");if(i){var o=parseInt(i.innerHTML);isNaN(o)&&(o=0),i.innerHTML=++o}}e.updateIndirectionTexture(),e.notifyUpdate()}),(function(){console.error("Failed to get image",t),delete e.fetching[t]}))}}},{key:"findNewIndex",value:function(t){for(var e,n,r=Object.values(this.fetching),i=!0,o=32;o>0;o--){e=this.indexPool.next();var a=-1===r.indexOf(e),s=Object.values(this.lookup).indexOf(e),u=void 0!==(n=Object.keys(this.lookup)[s])&&t.slice(0,n.length-1)===n.slice(0,-1);if(a&&!u){i=!1;break}}return i&&(Su("Failed to find index (".concat(this.indexPool.capacity,")")),Su("Downloads: ",r.length),n=Object.keys(this.lookup).sort((function(t,e){return t.length-e.length}))[0],e=this.lookup[n]),void 0!==n&&delete this.lookup[n],e}},{key:"updateIndirectionTexture",value:function(){if(this.indirectionTexture){var t=Object.keys(this.lookup);t.sort((function(t,e){return Math.sign(t.length-e.length)}));for(var e=0,n=t;e<n.length;e++){var r=n[e],i=$u.quadkeyToTile(r),o=Object(u.a)(i,3),a=o[0],s=o[1],c=o[2],l=this.lookup[r],f=Math.pow(2,10-c);a*=f,s*=f;for(var h=new Float32Array(4*f*f),p=Math.pow(2,c),d=-p/this.indirectionTexture.image.width,g=0;g<h.length;g++)h[4*g]=l,h[4*g+1]=p,h[4*g+2]=a*d,h[4*g+3]=s*d;mc.copyTextureToTexture({x:a,y:s},{image:{data:h,width:f,height:f},isDataTexture:!0},this.indirectionTexture)}}}},{key:"findBestAvailableData",value:function(t,e){for(var n=0;n<20;n++){var r=this.lookup[t];if(void 0!==r)return{index:r,downsample:n,quadkey:t};if(0===(t=t.slice(0,-1)).length)break}return e||Su("Failed to find data",t),{index:null,downsample:20,quadkey:null}}},{key:"dataAtPoint",value:function(t){var e;e=t.longitude?$u.pointToTileFraction(t.longitude,t.latitude,10):uc.positionToTileFraction(t,10);var n=$u.tileToQuadkey(e),r=this.findBestAvailableData(n).quadkey;if(!r)return null;var i=Math.pow(2,r.length-e[2]);e[0]*=i,e[1]*=i;var o=this.imgCache[r],a=document.createElement("canvas");a.width=1,a.height=1,e[0]=e[0]%1*o.width,e[1]=e[1]%1*o.height;var s=a.getContext("2d");return s.drawImage(o,e[0],e[1],1,1,0,0,1,1),s.getImageData(0,0,1,1).data}},{key:"addListener",value:function(t){this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);-1!==e&&this.listeners.splice(e,1)}},{key:"notifyUpdate",value:function(){this.hasUpdates=!0}},{key:"broadcastUpdate",value:function(){this.listeners.forEach((function(t){return t()})),this.hasUpdates=!1}}]),t}(),Pc=new Tc({urlFormat:"https://www.nasadem.xyz/api/v1/dem/{z}/{x}/{y}.png?key={apiKey}",textureSize:gc,poolSize:dc,useFloat:!0});lc.listen((function(t){var e=t.datasource;e.elevation&&(Pc.apiKey=e.elevation.apiKey)}));function Mc(t){var e=uc.getState().sceneScale,n=3.141592653589793-.006135923151542565*(t.longitude?$u.pointToTile(t.longitude,t.latitude,10):uc.positionToTileFraction(t,10))[1];return Math.cosh(n)/(.0008176665341588574*e)}function Cc(t){return 0===t[0]&&0===t[1]?0:256*t[0]+t[1]-32768}function Ic(t,e){var n=Pc.dataAtPoint(t);if(!n){if("function"===typeof e){Pc.addListener((function n(){var r=Pc.dataAtPoint(t);r&&(Pc.removeListener(n),e(Cc(r)*Mc(t)))}))}return 0}var r=Cc(n)*Mc(t);return"function"===typeof e&&e(r),r}new gu.Vector3(0,0,0),new gu.Vector3(0,0,0),Math.PI,new gu.Vector3;var Rc=new gu.Vector3(0,0,1),kc=(new gu.Vector3(0,0,0),new gu.Vector3(0,0,0),function(t,e){return Rc}),jc=new gu.Vector3(0,0,1);function Lc(){this.position=new gu.Vector3(0,0,16e3),this.target=new gu.Vector3,this.hasZoomedOut=!1,this.vantages=[],this.constrainCamera=!0,this.minDistance=100,this.minHeight=200,this.maxDistance=5e4,this.maxBounds=1e5,Fu.position.copy(this.position),Fu.up.copy(jc),Fu.lookAt(new gu.Vector3(0,0,0)),this.controls=new zu(Fu);var t=this.controls;bu.listen((function(){t.update()})),this.zoomInDuration=2,this.zoomOutDuration=2,this.bindListeners({animateAlongFeature:_.animateAlongFeature,configure:x.configureCamera,doubleTapZoom:_.doubleTapZoom,focusOnBounds:_.focusOnBounds,focusOnFeature:_.focusOnFeature,focusOnLocation:_.focusOnLocation,focusOnTarget:_.focusOnTarget,orbitTarget:_.orbitTarget,panToPosition:_.panToPosition,rotateLeft:_.rotateLeft,rotateRight:_.rotateRight,setCamera:_.setCamera,setCameraMode:_.setCameraMode,setCameraPosition:_.setCameraPosition,setCameraTarget:_.setCameraTarget,setFromCurrentLocation:[mu.setPosition,mu.toggleTracking],zoomIn:_.zoomIn,zoomOut:_.zoomOut})}Lc.prototype.setCamera=function(t){if(t.position&&(this.position.copy(t.position),!t.position.forceHeight)){var e=Ic(this.position);this.position.z<e&&(this.position.z=e+1),this.constrainCamera&&this.position.z<e+this.minHeight&&(this.position.z+=.1*(e+this.minHeight-this.position.z))}if(t.target){this.target.copy(t.target);var n=this.maxBounds;Math.abs(this.target.x)>n&&(this.target.x=n*Math.sign(this.target.x)),Math.abs(this.target.y)>n&&(this.target.y=n*Math.sign(this.target.y))}this.controls.target.copy(this.target),Fu.position.copy(this.position),Fu.up.copy(jc),t.quaternion?Fu.setRotationFromQuaternion(t.quaternion):Fu.lookAt(this.controls.target),Fu.updateMatrixWorld()},Lc.prototype.setCameraTarget=function(t){this.setCamera({target:t})},Lc.prototype.setCameraPosition=function(t){this.setCamera({position:t})},Lc.prototype.setFromCurrentLocation=function(){this.waitFor(oc);var t=oc.getState();if(!t.tracking||t.tooFar)return!1;if(!t.longitude||!t.latitude)return!1;var e=tc.project([t.longitude,t.latitude,0]);return e.z=Ic(e),this.focusOnTarget(e)},Lc.prototype.setCameraMode=function(t){if("2D"!==t&&"3D"!==t)return console.error("Unknown camera mode:",t),!1;this.controls.lock2D="3D"!==t},Lc.prototype.vantageForTarget=function(t){var e;if(void 0!==t.bearing){var n=gu.Math.degToRad(t.bearing);e=new gu.Vector3(-Math.sin(n),-Math.cos(n),0)}else e=kc();var r=void 0!==t.angle?t.angle:30;e.z=0,e.normalize(),e.z=Math.tan(gu.Math.degToRad(r));var i=void 0!==t.distance?t.distance:this.target.distanceTo(this.position);return i=Math.max(i,1.5*this.minDistance),e.setLength(i),e.add(t),e},Lc.prototype.focusOnBounds=function(t){if(t.sw&&t.sw.longitude&&t.sw.latitude&&t.ne&&t.ne.longitude&&t.ne.latitude){var e=tc.project([t.sw.longitude,t.sw.latitude,0]);e.z=Ic(t.sw,!0);var n=tc.project([t.ne.longitude,t.ne.latitude,0]);n.z=Ic(t.ne,!0);var r=(new gu.Box3).expandByPoint(e).expandByPoint(n),i=new gu.Sphere;r.getBoundingSphere(i);var o=gu.Math.degToRad(Fu.fov),a=i.radius/Math.tan(.5*o),s=i.center.clone();return m.defaults(s,t),s.distance=a,this.focusOnTarget(s)}},Lc.prototype.focusOnFeature=function(t){var e,n=t.geometry.coordinates;return Array.isArray(n[0])&&(n=n[0]),(e=!1===t.projected?tc.project(n):new gu.Vector3(n[0],n[1],0)).z=Ic(e),this.focusOnTarget(e)},Lc.prototype.focusOnLocation=function(t){if(t.longitude&&t.latitude){var e=tc.project([t.longitude,t.latitude,0]);return e.z=t.height||Ic(t,!0),m.defaults(e,t),this.focusOnTarget(e)}},Lc.prototype.focusOnTarget=function(t){var e=t.animationDuration;if(void 0===e&&(e=.001*this.target.distanceTo(t),e=Math.min(4,Math.max(1.2,e))),0===e)return this.setCamera({position:this.vantageForTarget(t),target:t});var n={position:this.vantageForTarget(t),target:t,duration:e,doNotCancel:!0};return"function"===typeof t.onComplete&&(n.onComplete=t.onComplete),this.panToPosition(n)},Lc.prototype.rotateAngle=function(t){var e=this.position.clone().sub(this.target);e.applyAxisAngle(jc,t);var n=this.controls.target.clone().add(e),r={duration:.9,ease:rc.cubicIn,lerp:rc.lerp.vector3Angular(this.controls.target.clone()),doNotCancel:!0};rc.transition(_.setCameraPosition,this.position.clone(),n,r)},Lc.prototype.rotateLeft=function(){this.rotateAngle(.3*Math.PI)},Lc.prototype.rotateRight=function(){this.rotateAngle(-.3*Math.PI)},Lc.prototype.orbitTarget=function(){var t=this.position.clone().sub(this.target);t.applyAxisAngle(jc,.5*Math.PI);var e=this.target.clone().add(t),n={duration:13.37,ease:rc.linear,lerp:rc.lerp.vector3Angular(this.target.clone()),onComplete:this.orbitTarget.bind(this)};rc.transition(_.setCameraPosition,this.position.clone(),e,n)},Lc.prototype.zoomIn=function(){var t=this.position.clone().sub(this.target),e=t.length(),n=e<this.minDistance+1;e=n?.9*this.minDistance:Math.max(this.minDistance,.5*e),t.setLength(e);var r=this;return this.panToPosition({position:this.target.clone().add(t),duration:n?.15:.5,ease:rc.cubicIn,doNotCancel:!0,onComplete:function(){n&&(t.setLength(r.minDistance),r.panToPosition({position:r.target.clone().add(t),duration:.2,ease:rc.cubicIn,doNotCancel:!0}))}})},Lc.prototype.zoomOut=function(){var t=this.position.clone().sub(this.target),e=t.length(),n=e>this.maxDistance-1;e=n?1.1*this.maxDistance:Math.min(this.maxDistance,2*e),t.setLength(e);var r=this;return this.panToPosition({position:this.target.clone().add(t),duration:n?.15:.5,ease:rc.cubicIn,doNotCancel:!0,onComplete:function(){n&&(t.setLength(r.maxDistance),r.panToPosition({position:r.target.clone().add(t),duration:.2,ease:rc.cubicIn,doNotCancel:!0}))}})},Lc.prototype.doubleTapZoom=function(){this.position.clone().sub(this.target).length()>1.05*this.minDistance?this.zoomIn():this.zoomOut()};var Nc=new gu.Vector3,Dc=new gu.Vector3,Fc=new gu.Vector3,Bc=new gu.Vector3,zc=new gu.Quaternion,Uc=new gu.Quaternion;Lc.prototype.panToPosition=function(t){if(void 0===t.position&&(t.position=this.position.clone()),void 0===t.target&&(t.target=this.target.clone()),Nc.copy(this.position),Fc.copy(t.position),Dc.copy(this.target),Bc.copy(t.target),zc.copy(Fu.quaternion),this.controls.lock2D)Uc.copy(zc);else{var e=new gu.Matrix4;e.lookAt(t.position,t.target,jc),Uc.setFromRotationMatrix(e)}return rc.transition((function(t){_.setCamera({position:Object(o.a)({forceHeight:!0},rc.lerp.vector3(Nc,Fc,t)),target:rc.lerp.vector3(Dc,Bc,t),quaternion:zc.clone().slerp(Uc,t)})}),0,1,t),!1},Lc.prototype.animateAlongFeature=function(t){var e=this;if(this.controls.lock2D)return this.setCameraMode("3D"),void setTimeout((function(){e.animateAlongFeature(t)}),500);var n=t.distance||1e3,r=Math.max(1,.5*n),i=t.speed||100,o=new gu.Vector3,a=new gu.Vector3,s=Fu.near;Fu.near=Math.min(.25*r,Fu.near),Fu.updateProjectionMatrix();var u=function(i){o.subVectors(i,e.target),o.multiplyScalar(.1),o.add(e.target);var s=o.distanceTo(e.position);s=n+.97*(s-n),a.subVectors(e.position,o),a.setLength(s),a.add(o);var u=Ic(a)+r;a.z=u+.97*(a.z-u),_.setCamera({position:a,target:o}),t.onAnimationFrame&&t.onAnimationFrame(tc.unproject(o))},c=this.position.clone(),l=this.target.clone();this.constrainCamera=!1;var f=function(){e.constrainCamera=!0,e.panToPosition({position:c,target:l,duration:2,ease:rc.smootherstep}),setTimeout((function(){Fu.near=s,Fu.updateProjectionMatrix()}),500),t.onComplete&&t.onComplete()},h=Array.isArray(t.feature)?t.feature:[t.feature];!function o(a){var s=h[a],c=function(){rc.transition(u,0,1,{duration:s.curve.getLength()/i,ease:rc.linear,lerp:function(t,e,n){return s.curve.getPointAt(n)},onCancel:f,onComplete:function(){a<h.length-1?o(a+1):f()}}),t.onFeatureReached&&t.onFeatureReached(s.id)};if(0===a){var l=s.curve.getPointAt(0),p=s.curve.getPointAt(.01),d=l.clone().sub(p);d.setLength(Math.max(n,100)),d.add(l),d.z+=r,e.panToPosition({position:d,target:l,duration:2,ease:rc.smootherstep,onComplete:c,onCancel:f})}else c()}(0)},Lc.prototype.configure=function(t){var e=this;m.forEach(t,(function(t,n){e[n]=t}));m.forEach(["minDistance","minHeight","maxBounds","maxDistance","minPolarAngle","maxPolarAngle","noPan","noRotate","noZoom"],(function(t){e.hasOwnProperty(t)&&(e.controls[t]=e[t])}))},Lc.displayName="CameraStore";var Gc=A.createStore(Lc),Vc=new gu.Vector3(5804542996261093e-21,13562911419845635e-21,3026590246882488e-20),qc=new gu.Vector3(7633915830775757e-20,7544890573273999e-20,7411352687021361e-20),Hc={luminance:{type:"f",value:1},turbidity:{type:"f",value:2},reileigh:{type:"f",value:1},mieCoefficient:{type:"f",value:.005},mieDirectionalG:{type:"f",value:.8},sunPosition:{type:"v3",value:new gu.Vector3(0,0,0)},sunDirection:{type:"v3",value:new gu.Vector3(0,0,0)},lightDirection:{type:"v3",value:new gu.Vector3(0,0,0)},betaRM:{type:"v3",value:new gu.Vector3(0,0,0)},betaRnorm:{type:"v3",value:new gu.Vector3(0,0,0)},betaMnorm:{type:"v3",value:new gu.Vector3(0,0,0)},constants:{type:"v4",value:new gu.Vector4(0,0,0,0)},gamma:{type:"f",value:0},tonemapScale:{type:"f",value:0},update:function(){var t=Hc.sunPosition.value,e=t.clone().normalize(),n=e.z;e.z=e.y,e.y=n,Hc.sunDirection.value.copy(e);var r=t.clone().normalize();Hc.lightDirection.value.copy(r);var i=Hc.mieDirectionalG.value,o=Math.pow(.07957747154595*(1-i*i),-.666666666),a=-2*o*i,s=o*(i*i+1);Hc.constants.value.y=a,Hc.constants.value.z=s;var u=Math.pow(1-e.y,5);u=gu.Math.clamp(u,0,1),Hc.constants.value.w=u;var c=1-gu.Math.clamp(1-Math.exp(t.z/45e4),0,1),l=Hc.reileigh.value+c-1,f=.66666666666667*(Math.acos(e.y)-1.61107315568707),h=1e3*Math.max(0,1-Math.exp(f));Hc.constants.value.x=19e3*h;var p=Hc.turbidity.value,d=Hc.mieCoefficient.value,g=Vc.clone().multiplyScalar(l),y=qc.clone().multiplyScalar(p*d),v=new gu.Vector3(h/(g.x+y.x),h/(g.y+y.y),h/(g.z+y.z)),m=g.clone().multiply(v).multiplyScalar(.01492077591487),A=y.clone().multiply(v);g.multiplyScalar(8400),y.multiplyScalar(1250),Hc.betaRM.value.copy(g.add(y)),Hc.betaRnorm.value.copy(m),Hc.betaMnorm.value.copy(A);var b=1/(1.2+1.2*c);Hc.gamma.value=b;var _=Hc.luminance.value,w=1.7*Math.log(2/Math.pow(_,4))/Math.LN2;Hc.tonemapScale.value=w}};Hc.update();var Wc=function(t){return(t*(.15*t+.05)+.004)/(t*(.15*t+.5)+.06)-.02/.3},Xc={exposureBias:{type:"f",value:1},whitePoint:{type:"f",value:11.2},uTonemapExposureBias:{type:"f",value:1},uTonemapWhiteScale:{type:"f",value:1},update:function(){Xc.uTonemapExposureBias.value=Xc.exposureBias.value,Xc.uTonemapWhiteScale.value=1/Wc(Xc.whitePoint.value)}},Yc=new gu.Vector3,Qc=new gu.Vector3,Zc=!1,Kc={uFogDropoff:{type:"f",value:6e-4},uFogIntensity:{type:"f",value:.1},uFogColor:{type:"c",value:new gu.Color},update:function(t){Zc=!t,t=t||Gc.getState(),Yc.copy(t.target).sub(t.position),Yc.z=Yc.y,Yc.y=0,Yc.normalize(),(Zc||Yc.distanceToSquared(Qc)>.01)&&(Kc.uFogColor.value.copy(function(t){var e=Math.max(0,t.y),n=e+Math.pow(17.6579343808112+260.4183050037293*e,-1.253),r=Hc.betaRM.value.clone().multiplyScalar(-1/n);r.x=Math.exp(r.x),r.y=Math.exp(r.y),r.z=Math.exp(r.z);var i=Hc.sunDirection.value.clone(),o=Hc.constants.value.clone(),a=t.dot(i),s=a+1,u=Hc.betaRnorm.value.clone(),c=Hc.betaMnorm.value.clone();u.multiplyScalar(4+s*s),c.multiplyScalar(Math.pow(o.y*a+o.z,-1.5));var l=u.clone().add(c),f=new gu.Vector3(Math.pow(l.x*(1-r.x),1.5),Math.pow(l.y*(1-r.y),1.5),Math.pow(l.z*(1-r.z),1.5));f.x*=1-o.w+o.w*Math.sqrt(l.x*r.x),f.y*=1-o.w+o.w*Math.sqrt(l.y*r.y),f.z*=1-o.w+o.w*Math.sqrt(l.z*r.z);var h=r.clone().multiplyScalar(.1),p=f.clone().add(h).multiplyScalar(.04).add(new gu.Vector3(0,3e-4,75e-5)),d=Hc.tonemapScale.value;p.multiplyScalar(d);var g=Hc.gamma.value,y=Xc.uTonemapExposureBias.value,v=Xc.uTonemapWhiteScale.value;return p.x=Math.pow(y*Wc(v*p.x),g),p.y=Math.pow(y*Wc(v*p.y),g),p.z=Math.pow(y*Wc(v*p.z),g),new gu.Color(p.x,p.y,p.z)}(Yc)),Qc.copy(Yc))}};Gc.listen(Kc.update);var Jc=U([[_.setCurrentPlace,{}]]);Jc.displayName="PlacesStore";var $c=A.createStore(Jc),tl={},el=4e5;tl.update=function(){Hc.turbidity.value=tl.turbidity,Hc.reileigh.value=tl.reileigh,Hc.luminance.value=tl.luminance,Hc.mieCoefficient.value=tl.mieCoefficient,Hc.mieDirectionalG.value=tl.mieDirectionalG;var t=Math.PI*(tl.inclination-.5),e=2*Math.PI*(tl.azimuth-.5);Hc.sunPosition.value.set(el*Math.sin(e)*Math.cos(t),el*Math.cos(e)*Math.cos(t),el*Math.sin(t)),Hc.update(),Kc.update(),Kc.uFogDropoff.value=tl.fogDropoff,Kc.uFogIntensity.value=tl.fogIntensity,Xc.exposureBias.value=tl.exposureBias,Xc.whitePoint.value=tl.whitePoint,Xc.update()},tl.set=function(t,e){if(0===e)Object.assign(tl,t),tl.update(),setTimeout((function(){b.needsRender({env:!0})}));else{var n=m.clone(tl),r=m.clone(t);rc.transition((function(t){Object.assign(tl,t),tl.update(),setTimeout((function(){b.needsRender({env:!0})}))}),n,r,{duration:e,doNotCancel:!0,lerp:rc.lerp.params,onComplete:function(){b.needsRender({env:!0})}})}},V.listen((function(t){var e=t.environment;tl.set(e.parameters,e.animationDuration)})),$c.listen((function(t){var e=t.currentPlace;e.env&&tl.set(e.env,0)}));var nl={gui:null,onChange:null,initEnv:function(){if(!nl.envGui){var t=function(){tl.update(),b.needsRender({env:!0}),nl.onChange&&nl.onChange()},e=new B.GUI;nl.envGui=e,e.remember(tl);var n=e.addFolder("Sky");n.add(tl,"turbidity",1,20).onChange(t),n.add(tl,"reileigh",0,4).onChange(t),n.add(tl,"mieCoefficient",0,.1).onChange(t),n.add(tl,"mieDirectionalG",0,1).onChange(t),n.add(tl,"luminance",0,2).onChange(t),n.add(tl,"inclination",.4,1).onChange(t),n.add(tl,"azimuth",0,1).onChange(t);var r=e.addFolder("Fog");r.add(tl,"fogDropoff",0,1e-4).onChange(t),r.add(tl,"fogIntensity",0,2.5).onChange(t);var i=e.addFolder("Scene");i.add(tl,"exposureBias",.1,10).onChange(t),i.add(tl,"whitePoint",.1,30).onChange(t)}}};window.letMePlay=function(){nl.initEnv()};var rl={setEnvironment:function(t){setTimeout((function(){_.setEnvironment(t)}),0)},environmentEditor:function(){nl.initEnv()}},il=[],ol=function(){il.shift()()},al=function(t){"function"===typeof t?(il.push(t),setTimeout(ol,0)):console.error("Tried to enqueue non-function")},sl={isLineString:function(t){return"LineString"===t.geometry.type},isPolygon:function(t){return"Polygon"===t.geometry.type},isMultiPolygon:function(t){return"MultiPolygon"===t.geometry.type},isPoint:function(t){return"Point"===t.geometry.type},tagValue:function(t,e){return t.properties.tags?t.properties.tags[e]:null},hasTag:function(t,e){return!!sl.tagValue(t,e)},isPiste:function(t){return sl.isLineString(t)&&sl.hasTag(t,"piste:type")},isAerial:function(t){return sl.isLineString(t)&&sl.hasTag(t,"aerialway")},isHighway:function(t){return sl.isLineString(t)&&sl.hasTag(t,"highway")},isTrack:function(t){if(!sl.isLineString(t))return!1;var e=sl.tagValue(t,"highway");return"track"===e||"footway"===e||"path"===e||"cycleway"===e||"bridleway"===e},isRiver:function(t){return sl.isLineString(t)&&sl.hasTag(t,"waterway")},isBuilding:function(t){return sl.isPolygon(t)&&sl.hasTag(t,"building")},isForest:function(t){return(sl.isPolygon(t)||sl.isMultiPolygon(t))&&!sl.isBuilding(t)},color:function(t){var e=!!t.properties.tags&&t.properties.tags["piste:difficulty"];return e?"advanced"===e||"expert"===e||"freeride"===e?"#030512":"intermediate"===e?"#ef2415":"easy"===e?"#1976d2":"novice"===e?"#4caf50":(Su("Unknown piste difficulty",e),"#17afef"):sl.isAerial(t)?"#0c0c0c":sl.isTrack(t)?"rgba(46, 42, 22, 0.5)":sl.isHighway(t)?"#222120":t.properties.color?t.properties.color:sl.isRiver(t)?"stream"===t.properties.tags.waterway?5:100:void Su("Unknown feature color",t)},thickness:function(t){if(t.properties.thickness)return t.properties.thickness;if(sl.isPiste(t))return 2.7;if(sl.isAerial(t))return 3;if(sl.isTrack(t))return 3;if(sl.isHighway(t)){var e=sl.tagValue(t,"highway");return"motorway"===e?13:"trunk"===e?11:"primary"===e?10:"secondary"===e?8:5}return sl.isRiver(t)?t.properties.tags.width?t.properties.tags.width:"stream"===t.properties.tags.waterway?2:3.7:2.5}};function ul(){this.bindListeners({clearFeatures:_.setCurrentPlace,setFeatures:O.setFeatures}),this.clearFeatures()}ul.prototype.clearFeatures=function(){return this.buildings=[],this.forests=[],this.highways=[],this.lifts=[],this.peaks=[],this.places=[],this.pistes=[],this.lakes=[],this.rivers=[],this.unknown=[],!1},ul.prototype.classify=function(t){if(sl.isLineString(t))return sl.hasTag(t,"piste:type")?this.pistes:sl.hasTag(t,"highway")?this.highways:sl.hasTag(t,"waterway")?this.rivers:sl.hasTag(t,"aerialway")?this.lifts:this.pistes;if(sl.isPolygon(t))return sl.hasTag(t,"building")?this.buildings:"water"===sl.tagValue(t,"natural")||"riverbank"===sl.tagValue(t,"waterway")?this.lakes:this.forests;if(sl.isMultiPolygon(t))return this.forests;if(sl.isPoint(t)){var e=t.properties.tags;return"peak"===e.natural&&e.name?this.peaks:e.place?this.places:this.unknown}return this.unknown},ul.prototype.normalize=function(t){if(void 0!==t.properties.tags){var e=t.properties,n=e.tags;delete e.tags,n.name&&(e.name=n.name),"peak"===n.natural?(e.icon="caret-up",e.fadeDistance=1e4,n.ele&&e.name&&(e.name+=" - "+n.ele+"m")):n.place&&(e.icon="dot-circle-o",e.fadeDistance=15e3),e.collapseDistance=.5*e.fadeDistance,e.priority=-10,e.borderRadius=20,e.background="rgba(0, 0, 0, 0.6)",e.color="#fff",e.clipping="object",e.anchor="left",e.padding=2}},ul.prototype.setFeatures=function(t){for(var e,n=!!t.crs,r=Pu.now();t.features.length>0;)e=t.features.pop(),n&&(e.geometry.coordinates=tc.unproject3035(e.geometry.coordinates)),void 0===e.projected&&(e.projected=!1),this.classify(e).push(e);this.peaks.forEach(this.normalize.bind(this)),this.places.forEach(this.normalize.bind(this));var i=Pu.now()-r;Pu.timing("geodata","classify","osm",i)},ul.displayName="OSMAdapter";var cl=A.createStore(ul),ll="____default____";function fl(){this.bindListeners({addBuiltinOverlay:O.addBuiltinOverlay,addOverlay:O.addOverlay,updateOverlay:O.updateOverlay,featureCreated:b.featureCreated,removeOverlay:O.removeOverlay,setFeatures:O.setFeatures}),this.overlays={},this.overlayTracker={},this.builtinOverlays=[],this.supportedBuiltinOverlays=["lifts","peaks","pistes","places"],this.referenceOnlyBuiltinOverlays=["lifts","pistes"],this.lines=[],this.markers=[]}fl.prototype.classify=function(t){return sl.isLineString(t)?this.lines:sl.isPoint(t)?this.markers:null},fl.prototype.removeFeature=function(t){var e=this.classify(t);if(null!==e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},fl.prototype.addOverlay=function(t){var e=-1!==this.builtinOverlays.indexOf(t.name);this.removeOverlay(t.name),e&&this.builtinOverlays.unshift(t.name),void 0===t.name&&(t.name=ll),this.overlays[t.name]=t;for(var n,r=t.features.concat(),i=Pu.now();r.length>0;){n=r.pop(),t.defaults&&t.defaults.properties&&m.defaults(n.properties,t.defaults.properties),void 0===n.projected&&(n.projected=!1);var o=this.classify(n);o&&(o.push(n),n.overlayName=t.name,this.featureClassified(n))}var a=Pu.now()-i;Pu.timing("geodata","classify","overlay",a)},fl.prototype.updateOverlay=function(t){if(!(void 0!==this.overlays[t.name]))return console.error(name+" overlay has not been added, so cannot be updated"),!1;var e=t.features,n=this.overlays[t.name].features,r=e.length,i=n.length;if(r!==i)return console.error("Tried to call updateOverlay on overlay "+t.name+", but number of features does not match. Original: "+i+", new: "+r),!1;for(var o=!!t.crs,a=0;a<r;a++){var s=n[a],u=e[a];s.projected=void 0===u.projected?o:u.projected,s.geometry.coordinates=u.geometry.coordinates}},fl.prototype.addBuiltinOverlay=function(t){Array.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++){var r=t[e],i=this.supportedBuiltinOverlays.indexOf(r);if(-1===i)return console.error(r+" is not a supported built-in overlay"),!1;-1===(i=this.builtinOverlays.indexOf(r))&&this.builtinOverlays.push(r)}return this.updateBuiltinOverlays()},fl.prototype.updateBuiltinOverlays=function(){this.waitFor(cl);for(var t=cl.getState(),e=0,n=this.builtinOverlays.length;e<n;e++){var r=this.builtinOverlays[e];-1===this.referenceOnlyBuiltinOverlays.indexOf(r)&&this.addOverlay({name:r,type:"FeatureCollection",features:t[r]})}},fl.prototype.setFeatures=function(){return this.updateBuiltinOverlays()},fl.prototype.removeOverlay=function(t){void 0===t&&(t=[ll]),Array.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++){var r=t[e],i=this.builtinOverlays.indexOf(r);if(-1!==i&&this.builtinOverlays.splice(i,1),void 0!==this.overlays[r]){for(var o=this.overlays[r],a=0,s=o.features.length;a<s;a++)this.removeFeature(o.features[a]);delete this.overlays[r]}}},fl.prototype.featureClassified=function(t){void 0===this.overlayTracker[t.overlayName]?this.overlayTracker[t.overlayName]=1:this.overlayTracker[t.overlayName]+=1},fl.prototype.featureCreated=function(t){if(void 0===this.overlayTracker[t.overlayName])return!1;if(this.overlayTracker[t.overlayName]-=1,0===this.overlayTracker[t.overlayName]){var e=t.overlayName;delete this.overlayTracker[t.overlayName],al((function(){b.overlayDisplayed(e)}))}delete t.overlayName},fl.displayName="OverlayAdapter";var hl=A.createStore(fl),pl={elevationArray:{value:Pc.textureArray},indirectionTexture:{value:Pc.indirectionTexture},uGlobalOffset:{type:"v2",value:new gu.Vector2},uSceneScale:{type:"f",value:1}};uc.listen((function(t){var e=t.globalOffset,n=t.sceneScale;pl.uGlobalOffset.value.copy(e),pl.uSceneScale.value=n}));var dl=function(t){this.value=t};dl.prototype.define=function(t,e){var n=new RegExp("#define "+t+" .*","g"),r="#define "+t+(e?" "+e:"");this.value.match(n)?this.value=this.value.replace(n,r):this.value=r+"\n"+this.value},dl.prototype.clone=function(){return new dl(this.value)};var gl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform vec3 cameraPosition;\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform float uAccuracy;\n\nvarying vec3 vPosition;\nvarying vec3 vCenter; // Center of beacon\nvarying float vRingRadius; // Radius to draw inner ring at\n\n// Radius of beacon geometry, as defined in JS\n#define BEACON_RADIUS 50.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfloat saturate( float t ) { return clamp( t, 0.0, 1.0 ); }\nvec2 saturate( vec2 t ) { return clamp( t, 0.0, 1.0 ); }\nvec3 saturate( vec3 t ) { return clamp( t, 0.0, 1.0 ); }\nvec4 saturate( vec4 t ) { return clamp( t, 0.0, 1.0 ); }\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\nvoid main() {\n  vCenter = position - BEACON_RADIUS * normal;\n  vec4 c4 = modelMatrix * vec4( vCenter, 1.0 );\n  vec3 worldCenter = c4.xyz / c4.w;\n  vCenter = worldCenter;\n\n  // Get distance to camera, and scale so that all beacon has constant screen size\n  float D = abs( ( viewMatrix * vec4( worldCenter, 1.0 ) ).z );\n  vRingRadius = 25.0 * clamp( D / 1000.0, 0.01, 10.0 ); // Cap size at so don't get artifacts when zooming\n\n  // Now have the minimum visible radius for beacon, adjust if smaller than accuracy\n  float radius = max( vRingRadius, uAccuracy );\n\n  vPosition = vCenter + radius * normal;\n\n  // Correct height\n  float height = getHeight( vPosition.xy );\n\n  // Place at correct height (flattening sphere in process)\n  float delta = height - vPosition.z + D / 1000.0 - 0.3 * radius; // Lift up at large distance so terrain doesn't swallow us & sink into ground\n  vPosition.z = height;\n\n\n  // To ensure beacon appears on top of forests & pistes, move towards camera\n  vec3 view = cameraPosition - vPosition;\n  float d = length( view );\n  view = normalize( view );\n  // Do not apply if too close, as it screws up geometry too much\n  float scale = 230.0 * smoothstep( 50.0, 250.0, d );\n\n  gl_Position = projectionMatrix * viewMatrix * vec4( vPosition + scale * view, 1.0 );\n}\n"),yl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform float uTime;\n\nvarying vec3 vPosition;\nvarying vec3 vCenter;\nvarying float vRingRadius;\n\nconst vec4 white = vec4( 1.0, 1.0, 1.0, 0.9 );\n\nvoid main() {\n  float fractionalR = distance( vPosition.xy, vCenter.xy ) / vRingRadius;\n  vec3 baseColor = mix( vec3( 0.0, 0.0, 1.0 ), vec3( 0.0, 0.5, 1.0 ), 0.2 * fractionalR );\n  vec4 color = vec4( baseColor * sin( uTime ), 0.5 );\n  \n  // White ring\n  color = mix( color, white, smoothstep( 0.75, 0.8, fractionalR ) );\n  color = mix( color, vec4( baseColor.rgb, 0.15 ), smoothstep( 1.0, 1.05, fractionalR ) );\n\n  // Gamma\n  color.rgb = pow( abs( color.rgb ), vec3( 0.4545 ) );\n\n  gl_FragColor = color;\n}\n");function vl(t,e,n,r){return void 0===e&&void 0===n?this.set(t):(void 0===r&&(r=1),this.setRGB(t,e,n,r))}Object.assign(vl.prototype,{isColor:!0,r:1,g:1,b:1,a:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this},setStyle:function(t){function e(t){return void 0===t?1:parseFloat(t)}var n;if(n=/^((?:rgb)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,this.a=e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,this.a=e(r[5]),this}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var a,s=(a=n[1]).length;if(3===s)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,this;if(6===s)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(a=gu.Color.NAMES[t])?this.setHex(a):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b,this.a)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),u=Math.min(i,o,a),c=(u+s)/2;if(u===s)e=0,n=0;else{var l=s-u;switch(n=c<=.5?l/(s+u):l/(2-s-u),s){case i:e=(o-a)/l+(o<a?6:0);break;case o:e=(a-i)/l+2;break;case a:e=(i-o)/l+4}e/=6}return r.h=e,r.s=n,r.l=c,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this.a+=(t.a-this.a)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ml={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["precision highp float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function Al(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(Al.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),Al.FullScreenQuad=function(){var t=new ys(-1,1,1,-1,0,1),e=new xr(2,2),n=function(n){this._mesh=new Zn(e,n),this._camera=t};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}();var bl=function(t,e){Al.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof cr||t instanceof da?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=ur.clone(t.uniforms),this.material=new da({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Al.FullScreenQuad(this.material)};bl.prototype=Object.assign(Object.create(Al.prototype),{constructor:bl,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))},compile:function(t){var e=new Se,n=new Oe;n.material=this.material,e.add(n),t.compile(e,this.fsQuad._camera),e.children=[]}});var _l=function(t,e,n){if(this.hd=!!n,this.renderer=t,void 0===e){var r={minFilter:et,magFilter:et,format:ft,stencilBuffer:!1},i=t.getSize(new Gt);(e=new Yt(i.width,i.height,r)).texture.name="EffectComposer.rt1"}var o;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.hd&&(this.renderTargetHD=e.clone(),o=new To,this.renderTarget1.depthTexture=o,this.renderTarget2.depthTexture=o),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===ml&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===bl&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new bl(ml),this.clock=new ks};Object.assign(_l.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){t.hd&&!this.hd&&console.error("Cannot add HD pass to a non-HD EffectComposer"),this.passes.push(t);var e=this.renderer.getSize(new Gt);t.setSize(e.width,e.height)},insertPass:function(t,e){this.passes.splice(e,0,t)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,r=this.renderer.getRenderTarget(),i=this.passes.length;for(n=0;n<i;n++)if(!1!==(e=this.passes[n]).enabled){var o=this.readBuffer;if(e.hd&&(o=this.renderTargetHD),e.src&&(o=e.src),e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,o,t,false),e.needsSwap)this.swapBuffers()}this.renderer.setRenderTarget(r)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new Gt);(t=this.renderTarget1.clone()).setSize(e.width,e.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e,n,r){this.renderTarget1.setSize(t,e),this.renderTarget2.setSize(t,e),this.hd&&this.renderTargetHD.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(this.hd&&this.passes[i].hd?n:t,this.hd&&this.passes[i].hd?r:e)}});var wl=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(wl.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),wl.FullScreenQuad=function(){var t=new ys(-1,1,1,-1,0,1),e=new xr(2,2),n=function(t){this._mesh=new Zn(e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}();var xl=function(t,e,n,r,i){Al.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};xl.prototype=Object.assign(Object.create(Al.prototype),{constructor:xl,render:function(t,e,n){var r,i,o,a,s,u=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(o=t.getClearColor().getHex(),a=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),!1===this.autoClearColor&&(r=t.autoClearColor,t.autoClearColor=!1),!1===this.autoClearDepth&&(i=t.autoClearDepth,t.autoClearDepth=!1),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(o,a),!1===this.autoClearColor&&(t.autoClearColor=r),!1===this.autoClearDepth&&(t.autoClearDepth=i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),t.autoClear=u}});var El=function(t){Al.call(this),void 0===ml&&console.error("SavePass relies on CopyShader");var e=ml;this.textureID="tDiffuse",this.uniforms=ur.clone(e.uniforms),this.material=new cr({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderTarget=t,void 0===this.renderTarget&&(this.renderTarget=new Yt(window.innerWidth,window.innerHeight,{minFilter:et,magFilter:et,format:lt,stencilBuffer:!1}),this.renderTarget.texture.name="SavePass.rt"),this.needsSwap=!1,this.fsQuad=new Al.FullScreenQuad(this.material)};El.prototype=Object.assign(Object.create(Al.prototype),{constructor:El,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),t.setRenderTarget(this.renderTarget),this.clear&&t.clear(),this.fsQuad.render(t)}});var Ol=function(t,e){Al.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof cr||t instanceof da?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=ur.clone(t.uniforms),this.material=new da({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Al.FullScreenQuad(this.material)};Ol.prototype=Object.assign(Object.create(Al.prototype),{constructor:Ol,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))},compile:function(t){var e=new Se,n=new Oe;n.material=this.material,e.add(n),t.compile(e,this.fsQuad._camera),e.children=[]}});var Sl=new gu.Scene;Sl.hd=new gu.Scene,Sl.tilepickerScene=new gu.Scene;var Tl={tDiffuse:{type:"t",value:null},uResolution:{type:"v2",value:new gu.Vector2(1,1)}},Pl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform sampler2D tDiffuse;\nuniform vec2 uResolution;\n\nvarying vec2 vUv;\n\n#define FXAA_REDUCE_MIN   0.0078125 // (1.0/128.0)\n#define FXAA_REDUCE_MUL   0.03125   // (1.0/32.0)\n#define FXAA_SPAN_MAX     8.0\n\nconst vec3 luma = vec3( 0.299, 0.587, 0.114 );\nconst vec2 fxaa_span = vec2( FXAA_SPAN_MAX );\n\nvoid main() {\n  // FXAA\n  vec4 uv = vec4( vUv + uResolution, vUv - uResolution );\n  vec3 rgbNW = texture2D( tDiffuse, uv.zw ).rgb;\n  vec3 rgbNE = texture2D( tDiffuse, uv.xw ).rgb;\n  vec3 rgbSW = texture2D( tDiffuse, uv.zy ).rgb;\n  vec3 rgbSE = texture2D( tDiffuse, uv.xy ).rgb;\n  vec4 lumas = vec4( dot( rgbNW, luma ),\n                     dot( rgbNE, luma ),\n                     dot( rgbSW, luma ),\n                     dot( rgbSE, luma ) );\n\n  // Precalculate common combinations\n  vec4 tmp = lumas.xzxy + lumas.ywzw;\n  vec2 dir = tmp.yz - tmp.xw;\n  float dirReduce = FXAA_REDUCE_MUL * max( tmp.x + tmp.y, FXAA_REDUCE_MIN / FXAA_REDUCE_MUL );\n  float dirMin = min( abs( dir.x ), abs( dir.y ) ) + dirReduce;\n  dir = uResolution * clamp( dir / dirMin, -fxaa_span, fxaa_span );\n  vec4 rgbA = (\n      texture2D( tDiffuse, vUv - dir * 0.16666666666667 ) +\n      texture2D( tDiffuse, vUv + dir * 0.16666666666667 ) );\n  vec4 rgbM = texture2D( tDiffuse, vUv );\n\n  // We used to check the range of the luma of rgbB against max/min of\n  // lumas above, to determine whether to use rgbA or rgbB\n  // but it didn't make much difference, with rgbB used most of the time\n  // So just used that as it saved us computing lumaMin/lumaMax\n\n  // Testing, draw different regions with different AA\n  //if ( vUv.x < 0.25 ) {\n  //  gl_FragColor = 0.5 * rgbA; // Just blurred\n  //} else if ( vUv.x < 0.5 ) {\n  //  gl_FragColor = 0.36 * ( rgbA + rgbM ); // Slight original pixel 2 : 1\n  //} else if ( vUv.x < 0.75 ) {\n  //  gl_FragColor = 0.25 * ( rgbA + 2.0 * rgbM ); // More 1 : 1\n  //} else {\n  //  gl_FragColor = 1.1 * rgbM; // No anti-alias\n  //}\n  gl_FragColor = 0.33333333333 * ( rgbA + rgbM ); // Slight original pixel 2 : 1\n\n  // Vignette\n  float d = distance( vUv, vec2( 0.5 ) );\n  gl_FragColor.rgb *= 1.0 - 0.17 * smoothstep( 0.42, 0.65, d );\n}\n"),Ml=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nattribute vec3 position;\nattribute vec2 uv;\n\n// Quad vertex shader that also passes through uv coordinate\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  // Do not need any matrix multiplications as positions already in clip\n  // space\n  gl_Position = vec4( position, 1.0 );\n}\n"),Cl=Du.getState(),Il={type:Ru.render565?gu.UnsignedShort565Type:gu.UnsignedByteType,minFilter:gu.LinearFilter,magFilter:gu.LinearFilter,format:gu.RGBFormat,stencilBuffer:!1},Rl=new gu.Vector2(1/Cl.canvasWidth,1/Cl.canvasHeight);Tl.uResolution.value.copy(Rl);var kl=new gu.WebGLRenderTarget(Cl.renderWidth,Cl.renderHeight,Il);Du.listen((function(t){Ll.setSize(t.renderWidth,t.renderHeight,t.canvasWidth,t.canvasHeight);var e=new gu.Vector2(1/t.canvasWidth,1/t.canvasHeight);Tl.uResolution.value.copy(e)}));var jl=Ru.depthTexture,Ll=new _l(mc,kl,jl),Nl=new xl(Sl,Fu);if(Ll.addPass(Nl),jl){var Dl=new El(Ll.renderTargetHD);Dl.src=Ll.renderTarget2,Ll.addPass(Dl)}var Fl=new xl(Sl.hd,Fu);Fl.autoClearColor=!1,Fl.autoClearDepth=jl,Fl.hd=jl,Ll.addPass(Fl);var Bl=new Ol({name:"postprocess",uniforms:Tl,vertexShader:Ml.value,fragmentShader:Pl.value});Bl.uniforms=Tl,Bl.material.uniforms=Tl,Bl.hd=jl,Bl.needsSwap=!1,Ll.addPass(Bl);var zl=Ll.render.bind(Ll);al((function(){bu.listen(zl)}));var Ul={};Ru.depthTexture&&(Ul.uDepth={type:"t",value:Ll.renderTarget2.depthTexture}),Ul.uReadDepthOverride={type:"f",value:1},Gc.listen((function(t){Ul.uReadDepthOverride.value=t.controls.lock2D?0:1}));var Gl=new Tc({textureSize:256,poolSize:yc});lc.listen((function(t){var e=t.datasource;e.imagery&&(Gl.apiKey=e.imagery.apiKey,Gl.urlFormat=e.imagery.urlFormat)}));var Vl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform vec3 cameraPosition;\n\nattribute vec3 tag;\nattribute vec4 tangent;\nattribute vec3 position;\nattribute vec4 color;\n\nuniform float uThickness;\nuniform vec3 uSelectedTag;\n\nvarying vec4 vColor;\nvarying float vAlpha;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nuniform vec2 uViewportInverse;\n\n// Calculate our position from the center and tangent of line\nvec4 positionFromTangent( const in vec3 center,\n                          const in float thickness ) {\n  // Get clipspace positions of center and center + tangent\n  vec4 p = vec4( center, 1.0 );\n  vec4 c4 = projectionMatrix * viewMatrix * p;\n\n  p.xyz += tangent.xyz;\n  vec4 cplust4 = projectionMatrix * viewMatrix * p;\n\n  // Tangent vector in clipspace (normalizing by w!)\n  vec2 t4 = cplust4.xy / cplust4.w - c4.xy / c4.w;\n\n  // Issue here when line is going towards screen, up and\n  // then down. The tangent will then flip from up to down\n  // and the line normal will also switch sides, leading\n  // to a fold in the quads forming the line\n  // Not really clear how to overcome this...\n\n  // Get normal in clipspace by crossing with vec3(0, 0, 1)\n  vec2 delt = t4.yx * vec2( 1.0, -1.0 ); // Move one side one way, the other the other way (tangent is opposite for vertices in pair)\n  delt = thickness * c4.w * normalize( delt ) * uViewportInverse;\n\n  c4.xy += delt;\n  return c4;\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\nvoid main() {\n  // Vertices are placed based on tangent, to give constant width on screen\n  vec3 center = position;\n  center.z += getHeight( center.xy );\n  gl_Position = positionFromTangent( center, uThickness );\n\n  vColor = color;\n\n  // Is line selected?\n  float selected = step( distance( tag, uSelectedTag ), 0.0 );\n  gl_Position.z -= 0.5 + 0.01 * selected;\n  vColor.rgb = mix( vColor.rgb, vec3( 1.0 ), 0.8 * selected );\n\n  // Safe way to identify side of line\n  vAlpha = sign( tangent.w );\n\n  // Dashed line\n  // float D = ( viewMatrix * vec4( position, 1.0 ) ).z;\n  // Round to log values\n  // D = pow( 2.0, floor( log2( D ) ) );\n  // Modulate distance along line by depth\n  // float dash = position.w * D;\n\n}\n"),ql=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform float uCutoff;\nuniform vec4 uOutlineColor;\n\nvarying vec4 vColor;\nvarying float vAlpha;\n\nvoid main() {\n  // Smoothly interpolate between:\n  // x: line color and edge color\n  // y: line alpha and transparent antialiased edge\n  vec2 f = smoothstep(\n   vec2( 0.4, 1.0 ) * uCutoff,\n   vec2( 0.5, 1.0 ),\n   abs( vec2( vAlpha ) ) );\n\n  // Multiply application of edge line with alpha\n  f.x *= uOutlineColor.a;\n\n  gl_FragColor = mix(\n    vColor,\n    vec4( uOutlineColor.rgb, 0.0 ),\n    f.xxxy );\n}\n"),Hl={uViewportInverse:{type:"v2",value:new gu.Vector2(1,1)}};Du.listen((function(t){var e=t.height,n=t.width;Hl.uViewportInverse.value.set(1/n,1/e)}));var Wl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 uOrthoTransform;\nuniform vec3 cameraPosition;\nuniform float uLodScale;\n\nuniform vec3 uSelectedTag;\nuniform float uPixelRatio;\nuniform vec2 uViewportInverse;\nuniform float uReadDepthOverride;\n\n#ifdef READ_DEPTH\nuniform sampler2D uDepth;\n#endif\n\n// Can only have up to 16 attributes. Currently have 9\nattribute vec2 position; // Not instanced, defines quad to draw\n\nattribute vec4 anchor; // (xy: anchor, zw: anchor offset)\nattribute vec4 atlas; // (xy: location in atlas, zw: size in atlas)\nattribute vec4 background;\nattribute vec4 clipping; // (x: per-object depth, y: per-pixel depth)\nattribute vec4 color;\nattribute vec3 layout; // (x: padding, y: borderWidth, z: borderRadius)\nattribute vec4 normal; // (xyz: normal, w: collapseDistance)\nattribute vec4 offset; // (xyz: offset, w: fadeDistance)\nattribute vec4 tag; // (xyz: tag, w: highlightOpacity)\n\n// Can have max 8 varyings. Currently have 6\nvarying vec4 vUv; // (xy: uv, z: selected, w: visibility)\nvarying vec4 vBox;\nvarying vec4 vBackground;\nvarying vec4 vColor;\nvarying float vReadDepth;\nvarying vec3 vLayout;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Normalized the input vector in place at the same\n// time as finding its lengt\n// Doesn't appear to be faster than length() & normalize() (same speed)\nfloat lengthNormalize( inout vec3 v ) {\n  float lengthSquared = dot( v, v );\n  float rcpLength = inversesqrt( lengthSquared );\n  v = rcpLength * v; // Normalized vector\n  return lengthSquared * rcpLength; // Vector length\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\n// Size of atlas scaled by atlas pixel ratio\n// Also set in picker.vert\n#define SIZE vec2( 512.0, 1024.0 )\n\nvoid main() {\n  vec3 worldPosition = offset.xyz;\n  worldPosition.z = getHeight( worldPosition.xy );\n\n  // Pass on attributes for shading\n  vBackground = background;\n  vColor = color;\n  vLayout = uPixelRatio * layout;\n  vReadDepth = clipping.y * uReadDepthOverride;\n\n  // Fade with distance\n  vec3 reverseViewVec = cameraPosition - worldPosition;\n  float D = lengthNormalize( reverseViewVec );\n\n  // Convert from clip space to uv space\n  // position          --\x3e pointCoord\n  // (-1,+1) - (+1,+1)     (0,0) - (1,0)\n  //    |         |    --\x3e   |       |\n  // (-1,-1) - (-1,+1)     (0,1) - (1,1)\n  vec2 flipped = vec2( 1.0, -1.0 ) * position;\n  vec2 pointCoord = 0.5 * flipped + vec2( 0.5 );\n\n  // Are we selected?\n  vUv.z = step( distance( tag.xyz, uSelectedTag ), 0.0 );\n\n  // Collapse/fade the label\n  vec2 expandshow = vec2( normal.w, offset.w ) + 1000000.0 * vUv.zz;\n  expandshow = smoothstep( expandshow, vec2( 0.95, 0.9 ) * expandshow, vec2( D ) );\n  vUv.w = ( 0.6 * expandshow.x + 0.4 ) * expandshow.y;\n\n  // Opacity of highlight\n  vUv.z *= tag.w;\n\n  // Calculate potentially collapsed size of label\n  vec2 crop = mix( atlas.ww * vec2( SIZE.y / SIZE.x, 1.0 ),\n    atlas.zw, expandshow.x );\n  vUv.xy = atlas.xy + crop * pointCoord;\n\n  // Hide when on slope facing away, disabled when\n  // we perform per-pixel depth clipping\n  vUv.w *= smoothstep( 0.0, 0.15, clipping.y + dot( reverseViewVec, normal.xyz ) );\n  vUv.w *= step( 0.3, vUv.w );\n\n  // Adding padding & border around marker\n  vec2 padding = layout.xx + layout.yy;\n  vUv.xy += ( padding * flipped ) / SIZE;\n  vec2 aspect = SIZE * crop + 2.0 * padding;\n  aspect *= uPixelRatio;\n\n  // Position towards us so we show up above terrain\n  // Make bigger for object clipping as to avoid flashing\n  float bringForward = min( 0.5 * D, 100.0 + 200.0 * clipping.x );\n  vec4 p = vec4( worldPosition + bringForward * reverseViewVec, 1.0 );\n  //vec4 p = vec4( worldPosition, 1.0 );\n  gl_Position = projectionMatrix * viewMatrix * p;\n\n  // Convert between gl_Position.xy clip-space to pixels\n  vec2 pixelScale = 2.0 * gl_Position.w * uViewportInverse; \n\n  #ifdef READ_DEPTH\n  // Hide entire label if anchor obscured\n  vec3 uvz = 0.5 * gl_Position.xyz / gl_Position.w + vec3( 0.5 );\n  float fragCoordZ = texture2D( uDepth, uvz.xy ).x;\n\n  // Move back by amount relative to precision limit of depth\n  float b = projectionMatrix[3][2]; // -2 * far * near / ( far - near )\n  // Not entirely clear why 0.01 is correct, but lower\n  // than this leading to flashing on iOS\n  fragCoordZ /= 1.0 + 0.02 * fragCoordZ / b;\n\n  vUv.w *= step( clipping.x * uvz.z, fragCoordZ );\n  #endif\n\n  // Snap to position. Do this before applying anchor\n  // to ensure composite markers stay together without wobbling\n  // Final offset of vec2( 0.5 ) is to emulate round() using ceil()\n  gl_Position.xy = pixelScale * floor( gl_Position.xy / pixelScale + vec2( 0.5 ) );\n\n  // Half of box for marker in clipspace\n  vec2 halfSize = 0.5 * pixelScale * aspect;\n\n  // Shift entire marker based on anchor position\n  gl_Position.xy += pixelScale * ( 0.5 * anchor.xy * aspect + anchor.zw );\n\n  // Finally move out vertices to form quad\n  // First get clipspace of top-left point\n  gl_Position.xy -= halfSize;\n\n  // box in fragCoord space, xy: center, zw: width/height\n  const vec2 halfPixel = vec2( 0.5 );\n  vBox.xy = ( gl_Position.xy + halfSize - halfPixel ) / pixelScale + vec2( 0.5 ) / uViewportInverse;\n  vBox.zw = aspect;\n\n  // Now calculate other vertices (relative to top-left)\n  vec2 vertex = ( position + vec2( 1.0 ) ) * halfSize;\n\n  // Shift by half pixel so that we are snapped to pixel for sharper text\n  vertex -= halfPixel;\n\n  // Only expand to primitive if visible, otherwise collapse to degenerate\n  // triangle, avoiding the fragment shader having to execute\n  gl_Position.xy += step( 0.0001, vUv.w ) * vertex;\n\n  // Clamp border radius to sensible range\n  vLayout.z = min( vLayout.z, 0.5 * vBox.w - vLayout.y ); // no larger than half of box\n  vLayout.z = max( 0.0001, vLayout.z ); // 0 causes rendering issues\n}\n"),Xl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\n#ifdef READ_DEPTH\nuniform sampler2D uDepth;\nuniform vec2 uViewportInverse;\n#endif\nuniform sampler2D uMap;\n\nvarying vec4 vUv;\nvarying vec4 vBox;\nvarying vec4 vBackground;\nvarying vec4 vColor;\nvarying float vReadDepth;\nvarying vec3 vLayout;\n\n#define SIZE 512.0\n\nvoid main() {\n  //gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n  //return;\n  // Partially hide label (per-pixel depth check)\n  #ifdef READ_DEPTH\n  float fragCoordZ = texture2D(uDepth, uViewportInverse * gl_FragCoord.xy).x;\n\n  float visibility = vUv.w * step( vReadDepth * gl_FragCoord.z, fragCoordZ );\n  #else\n  float visibility = vUv.w;\n  #endif\n\n  // Background color\n  gl_FragColor = vBackground;\n\n  // Padding\n  vec2 limit = 0.5 * vBox.zw - vec2( vLayout.x + vLayout.y );\n  vec2 clamped = clamp( gl_FragCoord.xy,\n      vBox.xy - limit,\n      vBox.xy + limit );\n  float inside = step( distance( clamped, gl_FragCoord.xy ), 0.0 );\n\n  // Image\n  // TODO not the correct blend operation, but works on black\n  // background\n  // Should switch to over operator\n  // e.g. https://en.wikipedia.org/wiki/Alpha_compositing\n  vec4 image = texture2D( uMap, vUv.xy );\n\n  // Mask out correct channel\n  // 1: R, 2: B, 3: G, 4: A - see atlas.js\n  vec4 channel = step( vec4( 1.0, 3.0, 2.0, 4.0 ), vec4( vUv.y ) );\n  channel *= step( vec4( vUv.y ), vec4( 2.0, 4.0, 3.0, 5.0 ) );\n  float monochrome = length( channel );\n  image = mix( image,\n               vec4( vec3( 1.0 ), dot( channel, image ) ),\n               monochrome );\n\n  // Clip image by padding\n  image.a *= inside;\n\n  // Colorize image\n  image *= vColor;\n\n  gl_FragColor.rgb = mix( gl_FragColor.rgb, image.rgb, image.a );\n  gl_FragColor.a = max( gl_FragColor.a, image.a );\n\n  // Radius of border\n  float radius = vLayout.z;\n\n  // Modify clamp to be circular\n  limit = 0.5 * vBox.zw - vec2( radius + vLayout.y );\n  clamped = clamp( gl_FragCoord.xy,\n                   vBox.xy - limit,\n                   vBox.xy + limit );\n  float d = distance( clamped, gl_FragCoord.xy );\n\n  // Draw border (similarly smoothstepping to reduce aliasing)\n  limit = vec2( max( radius - 1.0, 0.0 ), radius ); // Inner radius of border\n  float border = smoothstep( limit.x, limit.y, d );\n  border *= step( 0.4999, vLayout.y ); // Do not draw border if width less than 0.5\n  gl_FragColor = mix( gl_FragColor, vec4( 1.0 ), border );\n  limit += vLayout.yy; // Outer radius of border\n\n  // Fade out rounded border over one pixel to reduce aliasing\n  gl_FragColor.a *= smoothstep( limit.y, limit.x, d );\n\n  // Highlight and visibility\n  gl_FragColor.rgb += vUv.z;\n  gl_FragColor.a *= visibility;\n\n  // Debug\n  // Check that uv is always centered on texel\n  // Get constant color when we disable snapping\n  //gl_FragColor.rg = 10.0 * abs( fract( SIZE * vUv.xy ) - vec2( 0.5 ) );\n\n  // Display channel used\n  //gl_FragColor.rgb = mix( gl_FragColor.rgb, channel.rgb, vUv.z );\n\n  // Show entire quad\n  //gl_FragColor += vec4(1.0, 0.0, 0.0, 0.1);\n  if ( gl_FragColor.a < 0.0001 ) { discard; }\n}\n"),Yl={uMap:{type:"t",value:null},uPixelRatio:{type:"f",value:1},uViewportInverse:{type:"v2",value:new gu.Vector2(1,1)}};Du.listen((function(t){var e=t.canvasHeight,n=t.pixelRatio,r=t.canvasWidth;Yl.uViewportInverse.value.set(1/r,1/e),Yl.uPixelRatio.value=n}));var Ql=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec3 position;\n\nvarying vec3 vPosition;\n\nvoid main() {\n  vPosition = position.xzy;\n  vPosition.y = max( 0.0, vPosition.y );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"),Zl=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nvarying vec3 vPosition;\n\n// Not including sun disk for now as we rarely see it anyway\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Derived uniforms\nuniform vec3 sunDirection;\nuniform vec3 betaRM;\nuniform vec3 betaRnorm;\nuniform vec3 betaMnorm;\nuniform vec4 constants; // sunE, hgPhaseA, hgPhaseB & LinWeight\nuniform float gamma;\nuniform float tonemapScale;\n\n// Safe functions\nfloat spow( const float x, const float y ) {\n  return pow( abs( x ), y );\n}\n\nvec3 spow( const vec3 x, const vec3 y ) {\n  return pow( abs( x ), y );\n}\n\nvec3 ssqrt( const vec3 x ) {\n  return sqrt( abs( x ) );\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nuniform float uTonemapExposureBias;\nuniform float uTonemapWhiteScale;\n\nvec3 RawTonemap( vec3 x )\n{\n  return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n}\n\nvec3 Tonemap( vec3 color ) {\n  return uTonemapExposureBias * RawTonemap( uTonemapWhiteScale * color );\n}\n\n\nvec3 skyColor( vec3 direction ) {\n  float cosZenithAngle = max( 0.0, direction.y );\n  // Approximate acos( x ) by pi/2 - x\n  // This allows us to simplify and error is only large when looking up\n  float denom = cosZenithAngle + spow( 17.6579343808112 + cosZenithAngle * 260.41830500372932, -1.253 );\n\n  // combined extinction factor\t\n  vec3 Fex = exp( -betaRM / denom );\n\n  // in scattering\n  float cosTheta = dot( direction, sunDirection );\n  float rPhase = cosTheta + 1.0;\n  vec3 betaRTheta = betaRnorm * ( 4.0 + rPhase * rPhase );\n  vec3 betaMTheta = betaMnorm * spow( constants.y * cosTheta + constants.z, -1.5 );\n\n  vec3 tmp = betaRTheta + betaMTheta;\n  vec3 Lin = spow( tmp * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), ssqrt( tmp * Fex ), constants.w );\n\n  // nightsky\n  vec3 L0 = 0.1 * Fex;\n\n  #ifdef SUN_DISK\n  L0 += constants.x * Fex * smoothstep( 0.9999566769, 0.9999766769, cosTheta );\n  #endif\n\n  // Combine all components\n  vec3 color = 0.04 * ( Lin + L0 ) + vec3( 0.0, 0.0003, 0.00075 );   \n  color = Tonemap( tonemapScale * color );\n  return spow( color, vec3( gamma ) );\n}\n\n\nvoid main() {\n  vec3 direction = normalize( vPosition );\n  vec3 color = skyColor( direction );\n  // Stars\n  //float r = 500.0;\n  //vec3 rounded = floor( 0.4999999 + r * direction ) / r;\n  //float hash = fract( sin( 21041.4 * rounded.x ) + sin( 317041.4 * rounded.z ) + sin( 210041.4 * rounded.x ) + sin( 217041.4 * rounded.y ));\n  //float star = distance( rounded, direction );\n  //star = smoothstep( 0.5 / r, 0.0, star );\n  //color += vec3( star * smoothstep( 0.97, 1.0, hash ) * smoothstep( 0.01, 0.05, direction.y) );\n  gl_FragColor = vec4( color, 1.0 );\n}\n");function Kl(){this.selected=null,this.bindListeners({animateAlongFeature:_.animateAlongFeature,onFeatureSelected:_.featureSelected})}Kl.prototype.animateAlongFeature=function(){this.selected=null},Kl.prototype.onFeatureSelected=function(t){this.selected=t},Kl.displayName="FeaturesStore";var Jl=A.createStore(Kl),$l={uSelectedTag:{type:"c",value:new gu.Color}};Jl.listen((function(t){var e=t.selected,n=e&&e.tag?e.tag:65536;$l.selectedTag.value.set(n)}));var tf=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform vec3 cameraPosition;\n\nattribute vec4 position;\n\nuniform vec4 uOffset;\nuniform vec4 uImageryUvOffset;\n\nvarying vec4 vUV;\nvarying float D;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\nvoid main() {\n  // Move into place by shifting instanced position by tile offset\n  vec4 p = vec4( position.xy, 0.0, 1.0 );\n  p.xy *= uOffset.z; // Scale\n  p.xy += uOffset.xy; // Shift\n\n  // Extract the height (for skirting from the uv)\n  vec2 skirt = 10.0 * floor( position.zw / 10.0 );\n  vec2 uv = position.zw - skirt;\n\n  p.z = getHeight( p.xy );\n\n  // Pull down skirt vertices\n  p.z -= 0.01 * uOffset.z * skirt.x;\n\n  // Scale image uv lookup for fragment shader\n  vUV.xy = uImageryUvOffset.z * uv.xy + uImageryUvOffset.xy;\n  vUV.zw = uv.xy;\n\n  // Distance for fog\n  D = distance( cameraPosition, p.xyz );\n\n\tgl_Position = projectionMatrix * viewMatrix * p;\n}\n"),ef=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\n//#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n\nuniform vec4 uImageryUvOffset;\n\nvarying vec4 vUV; // xy: scaled for imagery lookup, zw: actual uv across tile\n\nvarying float D;\n\nuniform lowp sampler2D imageryArray;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nuniform float uFogDropoff;\nuniform float uFogIntensity;\nuniform vec3 uFogColor;\n\nfloat fogFactor( in float dist ) {\n  float fog = uFogIntensity *  ( 1.0 - exp( -dist * uFogDropoff ) );\n  return clamp( fog, 0.0, 1.0 );\n}\n\nfloat fogFactor( in vec3 camera, in vec3 pos ) {\n  float dist = distance( camera, pos );\n  return fogFactor( dist );\n}\n\n\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 16.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 256.0\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nvoid main() {\n  vec3 color = readTex( imageryArray, vUV.xy, uImageryUvOffset.w ).rgb;\n\n  float fogAmount = fogFactor( D );\n  color = mix( color, uFogColor, fogAmount );\n\n  gl_FragColor = vec4( color, 1.0 );\n\n  //// Edge debug\n  //gl_FragColor.r *= 1.0 - dot( vec2( 1.0 ), step( vUV.xy, vec2( 0.01 ) ) );\n  //gl_FragColor.g *= 1.0 - dot( vec2( 1.0 ), step( vUV.zw, vec2( 0.01 ) ) );\n\n  // Error calc (mimics picker shader)\n  //vec4 error = dFdx( vUV );\n  //error *= 256.0;\n  //float E = log2( length( error.zw ) ) - 0.75;\n  //float cap = 0.75; // Value to cap error display at\n  //vec3 errorColor = mix( vec3( 1.0 ), vec3( 1.0, 0.0, 0.0 ),\n  //  max( 0.0, E / cap ) );\n  //errorColor = mix( errorColor, vec3( 0.0, 1.0, 0.0 ),\n  //  max( 0.0, -E / cap ) );\n\n  //// Tile outlines\n  //vec4 wire = smoothstep(\n  // 0.48, 0.49,\n  // fract( vec4( 1.0, -1.0, 1.0, -1.0 ) * 2.0 * vUV.zzww + vec4( 0.5 ) ) );\n  //float wireframe = min( 1.0, wire.x * wire.y + wire.z * wire.w );\n  //gl_FragColor.rgb = mix( gl_FragColor.rgb, errorColor, wireframe );\n}\n"),nf=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec4 position;\n\nuniform vec4 uOffset;\nuniform vec4 uImageryUvOffset;\nuniform vec3 uScaling; // xy: center pixel, z: downScaling\n\nvarying vec4 vUV;\n\n#define MANUAL_TEXTURE_BILINEAR 1\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\nvoid main() {\n  // Move into place by shifting instanced position by tile offset\n  vec4 p = vec4( position.xy, 0.0, 1.0 );\n  p.xy *= uOffset.z; // Scale\n  p.xy += uOffset.xy; // Shift\n\n  // Extract the height (for skirting from the uv)\n  vec2 skirt = 10.0 * floor( position.zw / 10.0 );\n  vec2 uv = position.zw - skirt;\n\n  p.z = getHeight( p.xy );\n\n  // Pull down skirt vertices\n  p.z -= 0.01 * uOffset.z * skirt.x;\n\n  // Pass values through to fragment shader\n  float tileId = uOffset.w;\n  vec2 encodedTileId = vec2(\n    floor( tileId / 256.0 ) / 256.0,\n    fract( tileId / 256.0 )\n    ) * ( 256.0 / 255.0 );\n\n  // Scale error to texture width\n  vUV.xy = uv.xy * uScaling.z;\n  vUV.zw = encodedTileId;\n\n\tgl_Position = projectionMatrix * viewMatrix * p;\n}\n"),rf=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\n#extension GL_OES_standard_derivatives : enable  \nprecision highp float;\n\nuniform vec3 uScaling; // xy: center pixel, z: downScaling\n\nvarying vec4 vUV; // xy: actual uv across tile, zw: encodedTileId\n\nvoid main() {\n  // Assess our screen space error, both for tile size and texture blur\n  // For now not actually using the texture blur error, as it is best to\n  // fetch just based on the tile geometry, makes things more stable\n  vec2 deltaUV = dFdx( vUV.xy );\n\n  float err = log2( length( deltaUV ) );\n\n  vec2 encodedTileId = vUV.zw;\n\n  // TODO perhaps we could encode this the same way we encode Z\n  // and save some instructions\n  // Store error clamped to range -5 > 5 (log encoded)\n  float encodedError = 0.1 * err + 0.5;\n\n  // Scale to fill 0->1 to 16bit capacity\n  float scaledZ = 256.0 * 255.0 * gl_FragCoord.z;\n  vec2 encodedZ = vec2(\n    floor( scaledZ / 256.0 ),\n    mod( scaledZ, 256.0 )\n   ) / 255.0;\n  float isCenter = step( distance( gl_FragCoord.xy, uScaling.xy ), 4.0 );\n\n  vec4 standard = vec4( encodedTileId, 0.0, encodedError );\n  vec4 centerPixels = vec4( 0.0, 0.0, encodedZ );\n  gl_FragColor = mix( standard, centerPixels, isCenter );\n}\n"),of={uScaling:{value:new gu.Vector3}};[gl,Vl,Wl,tf,nf].forEach((function(t){vc||t.define("MANUAL_TEXTURE_BILINEAR","1"),t.define("VIRTUAL_TEXTURE_ARRAY_BLOCKS",Math.sqrt(dc).toExponential()),t.define("VIRTUAL_TEXTURE_ARRAY_SIZE",gc.toExponential())})),ef.define("VIRTUAL_TEXTURE_ARRAY_BLOCKS",Math.sqrt(yc).toExponential()),ef.define("VIRTUAL_TEXTURE_ARRAY_SIZE",256..toExponential()),Ru.depthTexture&&(Wl.define("READ_DEPTH",1),Xl.define("READ_DEPTH",1));var af={beacon:new gu.RawShaderMaterial({name:"_beacon",uniforms:m.assign({uAccuracy:{type:"f",value:25},uTime:{type:"f",value:0}},pl),depthWrite:!1,vertexShader:gl.value,fragmentShader:yl.value,transparent:!0}),marker:function(){var t=new gu.RawShaderMaterial({name:"marker",uniforms:m.assign({},Ul,pl,Yl,$l),vertexShader:Wl.value,fragmentShader:Xl.value,transparent:!0});return t.defaultAttributeValues={},t}(),line:m.memoize((function(t,e,n){var r=Math.max(.3,(e-2)/e),i=new vl(t);t=[i.r,i.g,i.b,i.a],void 0!==n?(void 0===(i=new vl(n)).a&&(i.a=1),n=new gu.Vector4(i.r,i.g,i.b,i.a)):n=new gu.Vector4(0,0,0,0);var o=new gu.RawShaderMaterial({name:"line",uniforms:m.assign({uCutoff:{type:"f",value:r},uOutlineColor:{type:"c",value:n},uThickness:{type:"f",value:e}},pl,Hl,$l),vertexShader:Vl.value,fragmentShader:ql.value,transparent:!0});return o.defaultAttributeValues.color=t,o})),sky:new gu.RawShaderMaterial({name:"sky",uniforms:m.assign({},Hc,Xc),depthWrite:!1,vertexShader:Ql.value,fragmentShader:Zl.value,side:gu.BackSide}),terrain:function(t){return{imagery:new gu.RawShaderMaterial({uniforms:m.assign(t,{imageryArray:{value:Gl.textureArray}},Kc,pl),vertexShader:tf.value,fragmentShader:ef.value}),picker:new gu.RawShaderMaterial({uniforms:m.assign(t,pl,of),vertexShader:nf.value,fragmentShader:rf.value})}}};af.marker.index0AttributeName="offset",m.forOwn(af,(function(t){"RawShaderMaterial"===t.type&&(t.defaultAttributeValues={})}));var sf=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform vec3 cameraPosition;\n\nuniform float uPixelRatio;\nuniform vec2 uViewportCanvasInverse;\n\n// This material needs to handle both pistes and markers\n// which is tricky as their attributes mean different things\n// In particular position is instanced for markers but\n// not for pistes\n\n// Rather than have 2 materials we use the position attribute\n// to decide what we are rendering. Perhaps it is faster to have\n// two materials, but this is simpler and saves swapping programs\n\n// For markers the position attribute is 1, 1 or similar\n// assume that for pistes it is longer. A bit hacky but works\n// Using another attribute isn't reliable, e.g. we cannot\n// use the atlas which should be 0 for pistes as this randomly\n// fails. TODO investigate more robust solution\n\n// Shared attributes\nattribute vec3 tag;\nattribute vec3 position;\n\n// Piste attribute\nattribute vec3 tangent;\n\n// Marker attributes\nattribute vec4 atlas; // (xy: location in atlas, zw: size in atlas)\nattribute vec4 anchor; // (xy: anchor, z: per-object depth, w: per-pixel depth)\nattribute vec4 clipping; // (x: per-object depth, y: per-pixel depth)\nattribute vec3 layout; // (x: padding, y: borderWidth, z: borderRadius)\nattribute vec4 normal; // (xyz: normal, w: collapseDistance)\nattribute vec4 offset; // (xyz: offset, w: fadeDistance)\n\nvarying vec4 vTag;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Normalized the input vector in place at the same\n// time as finding its lengt\n// Doesn't appear to be faster than length() & normalize() (same speed)\nfloat lengthNormalize( inout vec3 v ) {\n  float lengthSquared = dot( v, v );\n  float rcpLength = inversesqrt( lengthSquared );\n  v = rcpLength * v; // Normalized vector\n  return lengthSquared * rcpLength; // Vector length\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\n#define TUBE_RADIUS 20.0\n#define SIZE vec2( 512.0, 1024.0 )\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nuniform vec2 uViewportInverse;\n\n// Calculate our position from the center and tangent of line\nvec4 positionFromTangent( const in vec3 center,\n                          const in float thickness ) {\n  // Get clipspace positions of center and center + tangent\n  vec4 p = vec4( center, 1.0 );\n  vec4 c4 = projectionMatrix * viewMatrix * p;\n\n  p.xyz += tangent.xyz;\n  vec4 cplust4 = projectionMatrix * viewMatrix * p;\n\n  // Tangent vector in clipspace (normalizing by w!)\n  vec2 t4 = cplust4.xy / cplust4.w - c4.xy / c4.w;\n\n  // Issue here when line is going towards screen, up and\n  // then down. The tangent will then flip from up to down\n  // and the line normal will also switch sides, leading\n  // to a fold in the quads forming the line\n  // Not really clear how to overcome this...\n\n  // Get normal in clipspace by crossing with vec3(0, 0, 1)\n  vec2 delt = t4.yx * vec2( 1.0, -1.0 ); // Move one side one way, the other the other way (tangent is opposite for vertices in pair)\n  delt = thickness * c4.w * normalize( delt ) * uViewportInverse;\n\n  c4.xy += delt;\n  return c4;\n}\n\n\nvoid main() {\n  vTag.rgb = tag;\n\n  // If we have a tag of zero, do not even draw\n  // TODO appears to break in Firefox!\n  float visible = 1.0 - step( length( tag ), 0.0 );\n\n  // Select which material this is\n  // TODO also broken on FF?\n  float l = length( position.x );\n  float isMarker = step( l, 1.00001 );\n  isMarker *= step( 0.99999, l );\n\n  // Lookup height\n  vec3 worldPosition = mix( position, offset.xyz, isMarker );\n  worldPosition.z = getHeight( worldPosition.xy );\n\n  // Render path for piste\n  vec4 piste = positionFromTangent( worldPosition, TUBE_RADIUS );\n\n  // Render path for markers\n  vec3 reverseViewVec = cameraPosition - worldPosition;\n  float D = lengthNormalize( reverseViewVec );\n\n  // Pack all into one varying xy: uv, z: selected, w: visibility\n  vec2 flipped = vec2( 1.0, -1.0 ) * position.xy;\n  vec2 pointCoord = 0.5 * flipped + vec2( 0.5 );\n\n  // Collapse/fade the label\n  vec4 vUv;\n  vec2 expandshow = vec2( normal.w, offset.w );\n  expandshow = smoothstep( expandshow, vec2( 0.95, 0.9 ) * expandshow, vec2( D ) );\n  vUv.w = ( 0.6 * expandshow.x + 0.4 ) * expandshow.y;\n\n  // Calculate potentially collapsed size of label\n  vec2 crop = mix( atlas.ww * vec2( SIZE.y / SIZE.x, 1.0 ),\n    atlas.zw, expandshow.x );\n  vUv.xy = atlas.xy + crop * pointCoord;\n\n  // Hide when on slope facing away, disabled when\n  // we perform per-pixel depth clipping\n  vUv.w *= smoothstep( 0.0, 0.15, clipping.y + dot( reverseViewVec, normal.xyz ) );\n  vUv.w *= step( 0.3, vUv.w );\n\n  // Adding padding & border around marker\n  vec2 padding = layout.xx + layout.yy;\n  vUv.xy += ( padding * flipped ) / SIZE;\n  vec2 aspect = SIZE * crop + 2.0 * padding;\n  aspect *= uPixelRatio;\n\n  // Position towards us so we show up above terrain\n  // Make bigger for object clipping as to avoid flashing\n  float bringForward = min( 0.5 * D, 100.0 + 200.0 * clipping.x );\n  vec4 p = vec4( worldPosition + bringForward * reverseViewVec, 1.0 );\n  //vec4 p = vec4( worldPosition, 1.0 );\n  vec4 marker = projectionMatrix * viewMatrix * p;\n\n  // Pixel-snapping (means we can use nearest filtering on texture)\n  vec2 pixelScale = uPixelRatio * marker.w * uViewportCanvasInverse; \n\n  #ifdef READ_DEPTH\n  // Hide entire label if anchor obscured\n  vec3 uvz = 0.5 * marker.xyz / marker.w + vec3( 0.5 );\n  float fragCoordZ = texture2D( uDepth, uvz.xy ).x;\n\n  // Move back by amount relative to precision limit of depth\n  float b = projectionMatrix[3][2]; // -2 * far * near / ( far - near )\n  // Not entirely clear why 0.01 is correct, but lower\n  // than this leading to flashing on iOS\n  fragCoordZ /= 1.0 + 0.02 * fragCoordZ / b;\n\n  vUv.w *= step( clipping.x * uvz.z, fragCoordZ );\n  #endif\n\n  marker.xy = pixelScale * floor( marker.xy / pixelScale );\n\n  // Half of box for marker in clipspace\n  vec2 halfSize = 0.5 * pixelScale * aspect;\n\n  // Shift entire marker based on anchor position\n  marker.xy += pixelScale * ( 0.5 * anchor.xy * aspect + anchor.zw );\n\n\n  // Finally move out vertices to form quad\n  // First get clipspace of top-left point\n  marker.xy -= halfSize;\n\n  // Now calculate other vertices (relative to top-left)\n  vec2 vertex = ( position.xy + vec2( 1.0 ) ) * halfSize;\n  marker.xy += vertex;\n\n  gl_Position = visible * mix( piste, marker, isMarker );\n}\n"),uf=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nvarying vec4 vTag;\n\nvoid main() {\n  gl_FragColor = vTag;\n  // For testing draw more visible colors\n  //gl_FragColor.rgb = mod( 10000.0 * vTag.rgb, vec3( 1.0 ) );\n  //gl_FragColor.a = 1.0;\n}\n"),cf={uPixelRatio:{type:"f",value:1},uViewportCanvasInverse:{type:"v2",value:new gu.Vector2(1,1)},uViewportInverse:{type:"v2",value:new gu.Vector2(1,1)}};Du.listen((function(t){var e=t.canvasHeight,n=t.canvasWidth,r=t.height,i=t.width,o=t.pixelRatio;cf.uViewportCanvasInverse.value.set(1/n,1/e),cf.uViewportInverse.value.set(1/i,1/r),cf.uPixelRatio.value=o}));var lf,ff,hf,pf,df,gf,yf,vf,mf,Af=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec4 position;\n\nuniform vec4 uOffset;\n\nvarying vec2 vPosition;\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO set these from JS\n#define VIRTUAL_TEXTURE_ARRAY_BLOCKS 4.0\n#define VIRTUAL_TEXTURE_ARRAY_SIZE 512.0\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// On iOS standard texture linear filtering has\n// artifacts, so use this manual replacement.\n// It also doesn't work for FLOAT textures\n#define TEX_SIZE (VIRTUAL_TEXTURE_ARRAY_SIZE * VIRTUAL_TEXTURE_ARRAY_BLOCKS)\nconst vec2 texelSize = vec2( 1.0 / TEX_SIZE, 0.0 );\nvec4 texture2D_bilinear( const in sampler2D t, in vec2 uv )\n{\n  // Calculate pixels to sample and interpolating factor\n  uv -= 0.5 * texelSize.xx;\n  vec2 f = fract( uv * TEX_SIZE );\n  // Snap to corner of texel and then move to center\n  vec2 uvSnapped = uv - texelSize.xx * f + 0.5 * texelSize.xx;\n\n  #ifdef HEIGHT_LOOKUP_BIAS\n  // As we are sampling snapped pixels need to override\n  // the mip-map selection by selecting a large negative\n  // bias. Otherwise at boundaries the gradient of\n  // uvSnapped is large and an incorrect mip-level is used\n  // leading to artifacts\n  vec4 tl = texture2D(t, uvSnapped, -10.0);\n  vec4 tr = texture2D(t, uvSnapped + texelSize, -10.0 );\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx, -10.0 );\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx, -10.0 );\n  #else\n  vec4 tl = texture2D(t, uvSnapped);\n  vec4 tr = texture2D(t, uvSnapped + texelSize);\n  vec4 bl = texture2D(t, uvSnapped + texelSize.yx);\n  vec4 br = texture2D(t, uvSnapped + texelSize.xx);\n  #endif\n  vec4 tA = mix( tl, tr, f.x );\n  vec4 tB = mix( bl, br, f.x );\n  return mix( tA, tB, f.y );\n}\n\n// Virtual texture array lookup (WebGL1 fallback)\nvec4 readTex( in sampler2D tex, in vec2 uv, in float index ) {\n  // Convert index into spatial offset\n  vec2 offset = vec2(\n    mod( float( index ), VIRTUAL_TEXTURE_ARRAY_BLOCKS ),\n    floor( float( index ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS )\n  );\n\n  // Don't bleed across to next texture\n  const float padding = 0.5;\n  vec2 limits = vec2( padding, VIRTUAL_TEXTURE_ARRAY_SIZE - padding ) / VIRTUAL_TEXTURE_ARRAY_SIZE; \n\n  // Calculate uv for lookup\n  vec2 scaledUv = ( clamp( uv, limits.x, limits.y ) + offset ) / VIRTUAL_TEXTURE_ARRAY_BLOCKS;\n  #ifdef MANUAL_TEXTURE_BILINEAR\n  return texture2D_bilinear( tex, scaledUv );\n  #else\n  return texture2D( tex, scaledUv );\n  #endif\n}\n\n\nuniform lowp sampler2D indirectionTexture;\nuniform vec2 uGlobalOffset;\nuniform float uSceneScale;\n\n// Function to scale height such that one unit in the\n// horizontal plane is equal to one vertical unit\n// Basically comes down to the Mercator projection\n// Math.pow(2, 15) / 40075016.686\nconst float earthScale = 0.0008176665341588574;\nfloat heightScale ( in float y ) {\n  // PI - 2 * PI * y / pow( 2, 10 ) [ z is fixed to 10 ]\n  float n = 3.141592653589793 - 0.006135923151542565 * y;\n  // cosh( n ) / ( earthScale * uSceneScale)\n  float cosh_n = dot( vec2( 0.5 ), exp( vec2( n, -n ) ) );\n  return cosh_n / ( earthScale * uSceneScale );\n}\n\n// TODO should this be highp? Seems OK on iOS\n// From: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n//     If you have a float texture, iOS requires that you use highp sampler2D foo;\n//     or it will very painfully give you lowp texture samples!\n//     (+/-2.0 max is probably not good enough for you)\n// +/-2 seems OK, but should revisit if artifacts present\nuniform lowp sampler2D elevationArray;\nfloat getHeight( in vec2 p ) {\n  // Get tile coord (at z = 10), currently we are at z = 15\n  const float zoomScale = 32.0; // pow( 2, 15 - 10 )\n  const float indirectionSize = 1024.0;\n  vec2 tile = p.xy - uGlobalOffset;\n  tile /= ( uSceneScale * zoomScale );\n  tile *= vec2( 1.0, -1.0 );\n\n  // Unsnapped uv will be used below for secondary lookup\n  vec2 indirectionUv = tile / indirectionSize;\n\n  // Snap as on Windows/ANGLE Nearest filtering is not respected\n  const vec2 halfTexel = vec2( 0.5 );\n  vec2 snapped = ( floor( tile - halfTexel ) + halfTexel );\n  snapped += step( halfTexel, tile - snapped );\n  vec2 indirectionUvRounded = snapped / indirectionSize;\n\n  vec4 indirection = texture2D( indirectionTexture, indirectionUvRounded );\n\n  // Update index from indirection\n  float index = indirection.r;\n  float tileSize = indirection.g;\n  vec2 tileOrigin = indirection.ba;\n\n  // We know index of texture to do lookup in, but now\n  // we need to know the uv coordinates within the tile\n  // For this we need to know what the tile origin and size are\n  // At first glance it might seem possible to derive the tile origin\n  // mathematically from the indirectionUv (using `fract`), but the issue\n  // then is numerical precision. On some GPUs the lack of precision\n  // means that the data we read from the indirection texture doesn't\n  // align with that derived in the shader. It is more reliable to\n  // store the entire transformation from the indirectionUv to\n  // scaledUv in the texture, that way it will be no spurious errors\n  vec2 scaledUv = indirectionUv * tileSize + tileOrigin;\n\n  // Finally read out height, and unpack to single float\n  return heightScale( tile.y ) * readTex( elevationArray, scaledUv, index ).a;\n}\n\n\n// TODO, not yet working, but shader should look something like this\nvoid main() {\n  // Move into place by shifting instanced position by tile offset\n  vec4 p = vec4( position.xy, 0.0, 1.0 );\n  p.xy *= uOffset.z; // Scale\n  p.xy += uOffset.xy; // Shift\n\n  vPosition = p.xy + vec2( 32768.0 );\n  p.z = getHeight( p.xy );\n\tgl_Position = projectionMatrix * viewMatrix * p;\n}\n"),bf=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\nvarying vec2 vPosition;\n\nvoid main() {\n  // Pack position xy into RGBA\n  gl_FragColor = vec4( mod( vPosition.xy, 256.0 ),\n                       floor( vPosition.xy / 256.0 ) ) / 255.0;\n}\n"),_f={mouse:{x:0,y:0},raycastPosition:new gu.Vector3,init:function(){_f.resolution=.2;var t=new gu.RawShaderMaterial({name:"picker",uniforms:m.assign({},pl,cf),vertexShader:sf.value,fragmentShader:uf.value});t.defaultAttributeValues=af.marker.defaultAttributeValues,_f.pickerScene=new gu.Scene,_f.pickerScene.overrideMaterial=t,_f.pickerScene.lastCameraPosition=Fu.position.clone();var e=new gu.RawShaderMaterial({name:"raycast",uniforms:pl,vertexShader:Af.value,fragmentShader:bf.value});_f.raycastScene=new gu.Scene,_f.raycastScene.overrideMaterial=e;var n=Du.getState(),r={minFilter:gu.NearestFilter,magFilter:gu.NearestFilter};_f.renderTarget=new gu.WebGLRenderTarget(_f.resolution*n.width,_f.resolution*n.height,r),_f.renderTarget1px=new gu.WebGLRenderTarget(1,1,r),_f.viewOffsetWidth=n.width,_f.viewOffsetHeight=n.height,_f.buffer=new Uint8Array(4)},stores:[],tagId:1,featureIdtoTagId:new Map,registerStore:function(t){-1===_f.stores.indexOf(t)&&_f.stores.push(t),t.data.forEach((function(t){!1!==t.properties.selectable&&(void 0!==t.id?((ff=_f.featureIdtoTagId.get(t.id))||(ff=_f.tagId++,_f.featureIdtoTagId.set(t.id,ff)),t.tag=ff):(t.tag=_f.tagId++,t.id=1e6+_f.tagId++))}))},pickFeature:function(t){for(_f.mouse.x=t.x,_f.mouse.y=t.y,t.clipspace&&(_f.mouse=Du.fromClipSpace(_f.mouse)),_f.mouse.x=_f.resolution*_f.mouse.x,_f.mouse.y=_f.renderTarget.height-_f.resolution*_f.mouse.y,_f.pickerScene.lastCameraPosition.equals(Fu.position)||(_f.pickerScene.lastCameraPosition.copy(Fu.position),mc.setRenderTarget(_f.renderTarget),mc.render(_f.raycastScene,Fu),lf=mc.autoClearDepth,mc.autoClearDepth=!1,mc.render(_f.pickerScene,Fu),mc.autoClearDepth=lf),mc.readRenderTargetPixels(_f.renderTarget,_f.mouse.x,_f.mouse.y,1,1,_f.buffer),hf=_f.buffer[0]<<16|_f.buffer[1]<<8|_f.buffer[2],$l.uSelectedTag.value.set(0===hf?65536:hf),df=0,gf=_f.stores.length;df<gf;df++)for(pf=_f.stores[df],vf=0,mf=pf.data.length;vf<mf;vf++)if((yf=pf.data[vf]).tag===hf)return yf;return null},raycastTerrain:function(t){return _f.mouse.x=t.x,_f.mouse.y=t.y,t.clipspace&&(_f.mouse=Du.fromClipSpace(_f.mouse)),Fu.setViewOffset(_f.viewOffsetWidth,_f.viewOffsetHeight,_f.mouse.x,_f.mouse.y,1,1),mc.setRenderTarget(_f.renderTarget1px),mc.render(_f.raycastScene,Fu),mc.readRenderTargetPixels(_f.renderTarget1px,0,0,1,1,_f.buffer),Fu.clearViewOffset(),_f.raycastPosition.set(_f.buffer[0]+256*_f.buffer[2]-32768,_f.buffer[1]+256*_f.buffer[3]-32768),32768===_f.raycastPosition.x&&32768===_f.raycastPosition.y?null:(_f.raycastPosition.z=Ic(_f.raycastPosition),_f.raycastPosition)},render:function(){mc.setScissorTest(!0);var t=_f.mouse.x/_f.resolution,e=(_f.renderTarget.height-_f.mouse.y)/_f.resolution;mc.setScissor(t-50,e-50,100,100),mc.render(_f.raycastScene,Fu),lf=mc.autoClearDepth,mc.autoClearDepth=!1,mc.setClearColor("#ff0000",1),mc.render(_f.pickerScene,Fu),mc.autoClearDepth=lf,mc.setScissorTest(!1)}};function wf(){this.data={},this.bindListeners({clearFeatures:_.setCurrentPlace,addOverlay:[O.addOverlay,O.removeOverlay]})}Du.listen((function(t){_f.renderTarget.setSize(_f.resolution*t.width,_f.resolution*t.height),_f.viewOffsetWidth=t.width,_f.viewOffsetHeight=t.height})),bu.listen((function(t){t.animating&&(_f.pickerScene.lastCameraPosition.x+=1e6)})),_f.init(),wf.prototype.clearFeatures=function(){return this.data=[],!1},wf.prototype.addOverlay=function(){this.waitFor(hl);var t=hl.getState().lines;if(m.isEqual(this.data,t))return!1;this.data=t.concat(),_f.registerStore(this)},wf.displayName="LineData";var xf=A.createStore(wf),Ef={};function Of(){this.bindListeners({featureClicked:_.featureClicked,featureSelected:_.featureSelected,overlayDisplayed:b.overlayDisplayed})}var Sf=function t(e){if(void 0!==e){if(Array.isArray(e))return e.map(t);if(e.geometry)return m.find(xf.getState().data,m.matchesProperty("geometry",e.geometry));var n=m.find(xf.getState().data,m.matchesProperty("id",e));return n||(n||((n=m.find(hl.getState().points,m.matchesProperty("id",e)))?n:n=m.find(hl.getState().markers,m.matchesProperty("id",e))))}};Ef.addBuiltinOverlay=function(t){setTimeout((function(){O.addBuiltinOverlay(t)}),0)},Ef.addOverlay=function(t){setTimeout((function(){O.addOverlay(t)}),0)},Ef.updateOverlay=function(t){setTimeout((function(){O.updateOverlay(t)}),0)},Ef.removeOverlay=function(t){setTimeout((function(){O.removeOverlay(t)}),0)},Ef.highlightFeature=function(t){var e=Sf(t);e&&setTimeout((function(){_.featureSelected(e)}))},Ef.focusOnFeature=function(t){var e=Sf(t);e&&setTimeout((function(){_.focusOnFeature(e)}))},Ef.selectFeatures=function(t){t&&setTimeout((function(){_.selectFeatures(t)}))};var Tf=null;Of.prototype.featureSelected=function(t){Tf!==t&&(Tf=t,"function"===typeof Ef.onFeatureSelected&&t&&void 0!==t.id&&Ef.onFeatureSelected(t.id))},Of.prototype.featureClicked=function(t){"function"===typeof Ef.onFeatureClicked&&t&&void 0!==t.id&&Ef.onFeatureClicked(t.id)},Of.prototype.overlayDisplayed=function(t){"function"===typeof Ef.onOverlayAdded&&t&&Ef.onOverlayAdded(t)},Of.displayName="FeaturesExport",A.createStore(Of);var Pf={play:function(){setTimeout((function(){b.play()}),0)},pause:function(){setTimeout((function(){b.pause()}),0)}},Mf={setUserLocation:function(t){var e;e=void 0!==t.latitude&&void 0!==t.longitude?{coords:t}:t,setTimeout((function(){mu.panToPosition(e)}),0)},toggleUserLocationTracking:function(){setTimeout((function(){mu.toggleTracking()}),0)}},Cf={setCameraModeControlVisible:function(t){setTimeout((function(){x.setCameraModeControlVisible(t)}),0)},setCompassVisible:function(t){setTimeout((function(){x.setCompassVisible(t)}),0)},setRotationControlVisible:function(t){setTimeout((function(){x.setRotationControlVisible(t)}),0)},setUserLocationControlVisible:function(t){setTimeout((function(){x.setUserLocationControlVisible(t)}),0)},setZoomControlVisible:function(t){setTimeout((function(){x.setZoomControlVisible(t)}),0)}},If=g(y((function(t,e){!function(t){function e(t,e){var n=k,r=void 0,i=void 0,o=void 0,a=void 0;for(a=arguments.length;a-- >2;)R.push(arguments[a]);for(e&&null!=e.children&&(R.length||R.push(e.children),delete e.children);R.length;)if((i=R.pop())&&void 0!==i.pop)for(a=i.length;a--;)R.push(i[a]);else"boolean"==typeof i&&(i=null),(o="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i+="":"string"!=typeof i&&(o=!1)),o&&r?n[n.length-1]+=i:n===k?n=[i]:n.push(i),r=o;var s=new C;return s.nodeName=t,s.children=n,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,void 0!==I.vnode&&I.vnode(s),s}function n(t,e){for(var n in e)t[n]=e[n];return t}function r(t,e){t&&("function"==typeof t?t(e):t.current=e)}function i(t,r){return e(t.nodeName,n(n({},t.attributes),r),arguments.length>2?[].slice.call(arguments,2):t.children)}function o(t){!t._dirty&&(t._dirty=!0)&&1==U.push(t)&&(I.debounceRendering||j)(a)}function a(){for(var t=void 0;t=U.pop();)t._dirty&&E(t)}function s(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&u(t,e.nodeName):n||t._componentConstructor===e.nodeName}function u(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=n({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var i in r)void 0===e[i]&&(e[i]=r[i]);return e}function l(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function h(t,e,n,i,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)r(n,null),r(i,t);else if("class"!==e||o)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var a in n)a in i||(t.style[a]="");for(var s in i)t.style[s]="number"==typeof i[s]&&!1===z.test(s)?i[s]+"px":i[s]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var u=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?n||t.addEventListener(e,p,u):t.removeEventListener(e,p,u),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!o&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var c=o&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?c?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(c?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function p(t){return this._listeners[t.type](I.event&&I.event(t)||t)}function d(){for(var t=void 0;t=G.shift();)I.afterMount&&I.afterMount(t),t.componentDidMount&&t.componentDidMount()}function g(t,e,n,r,i,o){V++||(q=null!=i&&void 0!==i.ownerSVGElement,H=null!=t&&!(B in t));var a=y(t,e,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--V||(H=!1,o||d()),a}function y(t,e,n,r,i){var o=t,a=q;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),m(t,!0))),o[B]=!0,o;var s=e.nodeName;if("function"==typeof s)return O(t,e,n,r);if(q="svg"===s||"foreignObject"!==s&&q,s+="",(!t||!u(t,s))&&(o=l(s,q),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),m(t,!0)}var c=o.firstChild,f=o[B],h=e.children;if(null==f){f=o[B]={};for(var p=o.attributes,d=p.length;d--;)f[p[d].name]=p[d].value}return!H&&h&&1===h.length&&"string"==typeof h[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=h[0]&&(c.nodeValue=h[0]):(h&&h.length||null!=c)&&v(o,h,n,r,H||null!=f.dangerouslySetInnerHTML),b(o,e.attributes,f),q=a,o}function v(t,e,n,r,i){var o=t.childNodes,a=[],u={},c=0,l=0,h=o.length,p=0,d=e?e.length:0,g=void 0,v=void 0,A=void 0,b=void 0,_=void 0;if(0!==h)for(var w=0;w<h;w++){var x=o[w],E=x[B],O=d&&E?x._component?x._component.__key:E.key:null;null!=O?(c++,u[O]=x):(E||(void 0!==x.splitText?!i||x.nodeValue.trim():i))&&(a[p++]=x)}if(0!==d)for(var S=0;S<d;S++){_=null;var T=(b=e[S]).key;if(null!=T)c&&void 0!==u[T]&&(_=u[T],u[T]=void 0,c--);else if(l<p)for(g=l;g<p;g++)if(void 0!==a[g]&&s(v=a[g],b,i)){_=v,a[g]=void 0,g===p-1&&p--,g===l&&l++;break}_=y(_,b,n,r),A=o[S],_&&_!==t&&_!==A&&(null==A?t.appendChild(_):_===A.nextSibling?f(A):t.insertBefore(_,A))}if(c)for(var P in u)void 0!==u[P]&&m(u[P],!1);for(;l<=p;)void 0!==(_=a[p--])&&m(_,!1)}function m(t,e){var n=t._component;n?S(n):(null!=t[B]&&r(t[B].ref,null),!1!==e&&null!=t[B]||f(t),A(t))}function A(t){for(t=t.lastChild;t;){var e=t.previousSibling;m(t,!0),t=e}}function b(t,e,n){var r=void 0;for(r in n)e&&null!=e[r]||null==n[r]||h(t,r,n[r],n[r]=void 0,q);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||h(t,r,n[r],n[r]=e[r],q)}function _(t,e,n){var r=void 0,i=W.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),T.call(r,e,n)):((r=new T(e,n)).constructor=t,r.render=w);i--;)if(W[i].constructor===t)return r.nextBase=W[i].nextBase,W.splice(i,1),r;return r}function w(t,e,n){return this.constructor(t,n)}function x(t,e,n,i,a){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||a?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,n!==L&&(n!==N&&!1===I.syncComponentUpdates&&t.base?o(t):E(t,N,a)),r(t.__ref,t))}function E(t,e,r,i){if(!t._disable){var o=t.props,a=t.state,s=t.context,u=t.prevProps||o,l=t.prevState||a,f=t.prevContext||s,h=t.base,p=t.nextBase,y=h||p,v=t._component,A=!1,b=f,w=void 0,O=void 0,T=void 0;if(t.constructor.getDerivedStateFromProps&&(a=n(n({},a),t.constructor.getDerivedStateFromProps(o,a)),t.state=a),h&&(t.props=u,t.state=l,t.context=f,e!==D&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(o,a,s)?A=!0:t.componentWillUpdate&&t.componentWillUpdate(o,a,s),t.props=o,t.state=a,t.context=s),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!A){w=t.render(o,a,s),t.getChildContext&&(s=n(n({},s),t.getChildContext())),h&&t.getSnapshotBeforeUpdate&&(b=t.getSnapshotBeforeUpdate(u,l));var P=w&&w.nodeName,M=void 0,C=void 0;if("function"==typeof P){var R=c(w);(O=v)&&O.constructor===P&&R.key==O.__key?x(O,R,N,s,!1):(M=O,t._component=O=_(P,R,s),O.nextBase=O.nextBase||p,O._parentComponent=t,x(O,R,L,s,!1),E(O,N,r,!0)),C=O.base}else T=y,(M=v)&&(T=t._component=null),(y||e===N)&&(T&&(T._component=null),C=g(T,w,s,r||!h,y&&y.parentNode,!0));if(y&&C!==y&&O!==v){var k=y.parentNode;k&&C!==k&&(k.replaceChild(C,y),M||(y._component=null,m(y,!1)))}if(M&&S(M),t.base=C,C&&!i){for(var j=t,F=t;F=F._parentComponent;)(j=F).base=C;C._component=j,C._componentConstructor=j.constructor}}for(!h||r?G.push(t):A||(t.componentDidUpdate&&t.componentDidUpdate(u,l,b),I.afterUpdate&&I.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);V||i||d()}}function O(t,e,n,r){for(var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,u=s,l=c(e);i&&!u&&(i=i._parentComponent);)u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?(x(i,l,F,n,r),t=i.base):(o&&!s&&(S(o),t=a=null),i=_(e.nodeName,l,n),t&&!i.nextBase&&(i.nextBase=t,a=null),x(i,l,N,n,r),t=i.base,a&&t!==a&&(a._component=null,m(a,!1))),t}function S(t){I.beforeUnmount&&I.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?S(n):e&&(null!=e[B]&&r(e[B].ref,null),t.nextBase=e,f(e),W.push(t),A(e)),r(t.__ref,null)}function T(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function P(t,e,n){return g(n,t,{},!1,e,!1)}function M(){return{}}var C=function(){},I={},R=[],k=[],j="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,L=0,N=1,D=2,F=3,B="__preactattr_",z=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,U=[],G=[],V=0,q=!1,H=!1,W=[];n(T.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=n(n({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),o(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),E(this,D)},render:function(){}}),t.default={h:e,createElement:e,cloneElement:i,createRef:M,Component:T,render:P,rerender:a,options:I},t.h=e,t.createElement=e,t.cloneElement=i,t.createRef=M,t.Component=T,t.render=P,t.rerender=a,t.options=I,Object.defineProperty(t,"__esModule",{value:!0})}(e)}))),Rf={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1};var kf=If;kf.createClass=function(t){function e(t,e){!function(t){for(var e in t){var n=t[e];"function"!==typeof n||n.__bound||Rf.hasOwnProperty(e)||((t[e]=n.bind(t)).__bound=!0)}}(this),If.Component.call(this,t,e)}var n=e.prototype=new If.Component;for(var r in t)n[r]=t[r];return n.constructor=e};var jf=kf.render;function Lf(){this.featuresLoaded=!1,this.renderedFeatureStatus={},this.featuresRendered=!1,this.bindListeners({renderedFeatureRegister:b.renderedFeatureRegister,renderedFeatureDisplayed:b.renderedFeatureDisplayed,setCurrentPlace:_.setCurrentPlace,setFeatures:O.setFeatures})}kf.render=function(t,e){e.innerHTML=null,jf(t,e)},Lf.prototype.setCurrentPlace=function(){this.featuresLoaded=!1;for(var t=Object.keys(this.renderedFeatureStatus),e=0;e<t.length;e++)this.renderedFeatureStatus[t[e]]=!1;this.featuresRendered=!1,this.waitFor($c);var n=$c.getState().currentPlace;setTimeout((function(){var t={longitude:n.location[0],latitude:n.location[1],angle:40,distance:5e3,bearing:0,animationDuration:.5};Ic(t,(function(e){t.height=e,_.focusOnLocation(t)}))}),0)},Lf.prototype.setFeatures=function(){this.waitFor(cl),this.featuresLoaded=!0},Lf.prototype.renderedFeatureRegister=function(t){return this.renderedFeatureStatus[t]=!1,!1},Lf.prototype.renderedFeatureDisplayed=function(t){this.renderedFeatureStatus[t]=!0;var e=Object.keys(this.renderedFeatureStatus);this.featuresRendered=this.featuresLoaded;for(var n=0;n<e.length;n++){this.renderedFeatureStatus[e[n]]||(this.featuresRendered=!1)}return this.featuresRendered},Lf.displayName="EngineStore";A.createStore(Lf);var Nf=function(){gu.Object3D.call(this),this.sphere=new gu.Mesh(new gu.SphereBufferGeometry(50,32,15),af.beacon),this.add(this.sphere),this.visible=!1,Sl.add(this),oc.listen(this.update.bind(this)),bu.listen(this.tick.bind(this))};(Nf.prototype=Object.create(gu.Object3D.prototype)).update=function(){var t=oc.getState();if(t.longitude&&t.latitude&&!t.tooFar){this.visible=!0;var e=tc.project([t.longitude,t.latitude]);this.position.copy(e),this.sphere.material.uniforms.uAccuracy.value=t.accuracy||0}else this.visible=!1},Nf.prototype.tick=function(t){this.sphere.material.uniforms.uTime.value=t.clock.elapsedTime};new Nf;var Df,Ff,Bf,zf,Uf,Gf,Vf=function(t,e,n){Fn.call(this),t=t||1048576,e=e||["position"],this.type="BufferMergeGeometry",this.indices=[];for(var r,i=this,o=0;o<e.length;o++){var a=e[o];"normal"===a?(r=new Int8Array(3*t),i.setAttribute(a,new An(r,3,!0))):"tangent"===a?(r=new Int8Array(4*t),i.setAttribute(a,new An(r,4,!0))):"color"===a?(r=new Uint8Array(4*t),i.setAttribute(a,new An(r,4,!0))):(r=new Float32Array(3*t),i.setAttribute(a,new An(r,3)))}n&&(r=new Uint8Array(3*t),i.setAttribute("tag",new An(r,3,!0))),this.attributeOffset=0,this.indexOffset=0};(Vf.prototype=Object.create(Fn.prototype))._mergeIndices=function(t){for(var e=this.indices,n=t.index.array,r=t.index.array.length,i=0,o=this.indexOffset;i<r;i++,o++)e[o]=this.attributeOffset+n[i];this.indexOffset+=r},Vf.prototype.merge=function(t,e){var n,r,i,o,a,s;this._mergeIndices(t);var u=new ln(e);u=new Uint8Array([255*u.r,255*u.g,255*u.b]);for(var c=Object.keys(this.attributes),l=0;l<c.length;l++){var f=c[l],h=this.attributes[f];if(o=h.array,"tag"===f&&e)for(n=0,r=3*this.attributeOffset,i=3*s;n<i;n+=3,r+=3)o.set(u,r);else t.attributes[f]&&(a=t.attributes[f].array,s=t.attributes[f].count,o.set(a,h.itemSize*this.attributeOffset))}return this.attributeOffset+=s,this},Vf.prototype.capacity=function(){return this.attributes.position.count-this.attributeOffset},Vf.prototype.freeze=function(){var t=new(this.attributes.position.count>65535?Uint32Array:Uint16Array)(this.indices);this.setIndex(new An(t,1));for(var e,n,r,i=Object.keys(this.attributes),o=0;o<i.length;o++)e=i[o],r=(n=this.attributes[e]).itemSize*this.attributeOffset,n.set(n.array.subarray(0,r)),this.setAttribute(e,new An(n.array.subarray(0,r),n.itemSize,n.normalized));return this};var qf,Hf,Wf,Xf,Yf,Qf,Zf,Kf,Jf={position:0,tangent:0,generate:function(t,e,n,r,i,o){zf=i*(Bf=i*i),Uf=2*e-2*n+(Df=.5*(n-t))+(Ff=.5*(r-e)),Gf=-3*e+3*n-2*Df-Ff,Jf.position=Uf*zf+Gf*Bf+Df*i+e,o&&(Jf.tangent=3*Uf*Bf+2*Gf*i+Df)}},$f=new gu.Vector3,th=new vl,eh=new gu.Vector3,nh=new gu.Vector3,rh={color:th,position:eh,tangent:nh},ih=function(t,e){gu.Curve.call(this),this.hDelta=3,this.points=void 0===t?[]:t,this.colors=e?e.map((function(t){return new vl(t)})):void 0};(ih.prototype=Object.create(gu.Curve.prototype)).getPoint=function(t){return qf=this.points,Hf=(qf.length-1)*t,Wf=Math.floor(Hf),Xf=Hf-Wf,Yf=qf[0===Wf?Wf:Wf-1],Qf=qf[Wf],Zf=qf[Wf>qf.length-2?qf.length-1:Wf+1],Kf=qf[Wf>qf.length-3?qf.length-1:Wf+2],$f=new gu.Vector3,Jf.generate(Yf.x,Qf.x,Zf.x,Kf.x,Xf),$f.x=Jf.position,Jf.generate(Yf.y,Qf.y,Zf.y,Kf.y,Xf),$f.y=Jf.position,$f.z=this.hDelta,$f},ih.prototype.getTangentAt=function(t){var e=1e-5,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPointAt(n);return this.getPointAt(r).clone().sub(i).normalize()},ih.prototype.getPointAndTangentAt=function(t){var e=this.getUtoTmapping(t);return this.getPointAndTangent(e)},ih.prototype.getPointAndTangent=function(t){return qf=this.points,Hf=(qf.length-1)*t,Wf=Math.floor(Hf),Xf=Hf-Wf,Yf=qf[0===Wf?Wf:Wf-1],Qf=qf[Wf],Zf=qf[Wf>qf.length-2?qf.length-1:Wf+1],Kf=qf[Wf>qf.length-3?qf.length-1:Wf+2],Jf.generate(Yf.x,Qf.x,Zf.x,Kf.x,Xf,!0),eh.x=Jf.position,nh.x=Jf.tangent,Jf.generate(Yf.y,Qf.y,Zf.y,Kf.y,Xf,!0),eh.y=Jf.position,nh.y=Jf.tangent,eh.z=this.hDelta,nh.z=0,nh.normalize(),this.colors&&(Qf=this.colors[Wf],Zf=this.colors[Wf>qf.length-2?qf.length-1:Wf+1],th.set(Qf).lerp(Zf,Xf)),rh};for(var oh=new Array(2),ah=0;ah<2;ah++)oh[ah]=1-2*ah;var sh=function(t,e,n,r){this.type="LineGeometry";var i,o,a,s,u,c,l,f,h,p,d,g,y,v,m,A,b,_=(e=e||64)+1,w=-1!==(r=r||["position","normal","tangent"]).indexOf("color"),x=-1!==r.indexOf("normal"),E=-1!==r.indexOf("tangent");v=new Float32Array(3*_*2),this.attributes={position:new gu.BufferAttribute(v,3)},w&&(m=new Uint8Array(4*_*2),this.attributes.color=new gu.BufferAttribute(m,4,!1)),x&&(A=new Int8Array(3*_*2),this.attributes.normal=new gu.BufferAttribute(A,3,!1)),E&&(b=new Int8Array(4*_*2),this.attributes.tangent=new gu.BufferAttribute(b,4,!1));var O=0,S=0,T=new Array(_);for(u=0;u<_;u++)for(T[u]=[],a=u/e,o=(s=t.curve.getPointAndTangentAt(a)).tangent,i=s.color,l=2*u,c=0;c<2;c++){var P=4*O/3;T[u][c]=l+c,v[O]=s.position.x,v[O+1]=s.position.y,v[O+2]=s.position.z,n.writeTangent&&(v[O+2]=Math.atan2(o.y,o.x)),w&&(m[P]=255*i.r,m[P+1]=255*i.g,m[P+2]=255*i.b,m[P+3]=255*i.a),x&&(A[O]=127*oh[c]*o.y,A[O+1]=-127*oh[c]*o.x,A[O+2]=0),E&&(S=127-254*c,b[P]=S*o.x,b[P+1]=S*o.y,b[P+2]=S*o.z,b[P+3]=.5*S),O+=3}var M=2*e*6,C=v.length/3>65535?new Uint32Array(M):new Uint16Array(M);for(this.index=new gu.BufferAttribute(C,1),O=0,u=0;u<e;u++)for(f=u+1,c=0;c<2;c++)h=(c+1)%2,p=T[u][c],d=T[f][c],g=T[f][h],y=T[u][h],C[O]=p,C[O+1]=d,C[O+2]=y,C[O+3]=d,C[O+4]=g,C[O+5]=y,O+=6};sh.prototype.constructor=sh,sh.prototype.dispose=function(){this.index=null,delete this.attributes};var uh,ch,lh,fh=performance||Date,hh={taskCount:0,workTimeout:30,completedTasks:[],createTask:function(t,e,n,r){if(0!==t.length){hh.taskCount++;var i,o,a,s,u,c=0,l=!1;vu.listen((function f(h){if(o=fh.now(),s=hh.workTimeout+h.time,!(o>s)){for(hh.completedTasks.length>0&&s-o>10&&(a=hh.completedTasks.pop(),vu.unlisten(a.step),hh.taskCount--,a.onComplete()),o=fh.now(),u=r?s:hh.workTimeout/hh.taskCount+o;o<s&&o<u&&(i=t[c++]);)e(i),o=fh.now();c>=t.length&&!l&&(l=!0,hh.completedTasks.unshift({step:f,onComplete:n}))}}))}else al(n)}},ph=function(){gu.Object3D.call(this),this.features=[],Sl.add(this),this.maxIndex=65535,this.projectTime=0,this.curveTime=0,this.geomTime=0,this.mergeTime=0,this.matrixAutoUpdate=!1,this.updateMatrixWorld=function(){},this.parent=null,this.constantWidth=!1};(ph.prototype=Object.create(gu.Object3D.prototype)).onNewData=function(t){this.features=t.data,this.update()},ph.prototype.remove=function(){this.children.forEach((function(t){t.geometry.dispose()})),this.children=[]},ph.prototype.update=function(){var t=this;this.remove(),this.constantWidth?this.bufferGeomAttributes=["position","tangent"]:this.bufferGeomAttributes=["position"],this.bufferGeoms={},this.materials={},this.curveTime=0,this.projectTime=0,this.geomTime=0,this.mergeTime=0,Su("Starting processing",t.name),hh.createTask(t.features,t.addMesh.bind(t),(function(){var e=Pu.now();m.each(t.bufferGeoms,(function(e,n){(ch=new gu.Mesh(e.freeze(),t.materials[n])).frustumCulled=!1,t.add(ch)})),t.constructTime=Pu.now()-e,Su("Parsed",t.name),Pu.timing(t.name,"project",null,t.projectTime),Pu.timing(t.name,"curve",null,t.curveTime),Pu.timing(t.name,"geom",null,t.geomTime),Pu.timing(t.name,"merge",null,t.mergeTime),Pu.timing(t.name,"construct",null,t.constructTime),Su("instances:",t.children.length),b.renderedFeatureDisplayed(t.name)}))},ph.prototype.createGeometry=function(t){var e,n=Pu.now(),r=tc.vectorizeFeature(t),i=Pu.now()-n;this.projectTime+=i,n=Pu.now(),t.geometry.colors&&(t.geometry.coordinates.length!==t.geometry.colors.length?console.error("colors array for feature must have same length as positions array"):(e=t.geometry.colors,t.perVertexColors=!0));var o=new ih(r,e);t.curve=o,i=Pu.now()-n,this.curveTime+=i,n=Pu.now(),t.thickness=sl.thickness(t),o.hDelta=3+.5*t.thickness,t.curve.arcLengthDivisions=10;var a=t.curve.getLength(),s=Math.round(a/25);s=(s=Math.max(s,2*t.geometry.coordinates.length))<10?10:s,t.curve.arcLengthDivisions=s,t.curve.needsUpdate=!0;var u={writeTangent:this.writeTangent};this.constantWidth||(u.thickness=t.thickness),t.geom=new sh(t,s,u,t.perVertexColors?this.bufferGeomAttributes.concat("color"):this.bufferGeomAttributes),i=Pu.now()-n,this.geomTime+=i,delete t.geometry.colors,t.geometry.coordinates=[t.geometry.coordinates[0]]},ph.prototype.addMesh=function(t){void 0===t.geom&&this.createGeometry(t),lh=t.perVertexColors?null:sl.color(t),uh=this.material(lh,t.thickness,t.properties?t.properties.outlineColor:void 0),this.materials[uh.uuid]||(this.materials[uh.uuid]=uh);var e=Pu.now(),n=t.geom.attributes.position.count,r=t.perVertexColors?this.bufferGeomAttributes.concat("color"):this.bufferGeomAttributes;if(n>this.maxIndex){var i=new Vf(n,r,!!t.tag);i.merge(t.geom,t.tag),ch=new gu.Mesh(i.freeze(),uh),this.add(ch),i.dispose()}else{this.bufferGeoms[uh.uuid]||(this.bufferGeoms[uh.uuid]=new Vf(this.maxIndex,r,!!t.tag));var o=this.bufferGeoms[uh.uuid];n>o.capacity()&&((ch=new gu.Mesh(o.freeze(),uh)).frustumCulled=!1,this.add(ch),this.bufferGeoms[uh.uuid]=new Vf(this.maxIndex,r,!!t.tag),o=this.bufferGeoms[uh.uuid]),o.merge(t.geom,t.tag)}var a=Pu.now()-e;this.mergeTime+=a,b.featureCreated(t)};var dh=function(){ph.call(this),xf.listen(this.onNewData.bind(this)),_f.pickerScene.add(this),this.material=af.line,this.name="lines",b.renderedFeatureRegister(this.name),this.constantWidth=!0};dh.prototype=Object.create(ph.prototype);new dh;var gh={"top-left":{x:1,y:-1},top:{x:0,y:-1},"top-right":{x:-1,y:-1},left:{x:1,y:0},center:{x:0,y:0},right:{x:-1,y:0},"bottom-left":{x:1,y:1},bottom:{x:0,y:1},"bottom-right":{x:-1,y:1}};function yh(t){return void 0===t||isNaN(t.x)||isNaN(t.y)?gh[t]||gh.bottom:t}var vh,mh=document.createElement("i"),Ah=document.createElement("div");Ah.style.position="absolute",Ah.style.left="-999px",Ah.style.top="-999px",Ah.appendChild(mh),Ah.style.display="none",document.body.appendChild(Ah);var bh=m.memoize((function(t){return Ah.style.display="block",mh.className="fa fa-"+t,vh=(vh=window.getComputedStyle(mh,":before").getPropertyValue("content")).replace(/['"]/g,""),Ah.style.display="none",vh})),_h='-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif';Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var wh=function(t,e,n){this.pixelRatio=window.devicePixelRatio,Ru.depthTexture||(this.pixelRatio=1),this.pixelRatio=Math.min(this.pixelRatio,4),this.size=(t||512)*this.pixelRatio,this.size=Math.pow(2,Math.ceil(Math.log2(this.size))),this.width=this.size,this.height=2*this.size,this.spriteSize=40,this.monochromeBegin=.25*this.height,this.queue=[],this.padding=n||0,this.mapping=new Map,this.scratchCanvas=document.createElement("canvas"),this.scratchCanvas.width=this.width,this.scratchCanvas.height=this.height,this.scratch=this.scratchCanvas.getContext("2d"),this.scratch.textBaseline="middle",this.scratch.fillStyle="rgba(255, 255, 255, 1.0)",this.texture=new gu.Texture(this.scratchCanvas),this.texture.wrapS=gu.RepeatWrapping,this.texture.wrapT=gu.RepeatWrapping,this.texture.minFilter=gu.NearestFilter,this.texture.magFilter=gu.NearestFilter,this.texture.generateMipmaps=!1,this.texture.flipY=!1,this.clear();var r=this;window.showAtlas=function(){r.scratchCanvas.style.position="absolute",r.scratchCanvas.style.width="512px",r.scratchCanvas.style.height="512px",r.scratchCanvas.style["pointer-events"]="none",r.scratchCanvas.style.opacity="0.9",document.children[0].children[1].appendChild(r.scratchCanvas)},this.defaultFontSize=11,this.checkFontAvailable()},xh=30;wh.prototype.checkFontAvailable=function(){this.testCanvas||(this.testCanvas=document.createElement("canvas"),this.testCanvas.width=16,this.testCanvas.height=16);var t=this.testCanvas.getContext("2d");t.font="32px FontAwesome",t.fillStyle="rgba(255, 255, 255, 1)";var e=bh("minus");if(t.fillText(e,0,16),t.getImageData(15,0,1,1).data[0]>250)b.fontsLoaded();else{var n=this;setTimeout((function(){n.checkFontAvailable(),0===--xh&&(console.error("FontAwesome has not loaded"),console.error("Please make sure you are including the relevant CSS in the <head> element, e.g."),console.error('<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">'))}),333)}},wh.prototype.checkContainerFont=function(){var t=document.getElementById("container"),e=t?document.defaultView.getComputedStyle(t)["font-family"]:null;e=e||"",this.font="FontAwesome, "+e+", "+_h,this.setFontSize(this.defaultFontSize)},wh.prototype.setFontSize=function(t){if(void 0===t&&(t=this.defaultFontSize),t!==this.fontSize)if(isNaN(t))console.error("Invalid font size");else{this.fontSize=t;var e=this.pixelRatio*Math.round(t)+"px ";e+=this.font,this.scratch.font=e,this.textHeight=this.getTextHeight()}},wh.prototype.getTextHeight=function(){return 1.3*this.scratch.measureText("M").width},wh.prototype.addImage=function(t,e,n){var r=t;void 0!==e&&(r+="#_#"+e),void 0!==n&&(r+="#_#"+n);var i=this.mapping.get(r);if(void 0!==i)return i;if(i=this.createTransform({width:this.pixelRatio*(void 0!==e?e:this.spriteSize),height:this.pixelRatio*(void 0!==n?n:this.spriteSize)}),this.mapping.set(r,i),i.z*i.w===0)return i;var o=new gu.ImageLoader;o.setCrossOrigin("Anonymous");var a=this;return o.load(t,(function(t){var e=i.clone();e.x*=a.width,e.y*=a.height,e.z*=a.width,e.w*=a.height,a.scratch.clearRect(e.x,e.y,e.z,e.w),a.scratch.globalCompositeOperation="lighter",a.scratch.drawImage(t,e.x,e.y,e.z,e.w),a.texture.needsUpdate=!0,b.needsRender()})),i},wh.prototype.fillTextToChannel=function(t,e){var n=Math.floor(e.y/this.height);1===n?this.scratch.fillStyle="rgba(255, 255, 0, 1)":2===n?this.scratch.fillStyle="rgba(0, 255, 255, 1)":3===n&&(this.greenCleared||this.clearGreen(),this.scratch.fillStyle="rgba(0, 255, 0, 1)"),this.scratch.globalCompositeOperation="lighter";var r=e.y%this.height+.5*e.w;this.scratch.fillText(t,e.x,r)},wh.prototype.clearGreen=function(){this.scratch.globalCompositeOperation="multiply",this.scratch.fillStyle="rgba(255, 0, 255, 1)",this.scratch.fillRect(0,this.monochromeBegin,this.width,this.height),this.greenCleared=!0},wh.prototype.addText=function(t,e,n){this.font||this.checkContainerFont(),this.setFontSize(e);var r=t;void 0!==e&&(r+="#_#"+e);var i=this.mapping.get(r);if(void 0!==i)return i;var o=this.scratch.measureText(t.slice(0,1)).width,a=.5*(this.textHeight-o),s=this.scratch.measureText(t).width,u=Math.ceil(s+2*a);if(u<this.textHeight&&(u=this.textHeight,a=Math.floor(.5*(u-s))),i=this.createTransform({width:u,height:this.textHeight},!0),this.mapping.set(r,i),i.z*i.w===0)return i;var c=i.clone();return c.x*=this.width,c.y*=this.height,c.z*=this.width,c.w*=this.height,c.x+=a,n&&i.y<3?this.fillTextToChannel(t,c):this.queue.push({fontSize:e,text:t,transform:c}),i},wh.prototype.processQueue=function(){var t=this;hh.createTask(this.queue,(function(e){t.setFontSize(e.fontSize),t.fillTextToChannel(e.text,e.transform)}),(function(){b.needsRender(),t.queue=[],t.texture.needsUpdate=!0,Su("Atlas text drawn")}),!0)},wh.prototype.clear=function(){this.mapping.clear(),Su("ATLAS CLEAR"),this.scratch.globalCompositeOperation="copy",this.scratch.fillStyle="rgba(0, 0, 0, 1)",this.scratch.fillRect(0,this.monochromeBegin,this.width,this.height-this.monochromeBegin),this.usedX=0,this.usedY=0,this.greenCleared=!1,this.rowHeight=0,this.usedMonochromeX=0,this.usedMonochromeY=this.height+this.monochromeBegin,this.rowMonochromeHeight=0},wh.prototype.createTransform=function(t,e){var n=new gu.Vector4,r=Math.ceil(t.width),i=Math.ceil(t.height),o=r+2*this.padding,a=i+2*this.padding,s=0;if(o>this.width||a>this.height)return console.error("Cannot fit object in atlas"),n;if(e){if(this.usedMonochromeX+o>this.width&&(this.usedMonochromeX=0,this.usedMonochromeY+=this.rowMonochromeHeight,this.rowMonochromeHeight=0),this.rowMonochromeHeight=Math.max(this.rowMonochromeHeight,a),Math.floor(this.usedMonochromeY/this.height)!==(s=Math.floor((this.usedMonochromeY+this.rowMonochromeHeight)/this.height))&&(this.usedMonochromeX=0,this.usedMonochromeY=s*this.height+this.monochromeBegin,this.rowMonochromeHeight=a),this.usedMonochromeY+this.rowMonochromeHeight>4*this.height)return console.error("Atlas capacity exceeded!"),n.z=0,n.w=0,n}else if(this.usedX+o>this.width&&(this.usedX=0,this.usedY+=this.rowHeight,this.rowHeight=0),this.rowHeight=Math.max(this.rowHeight,a),this.usedY+this.rowHeight>=this.monochromeBegin)return console.error("Atlas capacity exceeded!"),n.z=0,n.w=0,n;return e?(n.x=Math.round(this.usedMonochromeX+this.padding),n.y=Math.round(this.usedMonochromeY+this.padding),this.usedMonochromeX+=o):(n.x=Math.round(this.usedX+this.padding),n.y=Math.round(this.usedY+this.padding),this.usedX+=o),n.z=r,n.w=i,n.x/=this.width,n.y/=this.height,n.z/=this.width,n.w/=this.height,n};var Eh={none:{x:0,y:0},object:{x:1,y:0},pixel:{x:0,y:1}};function Oh(t){return void 0===t||isNaN(t.x)||isNaN(t.y)?Eh[t]||Eh.pixel:t}function Sh(){this.data=[],this.haveFonts=!1,this.isUpdate=!1,this.bindListeners({clearFeatures:_.setCurrentPlace,fontsLoaded:b.fontsLoaded,addOverlay:[O.addBuiltinOverlay,O.addOverlay,O.setFeatures,O.removeOverlay],updateOverlay:O.updateOverlay})}Sh.prototype.clearFeatures=function(){return this.data=[],!0},Sh.prototype.isReady=function(){return this.haveFonts},Sh.prototype.fontsLoaded=function(){return this.haveFonts=!0,this.isReady()},Sh.prototype.addOverlay=function(){this.waitFor(hl);var t=hl.getState().markers;return!m.isEqual(this.data,t)&&(this.data=t.concat(),_f.registerStore(this),this.isUpdate=!1,this.isReady())},Sh.prototype.updateOverlay=function(){this.waitFor(hl);var t=hl.getState().markers;return this.data=t.concat(),this.isUpdate=!0,this.isReady()},Sh.displayName="MarkerData";var Th=A.createStore(Sh),Ph=function(){this.defaultValue=Array.prototype.slice.call(arguments),0===this.defaultValue.length&&console.error("Need to provide default value(s)"),this.array=[],this.firstValue=null,this.onlyDuplicates=!0};Ph.prototype.push=function(){var t=Array.prototype.slice.call(arguments);this.defaultValue.length!==t.length&&console.error("Pushed item with incorrect length to PushList"),null===this.firstValue?this.firstValue=t:this.onlyDuplicates&&!m.isEqual(this.firstValue,t)&&(this.onlyDuplicates=!1),this.array.push.apply(this.array,t)},Ph.prototype.pushDefault=function(){this.push.apply(this,this.defaultValue)};var Mh=function(){this.positions=new gu.BufferAttribute(new Float32Array([-1,-1,1,-1,1,1,-1,-1,1,1,-1,1]),2);var t=new gu.InstancedBufferGeometry;t.setAttribute("position",this.positions),gu.Mesh.call(this,t,af.marker),this.name="markers",b.renderedFeatureRegister(this.name),this.renderOrder=1e3,this.atlas=new wh,this.material.uniforms.uMap.value=this.atlas.texture,Th.listen(this.onNewData.bind(this)),Sl.hd.add(this),this.parent=null,_f.pickerScene.add(this),this.parent=null,this.visible=!1;var e=this;this.empty=!0,Gc.listen(this.checkVisibility.bind(this)),$c.listen((function(){e.atlas.clear()}))};(Mh.prototype=Object.create(gu.Mesh.prototype)).checkVisibility=function(){this.visible=!this.empty&&Fu.near>20},Mh.prototype.onNewData=function(t){if(t.isUpdate)this.onUpdatedData(t);else{var e=Pu.now(),n=this,r=t.data;if(this.empty=0===r.length,this.checkVisibility(),this.empty)return this.atlas.clear(),void al((function(){b.renderedFeatureDisplayed(n.name)}));al((function(){b.renderedFeatureRegister(n.name)})),this.geometry=new gu.InstancedBufferGeometry,this.geometry.setAttribute("position",this.positions);var i=yh(),o=Oh("pixel"),a={anchor:new Ph(i.x,i.y,0,0),atlas:new Ph(0,0,0,0),background:new Ph(255,255,255,0),clipping:new Ph(o.x,o.y),color:new Ph(255,255,255,255),layout:new Ph(0,0,0),normal:new Ph(0,0,1,1e5),offset:new Ph(0,0,0,1e5),tag:new Ph(0,0,0,.2)};a.background.normalized=!0,a.color.normalized=!0,a.normal.dynamic=!0,a.offset.dynamic=!0,a.normal.onlyDuplicates=!1,a.offset.onlyDuplicates=!1;var s,u,c,l,f,h,p,d,g,y,v,A,_,w,x={x:0,y:0,z:0},E=Fu.position.x,O=Fu.position.y;r.forEach((function(t){_=t.properties,h=t.tag?new vl(t.tag):new vl(0),y=void 0!==_.highlightOpacity?_.highlightOpacity:.2,a.tag.push(h.r,h.g,h.b,y),_.color?(h=new vl(_.color),a.color.push(255*h.r,255*h.g,255*h.b,255*h.a)):a.color.pushDefault(),_.background?(l=new vl(_.background),a.background.push(255*l.r,255*l.g,255*l.b,255*l.a)):_.color?a.background.push(255*h.r,255*h.g,255*h.b,0):a.background.push(255,255,255,0),p=_.collapseDistance||1e5,g=_.fadeDistance||1e5,A=tc.vectorizeFeature(t),a.offset.push(A.x,A.y,A.z,g),_.image?(c=n.atlas.addImage(_.image,_.width,_.height),a.atlas.push(c.x,c.y,c.z,c.w)):void 0!==_.name||void 0!==_.icon?(f=Oh("object"),w="",void 0!==_.icon&&(w+=bh(_.icon),void 0!==_.name&&(w+="  ")),void 0!==_.name&&(w+=_.name),d=Math.abs(E-A.x)<4e3&&Math.abs(O-A.y)<4e3,c=n.atlas.addText(w,_.fontSize,d),a.atlas.push(c.x,c.y,c.z,c.w)):(f=Oh("object"),a.atlas.pushDefault()),f=_.clipping?Oh(_.clipping||"pixel"):f||o,a.clipping.push(f.x,f.y),s=yh(_.anchor),u=_.anchorOffset||{x:0,y:0},a.anchor.push(s.x,s.y,parseFloat(u.x)||0,parseFloat(u.y)||0),x.x=_.padding||0,x.y=_.borderWidth||0,x.z=_.borderRadius||0,a.layout.push(x.x,x.y,x.z),v=kc(),a.normal.push(v.x,v.y,v.z,p)})),this.atlas.processQueue(),m.forOwn(a,(function(t,e){if(t.onlyDuplicates){var r=t.firstValue||t.defaultValue;t.normalized&&(r=r.map((function(t){return t/255}))),n.material.defaultAttributeValues[e]=r}else{var i=t.normalized?Uint8Array:Float32Array,o=new gu.InstancedBufferAttribute(new i(t.array),t.defaultValue.length,t.normalized,1);t.dynamic&&o.setUsage(gu.DynamicDrawUsage),n.geometry.setAttribute(e,o)}}));var S=this.geometry.attributes.position;this.geometry.attributes.position=this.geometry.attributes.offset,this.geometry.computeBoundingSphere(),this.geometry.attributes.position=S,this.geometry.boundingSphere.center.z=2e3;var T=this.geometry.boundingSphere.radius;this.geometry.boundingSphere.radius=Math.max(T,2e3),this.visible=a.offset.array.length>0;var P=Pu.now()-e;Su("Parsed",this.name),Su("Blit count",this.atlas.blitCount),Pu.timing(this.name,"construct",null,P),al((function(){b.renderedFeatureDisplayed(n.name),r.forEach((function(t){b.featureCreated(t)}))}))}},Mh.prototype.onUpdatedData=function(t){var e=this.geometry.attributes.offset,n=this.geometry.attributes.normal;if(void 0!==e){var r,i,o=0;t.data.forEach((function(t){r=tc.vectorizeFeature(t),e.array[o]=r.x,e.array[o+1]=r.y,e.array[o+2]=r.z,i=kc(),n.array[o]=i.x,n.array[o+1]=i.y,n.array[o+2]=i.z,o+=4})),e.needsUpdate=!0,n.needsUpdate=!0}};new Mh;var Ch=new gu.SphereBufferGeometry(2e5,32,6,0,2*Math.PI,0,.6*Math.PI),Ih=new gu.Matrix4;Ih.makeRotationX(Math.PI/2),Ch.applyMatrix4(Ih);var Rh=new gu.Mesh(Ch,af.sky);Rh.geometry.computeBoundingBox(),Rh.renderOrder=1e4,Sl.add(Rh);var kh={uSkybox:{type:"t",value:null}},jh=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nprecision highp float;\n\n#define SUN_DISK\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Derived uniforms\nuniform vec3 sunDirection;\nuniform vec3 betaRM;\nuniform vec3 betaRnorm;\nuniform vec3 betaMnorm;\nuniform vec4 constants; // sunE, hgPhaseA, hgPhaseB & LinWeight\nuniform float gamma;\nuniform float tonemapScale;\n\n// Safe functions\nfloat spow( const float x, const float y ) {\n  return pow( abs( x ), y );\n}\n\nvec3 spow( const vec3 x, const vec3 y ) {\n  return pow( abs( x ), y );\n}\n\nvec3 ssqrt( const vec3 x ) {\n  return sqrt( abs( x ) );\n}\n\n/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nuniform float uTonemapExposureBias;\nuniform float uTonemapWhiteScale;\n\nvec3 RawTonemap( vec3 x )\n{\n  return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n}\n\nvec3 Tonemap( vec3 color ) {\n  return uTonemapExposureBias * RawTonemap( uTonemapWhiteScale * color );\n}\n\n\nvec3 skyColor( vec3 direction ) {\n  float cosZenithAngle = max( 0.0, direction.y );\n  // Approximate acos( x ) by pi/2 - x\n  // This allows us to simplify and error is only large when looking up\n  float denom = cosZenithAngle + spow( 17.6579343808112 + cosZenithAngle * 260.41830500372932, -1.253 );\n\n  // combined extinction factor\t\n  vec3 Fex = exp( -betaRM / denom );\n\n  // in scattering\n  float cosTheta = dot( direction, sunDirection );\n  float rPhase = cosTheta + 1.0;\n  vec3 betaRTheta = betaRnorm * ( 4.0 + rPhase * rPhase );\n  vec3 betaMTheta = betaMnorm * spow( constants.y * cosTheta + constants.z, -1.5 );\n\n  vec3 tmp = betaRTheta + betaMTheta;\n  vec3 Lin = spow( tmp * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), ssqrt( tmp * Fex ), constants.w );\n\n  // nightsky\n  vec3 L0 = 0.1 * Fex;\n\n  #ifdef SUN_DISK\n  L0 += constants.x * Fex * smoothstep( 0.9999566769, 0.9999766769, cosTheta );\n  #endif\n\n  // Combine all components\n  vec3 color = 0.04 * ( Lin + L0 ) + vec3( 0.0, 0.0003, 0.00075 );   \n  color = Tonemap( tonemapScale * color );\n  return spow( color, vec3( gamma ) );\n}\n\n\n// 1 / 2048.0 (texture width)\n#define STEP 0.00048828125\n\nvoid main() {\n  // Map to sphere normal direction\n  vec2 uv = gl_FragCoord.xy * STEP;\n  vec3 direction = 2.0 * vec3( uv - 0.5, 0.0 ); // Switch to polar coordaintes\n  float r = min( 0.99999, length( direction ) ); // Limit to unit length\n  r = sin( 1.5707963267949 * r ); // store linear in polar angle\n  direction = r * normalize( direction );\n  direction.z = sqrt( max( 0.0, 1.0 - dot( direction, direction ) ) ); // Get z-coordinate from Pythagorus\n  vec3 color = skyColor( normalize( direction.xzy ) );\n  gl_FragColor = vec4( color, 1.0 );\n}\n"),Lh=new dl("/**\n * Copyright 2020 (c) Felix Palmer\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// RawShader\nattribute vec3 position;\n\nvoid main() {\n  // Do not need any matrix multiplications as positions already in clip\n  // space\n  gl_Position = vec4( position, 1.0 );\n}\n"),Nh={camera:null,enabled:!0,renderTarget:null,scene:new gu.Scene,init:function(){var t={format:gu.RGBFormat,type:Ru.render565?gu.UnsignedShort565Type:gu.UnsignedByteType,depthBuffer:!1,stencilBuffer:!1,wrapS:gu.ClampToEdgeWrapping,wrapT:gu.ClampToEdgeWrapping};Nh.width=256,Nh.camera=new gu.OrthographicCamera(-1,1,1,-1,0,1e4),Nh.scene.add(Nh.camera),Nh.camera.position.z=10,Nh.camera.lookAt(new gu.Vector3(0,0,0)),Nh.renderTarget=new gu.WebGLRenderTarget(Nh.width,Nh.width,t),kh.uSkybox.value=Nh.renderTarget.texture;var e=new gu.PlaneBufferGeometry(2,2);jh.define("STEP",(1/Nh.width).toExponential());var n=new gu.RawShaderMaterial({name:"skybox",uniforms:m.assign({},Hc,Xc),vertexShader:Lh.value,fragmentShader:jh.value}),r=new gu.Mesh(e,n);Nh.scene.add(r),bu.listen((function(t){t.env&&Nh.process()}))},process:function(){mc.setRenderTarget(Nh.renderTarget),mc.render(Nh.scene,Nh.camera)}};Nh.init();var Dh=function t(e,n){var r=this;Object(f.a)(this,t);var i=[0,0];n=n||1;var o,a,s=i[0],u=i[1],c=(e=e||[1,1])[0],l=e[1],h=n+1,p=new Array(h*h);for(o=0;o<h;o++)for(a=0;a<h;a++){p[o*h+a]={x:s+o*(c/n),y:u-a*(l/n),uvx:o/n,uvy:a/n}}var d=6*n*n;d+=24*n,this.positions=new Float32Array(4*d),this.index=new Array(d);var g=0,y=function(t,e,n,i,o){var a=p[e],s=p[n],u=p[i],c=p[o],l=function(t){return[t.x,t.y,t.uvx,t.uvy]};r.positions.set(l(a),4*(t+0)),r.positions.set(l(s),4*(t+1)),r.positions.set(l(u),4*(t+2)),r.positions.set(l(u),4*(t+3)),r.positions.set(l(s),4*(t+4)),r.positions.set(l(c),4*(t+5)),r.index[t+0]=e,r.index[t+1]=n,r.index[t+2]=i,r.index[t+3]=i,r.index[t+4]=n,r.index[t+5]=o};for(o=0;o<n;o++)for(a=0;a<n;a++,g++){y(6*g,o*h+a,o*h+a+1,(o+1)*h+a,(o+1)*h+a+1)}for(var v=0;v<4;v++)for(var m=0;m<n;m++,g++){0===v?(o=0,a=m):1===v?(o=n,a=m):2===v?(o=m,a=0):3===v&&(o=m,a=n);var A=void 0,b=void 0;if(v<2?(A=p[o*h+a],b=p[o*h+a+1]):(A=p[o*h+a],b=p[(o+1)*h+a]),0===v||3===v){var _=[b,A];A=_[0],b=_[1]}var w=A,x=b;this.positions[24*g]=A.x,this.positions[24*g+1]=A.y,this.positions[4*(6*g+1)]=b.x,this.positions[4*(6*g+1)+1]=b.y,this.positions[4*(6*g+2)]=w.x,this.positions[4*(6*g+2)+1]=w.y,this.positions[4*(6*g+3)]=w.x,this.positions[4*(6*g+3)+1]=w.y,this.positions[4*(6*g+4)]=b.x,this.positions[4*(6*g+4)+1]=b.y,this.positions[4*(6*g+5)]=x.x,this.positions[4*(6*g+5)+1]=x.y,this.positions[24*g+2]=A.uvx,this.positions[24*g+3]=A.uvy,this.positions[4*(6*g+1)+2]=b.uvx,this.positions[4*(6*g+1)+3]=b.uvy,this.positions[4*(6*g+2)+2]=w.uvx+10,this.positions[4*(6*g+2)+3]=w.uvy+10,this.positions[4*(6*g+3)+2]=w.uvx+10,this.positions[4*(6*g+3)+3]=w.uvy+10,this.positions[4*(6*g+4)+2]=b.uvx,this.positions[4*(6*g+4)+3]=b.uvy,this.positions[4*(6*g+5)+2]=x.uvx+10,this.positions[4*(6*g+5)+3]=x.uvy+10}for(d=p.length,this.grid=new Float32Array(4*d),o=0;o<d;o++){var E=p[o];this.grid[4*o+0]=E.x,this.grid[4*o+1]=E.y,this.grid[4*o+2]=E.uvx,this.grid[4*o+3]=E.uvy}},Fh=[],Bh=1,zh=function(){function t(){Object(f.a)(this,t),this.id=Bh++;var e=this.refreshIndices.bind(this);Gl.addListener(e),Pc.addListener(e);var n=t.geometry[64];this.offset=new gu.Vector4(0,0,1,1),this.imageryUvOffset=new gu.Vector4;var r=af.terrain({uOffset:{value:this.offset},uImageryUvOffset:{value:this.imageryUvOffset}});this.mesh=new gu.Mesh(n,r.imagery),this.pickerMesh=new gu.Mesh(n,r.picker),this.init.apply(this,arguments)}return Object(s.a)(t,[{key:"init",value:function(e,n,r){if(isNaN(e)||isNaN(n)||isNaN(r))throw Error("Invalid tile initialization");this.wasSeen=!1,this.wasRendered=!1,Sl.add(this.mesh),Sl.tilepickerScene.add(this.pickerMesh),this.x=e,this.y=n,this.z=r;var i=Math.max(2,this.z-10);this.x2=Math.floor(this.x/Math.pow(2,i)),this.y2=Math.floor(this.y/Math.pow(2,i)),this.z2=this.z-i;var o=1024/Math.pow(2,i);o=Math.min(64,Math.max(1,o));var a=t.geometry[o].clone(),s=t.geometry[Math.max(1,o/8)].clone();this.mesh.geometry=a,this.pickerMesh.geometry=s,this.calculateOffset(),this.imageryKey=$u.tileToQuadkey([this.x,this.y,this.z]),this.elevationKey=$u.tileToQuadkey([this.x2,this.y2,this.z2]),this.imageryIndex=0,this.elevationIndex=0;var u=new gu.Vector3(this.offset.x+.5*this.offset.z,this.offset.y-.5*this.offset.z,.5*this.offset.w*3800),c=Math.max(.5*this.offset.w*4200,.5*this.offset.z);c*=Math.sqrt(3);var l=new gu.Sphere(u,c);return this.mesh.geometry.boundingSphere=l,this.pickerMesh.geometry.boundingSphere=l,this}},{key:"calculateOffset",value:function(){var t=uc.getState(),e=t.sceneScale,n=t.globalOffset,r=Math.pow(2,15-this.z)*e;this.offset.set(this.x*r+n.x,-this.y*r+n.y,r,this.id)}},{key:"split",value:function(){var e=$u.getChildren([this.x,this.y,this.z]);return e=[this.init.apply(this,Object(a.a)(e[0])),t.next.apply(t,Object(a.a)(e[1])),t.next.apply(t,Object(a.a)(e[2])),t.next.apply(t,Object(a.a)(e[3]))]}},{key:"grow",value:function(){return this.init.apply(this,Object(a.a)($u.getParent([this.x,this.y,this.z]))),this}},{key:"shift",value:function(t,e,n){n>this.z&&console.error("Cannot shift at zoom level bigger than this.z");var r=Math.round(this.x+t*Math.pow(2,this.z-n)),i=Math.round(this.y+e*Math.pow(2,this.z-n));return this.init(r,i,this.z),this}},{key:"recycle",value:function(){Fh.push(this),Sl.remove(this.mesh),Sl.tilepickerScene.remove(this.pickerMesh)}},{key:"fetchData",value:function(){this.wasSeen||this.z<8?(Pc.fetchIfNeeded(this.elevationKey),Gl.fetchIfNeeded(this.imageryKey)):this.wasRendered&&this.z>10?Gl.fetchIfNeeded(this.imageryKey.slice(0,-2)):(Gl.fetchIfNeeded(this.imageryKey.slice(0,5)),Pc.fetchIfNeeded(this.elevationKey.slice(0,5))),this.refreshIndices()}},{key:"calculateImageryOffset",value:function(t){var e=t.quadkey?this.imageryKey.length-t.quadkey.length:0,n=Math.pow(2,-e),r=t.quadkey?$u.quadkeyToTile(t.quadkey):[this.x,this.y,this.z],i=Object(u.a)(r,2),o=i[0],a=i[1];this.imageryUvOffset.set(this.x*n-o,this.y*n-a,n,this.imageryIndex)}},{key:"refreshIndices",value:function(){var t=$u.quadkeyToTile(this.imageryKey),e=$u.tileToQuadkey(t);this.elevationIndex=Pc.findBestAvailableData(e,!0).index,this.bestImagery=Gl.findBestAvailableData(this.imageryKey),this.imageryIndex=this.bestImagery.index,this.calculateImageryOffset(this.bestImagery)}},{key:"onSeen",value:function(){Pc.indexPool.tap(this.elevationIndex),Gl.indexPool.tap(this.imageryIndex)}}]),t}();zh.next=function(){var t;return Fh.length>0?(t=Fh.splice(0,1)[0]).init.apply(t,arguments):Object(i.a)(zh,Array.prototype.slice.call(arguments))};var Uh=64;for(zh.geometry=[];Uh>=1;){var Gh=new Dh([1,1],Uh),Vh=new gu.BufferGeometry;Vh.setAttribute("position",new gu.Float32BufferAttribute(Gh.positions,4)),zh.geometry[Uh]=Vh,Uh/=2}var qh,Hh,Wh,Xh=mc.domElement,Yh={data:new Uint8Array(4*Xh.width*Xh.height),target:new gu.WebGLRenderTarget(Xh.width,Xh.height)};Du.listen((function(t){var e=t.width,n=t.height,r=t.renderRatio,i=Math.sqrt(e*n/500),o=2*Math.round(.5*e/i),a=2*Math.round(.5*n/i);Yh.target&&o===Yh.target.width&&a===Yh.target.height||(Yh.target=new gu.WebGLRenderTarget(o,a),Yh.data=new Uint8Array(4*Yh.target.width*Yh.target.height),of.uScaling.value.set(.5*o,.5*a,256/(r*i)))}));var Qh=new gu.Vector2,Zh=1/0;$c.listen((function(t){var e=t.currentPlace,n=$u.pointToTileFraction(M.snap(e.location[0]),M.snap(e.location[1]),5),r=Object(u.a)(n,3);qh=r[0],Hh=r[1],Wh=r[2];var i=uc.getState().sceneScale;Zh=.6*i*Math.pow(2,10),qh=Math.floor(qh),Hh=Math.floor(Hh),function(){var t;np.forEach((function(t){return t.recycle()})),(np=[]).push(zh.next(qh,Hh,Wh));var e=np[0].split();(t=np).push.apply(t,Object(a.a)(e.splice(1,3))),np.forEach((function(t){return t.fetchData()}))}()}));var Kh,Jh,$h,tp,ep,np=[],rp=function(){function t(e,n,r){Object(f.a)(this,t),this.name=e,this.unit=void 0===n?"ms":n;var i=document.getElementById("debug-info");i||((i=document.createElement("div")).id="debug-info",i.style="position: absolute; bottom: 0; padding: 10px; pointer-events: none;",document.body.appendChild(i)),this.element=document.createElement("div"),"http:"===window.location.protocol&&i.appendChild(this.element),this.values=new Array(r||100).fill(0)}return Object(s.a)(t,[{key:"add",value:function(t){this.values.unshift(t),this.values.pop();var e=this.values.reduce((function(t,e){return t+e}))/this.values.length;e=Math.round(100*e)/100;var n=Math.round(Math.max.apply(Math,Object(a.a)(this.values)));this.inverse&&(e=Math.round(1e3/e)),this.element.innerHTML="".concat(this.name,": ").concat(e).concat(this.unit," (max: ").concat(n,")")}},{key:"start",value:function(){this.startTime=performance.now()}},{key:"stop",value:function(){this.add(performance.now()-this.startTime)}}]),t}();(Kh=new rp("FPS","",60)).inverse=!0,Jh=new rp("readTime"),$h=new rp("scanTime"),tp=new rp("updateTime"),ep=new rp("tiles","",10);var ip={},op=0,ap=null,sp=null;window.addEventListener("mousedown",(function(t){if(t.altKey){var e=t.target.getBoundingClientRect();sp={x:(t.clientX-e.x)/e.width,y:(t.clientY-e.y)/e.height}}}),!1);var up,cp=!1;Kh.start(),bu.listen((function(){if(0!==np.length){Kh.stop(),Kh.start(),op++;var t=new Set,e=new Set,n=new Set,r={},i=1,o=5+1*i+1,s=op%o,u=0===s,c=(s-1-4)%1===0&&s>4&&s<5+1*i,l=s===o-1;if(cp||(u=!0,c=!0,l=!0,i=1),u&&(performance.mark("Render-start"),mc.setRenderTarget(Yh.target),mc.clear(!0,!0,!0),mc.render(Sl.tilepickerScene,Fu),up=Fu.projectionMatrix.elements,performance.mark("Render-end"),performance.measure("Render","Render-start","Render-end")),c){performance.mark("Read-start"),Jh.start();var f=cp?(s-1-4)/1:0,h=4*Yh.target.width*Yh.target.height/i,p=new Uint8Array(Yh.data.buffer,f*h,h);mc.readRenderTargetPixels(Yh.target,0,f*Yh.target.height/i,Yh.target.width,Yh.target.height/i,p),mc.setRenderTarget(null),Jh.stop(),performance.mark("Read-end"),performance.measure("Read","Read-start","Read-end")}l&&function(){var i,o;performance.mark("Process-start"),$h.start();var s=2*(Yh.target.width+Yh.target.width*Yh.target.height);s=Math.round(s);var u=256*Yh.data[s+2]+Yh.data[s+3];if(u/=65280,ap=up[14]/(2*u-1+up[10]),Gc.getState().controls.setDistanceToTarget(ap),sp){var c={};c.x=Math.round(sp.x*Yh.target.width),c.y=Math.round((1-sp.y)*Yh.target.height);var l=4*(c.x+Yh.target.width*c.y);i=256*Yh.data[l]+Yh.data[l+1],o=10*(o=Yh.data[l+3]/255)-5;var f=np.find((function(t){return t.id===i}));f&&(Su("[".concat(f.x,",").concat(f.y,",").concat(f.z,"] (").concat(f.imageryKey,")"),o,"".concat(f.bestImagery.quadkey,"(").concat(f.bestImagery.downsample,")")),window.debugTile=f),sp=null}var h=Yh.data.length;for(s=0;s<h;s+=4)if(i=256*Yh.data[s]+Yh.data[s+1],o=10*(o=Yh.data[s+3]/255)-5,0!==i){var p=np.find((function(t){return t.id===i}));void 0!==p&&(o<(window.minError||-1.5)&&p.z<18?(e.add(p),t.add(p)):o>(window.maxError||0)&&p.z>7?n.add(p):t.add(p))}$h.stop(),tp.start(),np.forEach((function(e){(void 0===ip[e.imageryKey]&&(ip[e.imageryKey]=0),t.has(e))?ip[e.imageryKey]=0:ip[e.imageryKey]++>5&&n.add(e)}));var d=new Set(Object(a.a)(n).filter((function(t){return e.has(t)})));n=new Set(Object(a.a)(n).filter((function(e){return!d.has(e)&&!t.has(e)}))),e=new Set(Object(a.a)(e).filter((function(t){return!d.has(t)}))),Object(a.a)(t).filter((function(t){return!e.has(t)})).forEach((function(t){return t.wasSeen=!0})),Object(a.a)(np).filter((function(t){return!e.has(t)})).forEach((function(t){return t.wasRendered=!0})),n.forEach((function(t){var e=t.imageryKey.slice(0,-1);void 0===r[e]?r[e]=new Set([t]):r[e].add(t)})),e.forEach((function(t){var e;if(!window.noSplit){var n=t.split();n.forEach((function(t){return t.fetchData()})),(e=np).push.apply(e,Object(a.a)(n.splice(1,3)))}})),0===e.size&&(cp=!0),Object.values(r).forEach((function(t){if(4===t.size){var e=Object(a.a)(t),n=e[0],r=e.splice(1,3);delete ip[n.imageryKey],n.grow().fetchData(),r.forEach((function(t){var e=np.indexOf(t);np.splice(e,1),delete ip[t.imageryKey],t.recycle()}))}}));var g=Gc.getState().target;np.forEach((function(t){Qh.copy(t.mesh.geometry.boundingSphere.center),Qh.sub(g);var e=Math.abs(Qh.x)>Zh?-Math.sign(Qh.x):0,n=Math.abs(Qh.y)>Zh?Math.sign(Qh.y):0;(e||n)&&(t.shift(e,n,5),t.fetchData())})),np.filter((function(t){return t.bestImagery.downsample>0})).forEach((function(t){return t.fetchData()})),np.forEach((function(t){ip[t.imageryKey]<10&&t.onSeen()})),tp.stop(),performance.mark("Process-end"),performance.measure("Process","Process-start","Process-end")}(),Gl.hasUpdates&&Gl.broadcastUpdate(),Pc.hasUpdates&&Pc.broadcastUpdate(),ep.add(np.length)}}));var lp=Du.getState().element,fp={mouse:{x:0,y:0},init:function(){var t=function(){return _f.pickFeature(fp.mouse)},e=function(t){if(!nc.getState().interacting){var e=t.srcElement.getBoundingClientRect(),n=t.clientX||t.pageX,r=t.clientY||t.pageY;if(n-=e.left,r-=e.top,!isNaN(n)&&!isNaN(r))fp.mouse={x:n,y:r}}};"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0||lp.addEventListener("mousemove",(function(t){e(t)}));var n=function(e){if(2===e.detail)!function(){var t=Du.toClipSpace(fp.mouse);if(Math.abs(t.x)<.2&&Math.abs(t.y)<.2)_.doubleTapZoom();else{var e=_f.raycastTerrain(fp.mouse);Math.abs(e.x)<7500&&Math.abs(e.y)<7500&&_.focusOnTarget(e)}}();else{var n=t();n&&_.featureClicked(n)}return!0};Gc.getState().controls.addEventListener("click",(function(t){e(t),n(t)}))}};var hp=U([[x.setCameraModeControlVisible],[x.setCompassVisible],[x.setLayersControlVisible],[x.setRotationControlVisible],[x.setSeasonControlVisible],[_.setSecondaryParams],[x.setUserLocationControlVisible],[x.setZoomControlVisible]]);hp.displayName="UserInterfaceStore";var pp=A.createStore(hp),dp={position:"absolute",top:9,left:11,padding:"3px 13px",border:"1px solid white",borderRadius:34,backgroundColor:"#333542"},gp="solid 4px transparent",yp={borderBottom:"solid 14px #b33330",borderLeft:gp,borderRight:gp},vp={borderTop:"solid 14px #cccccc",borderLeft:gp,borderRight:gp},mp=new gu.Vector3,Ap=kf.createClass({displayName:"Compass",getInitialState:function(){return{azimuth:0,visible:pp.getState().compassVisible}},componentDidMount:function(){var t;Gc.listen(this.onStoreChange),pp.listen((t="compassVisible",function(e){this.setState({visible:e[t]})}).bind(this))},onStoreChange:function(t){mp.subVectors(t.position,t.target);var e=.5*Math.PI+Math.atan2(mp.y,mp.x);e=.01*Math.round(100*e),this.setState({azimuth:e})},shouldComponentUpdate:function(t,e){return this.state.azimuth!==e.azimuth||this.state.visible!==e.visible},render:function(){return!1===this.state.visible?null:(dp.transform="rotate("+this.state.azimuth+"rad) translateZ(0)",kf.createElement("div",{className:"compass",style:Object.assign({},dp)},kf.createElement("div",{style:yp}),kf.createElement("div",{style:vp})))}}),bp=kf.createClass({displayName:"Container",render:function(){return kf.createElement("div",{style:{position:"relative",height:"100%",overflow:"hidden"}},kf.createElement("div",{id:"container",style:{fontSize:"14px",color:"#fff",position:"absolute",top:0,bottom:0,left:0,right:0}},this.props.children))}}),_p={position:"absolute",bottom:0,right:0,paddingTop:1,paddingBottom:1,paddingLeft:4,paddingRight:4,fontFamily:_h,textAlign:"right",textTransform:"none",color:"white",background:"rgba( 255, 255, 255, 0.1 )"},wp={color:"white",fontSize:"6pt",margin:0},xp=['&copy;<a href="https://www.nasadem.xyz">nasadem.XYZ</a>'],Ep=kf.createClass({displayName:"Credits",getInitialState:function(){return lc.getState().datasource},componentDidMount:function(){lc.listen(this.onStoreChange),this.onStoreChange(lc.getState())},onStoreChange:function(t){var e=t.datasource;this.setState(e)},render:function(){var t=[].concat(xp);this.state.imagery&&t.push(this.state.imagery.attribution);var e="color: ".concat(wp.color,"; font-size: ").concat(wp.fontSize,"; margin: ").concat(wp.margin,"; text-decoration: underline;");return t=t.map((function(t){return t.replace(/<a href=/g,'<a style="'+e+'" href=')})),kf.createElement("div",{className:"credits",style:_p},kf.createElement("p",{style:wp},"Data: ",t.map((function(t){return kf.createElement(kf.Fragment,null,kf.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),kf.createElement("span",null," "))}))))}});function Op(){this.message=null,this.displayErrors=!0,this.bindListeners({clearError:_.setCurrentPlace,fatalError:b.fatalError,setDisplayErrors:x.setDisplayErrors})}Op.prototype.clearError=function(){this.message=null},Op.prototype.fatalError=function(t){this.message=t},Op.prototype.setDisplayErrors=function(t){this.displayErrors=t},Op.displayName="ErrorStore";var Sp=A.createStore(Op),Tp=Du.getState().element,Pp=kf.createClass({displayName:"Engine",componentDidMount:function(){(this.base||this.getDOMNode()).appendChild(Tp),Tp.appendChild(mc.domElement),setTimeout((function(){b.containerMounted()}),0),Sp.listen(this.onError),this.setState(this.getInitialState())},getInitialState:function(){return{error:Sp.getState().message}},onError:function(t){t.displayErrors&&this.setState({error:t.message})},render:function(){var t={width:"100%",height:"100%",touchAction:"none"};if(this.state.error){var e={padding:10,textAlign:"center"};return kf.createElement("div",{style:t},kf.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:10,background:"black"}},kf.createElement("h2",{style:e},"Error"),kf.createElement("p",{style:e},this.state.error)))}return kf.createElement("div",{style:t})}}),Mp={border:"1px solid white",margin:4,color:"white",width:36,height:36,lineHeight:"32px",textAlign:"center",padding:0,borderRadius:18,backgroundColor:"#333542",outline:"none",WebkitTransition:"background-color 0.5s",transition:"background-color 0.5s",cursor:"pointer"},Cp={backgroundColor:"rgba(97, 97, 97, 0.5)"},Ip=kf.createClass({displayName:"Button",getInitialState:function(){return{hover:!1}},mouseOver:function(){this.setState({hover:!0})},mouseOut:function(){this.setState({hover:!1})},render:function(){var t=Object.assign({},Mp,this.state.hover?Cp:void 0,this.props.style);return kf.createElement("button",{className:this.props.icon,onClick:this.props.action,onMouseOver:this.mouseOver,onMouseOut:this.mouseOut,style:t},this.props.text)}}),Rp=kf.createClass({displayName:"ButtonRow",render:function(){var t=this.props.buttons.map((function(t){return kf.createElement(Ip,{action:t.action,icon:t.icon,text:t.text})}));return kf.createElement("div",null,t)}}),kp=null,jp=!1;if("geolocation"in navigator){kp={icon:"b1 fa fa-location-arrow",action:function(){jp||(navigator.geolocation.watchPosition(mu.panToPosition),jp=!0),mu.toggleTracking()}}}var Lp=kf.createClass({displayName:"EngineControlsBottom",getInitialState:function(){return pp.getState()},componentDidMount:function(){pp.listen(this.onStoreChange),this.setState(this.getInitialState())},onStoreChange:function(t){this.setState(t)},shouldComponentUpdate:function(t,e){return this.state.userLocationControlVisible!==e.userLocationControlVisible},render:function(){var t=[];this.state.userLocationControlVisible&&t.push(kf.createElement(Rp,{className:"engine-controls-user-location",buttons:[kp]}));return kf.createElement("div",{style:{position:"absolute",top:"initial",bottom:15,right:8},className:"engine-controls bottom"},t)}}),Np=[{icon:"b1 fa fa-minus",action:_.zoomOut},{icon:"b1 fa fa-plus",action:_.zoomIn}],Dp=[{text:"2D",action:function(){_.setCameraMode("2D"),_.setTerrainEffectContours()}},{text:"3D",action:function(){_.setCameraMode("3D"),_.setTerrainEffectNone()}}],Fp=[{icon:"b1 fa fa-rotate-right",action:_.rotateRight},{icon:"b1 fa fa-rotate-left",action:_.rotateLeft}],Bp=kf.createClass({displayName:"EngineControlsTop",getInitialState:function(){return pp.getState()},componentDidMount:function(){pp.listen(this.onStoreChange),this.setState(this.getInitialState())},onStoreChange:function(t){this.setState(t)},shouldComponentUpdate:function(t,e){return this.state.cameraModeControlVisible!==e.cameraModeControlVisible||this.state.rotationControlVisible!==e.rotationControlVisible||this.state.zoomControlVisible!==e.zoomControlVisible},render:function(){var t=[];this.state.zoomControlVisible&&t.push(kf.createElement(Rp,{className:"engine-controls-zoom",buttons:Np})),this.state.cameraModeControlVisible&&t.push(kf.createElement(Rp,{className:"engine-controls-cam",buttons:Dp})),this.state.rotationControlVisible&&t.push(kf.createElement(Rp,{className:"engine-controls-rotate",buttons:Fp}));return kf.createElement("div",{style:{position:"absolute",top:6,right:8},className:"engine-controls"},t)}}),zp=kf.createClass({displayName:"PoweredBy",render:function(){var t={backgroundImage:"url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='34.32' y='1.52' width='57.03' height='57.03' fill='%23fff'/><rect x='34.32' y='69.96' width='28.52' height='28.52' fill='%23fff'/><rect x='8.65' y='69.96' width='14.26' height='14.26' fill='%23fff'/><rect x='15.78' y='51.43' width='7.13' height='7.13' fill='%23fff'/></svg>\")\n",backgroundRepeat:"no-repeat",display:"block",height:40,width:40};return kf.createElement("div",{className:"powered-by",style:{position:"absolute",padding:"11px 8px",bottom:0,opacity:.9,WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",userSelect:"none"}},kf.createElement("a",{href:"https://github.com/felixpalmer/procedural-gl-js",target:"_blank",style:t}))}}),Up=kf.createClass({displayName:"App",render:function(){return kf.createElement(bp,null,kf.createElement(Pp,null),kf.createElement(Ep,null),kf.createElement(Bp,null),kf.createElement(Lp,null),kf.createElement(Ap,null),kf.createElement(zp,null))}});lc.listen((function(t){t.appContainer&&kf.render(kf.createElement(Up,null),t.appContainer)})),x.configureCamera({minDistance:500,minHeight:250,zoomInDuration:.8,zoomOutDuration:1}),fp.init(),console.log("Procedural v1.0.6");for(var Gp=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},w),E),S),I),rl),Ef),Pf),Mf),Cf),Vp=["onFeatureClicked","onFeatureSelected","onOverlayAdded"],qp=function(){var t=Wp[Hp];Object.defineProperty(Gp,t,{set:function(e){return Ef[t]=e}})},Hp=0,Wp=Vp;Hp<Wp.length;Hp++)qp();for(var Xp=function(){var t=Qp[Yp];Object.defineProperty(Gp,t,{set:function(e){return S[t]=e}})},Yp=0,Qp=Vp=["onBoundsFocused","onLocationError","onLocationFocused","onLocationLoaded","onUserInteraction"];Yp<Qp.length;Yp++)Xp();e.a=Gp}).call(this,n(62))},function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return d}));var r,i,o=n(0),a=n(25),s="OES_element_index",u="WEBGL_draw_buffers",c="WEBGL_debug_renderer_info",l=function(t){return Object(a.h)(t)?void 0:0},f=(r={},Object(o.a)(r,3074,(function(t){return Object(a.h)(t)?void 0:36064})),Object(o.a)(r,35723,(function(t){return Object(a.h)(t)?void 0:4352})),Object(o.a)(r,35977,l),Object(o.a)(r,32937,l),Object(o.a)(r,36795,(function(t,e){var n=Object(a.h)(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0})),Object(o.a)(r,37445,(function(t,e){var n=t.getExtension(c);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(o.a)(r,37446,(function(t,e){var n=t.getExtension(c);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(o.a)(r,34047,(function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(o.a)(r,32883,l),Object(o.a)(r,35071,l),Object(o.a)(r,37447,l),Object(o.a)(r,36063,(function(t,e){if(!Object(a.h)(t)){var n=t.getExtension(u);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(o.a)(r,35379,l),Object(o.a)(r,35374,l),Object(o.a)(r,35377,l),Object(o.a)(r,34852,(function(t){if(!Object(a.h)(t)){var e=t.getExtension(u);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(o.a)(r,36203,(function(t){return t.getExtension(s)?2147483647:65535})),Object(o.a)(r,33001,(function(t){return t.getExtension(s)?16777216:65535})),Object(o.a)(r,33e3,(function(t){return 16777216})),Object(o.a)(r,37157,l),Object(o.a)(r,35373,l),Object(o.a)(r,35657,l),Object(o.a)(r,36183,l),Object(o.a)(r,37137,l),Object(o.a)(r,34045,l),Object(o.a)(r,35978,l),Object(o.a)(r,35979,l),Object(o.a)(r,35968,l),Object(o.a)(r,35376,l),Object(o.a)(r,35375,l),Object(o.a)(r,35659,l),Object(o.a)(r,37154,l),Object(o.a)(r,35371,l),Object(o.a)(r,35658,l),Object(o.a)(r,35076,l),Object(o.a)(r,35077,l),Object(o.a)(r,35380,l),r);var h="ANGLE_instanced_arrays";var p=(i={},Object(o.a)(i,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(a.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(o.a)(i,h,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){Object(a.a)(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(o.a)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(a.a)(!1)}}),Object(o.a)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(a.a)(!1)},deleteQuery:function(){Object(a.a)(!1)},beginQuery:function(){Object(a.a)(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},getQueryObject:function(){}}),i),d={readBuffer:function(t,e,n){Object(a.h)(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,o=function(t,e){return{webgl2:Object(a.h)(t),ext:t.getExtension(e)}}(t,h),s=o.webgl2,u=o.ext;switch(r){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!Object(a.h)(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){if(!Object(a.h)(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter:function(t,e,n,r){switch(r){case 34046:var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){var r=f[n],i="function"===typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:function(t,e,n,r){return e(n,r)}}},,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(331)),i=o(n(627));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,t);var e,n,r,o,a=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function d(t){var e,n=t.getData,r=t.on,o=t.toNebulaFeature;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),p(c(e=a.call(this)),"getData",void 0),p(c(e),"toNebulaFeature",void 0),p(c(e),"id",void 0),p(c(e),"helperLayers",void 0),p(c(e),"usesMapEvents",!1),p(c(e),"enablePicking",!1),p(c(e),"enableSelection",!1),e.id=i.default.v4(),e.getData=n,e.toNebulaFeature=o,e.helperLayers=[],r&&Object.keys(r).forEach((function(t){return e.on(t,r[t])})),e}return n=d,(r=[{key:"render",value:function(t){return null}}])&&s(n.prototype,r),o&&s(n,o),d}(r.default.EventEmitter);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44),i=n(91);e.default=function(t,e,n,o){void 0===o&&(o={});var a=i.getCoord(t),s=r.degreesToRadians(a[0]),u=r.degreesToRadians(a[1]),c=r.degreesToRadians(n),l=r.lengthToRadians(e,o.units),f=Math.asin(Math.sin(u)*Math.cos(l)+Math.cos(u)*Math.sin(l)*Math.cos(c)),h=s+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(u),Math.cos(l)-Math.sin(u)*Math.sin(f)),p=r.radiansToDegrees(h),d=r.radiansToDegrees(f);return r.point([p,d],o.properties)}},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){var r=n(134),i=n(110);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(98).Symbol;t.exports=r},function(t,e,n){var r=n(356),i=n(559),o=n(148);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return i(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var n=0;return i(t,n,e)}return""}function i(t,e,n){if(t.byteLength<=e+n)return"";for(var r=new DataView(t),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){function r(){var e;if("undefined"!==typeof window&&window.performance)e=window.performance.now();else if("undefined"!==typeof t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return r}))}).call(this,n(78))},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n(22),i=n(50).b.COMPONENT;function o(t){var e=h(t);for(var n in e){var r=e[n],i=r.validate;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function a(t,e){var n=u({newProps:t,oldProps:e,propTypes:h(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";var n=null,r=t.dataComparator,i=t._dataDiff;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return"oldProps is null, initial diff";if("all"in t.updateTriggers){if(f(t,e,"all"))return{all:!0}}var n={},r=!1;for(var i in t.updateTriggers){if("all"!==i)f(t,e,i)&&(n[i]=!0,r=n)}return r}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:l(t,e),transitionsChanged:s(t,e)}}function s(t,e){if(!t.transitions)return null;var n={},r=h(t);for(var i in t.transitions){var o=r[i],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&c(t[i],e[i],o)&&(n[i]=!0)}return n}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.newProps,n=t.oldProps,i=t.ignoreProps,o=void 0===i?{}:i,a=t.propTypes,s=void 0===a?{}:a,u=t.triggerName,l=void 0===u?"props":u;if(n===e)return null;if("object"!==Object(r.a)(e)||null===e)return"".concat(l," changed shallowly");if("object"!==Object(r.a)(n)||null===n)return"".concat(l," changed shallowly");for(var f=0,h=Object.keys(e);f<h.length;f++){var p=h[f];if(!(p in o)){if(!(p in n))return"".concat(l,".").concat(p," added");var d=c(e[p],n[p],s[p]);if(d)return"".concat(l,".").concat(p," ").concat(d)}}for(var g=0,y=Object.keys(n);g<y.length;g++){var v=y[g];if(!(v in o)){if(!(v in e))return"".concat(l,".").concat(v," dropped");if(!Object.hasOwnProperty.call(e,v)){var m=c(e[v],n[v],s[v]);if(m)return"".concat(l,".").concat(v," ").concat(m)}}}return null}function c(t,e,n){var r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||!(r=t&&e&&t.equals)||r.call(t,e)?r||e===t?null:"changed shallowly":"changed deeply"}function l(t,e){if(null===e)return"oldProps is null, initial diff";var n=e.extensions,r=t.extensions;if(r===n)return!1;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function f(t,e,n){var r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;var i=e.updateTriggers[n];return u({oldProps:i=void 0===i||null===i?{}:i,newProps:r,triggerName:n})}function h(t){var e=t[i],n=e&&e.constructor;return n?n._propTypes:{}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(405),c=n(167),l=n(226),f=n(136),h=n(126),p=n(13),d=n(0),g=n(15),y=n(125),v=n(141),m=n(101),A=n(10);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var x=function(t){Object(o.a)(n,t);var e=w(n);function n(t,i){var o,a,s;return Object(r.a)(this,n),(s=e.call(this,t,i)).shadowMap=new c.a(t,{width:1,height:1,parameters:(o={},Object(d.a)(o,10241,9729),Object(d.a)(o,10240,9729),Object(d.a)(o,10242,33071),Object(d.a)(o,10243,33071),o)}),s.depthBuffer=new v.a(t,{format:33189,width:1,height:1}),s.fbo=new m.a(t,{id:"shadowmap",width:1,height:1,attachments:(a={},Object(d.a)(a,36064,s.shadowMap),Object(d.a)(a,36096,s.depthBuffer),a)}),s}return Object(i.a)(n,[{key:"render",value:function(t){var e=this,r=this.fbo;Object(A.l)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=t.viewports[0],o=Object(A.c)(e.gl),a=i.width*o,u=i.height*o;a===r.width&&u===r.height||r.resize({width:a,height:u}),Object(g.a)(Object(s.a)(n.prototype),"render",e).call(e,_(_({},t),{},{target:r,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(t){return!1!==t.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),n}(y.a),E=n(165);function O(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var P={color:[255,255,255],intensity:1},M=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],C=[0,0,0,200/255],I=function(t){Object(o.a)(n,t);var e=T(n);function n(t){var i;for(var o in Object(r.a)(this,n),(i=e.call(this,t)).ambientLight=null,i.directionalLights=[],i.pointLights=[],i.shadowColor=C,i.shadowPasses=[],i.shadowMaps=[],i.dummyShadowMap=null,i.shadow=!1,i.programManager=null,t){var a=t[o];switch(a.type){case"ambient":i.ambientLight=a;break;case"directional":i.directionalLights.push(a);break;case"point":i.pointLights.push(a)}}return i._applyDefaultLights(),i.shadow=i.directionalLights.some((function(t){return t.shadow})),i}return Object(i.a)(n,[{key:"preRender",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.viewports,o=e.onViewportActive,a=e.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=u.a.getDefaultProgramManager(t),E.a&&this.programManager.addDefaultModule(E.a)),this.dummyShadowMap||(this.dummyShadowMap=new c.a(t,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(t){var e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(e){return e.getProjectedLight({layer:t})})),pointLights:this.pointLights.map((function(e){return e.getProjectedLight({layer:t})}))},e}},{key:"cleanup",value:function(){var t,e=O(this.shadowPasses);try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(n){e.e(n)}finally{e.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(E.a),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var t,e=[],n=O(this.directionalLights);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=(new p.Matrix4).lookAt({eye:new p.Vector3(r.direction).negate()});e.push(i)}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"_createShadowPasses",value:function(t){for(var e=0;e<this.directionalLights.length;e++){var n=new x(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var t=this.ambientLight,e=this.pointLights,n=this.directionalLights;t||0!==e.length||0!==n.length||(this.ambientLight=new l.a(P),this.directionalLights.push(new f.a(M[0]),new f.a(M[1])))}}]),n}(h.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(127),c=n(23),l=n(72),f=n(17),h=n(81),p=n(29),d=n(41);function g(){var t=new f.a(4);return f.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function y(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t}function m(t,e,n,r){var i,o,a,s,u,c=e[0],l=e[1],h=e[2],p=e[3],d=n[0],g=n[1],y=n[2],v=n[3];return(o=c*d+l*g+h*y+p*v)<0&&(o=-o,d=-d,g=-g,y=-y,v=-v),1-o>f.b?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*l+u*g,t[2]=s*h+u*y,t[3]=s*p+u*v,t}function A(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}d.b,d.g,d.c,d.l;var b=d.a,_=d.k,w=d.d,x=d.i,E=d.h,O=d.m,S=d.j,T=(d.f,d.e,function(){var t=p.b(),e=p.e(1,0,0),n=p.e(0,1,0);return function(r,i,o){var a=p.d(i,o);return a<-.999999?(p.c(t,e,i),p.f(t)<1e-6&&p.c(t,n,i),p.j(t,t),y(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(p.c(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,S(r,r))}}());(function(){var t=g(),e=g()})(),function(){var t=h.a()}();function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var M=[0,0,0,1],C=function(t){Object(o.a)(n,t);var e=P(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(r.a)(this,n),t=e.call(this,-0,-0,-0,-0),Array.isArray(i)&&1===arguments.length?t.copy(i):t.set(i,o,a,s),t}return Object(i.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}},{key:"fromMatrix3",value:function(t){return A(this,t),this.check()}},{key:"identity",value:function(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}},{key:"fromAxisRotation",value:function(t,e){return y(this,t,e),this.check()}},{key:"setAxisAngle",value:function(t,e){return this.fromAxisRotation(t,e)}},{key:"len",value:function(){return E(this)}},{key:"lengthSquared",value:function(){return O(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return w(this,t)}},{key:"rotationTo",value:function(t,e){return T(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return b(this,this,t),this.check()}},{key:"calculateW",value:function(){return function(t,e){var n=e[0],r=e[1],i=e[2];t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}},{key:"conjugate",value:function(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}},{key:"invert",value:function(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s}(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return x(this,t,e,n),this.check()}},{key:"multiplyRight",value:function(t,e){return Object(l.a)(!e),v(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t,e){return Object(l.a)(!e),v(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s}(this,this,t),this.check()}},{key:"scale",value:function(t){return _(this,this,t),this.check()}},{key:"slerp",value:function(t,e,n){switch(arguments.length){case 1:var r=arguments[0],i=r.start;t=void 0===i?M:i,e=r.target,n=r.ratio;break;case 2:var o=Array.prototype.slice.call(arguments);e=o[0],n=o[1],t=this}return m(this,t,e,n),this.check()}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return d.o(e,t,this),Object(c.b)(e,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,e){return this.setAxisAngle(t,e)}},{key:"premultiply",value:function(t,e){return this.multiplyLeft(t,e)}},{key:"multiply",value:function(t,e){return this.multiplyRight(t,e)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(c.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=Object(c.a)(t)}}]),n}(u.a)},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return h}));var r=n(12),i=n(24),o=n(159),a=n(150),s=n(41),u=n(29),c=n(34);function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.projectPosition(t);if(n&&e instanceof a.a){var o=Object(r.a)(t,3),s=o[0],u=o[1],c=o[2],l=void 0===c?0:c,f=e.getDistanceScales([s,u]);i[2]=l*f.unitsPerMeter[2]}return i}function f(t,e){var n=e.viewport,o=e.modelMatrix,a=e.coordinateSystem,u=e.coordinateOrigin,f=e.offsetMode,h=Object(r.a)(t,3),p=h[0],d=h[1],g=h[2],y=void 0===g?0:g;if(o){var v=s.n([],[p,d,y,1],o),m=Object(r.a)(v,3);p=m[0],d=m[1],y=m[2]}switch(a){case i.a.LNGLAT:return l([p,d,y],n,f);case i.a.LNGLAT_OFFSETS:return l([p+u[0],d+u[1],y+(u[2]||0)],n,f);case i.a.METER_OFFSETS:return l(Object(c.b)(u,[p,d,y]),n,f);case i.a.CARTESIAN:default:return n.isGeospatial?[p+u[0],d+u[1],y+u[2]]:n.projectPosition([p,d,y])}}function h(t,e){var n=function(t){var e=Object.assign({},t),n=t.coordinateSystem,r=t.viewport,o=t.coordinateOrigin,a=t.fromCoordinateSystem,s=t.fromCoordinateOrigin;return n===i.a.DEFAULT&&(n=r.isGeospatial?i.a.LNGLAT:i.a.CARTESIAN),void 0===a&&(e.fromCoordinateSystem=n),void 0===s&&(e.fromCoordinateOrigin=o),e.coordinateSystem=n,e}(e),r=n.viewport,a=n.coordinateSystem,s=n.coordinateOrigin,c=n.modelMatrix,l=n.fromCoordinateSystem,h=n.fromCoordinateOrigin,p=Object(o.a)(r,a,s),d=p.geospatialOrigin,g=p.shaderCoordinateOrigin,y=p.offsetMode,v=f(t,{viewport:r,modelMatrix:c,coordinateSystem:l,coordinateOrigin:h,offsetMode:y});if(y){var m=r.projectPosition(d||g);u.o(v,v,m)}return v}},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var i=n(22),o={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof t&&t,document:"undefined"!==typeof document&&document},a=o.global||o.self||o.window,s="object"!==("undefined"===typeof r?"undefined":Object(i.a)(r))||"[object process]"!==String(r)||r.browser,u="undefined"!==typeof r&&r.version&&r.version.match(/v([0-9]*)/);u&&parseFloat(u[1])}).call(this,n(62),n(78))},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f}));var r=n(394),i=n.n(r);function o(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,r){for(var i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function u(t,e,n,r){for(var i=e,o=n.length,a=0;a<o;a++)for(var s=0;s<r;s++)t[i++]=n[a][s]||0;if(!function(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(var u=0;u<r;u++)t[i++]=n[0][u]||0;return i}function c(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=(o=o||n.length)-i;if(a<=0)return e;for(var u=e,c=0;c<a;c++)t[u++]=n[i+c];if(!s(n,r,i,o))for(var l=0;l<r;l++)t[u++]=n[i+l];return u}function l(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);var n=[],r=[];if(t.positions){var i=t,a=i.positions,s=i.holeIndices;if(s){for(var l=0,f=0;f<=s.length;f++)l=c(n,l,a,e,s[f-1],s[f]),r.push(l);return r.pop(),{positions:n,holeIndices:r}}t=a}if(Number.isFinite(t[0]))return c(n,0,t,e),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){var h,p=0,d=o(t);try{for(d.s();!(h=d.n()).done;){p=u(n,p,h.value,e),r.push(p)}}catch(g){d.e(g)}finally{d.f()}return r.pop(),{positions:n,holeIndices:r}}return u(n,0,t,e),n}function f(t,e,n){var r=null;t.holeIndices&&(r=t.holeIndices.map((function(t){return t/e})));var o=t.positions||t;if(n){var a=o.length;o=o.slice();for(var s=[],u=0;u<a;u+=e){s[0]=o[u],s[1]=o[u+1];var c=n(s);o[u]=c[0],o[u+1]=c[1]}}return i()(o,r,e)}},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return re}));var r,i,o,a,s,u,c,l,f,h,p,d,g,y,v,m,A,b,_,w,x,E,O,S,T,P=1,M=[],C=[],I=Date.now,R=I(),k=0,j=1,L=function(t){return t},N=function(){return"undefined"!==typeof window},D=function(){return r||N()&&(r=window.gsap)&&r.registerPlugin&&r},F=function(t){return!!~c.indexOf(t)},B=function(t,e){return~M.indexOf(t)&&M[M.indexOf(t)+1][e]},z=function(t,e){var n=e.s,r=e.sc,i=C.indexOf(t),o=r===gt.sc?1:2;return!~i&&(i=C.push(t)-1),C[i+o]||(C[i+o]=B(t,n)||(F(t)?r:function(e){return arguments.length?t[n]=e:t[n]}))},U=function(t){return B(t,"getBoundingClientRect")||(F(t)?function(){return $t.width=o.innerWidth,$t.height=o.innerHeight,$t}:function(){return mt(t)})},G=function(t,e){var n=e.s,r=e.d2,i=e.d,a=e.a;return(n="scroll"+r)&&(a=B(t,n))?a()-U(t)()[i]:F(t)?Math.max(s[n],u[n])-(o["inner"+r]||s["client"+r]||u["client"+r]):t[n]-t["offset"+r]},V=function(t,e){for(var n=0;n<x.length;n+=3)(!e||~e.indexOf(x[n+1]))&&t(x[n],x[n+1],x[n+2])},q=function(t){return"string"===typeof t},H=function(t){return"function"===typeof t},W=function(t){return"number"===typeof t},X=function(t){return"object"===typeof t},Y=function(t){return H(t)&&t()},Q=function(t,e){return function(){var n=Y(t),r=Y(e);return function(){Y(n),Y(r)}}},Z=Math.abs,K="scrollLeft",J="scrollTop",$="left",tt="top",et="right",nt="bottom",rt="width",it="height",ot="Right",at="Left",st="Top",ut="Bottom",ct="padding",lt="margin",ft="Width",ht="Height",pt="px",dt={s:K,p:$,p2:at,os:et,os2:ot,d:rt,d2:ft,a:"x",sc:function(t){return arguments.length?o.scrollTo(t,gt.sc()):o.pageXOffset||a.scrollLeft||s.scrollLeft||u.scrollLeft||0}},gt={s:J,p:tt,p2:st,os:nt,os2:ut,d:it,d2:ht,a:"y",op:dt,sc:function(t){return arguments.length?o.scrollTo(dt.sc(),t):o.pageYOffset||a.scrollTop||s.scrollTop||u.scrollTop||0}},yt=function(t){return o.getComputedStyle(t)},vt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},mt=function(t,e){var n=e&&"matrix(1, 0, 0, 1, 0, 0)"!==yt(t)[A]&&r.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return n&&n.progress(0).kill(),i},At=function(t,e){var n=e.d2;return t["offset"+n]||t["client"+n]||0},bt=function(t,e,n,r){return n.split(",").forEach((function(n){return t(e,n,r)}))},_t=function(t,e,n){return t.addEventListener(e,n,{passive:!0})},wt=function(t,e,n){return t.removeEventListener(e,n)},xt={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Et={toggleActions:"play",anticipatePin:0},Ot={top:0,left:0,center:.5,bottom:1,right:1},St=function(t,e){if(q(t)){var n=t.indexOf("="),r=~n?+(t.charAt(n-1)+1)*parseFloat(t.substr(n+1)):0;r&&(t.indexOf("%")>n&&(r*=e/100),t=t.substr(0,n-1)),t=r+(t in Ot?Ot[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},Tt=function(t,e,n,r,i,o,s){var c=i.startColor,l=i.endColor,f=i.fontSize,h=i.indent,p=i.fontWeight,d=a.createElement("div"),g=F(n)||"fixed"===B(n,"pinType"),y=-1!==t.indexOf("scroller"),v=g?u:n,m=-1!==t.indexOf("start"),A=m?c:l,b="border-color:"+A+";font-size:"+f+";color:"+A+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+(y&&g?"fixed;":"absolute;"),(y||!g)&&(b+=(r===gt?et:nt)+":"+(o+parseFloat(h))+"px;"),s&&(b+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),d._isStart=m,d.setAttribute("class","gsap-marker-"+t),d.style.cssText=b,d.innerText=e||0===e?t+"-"+e:t,v.insertBefore(d,v.children[0]),d._offset=d["offset"+r.op.d2],Pt(d,0,r,m),d},Pt=function(t,e,n,i){var o={display:"block"},a=n[i?"os2":"p2"],s=n[i?"p2":"os2"];t._isFlipped=i,o[n.a+"Percent"]=i?-100:0,o[n.a]=i?1:0,o["border"+a+ft]=1,o["border"+s+ft]=0,o[n.p]=e,r.set(t,o)},Mt=[],Ct={},It=function(){return h||(h=f(Wt))},Rt=function(){h||(h=f(Wt),k||Bt("scrollStart"),k=I())},kt=function(){return!v&&l.restart(!0)},jt={},Lt=[],Nt=[],Dt=function(t){var e=r.ticker.frame,n=[],i=0;if(T!==e||P){for(Gt();i<Nt.length;i+=3)o.matchMedia(Nt[i]).matches?n.push(i):Gt(1,Nt[i])||H(Nt[i+2])&&Nt[i+2]();for(Ut(),i=0;i<n.length;i++)S=Nt[n[i]],Nt[n[i]+2]=Nt[n[i]+1](t);S=0,Vt(0,1),T=e,Bt("matchMedia")}},Ft=function t(){return wt(re,"scrollEnd",t)||Vt(!0)},Bt=function(t){return jt[t]&&jt[t].map((function(t){return t()}))||Lt},zt=[],Ut=function(t){for(var e=0;e<zt.length;e+=4)t&&zt[e+3]!==t||(zt[e].style.cssText=zt[e+1],zt[e+2].uncache=1)},Gt=function(t,e){var n;for(b=0;b<Mt.length;b++)n=Mt[b],e&&n.media!==e||(t?n.kill(1):(n.scroll.rec||(n.scroll.rec=n.scroll()),n.revert()));Ut(e),e||Bt("revert")},Vt=function(t,e){if(!k||t){var n=Bt("refreshInit");for(E&&re.sort(),e||Gt(),b=0;b<Mt.length;b++)Mt[b].refresh();for(n.forEach((function(t){return t&&t.render&&t.render(-1)})),b=Mt.length;b--;)Mt[b].scroll.rec=0;Bt("refresh")}else _t(re,"scrollEnd",Ft)},qt=0,Ht=1,Wt=function(){var t=Mt.length,e=I(),n=e-R>=50,r=t&&Mt[0].scroll();if(Ht=qt>r?-1:1,qt=r,n&&(k&&!m&&e-k>200&&(k=0,Bt("scrollEnd")),g=R,R=e),Ht<0){for(b=t;b--;)Mt[b]&&Mt[b].update(0,n);Ht=1}else for(b=0;b<t;b++)Mt[b]&&Mt[b].update(0,n);h=0},Xt=[$,tt,nt,et,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float"],Yt=Xt.concat([rt,it,"boxSizing","maxWidth","maxHeight","position",lt,ct,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),Qt=function(t,e,n,r){if(t.parentNode!==e){for(var i,o=Xt.length,a=e.style,s=t.style;o--;)a[i=Xt[o]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),s.bottom=s.right="auto",a.overflow="visible",a.boxSizing="border-box",a.width=At(t,dt)+pt,a.height=At(t,gt)+pt,a.padding=s.margin=s.top=s.left="0",Kt(r),s.width=n.width,s.height=n.height,s.padding=n.padding,t.parentNode.insertBefore(e,t),e.appendChild(t)}},Zt=/([A-Z])/g,Kt=function(t){if(t)for(var e,n,r=t.t.style,i=t.length,o=0;o<i;o+=2)n=t[o+1],e=t[o],n?r[e]=n:r[e]&&r.removeProperty(e.replace(Zt,"-$1").toLowerCase())},Jt=function(t){for(var e=Yt.length,n=t.style,r=[],i=0;i<e;i++)r.push(Yt[i],n[Yt[i]]);return r.t=t,r},$t={left:0,top:0},te=function(t,e,n,r,i,o,a,c,l,f,h,d){if(H(t)&&(t=t(c)),q(t)&&"max"===t.substr(0,3)&&(t=d+("="===t.charAt(4)?St("0"+t.substr(3),n):0)),W(t))a&&Pt(a,n,r,!0);else{H(e)&&(e=e(c));var g,y,v,m=p(e)[0]||u,A=mt(m)||{},b=t.split(" ");A&&(A.left||A.top)||"none"!==yt(m).display||(v=m.style.display,m.style.display="block",A=mt(m),v?m.style.display=v:m.style.removeProperty("display")),g=St(b[0],A[r.d]),y=St(b[1]||"0",n),t=A[r.p]-l[r.p]-f+g+i-y,a&&Pt(a,y,r,n-y<20||a._isStart&&y>20),n-=n-y}if(o){var _=t+n,w=o._isStart;d="scroll"+r.d2,Pt(o,_,r,w&&_>20||!w&&(h?Math.max(u[d],s[d]):o.parentNode[d])<=_+1),h&&(l=mt(a),h&&(o.style[r.op.p]=l[r.op.p]-r.op.m-o._offset+pt))}return Math.round(t)},ee=/(?:webkit|moz|length|cssText)/i,ne=function(t,e){var n,i,o=z(t,e),a="_scroll"+e.p2;return t[a]=o,function e(s,u,c,l,f){var h=e.tween,p=u.onComplete,d={};return h&&h.kill(),n=c,u[a]=s,u.modifiers=d,d[a]=function(t){return(t=o())!==n&&t!==i?(h.kill(),e.tween=0):t=c+l*h.ratio+f*h.ratio*h.ratio,i=n,n=Math.round(t)},u.onComplete=function(){e.tween=0,p&&p.call(h)},h=e.tween=r.to(t,u)}};dt.op=gt;var re=function(){function t(e,n){i||t.register(r)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(e,n)}return t.prototype.init=function(e,n){if(this.progress=0,this.vars&&this.kill(1),j){var i,c,l,f,h,y,A,_,w,x,T,C,R,N,D,V,Y,Q,K,J,$,tt,et,nt,rt,it,ot,at,st,ut,ht,bt,Ot,Pt,It,jt,Lt,Nt,Dt=(e=vt(q(e)||W(e)||e.nodeType?{trigger:e}:e,Et)).horizontal?dt:gt,Bt=e,zt=Bt.onUpdate,Ut=Bt.toggleClass,Gt=Bt.id,Vt=Bt.onToggle,qt=Bt.onRefresh,Wt=Bt.scrub,Xt=Bt.trigger,Yt=Bt.pin,Zt=Bt.pinSpacing,re=Bt.invalidateOnRefresh,ie=Bt.anticipatePin,oe=Bt.onScrubComplete,ae=Bt.onSnapComplete,se=Bt.once,ue=Bt.snap,ce=Bt.pinReparent,le=!Wt&&0!==Wt,fe=p(e.scroller||o)[0],he=r.core.getCache(fe),pe=F(fe),de="pinType"in e?"fixed"===e.pinType:pe||"fixed"===B(fe,"pinType"),ge=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],ye=le&&e.toggleActions.split(" "),ve="markers"in e?e.markers:Et.markers,me=pe?0:parseFloat(yt(fe)["border"+Dt.p2+ft])||0,Ae=this,be=e.onRefreshInit&&function(){return e.onRefreshInit(Ae)},_e=function(t,e,n){var r=n.d,i=n.d2,a=n.a;return(a=B(t,"getBoundingClientRect"))?function(){return a()[r]}:function(){return(e?o["inner"+i]:t["client"+i])||0}}(fe,pe,Dt),we=function(t,e){return!e||~M.indexOf(t)?U(t):function(){return $t}}(fe,pe);Ae.media=S,ie*=45,Mt.push(Ae),Ae.scroller=fe,Ae.scroll=z(fe,Dt),h=Ae.scroll(),Ae.vars=e,n=n||e.animation,"refreshPriority"in e&&(E=1),he.tweenScroll=he.tweenScroll||{top:ne(fe,gt),left:ne(fe,dt)},Ae.tweenTo=i=he.tweenScroll[Dt.p],n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==e.immediateRender&&n.render(0,!0,!0),Ae.animation=n.pause(),n.scrollTrigger=Ae,(bt=W(Wt)&&Wt)&&(ht=r.to(n,{ease:"power3",duration:bt,onComplete:function(){return oe&&oe(Ae)}})),st=0,Gt||(Gt=n.vars.id)),ue&&(X(ue)||(ue={snapTo:ue}),r.set(pe?[u,s]:fe,{scrollBehavior:"auto"}),l=H(ue.snapTo)?ue.snapTo:"labels"===ue.snapTo?function(t){return function(e){var n,i=[],o=t.labels,a=t.duration();for(n in o)i.push(o[n]/a);return r.utils.snap(i,e)}}(n):r.utils.snap(ue.snapTo),Ot=ue.duration||{min:.1,max:2},Ot=X(Ot)?d(Ot.min,Ot.max):d(Ot,Ot),Pt=r.delayedCall(ue.delay||bt/2||.1,(function(){if(Math.abs(Ae.getVelocity())<10&&!m){var t=n&&!le?n.totalProgress():Ae.progress,e=(t-ut)/(I()-g)*1e3||0,r=Z(e/2)*e/.185,o=t+r,a=d(0,1,l(o,Ae)),s=Ae.scroll(),u=Math.round(A+a*N),c=i.tween;if(s<=_&&s>=A&&u!==s){if(c&&!c._initted&&c.data<=Math.abs(u-s))return;i(u,{duration:Ot(Z(.185*Math.max(Z(o-t),Z(a-t))/e/.05||0)),ease:ue.ease||"power3",data:Math.abs(u-s),onComplete:function(){st=ut=n&&!le?n.totalProgress():Ae.progress,ae&&ae(Ae)}},s,r*N,u-s-r*N)}}else Ae.isActive&&Pt.restart(!0)})).pause()),Gt&&(Ct[Gt]=Ae),Xt=Ae.trigger=p(Xt||Yt)[0],Yt=!0===Yt?Xt:p(Yt)[0],q(Ut)&&(Ut={targets:Xt,className:Ut}),Yt&&(!1===Zt||Zt===lt||(Zt=!(!Zt&&"flex"===yt(Yt.parentNode).display)&&ct),Ae.pin=Yt,!1!==e.force3D&&r.set(Yt,{force3D:!0}),(c=r.core.getCache(Yt)).spacer?D=c.pinState:(c.spacer=Q=a.createElement("div"),Q.setAttribute("class","pin-spacer"+(Gt?" pin-spacer-"+Gt:"")),c.pinState=D=Jt(Yt)),Ae.spacer=Q=c.spacer,at=yt(Yt),nt=at[Zt+Dt.os2],J=r.getProperty(Yt),$=r.quickSetter(Yt,Dt.a,pt),Qt(Yt,Q,at),Y=Jt(Yt)),ve&&(R=X(ve)?vt(ve,xt):xt,T=Tt("scroller-start",Gt,fe,Dt,R,0),C=Tt("scroller-end",Gt,fe,Dt,R,0,T),K=T["offset"+Dt.op.d2],w=Tt("start",Gt,fe,Dt,R,K),x=Tt("end",Gt,fe,Dt,R,K),de||((Nt=fe).style.position="absolute"===yt(Nt).position?"absolute":"relative",r.set([T,C],{force3D:!0}),it=r.quickSetter(T,Dt.a,pt),ot=r.quickSetter(C,Dt.a,pt))),Ae.revert=function(t){var e=!1!==t||!Ae.enabled,r=v;e!==f&&(e&&(jt=Math.max(Ae.scroll(),Ae.scroll.rec||0),It=Ae.progress,Lt=n&&n.progress()),w&&[w,x,T,C].forEach((function(t){return t.style.display=e?"none":"block"})),e&&(v=1),Ae.update(e),v=r,Yt&&(e?function(t,e,n){if(Kt(n),t.parentNode===e){var r=e.parentNode;r&&(r.insertBefore(t,e),r.removeChild(e))}}(Yt,Q,D):(!ce||!Ae.isActive)&&Qt(Yt,Q,yt(Yt),rt)),f=e)},Ae.refresh=function(i){if(!v&&Ae.enabled)if(Yt&&i&&k)_t(t,"scrollEnd",Ft);else{v=1,ht&&ht.kill(),re&&n&&n.progress(0).invalidate(),f||Ae.revert();for(var o,a,s,c,l,p,d,g,m=_e(),b=we(),E=G(fe,Dt),O=0,S=0,P=e.end,M=e.endTrigger||Xt,I=e.start||(Yt||!Xt?"0 0":"0 100%"),R=Xt&&Math.max(0,Mt.indexOf(Ae))||0,j=R;j--;)(d=Mt[j].pin)&&(d===Xt||d===Yt)&&Mt[j].revert();for(A=te(I,Xt,m,Dt,Ae.scroll(),w,T,Ae,b,me,de,E)||(Yt?-.001:0),H(P)&&(P=P(Ae)),q(P)&&!P.indexOf("+=")&&(~P.indexOf(" ")?P=(q(I)?I.split(" ")[0]:"")+P:(O=St(P.substr(2),m),P=q(I)?I:A+O,M=Xt)),_=Math.max(A,te(P||(M?"100% 0":E),M,m,Dt,Ae.scroll()+O,x,C,Ae,b,me,de,E))||-.001,N=_-A||(A-=.01)&&.001,O=0,j=R;j--;)(d=(p=Mt[j]).pin)&&p.start-p._pinPush<A&&(o=p.end-p.start,d===Xt&&(O+=o),d===Yt&&(S+=o));if(A+=O,_+=O,Ae._pinPush=S,w&&O&&((o={})[Dt.a]="+="+O,r.set([w,x],o)),Yt)o=yt(Yt),c=Dt===gt,s=Ae.scroll(),tt=parseFloat(J(Dt.a))+S,Qt(Yt,Q,o),Y=Jt(Yt),a=mt(Yt,!0),g=de&&z(fe,c?dt:gt)(),Zt&&((rt=[Zt+Dt.os2,N+S+pt]).t=Q,(j=Zt===ct?At(Yt,Dt)+N+S:0)&&rt.push(Dt.d,j+pt),Kt(rt),de&&Ae.scroll(jt)),de&&((l={top:a.top+(c?s-A:g)+pt,left:a.left+(c?g:s-A)+pt,boxSizing:"border-box",position:"fixed"}).width=l.maxWidth=Math.ceil(a.width)+pt,l.height=l.maxHeight=Math.ceil(a.height)+pt,l.margin=l.marginTop=l.marginRight=l.marginBottom=l.marginLeft="0",l.padding=o.padding,l.paddingTop=o.paddingTop,l.paddingRight=o.paddingRight,l.paddingBottom=o.paddingBottom,l.paddingLeft=o.paddingLeft,V=function(t,e,n){for(var r,i=[],o=t.length,a=n?8:0;a<o;a+=2)r=t[a],i.push(r,r in e?e[r]:t[a+1]);return i.t=t.t,i}(D,l,ce)),n?(n.progress(1,!0),et=J(Dt.a)-tt+N+S,N!==et&&V.splice(V.length-2,2),n.progress(0,!0)):et=N;else if(Xt&&Ae.scroll())for(a=Xt.parentNode;a&&a!==u;)a._pinOffset&&(A-=a._pinOffset,_-=a._pinOffset),a=a.parentNode;for(j=0;j<R;j++)(p=Mt[j].pin)&&(p===Xt||p===Yt)&&Mt[j].revert(!1);Ae.start=A,Ae.end=_,(h=y=Ae.scroll())<jt&&Ae.scroll(jt),Ae.revert(!1),v=0,Lt&&le&&n.progress(Lt,!0),It!==Ae.progress&&(ht&&n.totalProgress(It,!0),Ae.progress=It,Ae.update()),Yt&&Zt&&(Q._pinOffset=Math.round(Ae.progress*et)),qt&&qt(Ae)}},Ae.getVelocity=function(){return(Ae.scroll()-y)/(I()-g)*1e3||0},Ae.update=function(t,e){var r,o,a,s,c,l=Ae.scroll(),f=t?0:(l-A)/N,d=f<0?0:f>1?1:f||0,m=Ae.progress;if(e&&(y=h,h=l,ue&&(ut=st,st=n&&!le?n.totalProgress():d)),ie&&!d&&Yt&&!v&&!P&&k&&A<l+(l-y)/(I()-g)*ie&&(d=1e-4),d!==m&&Ae.enabled){if(s=(c=(r=Ae.isActive=!!d&&d<1)!==(!!m&&m<1))||!!d!==!!m,Ae.direction=d>m?1:-1,Ae.progress=d,le||(!ht||v||P?n&&n.totalProgress(d,!!v):(ht.vars.totalProgress=d,ht.invalidate().restart())),Yt)if(t&&Zt&&(Q.style[Zt+Dt.os2]=nt),de){if(s){if(a=!t&&d>m&&_+1>l&&l+1>=G(fe,Dt),ce){if(!t&&(r||a)){var b=mt(Yt,!0),w=l-A;Yt.style.top=b.top+(Dt===gt?w:0)+pt,Yt.style.left=b.left+(Dt===gt?0:w)+pt}!function(t,e){if(t.parentNode!==e){var n,r,i=t.style;if(e===u)for(n in t._stOrig=i.cssText,r=yt(t))+n||ee.test(n)||!r[n]||"string"!==typeof i[n]||"0"===n||(i[n]=r[n]);else i.cssText=t._stOrig;e.appendChild(t)}}(Yt,t||!r&&!a?Q:u)}Kt(r||a?V:Y),et!==N&&d<1&&r||$(tt+(1!==d||a?0:et))}}else $(tt+et*d);ue&&!i.tween&&!v&&!P&&Pt.restart(!0),Ut&&(c||se&&d&&(d<1||!O))&&p(Ut.targets).forEach((function(t){return t.classList[r||se?"add":"remove"](Ut.className)})),zt&&!le&&!t&&zt(Ae),s&&!v?(o=d&&!m?0:1===d?1:1===m?2:3,le&&(a=!c&&"none"!==ye[o+1]&&ye[o+1]||ye[o],n&&("complete"===a||"reset"===a||a in n)&&("complete"===a?n.pause().totalProgress(1):"reset"===a?n.restart(!0).pause():n[a]()),zt&&zt(Ae)),!c&&O||(Vt&&c&&Vt(Ae),ge[o]&&ge[o](Ae),se&&(1===d?Ae.kill(!1,1):ge[o]=0),c||ge[o=1===d?1:3]&&ge[o](Ae))):le&&zt&&!v&&zt(Ae)}ot&&(it(l+(T._isFlipped?1:0)),ot(l))},Ae.enable=function(){Ae.enabled||(Ae.enabled=!0,_t(fe,"resize",kt),_t(fe,"scroll",Rt),be&&_t(t,"refreshInit",be),n&&n.add?r.delayedCall(.01,(function(){return A||_||Ae.refresh()}))&&(N=.01)&&(A=_=0):Ae.refresh())},Ae.disable=function(e,n){if(Ae.enabled&&(!1!==e&&Ae.revert(),Ae.enabled=Ae.isActive=!1,n||ht&&ht.pause(),jt=0,c&&(c.uncache=1),be&&wt(t,"refreshInit",be),Pt&&(Pt.pause(),i.tween&&i.tween.kill()),!pe)){for(var r=Mt.length;r--;)if(Mt[r].scroller===fe&&Mt[r]!==Ae)return;wt(fe,"resize",kt),wt(fe,"scroll",Rt)}},Ae.kill=function(t,e){Ae.disable(t,e),Gt&&delete Ct[Gt];var r=Mt.indexOf(Ae);Mt.splice(r,1),r===b&&Ht>0&&b--,n&&(n.scrollTrigger=null,t&&n.render(-1),e||n.kill()),w&&[w,x,T,C].forEach((function(t){return t.parentNode.removeChild(t)})),c&&(c.uncache=1)},Ae.enable()}else this.update=this.refresh=this.kill=L},t.register=function(e){if(!i&&(r=e||D(),N()&&window.document&&(o=window,a=document,s=a.documentElement,u=a.body),r&&(p=r.utils.toArray,d=r.utils.clamp,r.core.globals("ScrollTrigger",t),u))){f=o.requestAnimationFrame||function(t){return setTimeout(t,16)},_t(o,"mousewheel",Rt),c=[o,a,s,u],_t(a,"scroll",Rt);var n,h=u.style,g=h.borderTop;h.borderTop="1px solid #000",n=mt(u),gt.m=Math.round(n.top+gt.sc())||0,dt.m=Math.round(n.left+dt.sc())||0,g?h.borderTop=g:h.removeProperty("border-top"),y=setInterval(It,200),r.delayedCall(.5,(function(){return P=0})),_t(a,"touchcancel",L),_t(u,"touchstart",L),bt(_t,a,"pointerdown,touchstart,mousedown",(function(){return m=1})),bt(_t,a,"pointerup,touchend,mouseup",(function(){return m=0})),A=r.utils.checkPrefix("transform"),Yt.push(A),i=I(),l=r.delayedCall(.2,Vt).pause(),x=[a,"visibilitychange",function(){var t=o.innerWidth,e=o.innerHeight;a.hidden?(_=t,w=e):_===t&&w===e||kt()},a,"DOMContentLoaded",Vt,o,"load",function(){return k||Vt()},o,"resize",kt],V(_t)}return i},t.defaults=function(t){for(var e in t)Et[e]=t[e]},t.kill=function(){j=0,Mt.slice(0).forEach((function(t){return t.kill(1)}))},t.config=function(t){"limitCallbacks"in t&&(O=!!t.limitCallbacks);var e=t.syncInterval;e&&clearInterval(y)||(y=e)&&setInterval(It,e),"autoRefreshEvents"in t&&(V(wt)||V(_t,t.autoRefreshEvents||"none"))},t.scrollerProxy=function(t,e){var n=p(t)[0];F(n)?M.unshift(o,e,u,e,s,e):M.unshift(n,e)},t.matchMedia=function(t){var e,n,r,i,a;for(n in t)r=Nt.indexOf(n),i=t[n],S=n,"all"===n?i():(e=o.matchMedia(n))&&(e.matches&&(a=i()),~r?(Nt[r+1]=Q(Nt[r+1],i),Nt[r+2]=Q(Nt[r+2],a)):(r=Nt.length,Nt.push(n,i,a),e.addListener?e.addListener(Dt):e.addEventListener("change",Dt))),S=0;return Nt},t.clearMatchMedia=function(t){t||(Nt.length=0),(t=Nt.indexOf(t))>=0&&Nt.splice(t,3)},t}();re.version="3.5.0",re.saveStyles=function(t){return t?p(t).forEach((function(t){var e=zt.indexOf(t);e>=0&&zt.splice(e,4),zt.push(t,t.style.cssText,r.core.getCache(t),S)})):zt},re.revert=function(t,e){return Gt(!t,e)},re.create=function(t,e){return new re(t,e)},re.refresh=function(t){return t?kt():Vt(!0)},re.update=Wt,re.maxScroll=function(t,e){return G(t,e?dt:gt)},re.getScrollFunc=function(t,e){return z(p(t)[0],e?dt:gt)},re.getById=function(t){return Ct[t]},re.getAll=function(){return Mt.slice(0)},re.isScrolling=function(){return!!k},re.addEventListener=function(t,e){var n=jt[t]||(jt[t]=[]);~n.indexOf(e)||n.push(e)},re.removeEventListener=function(t,e){var n=jt[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},re.batch=function(t,e){var n,i=[],o={},a=e.interval||.016,s=e.batchMax||1e9,u=function(t,e){var n=[],i=[],o=r.delayedCall(a,(function(){e(n,i),n=[],i=[]})).pause();return function(t){n.length||o.restart(!0),n.push(t.trigger),i.push(t),s<=n.length&&o.progress(1)}};for(n in e)o[n]="on"===n.substr(0,2)&&H(e[n])&&"onRefreshInit"!==n?u(0,e[n]):e[n];return H(s)&&(s=s(),_t(re,"refresh",(function(){return s=e.batchMax()}))),p(t).forEach((function(t){var e={};for(n in o)e[n]=o[n];e.trigger=t,i.push(re.create(e))})),i},re.sort=function(t){return Mt.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},D()&&r.registerPlugin(re)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(1),i=n(2),o=n(185),a=function(){function t(e,n){Object(r.a)(this,t),this.name=e,this.type=n,this.sampleSize=1,this.reset()}return Object(i.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(o.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(o.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),s=function(){function t(e){var n=e.id,i=e.stats;Object(r.a)(this,t),this.id=n,this.stats={},this._initializeStats(i),Object.seal(this)}return Object(i.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof a?t:new a(e,n)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),t}()},function(t,e,n){"use strict";var r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",i=(e.a={name:"lights",vs:r,fs:r,getUniforms:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if("lightSources"in e){var n=e.lightSources||{},r=n.ambientLight,o=n.pointLights,s=n.directionalLights,u=r||o&&o.length>0||s&&s.length>0;return u?Object.assign({},a({ambientLight:r,pointLights:o,directionalLights:s}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){var c={pointLights:[],directionalLights:[]},l=!0,f=!1,h=void 0;try{for(var p,d=(e.lights||[])[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var g=p.value;switch(g.type){case"ambient":c.ambientLight=g;break;case"directional":c.directionalLights.push(g);break;case"point":c.pointLights.push(g)}}}catch(y){f=!0,h=y}finally{try{l||null==d.return||d.return()}finally{if(f)throw h}}return t({lightSources:c})}return{}},defines:{MAX_LIGHTS:3}},{});function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?[0,0,0]:e,r=t.intensity,i=void 0===r?1:r;return n.map((function(t){return t*i/255}))}function a(t){var e=t.ambientLight,n=t.pointLights,r=void 0===n?[]:n,i=t.directionalLights,a=void 0===i?[]:i,s={};return s["lighting_uAmbientLight.color"]=e?o(e):[0,0,0],r.forEach((function(t,e){s["lighting_uPointLight[".concat(e,"].color")]=o(t),s["lighting_uPointLight[".concat(e,"].position")]=t.position,s["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),s.lighting_uPointLightCount=r.length,a.forEach((function(t,e){s["lighting_uDirectionalLight[".concat(e,"].color")]=o(t),s["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),s.lighting_uDirectionalLightCount=a.length,s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),i=n(2),o=n(10),a=n(196),s=n(36),u="8.3.2",c=new(function(){function t(){Object(r.a)(this,t),this.stats=new Map}return Object(i.a)(t,[{key:"get",value:function(t){return this.stats.has(t)||this.stats.set(t,new a.a({id:t})),this.stats.get(t)}}]),t}());if(s.global.luma&&s.global.luma.VERSION!==u)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(s.global.luma.VERSION," vs ").concat(u));s.global.luma||(Object(s.isBrowser)()&&o.h.log(1,"luma.gl ".concat(u," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),s.global.luma=s.global.luma||{VERSION:u,version:u,log:o.h,stats:c,globals:{modules:{},nodeIO:{}}});s.global.luma},function(t,e,n){var r;!function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),f=Math.round,h=Math.abs,p=Date.now;function d(t,e,n){return setTimeout(_(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var m=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),A=v((function(t,e){return m(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||s,e):t}function x(t,e){return t===s?e:t}function E(t,e,n){y(P(e),(function(e){t.addEventListener(e,n,!1)}))}function O(t,e,n){y(P(e),(function(e){t.removeEventListener(e,n,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function M(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function C(t){return Array.prototype.slice.call(t,0)}function I(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];M(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function R(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var k=1;function j(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var L="ontouchstart"in i,N=R(i,"PointerEvent")!==s,D=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",B="mouse",z=24,U=["x","y"],G=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function q(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i===0,a=12&e&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=H(e));i>1&&!n.firstMultiple?n.firstMultiple=H(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,c=e.center=W(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Z(u,c),e.distance=Q(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=Y(e.deltaX,e.deltaY);var l=X(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=h(l.x)>h(l.y)?l.x:l.y,e.scale=a?(f=a.pointers,d=r,Q(d[0],d[1],G)/Q(f[0],f[1],G)):1,e.rotation=a?function(t,e){return Z(e[1],e[0],G)+Z(t[1],t[0],G)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(u>25||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=X(u,c,l);r=f.x,i=f.y,n=h(f.x)>h(f.y)?f.x:f.y,o=Y(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var f,d;var g=t.element;S(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function H(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:f(t.pointers[n].clientX),clientY:f(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:f(n/e),y:f(r/e)}}function X(t,e,n){return{x:e/t||0,y:n/t||0}}function Y(t,e){return t===e?1:h(t)>=h(e)?t<0?2:4:e<0?8:16}function Q(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function Z(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(j(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(j(this.element),this.evWin,this.domHandler)}};var K={mousedown:1,mousemove:2,mouseup:4},J="mousedown",$="mousemove mouseup";function tt(){this.evEl=J,this.evWin=$,this.pressed=!1,V.apply(this,arguments)}b(tt,V,{handler:function(t){var e=K[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:B,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},nt={2:F,3:"pen",4:B,5:"kinect"},rt="pointerdown",it="pointermove pointerup pointercancel";function ot(){this.evEl=rt,this.evWin=it,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(rt="MSPointerDown",it="MSPointerMove MSPointerUp MSPointerCancel"),b(ot,V,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=et[r],o=nt[t.pointerType]||t.pointerType,a=o==F,s=M(e,t.pointerId,"pointerId");1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",ut="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=st,this.evWin=ut,this.started=!1,V.apply(this,arguments)}function lt(t,e){var n=C(t.touches),r=C(t.changedTouches);return 12&e&&(n=I(n.concat(r),"identifier",!0)),[n,r]}b(ct,V,{handler:function(t){var e=at[t.type];if(1===e&&(this.started=!0),this.started){var n=lt.call(this,t,e);12&e&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}}});var ft={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function pt(){this.evTarget=ht,this.targetIds={},V.apply(this,arguments)}function dt(t,e){var n=C(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=C(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return S(t.target,u)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&e&&delete r[a[i].identifier],i++;return s.length?[I(o.concat(s),"identifier",!0),s]:void 0}b(pt,V,{handler:function(t){var e=ft[t.type],n=dt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}});function gt(){V.apply(this,arguments);var t=_(this.handler,this);this.touch=new pt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function yt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,vt.call(this,e)):12&t&&vt.call(this,e)}function vt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function mt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}b(gt,V,{handler:function(t,e,n){var r=n.pointerType==F,i=n.pointerType==B;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)yt.call(this,e,n);else if(i&&mt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var At=R(l.style,"touchAction"),bt=At!==s,_t="compute",wt="auto",xt="manipulation",Et="none",Ot="pan-x",St="pan-y",Tt=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Pt(t,e){this.manager=t,this.set(e)}Pt.prototype={set:function(t){t==_t&&(t=this.compute()),bt&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[At]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,Et))return Et;var e=T(t,Ot),n=T(t,St);if(e&&n)return Et;if(e||n)return e?Ot:St;if(T(t,xt))return xt;return wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=T(r,Et)&&!Tt.none,o=T(r,St)&&!Tt["pan-y"],a=T(r,Ot)&&!Tt["pan-x"];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&6&n||a&&n&z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Mt=32;function Ct(t){this.options=u({},this.defaults,t||{}),this.id=k++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function It(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Rt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function kt(t,e){var n=e.manager;return n?n.get(t):t}function jt(){Ct.apply(this,arguments)}function Lt(){jt.apply(this,arguments),this.pX=null,this.pY=null}function Nt(){jt.apply(this,arguments)}function Dt(){Ct.apply(this,arguments),this._timer=null,this._input=null}function Ft(){jt.apply(this,arguments)}function Bt(){jt.apply(this,arguments)}function zt(){Ct.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ut(t,e){return(e=e||{}).recognizers=x(e.recognizers,Ut.defaults.preset),new Gt(t,e)}Ct.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=kt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=kt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=kt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=kt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+It(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+It(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Mt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Mt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(jt,Ct,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:Mt}}),b(Lt,jt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(St),t&z&&e.push(Ot),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return jt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Rt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Nt,jt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Dt,Ct,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Mt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),b(Ft,jt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(Bt,jt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Lt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Rt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(zt,Ct,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||Q(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Mt},failTimeout:function(){return this._timer=d((function(){this.state=Mt}),this.options.interval,this),Mt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ut.VERSION="2.0.7",Ut.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Nt,{enable:!1},["rotate"]],[Bt,{direction:6}],[Lt,{direction:6},["swipe"]],[zt],[zt,{event:"doubletap",taps:2},["tap"]],[Dt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Gt(t,e){var n;this.options=u({},Ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?ot:D?pt:L?gt:tt))(n,q),this.touchAction=new Pt(this,this.options.touchAction),Vt(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Vt(t,e){var n,r=t.element;r.style&&(y(t.options.cssProps,(function(i,o){n=R(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Gt.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Ct)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=M(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return y(P(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return y(P(t),(function(t){e?n[t]&&n[t].splice(M(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Ut,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Mt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:z,DIRECTION_ALL:30,Manager:Gt,Input:V,TouchAction:Pt,TouchInput:pt,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:gt,SingleTouchInput:ct,Recognizer:Ct,AttrRecognizer:jt,Tap:zt,Pan:Lt,Swipe:Bt,Pinch:Nt,Rotate:Ft,Press:Dt,on:E,off:O,each:y,merge:A,extend:m,assign:u,inherit:b,bindFn:_,prefixed:R}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=Ut,(r=function(){return Ut}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},,function(t,e,n){"use strict";var r=n(498),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(e),g=u(n),y=0;y<a.length;++y){var v=a[y];if(!o[v]&&(!r||!r[v])&&(!g||!g[v])&&(!s||!s[v])){var m=h(n,v);try{c(e,v,m)}catch(A){}}}}return e}},,,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t.default:t}var i=r(n(434)),o=r(n(435)),a=n(264),s=n(436),u=n(329);function c(t){switch(t.type){case"Polygon":return o(t)>1?t:null;case"MultiPolygon":var e=[];if(u.flattenEach(t,(function(t){o(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}t.exports=function(t,e){var n=s.getGeom(t),r=s.getGeom(e),o=t.properties||{};if(n=c(n),r=c(r),!n)return null;if(!r)return a.feature(n,o);var u=i.diff(n.coordinates,r.coordinates);return 0===u.length?null:1===u.length?a.polygon(u[0],o):a.multiPolygon(u,o)}},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GeoJsonEditMode",{enumerable:!0,get:function(){return o.GeoJsonEditMode}}),Object.defineProperty(e,"ModifyMode",{enumerable:!0,get:function(){return a.ModifyMode}}),Object.defineProperty(e,"TranslateMode",{enumerable:!0,get:function(){return s.TranslateMode}}),Object.defineProperty(e,"ScaleMode",{enumerable:!0,get:function(){return u.ScaleMode}}),Object.defineProperty(e,"RotateMode",{enumerable:!0,get:function(){return c.RotateMode}}),Object.defineProperty(e,"DuplicateMode",{enumerable:!0,get:function(){return l.DuplicateMode}}),Object.defineProperty(e,"ExtendLineStringMode",{enumerable:!0,get:function(){return f.ExtendLineStringMode}}),Object.defineProperty(e,"SplitPolygonMode",{enumerable:!0,get:function(){return h.SplitPolygonMode}}),Object.defineProperty(e,"ExtrudeMode",{enumerable:!0,get:function(){return p.ExtrudeMode}}),Object.defineProperty(e,"ElevationMode",{enumerable:!0,get:function(){return d.ElevationMode}}),Object.defineProperty(e,"TransformMode",{enumerable:!0,get:function(){return g.TransformMode}}),Object.defineProperty(e,"DrawPointMode",{enumerable:!0,get:function(){return y.DrawPointMode}}),Object.defineProperty(e,"DrawLineStringMode",{enumerable:!0,get:function(){return v.DrawLineStringMode}}),Object.defineProperty(e,"DrawPolygonMode",{enumerable:!0,get:function(){return m.DrawPolygonMode}}),Object.defineProperty(e,"DrawRectangleMode",{enumerable:!0,get:function(){return A.DrawRectangleMode}}),Object.defineProperty(e,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return b.DrawCircleByDiameterMode}}),Object.defineProperty(e,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return _.DrawCircleFromCenterMode}}),Object.defineProperty(e,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return w.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(e,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return x.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(e,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return E.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(e,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return O.Draw90DegreePolygonMode}}),Object.defineProperty(e,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return S.DrawPolygonByDraggingMode}}),Object.defineProperty(e,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return T.ImmutableFeatureCollection}}),Object.defineProperty(e,"ViewMode",{enumerable:!0,get:function(){return P.ViewMode}}),Object.defineProperty(e,"MeasureDistanceMode",{enumerable:!0,get:function(){return M.MeasureDistanceMode}}),Object.defineProperty(e,"MeasureAreaMode",{enumerable:!0,get:function(){return C.MeasureAreaMode}}),Object.defineProperty(e,"MeasureAngleMode",{enumerable:!0,get:function(){return I.MeasureAngleMode}}),Object.defineProperty(e,"CompositeMode",{enumerable:!0,get:function(){return R.CompositeMode}}),Object.defineProperty(e,"SnappableMode",{enumerable:!0,get:function(){return k.SnappableMode}}),Object.defineProperty(e,"_memoize",{enumerable:!0,get:function(){return j.default}}),e.utils=void 0;var i,o=n(54),a=n(268),s=n(270),u=n(337),c=n(338),l=n(454),f=n(455),h=n(456),p=n(458),d=n(459),g=n(460),y=n(461),v=n(462),m=n(273),A=n(463),b=n(464),_=n(465),w=n(466),x=n(467),E=n(468),O=n(469),S=n(470),T=n(109),P=n(472),M=n(473),C=n(474),I=n(476),R=n(339),k=n(478),j=(i=n(274))&&i.__esModule?i:{default:i},L=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=N();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(71));function N(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return N=function(){return t},t}e.utils=L},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(122);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44);e.default=function(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),o=Number(t[2]),a=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i],u=[n,a],c=[o,a],l=[o,i];return r.polygon([[s,l,c,u,s]],e.properties,{bbox:t,id:e.id})}},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoClickPolygonMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,t);var e,n,r,f,h=(e=p,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function p(){return i(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"handleClick",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw||(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"handleStartDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),t.cancelPan())}},{key:"handleStopDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"checkAndFinishPolygon",value:function(t){var e=this.getClickSequence(),n=this.getTentativeGuide(t);if(e.length>1&&n&&"Polygon"===n.geometry.type){var r={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},i=this.getAddFeatureOrBooleanPolygonAction(r,t);this.resetClickSequence(),i&&t.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=r[0],a=e.mapCoords,s=this.getTwoClickPolygon(o,a,n);return s&&i.features.push({type:"Feature",properties:{shape:s.properties&&s.properties.shape,guideType:"tentative"},geometry:s.geometry}),i}},{key:"getTwoClickPolygon",value:function(t,e,n){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),a(c(p.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length&&(e=this.getTwoClickPolygon(r[0],i[0],t.modeConfig)),e}}])&&o(n.prototype,r),f&&o(n,f),p}(n(54).GeoJsonEditMode);e.TwoClickPolygonMode=f},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(t))return e;return[255*t[0],255*t[1],255*t[2],255*t[3]]},e.recursivelyTraverseNestedArrays=function t(e,n,i){if(!Array.isArray(e[0]))return!0;for(var o=0;o<e.length;o++)if(t(e[o],[].concat(function(t){if(Array.isArray(t))return r(t)}(a=n)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(a)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]),i)){i(e,n);break}var a;return!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(n(8)),o=(r=n(14))&&r.__esModule?r:{default:r},a=n(112),s=n(375);function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=a.Util.camelCase,A=function(t,e){return!(!i.default.isValidElement(t)||!t.type||t.type.displayName!==e)};var b=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(s,t);var e,n,r,o=p(s);function s(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),v(g(n=o.call(this,t,e)),"getContext",(function(){return n.context||{}})),v(g(n),"onIntersect",(function(){n.setState({isInView:!0})})),v(g(n),"getExtendedProps",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.getContext();return s.normalizeOptions(e,t)})),v(g(n),"attachRef",(function(t){var e=n.props.innerRef;n.element.current=t,e&&(e instanceof Function?e(t):e.current=t)})),n.element=(0,i.createRef)(),n}return e=s,r=[{key:"normalizeOptions",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return Object.keys(e||{}).forEach((function(n){var r=e[n];null!==r&&void 0!==r&&(t[n]=r)})),t}),{})}}],(n=[{key:"render",value:function(){return null}},{key:"getChildPlaceholder",value:function(t){if(t)return i.default.Children.toArray(t).find((function(t){return A(t,"CloudinaryPlaceholder")}))}},{key:"getChildTransformations",value:function(t){var e=this,n=t?i.default.Children.toArray(t).filter((function(t){return A(t,"CloudinaryTransformation")})).map((function(t){var n=s.normalizeOptions(t.props,t.context),r=e.getChildTransformations(t.props.children);return r&&(n.transformation=r),n})):[];return n.length?n:null}},{key:"getTransformation",value:function(t){var e=t.children,n=t.accessibility,r=t.placeholder,i=l(t,["children","accessibility","placeholder"]),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t?e.reduce((function(e,n){return n in t&&(e[n]=t[n]),e}),{}):t}(a.Util.withCamelCaseKeys(i),a.Transformation.methods)||{},s=this.getChildTransformations(e);a.Util.isEmpty(s)||(o.transformation=s);var u={accessibility:n,placeholder:r};return Object.keys(u).filter((function(t){return u[t]})).map((function(t){o[t]=u[t]})),o}},{key:"getConfiguredCloudinary",value:function(t){var e=a.Util.extractUrlParams(a.Util.withSnakeCaseKeys(t));return Cloudinary.new(e)}},{key:"getUrl",value:function(t){var e=t.publicId;return getConfiguredCloudinary(t).url(e,this.getTransformation(t))}}])&&f(e.prototype,n),r&&f(e,r),s}(i.PureComponent);v(b,"contextType",s.CloudinaryContextType),b.propTypes=function(t){t=t||[];for(var e={},n=0;n<t.length;n++){var r=t[n];e[m(r)]=o.default.any}return e}(a.Transformation.PARAM_NAMES.map(m)),b.propTypes.publicId=o.default.string;var _=b;e.default=_},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(534),i=n(535),o=n(536),a=n(537),s=n(538);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(214);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(133)(Object,"create");t.exports=r},function(t,e,n){var r=n(552);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(587),i=n(588),o=n(589);t.exports=function(t,e,n){return e===e?o(t,e,n):r(t,i,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),i=n.n(r),o=n(11),a=n(1),s=n(2),u=n(234),c=function(){function t(e){var n=e.source,r=e.name,i=void 0===r?"unnamed":r,o=e.maxConcurrency,s=void 0===o?1:o,u=e.onMessage,c=e.onDebug,l=void 0===c?function(){}:c,f=e.reuseWorkers,h=void 0===f||f;Object(a.a)(this,t),this.source=n,this.name=i,this.maxConcurrency=s,this.onMessage=u,this.onDebug=l,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=h}return Object(s.a)(t,[{key:"destroy",value:function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(t,e){var n=this;return new Promise((function(r,i){n.jobQueue.push({data:t,jobName:e,resolve:r,reject:i}),n._startQueuedJob()}))}},{key:"_startQueuedJob",value:function(){var t=Object(o.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.jobQueue.length){t.next=2;break}return t.abrupt("return");case 2:if(e=this._getAvailableWorker()){t.next=5;break}return t.abrupt("return");case 5:return n=this.jobQueue.shift(),this.onDebug({message:"processing",worker:e.name,job:n.jobName,backlog:this.jobQueue.length}),t.prev=7,t.t0=n,t.next=11,e.process(n.data);case 11:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=18;break;case 15:t.prev=15,t.t2=t.catch(7),n.reject(t.t2);case 18:return t.prev=18,this._onWorkerDone(e),t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[7,15,18,21]])})));return function(){return t.apply(this,arguments)}}()},{key:"_onWorkerDone",value:function(t){this.isDestroyed?t.destroy():(this.reuseWorkers?this.idleQueue.push(t):(t.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new u.a({source:this.source,onMessage:this.onMessage,name:t})}return null}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(22);function i(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=n||new Set;if(t){if(o(t))a.add(t);else if(o(t.buffer))a.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===Object(r.a)(t))for(var s in t)i(t[s],e,a)}else;return void 0===n?Array.from(a):[]}function o(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t,e){if(!e)return t;var n=Object.assign({},t,e);if("defines"in e&&(n.defines=Object.assign({},t.defines,e.defines)),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((function(t){return"project64"===t.name})))){var o=n.modules.findIndex((function(t){return"project32"===t.name}));o>=0&&n.modules.splice(o,1)}if("inject"in e)if(t.inject){var a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.inject);for(var s in e.inject)a[s]=(a[s]||"")+e.inject[s];n.inject=a}else n.inject=e.inject;return n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(22);function i(t){if(null===(e=t)||"object"!==Object(r.a)(e))throw new Error("count(): argument not an object");var e;if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===Object(r.a)(t)&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1),i=[255,255,255],o=0,a=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.color,a=void 0===n?i:n,s=e.intensity,u=void 0===s?1:s;this.id=e.id||"ambient-".concat(o++),this.color=a,this.intensity=u,this.type="ambient"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(86),c=n(150),l=n(151);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var h=function(t){Object(o.a)(n,t);var e=f(n);function n(t){return Object(r.a)(this,n),e.call(this,Object.assign({},t,{type:c.a}))}return Object(i.a)(n,[{key:"controller",get:function(){return this._getControllerProps({type:l.b})}}]),n}(u.a);h.displayName="MapView"},function(t,e,n){"use strict";n.d(e,"a",(function(){return rt}));var r=n(1),i=n(2),o=n(0),a=n(12),s=n(15),u=n(5),c=n(6),l=n(3),f=n(631),h=n(301),p=n(53);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function(){function t(e,n){Object(r.a)(this,t),this.opts=n,this.source=e}return Object(i.a)(t,[{key:"getValue",value:function(){var t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];var n=this.source.value,r=e.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var o=e.elementOffset||0,a=0;a<r;++a)i[a]=n[o+a]}return i}},{key:"getAccessor",value:function(){return g(g({},this.source.getAccessor()),this.opts)}},{key:"value",get:function(){return this.source.value}}]),t}();var v=n(95),m=n(55),A=n(26);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t){return t.stride||t.size*t.bytesPerElement}function x(t,e){e.offset&&A.a.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=w(t),r=("vertexOffset"in e?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return _(_({},e),{},{offset:r,stride:n})}var E=function(){function t(e,n){Object(r.a)(this,t),this.gl=e,this.id=n.id,this.size=n.size;var i=n.logicalType||n.type,o=5130===i,a=n.defaultValue;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),n.defaultValue=a;var s=i;o?s=5126:!s&&n.isIndexed?s=e&&Object(f.b)(e,h.a.ELEMENT_INDEX_UINT32)?5125:5123:s||(s=5126),n.logicalType=i,n.type=s;var u=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||s||5126);this.shaderAttributes={},this.doublePrecision=o,o&&!1===n.fp64&&(u=Float32Array),n.bytesPerElement=u.BYTES_PER_ELEMENT,this.defaultType=u,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,constant:!1},this._buffer=null,this.setData(n)}return Object(i.a)(t,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),v.a.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(t,e){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i=function(t,e){var n=x(t,e);return{high:n,low:_(_({},n),{},{offset:n.offset+4*t.size})}}(this.getAccessor(),e||{});return n[t]=new y(this,i.high),n["".concat(t,"64Low")]=r?new y(this,i.low):new Float32Array(this.size),n}if(e){var a=x(this.getAccessor(),e);return Object(o.a)({},t,new y(this,a))}return Object(o.a)({},t,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(t){var e=this.state;ArrayBuffer.isView(t)?t={value:t}:t instanceof p.a&&(t={buffer:t});var n=_(_({},this.settings),t);if(e.bufferAccessor=n,t.constant){var r=t.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),!(!e.constant||!this._areValuesEqual(r,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=r}else if(t.buffer){var i=t.buffer;e.externalBuffer=i,e.constant=!1,this.value=t.value;var o=t.value instanceof Float64Array;n.type=t.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),n.stride=w(n)}else if(t.value){this._checkExternalBuffer(t);var a=t.value;e.externalBuffer=null,e.constant=!1,this.value=a,n.bytesPerElement=a.BYTES_PER_ELEMENT,n.stride=w(n);var s=this.buffer,u=this.byteOffset;this.doublePrecision&&a instanceof Float64Array&&(a=Object(m.f)(a,n));var c=a.byteLength+u+2*n.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:a,offset:u}),n.type=t.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.value,n=t.startOffset,r=void 0===n?0:n,i=t.endOffset;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?Object(m.f)(e,{size:this.size,startIndex:r,endIndex:i}):e.subarray(r,i),offset:r*e.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(t){var e=t.numInstances,n=t.copy,r=void 0!==n&&n,i=this.state,o=i.allocatedValue,a=v.a.allocate(o,e+1,{size:this.size,type:this.defaultType,copy:r});this.value=a;var s=this.buffer,u=this.byteOffset;return s.byteLength<a.byteLength+u&&(s.reallocate(a.byteLength+u),r&&o&&s.subData({data:o instanceof Float64Array?Object(m.f)(o,this):o,offset:u})),i.allocatedValue=a,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(t){var e=t.value;if(!t.constant&&e){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||A.a.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((function(t){return(t+128)/255*2-1}));case 5122:return new Float32Array(t).map((function(t){return(t+32768)/65535*2-1}));case 5121:return new Float32Array(t).map((function(t){return t/255}));case 5123:return new Float32Array(t).map((function(t){return t/65535}));default:return t}}},{key:"_normalizeValue",value:function(t,e,n){var r=this.settings,i=r.defaultValue,o=r.size;if(Number.isFinite(t))return e[n]=t,e;if(!t)return e[n]=i[0],e;switch(o){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:for(var a=o;--a>=0;)e[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return e}},{key:"_areValuesEqual",value:function(t,e){if(!t||!e)return!1;for(var n=this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var t=this.settings,e=t.isIndexed,n=t.type;this._buffer=new p.a(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var t=this.getAccessor();return t.vertexOffset?t.vertexOffset*w(t):0}}]),t}(),O=n(35),S=n(73),T=n(94),P=[],M=[[0,1/0]];function C(t,e){if(t===M)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;for(var n=[],r=t.length,i=0,o=0;o<r;o++){var a=t[o];a[1]<e[0]?(n.push(a),i=o+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(i,0,e),n}var I=n(68);function R(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var L=function(t){Object(u.a)(n,t);var e=j(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,n),i=e.call(this,t,o);var a=o.transition,s=void 0!==a&&a,u=o.noAlloc,c=void 0!==u&&u,l=o.update,f=void 0===l?null:l,h=o.accessor,p=void 0===h?null:h,d=o.transform,g=void 0===d?null:d,y=o.startIndices,v=void 0===y?null:y;return Object.assign(i.settings,{transition:s,noAlloc:c,update:f||p&&i._autoUpdater,accessor:p,transform:g}),Object.assign(i.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:M,startIndices:v}),Object.seal(i.settings),Object.seal(i.state),i._validateAttributeUpdaters(),i}return Object(i.a)(n,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearChangedFlags,n=void 0!==e&&e,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var t=this.settings.accessor;return[this.id].concat("function"!==typeof t&&t||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(t){if(!t||!this.supportsTransition())return null;var e=this.settings.accessor,n=this.settings.transition,r=Array.isArray(e)?t[e.find((function(e){return t[e]}))]:t[e];return Object(I.e)(r,n)}},{key:"setNeedsUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){var n=e.startRow,r=void 0===n?0:n,i=e.endRow,o=void 0===i?1/0:i;this.state.updateRanges=C(this.state.updateRanges,[r,o])}else this.state.updateRanges=M}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=P}},{key:"setNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}},{key:"update",value:function(t){this.setData(t)}},{key:"allocate",value:function(t){var e=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&(Object(O.a)(Number.isFinite(t)),Object(s.a)(Object(l.a)(n.prototype),"allocate",this).call(this,{numInstances:t,copy:e.updateRanges!==M}),!0))}},{key:"updateBuffer",value:function(t){var e=t.numInstances,r=t.data,i=t.props,o=t.context;if(!this.needsUpdate())return!1;var u=this.state.updateRanges,c=this.settings,f=c.update,h=c.noAlloc,p=!0;if(f){var d,g=R(u);try{for(g.s();!(d=g.n()).done;){var y=Object(a.a)(d.value,2),v=y[0],m=y[1];f.call(o,this,{data:r,startRow:v,endRow:m,props:i,numInstances:e})}}catch(S){g.e(S)}finally{g.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var A,b=R(u);try{for(b.s();!(A=b.n()).done;){var _=Object(a.a)(A.value,2),w=_[0],x=_[1],E=Number.isFinite(w)?this.getVertexOffset(w):0,O=Number.isFinite(x)?this.getVertexOffset(x):h||!Number.isFinite(e)?this.value.length:e*this.size;Object(s.a)(Object(l.a)(n.prototype),"updateSubBuffer",this).call(this,{startOffset:E,endOffset:O})}}catch(S){b.e(S)}finally{b.f()}}else;this._checkAttributeArray()}else p=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),p}},{key:"setConstantValue",value:function(t){return void 0!==t&&"function"!==typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(t){var e=this.state;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state,r=this.settings;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw(),ArrayBuffer.isView(t)&&(t={value:t});var i=r.transform||e!==this.startIndices;if(i){Object(O.a)(ArrayBuffer.isView(t.value),"invalid ".concat(r.accessor));var o=t.size&&t.size!==this.size;return n.binaryAccessor=Object(S.b)(t.value,{size:t.size||this.size,stride:t.stride,offset:t.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}},{key:"getVertexOffset",value:function(t){var e=this.startIndices;return(e?e[t]:t)*this.size}},{key:"getShaderAttributes",value:function(){var t=this.settings.shaderAttributes||Object(o.a)({},this.id,null),e={};for(var r in t)Object.assign(e,Object(s.a)(Object(l.a)(n.prototype),"getShaderAttributes",this).call(this,r,t[r]));return e}},{key:"_autoUpdater",value:function(t,e){var n=e.data,r=e.startRow,i=e.endRow,o=e.props,a=e.numInstances;if(!t.constant){var s=t.settings,u=t.state,c=t.value,l=t.size,f=t.startIndices,h=s.accessor,p=s.transform,d=u.binaryAccessor||("function"===typeof h?h:o[h]);Object(O.a)("function"===typeof d,'accessor "'.concat(h,'" is not a function'));var g,y=t.getVertexOffset(r),v=Object(S.a)(n,r,i),m=v.iterable,A=v.objectInfo,b=R(m);try{for(b.s();!(g=b.n()).done;){var _=g.value;A.index++;var w=d(_,A);if(p&&(w=p.call(this,w)),f){var x=(A.index<f.length-1?f[A.index+1]:a)-f[A.index];if(w&&Array.isArray(w[0])){var E,P=y,M=R(w);try{for(M.s();!(E=M.n()).done;){var C=E.value;t._normalizeValue(C,c,P),P+=l}}catch(I){M.e(I)}finally{M.f()}}else w&&w.length>l?c.set(w,y):(t._normalizeValue(w,A.target,0),Object(T.a)({target:c,source:A.target,start:y,count:x}));y+=x*l}else t._normalizeValue(w,c,y),y+=l}}catch(I){b.e(I)}finally{b.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var t=this.settings;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var t=this.value,e=Math.min(4,this.size);if(t&&t.length>=e){var n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(t){this.state.startIndices=t}}]),n}(E),N=n(49),D=n(652),F=n(102);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V=function(){function t(e){var n=e.gl,i=e.attribute,o=e.timeline;Object(r.a)(this,t),this.gl=n,this.type="interpolation",this.transition=new F.a(o),this.attribute=i,this.attributeInTransition=new L(n,i.settings),this.currentStartIndices=i.startIndices,this.currentLength=0,this.transform=function(t,e){var n=Object(I.c)(e.size);return new D.a(t,{vs:q,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,i);var a={byteLength:0,usage:35050};this.buffers=[new p.a(n,a),new p.a(n,a)]}return Object(i.a)(t,[{key:"start",value:function(t,e){if(t.duration<=0)this.transition.cancel();else{var n=this.gl,r=this.buffers,i=this.attribute;Object(I.a)(r);var o,a={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},s=U(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;Object(I.f)(z({buffer:u},a))}}catch(c){s.e(c)}finally{s.f()}this.currentStartIndices=i.startIndices,this.currentLength=Object(I.b)(i,e),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:Object(I.d)(n,i)},feedbackBuffers:{vCurrent:r[1]}})}}},{key:"update",value:function(){var t=this.transition.update();if(t){var e=this.transition,n=e.time,r=e.settings,i=r.duration,o=(0,r.easing)(n/i);this.transform.run({uniforms:{time:o}})}return t}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),t}(),q="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";var H=n(307),W=n(167),X=n(101);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var J={interpolation:V,spring:function(){function t(e){var n=e.gl,i=e.attribute,a=e.timeline;Object(r.a)(this,t),this.gl=n,this.type="spring",this.transition=new F.a(a),this.attribute=i,this.attributeInTransition=new L(n,Object.assign({},i.settings,{normalized:!1})),this.currentStartIndices=i.startIndices,this.currentLength=0,this.texture=function(t){return new W.a(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(t,e){return new X.a(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(o.a)({},36064,e)})}(n,this.texture),this.transform=function(t,e,n){var r=Object(I.c)(e.size);return new D.a(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,i,this.framebuffer);var s={byteLength:0,usage:35050};this.buffers=[new p.a(n,s),new p.a(n,s),new p.a(n,s)]}return Object(i.a)(t,[{key:"start",value:function(t,e){var n,r=this.gl,i=this.buffers,o=this.attribute,a={numInstances:e,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},s=Z(i);try{for(s.s();!(n=s.n()).done;){var u=n.value;Object(I.f)(Q({buffer:u},a))}}catch(c){s.e(c)}finally{s.f()}this.currentStartIndices=o.startIndices,this.currentLength=Object(I.b)(o,e),this.attributeInTransition.update({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:Object(I.d)(r,o)}})}},{key:"update",value:function(){var t=this.buffers,e=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Object(I.a)(t),this.attributeInTransition.update({buffer:t[1],value:this.attribute.value}),Object(H.c)(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),t}()},$=function(){function t(e,n){var i=n.id,o=n.timeline;Object(r.a)(this,t),this.id=i,this.gl=e,this.timeline=o,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=D.a.isSupported(e)}return Object(i.a)(t,[{key:"finalize",value:function(){for(var t in this.transitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,n=t.transitions,r=t.numInstances;for(var i in this.numInstances=r||1,e){var o=e[i],a=o.getTransitionSetting(n);a&&this._updateAttribute(i,o,a)}for(var s in this.transitions){var u=e[s];u&&u.getTransitionSetting(n)||this._removeTransition(s)}}},{key:"hasAttribute",value:function(t){var e=this.transitions[t];return e&&e.inProgress}},{key:"getAttributes",value:function(){var t={};for(var e in this.transitions){var n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}var e=this.needsRedraw;return this.needsRedraw=!1,e}},{key:"_removeTransition",value:function(t){this.transitions[t].cancel(),delete this.transitions[t]}},{key:"_updateAttribute",value:function(t,e,n){var r=this.transitions[t],i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void A.a.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);var o=J[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(A.a.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}]),t}(),tt="attributeManager.invalidate",et="attributeManager.updateStart",nt="attributeManager.updateEnd",rt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.id,o=void 0===i?"attribute-manager":i,a=n.stats,s=n.timeline;Object(r.a)(this,t),this.id=o,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=a,this.attributeTransitionManager=new $(e,{id:"".concat(o,"-transitions"),timeline:s}),Object.seal(this)}return Object(i.a)(t,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(t,e){var n=this._invalidateTrigger(t,e);Object(N.a)(tt,this,t,n)}},{key:"invalidateAll",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);Object(N.a)(tt,this,"all")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.startIndices,i=void 0===r?null:r,o=t.transitions,a=t.props,s=void 0===a?{}:a,u=t.buffers,c=void 0===u?{}:u,l=t.context,f=void 0===l?{}:l,h=!1;for(var p in Object(N.a)(et,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var d=this.attributes[p],g=d.settings.accessor;d.startIndices=i,s[p]&&A.a.removed("props.".concat(p),"data.attributes.".concat(p))(),d.setExternalBuffer(c[p])||d.setBinaryValue(c[g],e.startIndices)||!c[g]&&d.setConstantValue(s[g])||d.needsUpdate()&&(h=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:f})),this.needsRedraw|=d.needsRedraw()}h&&Object(N.a)(nt,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:o})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in e){var o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}},{key:"getShaderAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());var n={};for(var r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&A.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var i in t){var o=t[i],a=this._createAttribute(i,o,n);r[i]=a}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,e,n){var r={id:t,constant:e.constant||!1,isIndexed:e.isIndexed||e.elements,size:e.elements?1:e.size,value:e.value||null,divisor:e.instanced||n.instanced?1:e.divisor};return new L(this.gl,Object.assign({},e,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},n=function(n){t.attributes[n].getUpdateTriggers().forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t,e){var n=this.attributes,r=this.updateTriggers[t];return r&&r.forEach((function(t){var r=n[t];r&&r.setNeedsUpdate(r.id,e)})),r}},{key:"_updateAttribute",value:function(t){var e=t.attribute,n=t.numInstances;Object(N.a)("attribute.updateStart",e),e.allocate(n)&&Object(N.a)("attribute.allocate",e,n),e.updateBuffer(t)&&(this.needsRedraw=!0,Object(N.a)("attribute.updateEnd",e,n))}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(315),l=n(658),f=n(316),h=n(153),p=n(252),d=n(0),g=n(26),y=n(143);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var b=function(t){Object(a.a)(n,t);var e=A(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,n);var i=t.id,o=void 0===i?Object(y.c)("column-geometry"):i,a=_(t),s=a.indices,u=a.attributes;return e.call(this,m(m({},t),{},{id:o,indices:s,attributes:u}))}return n}(n(87).a);function _(t){var e=t.radius,n=t.height,r=void 0===n?1:n,i=t.nradial,o=void 0===i?10:i,a=t.vertices;g.a.assert(!a||a.length>=o);for(var s=o+1,u=3*s,c=2*Math.PI/o,l=new Uint16Array(3*o*2),f=new Float32Array(3*u),h=new Float32Array(3*u),p=0,d=0;d<s;d++)for(var y=d*c,v=a&&a[d%o],m=a&&a[(d+1)%o],A=Math.sin(y),b=Math.cos(y),_=0;_<2;_++)f[p+0]=v?v[0]:b*e,f[p+1]=v?v[1]:A*e,f[p+2]=(.5-_)*r,h[p+0]=v?m[0]-v[0]:b,h[p+1]=v?m[1]-v[1]:A,p+=3;for(var w=0;w<s;w++){var x=Math.floor(w/2)*Math.sign(w%2-.5),E=x*c,O=a&&a[(x+o)%o],S=Math.sin(E),T=Math.cos(E);f[p+0]=O?O[0]:T*e,f[p+1]=O?O[1]:S*e,f[p+2]=r/2,h[p+2]=1,p+=3}for(var P=0,M=0;M<o;M++)l[P++]=2*M+0,l[P++]=2*M+2,l[P++]=2*M+0,l[P++]=2*M+1,l[P++]=2*M+1,l[P++]=2*M+3;return{indices:l,attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:h}}}}function w(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var x=[0,0,0,255],E={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(t){return t.position}},getFillColor:{type:"accessor",value:x},getLineColor:{type:"accessor",value:x},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},O=function(t){Object(a.a)(n,t);var e=w(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){return Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio += sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  geometry.pickingColor = instancePickingColors;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:x},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:x},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i});var a=i.extensionsChanged;if(a){var s=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)}),this.getAttributeManager().invalidateAll()}(a||e.diskResolution!==r.diskResolution||e.vertices!==r.vertices)&&this._updateGeometry(e)}},{key:"getGeometry",value:function(t,e){var n=new b({radius:1,height:2,vertices:e,nradial:t}),r=0;if(e)for(var i=0;i<t;i++){var o=e[i];r+=Math.sqrt(o[0]*o[0]+o[1]*o[1])/t}else r=1;return this.setState({edgeDistance:Math.cos(Math.PI/t)*r}),n}},{key:"_getModel",value:function(t){return new p.a(t,Object.assign({},this.getShaders(),{id:this.props.id,isInstanced:!0}))}},{key:"_updateGeometry",value:function(t){var e=t.diskResolution,n=t.vertices,r=this.getGeometry(e,n);this.setState({fillVertexCount:r.attributes.POSITION.value.length/3,wireframeVertexCount:r.indices.value.length}),this.state.model.setProps({geometry:r})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.lineWidthUnits,o=r.lineWidthScale,a=r.lineWidthMinPixels,s=r.lineWidthMaxPixels,u=r.elevationScale,c=r.extruded,l=r.filled,f=r.stroked,h=r.wireframe,p=r.offset,d=r.coverage,g=r.radius,y=r.angle,v=this.state,m=v.model,A=v.fillVertexCount,b=v.wireframeVertexCount,_=v.edgeDistance,w="pixels"===i?n.metersPerPixel:1;m.setUniforms(Object.assign({},e,{radius:g,angle:y/180*Math.PI,offset:p,extruded:c,coverage:d,elevationScale:u,edgeDistance:_,widthScale:o*w,widthMinPixels:a,widthMaxPixels:s})),c&&h&&(m.setProps({isIndexed:!0}),m.setVertexCount(b).setDrawMode(1).setUniforms({isStroke:!0}).draw()),l&&(m.setProps({isIndexed:!1}),m.setVertexCount(A).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!c&&f&&(m.setProps({isIndexed:!1}),m.setVertexCount(2*A/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}]),n}(h.a);O.layerName="ColumnLayer",O.defaultProps=E},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(315),l=n(316),f=n(153),h=n(252),p=n(87);function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var g=[0,0,0,255],y={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:g},getLineColor:{type:"accessor",value:g},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},v=function(t){Object(a.a)(n,t);var e=d(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){return Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.radiusUnits,o=r.radiusScale,a=r.radiusMinPixels,s=r.radiusMaxPixels,u=r.stroked,c=r.filled,l=r.lineWidthUnits,f=r.lineWidthScale,h=r.lineWidthMinPixels,p=r.lineWidthMaxPixels,d="pixels"===i?n.metersPerPixel:1,g="pixels"===l?n.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({stroked:u?1:0,filled:c,radiusScale:o*d,radiusMinPixels:a,radiusMaxPixels:s,lineWidthScale:f*g,lineWidthMinPixels:h,lineWidthMaxPixels:p}).draw()}},{key:"_getModel",value:function(t){return new h.a(t,Object.assign(this.getShaders(),{id:this.props.id,geometry:new p.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),n}(f.a);v.layerName="ScatterplotLayer",v.defaultProps=y},function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var r=n(1),i=n(2),o=n(648),a=n(153),s=n(50),u=n(26),c=n(49),l=n(94),f=n(196),h=n(649);function p(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g=function(){function t(e,n,i){Object(r.a)(this,t),this.id=e,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(n)}return Object(i.a)(t,[{key:"subscribe",value:function(t){this._subscribers.add(t)}},{key:"unsubscribe",value:function(t){this._subscribers.delete(t)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var t=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((function(){return t.getData()}))}},{key:"setData",value:function(t,e){var n=this;if(t!==this._data||e){this._data=t;var r=++this._loadCount,i=t;"string"===typeof t&&(i=Object(h.a)(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((function(t){n._loadCount===r&&(n.isLoaded=!0,n._error=null,n._content=t)})).catch((function(t){n._loadCount===r&&(n.isLoaded=!0,n._error=t||!0)}))):(this.isLoaded=!0,this._error=null,this._content=t);var o,a=p(this._subscribers);try{for(a.s();!(o=a.n()).done;){o.value.onChange(this.getData())}}catch(s){a.e(s)}finally{a.f()}}}}]),t}(),y=function(){function t(e){var n=e.gl,i=e.protocol;Object(r.a)(this,t),this.protocol=i||"resource://",this._context={gl:n,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return Object(i.a)(t,[{key:"contains",value:function(t){return!!t.startsWith(this.protocol)||t in this._resources}},{key:"add",value:function(t){var e=t.resourceId,n=t.data,r=t.forceUpdate,i=void 0!==r&&r,o=t.persistent,a=void 0===o||o,s=this._resources[e];s?s.setData(n,i):(s=new g(e,n,this._context),this._resources[e]=s),s.persistent=a}},{key:"remove",value:function(t){var e=this._resources[t];e&&(e.delete(),delete this._resources[t])}},{key:"unsubscribe",value:function(t){var e=t.consumerId,n=this._consumers[e];if(n){for(var r in n){var i=n[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}},{key:"subscribe",value:function(t){var e=t.resourceId,n=t.onChange,r=t.consumerId,i=t.requestId,o=void 0===i?"default":i,a=this._resources,s=this.protocol;e.startsWith(s)&&(a[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));var u=a[e];if(this._track(r,o,u,n),u)return u.getData()}},{key:"prune",value:function(){var t=this;this._pruneRequest||(this._pruneRequest=setTimeout((function(){return t._prune()}),0))}},{key:"finalize",value:function(){for(var t in this._resources)this._resources[t].delete()}},{key:"_track",value:function(t,e,n,r){var i=this._consumers,o=i[t]=i[t]||{},a=o[e]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[e]=a,a.onChange=r,a.resource=n,n.subscribe(a))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var t=0,e=Object.keys(this._resources);t<e.length;t++){var n=e[t],r=this._resources[n];r.persistent||r.inUse()||(r.delete(),delete this._resources[n])}}}]),t}(),v=n(59),m=n(232);function A(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _="layerManager.setLayers",w=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),x=function(t){return t instanceof a.a?"".concat(t):t?"invalid":"null"},E=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.deck,a=n.stats,s=n.viewport,u=n.timeline;Object(r.a)(this,t),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new y({gl:e,protocol:"deck://"}),this.context=Object.assign({},w,{layerManager:this,gl:e,deck:i,programManager:e&&Object(m.a)(e),stats:a||new f.a({id:"deck.gl"}),viewport:s||new v.a({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:u||new o.a,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"finalize",value:function(){this.resourceManager.finalize();var t,e=A(this.layers);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._finalizeLayer(n)}}catch(r){e.e(r)}finally{e.f()}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n,r=A(this.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.getNeedsRedraw(t);e=e||o}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.layerIds,n=void 0===e?null:e;return n?this.layers.filter((function(t){return n.find((function(e){return 0===t.id.indexOf(e)}))})):this.layers}},{key:"setProps",value:function(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&this.setLayers(t.layers),"onError"in t&&(this._onError=t.onError)}},{key:"setLayers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||t!==this.lastRenderedLayers;if(Object(c.a)(_,this,n,t),!n)return this;this.lastRenderedLayers=t;var r,i=A(t=Object(l.b)(t,Boolean));try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context}}catch(a){i.e(a)}finally{i.f()}return this._updateLayers(this.layers,t),this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();if(t){this.setNeedsRedraw("updating layers: ".concat(t));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function(t){return Object(c.a)("layerManager.activateViewport",this,t),t&&(this.context.viewport=t),this}},{key:"_handleError",value:function(t,e,n){this._onError?this._onError(e,n):u.a.error("error during ".concat(t," of ").concat(x(n)),e)()}},{key:"_updateLayers",value:function(t,e){var n,r={},i=A(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.id]?u.a.warn("Multiple old layers with same id ".concat(x(o)))():r[o.id]=o}}catch(f){i.e(f)}finally{i.f()}var a=[];this._updateSublayersRecursively(e,r,a),this._finalizeOldLayers(r);for(var s=!1,c=0,l=a;c<l.length;c++){if(l[c].hasUniformTransition()){s=!0;break}}this._needsUpdate=s,this.layers=a}},{key:"_updateSublayersRecursively",value:function(t,e,n){var r,i=A(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context;var a=e[o.id];null===a&&u.a.warn("Multiple new layers with same id ".concat(x(o)))(),e[o.id]=null;var s=null;try{this._debug&&a!==o&&o.validateProps(),a?(this._transferLayerState(a,o),this._updateLayer(o)):this._initializeLayer(o),n.push(o),s=o.isComposite&&o.getSubLayers()}catch(c){this._handleError("matching",c,o)}s&&this._updateSublayersRecursively(s,e,n)}}catch(c){i.e(c)}finally{i.f()}}},{key:"_finalizeOldLayers",value:function(t){for(var e in t){var n=t[e];n&&this._finalizeLayer(n)}}},{key:"_initializeLayer",value:function(t){try{t._initialize(),t.lifecycle=s.a.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}},{key:"_transferLayerState",value:function(t,e){e._transferState(t),e.lifecycle=s.a.MATCHED,e!==t&&(t.lifecycle=s.a.AWAITING_GC)}},{key:"_updateLayer",value:function(t){try{t._update()}catch(e){this._handleError("update",e,t)}}},{key:"_finalizeLayer",value:function(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(x(t)),t.lifecycle=s.a.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=s.a.FINALIZED}catch(e){this._handleError("finalization",e,t)}}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(405);function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},n(139).a],s=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function u(t){var e,n=r.a.getDefaultProgramManager(t),o=i(a);try{for(o.s();!(e=o.n()).done;){var u=e.value;n.addDefaultModule(u)}}catch(h){o.e(h)}finally{o.f()}var c,l=i(s);try{for(l.s();!(c=l.n()).done;){var f=c.value;n.addShaderHook(f)}}catch(h){l.e(h)}finally{l.f()}return n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(0),i=n(1),o=n(2),a=n(49),s=n(5),u=n(6),c=n(3);function l(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var f=function(t){Object(s.a)(n,t);var e=l(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return n}(n(125).a),h=n(249),p=n(101);function d(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(){function t(e){Object(i.a)(this,t),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new f(e),this.pickLayersPass=new h.a(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Object(o.a)(t,[{key:"setProps",value:function(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in t&&(this._onError=t.onError)}},{key:"renderLayers",value:function(t){var e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=this.layerFilter,t.onError=this._onError,t.effects=t.effects||[],t.target=t.target||p.a.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);var n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,r=e.render(v(v({},t),{},{target:n}));this._postRender(t.effects,t),this.renderCount++,Object(a.a)("deckRenderer.renderLayers",this,r,t)}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"finalize",value:function(){var t,e=this.renderBuffers,n=d(e);try{for(n.s();!(t=n.n()).done;){t.value.delete()}}catch(r){n.e(r)}finally{n.f()}e.length=0}},{key:"_preRender",value:function(t,e){var n,r=null,i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.preRender(this.gl,e),o.postRender&&(r=o)}}catch(a){i.e(a)}finally{i.f()}r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}},{key:"_resizeRenderBuffers",value:function(){var t=this.renderBuffers;0===t.length&&t.push(new p.a(this.gl),new p.a(this.gl));var e,n=d(t);try{for(n.s();!(e=n.n()).done;){e.value.resize()}}catch(r){n.e(r)}finally{n.f()}}},{key:"_postRender",value:function(t,e){var n,r=this.renderBuffers,i={inputBuffer:r[0],swapBuffer:r[1],target:null},o=d(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.postRender){if(a===this.lastPostProcessEffect){i.target=e.target,a.postRender(this.gl,i);break}var s=a.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}}catch(u){o.e(u)}finally{o.f()}}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(4),i=n.n(r),o=n(11),a=n(1),s=n(2),u=n(69),c=new Map;function l(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n}")}var f=n(223),h=0;function p(t){var e=t.data;(0,t.resolve)(e)}var d=function(){function t(e){var n=e.source,r=e.name,i=void 0===r?"web-worker-".concat(h++):r,o=e.onMessage;Object(a.a)(this,t);var s=function(t){if(Object(u.a)("string"===typeof t,"worker source"),t.startsWith("url(")&&t.endsWith(")")){var e=t.match(/^url\((.*)\)$/)[1];if(e&&!e.startsWith("http"))return e;t=l(e)}var n=c.get(t);if(!n){var r=new Blob([t],{type:"application/javascript"});n=URL.createObjectURL(r),c.set(t,n)}return n}(n);this.worker=new Worker(s,{name:i}),this.name=i,this.onMessage=o||p}return Object(s.a)(t,[{key:"process",value:function(){var t=Object(o.a)(i.a.mark((function t(e){var n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){n.worker.onmessage=function(e){n.onMessage({worker:n.worker,data:e.data,resolve:t,reject:r})},n.worker.onerror=function(t){var e="".concat(n.name,": WorkerThread.process() failed");t.message&&(e+=" ".concat(t.message," ").concat(t.filename,":").concat(t.lineno,":").concat(t.colno));var i=new Error(e);console.error(t),r(i)};var i=Object(f.a)(e);n.worker.postMessage(e,i)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),t}()},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(418)},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(190);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=n(22),i=n(241);function o(){return!("object"===("undefined"===typeof t?"undefined":Object(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||Object(i.a)()}}).call(this,n(78))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(22);function i(e){if("undefined"!==typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!==typeof t&&"object"===Object(r.a)(t.versions)&&Boolean(t.versions.electron))return!0;var n="object"===("undefined"===typeof navigator?"undefined":Object(r.a)(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent,i=e||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(78))},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(127),c=n(23),l=n(20);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var h=function(t){Object(o.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"toString",value:function(){var t="[";if(l.f.printRowMajor){t+="row-major:";for(var e=0;e<this.RANK;++e)for(var n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(var r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]"}},{key:"getElementIndex",value:function(t,e){return e*this.RANK+t}},{key:"getElement",value:function(t,e){return this[e*this.RANK+t]}},{key:"setElement",value:function(t,e,n){return this[e*this.RANK+t]=Object(c.a)(n),this}},{key:"getColumn",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=t*this.RANK,r=0;r<this.RANK;++r)e[r]=this[n+r];return e}},{key:"setColumn",value:function(t,e){for(var n=t*this.RANK,r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}]),n}(u.a)},function(t,e,n){"use strict";function r(t){for(var e=t.data,n=t.getIndex,r=t.dataRange,i=t.replace,o=r.startRow,a=void 0===o?0:o,s=r.endRow,u=void 0===s?1/0:s,c=e.length,l=c,f=c,h=0;h<c;h++){var p=n(e[h]);if(l>h&&p>=a&&(l=h),p>=u){f=h;break}}for(var d=l,g=f-l!==i.length,y=g&&e.slice(f),v=0;v<i.length;v++)e[d++]=i[v];if(g){for(var m=0;m<y.length;m++)e[d++]=y[m];e.length=d}return{startRow:l,endRow:l+i.length}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(164),i=n(19);e.a=function(t,e){if(e=e||{},!Object(i.g)(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var o=Object(r.a)(t),a=(o[0]+o[2])/2,s=(o[1]+o[3])/2;return Object(i.j)([a,s],n)}},function(t,e,n){"use strict";var r=n(46),i=n(19);e.a=function(t,e){var n=0,o=0,a=0;return Object(r.a)(t,(function(t){n+=t[0],o+=t[1],a++}),!0),Object(i.j)([n/a,o/a],e)}},function(t,e,n){"use strict";var r=n(39),i=n(19);function o(t,e){var n=Object(i.b)(t[1]),r=Object(i.b)(e[1]),o=Object(i.b)(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var a=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=Math.atan2(o,a);return(Object(i.l)(s)+360)%360}e.a=function(t,e,n){if(n=n||{},!Object(i.g)(n))throw new Error("options is invalid");var a,s=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(a=s?o(Object(r.a)(e),Object(r.a)(t)):o(Object(r.a)(t),Object(r.a)(e)))>180?-(360-a):a}},function(t,e,n){"use strict";var r=n(19),i=n(39);e.a=function(t,e,n){if(n=n||{},!Object(r.g)(n))throw new Error("options is invalid");var o=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var a=Object(i.a)(t),s=Object(i.a)(e);s[0]+=s[0]-a[0]>180?-360:a[0]-s[0]>180?360:0;var u=function(t,e,n){var i=n=void 0===n?r.c:Number(n),o=t[1]*Math.PI/180,a=e[1]*Math.PI/180,s=a-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var c=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(c)>1e-11?s/c:Math.cos(o);return Math.sqrt(s*s+l*l*u*u)*i}(a,s);return Object(r.a)(u,"meters",o)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),i=n(2),o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t);var i=n.id,o=void 0===i?"pass":i;this.id=o,this.gl=e,this.props={},Object.assign(this.props,n)}return Object(i.a)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(0),i=n(1),o=n(2),a=n(15),s=n(5),u=n(6),c=n(3),l=n(125),f=n(10);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var g={blendFunc:[1,0,32771,0],blendEquation:32774},y=function(t){Object(s.a)(n,t);var e=d(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(t){t.pickingFBO?this._drawPickingBuffer(t):Object(a.a)(Object(c.a)(n.prototype),"render",this).call(this,t)}},{key:"_drawPickingBuffer",value:function(t){var e=this,r=t.layers,i=t.layerFilter,o=t.views,s=t.viewports,u=t.onViewportActive,l=t.pickingFBO,h=t.deviceRect,d=h.x,y=h.y,v=h.width,m=h.height,A=t.pass,b=void 0===A?"picking":A,_=t.redrawReason,w=t.pickZ,x=this.gl;return this.pickZ=w,Object(f.l)(x,p(p({scissorTest:!0,scissor:[d,y,v,m],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},g),{},{blend:!w}),(function(){Object(a.a)(Object(c.a)(n.prototype),"render",e).call(e,{target:l,layers:r,layerFilter:i,views:o,viewports:s,onViewportActive:u,pass:b,redrawReason:_})}))}},{key:"shouldDrawLayer",value:function(t){return t.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(t,e){var n=this.pickZ?{blend:!1}:p(p({},g),{},{blend:!0,blendColor:[0,0,0,(e+1)/255]});return Object.assign({},t.props.parameters,n)}}]),n}(l.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(194);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return a(t,[])}function a(t,e){switch(i(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return null===t?"null":function(t,e){if(-1!==e.indexOf(t))return"[Circular]";var n=[].concat(e,[t]),i=function(t){var e=t[String(r.a)];if("function"===typeof e)return e;if("function"===typeof t.inspect)return t.inspect}(t);if(void 0!==i){var o=i.call(t);if(o!==t)return"string"===typeof o?o:a(o,n)}else if(Array.isArray(t))return function(t,e){if(0===t.length)return"[]";if(e.length>2)return"[Array]";for(var n=Math.min(10,t.length),r=t.length-n,i=[],o=0;o<n;++o)i.push(a(t[o],e));1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items"));return"["+i.join(", ")+"]"}(t,n);return function(t,e){var n=Object.keys(t);if(0===n.length)return"{}";if(e.length>2)return"["+function(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"===typeof t.constructor){var n=t.constructor.name;if("string"===typeof n&&""!==n)return n}return e}(t)+"]";return"{ "+n.map((function(n){return n+": "+a(t[n],e)})).join(", ")+" }"}(t,n)}(t,e);default:return String(t)}}},function(t,e,n){"use strict";function r(t){var e=t.split(/\r\n|[\n\r]/g),n=function(t){for(var e=null,n=1;n<t.length;n++){var r=t[n],o=i(r);if(o!==r.length&&((null===e||o<e)&&0===(e=o)))break}return null===e?0:e}(e);if(0!==n)for(var r=1;r<e.length;r++)e[r]=e[r].slice(n);for(;e.length>0&&o(e[0]);)e.shift();for(;e.length>0&&o(e[e.length-1]);)e.pop();return e.join("\n")}function i(t){for(var e=0;e<t.length&&(" "===t[e]||"\t"===t[e]);)e++;return e}function o(t){return i(t)===t.length}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===t.indexOf("\n"),i=" "===t[0]||"\t"===t[0],o='"'===t[t.length-1],a=!r||o||n,s="";return!a||r&&i||(s+="\n"+e),s+=e?t.replace(/\n/g,"\n"+e):t,a&&(s+="\n"),'"""'+s.replace(/"""/g,'\\"""')+'"""'}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return Y}));var r=n(0),i=n(1),o=n(2),a=n(10),s=n(405),u=n(143),c=n(31),l=n(255),f=n(651),h=n(90),p=n(53),d=n(6),g=n(40),y=n(3),v=n(15),m=n(5),A=n(58),b=null;function _(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!b||b.byteLength<n)&&(b=new ArrayBuffer(n)),b),0,e)}var w=n(82),x=n(240),E=n(241);function O(t){if(!t&&!Object(x.a)())return"Node";if(Object(E.a)(t))return"Electron";var e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":w.b.chrome?"Chrome":w.b.safari?"Safari":w.b.mozInnerScreenX?"Firefox":"Unknown"}var S="elements must be GL.ELEMENT_ARRAY_BUFFER",T=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,e);var o=r.id||r.program&&r.program.id;return(n=Object(d.a)(this,Object(y.a)(e).call(this,t,Object.assign({},r,{id:o})))).buffer=null,n.bufferValue=null,n.isDefaultArray=r.isDefaultArray||!1,n.initialize(r),Object.seal(Object(g.a)(n)),n}return Object(m.a)(e,t),Object(o.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.constantAttributeZero||(Object(a.g)(t)||"Chrome"===O())}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new e(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return e.MAX_ATTRIBUTES=e.MAX_ATTRIBUTES||t.getParameter(34921),e.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,n,r){switch(r.constructor){case Float32Array:e._setConstantFloatArray(t,n,r);break;case Int32Array:e._setConstantIntArray(t,n,r);break;case Uint32Array:e._setConstantUintArray(t,n,r);break;default:Object(c.a)(!1)}}}]),Object(o.a)(e,[{key:"delete",value:function(){Object(v.a)(Object(y.a)(e.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(c.a)(!e||34963===e.target,S),this.bind((function(){t.gl.bindBuffer(34963,e?e.handle:null)})),this}},{key:"setBuffer",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,o=n.stride,s=n.offset,u=n.normalized,l=n.integer,f=n.divisor,h=this.gl;return t=Number(t),this.bind((function(){h.bindBuffer(34962,e.handle),l?(Object(c.a)(Object(a.g)(h)),h.vertexAttribIPointer(t,r,i,o,s)):h.vertexAttribPointer(t,r,i,u,o,s),h.enableVertexAttribArray(t),h.vertexAttribDivisor(t,f||0)})),this}},{key:"enable",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===t&&!e.isSupported(this.gl,{constantAttributeZero:!0});return i||(t=Number(t),this.bind((function(){return r?n.gl.enableVertexAttribArray(t):n.gl.disableVertexAttribArray(t)}))),this}},{key:"getConstantBuffer",value:function(t,e,n){var r=this._normalizeConstantArrayValue(e,n),i=r.byteLength*t,o=r.length*t,a=!this.buffer;if(this.buffer=this.buffer||new p.a(this.gl,i),a=(a=a||this.buffer.reallocate(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=_(e.constructor,o);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,c=0,l=i;c<s;c++)e[l++]=n[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u)}({target:s,source:r,start:0,count:o}),this.buffer.subData(s),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t,e){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(t){return this.gl.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.gl.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var n=this,r=e.location;return Object(c.a)(Number.isFinite(r)),this.bind((function(){switch(t){case 34373:return n.gl.getVertexAttribOffset(r,t);default:return n.gl.getVertexAttrib(r,t)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return e.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function(t,e,n){switch(Object(c.a)(Object(a.g)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function(t,e,n){switch(Object(c.a)(Object(a.g)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Object(c.a)(!1)}}}]),e}(A.a),P=n(629),M=/^(.+)__LOCATION_([0-9]+)$/,C=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],I=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new T(e),Object(P.a)(this,"VertexArray","v6.0",C),this.initialize(n),Object.seal(this)}return Object(o.a)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var n in t){var r=t[n];e._setAttribute(n,r)}e.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,o)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n)),i=r.location,o=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e,o),this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.vertexArrayObject.setElementBuffer(null),t.buffer=t.buffer||new p.a(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof p.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof p.a&&t.setBuffer(e,n)}})),this}},{key:"bindForDraw",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(t,e),r=n()})),r}},{key:"_resolveLocationAndAccessor",value:function(t,e,n,r){var i=this,o=this._getAttributeIndex(t),s=o.location,u=o.name;if(!Number.isFinite(s)||s<0)return this.unused[t]=e,a.h.once(3,(function(){return"unused value ".concat(t," in ").concat(i.id)}))(),this;var l=this._getAttributeInfo(u||s);if(!l)return{location:-1,accessor:null};var f=this.accessors[s]||{},p=h.a.resolve(l.accessor,f,n,r),d=p.size,g=p.type;return Object(c.a)(Number.isFinite(d)&&Number.isFinite(g)),{location:s,accessor:p}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var n=M.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(t,e){if(e instanceof p.a)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof p.a){var n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof p.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var o=e;this.setBuffer(t,o.buffer,o)}}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(t,e){if(T.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(t,e){T.setConstant(this.gl,t,e)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof p.a){var o=n;if(i){var a=o.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,a)}else{var s=o.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,s)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.h.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}]),t}(),R=n(645),k=n(131),j=n(114);function L(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,o=void 0===i?1:i,a="[",s=0;s<t.length&&s<r;++s)s>0&&(a+=",".concat(s%o===0?" ":"")),a+=N(t[s],e);var u=t.length>r?"...":"]";return"".concat(a).concat(u)}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=e.isInteger,i=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return L(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var o=t.toPrecision(2),a=o.indexOf(".0");return a===o.length-2?o.slice(0,-1):o}function D(t,e,n,i){var o,a,s=t.gl;if(!e)return a={},Object(r.a)(a,i,"null"),Object(r.a)(a,"Format ","N/A"),a;var u,c,l,f="NOT PROVIDED",h="N/A",d="N/A",g="N/A";if(n&&(f=n.type,h=n.size,u=-1!==(f=String(f).replace("Array","")).indexOf("nt")),e instanceof p.a){var y,v,m=e,A=m.getDebugData(),b=A.data;if(c=A.modified?"*":"",l=b,d=(g=m.byteLength)/b.BYTES_PER_ELEMENT/h,n){var _=n.divisor>0;v="".concat(_?"I ":"P "," ").concat(d," (x").concat(h,"=").concat(g," bytes ").concat(Object(k.a)(s,f),")")}else u=!0,v="".concat(g," bytes");return y={},Object(r.a)(y,i,"".concat(c).concat(N(l,{size:h,isInteger:u}))),Object(r.a)(y,"Format ",v),y}return l=e,h=e.length,u=-1!==(f=String(e.constructor.name).replace("Array","")).indexOf("nt"),o={},Object(r.a)(o,i,"".concat(N(l,{size:h,isInteger:u})," (constant)")),Object(r.a)(o,"Format ","".concat(h,"x").concat(f," (constant)")),o}function F(t,e){var n=e.type,r=e.size,i=Object(j.b)(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,n=void 0===e?"Uniforms":e,i=t.program,o=t.uniforms,a=t.undefinedOnly,s=void 0!==a&&a;Object(c.a)(i);var u=".*_.*",l=".*Matrix",f=i._uniformSetters,h={},p=Object.keys(f).sort(),d=0,g=!0,y=!1,v=void 0;try{for(var m,A=p[Symbol.iterator]();!(g=(m=A.next()).done);g=!0){var b=m.value;b.match(u)||b.match(l)||z({table:h,header:n,uniforms:o,uniformName:b,undefinedOnly:s})&&d++}}catch(F){y=!0,v=F}finally{try{g||null==A.return||A.return()}finally{if(y)throw v}}var _=!0,w=!1,x=void 0;try{for(var E,O=p[Symbol.iterator]();!(_=(E=O.next()).done);_=!0){var S=E.value;S.match(l)&&z({table:h,header:n,uniforms:o,uniformName:S,undefinedOnly:s})&&d++}}catch(F){w=!0,x=F}finally{try{_||null==O.return||O.return()}finally{if(w)throw x}}var T=!0,P=!1,M=void 0;try{for(var C,I=p[Symbol.iterator]();!(T=(C=I.next()).done);T=!0){var R=C.value;h[R]||z({table:h,header:n,uniforms:o,uniformName:R,undefinedOnly:s})&&d++}}catch(F){P=!0,M=F}finally{try{T||null==I.return||I.return()}finally{if(P)throw M}}var k=0,j={};if(!s)for(var L in o){var D=o[L];h[L]||(k++,j[L]=Object(r.a)({Type:"NOT USED: ".concat(D)},n,N(D)))}return{table:h,count:d,unusedTable:j,unusedCount:k}}function z(t){var e,n=t.table,i=t.header,o=t.uniforms,a=t.uniformName,s=t.undefinedOnly,u=o[a],c=function(t){return void 0!==t&&null!==t}(u);return(!s||!c)&&(n[a]=(e={},Object(r.a)(e,i,c?N(u):"N/A"),Object(r.a)(e,"Uniform Type",c?u:"NOT PROVIDED"),e),!0)}function U(t){var e=t.accessor,n=e.type,r=e.size,i=Object(j.b)(n,r);return i?"".concat(i.name," ").concat(t.name):t.name}var G=n(48),V={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function q(t,e){var n=(e||{}).attributeMap,r=void 0===n?V:n;return r&&r[t]||t}function H(t,e){var n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Object(c.a)(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var W=function(){},X={},Y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t);var r=n.id,o=void 0===r?Object(u.c)("model"):r;Object(c.a)(Object(a.f)(e)),this.id=o,this.gl=e,this.id=n.id||Object(u.c)("Model"),this.lastLogTime=0,this.initialize(n)}return Object(o.a)(t,[{key:"initialize",value:function(t){this.props={},this.programManager=t.programManager||s.a.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var e=t.program,n=void 0===e?null:e,r=t.vs,i=t.fs,o=t.modules,a=t.defines,u=t.inject,l=t.varyings,f=t.bufferMode,h=t.transpileToGLSL100;this.programProps={program:n,vs:r,fs:i,modules:o,defines:a,inject:u,varyings:l,bufferMode:f,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Object(c.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){this._setModelProps(t)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(t){var e=t.program,n=t.vs,r=t.fs,i=t.modules,o=t.defines,a=t.inject,s=t.varyings,u=t.bufferMode,c=t.transpileToGLSL100;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(t){return this.drawMode=t,this}},{key:"setVertexCount",value:function(t){return Object(c.a)(Number.isFinite(t)),this.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return Object(c.a)(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){var r={},i=e.indices;for(var o in e.attributes){var a=e.attributes[o],s=q(o,n);if("indices"===o)i=a;else if(a.constant)r[s]=a.value;else{var u=a.value,l=Object(G.a)({},a);delete l.value,r[s]=[new p.a(t,u),l],H(o,l)}}if(i){var f=i.value||i;Object(c.a)(f instanceof Uint16Array||f instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new p.a(t,{data:f,target:34963}),h]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(t))return this;var e={};for(var n in t){var r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}},{key:"getModuleUniforms",value:function(t){this._checkProgram();var e=this.programManager.getUniforms(this.program);return e?e(t):{}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return Object(l.a)(this.program.gl,t),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var e,n=t.moduleSettings,r=void 0===n?null:n,i=t.framebuffer,o=t.uniforms,s=void 0===o?{}:o,u=t.attributes,c=void 0===u?{}:u,l=t.transformFeedback,f=void 0===l?this.transformFeedback:l,h=t.parameters,p=void 0===h?{}:h,d=t.vertexArray,g=void 0===d?this.vertexArray:d;this.setAttributes(c),this.updateModuleSettings(r),this.setUniforms(s),a.h.priority>=2&&(e=this._logDrawCallStart(2));var y=this.vertexArray.getDrawParams(),v=this.props,m=v.isIndexed,A=void 0===m?y.isIndexed:m,b=v.indexType,_=void 0===b?y.indexType:b,w=v.indexOffset,x=void 0===w?y.indexOffset:w,E=v.vertexArrayInstanced,O=void 0===E?y.isInstanced:E;O&&!this.isInstanced&&a.h.warn("Found instanced attributes on non-instanced model",this.id)();var S=this.isInstanced,T=this.instanceCount,P=this.props,M=P.onBeforeRender,C=void 0===M?W:M,I=P.onAfterRender,R=void 0===I?W:I;C(),this.program.setUniforms(this.uniforms);var k=this.program.draw(Object.assign(X,t,{logPriority:e,uniforms:null,framebuffer:i,parameters:p,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:g,transformFeedback:f,isIndexed:A,indexType:_,isInstanced:S,instanceCount:T,offset:A?x:0}));return R(),a.h.priority>=2&&this._logDrawCallEnd(e,g,i),k}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,i=t.feedbackBuffers,o=t.unbindModels,a=void 0===o?[]:o,s=t.parameters;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,Object(r.a)({},35977,n))),a.forEach((function(t){return t.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},t,{parameters:s}))}finally{a.forEach((function(t){return t.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.h.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}},{key:"_setModelProps",value:function(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}},{key:"_checkProgram",value:function(){var t=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(t){var e=this.programProps.program;if(e)this._managedProgram=!1;else{var n=this.programProps,r=n.vs,i=n.fs,o=n.modules,a=n.inject,s=n.defines,u=n.varyings,l=n.bufferMode,h=n.transpileToGLSL100;e=this.programManager.get({vs:r,fs:i,modules:o,inject:a,defines:s,varyings:u,bufferMode:l,transpileToGLSL100:h}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(c.a)(e instanceof f.a,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new I(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var t in this.geometryBuffers){var e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof p.a&&e.delete()}}},{key:"_setAnimationProps",value:function(t){if(this.animated){Object(c.a)(t,"Model.draw(): animated uniforms but no animationProps");var e=this._evaluateAnimateUniforms(t);Object.assign(this.uniforms,e)}}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new R.a(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),a.h.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:a.h.level<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,n,i){if(void 0!==t){var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vertexArray,n=t.header,r=void 0===n?"Attributes":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=D(e,e.elements,null,r));var o=e.values;for(var a in o){var s=e._getAttributeInfo(a);if(s){var u="".concat(a,": ").concat(s.name),c=e.accessors[s.location];c&&(u="".concat(a,": ").concat(F(s.name,c))),i[u]=D(e,o[a],c,r)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),s=B({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),u=s.table,c=s.unusedTable,l=s.unusedCount,f=B({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),h=f.table;f.count>0&&a.h.log("MISSING UNIFORMS",Object.keys(h))(),l>0&&a.h.log("UNUSED UNIFORMS",Object.keys(c))();var p=function(t){var e={},n="Accessors for ".concat(t.id),i=!0,o=!1,a=void 0;try{for(var s,u=t.attributeInfos[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c){var l=U(c);e["in ".concat(l)]=Object(r.a)({},n,JSON.stringify(c.accessor))}}}catch(m){o=!0,a=m}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var f=!0,h=!1,p=void 0;try{for(var d,g=t.varyingInfos[Symbol.iterator]();!(f=(d=g.next()).done);f=!0){var y=d.value;if(y){var v=U(y);e["out ".concat(v)]=Object(r.a)({},n,JSON.stringify(y.accessor))}}}catch(m){h=!0,p=m}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}return e}(this.vertexArray.configuration);a.h.table(t,o)(),a.h.table(t,u)(),a.h.table(t+1,p)(),i&&i.log({logLevel:2,message:"Rendered to ".concat(i.id)}),a.h.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),t}()},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return hr}));var o,a,s,u,c,l,f,h,p={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},d={duration:.5,overwrite:!1,delay:0},g=1e8,y=1e-8,v=2*Math.PI,m=v/4,A=0,b=Math.sqrt,_=Math.cos,w=Math.sin,x=function(t){return"string"===typeof t},E=function(t){return"function"===typeof t},O=function(t){return"number"===typeof t},S=function(t){return"undefined"===typeof t},T=function(t){return"object"===typeof t},P=function(t){return!1!==t},M=function(){return"undefined"!==typeof window},C=function(t){return E(t)||x(t)},I="function"===typeof ArrayBuffer?ArrayBuffer.isView:function(){},R=Array.isArray,k=/(?:-?\.?\d|\.)+/gi,j=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,L=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,N=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,D=/[+-]=-?[\.\d]+/,F=/[#\-+.]*\b[a-z\d-=+%.]+/gi,B={},z={},U=function(t){return(z=pt(t,B))&&Ke},G=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},V=function(t,e){return!e&&console.warn(t)},q=function(t,e){return t&&(B[t]=e)&&z&&(z[t]=e)||B},H=function(){return 0},W={},X=[],Y={},Q={},Z={},K=30,J=[],$="",tt=function(t){var e,n,r=t[0];if(T(r)||E(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=J.length;n--&&!J[n].targetTest(r););e=J[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new we(t[n],e)))||t.splice(n,1);return t},et=function(t){return t._gsap||tt(Ut(t))[0]._gsap},nt=function(t,e,n){return(n=t[e])&&E(n)?t[e]():S(n)&&t.getAttribute&&t.getAttribute(e)||n},rt=function(t,e){return(t=t.split(",")).forEach(e)||t},it=function(t){return Math.round(1e5*t)/1e5||0},ot=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},at=function(t,e,n){var r,i=O(t[1]),o=(i?2:1)+(e<2?0:1),a=t[o];if(i&&(a.duration=t[1]),a.parent=n,e){for(r=a;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=P(n.vars.inherit)&&n.parent;a.immediateRender=P(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return a},st=function(){var t,e,n=X.length,r=X.slice(0);for(Y={},X.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},ut=function(t,e,n,r){X.length&&st(),t.render(e,n,r),X.length&&st()},ct=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(F).length<2?e:x(t)?t.trim():t},lt=function(t){return t},ft=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},ht=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},pt=function(t,e){for(var n in e)t[n]=e[n];return t},dt=function t(e,n){for(var r in n)e[r]=T(n[r])?t(e[r]||(e[r]={}),n[r]):n[r];return e},gt=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},yt=function(t){var e=t.parent||o,n=t.keyframes?ht:ft;if(P(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},vt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},mt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},At=function(t,e){if(!e||e._end>t._dur||e._start<0)for(var n=t;n;)n._dirty=1,n=n.parent;return t},bt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},_t=function t(e){return!e||e._ts&&t(e.parent)},wt=function(t){return t._repeat?xt(t._tTime,t=t.duration()+t._rDelay)*t:0},xt=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},Et=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ot=function(t){return t._end=it(t._start+(t._tDur/Math.abs(t._ts||t._rts||y)||0))},St=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=it(t._dp._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ot(t),n._dirty||At(n,t)),t},Tt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Et(t.rawTime(),e),(!e._dur||Nt(0,e.totalDuration(),n)-e._tTime>y)&&e.render(n,!0)),At(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},Pt=function(t,e,n,r){return e.parent&&mt(e),e._start=it(n+e._delay),e._end=it(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=t[r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||Tt(t,e),t},Mt=function(t,e){return(B.ScrollTrigger||G("scrollTrigger",e))&&B.ScrollTrigger.create(e,t)},Ct=function(t,e,n,r){return Me(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&l!==ce.frame?(X.push(t),t._lazy=[e,r],1):void 0:1},It=function(t,e,n,r){var i=t._repeat,o=it(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:it(o*(i+1)+t._rDelay*i):o,a&&!r?St(t,t._tTime=t._tDur*a):t.parent&&Ot(t),n||At(t.parent,t),t},Rt=function(t){return t instanceof Ee?At(t):It(t,t._dur)},kt={_start:0,endTime:H},jt=function t(e,n){var r,i,o=e.labels,a=e._recent||kt,s=e.duration()>=g?a.endTime(!1):e._dur;return x(n)&&(isNaN(n)||n in o)?"<"===(r=n.charAt(0))||">"===r?("<"===r?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0):(r=n.indexOf("="))<0?(n in o||(o[n]=s),o[n]):(i=+(n.charAt(r-1)+n.substr(r+1)),r>1?t(e,n.substr(0,r-1))+i:s+i):null==n?s:+n},Lt=function(t,e){return t||0===t?e(t):e},Nt=function(t,e,n){return n<t?t:n>e?e:n},Dt=function(t){return(t+"").substr((parseFloat(t)+"").length)},Ft=[].slice,Bt=function(t,e){return t&&T(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&T(t[0]))&&!t.nodeType&&t!==a},zt=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return x(t)&&!e||Bt(t,1)?(r=n).push.apply(r,Ut(t)):n.push(t)}))||n},Ut=function(t,e){return!x(t)||e||!s&&le()?R(t)?zt(t,e):Bt(t)?Ft.call(t,0):t?[t]:[]:Ft.call(u.querySelectorAll(t),0)},Gt=function(t){return t.sort((function(){return.5-Math.random()}))},Vt=function(t){if(E(t))return t;var e=T(t)?t:{each:t},n=ve(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=e.axis,c=r,l=r;return x(r)?c=l={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(c=r[0],l=r[1]),function(t,a,f){var h,p,d,y,v,m,A,_,w,x=(f||e).length,E=o[x];if(!E){if(!(w="auto"===e.grid?0:(e.grid||[1,g])[1])){for(A=-g;A<(A=f[w++].getBoundingClientRect().left)&&w<x;);w--}for(E=o[x]=[],h=s?Math.min(w,x)*c-.5:r%w,p=s?x*l/w-.5:r/w|0,A=0,_=g,m=0;m<x;m++)d=m%w-h,y=p-(m/w|0),E[m]=v=u?Math.abs("y"===u?y:d):b(d*d+y*y),v>A&&(A=v),v<_&&(_=v);"random"===r&&Gt(E),E.max=A-_,E.min=_,E.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(w>x?x-1:u?"y"===u?x/w:w:Math.max(w,x/w))||0)*("edges"===r?-1:1),E.b=x<0?i-x:i,E.u=Dt(e.amount||e.each)||0,n=n&&x<0?ge(n):n}return x=(E[t]-E.min)/E.max||0,it(E.b+(n?n(x):x)*E.v)+E.u}},qt=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return Math.floor(Math.round(parseFloat(n)/t)*t*e)/e+(O(n)?0:Dt(n))}},Ht=function(t,e){var n,r,i=R(t);return!i&&T(t)&&(n=i=t.radius||g,t.values?(t=Ut(t.values),(r=!O(t[0]))&&(n*=n)):t=qt(t.increment)),Lt(e,i?E(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,a=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),u=g,c=0,l=t.length;l--;)(i=r?(i=t[l].x-a)*i+(o=t[l].y-s)*o:Math.abs(t[l]-a))<u&&(u=i,c=l);return c=!n||u<=n?t[c]:e,r||c===e||O(e)?c:c+Dt(e)}:qt(t))},Wt=function(t,e,n,r){return Lt(R(t)?!e:!0===n?!!(n=0):!r,(function(){return R(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t+Math.random()*(e-t))/n)*n*r)/r}))},Xt=function(t,e,n){return Lt(n,(function(n){return t[~~e(n)]}))},Yt=function(t){for(var e,n,r,i,o=0,a="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?F:k),a+=t.substr(o,e-o)+Wt(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+t.substr(o,t.length-o)},Qt=function(t,e,n,r,i){var o=e-t,a=r-n;return Lt(i,(function(e){return n+((e-t)/o*a||0)}))},Zt=function(t,e,n){var r,i,o,a=t.labels,s=g;for(r in a)(i=a[r]-e)<0===!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},Kt=function(t,e,n){var r,i,o=t.vars,a=o[e];if(a)return r=o[e+"Params"],i=o.callbackScope||t,n&&X.length&&st(),r?a.apply(i,r):a.call(i)},Jt=function(t){return mt(t),t.progress()<1&&Kt(t,"onInterrupt"),t},$t=function(t){var e=(t=!t.name&&t.default||t).name,n=E(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:H,render:Ge,add:Te,kill:qe,modifier:Ve,rawVars:0},o={targetTest:0,get:0,getSetter:Fe,aliases:{},register:0};if(le(),t!==r){if(Q[e])return;ft(r,ft(gt(t,i),o)),pt(r.prototype,pt(i,gt(t,o))),Q[r.prop=e]=r,t.targetTest&&(J.push(r),W[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}q(e,r),t.register&&t.register(Ke,r,Xe)},te=255,ee={aqua:[0,te,te],lime:[0,te,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,te],navy:[0,0,128],white:[te,te,te],olive:[128,128,0],yellow:[te,te,0],orange:[te,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[te,0,0],pink:[te,192,203],cyan:[0,te,te],transparent:[te,te,te,0]},ne=function(t,e,n){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*te+.5|0},re=function(t,e,n){var r,i,o,a,s,u,c,l,f,h,p=t?O(t)?[t>>16,t>>8&te,t&te]:0:ee.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ee[t])p=ee[t];else if("#"===t.charAt(0))4===t.length&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o),p=[(t=parseInt(t.substr(1),16))>>16,t>>8&te,t&te];else if("hsl"===t.substr(0,3))if(p=h=t.match(k),e){if(~t.indexOf("="))return p=t.match(j),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,s=+p[1]/100,r=2*(u=+p[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),p.length>3&&(p[3]*=1),p[0]=ne(a+1/3,r,i),p[1]=ne(a,r,i),p[2]=ne(a-1/3,r,i);else p=t.match(k)||ee.transparent;p=p.map(Number)}return e&&!h&&(r=p[0]/te,i=p[1]/te,o=p[2]/te,u=((c=Math.max(r,i,o))+(l=Math.min(r,i,o)))/2,c===l?a=s=0:(f=c-l,s=u>.5?f/(2-c-l):f/(c+l),a=c===r?(i-o)/f+(i<o?6:0):c===i?(o-r)/f+2:(r-i)/f+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},ie=function(t){var e=[],n=[],r=-1;return t.split(ae).forEach((function(t){var i=t.match(L)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},oe=function(t,e,n){var r,i,o,a,s="",u=(t+s).match(ae),c=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map((function(t){return(t=re(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=ie(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(ae,"1").split(L)).length-1;l<a;l++)s+=i[l]+(~r.indexOf(l)?u.shift()||c+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=t.split(ae)).length-1;l<a;l++)s+=i[l]+u[l];return s+i[a]},ae=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in ee)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),se=/hsl[a]?\(/,ue=function(t){var e,n=t.join(" ");if(ae.lastIndex=0,ae.test(n))return e=se.test(n),t[1]=oe(t[1],e),t[0]=oe(t[0],e,ie(t[1])),!0},ce=function(){var t,e,n,r,i,o,l=Date.now,f=500,p=33,d=l(),g=d,y=1e3/240,v=y,m=[],A=function n(a){var s,u,c,h,A=l()-g,b=!0===a;if(A>f&&(d+=A-p),((s=(c=(g+=A)-d)-v)>0||b)&&(h=++r.frame,i=c-1e3*r.time,r.time=c/=1e3,v+=s+(s>=y?4:y-s),u=1),b||(t=e(n)),u)for(o=0;o<m.length;o++)m[o](c,i,h,a)};return r={time:0,frame:0,tick:function(){A(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){c&&(!s&&M()&&(a=s=window,u=a.document||{},B.gsap=Ke,(a.gsapVersions||(a.gsapVersions=[])).push(Ke.version),U(z||a.GreenSockGlobals||!a.gsap&&a||{}),n=a.requestAnimationFrame),t&&r.sleep(),e=n||function(t){return setTimeout(t,v-1e3*r.time+1|0)},h=1,A(2))},sleep:function(){(n?a.cancelAnimationFrame:clearTimeout)(t),h=0,e=H},lagSmoothing:function(t,e){f=t||1e8,p=Math.min(e,f,0)},fps:function(t){y=1e3/(t||240),v=1e3*r.time+y},add:function(t){m.indexOf(t)<0&&m.push(t),le()},remove:function(t){var e;~(e=m.indexOf(t))&&m.splice(e,1)&&o>=e&&o--},_listeners:m}}(),le=function(){return!h&&ce.wake()},fe={},he=/^[\d.\-M][\d.\-,\s]/,pe=/["']/g,de=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],e=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(pe,"").trim():+r,a=n.substr(e+1).trim();return i},ge=function(t){return function(e){return 1-t(1-e)}},ye=function t(e,n){for(var r,i=e._first;i;)i instanceof Ee?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},ve=function(t,e){return t&&(E(t)?t:fe[t]||function(t){var e=(t+"").split("("),n=fe[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[de(e[1])]:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)}(t).split(",").map(ct)):fe._CE&&he.test(t)?fe._CE("",t):n}(t))||e},me=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return rt(t,(function(t){for(var e in fe[t]=B[t]=o,fe[i=t.toLowerCase()]=n,o)fe[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=fe[t+"."+e]=o[e]})),o},Ae=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},be=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/v*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*w((t-a)*o)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:Ae(s);return o=v/o,u.config=function(n,r){return t(e,n,r)},u},_e=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Ae(r);return i.config=function(n){return t(e,n)},i};rt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;me(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),fe.Linear.easeNone=fe.none=fe.Linear.easeIn,me("Elastic",be("in"),be("out"),be()),function(t,e){var n=1/e,r=function(r){return r<n?t*r*r:r<.7272727272727273?t*Math.pow(r-1.5/e,2)+.75:r<.9090909090909092?t*(r-=2.25/e)*r+.9375:t*Math.pow(r-2.625/e,2)+.984375};me("Bounce",(function(t){return 1-r(1-t)}),r)}(7.5625,2.75),me("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),me("Circ",(function(t){return-(b(1-t*t)-1)})),me("Sine",(function(t){return 1===t?1:1-_(t*m)})),me("Back",_e("in"),_e("out"),_e()),fe.SteppedEase=fe.steps=B.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*Nt(0,.99999999,t)|0)+i)*n}}},d.ease=fe["quad.out"],rt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return $+=t+","+t+"Params,"}));var we=function(t,e){this.id=A++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:nt,this.set=e?e.getSetter:Fe},xe=function(){function t(t,e){var n=t.parent||o;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,It(this,+t.duration,1,1),this.data=t.data,h||ce.wake(),n&&Pt(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,It(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(le(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(St(this,t);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Pt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===y||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),ut(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+wt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+wt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?xt(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Et(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,bt(this.totalTime(Nt(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(le(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=y)&&Math.abs(this._zTime)!==y))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Pt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(P(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Et(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},e.repeat=function(t){return arguments.length?(this._repeat=t,Rt(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,Rt(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(jt(this,t),P(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,P(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-y))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=E(t)?t:lt,i=function(){var t=e.then;e.then=null,E(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){Jt(this)},t}();ft(xe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ee=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e,n)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=P(e.sortChildren),i.parent&&Tt(i.parent,r(i)),e.scrollTrigger&&Mt(r(i),e.scrollTrigger),i}i(e,t);var n=e.prototype;return n.to=function(t,e,n){return new ke(t,at(arguments,0,this),jt(this,O(e)?arguments[3]:n)),this},n.from=function(t,e,n){return new ke(t,at(arguments,1,this),jt(this,O(e)?arguments[3]:n)),this},n.fromTo=function(t,e,n,r){return new ke(t,at(arguments,2,this),jt(this,O(e)?arguments[4]:r)),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,yt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ke(t,e,jt(this,n),1),this},n.call=function(t,e,n){return Pt(this,ke.delayedCall(0,t,e),jt(this,n))},n.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new ke(t,n,jt(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,yt(n).immediateRender=P(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},n.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,yt(r).immediateRender=P(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},n.render=function(t,e,n){var r,i,a,s,u,c,l,f,h,p,d,g,v=this._time,m=this._dirty?this.totalDuration():this._tDur,A=this._dur,b=this!==o&&t>m-y&&t>=0?m:t<y?0:t,_=this._zTime<0!==t<0&&(this._initted||!A);if(b!==this._tTime||n||_){if(v!==this._time&&A&&(b+=this._time-v,t+=this._time-v),r=b,h=this._start,c=!(f=this._ts),_&&(A||(v=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat&&(d=this._yoyo,u=A+this._rDelay,r=it(b%u),b===m?(s=this._repeat,r=A):((s=~~(b/u))&&s===b/u&&(r=A,s--),r>A&&(r=A)),p=xt(this._tTime,u),!v&&this._tTime&&p!==s&&(p=s),d&&1&s&&(r=A-r,g=1),s!==p&&!this._lock)){var w=d&&1&p,x=w===(d&&1&s);if(s<p&&(w=!w),v=w?0:A,this._lock=1,this.render(v||(g?0:it(s*u)),e,!A)._lock=0,!e&&this.parent&&Kt(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),v!==this._time||c!==!this._ts)return this;if(A=this._dur,m=this._tDur,x&&(this._lock=2,v=w?A+1e-4:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;ye(this,g)}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,it(v),it(r)))&&(b-=r-(r=l._start)),this._tTime=b,this._time=r,this._act=!f,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),!v&&r&&!e&&Kt(this,"onStart"),r>=v&&t>=0)for(i=this._first;i;){if(a=i._next,(i._act||r>=i._start)&&i._ts&&l!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!c){l=0,a&&(b+=this._zTime=-1e-8);break}}i=a}else{i=this._last;for(var E=t<0?t:r;i;){if(a=i._prev,(i._act||E<=i._end)&&i._ts&&l!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(E-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(E-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!c){l=0,a&&(b+=this._zTime=E?-1e-8:y);break}}i=a}}if(l&&!e&&(this.pause(),l.render(r>=v?0:-1e-8)._zTime=r>=v?1:-1,this._ts))return this._start=h,Ot(this),this.render(t,e,n);this._onUpdate&&!e&&Kt(this,"onUpdate",!0),(b===m&&m>=this.totalDuration()||!b&&v)&&(h!==this._start&&Math.abs(f)===Math.abs(this._ts)||this._lock||((t||!A)&&(b===m&&this._ts>0||!b&&this._ts<0)&&mt(this,1),e||t<0&&!v||!b&&!v||(Kt(this,b===m?"onComplete":"onReverseComplete",!0),this._prom&&!(b<m&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(O(e)||(e=jt(this,e)),!(t instanceof xe)){if(R(t))return t.forEach((function(t){return n.add(t,e)})),this;if(x(t))return this.addLabel(t,e);if(!E(t))return this;t=ke.delayedCall(0,t)}return this!==t?Pt(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-g);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof ke?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return x(t)?this.removeLabel(t):E(t)?this.killTweensOf(t):(vt(this,t),t===this._recent&&(this._recent=this._last),At(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=it(ce.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=jt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=ke.delayedCall(0,e||H,n);return r.data="isPause",this._hasPause=1,Pt(this,r,jt(this,t))},n.removePause=function(t){var e=this._first;for(t=jt(this,t);e;)e._start===t&&"isPause"===e.data&&mt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)Oe!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=Ut(t),o=this._first,a=O(e);o;)o instanceof ke?ot(o._targets,i)&&(a?(!Oe||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n=this,r=jt(n,t),i=e,o=i.startAt,a=i.onStart,s=i.onStartParams,u=ke.to(n,ft(e,{ease:"none",lazy:!1,time:r,duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||y,onStart:function(){n.pause();var t=e.duration||Math.abs((r-n._time)/n.timeScale());u._dur!==t&&It(u,t,0,1).render(u._time,!0,!0),a&&a.apply(u,s||[])}}));return u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,ft({startAt:{time:jt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),Zt(this,jt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),Zt(this,jt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+y)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return At(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._time=this._tTime=this._pTime=0,t&&(this.labels={}),At(this)},n.totalDuration=function(t){var e,n,r,i=0,a=this,s=a._last,u=g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(r=a.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>u&&a._sort&&s._ts&&!a._lock?(a._lock=1,Pt(a,s,n-s._delay,1)._lock=0):u=n,n<0&&s._ts&&(i-=n,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-Infinity),u=0),s._end>i&&s._ts&&(i=s._end),s=e;It(a,a===o&&a._time>i?a._time:i,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(t){if(o._ts&&(ut(o,Et(t,o)),l=ce.frame),ce.frame>=K){K+=p.autoSleep||120;var e=o._first;if((!e||!e._ts)&&p.autoSleep&&ce._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||ce.sleep()}}},e}(xe);ft(Ee.prototype,{_lock:0,_hasPause:0,_forcing:0});var Oe,Se=function(t,e,n,r,i,o,a){var s,u,c,l,f,h,p,d,g=new Xe(this._pt,t,e,0,1,Ue,null,i),y=0,v=0;for(g.b=n,g.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=Yt(r)),o&&(o(d=[n,r],t,e),n=d[0],r=d[1]),u=n.match(N)||[];s=N.exec(r);)l=s[0],f=r.substring(y,s.index),c?c=(c+1)%5:"rgba("===f.substr(-5)&&(c=1),l!==u[v++]&&(h=parseFloat(u[v-1])||0,g._pt={_next:g._pt,p:f||1===v?f:",",s:h,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-h,m:c&&c<4?Math.round:0},y=N.lastIndex);return g.c=y<r.length?r.substring(y,r.length):"",g.fp=a,(D.test(r)||p)&&(g.e=0),this._pt=g,g},Te=function(t,e,n,r,i,o,a,s,u){E(r)&&(r=r(i||0,t,o));var c,l=t[e],f="get"!==n?n:E(l)?u?t[e.indexOf("set")||!E(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():l,h=E(l)?u?Ne:Le:je;if(x(r)&&(~r.indexOf("random(")&&(r=Yt(r)),"="===r.charAt(1)&&(r=parseFloat(f)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(Dt(f)||0))),f!==r)return isNaN(f*r)?(!l&&!(e in t)&&G(e,r),Se.call(this,t,e,f,r,h,s||p.stringFilter,u)):(c=new Xe(this._pt,t,e,+f||0,r-(f||0),"boolean"===typeof l?ze:Be,0,h),u&&(c.fp=u),a&&c.modifier(a,this,t),this._pt=c)},Pe=function(t,e,n,r,i,o){var a,s,u,c;if(Q[t]&&!1!==(a=new Q[t]).init(i,a.rawVars?e[t]:function(t,e,n,r,i){if(E(t)&&(t=Ce(t,i,e,n,r)),!T(t)||t.style&&t.nodeType||R(t)||I(t))return x(t)?Ce(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=Ce(t[o],i,e,n,r);return a}(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new Xe(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==f))for(u=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)u[a._props[c]]=s;return a},Me=function t(e,n){var r,i,a,s,u,c,l,f,h,p,g,v,m,A=e.vars,b=A.ease,_=A.startAt,w=A.immediateRender,x=A.lazy,E=A.onUpdate,O=A.onUpdateParams,S=A.callbackScope,T=A.runBackwards,M=A.yoyoEase,C=A.keyframes,I=A.autoRevert,R=e._dur,k=e._startAt,j=e._targets,L=e.parent,N=L&&"nested"===L.data?L.parent._targets:j,D="auto"===e._overwrite,F=e.timeline;if(F&&(!C||!b)&&(b="none"),e._ease=ve(b,d.ease),e._yEase=M?ge(ve(!0===M?b:M,d.ease)):0,M&&e._yoyo&&!e._repeat&&(M=e._yEase,e._yEase=e._ease,e._ease=M),!F){if(v=(f=j[0]?et(j[0]).harness:0)&&A[f.prop],r=gt(A,W),k&&k.render(-1,!0).kill(),_){if(mt(e._startAt=ke.set(j,ft({data:"isStart",overwrite:!1,parent:L,immediateRender:!0,lazy:P(x),startAt:null,delay:0,onUpdate:E,onUpdateParams:O,callbackScope:S,stagger:0},_))),w)if(n>0)I||(e._startAt=0);else if(R&&!(n<0&&k))return void(n&&(e._zTime=n))}else if(T&&R)if(k)!I&&(e._startAt=0);else if(n&&(w=!1),a=ft({overwrite:!1,data:"isFromStart",lazy:w&&P(x),immediateRender:w,stagger:0,parent:L},r),v&&(a[f.prop]=v),mt(e._startAt=ke.set(j,a)),w){if(!n)return}else t(e._startAt,y);for(e._pt=0,x=R&&P(x)||x&&!R,i=0;i<j.length;i++){if(l=(u=j[i])._gsap||tt(j)[i]._gsap,e._ptLookup[i]=p={},Y[l.id]&&st(),g=N===j?i:N.indexOf(u),f&&!1!==(h=new f).init(u,v||r,e,g,N)&&(e._pt=s=new Xe(e._pt,u,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(t){p[t]=s})),h.priority&&(c=1)),!f||v)for(a in r)Q[a]&&(h=Pe(a,r,e,g,u,N))?h.priority&&(c=1):p[a]=s=Te.call(e,u,a,"get",r[a],g,N,0,A.stringFilter);e._op&&e._op[i]&&e.kill(u,e._op[i]),D&&e._pt&&(Oe=e,o.killTweensOf(u,p,e.globalTime(0)),m=!e.parent,Oe=0),e._pt&&x&&(Y[l.id]=1)}c&&We(e),e._onInit&&e._onInit(e)}e._from=!F&&!!A.runBackwards,e._onUpdate=E,e._initted=(!e._op||e._pt)&&!m},Ce=function(t,e,n,r,i){return E(t)?t.call(e,n,r,i):x(t)&&~t.indexOf("random(")?Yt(t):t},Ie=$+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Re=(Ie+",id,stagger,delay,duration,paused,scrollTrigger").split(","),ke=function(t){function e(e,n,i,a){var s;"number"===typeof n&&(i.duration=n,n=i,i=null);var u,c,l,f,h,d,g,y,v=(s=t.call(this,a?n:yt(n),i)||this).vars,m=v.duration,A=v.delay,b=v.immediateRender,_=v.stagger,w=v.overwrite,x=v.keyframes,E=v.defaults,S=v.scrollTrigger,M=v.yoyoEase,k=s.parent,j=(R(e)||I(e)?O(e[0]):"length"in n)?[e]:Ut(e);if(s._targets=j.length?tt(j):V("GSAP target "+e+" not found. https://greensock.com",!p.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=w,x||_||C(m)||C(A)){if(n=s.vars,(u=s.timeline=new Ee({data:"nested",defaults:E||{}})).kill(),u.parent=r(s),x)ft(u.vars.defaults,{ease:"none"}),x.forEach((function(t){return u.to(j,t,">")}));else{if(f=j.length,g=_?Vt(_):H,T(_))for(h in _)~Ie.indexOf(h)&&(y||(y={}),y[h]=_[h]);for(c=0;c<f;c++){for(h in l={},n)Re.indexOf(h)<0&&(l[h]=n[h]);l.stagger=0,M&&(l.yoyoEase=M),y&&pt(l,y),d=j[c],l.duration=+Ce(m,r(s),c,d,j),l.delay=(+Ce(A,r(s),c,d,j)||0)-s._delay,!_&&1===f&&l.delay&&(s._delay=A=l.delay,s._start+=A,l.delay=0),u.to(d,l,g(c,d,j))}u.duration()?m=A=0:s.timeline=0}m||s.duration(m=u.duration())}else s.timeline=0;return!0===w&&(Oe=r(s),o.killTweensOf(j),Oe=0),k&&Tt(k,r(s)),(b||!m&&!x&&s._start===it(k._time)&&P(b)&&_t(r(s))&&"nested"!==k.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-A))),S&&Mt(r(s),S),s}i(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,a,s,u,c,l,f,h=this._time,p=this._tDur,d=this._dur,g=t>p-y&&t>=0?p:t<y?0:t;if(d){if(g!==this._tTime||!t||n||this._startAt&&this._zTime<0!==t<0){if(r=g,l=this.timeline,this._repeat){if(a=d+this._rDelay,r=it(g%a),g===p?(o=this._repeat,r=d):((o=~~(g/a))&&o===g/a&&(r=d,o--),r>d&&(r=d)),(u=this._yoyo&&1&o)&&(f=this._yEase,r=d-r),s=xt(this._tTime,a),r===h&&!n&&this._initted)return this;o!==s&&(l&&this._yEase&&ye(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(it(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Ct(this,t<0?t:r,n,e))return this._tTime=0,this;if(d!==this._dur)return this.render(t,e,n)}for(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(f||this._ease)(r/d),this._from&&(this.ratio=c=1-c),r&&!h&&!e&&Kt(this,"onStart"),i=this._pt;i;)i.r(c,i.d),i=i._next;l&&l.render(t<0?t:!r&&u?-1e-8:l._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),Kt(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&Kt(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!d)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&mt(this,1),e||t<0&&!h||!g&&!h||(Kt(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,o,a=t.ratio,s=e<0||!e&&a&&!t._start&&t._zTime>y&&!t._dp._lock||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data?0:1,u=t._rDelay,c=0;if(u&&t._repeat&&(c=Nt(0,t._tDur,e),xt(c,u)!==(o=xt(t._tTime,u))&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),t._initted||!Ct(t,e,r,n))if(s!==a||r||t._zTime===y||!e&&t._zTime){for(o=t._zTime,t._zTime=e||(n?y:0),n||(n=e&&!o),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=c,n||Kt(t,"onStart"),i=t._pt;i;)i.r(s,i.d),i=i._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&Kt(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&Kt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&mt(t,1),n||(Kt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!t&&(!e||"all"===e)&&(this._lazy=0,this.parent))return Jt(this);if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Oe&&!0!==Oe.vars.overwrite)._first||Jt(this),this.parent&&n!==this.timeline.totalDuration()&&It(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,u,c,l=this._targets,f=t?Ut(t):l,h=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(l,f))return"all"===e&&(this._pt=0),Jt(this);for(r=this._op=this._op||[],"all"!==e&&(x(e)&&(s={},rt(e,(function(t){return s[t]=1})),e=s),e=function(t,e){var n,r,i,o,a=t[0]?et(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(r in n=pt({},e),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(l,e)),c=l.length;c--;)if(~f.indexOf(l[c]))for(s in i=h[c],"all"===e?(r[c]=e,a=i,o={}):(o=r[c]=r[c]||{},a=e),a)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||vt(this,u,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&Jt(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,n){return new e(t,at(arguments,1))},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,n,r){return new e(t,at(arguments,2))},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return o.killTweensOf(t,e,n)},e}(xe);ft(ke.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),rt("staggerTo,staggerFrom,staggerFromTo",(function(t){ke[t]=function(){var e=new Ee,n=Ft.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var je=function(t,e,n){return t[e]=n},Le=function(t,e,n){return t[e](n)},Ne=function(t,e,n,r){return t[e](r.fp,n)},De=function(t,e,n){return t.setAttribute(e,n)},Fe=function(t,e){return E(t[e])?Le:S(t[e])&&t.setAttribute?De:je},Be=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},ze=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Ue=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},Ge=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Ve=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},qe=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?vt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},He=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},We=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},Xe=function(){function t(t,e,n,r,i,o,a,s,u){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||Be,this.d=a||this,this.set=s||je,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=He,this.m=t,this.mt=n,this.tween=e},t}();rt($+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return W[t]=1})),B.TweenMax=B.TweenLite=ke,B.TimelineLite=B.TimelineMax=Ee,o=new Ee({sortChildren:!1,defaults:d,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),p.stringFilter=ue;var Ye={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return $t(t)}))},timeline:function(t){return new Ee(t)},getTweensOf:function(t,e){return o.getTweensOf(t,e)},getProperty:function(t,e,n,r){x(t)&&(t=Ut(t)[0]);var i=et(t||{}).get,o=n?lt:ct;return"native"===n&&(n=""),t?e?o((Q[e]&&Q[e].get||i)(t,e,n,r)):function(e,n,r){return o((Q[e]&&Q[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=Ut(t)).length>1){var r=t.map((function(t){return Ke.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=Q[e],a=et(t),s=a.harness&&(a.harness.aliases||{})[e]||e,u=o?function(e){var r=new o;f._pt=0,r.init(t,n?e+n:e,f,0,[t]),r.render(1,r),f._pt&&Ge(1,f)}:a.set(t,s);return o?u:function(e){return u(t,s,n?e+n:e,a,1)}},isTweening:function(t){return o.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=ve(t.ease,d.ease)),dt(d,t||{})},config:function(t){return dt(p,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!Q[t]&&!B[t]&&V(e+" effect requires "+t+" plugin.")})),Z[e]=function(t,e,r){return n(Ut(t),ft(e||{},i),r)},o&&(Ee.prototype[e]=function(t,n,r){return this.add(Z[e](t,T(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){fe[t]=ve(e)},parseEase:function(t,e){return arguments.length?ve(t,e):fe},getById:function(t){return o.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new Ee(t);for(i.smoothChildTiming=P(t.smoothChildTiming),o.remove(i),i._dp=0,i._time=i._tTime=o._time,n=o._first;n;)r=n._next,!e&&!n._dur&&n instanceof ke&&n.vars.onComplete===n._targets[0]||Pt(i,n,n._start-n._delay),n=r;return Pt(o,i,0),i},utils:{wrap:function t(e,n,r){var i=n-e;return R(e)?Xt(e,t(0,e.length),n):Lt(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return R(e)?Xt(e,t(0,e.length-1),n):Lt(r,(function(t){return e+((t=(o+(t-e)%o)%o||0)>i?o-t:t)}))},distribute:Vt,random:Wt,snap:Ht,normalize:function(t,e,n){return Qt(t,e,0,1,n)},getUnit:Dt,clamp:function(t,e,n){return Lt(n,(function(n){return Nt(t,e,n)}))},splitColor:re,toArray:Ut,mapRange:Qt,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||Dt(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,u,c,l,f=x(e),h={};if(!0===r&&(i=1)&&(r=null),f)e={p:e},n={p:n};else if(R(e)&&!R(n)){for(u=[],c=e.length,l=c-2,s=1;s<c;s++)u.push(t(e[s-1],e[s]));c--,o=function(t){t*=c;var e=Math.min(l,~~t);return u[e](t-e)},r=n}else i||(e=pt(R(e)?[]:{},e));if(!u){for(a in n)Te.call(h,e,a,"get",n[a]);o=function(t){return Ge(t,h)||(f?e.p:e)}}}return Lt(r,o)},shuffle:Gt},install:U,effects:Z,ticker:ce,updateRoot:Ee.updateRoot,plugins:Q,globalTimeline:o,core:{PropTween:Xe,globals:q,Tween:ke,Timeline:Ee,Animation:xe,getCache:et,_removeLinkedListItem:vt}};rt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Ye[t]=ke[t]})),ce.add(Ee.updateRoot),f=Ye.to({},{duration:0});var Qe=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Ze=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(x(n)&&(r={},rt(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Qe(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},Ke=Ye.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,a;for(o in e)(a=this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],r,i,0,0,o))&&(a.op=o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},Ze("roundProps",qt),Ze("modifiers"),Ze("snap",Ht))||Ye;ke.version=Ee.version=Ke.version="3.5.0",c=1,M()&&le();fe.Power0,fe.Power1,fe.Power2,fe.Power3,fe.Power4,fe.Linear,fe.Quad,fe.Cubic,fe.Quart,fe.Quint,fe.Strong,fe.Elastic,fe.Back,fe.SteppedEase,fe.Bounce,fe.Sine,fe.Expo,fe.Circ;var Je,$e,tn,en,nn,rn,on,an,sn={},un=180/Math.PI,cn=Math.PI/180,ln=Math.atan2,fn=/([A-Z])/g,hn=/(?:left|right|width|margin|padding|x)/i,pn=/[\s,\(]\S/,dn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},gn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},yn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},vn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},mn=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},An=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},bn=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},_n=function(t,e,n){return t.style[e]=n},wn=function(t,e,n){return t.style.setProperty(e,n)},xn=function(t,e,n){return t._gsap[e]=n},En=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},On=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},Sn=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},Tn="transform",Pn=Tn+"Origin",Mn=function(t,e){var n=$e.createElementNS?$e.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):$e.createElement(t);return n.style?n:$e.createElement(t)},Cn=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(fn,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,Rn(n)||n,1)||""},In="O,Moz,ms,Ms,Webkit".split(","),Rn=function(t,e,n){var r=(e||nn).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(In[i]+t in r););return i<0?null:(3===i?"ms":i>=0?In[i]:"")+t},kn=function(){"undefined"!==typeof window&&window.document&&(Je=window,$e=Je.document,tn=$e.documentElement,nn=Mn("div")||{style:{}},rn=Mn("div"),Tn=Rn(Tn),Pn=Tn+"Origin",nn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",an=!!Rn("perspective"),en=1)},jn=function t(e){var n,r=Mn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(tn.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(s){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),tn.removeChild(r),this.style.cssText=a,n},Ln=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Nn=function(t){var e;try{e=t.getBBox()}catch(n){e=jn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===jn||(e=jn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Ln(t,["x","cx","x1"])||0,y:+Ln(t,["y","cy","y1"])||0,width:0,height:0}},Dn=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Nn(t))},Fn=function(t,e){if(e){var n=t.style;e in sn&&e!==Pn&&(e=Tn),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(fn,"-$1").toLowerCase())):n.removeAttribute(e)}},Bn=function(t,e,n,r,i,o){var a=new Xe(t._pt,e,n,0,1,o?bn:An);return t._pt=a,a.b=r,a.e=i,t._props.push(n),a},zn={deg:1,rad:1,turn:1},Un=function t(e,n,r,i){var o,a,s,u,c=parseFloat(r)||0,l=(r+"").trim().substr((c+"").length)||"px",f=nn.style,h=hn.test(n),p="svg"===e.tagName.toLowerCase(),d=(p?"client":"offset")+(h?"Width":"Height"),g=100,y="px"===i,v="%"===i;return i===l||!c||zn[i]||zn[l]?c:("px"!==l&&!y&&(c=t(e,n,r,"px")),u=e.getCTM&&Dn(e),v&&(sn[n]||~n.indexOf("adius"))?it(c/(u?e.getBBox()[h?"width":"height"]:e[d])*g):(f[h?"width":"height"]=g+(y?l:i),a=~n.indexOf("adius")||"em"===i&&e.appendChild&&!p?e:e.parentNode,u&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==$e&&a.appendChild||(a=$e.body),(s=a._gsap)&&v&&s.width&&h&&s.time===ce.time?it(c/s.width*g):((v||"%"===l)&&(f.position=Cn(e,"position")),a===e&&(f.position="static"),a.appendChild(nn),o=nn[d],a.removeChild(nn),f.position="absolute",h&&v&&((s=et(a)).time=ce.time,s.width=a[d]),it(y?o*c/g:o&&c?g/o*c:0))))},Gn=function(t,e,n,r){var i;return en||kn(),e in dn&&"transform"!==e&&~(e=dn[e]).indexOf(",")&&(e=e.split(",")[0]),sn[e]&&"transform"!==e?(i=tr(t,r),i="transformOrigin"!==e?i[e]:er(Cn(t,Pn))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Xn[e]&&Xn[e](t,e,n)||Cn(t,e)||nt(t,e)||("opacity"===e?1:0)),n&&!~(i+"").indexOf(" ")?Un(t,e,i,n)+n:i},Vn=function(t,e,n,r){if(!n||"none"===n){var i=Rn(e,t,1),o=i&&Cn(t,i,1);o&&o!==n?(e=i,n=o):"borderColor"===e&&(n=Cn(t,"borderTopColor"))}var a,s,u,c,l,f,h,d,g,y,v,m,A=new Xe(this._pt,t.style,e,0,1,Ue),b=0,_=0;if(A.b=n,A.e=r,n+="","auto"===(r+="")&&(t.style[e]=r,r=Cn(t,e)||r,t.style[e]=n),ue(a=[n,r]),r=a[1],u=(n=a[0]).match(L)||[],(r.match(L)||[]).length){for(;s=L.exec(r);)h=s[0],g=r.substring(b,s.index),l?l=(l+1)%5:"rgba("!==g.substr(-5)&&"hsla("!==g.substr(-5)||(l=1),h!==(f=u[_++]||"")&&(c=parseFloat(f)||0,v=f.substr((c+"").length),(m="="===h.charAt(1)?+(h.charAt(0)+"1"):0)&&(h=h.substr(2)),d=parseFloat(h),y=h.substr((d+"").length),b=L.lastIndex-y.length,y||(y=y||p.units[e]||v,b===r.length&&(r+=y,A.e+=y)),v!==y&&(c=Un(t,e,f,y)||0),A._pt={_next:A._pt,p:g||1===_?g:",",s:c,c:m?m*d:d-c,m:l&&l<4?Math.round:0});A.c=b<r.length?r.substring(b,r.length):""}else A.r="display"===e&&"none"===r?bn:An;return D.test(r)&&(A.e=0),this._pt=A,A},qn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Hn=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(t=n,n=r,r=t),e[0]=qn[n]||n,e[1]=qn[r]||r,e.join(" ")},Wn=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],sn[n]&&(r=1,n="transformOrigin"===n?Pn:Tn),Fn(o,n);r&&(Fn(o,Tn),u&&(u.svg&&o.removeAttribute("transform"),tr(o,1),u.uncache=1))}},Xn={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new Xe(t._pt,e,n,0,0,Wn);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},Yn=[1,0,0,1,0,0],Qn={},Zn=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Kn=function(t){var e=Cn(t,Tn);return Zn(e)?Yn:e.substr(7).match(j).map(it)},Jn=function(t,e){var n,r,i,o,a=t._gsap||et(t),s=t.style,u=Kn(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Yn:u:(u!==Yn||t.offsetParent||t===tn||a.svg||(i=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(o=1,r=t.nextSibling,tn.appendChild(t)),u=Kn(t),i?s.display=i:Fn(t,"display"),o&&(r?n.insertBefore(t,r):n?n.appendChild(t):tn.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},$n=function(t,e,n,r,i,o){var a,s,u,c=t._gsap,l=i||Jn(t,!0),f=c.xOrigin||0,h=c.yOrigin||0,p=c.xOffset||0,d=c.yOffset||0,g=l[0],y=l[1],v=l[2],m=l[3],A=l[4],b=l[5],_=e.split(" "),w=parseFloat(_[0])||0,x=parseFloat(_[1])||0;n?l!==Yn&&(s=g*m-y*v)&&(u=w*(-y/s)+x*(g/s)-(g*b-y*A)/s,w=w*(m/s)+x*(-v/s)+(v*b-m*A)/s,x=u):(w=(a=Nn(t)).x+(~_[0].indexOf("%")?w/100*a.width:w),x=a.y+(~(_[1]||_[0]).indexOf("%")?x/100*a.height:x)),r||!1!==r&&c.smooth?(A=w-f,b=x-h,c.xOffset=p+(A*g+b*v)-A,c.yOffset=d+(A*y+b*m)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=x,c.smooth=!!r,c.origin=e,c.originIsAbsolute=!!n,t.style[Pn]="0px 0px",o&&(Bn(o,c,"xOrigin",f,w),Bn(o,c,"yOrigin",h,x),Bn(o,c,"xOffset",p,c.xOffset),Bn(o,c,"yOffset",d,c.yOffset)),t.setAttribute("data-svg-origin",w+" "+x)},tr=function(t,e){var n=t._gsap||new we(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,a,s,u,c,l,f,h,d,g,y,v,m,A,b,_,w,x,E,O,S,T,P,M,C,I,R,k,j,L,N=t.style,D=n.scaleX<0,F="px",B="deg",z=Cn(t,Pn)||"0";return r=i=o=u=c=l=f=h=d=0,a=s=1,n.svg=!(!t.getCTM||!Dn(t)),v=Jn(t,n.svg),n.svg&&(T=!n.uncache&&t.getAttribute("data-svg-origin"),$n(t,T||z,!!T||n.originIsAbsolute,!1!==n.smooth,v)),g=n.xOrigin||0,y=n.yOrigin||0,v!==Yn&&(_=v[0],w=v[1],x=v[2],E=v[3],r=O=v[4],i=S=v[5],6===v.length?(a=Math.sqrt(_*_+w*w),s=Math.sqrt(E*E+x*x),u=_||w?ln(w,_)*un:0,(f=x||E?ln(x,E)*un+u:0)&&(s*=Math.cos(f*cn)),n.svg&&(r-=g-(g*_+y*x),i-=y-(g*w+y*E))):(L=v[6],k=v[7],C=v[8],I=v[9],R=v[10],j=v[11],r=v[12],i=v[13],o=v[14],c=(m=ln(L,R))*un,m&&(T=O*(A=Math.cos(-m))+C*(b=Math.sin(-m)),P=S*A+I*b,M=L*A+R*b,C=O*-b+C*A,I=S*-b+I*A,R=L*-b+R*A,j=k*-b+j*A,O=T,S=P,L=M),l=(m=ln(-x,R))*un,m&&(A=Math.cos(-m),j=E*(b=Math.sin(-m))+j*A,_=T=_*A-C*b,w=P=w*A-I*b,x=M=x*A-R*b),u=(m=ln(w,_))*un,m&&(T=_*(A=Math.cos(m))+w*(b=Math.sin(m)),P=O*A+S*b,w=w*A-_*b,S=S*A-O*b,_=T,O=P),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,l=180-l),a=it(Math.sqrt(_*_+w*w+x*x)),s=it(Math.sqrt(S*S+L*L)),m=ln(O,S),f=Math.abs(m)>2e-4?m*un:0,d=j?1/(j<0?-j:j):0),n.svg&&(T=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Zn(Cn(t,Tn)),T&&t.setAttribute("transform",T))),Math.abs(f)>90&&Math.abs(f)<270&&(D?(a*=-1,f+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,f+=f<=0?180:-180)),n.x=((n.xPercent=r&&Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)?0:r)+F,n.y=((n.yPercent=i&&Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)?0:i)+F,n.z=o+F,n.scaleX=it(a),n.scaleY=it(s),n.rotation=it(u)+B,n.rotationX=it(c)+B,n.rotationY=it(l)+B,n.skewX=f+B,n.skewY=h+B,n.transformPerspective=d+F,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(N[Pn]=er(z)),n.xOffset=n.yOffset=0,n.force3D=p.force3D,n.renderTransform=n.svg?ur:an?sr:rr,n.uncache=0,n},er=function(t){return(t=t.split(" "))[0]+" "+t[1]},nr=function(t,e,n){var r=Dt(e);return it(parseFloat(e)+parseFloat(Un(t,"x",n+"px",r)))+r},rr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,sr(t,e)},ir="0deg",or="0px",ar=") ",sr=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,f=n.skewX,h=n.skewY,p=n.scaleX,d=n.scaleY,g=n.transformPerspective,y=n.force3D,v=n.target,m=n.zOrigin,A="",b="auto"===y&&t&&1!==t||!0===y;if(m&&(l!==ir||c!==ir)){var _,w=parseFloat(c)*cn,x=Math.sin(w),E=Math.cos(w);w=parseFloat(l)*cn,_=Math.cos(w),o=nr(v,o,x*_*-m),a=nr(v,a,-Math.sin(w)*-m),s=nr(v,s,E*_*-m+m)}g!==or&&(A+="perspective("+g+ar),(r||i)&&(A+="translate("+r+"%, "+i+"%) "),(b||o!==or||a!==or||s!==or)&&(A+=s!==or||b?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+ar),u!==ir&&(A+="rotate("+u+ar),c!==ir&&(A+="rotateY("+c+ar),l!==ir&&(A+="rotateX("+l+ar),f===ir&&h===ir||(A+="skew("+f+", "+h+ar),1===p&&1===d||(A+="scale("+p+", "+d+ar),v.style[Tn]=A||"translate(0, 0)"},ur=function(t,e){var n,r,i,o,a,s=e||this,u=s.xPercent,c=s.yPercent,l=s.x,f=s.y,h=s.rotation,p=s.skewX,d=s.skewY,g=s.scaleX,y=s.scaleY,v=s.target,m=s.xOrigin,A=s.yOrigin,b=s.xOffset,_=s.yOffset,w=s.forceCSS,x=parseFloat(l),E=parseFloat(f);h=parseFloat(h),p=parseFloat(p),(d=parseFloat(d))&&(p+=d=parseFloat(d),h+=d),h||p?(h*=cn,p*=cn,n=Math.cos(h)*g,r=Math.sin(h)*g,i=Math.sin(h-p)*-y,o=Math.cos(h-p)*y,p&&(d*=cn,a=Math.tan(p-d),i*=a=Math.sqrt(1+a*a),o*=a,d&&(a=Math.tan(d),n*=a=Math.sqrt(1+a*a),r*=a)),n=it(n),r=it(r),i=it(i),o=it(o)):(n=g,o=y,r=i=0),(x&&!~(l+"").indexOf("px")||E&&!~(f+"").indexOf("px"))&&(x=Un(v,"x",l,"px"),E=Un(v,"y",f,"px")),(m||A||b||_)&&(x=it(x+m-(m*n+A*i)+b),E=it(E+A-(m*r+A*o)+_)),(u||c)&&(a=v.getBBox(),x=it(x+u/100*a.width),E=it(E+c/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+x+","+E+")",v.setAttribute("transform",a),w&&(v.style[Tn]=a)},cr=function(t,e,n,r,i,o){var a,s,u=360,c=x(i),l=parseFloat(i)*(c&&~i.indexOf("rad")?un:1),f=o?l*o:l-r,h=r+f+"deg";return c&&("short"===(a=i.split("_")[1])&&(f%=u)!==f%180&&(f+=f<0?u:-360),"cw"===a&&f<0?f=(f+36e9)%u-~~(f/u)*u:"ccw"===a&&f>0&&(f=(f-36e9)%u-~~(f/u)*u)),t._pt=s=new Xe(t._pt,e,n,r,f,yn),s.e=h,s.u="deg",t._props.push(n),s},lr=function(t,e,n){var r,i,o,a,s,u,c,l=rn.style,f=n._gsap;for(i in l.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",l[Tn]=e,$e.body.appendChild(rn),r=tr(rn,1),sn)(o=f[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=Dt(o)!==(c=Dt(a))?Un(n,i,o,c):parseFloat(o),u=parseFloat(a),t._pt=new Xe(t._pt,f,i,s,u-s,gn),t._pt.u=c||0,t._props.push(i));$e.body.removeChild(rn)};rt("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",o="Left",a=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return e<2?t+n:"border"+n+t}));Xn[e>1?"border"+t:t]=function(t,e,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(e){return Gn(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,i)}}));var fr={name:"css",register:kn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,s,u,c,l,f,h,d,g,y,v,m,A,b,_=this._props,w=t.style;for(f in en||kn(),e)if("autoRound"!==f&&(a=e[f],!Q[f]||!Pe(f,e,n,r,t,i)))if(c=typeof a,l=Xn[f],"function"===c&&(c=typeof(a=a.call(n,r,t,i))),"string"===c&&~a.indexOf("random(")&&(a=Yt(a)),l)l(this,t,f,a,n)&&(b=1);else if("--"===f.substr(0,2))this.add(w,"setProperty",getComputedStyle(t).getPropertyValue(f)+"",a+"",r,i,0,0,f);else if("undefined"!==c){if(o=Gn(t,f),u=parseFloat(o),(g="string"===c&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),s=parseFloat(a),f in dn&&("autoAlpha"===f&&(1===u&&"hidden"===Gn(t,"visibility")&&s&&(u=0),Bn(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==f&&"transform"!==f&&~(f=dn[f]).indexOf(",")&&(f=f.split(",")[0])),y=f in sn)if(v||((m=t._gsap).renderTransform||tr(t),A=!1!==e.smoothOrigin&&m.smooth,(v=this._pt=new Xe(this._pt,w,Tn,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===f)this._pt=new Xe(this._pt,m,"scaleY",m.scaleY,g?g*s:s-m.scaleY),_.push("scaleY",f),f+="X";else{if("transformOrigin"===f){a=Hn(a),m.svg?$n(t,a,0,A,0,this):((d=parseFloat(a.split(" ")[2])||0)!==m.zOrigin&&Bn(this,m,"zOrigin",m.zOrigin,d),Bn(this,w,f,er(o),er(a)));continue}if("svgOrigin"===f){$n(t,a,1,A,0,this);continue}if(f in Qn){cr(this,m,f,u,a,g);continue}if("smoothOrigin"===f){Bn(this,m,"smooth",m.smooth,a);continue}if("force3D"===f){m[f]=a;continue}if("transform"===f){lr(this,a,t);continue}}else f in w||(f=Rn(f)||f);if(y||(s||0===s)&&(u||0===u)&&!pn.test(a)&&f in w)s||(s=0),(h=(o+"").substr((u+"").length))!==(d=(a+"").substr((s+"").length)||(f in p.units?p.units[f]:h))&&(u=Un(t,f,o,d)),this._pt=new Xe(this._pt,y?m:w,f,u,g?g*s:s-u,"px"!==d||!1===e.autoRound||y?gn:mn),this._pt.u=d||0,h!==d&&(this._pt.b=o,this._pt.r=vn);else if(f in w)Vn.call(this,t,f,o,a);else{if(!(f in t)){G(f,a);continue}this.add(t,f,t[f],a,r,i)}_.push(f)}b&&We(this)},get:Gn,aliases:dn,getSetter:function(t,e,n){var r=dn[e];return r&&r.indexOf(",")<0&&(e=r),e in sn&&e!==Pn&&(t._gsap.x||Gn(t,"x"))?n&&on===n?"scale"===e?En:xn:(on=n||{})&&("scale"===e?On:Sn):t.style&&!S(t.style[e])?_n:~e.indexOf("-")?wn:Fe(t,e)},core:{_removeProperty:Fn,_getMatrix:Jn}};Ke.utils.checkPrefix=Rn,function(t,e,n,r){var i=rt(t+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){sn[t]=1}));rt(e,(function(t){p.units[t]="deg",Qn[t]=1})),dn[i[13]]=t+","+e,rt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");dn[e[1]]=i[e[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),rt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){p.units[t]="px"})),Ke.registerPlugin(fr);var hr=Ke.registerPlugin(fr)||Ke;hr.core.Tween},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p}));var r=n(12),i=n(10),o=n(97),a=n(31),s=6144,u=6145,c=6146,l=34041,f="clear: bad arguments";function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,o=e.color,s=void 0===o?null:o,u=e.depth,c=void 0===u?null:u,l=e.stencil,h=void 0===l?null:l,p={};r&&(p.framebuffer=r);var d=0;s&&(d|=16384,!0!==s&&(p.clearColor=s)),c&&(d|=256,!0!==c&&(p.clearDepth=c)),h&&(d|=1024,!0!==c&&(p.clearStencil=c)),Object(a.a)(0!==d,f),Object(i.l)(t,p,(function(){t.clear(d)}))}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,h=void 0===n?null:n,p=e.buffer,d=void 0===p?s:p,g=e.drawBuffer,y=void 0===g?0:g,v=e.value,m=void 0===v?[0,0,0,0]:v;Object(o.a)(t),Object(i.l)(t,{framebuffer:h},(function(){switch(d){case s:switch(m.constructor){case Int32Array:t.clearBufferiv(d,y,m);break;case Uint32Array:t.clearBufferuiv(d,y,m);break;case Float32Array:default:t.clearBufferfv(d,y,m)}break;case u:t.clearBufferfv(u,0,[m]);break;case c:t.clearBufferiv(c,0,[m]);break;case l:var e=Object(r.a)(m,2),n=e[0],i=e[1];t.clearBufferfi(l,0,n,i);break;default:Object(a.a)(!1,f)}}))}},function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?jt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function f(){this.root_=null,this.size_=0}function h(){}function p(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var v=function(){};v.prototype.interfaces_=function(){return[]},v.prototype.getClass=function(){return v},v.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),A=function(){},b={MAX_VALUE:{configurable:!0}};A.isNaN=function(t){return Number.isNaN(t)},A.doubleToLongBits=function(t){return t},A.longBitsToDouble=function(t){return t},A.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(A,b);var _=function(){},w=function(){},x=function(){},E=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},O={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},E.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!v.equalsWithTolerance(this.x,e.x,n)&&!!v.equalsWithTolerance(this.y,e.y,n)}},E.prototype.getOrdinate=function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new m("Invalid ordinate index: "+t)},E.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||A.isNaN(this.z))&&A.isNaN(t.z)},E.prototype.equals=function(t){return t instanceof E&&this.equals2D(t)},E.prototype.equalInZ=function(t,e){return v.equalsWithTolerance(this.z,t.z,e)},E.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},E.prototype.clone=function(){},E.prototype.copy=function(){return new E(this)},E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},E.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},E.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},E.prototype.hashCode=function(){var t=17;return 37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},E.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},E.prototype.interfaces_=function(){return[_,w,e]},E.prototype.getClass=function(){return E},E.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=A.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},O.DimensionalComparator.get=function(){return S},O.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},O.NULL_ORDINATE.get=function(){return A.NaN},O.X.get=function(){return 0},O.Y.get=function(){return 1},O.Z.get=function(){return 2},Object.defineProperties(E,O);var S=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};S.prototype.compare=function(t,e){var n=t,r=e,i=S.compare(n.x,r.x);if(0!==i)return i;var o=S.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:S.compare(n.z,r.z)},S.prototype.interfaces_=function(){return[x]},S.prototype.getClass=function(){return S},S.compare=function(t,e){return t<e?-1:t>e?1:A.isNaN(t)?A.isNaN(e)?0:-1:A.isNaN(e)?1:0};var T=function(){};T.prototype.create=function(){},T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T};var P=function(){},M={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e";case P.BOUNDARY:return"b";case P.INTERIOR:return"i";case P.NONE:return"-"}throw new m("Unknown location value: "+t)},M.INTERIOR.get=function(){return 0},M.BOUNDARY.get=function(){return 1},M.EXTERIOR.get=function(){return 2},M.NONE.get=function(){return-1},Object.defineProperties(P,M);var C=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},I=function(){},R={LOG_10:{configurable:!0}};I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I},I.log10=function(t){var e=Math.log(t);return A.isInfinite(e)||A.isNaN(e)?e:e/I.LOG_10},I.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},I.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},I.wrap=function(t,e){return t<0?e- -t%e:t%e},I.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},I.average=function(t,e){return(t+e)/2},R.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(I,R);var k=function(t){this.str=t};k.prototype.append=function(t){this.str+=t},k.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},k.prototype.toString=function(t){return this.str};var j=function(t){this.value=t};j.prototype.intValue=function(){return this.value},j.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},j.isNaN=function(t){return Number.isNaN(t)};var L=function(){};L.isWhitespace=function(t){return t<=32&&t>=0||127===t},L.toUpperCase=function(t){return t.toUpperCase()};var N=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},D={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};N.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},N.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=N.magnitude(n._hi),i=N.TEN.pow(r);(n=n.divide(i)).gt(N.TEN)?(n=n.divide(N.TEN),r+=1):n.lt(N.ONE)&&(n=n.multiply(N.TEN),r-=1);for(var o=r+1,a=new k,s=N.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),n=n.subtract(N.valueOf(c)).multiply(N.TEN),l&&n.selfAdd(N.TEN);var h=!0,p=N.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(h=!1),!h)break}return e[0]=r,a.toString()},N.prototype.sqr=function(){return this.multiply(this)},N.prototype.doubleValue=function(){return this._hi+this._lo},N.prototype.subtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},N.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},N.prototype.isZero=function(){return 0===this._hi&&0===this._lo},N.prototype.selfSubtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},N.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},N.prototype.min=function(t){return this.le(t)?this:t},N.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/n,f=(i=(c=N.SPLIT*u)-(i=c-u))*(a=(f=N.SPLIT*n)-(a=f-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(c=(this._hi-l-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+c,this}},N.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},N.prototype.divide=function(){if(arguments[0]instanceof N){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=N.SPLIT*o)-(e=a-o)),u=e*(r=(u=N.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new N(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return A.isNaN(c)?N.createNaN():N.copy(this).selfDivide(c,0)}},N.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},N.prototype.pow=function(t){if(0===t)return N.valueOf(1);var e=new N(this),n=N.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},N.prototype.ceil=function(){if(this.isNaN())return N.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new N(t,e)},N.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},N.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},N.prototype.setValue=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},N.prototype.max=function(t){return this.ge(t)?this:t},N.prototype.sqrt=function(){if(this.isZero())return N.valueOf(0);if(this.isNegative())return N.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=N.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},N.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,h=null,p=null,d=null,g=null,y=null;p=this._hi+u,f=this._lo+c,d=p-(g=p-this._hi),h=f-(y=f-this._lo);var v=(l=p+(g=(d=u-g+(this._hi-d))+f))+(g=(h=c-y+(this._lo-h))+(g+(p-l))),m=g+(l-v);return this._hi=v,this._lo=m,this}},N.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=N.SPLIT*this._hi)-this._hi,c=N.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},N.prototype.selfSqr=function(){return this.selfMultiply(this)},N.prototype.floor=function(){if(this.isNaN())return N.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new N(t,e)},N.prototype.negate=function(){return this.isNaN()?this:new N(-this._hi,-this._lo)},N.prototype.clone=function(){},N.prototype.multiply=function(){if(arguments[0]instanceof N){var t=arguments[0];return t.isNaN()?N.createNaN():N.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return A.isNaN(e)?N.createNaN():N.copy(this).selfMultiply(e,0)}},N.prototype.isNaN=function(){return A.isNaN(this._hi)},N.prototype.intValue=function(){return Math.trunc(this._hi)},N.prototype.toString=function(){var t=N.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},N.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+N.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+N.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},N.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=N.SPLIT*i)-(t=o-i)),n=(s=N.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new N(u,i-u+o)},N.prototype.toSciNotation=function(){if(this.isZero())return N.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=N.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},N.prototype.abs=function(){return this.isNaN()?N.NaN:this.isNegative()?this.negate():new N(this)},N.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},N.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},N.prototype.add=function(){if(arguments[0]instanceof N){var t=arguments[0];return N.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return N.copy(this).selfAdd(e)}},N.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof N){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},N.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},N.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},N.prototype.trunc=function(){return this.isNaN()?N.NaN:this.isPositive()?this.floor():this.ceil()},N.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},N.prototype.interfaces_=function(){return[e,_,w]},N.prototype.getClass=function(){return N},N.sqr=function(t){return N.valueOf(t).selfMultiply(t)},N.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return N.parse(t)}if("number"==typeof arguments[0])return new N(arguments[0])},N.sqrt=function(t){return N.valueOf(t).sqrt()},N.parse=function(t){for(var e=0,n=t.length;L.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new N,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,L.isDigit(c)){var l=c-"0";o.selfMultiply(N.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=j.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var h=o,p=a-s-u;if(0===p)h=o;else if(p>0){var d=N.TEN.pow(p);h=o.divide(d)}else if(p<0){var g=N.TEN.pow(-p);h=o.multiply(g)}return r?h.negate():h},N.createNaN=function(){return new N(A.NaN,A.NaN)},N.copy=function(t){return new N(t)},N.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},N.stringOfChar=function(t,e){for(var n=new k,r=0;r<e;r++)n.append(t);return n.toString()},D.PI.get=function(){return new N(3.141592653589793,12246467991473532e-32)},D.TWO_PI.get=function(){return new N(6.283185307179586,24492935982947064e-32)},D.PI_2.get=function(){return new N(1.5707963267948966,6123233995736766e-32)},D.E.get=function(){return new N(2.718281828459045,14456468917292502e-32)},D.NaN.get=function(){return new N(A.NaN,A.NaN)},D.EPS.get=function(){return 123259516440783e-46},D.SPLIT.get=function(){return 134217729},D.MAX_PRINT_DIGITS.get=function(){return 32},D.TEN.get=function(){return N.valueOf(10)},D.ONE.get=function(){return N.valueOf(1)},D.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},D.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(N,D);var F=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var r=F.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=N.valueOf(e.x).selfAdd(-t.x),o=N.valueOf(e.y).selfAdd(-t.y),a=N.valueOf(n.x).selfAdd(-e.x),s=N.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},F.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,r){var i=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(e.x).selfSubtract(t.x)),o=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),u=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=N.valueOf(t.x).selfAdd(N.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=N.valueOf(e.x).selfSubtract(t.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),h=N.valueOf(e.y).selfSubtract(t.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),p=f.subtract(h).selfDivide(a).doubleValue(),d=N.valueOf(n.y).selfAdd(N.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new E(l,d)},F.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return F.signum(a);r=i+o}else{if(!(i<0))return F.signum(a);if(o>=0)return F.signum(a);r=-i-o}var s=F.DP_SAFE_EPSILON*r;return a>=s||-a>=s?F.signum(a):2},F.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,B);var z=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},z.prototype.setOrdinate=function(t,e,n){},z.prototype.size=function(){},z.prototype.getOrdinate=function(t,e){},z.prototype.getCoordinate=function(){},z.prototype.getCoordinateCopy=function(t){},z.prototype.getDimension=function(){},z.prototype.getX=function(t){},z.prototype.clone=function(){},z.prototype.expandEnvelope=function(t){},z.prototype.copy=function(){},z.prototype.getY=function(t){},z.prototype.toCoordinateArray=function(){},z.prototype.interfaces_=function(){return[w]},z.prototype.getClass=function(){return z},Object.defineProperties(z,U);var G=function(){},V=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(G),q=function(){};q.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var H=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],g=f.y-h.y,y=h.x-f.x,v=f.x*h.y-h.x*f.y,m=p.y-d.y,A=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-A*v,this.y=m*v-g*b,this.w=g*A-m*y}};H.prototype.getY=function(){var t=this.y/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new V;return t},H.prototype.getX=function(){var t=this.x/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new V;return t},H.prototype.getCoordinate=function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},H.prototype.interfaces_=function(){return[]},H.prototype.getClass=function(){return H},H.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,f=(o*c-u*a)/l,h=(s*a-i*c)/l;if(A.isNaN(f)||A.isInfinite(f)||A.isNaN(h)||A.isInfinite(h))throw new V;return new E(f,h)};var W=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},X={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(t){if(!(t instanceof W))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new W(e,r,n,i)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof W){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},W.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},W.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},W.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},W.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},W.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[_,e]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,X);var Y={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Q=function(t){this.geometryFactory=t||new ve};Q.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Y.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Y.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Q.prototype.write=function(t){return this.extractGeometry(t)},Q.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Y.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Y.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Y.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Y.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Y.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Y.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Y.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Y.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Y.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Y.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Q(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new k;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new W(this._inputLines[0][0],this._inputLines[0][1]),n=new W(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,W.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=H.intersection(t,n,r,i)}catch(a){if(!(a instanceof V))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new E(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=F.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&q.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new E(t),o=new E(e),a=new E(n),s=new E(r),u=new E;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=W.intersects(e,n,r),a=W.intersects(e,n,i),s=W.intersects(r,i,e),u=W.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,p=((o>c?o:c)+(s<f?s:f))/2,d=((a>l?a:l)+(u<h?u:h))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!W.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new E(r):0===a?this._intPt[0]=new E(i):0===s?this._intPt[0]=new E(e):0===u&&(this._intPt[0]=new E(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof E&&C(arguments[1],z)){for(var t=arguments[1],e=new at(arguments[0]),n=new E,r=new E,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],c=o[s-1];if(a.countSegment(u,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(C(arguments[0],z)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new E,c=new E,l=new E;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var h=0,p=1;p<s-1;p++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(p+1,l),l.x-=f,h+=c.x*(u.y-l.y);return h/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(W.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?I.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==P.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=st.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[w,_,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return ht},Object.defineProperties(lt,ft);var ht=function(){};ht.interfaces_=function(){return[ct]},ht.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return vt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return At},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new At},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>0},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var At=function(){};At.prototype.isInBoundary=function(t){return 1===t},At.prototype.interfaces_=function(){return[dt]},At.prototype.getClass=function(){return At};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var _t=function(){};_t.prototype.hasNext=function(){},_t.prototype.next=function(){},_t.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var xt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Et(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),Et=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(_t),Ot=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var f=arguments[0],h=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(f>0&&this.get(f-1).equals2D(h))return null;if(f<p&&this.get(f).equals2D(h))return null}}t.prototype.add.call(this,f,h)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],v=arguments[3],m=1;y>v&&(m=-1);for(var A=y;A!==v;A+=m)this.add(d[A],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(xt),St=function(){},Tt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Tt.ForwardComparator.get=function(){return Pt},Tt.BidirectionalComparator.get=function(){return Mt},Tt.coordArrayType.get=function(){return new Array(0).fill(null)},St.prototype.interfaces_=function(){return[]},St.prototype.getClass=function(){return St},St.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},St.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(St.indexOf(r,e)<0)return r}return null},St.scroll=function(t,e){var n=St.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);q.arraycopy(t,n,r,0,t.length-n),q.arraycopy(t,0,r,t.length-n,n),q.arraycopy(r,0,t,0,t.length)},St.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},St.intersection=function(t,e){for(var n=new Ot,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},St.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},St.removeRepeatedPoints=function(t){return St.hasRepeatedPoints(t)?new Ot(t,!1).toCoordinateArray():t},St.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},St.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},St.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new E(r[i+u])},St.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},St.envelope=function(t){for(var e=new W,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},St.toCoordinateArray=function(t){return t.toArray(St.coordArrayType)},St.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},St.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},St.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},St.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},St.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},St.extract=function(t,e,n){e=I.clamp(e,0,t.length);var r=(n=I.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(St,Tt);var Pt=function(){};Pt.prototype.compare=function(t,e){return St.compare(t,e)},Pt.prototype.interfaces_=function(){return[x]},Pt.prototype.getClass=function(){return Pt};var Mt=function(){};Mt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=St.compare(n,r);return St.isEqualReversed(n,r)?0:i},Mt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=St.increasingDirection(n),o=St.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},Mt.prototype.interfaces_=function(){return[x]},Mt.prototype.getClass=function(){return Mt};var Ct=function(){};Ct.prototype.get=function(){},Ct.prototype.put=function(){},Ct.prototype.size=function(){},Ct.prototype.values=function(){},Ct.prototype.entrySet=function(){};var It=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ct);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Rt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new kt(this)},e}(o),kt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(_t),jt=0;(f.prototype=new It).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:jt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:jt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=l(s(s(t)));1===a(e)?(u(s(t),jt),u(e,jt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),jt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(u(s(t),jt),u(n,jt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),jt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=jt},f.prototype.values=function(){var t=new xt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Rt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},f.prototype.size=function(){return this.size_};var Lt=function(){};Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt},h.prototype=new o,(p.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new Nt(this)};var Nt=function(t){this.treeSet_=t,this.position_=0};Nt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Nt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Nt.prototype.remove=function(){throw new i};var Dt=function(){};Dt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Dt.asList=function(t){for(var e=new xt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Ft=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new m("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(L.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Bt);var zt=function(){};zt.prototype.filter=function(t){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Gt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new W,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Dt.asList(this._geometries)),n=new p(Dt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),c=i.getGeometryN(s),l=u.compareToSameClass(c,r);if(0!==l)return l;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(C(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(C(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(C(arguments[0],zt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(C(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(lt),Vt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Gt),qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qt.prototype.getBoundary=function(){return this._geom instanceof Qt?this.boundaryLineString(this._geom):this._geom instanceof Vt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qt.prototype.computeBoundaryCoordinates=function(t){var e=new xt;this._endpointMap=new f;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return St.toCoordinateArray(e)},qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Ht,this._endpointMap.put(t,e)),e.count++},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.getBoundary=function(){return 1===arguments.length?new qt(arguments[0]).getBoundary():2===arguments.length?new qt(arguments[0],arguments[1]).getBoundary():void 0};var Ht=function(){this.count=null};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht};var Wt=function(){},Xt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Wt.split=function(t,e){for(var n=e.length,r=new xt,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Wt.toString=function(){if(1===arguments.length){var t=arguments[0];return Wt.SIMPLE_ORDINATE_FORMAT.format(t)}},Wt.spaces=function(t){return Wt.chars(" ",t)},Xt.NEWLINE.get=function(){return q.getProperty("line.separator")},Xt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,Xt);var Yt=function(){};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Yt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,z.X)===t.getOrdinate(e-1,z.X)&&t.getOrdinate(0,z.Y)===t.getOrdinate(e-1,z.Y)},Yt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!A.isNaN(a)||!A.isNaN(s)))return!1}return!0},Yt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Yt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Yt.copy(e,i-1,r,o,1);return r},Yt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Yt.swap(t,r,e-r)},Yt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Yt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Yt.copyCoord(t,e+o,n,r+o)},Yt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new k;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Yt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Yt.createClosedRing(t,e,4):e.getOrdinate(0,z.X)===e.getOrdinate(n-1,z.X)&&e.getOrdinate(0,z.Y)===e.getOrdinate(n-1,z.Y)?e:Yt.createClosedRing(t,e,n+1)},Yt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Yt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Yt.copy(e,0,r,o,1);return r};var Qt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Yt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Yt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(C(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(C(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(C(arguments[0],zt)||C(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(lt),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var t=new W;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(C(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(C(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(C(arguments[0],zt)||C(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(lt),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var $t=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o===(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=St.minCoordinate(e.getCoordinates());St.scroll(r,i),q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&St.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),c=i.getNumInteriorRing(),l=0;l<u&&l<c;){var f=this.getInteriorRingN(l),h=i.getInteriorRingN(l),p=f.compareToSameClass(h,r);if(0!==p)return p;l++}return l<u?1:l<c?-1:0}},e.prototype.apply=function(t){if(C(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(C(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(C(t,zt))t.filter(this);else if(C(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Gt),ee=function(t){function e(e,n){e instanceof E&&n instanceof ve&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Yt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Qt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new xt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Gt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Gt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Kt||t instanceof Qt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new xt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Vt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new xt,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Qt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new E}else if(C(arguments[0],z)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new E}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case z.X:this._coordinates[t].x=n;break;case z.Y:this._coordinates[t].y=n;break;case z.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case z.X:return this._coordinates[t].x;case z.Y:return this._coordinates[t].y;case z.Z:return this._coordinates[t].z}return A.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new E(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new k(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[z,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},fe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(C(arguments[0],z))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},le.prototype.interfaces_=function(){return[T,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},fe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fe.instanceObject.get=function(){return new le},Object.defineProperties(le,fe);var he=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new xt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ct),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new j(n).compareTo(new j(r))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return A.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,_]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new he},Object.defineProperties(ge,ye),pe.Type=ge,pe.FIXED=new ge("FIXED"),pe.FLOATING=new ge("FLOATING"),pe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ve=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?C(arguments[0],T)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ve.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},ve.prototype.createLineString=function(t){return t?t instanceof Array?new Qt(this.getCoordinateSequenceFactory().create(t),this):C(t,z)?new Qt(t,this):void 0:new Qt(this.getCoordinateSequenceFactory().create([]),this)},ve.prototype.createMultiLineString=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ve.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ve.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $t)return this.createMultiPolygon(ve.toPolygonArray(t));if(s instanceof Qt)return this.createMultiLineString(ve.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(ve.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ve.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ve.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(C(arguments[0],z))return new Kt(arguments[0],this)}},ve.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ve.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(C(arguments[0],z)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},ve.prototype.getSRID=function(){return this._SRID},ve.prototype.createGeometryCollection=function(){return 0===arguments.length?new Gt(null,this):1===arguments.length?new Gt(arguments[0],this):void 0},ve.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ve.prototype.getPrecisionModel=function(){return this._precisionModel},ve.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(C(arguments[0],z))return new ee(arguments[0],this)}},ve.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ve.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(C(arguments[0],z)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Yt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ve.prototype.interfaces_=function(){return[e]},ve.prototype.getClass=function(){return ve},ve.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.getDefaultCoordinateSequenceFactory=function(){return le.instance()},ve.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ve,me);var Ae=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ve};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!_e[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ae.indexOf(n)?_e[n].apply(this,[e.coordinates]):"GeometryCollection"===n?_e[n].apply(this,[e.geometries]):_e[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var _e={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!_e[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=_e.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new E(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_e.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=_e.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_e.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=_e.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=_e.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(_e.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},xe=function(t){this.geometryFactory=t||new ve,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};xe.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},xe.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ee=function(){this.parser=new be(this.geometryFactory)};Ee.prototype.write=function(t){return this.parser.write(t)};var Oe=function(){},Se={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe},Oe.opposite=function(t){return t===Oe.LEFT?Oe.RIGHT:t===Oe.RIGHT?Oe.LEFT:t},Se.ON.get=function(){return 0},Se.LEFT.get=function(){return 1},Se.RIGHT.get=function(){return 2},Object.defineProperties(Oe,Se),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new wt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Te=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Te.prototype.getCoordinate=function(){return this._minCoord},Te.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Te.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Te.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Oe.LEFT;return n[e].y<n[e+1].y&&(r=Oe.RIGHT),r},Te.prototype.getEdge=function(){return this._orientedDe},Te.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Te.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Te.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Oe.LEFT&&(this._orientedDe=this._minDe.getSym())},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Pe=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Me=function(){this.array_=[]};Me.prototype.addLast=function(t){this.array_.push(t)},Me.prototype.removeFirst=function(){return this.array_.shift()},Me.prototype.isEmpty=function(){return 0===this.array_.length};var Ce=function(){this._finder=null,this._dirEdgeList=new xt,this._nodes=new xt,this._rightMostCoord=null,this._env=null,this._finder=new Te};Ce.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ce.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ce.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ce.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Oe.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ce.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ce.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Oe.RIGHT)>=1&&e.getDepth(Oe.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ce.prototype.computeDepths=function(t){var e=new Rt,n=new Me,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Ce.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ce.prototype.getEnvelope=function(){if(null===this._env){for(var t=new W,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ce.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ce.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Oe.LEFT,t.getDepth(Oe.RIGHT)),e.setDepth(Oe.RIGHT,t.getDepth(Oe.LEFT))},Ce.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ce.prototype.getNodes=function(){return this._nodes},Ce.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ce.prototype.interfaces_=function(){return[_]},Ce.prototype.getClass=function(){return Ce};var Ie=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Oe.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Oe.ON]=o,this.location[Oe.LEFT]=a,this.location[Oe.RIGHT]=s}};Ie.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ie.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1;return!0},Ie.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Ie.prototype.isLine=function(){return 1===this.location.length},Ie.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Oe.ON]=this.location[Oe.ON],e[Oe.LEFT]=P.NONE,e[Oe.RIGHT]=P.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===P.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ie.prototype.getLocations=function(){return this.location},Ie.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Oe.LEFT];this.location[Oe.LEFT]=this.location[Oe.RIGHT],this.location[Oe.RIGHT]=t},Ie.prototype.toString=function(){var t=new k;return this.location.length>1&&t.append(P.toLocationSymbol(this.location[Oe.LEFT])),t.append(P.toLocationSymbol(this.location[Oe.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[Oe.RIGHT])),t.toString()},Ie.prototype.setLocations=function(t,e,n){this.location[Oe.ON]=t,this.location[Oe.LEFT]=e,this.location[Oe.RIGHT]=n},Ie.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Ie.prototype.isArea=function(){return this.location.length>1},Ie.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0;return!1},Ie.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Oe.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ie.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Ie.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ie.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie};var Re=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ie(e),this.elt[1]=new Ie(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ie(n.elt[0]),this.elt[1]=new Ie(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ie(P.NONE),this.elt[1]=new Ie(P.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Ie(o,a,s),this.elt[1]=new Ie(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Ie(P.NONE,P.NONE,P.NONE),this.elt[1]=new Ie(P.NONE,P.NONE,P.NONE),this.elt[u].setLocations(c,l,f)}};Re.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Re.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Re.prototype.isNull=function(t){return this.elt[t].isNull()},Re.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Re.prototype.isLine=function(t){return this.elt[t].isLine()},Re.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ie(t.elt[e]):this.elt[e].merge(t.elt[e])},Re.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Re.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Oe.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Re.prototype.toString=function(){var t=new k;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Re.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Re.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Re.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Oe.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Re.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Re.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Re.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ie(this.elt[t].location[0]))},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},Re.toLineLabel=function(t){for(var e=new Re(P.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var ke=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new xt,this._pts=new xt,this._label=new Re(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new xt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};ke.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},ke.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},ke.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Pe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},ke.prototype.getLinearRing=function(){return this._ring},ke.prototype.getCoordinate=function(t){return this._pts.get(t)},ke.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},ke.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},ke.prototype.isHole=function(){return this._isHole},ke.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},ke.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},ke.prototype.addHole=function(t){this._holes.add(t)},ke.prototype.isShell=function(){return null===this._shell},ke.prototype.getLabel=function(){return this._label},ke.prototype.getEdges=function(){return this._edges},ke.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},ke.prototype.getShell=function(){return this._shell},ke.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Oe.RIGHT);if(n===P.NONE)return null;if(this._label.getLocation(e)===P.NONE)return this._label.setLocation(e,n),null}},ke.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},ke.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var je=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),Le=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new xt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new je(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),Ne=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Ne.prototype.setVisited=function(t){this._isVisited=t},Ne.prototype.setInResult=function(t){this._isInResult=t},Ne.prototype.isCovered=function(){return this._isCovered},Ne.prototype.isCoveredSet=function(){return this._isCoveredSet},Ne.prototype.setLabel=function(t){this._label=t},Ne.prototype.getLabel=function(){return this._label},Ne.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ne.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Ne.prototype.isInResult=function(){return this._isInResult},Ne.prototype.isVisited=function(){return this._isVisited},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var De=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Re(0,P.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=P.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==P.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Re(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Re)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===P.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=P.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case P.BOUNDARY:n=P.INTERIOR;break;case P.INTERIOR:default:n=P.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),Fe=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof De){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new xt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===P.BOUNDARY&&e.add(r)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Be=function(){},ze={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},ze.NE.get=function(){return 0},ze.NW.get=function(){return 1},ze.SW.get=function(){return 2},ze.SE.get=function(){return 3},Object.defineProperties(Be,ze);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[_]},Ue.prototype.getClass=function(){return Ue};var Ge=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Re(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Oe.LEFT)===P.INTERIOR&&this._label.getLocation(e,Oe.RIGHT)===P.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Oe.LEFT]+"/"+this._depth[Oe.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Oe.LEFT&&(r=-1);var i=Oe.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(Ue),Ve=function(){};Ve.prototype.createNode=function(t){return new De(t,null)},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var qe=function(){if(this._edges=new xt,this._nodes=null,this._edgeEndList=new xt,0===arguments.length)this._nodes=new Fe(new Ve);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qe.prototype.find=function(t){return this._nodes.find(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof De){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},qe.prototype.debugPrintln=function(t){q.out.println(t)},qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===P.BOUNDARY},qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},qe.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},qe.prototype.getEdgeEnds=function(){return this._edgeEndList},qe.prototype.debugPrint=function(t){q.out.print(t)},qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},qe.prototype.insertEdge=function(t){this._edges.add(t)},qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ge(n,!0),i=new Ge(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qe.prototype.getNodes=function(){return this._nodes.values()},qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var He=function(){this._geometryFactory=null,this._shellList=new xt;var t=arguments[0];this._geometryFactory=t};He.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},He.prototype.computePolygons=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},He.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Pe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},He.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new xt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},He.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},He.prototype.buildMaximalEdgeRings=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Le(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},He.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},He.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},He.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(r)&&st.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},He.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},He.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qe.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new xt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var We=function(){};We.prototype.getBounds=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Xe=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xe.prototype.getItem=function(){return this._item},Xe.prototype.getBounds=function(){return this._bounds},Xe.prototype.interfaces_=function(){return[We,e]},Xe.prototype.getClass=function(){return Xe};var Ye=function(){this._size=null,this._items=null,this._size=0,this._items=new xt,this._items.add(null)};Ye.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ye.prototype.size=function(){return this._size},Ye.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Ye.prototype.clear=function(){this._size=0,this._items.clear()},Ye.prototype.isEmpty=function(){return 0===this._size},Ye.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Qe=function(){};Qe.prototype.visitItem=function(t){},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ke=function(){if(this._childBoundables=new xt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[We,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Dt.sort(n,e):Dt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$e.singletonList=function(t){var e=new xt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[_]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new xt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof Xe&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xe&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new xt:t}if(1===arguments.length){for(var e=arguments[0],n=new xt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xe?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xe(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new xt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Xe),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new xt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(C(arguments[2],Qe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Ke?this.query(i,u,o):u instanceof Xe?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(C(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var c=arguments[0],l=arguments[2],f=arguments[1].getChildBoundables(),h=0;h<f.size();h++){var p=f.get(h);this.getIntersectsOp().intersects(p.getBounds(),c)&&(p instanceof Ke?this.query(c,p,l):p instanceof Xe?l.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ke&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new xt;n.add(this.createNode(e));var r=new xt(t);$e.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new xt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new xt;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(C(arguments[2],Qe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(C(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new xt(t);$e.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(C(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,A.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&C(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new Ye;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),h=f.getDistance();if(h>=u)break;f.isLeaves()?(u=h,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Xe(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,p);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[x]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[x]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new W(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[_]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new Ot;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new xt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new j(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new E(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new j(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new E(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var fn=function(){};fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new m("Cannot compute the octant for two identical points "+i);return fn.octant(a,s)}};var hn=function(){};hn.prototype.getCoordinates=function(){},hn.prototype.size=function(){},hn.prototype.getCoordinate=function(t){},hn.prototype.isClosed=function(){},hn.prototype.setData=function(t){},hn.prototype.getData=function(){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[hn]},pn.prototype.getClass=function(){return pn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:fn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new E(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new xt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new E,this.p1=new E;else if(1===arguments.length){var t=arguments[0];this.p0=new E(t.p0),this.p1=new E(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(e,n),this.p1=new E(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?A.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=A.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return H.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof V))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new E(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||A.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=A.doubleToLongBits(this.p0.x);t^=31*A.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=A.doubleToLongBits(this.p1.x);return n^=31*A.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[_,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var vn=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new gn,this._overlapSeg2=new gn};vn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new W(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<l&&(r<f&&this.computeOverlapsInternal(t,l,n,r,f,o),f<i&&this.computeOverlapsInternal(t,l,n,f,i,o)),l<e&&(r<f&&this.computeOverlapsInternal(l,e,n,r,f,o),f<i&&this.computeOverlapsInternal(l,e,n,f,i,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var An=function(){};An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.getChainStartIndices=function(t){var e=0,n=new xt;n.add(new j(e));do{var r=An.findChainEnd(t,e);n.add(new j(r)),e=r}while(e<t.length-1);return An.toIntArray(n)},An.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},An.getChains=function(){if(1===arguments.length){var t=arguments[0];return An.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new xt,i=An.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new mn(e,i[o],i[o+1],n);r.add(a)}return r}},An.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var _n=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};_n.prototype.setSegmentIntersector=function(t){this._segInt=t},_n.prototype.interfaces_=function(){return[bn]},_n.prototype.getClass=function(){return _n};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new xt,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=An.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new xn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return xn},Object.defineProperties(e,n),e}(_n),xn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vn),En=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},On={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};En.prototype.getEndCapStyle=function(){return this._endCapStyle},En.prototype.isSingleSided=function(){return this._isSingleSided},En.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=En.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=En.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==En.JOIN_ROUND&&(this._quadrantSegments=En.DEFAULT_QUADRANT_SEGMENTS)},En.prototype.getJoinStyle=function(){return this._joinStyle},En.prototype.setJoinStyle=function(t){this._joinStyle=t},En.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},En.prototype.getSimplifyFactor=function(){return this._simplifyFactor},En.prototype.getQuadrantSegments=function(){return this._quadrantSegments},En.prototype.setEndCapStyle=function(t){this._endCapStyle=t},En.prototype.getMitreLimit=function(){return this._mitreLimit},En.prototype.setMitreLimit=function(t){this._mitreLimit=t},En.prototype.setSingleSided=function(t){this._isSingleSided=t},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},On.CAP_ROUND.get=function(){return 1},On.CAP_FLAT.get=function(){return 2},On.CAP_SQUARE.get=function(){return 3},On.JOIN_ROUND.get=function(){return 1},On.JOIN_MITRE.get=function(){return 2},On.JOIN_BEVEL.get=function(){return 3},On.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},On.DEFAULT_MITRE_LIMIT.get=function(){return 5},On.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(En,On);var Sn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Tn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Sn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Sn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Sn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Sn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Sn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Sn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Sn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Sn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Sn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Sn.DELETE;)e++;return e},Sn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Sn.prototype.collapseLine=function(){for(var t=new Ot,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Sn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.simplify=function(t,e){return new Sn(t).simplify(e)},Tn.INIT.get=function(){return 0},Tn.DELETE.get=function(){return 1},Tn.KEEP.get=function(){return 1},Tn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Sn,Tn);var Pn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new xt},Mn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Pn.prototype.getCoordinates=function(){return this._ptList.toArray(Pn.COORDINATE_ARRAY_TYPE)},Pn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Pn.prototype.addPt=function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Pn.prototype.revere=function(){},Pn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Pn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Pn.prototype.toString=function(){return(new ve).createLineString(this.getCoordinates()).toString()},Pn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Pn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Mn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Pn,Mn);var Cn=function(){},In={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.toDegrees=function(t){return 180*t/Math.PI},Cn.normalize=function(t){for(;t>Math.PI;)t-=Cn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Cn.PI_TIMES_2;return t},Cn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Cn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Cn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Cn.interiorAngle=function(t,e,n){var r=Cn.angle(e,t),i=Cn.angle(e,n);return Math.abs(i-r)},Cn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Cn.PI_TIMES_2;t>=Cn.PI_TIMES_2&&(t=0)}else{for(;t>=Cn.PI_TIMES_2;)t-=Cn.PI_TIMES_2;t<0&&(t=0)}return t},Cn.angleBetween=function(t,e,n){var r=Cn.angle(e,t),i=Cn.angle(e,n);return Cn.diff(r,i)},Cn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Cn.toRadians=function(t){return t*Math.PI/180},Cn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Cn.COUNTERCLOCKWISE:n<0?Cn.CLOCKWISE:Cn.NONE},Cn.angleBetweenOriented=function(t,e,n){var r=Cn.angle(e,t),i=Cn.angle(e,n)-r;return i<=-Math.PI?i+Cn.PI_TIMES_2:i>Math.PI?i-Cn.PI_TIMES_2:i},In.PI_TIMES_2.get=function(){return 2*Math.PI},In.PI_OVER_2.get=function(){return Math.PI/2},In.PI_OVER_4.get=function(){return Math.PI/4},In.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},In.CLOCKWISE.get=function(){return st.CLOCKWISE},In.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Cn,In);var Rn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===En.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},kn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Oe.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Oe.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Oe.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Oe.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case En.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case En.CAP_SQUARE:var u=new E;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new E(r.p1.x+u.x,r.p1.y+u.y),l=new E(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Rn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=H.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof V))throw t;o=new E(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===st.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Rn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===En.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===En.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rn.prototype.createSquare=function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Cn.angle(i,this._seg0.p0),a=Cn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Cn.normalize(o+a),u=Cn.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),h=i.y+c*Math.sin(u),p=new E(f,h),d=new gn(i,p),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Oe.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Rn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Oe.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Rn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new E;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},Rn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rn.prototype.createCircle=function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===En.JOIN_BEVEL||this._bufParams.getJoinStyle()===En.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Rn.prototype.closeRing=function(){this._segList.closeRing()},Rn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},kn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},kn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},kn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},kn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rn,kn);var jn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};jn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&St.reverse(o),o},jn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Sn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Oe.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Sn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Oe.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},jn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Oe.RIGHT&&(r=-r);var i=Sn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},jn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Sn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Oe.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Sn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Oe.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},jn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:e.createCircle(t);break;case En.CAP_SQUARE:e.createSquare(t)}},jn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},jn.prototype.getBufferParameters=function(){return this._bufParams},jn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},jn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return jn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},jn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Sn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Oe.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Sn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Oe.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},jn.prototype.getSegGen=function(t){return new Rn(this._precisionModel,this._bufParams,t)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e};var Ln=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Nn={DepthSegment:{configurable:!0}};Ln.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new xt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(C(arguments[2],wt)&&arguments[0]instanceof E&&arguments[1]instanceof Ge){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var l=a.getDepth(Oe.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Oe.RIGHT));var f=new Dn(this._seg,l);s.add(f)}}else if(C(arguments[2],wt)&&arguments[0]instanceof E&&C(arguments[1],wt))for(var h=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(h,g,p)}},Ln.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Nn.DepthSegment.get=function(){return Dn},Object.defineProperties(Ln,Nn);var Dn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Dn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Dn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Dn.prototype.toString=function(){return this._upwardSeg.toString()},Dn.prototype.interfaces_=function(){return[_]},Dn.prototype.getClass=function(){return Dn};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,r){return t*r-e*n},Fn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,f=t.x-i,h=t.y-o,p=(c*f-s*h)/l,d=(-u*f+a*h)/l;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Fn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Fn.isAcute=function(t,e,n){return!!Cn.isAcute(t,e,n)&&!!Cn.isAcute(e,n,t)&&!!Cn.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*Fn.det(o,a,s,u),l=Fn.det(a,o*o+a*a,u,s*s+u*u),f=Fn.det(o,o*o+a*a,s,s*s+u*u);return new E(r-l/c,i+f/c)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new H(t.x+n/2,t.y+r/2,1),o=new H(t.x-r+n/2,t.y+n+r/2,1);return new H(i,o)},Fn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new E(t.x+i*o,t.y+i*a)},Fn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,h=c*c+l*l+f*f;return Math.sqrt(h)/2},Fn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new E(r,i)},Fn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new E(s,u)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new xt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Oe.LEFT;this._distance<0&&(e=-this._distance,n=Oe.RIGHT);var r=t.getExteriorRing(),i=St.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,P.EXTERIOR,P.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=St.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Oe.opposite(n),P.INTERIOR,P.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=St.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Re(0,P.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Oe.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Qt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof Vt||t instanceof ne||t instanceof Gt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var zn=function(){};zn.prototype.locate=function(t){},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Gt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[_t]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof Gt)};var Gn=function(){this._geom=null;var t=arguments[0];this._geom=t};Gn.prototype.locate=function(t){return Gn.locate(t,this._geom)},Gn.prototype.interfaces_=function(){return[zn]},Gn.prototype.getClass=function(){return Gn},Gn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Gn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Gn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Gn.isPointInRing(t,i))return!1}return!0},Gn.containsPoint=function(t,e){if(e instanceof $t)return Gn.containsPointInPolygon(t,e);if(e instanceof Gt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&Gn.containsPoint(t,r))return!0}return!1},Gn.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:Gn.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR};var Vn=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]};Vn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vn.prototype.propagateSideLabels=function(t){for(var e=P.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Oe.LEFT)!==P.NONE&&(e=r.getLocation(t,Oe.LEFT))}if(e===P.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Oe.ON)===P.NONE&&s.setLocation(t,Oe.ON,i),s.isArea(t)){var u=s.getLocation(t,Oe.LEFT),c=s.getLocation(t,Oe.RIGHT);if(c!==P.NONE){if(c!==i)throw new Pe("side location conflict",a.getCoordinate());u===P.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Oe.LEFT)===P.NONE,"found single null side"),s.setLocation(t,Oe.RIGHT,i),s.setLocation(t,Oe.LEFT,i)}}},Vn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vn.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Oe.LEFT);et.isTrue(r!==P.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Oe.LEFT),u=a.getLocation(t,Oe.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Vn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vn.prototype.iterator=function(){return this.getEdges().iterator()},Vn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new xt(this._edgeMap.values())),this._edgeList},Vn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=Gn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Vn.prototype.toString=function(){var t=new k;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Vn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===P.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=P.NONE;if(e[u])c=P.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},Vn.prototype.getDegree=function(){return this._edgeMap.size()},Vn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new xt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Oe.LEFT),r=t.getDepth(Oe.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Oe.RIGHT,a),a=u.getDepth(Oe.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=P.INTERIOR;break}if(r.isInResult()){t=P.EXTERIOR;break}}}if(t===P.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===P.INTERIOR):(a.isInResult()&&(i=P.EXTERIOR),s.isInResult()&&(i=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Re(P.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(i,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vn),Hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new De(t,new qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ve),Wn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wn.prototype.compareTo=function(t){var e=t;return Wn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wn.prototype.interfaces_=function(){return[_]},Wn.prototype.getClass=function(){return Wn},Wn.orientation=function(t){return 1===St.increasingDirection(t)},Wn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var f=(u+=i)===a,h=(c+=o)===s;if(f&&!h)return-1;if(!f&&h)return 1;if(f&&h)return 0}};var Xn=function(){this._edges=new xt,this._ocaMap=new f};Xn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xn.prototype.iterator=function(){return this._edges.iterator()},Xn.prototype.getEdges=function(){return this._edges},Xn.prototype.get=function(t){return this._edges.get(t)},Xn.prototype.findEqualEdge=function(t){var e=new Wn(t.getCoordinates());return this._ocaMap.get(e)},Xn.prototype.add=function(t){this._edges.add(t);var e=new Wn(t.getCoordinates());this._ocaMap.put(e,t)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Yn=function(){};Yn.prototype.processIntersections=function(t,e,n,r){},Yn.prototype.isDone=function(){},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Qn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Qn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Qn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Qn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Qn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Qn.prototype.getLineIntersector=function(){return this._li},Qn.prototype.hasProperIntersection=function(){return this._hasProper},Qn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Qn.prototype.hasIntersection=function(){return this._hasIntersection},Qn.prototype.isDone=function(){return!1},Qn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Qn.prototype.interfaces_=function(){return[Yn]},Qn.prototype.getClass=function(){return Qn},Qn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[_]},Zn.prototype.getClass=function(){return Zn};var Kn=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Re(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new xt;n.add(new j(e));do{var r=this.findChainEnd(t,e);n.add(new j(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],h=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Oe.RIGHT]-this._depth[t][Oe.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==P.EXTERIOR&&r!==P.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===P.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Re.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new W;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new E(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new k;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Oe.ON),e.getLocation(1,Oe.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Oe.LEFT),e.getLocation(1,Oe.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Oe.RIGHT),e.getLocation(1,Oe.RIGHT),2))},e}(Ne),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new xt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Ln(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new xt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ce;i.create(r),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Qn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new jn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new qe(new Hn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new He(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Re(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Oe.LEFT),n=t.getLocation(0,Oe.RIGHT);return e===P.INTERIOR&&n===P.EXTERIOR?1:e===P.EXTERIOR&&n===P.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ve,n=new xt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(C(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ir.prototype.scale=function(){if(C(arguments[0],bt)){for(var t=arguments[0],e=new xt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new E(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return St.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],h=arguments[2],p=arguments[3];if(l===h&&f===p)return null;var d=l.getCoordinates()[f],g=l.getCoordinates()[f+1],y=h.getCoordinates()[p],v=h.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,y,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,v)))throw new $("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+v)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ve},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var cr=function(){this.tempEnv1=new W,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},fr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new hr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Qe]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},fr.HotPixelSnapAction.get=function(){return hr},Object.defineProperties(lr,fr);var hr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),pr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new xt};pr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pr.prototype.isDone=function(){return!1},pr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pr.prototype.interfaces_=function(){return[Yn]},pr.prototype.getClass=function(){return pr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof G))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new pr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(C(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new En,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new pe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new pe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof En&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new gr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=I.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return En.CAP_ROUND},yr.CAP_BUTT.get=function(){return En.CAP_FLAT},yr.CAP_FLAT.get=function(){return En.CAP_FLAT},yr.CAP_SQUARE.get=function(){return En.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var vr=function(){this._pt=[new E,new E],this._distance=A.NaN,this._isNull=!0};vr.prototype.getCoordinates=function(){return this._pt},vr.prototype.getCoordinate=function(t){return this._pt[t]},vr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},vr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},vr.prototype.getDistance=function(){return this._distance},vr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.computeDistance=function(){if(arguments[2]instanceof vr&&arguments[0]instanceof Qt&&arguments[1]instanceof E)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof vr&&arguments[0]instanceof $t&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1],u=arguments[2];mr.computeDistance(a.getExteriorRing(),s,u);for(var c=0;c<a.getNumInteriorRing();c++)mr.computeDistance(a.getInteriorRingN(c),s,u)}else if(arguments[2]instanceof vr&&arguments[0]instanceof lt&&arguments[1]instanceof E){var l=arguments[0],f=arguments[1],h=arguments[2];if(l instanceof Qt)mr.computeDistance(l,f,h);else if(l instanceof $t)mr.computeDistance(l,f,h);else if(l instanceof Gt)for(var p=l,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);mr.computeDistance(g,f,h)}else h.setMinimum(l.getCoordinate(),f)}else if(arguments[2]instanceof vr&&arguments[0]instanceof gn&&arguments[1]instanceof E){var y=arguments[1],v=arguments[2],m=arguments[0].closestPoint(y);v.setMinimum(m,y)}};var Ar=function(t){this._maxPtDist=new vr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ar.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ar.prototype.computeMaxVertexDistance=function(t){var e=new _r(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ar.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ar.prototype.getDistancePoints=function(){return this._maxPtDist},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},br.MaxPointDistanceFilter.get=function(){return _r},br.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(Ar,br);var _r=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};_r.prototype.filter=function(t){this._minPtDist.initialize(),mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_r.prototype.getMaxPointDistance=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[pt]},_r.prototype.getClass=function(){return _r};var wr=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ut]},wr.prototype.getClass=function(){return wr};var xr=function(t){this._comps=t||null};xr.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},xr.prototype.interfaces_=function(){return[zt]},xr.prototype.getClass=function(){return xr},xr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return xr.getPolygons(t,new xt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof Gt&&e.apply(new xr(n)),n}};var Er=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Er.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qt&&this._lines.add(t)},Er.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Er.prototype.interfaces_=function(){return[ct]},Er.prototype.getClass=function(){return Er},Er.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Er.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Er.getLines(e,n))}},Er.getLines=function(){if(1===arguments.length){var t=arguments[0];return Er.getLines(t,!1)}if(2===arguments.length){if(C(arguments[0],bt)&&C(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Er.getLines(r,e)}return e}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new xt;return i.apply(new Er(a,o)),a}if(arguments[0]instanceof lt&&C(arguments[1],bt)){var s=arguments[0],u=arguments[1];return s instanceof Qt?u.add(s):s.apply(new Er(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&C(arguments[0],bt)&&C(arguments[1],bt)){for(var c=arguments[1],l=arguments[2],f=arguments[0].iterator();f.hasNext();){var h=f.next();Er.getLines(h,c,l)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&C(arguments[1],bt)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Er(p,d)),p}}};var Or=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};Or.prototype.locateInternal=function(){if(arguments[0]instanceof E&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return P.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===P.EXTERIOR)return P.EXTERIOR;if(r===P.BOUNDARY)return P.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===P.INTERIOR)return P.EXTERIOR;if(a===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof Qt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return P.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof Kt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?P.INTERIOR:P.EXTERIOR}},Or.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},Or.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},Or.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},Or.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Gt)for(var u=new Un(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Or.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Qt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Sr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Tr={INSIDE_AREA:{configurable:!0}};Sr.prototype.isInsideArea=function(){return this._segIndex===Sr.INSIDE_AREA},Sr.prototype.getCoordinate=function(){return this._pt},Sr.prototype.getGeometryComponent=function(){return this._component},Sr.prototype.getSegmentIndex=function(){return this._segIndex},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Tr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Sr,Tr);var Pr=function(t){this._pts=t||null};Pr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Pr.prototype.interfaces_=function(){return[zt]},Pr.prototype.getClass=function(){return Pr},Pr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?$e.singletonList(t):Pr.getPoints(t,new xt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Gt&&e.apply(new Pr(n)),n}};var Mr=function(){this._locations=null;var t=arguments[0];this._locations=t};Mr.prototype.filter=function(t){(t instanceof Kt||t instanceof Qt||t instanceof $t)&&this._locations.add(new Sr(t,0,t.getCoordinate()))},Mr.prototype.interfaces_=function(){return[zt]},Mr.prototype.getClass=function(){return Mr},Mr.getLocations=function(t){var e=new xt;return t.apply(new Mr(e)),e};var Cr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Or,this._minDistanceLocation=null,this._minDistance=A.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Cr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=xr.getPolygons(this._geom[e]);if(i.size()>0){var o=Mr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&C(arguments[0],wt)&&C(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Sr&&arguments[1]instanceof $t){var h=arguments[0],p=arguments[1],d=arguments[2],g=h.getCoordinate();if(P.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=h,d[1]=new Sr(p,g),null}},Cr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Cr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Er.getLines(this._geom[0]),n=Er.getLines(this._geom[1]),r=Pr.getPoints(this._geom[0]),i=Pr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Cr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Cr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Cr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Cr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Sr(t,o,s),n[1]=new Sr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qt&&arguments[1]instanceof Qt){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),h=c.getCoordinates(),p=0;p<f.length-1;p++)for(var d=0;d<h.length-1;d++){var g=st.distanceLineLine(f[p],f[p+1],h[d],h[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(f[p],f[p+1]),v=new gn(h[d],h[d+1]),m=y.closestPoints(v);l[0]=new Sr(u,p,m[0]),l[1]=new Sr(c,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Cr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Sr(i,0,i.getCoordinate()),n[1]=new Sr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Cr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Cr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.distance=function(t,e){return new Cr(t,e).distance()},Cr.isWithinDistance=function(t,e,n){return new Cr(t,e,n).distance()<=n},Cr.nearestPoints=function(t,e){return new Cr(t,e).nearestPoints()};var Ir=function(){this._pt=[new E,new E],this._distance=A.NaN,this._isNull=!0};Ir.prototype.getCoordinates=function(){return this._pt},Ir.prototype.getCoordinate=function(t){return this._pt[t]},Ir.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Ir.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Ir.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Ir.prototype.getDistance=function(){return this._distance},Ir.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Rr=function(){};Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.computeDistance=function(){if(arguments[2]instanceof Ir&&arguments[0]instanceof Qt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Ir&&arguments[0]instanceof $t&&arguments[1]instanceof E){var s=arguments[0],u=arguments[1],c=arguments[2];Rr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Rr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Ir&&arguments[0]instanceof lt&&arguments[1]instanceof E){var f=arguments[0],h=arguments[1],p=arguments[2];if(f instanceof Qt)Rr.computeDistance(f,h,p);else if(f instanceof $t)Rr.computeDistance(f,h,p);else if(f instanceof Gt)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Rr.computeDistance(y,h,p)}else p.setMinimum(f.getCoordinate(),h)}else if(arguments[2]instanceof Ir&&arguments[0]instanceof gn&&arguments[1]instanceof E){var v=arguments[1],m=arguments[2],A=arguments[0].closestPoint(v);m.setMinimum(A,v)}};var kr=function(){this._g0=null,this._g1=null,this._ptDist=new Ir,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},jr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kr.prototype.computeOrientedDistance=function(t,e,n){var r=new Lr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Nr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},kr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.distance=function(){if(2===arguments.length)return new kr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new kr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},jr.MaxPointDistanceFilter.get=function(){return Lr},jr.MaxDensifiedByFractionDistanceFilter.get=function(){return Nr},Object.defineProperties(kr,jr);var Lr=function(){this._maxPtDist=new Ir,this._minPtDist=new Ir,this._euclideanDist=new Rr,this._geom=null;var t=arguments[0];this._geom=t};Lr.prototype.filter=function(t){this._minPtDist.initialize(),Rr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Lr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lr.prototype.interfaces_=function(){return[pt]},Lr.prototype.getClass=function(){return Lr};var Nr=function(){this._maxPtDist=new Ir,this._minPtDist=new Ir,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Nr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new E(s,u);this._minPtDist.initialize(),Rr.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Nr.prototype.isDone=function(){return!1},Nr.prototype.isGeometryChanged=function(){return!1},Nr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nr.prototype.interfaces_=function(){return[Ut]},Nr.prototype.getClass=function(){return Nr};var Dr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Dr.prototype.checkMaximumDistance=function(t,e,n){var r=new kr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},Dr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Dr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Dr.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Dr.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof Gt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Dr.prototype.getErrorIndicator=function(){return this._errorIndicator},Dr.prototype.checkMinimumDistance=function(t,e,n){var r=new Cr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},Dr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Dr.prototype.getErrorLocation=function(){return this._errorLocation},Dr.prototype.getPolygonLines=function(t){for(var e=new xt,n=new Er(e),r=xr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Dr.prototype.getErrorMessage=function(){return this._errMsg},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Fr.VERBOSE.get=function(){return!1},Fr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Dr,Fr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},zr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new W(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Dr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},zr.VERBOSE.get=function(){return!1},zr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,zr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:fn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return J.toLineString(new ue(this._pts))},Ur.prototype.interfaces_=function(){return[hn]},Ur.prototype.getClass=function(){return Ur};var Gr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new xt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Gr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Gr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Gr.prototype.getIntersectionSegments=function(){return this._intSegments},Gr.prototype.count=function(){return this._intersectionCount},Gr.prototype.getIntersections=function(){return this._intersections},Gr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Gr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Gr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Gr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Gr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Gr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Gr.prototype.interfaces_=function(){return[Yn]},Gr.prototype.getClass=function(){return Gr},Gr.createAllIntersectionsFinder=function(t){var e=new Gr(t);return e.setFindAllIntersections(!0),e},Gr.createAnyIntersectionFinder=function(t){return new Gr(t)},Gr.createIntersectionCounter=function(t){var e=new Gr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vr.prototype.isValid=function(){return this.execute(),this._isValid},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Gr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.computeIntersections=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qr=function t(){this._nv=null;var e=arguments[0];this._nv=new Vr(t.toSegmentStrings(e))};qr.prototype.checkValid=function(){this._nv.checkValid()},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.toSegmentStrings=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},qr.checkValid=function(t){new qr(t).checkValid()};var Hr=function(t){this._mapOp=t};Hr.prototype.map=function(t){for(var e=new xt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ve.toGeometryArray(e))},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.map=function(t,e){return new Hr(e).map(t)};var Wr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new xt,this._resultLineList=new xt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Si.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Si.isResultOfOp(r,e)&&e===Si.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Xr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new xt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Si.INTERSECTION)){var r=n.getLabel();Si.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Yr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Yr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Yr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new xt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new xt;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Yr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Yr.prototype.getInputGeometry=function(){return this._inputGeom},Yr.prototype.transformMultiLineString=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Yr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Yr.prototype.transformMultiPoint=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yr.prototype.transformMultiPolygon=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yr.prototype.copy=function(t){return t.copy()},Yr.prototype.transformGeometryCollection=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ve.toGeometryArray(n)):this._factory.buildGeometry(n)},Yr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Qt)return this.transformLineString(t,null);if(t instanceof Vt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Gt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Yr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var Qr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Qr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new E(o)),0===r&&this._isClosed&&t.set(t.size()-1,new E(o)))}},Qr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Qr.prototype.snapTo=function(t){var e=new Ot(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Qr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new E(i),!1)}},Qr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=A.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Qr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&C(i,Jt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=A.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Kr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Qr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yr),$r=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$r.prototype.getCommon=function(){return A.longBitsToDouble(this._commonBits)},$r.prototype.add=function(t){var e=A.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$r.signExpBits(this._commonBits),this._isFirst=!1,null):$r.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$r.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$r.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$r.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=A.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+A.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$r.signExpBits=function(t){return t>>52},$r.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$r.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($r.getBit(t,r)!==$r.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new $r,this._commonBitsY=new $r};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[pt]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Si.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Si.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Si.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Si.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Si.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Si.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Si.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Si.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Si.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Si.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[_]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fi=function(t){function e(){t.call(this),this.events=new xt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&C(arguments[0],wt)&&C(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&C(arguments[0],wt)&&arguments[1]instanceof li){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),hi=function(){this._min=A.POSITIVE_INFINITY,this._max=A.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};hi.prototype.getMin=function(){return this._min},hi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hi.prototype.getMax=function(){return this._max},hi.prototype.toString=function(){return J.toLineString(new E(this._min,0),new E(this._max,0))},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},pi.NodeComparator.get=function(){return di},Object.defineProperties(hi,pi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[x]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hi),vi=function(){this._leaves=new xt,this._root=null,this._level=0};vi.prototype.buildTree=function(){$e.sort(this._leaves,new hi.NodeComparator);for(var t=this._leaves,e=null,n=new xt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},vi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},vi.prototype.printNode=function(t){q.out.println(J.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},vi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},vi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var mi=function(){this._items=new xt};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[Qe]},mi.prototype.getClass=function(){return mi};var Ai=function(){this._index=null;var t=arguments[0];if(!C(t,Jt))throw new m("Argument must be Polygonal");this._index=new wi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ai.prototype.locate=function(t){var e=new at(t),n=new _i(e);return this._index.query(t.y,t.y,n),e.getLocation()},Ai.prototype.interfaces_=function(){return[zn]},Ai.prototype.getClass=function(){return Ai},bi.SegmentVisitor.get=function(){return _i},bi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(Ai,bi);var _i=function(){this._counter=null;var t=arguments[0];this._counter=t};_i.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},_i.prototype.interfaces_=function(){return[Qe]},_i.prototype.getClass=function(){return _i};var wi=function(){this._index=new vi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Er.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var xi=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new he,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Or,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;P.NONE,r.getLocation(t,Oe.ON)===P.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new li(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=St.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Re(this._argIndex,P.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=St.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Re(this._argIndex,P.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Re(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Qt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Vt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Gt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return C(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ai(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(qe),Ei=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new xi(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new xi(0,e,r),this._arg[1]=new xi(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new xi(0,i,a),this._arg[1]=new xi(1,o,a)}};Ei.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ei.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Oi=function(){};Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.map=function(){if(arguments[0]instanceof lt&&C(arguments[1],Oi.MapOp)){for(var t=arguments[0],e=arguments[1],n=new xt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(C(arguments[0],bt)&&C(arguments[1],Oi.MapOp)){for(var o=arguments[0],a=arguments[1],s=new xt,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Oi.MapOp=function(){};var Si=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Or,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xn,this._resultPolyList=new xt,this._resultLineList=new xt,this._resultPointList=new xt,this._graph=new qe(new Hn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new xt;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new xt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new xt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new He(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Oe.RIGHT),i.getLocation(1,Oe.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Oe.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Oe.LEFT,r.getLocation(i,Oe.LEFT)),et.isTrue(!r.isNull(i,Oe.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Oe.RIGHT,r.getLocation(i,Oe.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ei);Si.overlayOp=function(t,e,n){return new Si(t,e).getResultGeometry(n)},Si.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Si.createEmptyResult(Si.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Hr.map(t,{interfaces_:function(){return[Oi.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.INTERSECTION)},Si.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Si.createEmptyResult(Si.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.SYMDIFFERENCE)},Si.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Si.INTERSECTION:o=Math.min(r,i);break;case Si.UNION:o=Math.max(r,i);break;case Si.DIFFERENCE:o=r;break;case Si.SYMDIFFERENCE:o=Math.max(r,i)}return o},Si.createEmptyResult=function(t,e,n,r){var i=null;switch(Si.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Si.difference=function(t,e){return t.isEmpty()?Si.createEmptyResult(Si.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.DIFFERENCE))},Si.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Si.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===P.BOUNDARY&&(i=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),a){case Si.INTERSECTION:return i===P.INTERIOR&&o===P.INTERIOR;case Si.UNION:return i===P.INTERIOR||o===P.INTERIOR;case Si.DIFFERENCE:return i===P.INTERIOR&&o!==P.INTERIOR;case Si.SYMDIFFERENCE:return i===P.INTERIOR&&o!==P.INTERIOR||i!==P.INTERIOR&&o===P.INTERIOR}return!1}},Si.INTERSECTION=1,Si.UNION=2,Si.DIFFERENCE=3,Si.SYMDIFFERENCE=4;var Ti=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Or,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ti.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ti.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Ti.prototype.extractLinework=function(t){var e=new Pi;t.apply(e);var n=e.getLinework(),r=ve.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Pi=function(){this._linework=null,this._linework=new xt};Pi.prototype.getLinework=function(){return this._linework},Pi.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pi.prototype.interfaces_=function(){return[zt]},Pi.prototype.getClass=function(){return Pi};var Mi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Mi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Mi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Mi.prototype.getPoints=function(t){for(var e=new xt,n=Er.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Mi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new E(c-u,l+s);r.add(f)}if(this._doRight){var h=new E(c+u,l-s);r.add(h)}},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Ci=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new xt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ti(this._geom[0],this._boundaryDistanceTolerance),new Ti(this._geom[1],this._boundaryDistanceTolerance),new Ti(this._geom[2],this._boundaryDistanceTolerance)]},Ii={TOLERANCE:{configurable:!0}};Ci.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},Ci.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ci.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ci.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(r,this._location)}},Ci.prototype.addTestPts=function(t){var e=new Mi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ci.prototype.isValidResult=function(t,e){var n=Si.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===P.INTERIOR);return r||this.reportResult(t,e,n),r},Ci.prototype.getInvalidLocation=function(){return this._invalidLocation},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ci.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Ci.isValid=function(t,e,n,r){return new Ci(t,e,r).isValid(n)},Ii.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ci,Ii);var Ri=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ri.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ri.prototype.combine=function(){for(var t=new xt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.combine=function(){if(1===arguments.length)return new Ri(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ri(Ri.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ri(Ri.createList(n,r,i)).combine()}},Ri.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ri.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new xt;return a.add(r),a.add(i),a.add(o),a}};var ki=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new xt)},ji={STRTREE_NODE_CAPACITY:{configurable:!0}};ki.prototype.reduceToGeometries=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;C(r,wt)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},ki.prototype.extractByEnvelope=function(t,e,n){for(var r=new xt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},ki.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ri.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},ki.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(ki.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},ki.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=ki.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(ki.getGeometry(e,n),ki.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},ki.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},ki.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},ki.prototype.unionActual=function(t,e){return ki.restrictToPolygons(t.union(e))},ki.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},ki.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new xt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Ri.combine(r)},ki.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.restrictToPolygons=function(t){if(C(t,Jt))return t;var e=xr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ve.toPolygonArray(e))},ki.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},ki.union=function(t){return new ki(t).union()},ji.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ki,ji);var Li=function(){};Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Si.createEmptyResult(Si.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Si.UNION)},t.GeoJSONReader=xe,t.GeoJSONWriter=Ee,t.OverlayOp=Si,t.UnionOp=Li,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.d(e,"a",(function(){return P})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return r}));var r,i=n(7),o=n(16),a=n(120),s=n(66),u=n(107),c=n(400),l=n(21),f=n(76);function h(t){return t<7}!function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"}(r||(r={}));var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype[c.a]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(s.a);function d(t){return Array.isArray(t)&&t.length>0}var g,y=function(t){function e(n){var r=n.graphQLErrors,i=n.networkError,o=n.errorMessage,a=n.extraInfo,s=t.call(this,o)||this;return s.graphQLErrors=r||[],s.networkError=i||null,s.message=o||function(t){var e="";return d(t.graphQLErrors)&&t.graphQLErrors.forEach((function(t){var n=t?t.message:"Error message not found.";e+="GraphQL error: "+n+"\n"})),t.networkError&&(e+="Network error: "+t.networkError.message+"\n"),e=e.replace(/\n$/,"")}(s),s.extraInfo=a,s.__proto__=e.prototype,s}return Object(i.c)(e,t),e}(Error);!function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"}(g||(g={}));var v=function(t){function e(e){var n=e.queryManager,r=e.options,i=e.shouldSubscribe,a=void 0===i||i,s=t.call(this,(function(t){return s.onSubscribe(t)}))||this;s.observers=new Set,s.subscriptions=new Set,s.isTornDown=!1,s.options=r,s.variables=r.variables||{},s.queryId=n.generateQueryId(),s.shouldSubscribe=a;var u=Object(o.m)(r.query);return s.queryName=u&&u.name&&u.name.value,s.queryManager=n,s}return Object(i.c)(e,t),e.prototype.result=function(){var t=this;return new Promise((function(e,n){var r={next:function(n){e(n),t.observers.delete(r),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout((function(){i.unsubscribe()}),0)},error:n},i=t.subscribe(r)}))},e.prototype.currentResult=function(){var t=this.getCurrentResult();return void 0===t.data&&(t.data={}),t},e.prototype.getCurrentResult=function(){if(this.isTornDown){var t=this.lastResult;return{data:!this.lastError&&t&&t.data||void 0,error:this.lastError,loading:!1,networkStatus:r.error}}var e,n,o,a=this.queryManager.getCurrentQueryResult(this),s=a.data,u=a.partial,c=this.queryManager.queryStore.get(this.queryId),l=this.options.fetchPolicy,f="network-only"===l||"no-cache"===l;if(c){var p=c.networkStatus;if(n=c,void 0===(o=this.options.errorPolicy)&&(o="none"),n&&(n.networkError||"none"===o&&d(n.graphQLErrors)))return{data:void 0,loading:!1,networkStatus:p,error:new y({graphQLErrors:c.graphQLErrors,networkError:c.networkError})};c.variables&&(this.options.variables=Object(i.a)(Object(i.a)({},this.options.variables),c.variables),this.variables=this.options.variables),e={data:s,loading:h(p),networkStatus:p},c.graphQLErrors&&"all"===this.options.errorPolicy&&(e.errors=c.graphQLErrors)}else{var g=f||u&&"cache-only"!==l;e={data:s,loading:g,networkStatus:g?r.loading:r.ready}}return u||this.updateLastResult(Object(i.a)(Object(i.a)({},e),{stale:!1})),Object(i.a)(Object(i.a)({},e),{partial:u})},e.prototype.isDifferentFromLastResult=function(t){var e=this.lastResultSnapshot;return!(e&&t&&e.networkStatus===t.networkStatus&&e.stale===t.stale&&Object(a.a)(e.data,t.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var t=this.queryManager.queryStore.get(this.queryId);t&&(t.networkError=null,t.graphQLErrors=[])},e.prototype.refetch=function(t){var e=this.options.fetchPolicy;return"cache-only"===e?Promise.reject(new l.a(1)):("no-cache"!==e&&"cache-and-network"!==e&&(e="network-only"),Object(a.a)(this.variables,t)||(this.variables=Object(i.a)(Object(i.a)({},this.variables),t)),Object(a.a)(this.options.variables,this.variables)||(this.options.variables=Object(i.a)(Object(i.a)({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,Object(i.a)(Object(i.a)({},this.options),{fetchPolicy:e}),g.refetch))},e.prototype.fetchMore=function(t){var e=this;Object(l.b)(t.updateQuery,2);var n=Object(i.a)(Object(i.a)({},t.query?t:Object(i.a)(Object(i.a)(Object(i.a)({},this.options),t),{variables:Object(i.a)(Object(i.a)({},this.variables),t.variables)})),{fetchPolicy:"network-only"}),r=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(r,n,g.normal,this.queryId).then((function(i){return e.updateQuery((function(e){return t.updateQuery(e,{fetchMoreResult:i.data,variables:n.variables})})),e.queryManager.stopQuery(r),i}),(function(t){throw e.queryManager.stopQuery(r),t}))},e.prototype.subscribeToMore=function(t){var e=this,n=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables}).subscribe({next:function(n){var r=t.updateQuery;r&&e.updateQuery((function(t,e){var i=e.variables;return r(t,{subscriptionData:n,variables:i})}))},error:function(e){t.onError&&t.onError(e)}});return this.subscriptions.add(n),function(){e.subscriptions.delete(n)&&n.unsubscribe()}},e.prototype.setOptions=function(t){var e=this.options.fetchPolicy;this.options=Object(i.a)(Object(i.a)({},this.options),t),t.pollInterval?this.startPolling(t.pollInterval):0===t.pollInterval&&this.stopPolling();var n=t.fetchPolicy;return this.setVariables(this.options.variables,e!==n&&("cache-only"===e||"standby"===e||"network-only"===n),t.fetchResults)},e.prototype.setVariables=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),this.isTornDown=!1,t=t||this.variables,!e&&Object(a.a)(t,this.variables)?this.observers.size&&n?this.result():Promise.resolve():(this.variables=this.options.variables=t,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(t){var e=this.queryManager,n=e.getQueryWithPreviousResult(this.queryId),r=n.previousResult,i=n.variables,a=n.document,s=Object(o.I)((function(){return t(r,{variables:i})}));s&&(e.dataStore.markUpdateQueryResult(a,i,s),e.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(t){b(this),this.options.pollInterval=t,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(t){var e=this.lastResult;return this.lastResult=t,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?t:Object(o.f)(t),e},e.prototype.onSubscribe=function(t){var e=this;try{var n=t._subscription._observer;n&&!n.error&&(n.error=m)}catch(i){}var r=!this.observers.size;return this.observers.add(t),t.next&&this.lastResult&&t.next(this.lastResult),t.error&&this.lastError&&t.error(this.lastError),r&&this.setUpQuery(),function(){e.observers.delete(t)&&!e.observers.size&&e.tearDownQuery()}},e.prototype.setUpQuery=function(){var t=this,e=this.queryManager,n=this.queryId;this.shouldSubscribe&&e.addObservableQuery(n,this),this.options.pollInterval&&(b(this),e.startPollingQuery(this.options,n));var o=function(e){t.updateLastResult(Object(i.a)(Object(i.a)({},t.lastResult),{errors:e.graphQLErrors,networkStatus:r.error,loading:!1})),A(t.observers,"error",t.lastError=e)};e.observeQuery(n,this.options,{next:function(n){if(t.lastError||t.isDifferentFromLastResult(n)){var r=t.updateLastResult(n),i=t.options,o=i.query,s=i.variables,u=i.fetchPolicy;e.transform(o).hasClientExports?e.getLocalState().addExportedVariables(o,s).then((function(i){var s=t.variables;t.variables=t.options.variables=i,!n.loading&&r&&"cache-only"!==u&&e.transform(o).serverQuery&&!Object(a.a)(s,i)?t.refetch():A(t.observers,"next",n)})):A(t.observers,"next",n)}},error:o}).catch(o)},e.prototype.tearDownQuery=function(){var t=this.queryManager;this.isTornDown=!0,t.stopPollingQuery(this.queryId),this.subscriptions.forEach((function(t){return t.unsubscribe()})),this.subscriptions.clear(),t.removeObservableQuery(this.queryId),t.stopQuery(this.queryId),this.observers.clear()},e}(p);function m(t){}function A(t,e,n){var r=[];t.forEach((function(t){return t[e]&&r.push(t)})),r.forEach((function(t){return t[e](n)}))}function b(t){var e=t.options.fetchPolicy;Object(l.b)("cache-first"!==e&&"cache-only"!==e,3)}var _=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(t){return this.store[t]},t.prototype.initMutation=function(t,e,n){this.store[t]={mutation:e,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(t,e){var n=this.store[t];n&&(n.loading=!1,n.error=e)},t.prototype.markMutationResult=function(t){var e=this.store[t];e&&(e.loading=!1,e.error=null)},t.prototype.reset=function(){this.store={}},t}(),w=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(t){return this.store[t]},t.prototype.initQuery=function(t){var e=this.store[t.queryId];Object(l.b)(!e||e.document===t.document||Object(a.a)(e.document,t.document),19);var n,i=!1,o=null;t.storePreviousVariables&&e&&e.networkStatus!==r.loading&&(Object(a.a)(e.variables,t.variables)||(i=!0,o=e.variables)),n=i?r.setVariables:t.isPoll?r.poll:t.isRefetch?r.refetch:r.loading;var s=[];e&&e.graphQLErrors&&(s=e.graphQLErrors),this.store[t.queryId]={document:t.document,variables:t.variables,previousVariables:o,networkError:null,graphQLErrors:s,networkStatus:n,metadata:t.metadata},"string"===typeof t.fetchMoreForQueryId&&this.store[t.fetchMoreForQueryId]&&(this.store[t.fetchMoreForQueryId].networkStatus=r.fetchMore)},t.prototype.markQueryResult=function(t,e,n){this.store&&this.store[t]&&(this.store[t].networkError=null,this.store[t].graphQLErrors=d(e.errors)?e.errors:[],this.store[t].previousVariables=null,this.store[t].networkStatus=r.ready,"string"===typeof n&&this.store[n]&&(this.store[n].networkStatus=r.ready))},t.prototype.markQueryError=function(t,e,n){this.store&&this.store[t]&&(this.store[t].networkError=e,this.store[t].networkStatus=r.error,"string"===typeof n&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(t,e){var n=this.store&&this.store[t];n&&(n.networkError=null,n.previousVariables=null,e&&(n.networkStatus=r.ready))},t.prototype.stopQuery=function(t){delete this.store[t]},t.prototype.reset=function(t){var e=this;Object.keys(this.store).forEach((function(n){t.indexOf(n)<0?e.stopQuery(n):e.store[n].networkStatus=r.loading}))},t}();var x=function(){function t(t){var e=t.cache,n=t.client,r=t.resolvers,i=t.fragmentMatcher;this.cache=e,n&&(this.client=n),r&&this.addResolvers(r),i&&this.setFragmentMatcher(i)}return t.prototype.addResolvers=function(t){var e=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach((function(t){e.resolvers=Object(o.A)(e.resolvers,t)})):this.resolvers=Object(o.A)(this.resolvers,t)},t.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(t){var e=t.document,n=t.remoteResult,r=t.context,o=t.variables,a=t.onlyRunForcedResolvers,s=void 0!==a&&a;return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return e?[2,this.resolveDocument(e,n.data,r,o,this.fragmentMatcher,s).then((function(t){return Object(i.a)(Object(i.a)({},n),{data:t.result})}))]:[2,n]}))}))},t.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(t){return Object(o.s)(["client"],t)&&this.resolvers?t:null},t.prototype.serverQuery=function(t){return this.resolvers?Object(o.C)(t):t},t.prototype.prepareContext=function(t){void 0===t&&(t={});var e=this.cache;return Object(i.a)(Object(i.a)({},t),{cache:e,getCacheKey:function(t){if(e.config)return e.config.dataIdFromObject(t);Object(l.b)(!1,6)}})},t.prototype.addExportedVariables=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(r){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,e)||{},this.prepareContext(n),e).then((function(t){return Object(i.a)(Object(i.a)({},e),t.exportedVariables)}))]:[2,Object(i.a)({},e)]}))}))},t.prototype.shouldForceResolvers=function(t){var e=!1;return Object(f.b)(t,{Directive:{enter:function(t){if("client"===t.name.value&&t.arguments&&(e=t.arguments.some((function(t){return"always"===t.name.value&&"BooleanValue"===t.value.kind&&!0===t.value.value}))))return f.a}}}),e},t.prototype.buildRootValueFromCache=function(t,e){return this.cache.diff({query:Object(o.d)(t),variables:e,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(t,e,n,r,a,s){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===a&&(a=function(){return!0}),void 0===s&&(s=!1),Object(i.b)(this,void 0,void 0,(function(){var u,c,l,f,h,p,d,g,y;return Object(i.d)(this,(function(v){var m;return u=Object(o.l)(t),c=Object(o.j)(t),l=Object(o.g)(c),f=u.operation,h=f?(m=f).charAt(0).toUpperCase()+m.slice(1):"Query",d=(p=this).cache,g=p.client,y={fragmentMap:l,context:Object(i.a)(Object(i.a)({},n),{cache:d,client:g}),variables:r,fragmentMatcher:a,defaultOperationType:h,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(u.selectionSet,e,y).then((function(t){return{result:t,exportedVariables:y.exportedVariables}}))]}))}))},t.prototype.resolveSelectionSet=function(t,e,n){return Object(i.b)(this,void 0,void 0,(function(){var r,a,s,u,c,f=this;return Object(i.d)(this,(function(h){return r=n.fragmentMap,a=n.context,s=n.variables,u=[e],c=function(t){return Object(i.b)(f,void 0,void 0,(function(){var c,f;return Object(i.d)(this,(function(i){return Object(o.F)(t,s)?Object(o.t)(t)?[2,this.resolveField(t,e,n).then((function(e){var n;"undefined"!==typeof e&&u.push(((n={})[Object(o.E)(t)]=e,n))}))]:(Object(o.v)(t)?c=t:(c=r[t.name.value],Object(l.b)(c,7)),c&&c.typeCondition&&(f=c.typeCondition.name.value,n.fragmentMatcher(e,f,a))?[2,this.resolveSelectionSet(c.selectionSet,e,n).then((function(t){u.push(t)}))]:[2]):[2]}))}))},[2,Promise.all(t.selections.map(c)).then((function(){return Object(o.B)(u)}))]}))}))},t.prototype.resolveField=function(t,e,n){return Object(i.b)(this,void 0,void 0,(function(){var r,a,s,u,c,l,f,h,p,d=this;return Object(i.d)(this,(function(i){return r=n.variables,a=t.name.value,s=Object(o.E)(t),u=a!==s,c=e[s]||e[a],l=Promise.resolve(c),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(t)||(f=e.__typename||n.defaultOperationType,(h=this.resolvers&&this.resolvers[f])&&(p=h[u?a:s])&&(l=Promise.resolve(p(e,Object(o.b)(t,r),n.context,{field:t,fragmentMap:n.fragmentMap})))),[2,l.then((function(e){return void 0===e&&(e=c),t.directives&&t.directives.forEach((function(t){"export"===t.name.value&&t.arguments&&t.arguments.forEach((function(t){"as"===t.name.value&&"StringValue"===t.value.kind&&(n.exportedVariables[t.value.value]=e)}))})),t.selectionSet?null==e?e:Array.isArray(e)?d.resolveSubSelectedArray(t,e,n):t.selectionSet?d.resolveSelectionSet(t.selectionSet,e,n):void 0:e}))]}))}))},t.prototype.resolveSubSelectedArray=function(t,e,n){var r=this;return Promise.all(e.map((function(e){return null===e?null:Array.isArray(e)?r.resolveSubSelectedArray(t,e,n):t.selectionSet?r.resolveSelectionSet(t.selectionSet,e,n):void 0})))},t}();function E(t){var e=new Set,n=null;return new p((function(r){return e.add(r),n=n||t.subscribe({next:function(t){e.forEach((function(e){return e.next&&e.next(t)}))},error:function(t){e.forEach((function(e){return e.error&&e.error(t)}))},complete:function(){e.forEach((function(t){return t.complete&&t.complete()}))}}),function(){e.delete(r)&&!e.size&&n&&(n.unsubscribe(),n=null)}}))}var O=Object.prototype.hasOwnProperty,S=function(){function t(t){var e=t.link,n=t.queryDeduplication,r=void 0!==n&&n,i=t.store,a=t.onBroadcast,s=void 0===a?function(){}:a,u=t.ssrMode,c=void 0!==u&&u,l=t.clientAwareness,f=void 0===l?{}:l,h=t.localState,p=t.assumeImmutableResults;this.mutationStore=new _,this.queryStore=new w,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(o.e?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=e,this.queryDeduplication=r,this.dataStore=i,this.onBroadcast=s,this.clientAwareness=f,this.localState=h||new x({cache:i.getCache()}),this.ssrMode=c,this.assumeImmutableResults=!!p}return t.prototype.stop=function(){var t=this;this.queries.forEach((function(e,n){t.stopQueryNoBroadcast(n)})),this.fetchQueryRejectFns.forEach((function(t){t(new l.a(8))}))},t.prototype.mutate=function(t){var e=t.mutation,n=t.variables,r=t.optimisticResponse,a=t.updateQueries,s=t.refetchQueries,u=void 0===s?[]:s,c=t.awaitRefetchQueries,f=void 0!==c&&c,h=t.update,p=t.errorPolicy,g=void 0===p?"none":p,v=t.fetchPolicy,m=t.context,A=void 0===m?{}:m;return Object(i.b)(this,void 0,void 0,(function(){var t,s,c,p=this;return Object(i.d)(this,(function(m){switch(m.label){case 0:return Object(l.b)(e,9),Object(l.b)(!v||"no-cache"===v,10),t=this.generateQueryId(),e=this.transform(e).document,this.setQuery(t,(function(){return{document:e}})),n=this.getVariables(e,n),this.transform(e).hasClientExports?[4,this.localState.addExportedVariables(e,n,A)]:[3,2];case 1:n=m.sent(),m.label=2;case 2:return s=function(){var t={};return a&&p.queries.forEach((function(e,n){var r=e.observableQuery;if(r){var i=r.queryName;i&&O.call(a,i)&&(t[n]={updater:a[i],query:p.queryStore.get(n)})}})),t},this.mutationStore.initMutation(t,e,n),this.dataStore.markMutationInit({mutationId:t,document:e,variables:n,updateQueries:s(),update:h,optimisticResponse:r}),this.broadcastQueries(),c=this,[2,new Promise((function(a,l){var p,m;c.getObservableFromLink(e,Object(i.a)(Object(i.a)({},A),{optimisticResponse:r}),n,!1).subscribe({next:function(r){Object(o.q)(r)&&"none"===g?m=new y({graphQLErrors:r.errors}):(c.mutationStore.markMutationResult(t),"no-cache"!==v&&c.dataStore.markMutationResult({mutationId:t,result:r,document:e,variables:n,updateQueries:s(),update:h}),p=r)},error:function(e){c.mutationStore.markMutationError(t,e),c.dataStore.markMutationComplete({mutationId:t,optimisticResponse:r}),c.broadcastQueries(),c.setQuery(t,(function(){return{document:null}})),l(new y({networkError:e}))},complete:function(){if(m&&c.mutationStore.markMutationError(t,m),c.dataStore.markMutationComplete({mutationId:t,optimisticResponse:r}),c.broadcastQueries(),m)l(m);else{"function"===typeof u&&(u=u(p));var e=[];d(u)&&u.forEach((function(t){if("string"===typeof t)c.queries.forEach((function(n){var r=n.observableQuery;r&&r.queryName===t&&e.push(r.refetch())}));else{var n={query:t.query,variables:t.variables,fetchPolicy:"network-only"};t.context&&(n.context=t.context),e.push(c.query(n))}})),Promise.all(f?e:[]).then((function(){c.setQuery(t,(function(){return{document:null}})),"ignore"===g&&p&&Object(o.q)(p)&&delete p.errors,a(p)}))}}})}))]}}))}))},t.prototype.fetchQuery=function(t,e,n,r){return Object(i.b)(this,void 0,void 0,(function(){var a,s,u,c,l,f,h,p,d,v,m,A,b,_,w,x,E,O,S=this;return Object(i.d)(this,(function(T){switch(T.label){case 0:return a=e.metadata,s=void 0===a?null:a,u=e.fetchPolicy,c=void 0===u?"cache-first":u,l=e.context,f=void 0===l?{}:l,h=this.transform(e.query).document,p=this.getVariables(h,e.variables),this.transform(h).hasClientExports?[4,this.localState.addExportedVariables(h,p,f)]:[3,2];case 1:p=T.sent(),T.label=2;case 2:if(e=Object(i.a)(Object(i.a)({},e),{variables:p}),m=v="network-only"===c||"no-cache"===c,v||(A=this.dataStore.getCache().diff({query:h,variables:p,returnPartialData:!0,optimistic:!1}),b=A.complete,_=A.result,m=!b||"cache-and-network"===c,d=_),w=m&&"cache-only"!==c&&"standby"!==c,Object(o.s)(["live"],h)&&(w=!0),x=this.idCounter++,E="no-cache"!==c?this.updateQueryWatch(t,h,e):void 0,this.setQuery(t,(function(){return{document:h,lastRequestId:x,invalidated:!0,cancel:E}})),this.invalidate(r),this.queryStore.initQuery({queryId:t,document:h,storePreviousVariables:w,variables:p,isPoll:n===g.poll,isRefetch:n===g.refetch,metadata:s,fetchMoreForQueryId:r}),this.broadcastQueries(),w){if(O=this.fetchRequest({requestId:x,queryId:t,document:h,options:e,fetchMoreForQueryId:r}).catch((function(e){throw e.hasOwnProperty("graphQLErrors")?e:(x>=S.getQuery(t).lastRequestId&&(S.queryStore.markQueryError(t,e,r),S.invalidate(t),S.invalidate(r),S.broadcastQueries()),new y({networkError:e}))})),"cache-and-network"!==c)return[2,O];O.catch((function(){}))}return this.queryStore.markQueryResultClient(t,!w),this.invalidate(t),this.invalidate(r),this.transform(h).hasForcedResolvers?[2,this.localState.runResolvers({document:h,remoteResult:{data:d},context:f,variables:p,onlyRunForcedResolvers:!0}).then((function(n){return S.markQueryResult(t,n,e,r),S.broadcastQueries(),n}))]:(this.broadcastQueries(),[2,{data:d}])}}))}))},t.prototype.markQueryResult=function(t,e,n,r){var i=n.fetchPolicy,o=n.variables,a=n.errorPolicy;"no-cache"===i?this.setQuery(t,(function(){return{newData:{result:e.data,complete:!0}}})):this.dataStore.markQueryResult(e,this.getQuery(t).document,o,r,"ignore"===a||"all"===a)},t.prototype.queryListenerForObserver=function(t,e,n){var r=this;function i(t,e){if(n[t])try{n[t](e)}catch(r){}}return function(n,o){if(r.invalidate(t,!1),n){var a=r.getQuery(t),s=a.observableQuery,u=a.document,c=s?s.options.fetchPolicy:e.fetchPolicy;if("standby"!==c){var l=h(n.networkStatus),f=s&&s.getLastResult(),p=!(!f||f.networkStatus===n.networkStatus),g=e.returnPartialData||!o&&n.previousVariables||p&&e.notifyOnNetworkStatusChange||"cache-only"===c||"cache-and-network"===c;if(!l||g){var v=d(n.graphQLErrors),m=s&&s.options.errorPolicy||e.errorPolicy||"none";if("none"===m&&v||n.networkError)return i("error",new y({graphQLErrors:n.graphQLErrors,networkError:n.networkError}));try{var A=void 0,b=void 0;if(o)"no-cache"!==c&&"network-only"!==c&&r.setQuery(t,(function(){return{newData:null}})),A=o.result,b=!o.complete;else{var _=s&&s.getLastError(),w="none"!==m&&(_&&_.graphQLErrors)!==n.graphQLErrors;if(f&&f.data&&!w)A=f.data,b=!1;else{var x=r.dataStore.getCache().diff({query:u,variables:n.previousVariables||n.variables,returnPartialData:!0,optimistic:!0});A=x.result,b=!x.complete}}var E=b&&!(e.returnPartialData||"cache-only"===c),O={data:E?f&&f.data:A,loading:l,networkStatus:n.networkStatus,stale:E};"all"===m&&v&&(O.errors=n.graphQLErrors),i("next",O)}catch(S){i("error",new y({networkError:S}))}}}}}},t.prototype.transform=function(t){var e=this.transformCache;if(!e.has(t)){var n=this.dataStore.getCache(),r=n.transformDocument(t),i=Object(o.D)(n.transformForLink(r)),a=this.localState.clientQuery(r),s=this.localState.serverQuery(i),u={document:r,hasClientExports:Object(o.r)(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:a,serverQuery:s,defaultVars:Object(o.h)(Object(o.m)(r))},c=function(t){t&&!e.has(t)&&e.set(t,u)};c(t),c(r),c(a),c(s)}return e.get(t)},t.prototype.getVariables=function(t,e){return Object(i.a)(Object(i.a)({},this.transform(t).defaultVars),e)},t.prototype.watchQuery=function(t,e){void 0===e&&(e=!0),Object(l.b)("standby"!==t.fetchPolicy,11),t.variables=this.getVariables(t.query,t.variables),"undefined"===typeof t.notifyOnNetworkStatusChange&&(t.notifyOnNetworkStatusChange=!1);var n=Object(i.a)({},t);return new v({queryManager:this,options:n,shouldSubscribe:e})},t.prototype.query=function(t){var e=this;return Object(l.b)(t.query,12),Object(l.b)("Document"===t.query.kind,13),Object(l.b)(!t.returnPartialData,14),Object(l.b)(!t.pollInterval,15),new Promise((function(n,r){var i=e.watchQuery(t,!1);e.fetchQueryRejectFns.set("query:"+i.queryId,r),i.result().then(n,r).then((function(){return e.fetchQueryRejectFns.delete("query:"+i.queryId)}))}))},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(t){this.stopPollingQuery(t),this.queryStore.stopQuery(t),this.invalidate(t)},t.prototype.addQueryListener=function(t,e){this.setQuery(t,(function(t){return t.listeners.add(e),{invalidated:!1}}))},t.prototype.updateQueryWatch=function(t,e,n){var r=this,i=this.getQuery(t).cancel;i&&i();return this.dataStore.getCache().watch({query:e,variables:n.variables,optimistic:!0,previousResult:function(){var e=null,n=r.getQuery(t).observableQuery;if(n){var i=n.getLastResult();i&&(e=i.data)}return e},callback:function(e){r.setQuery(t,(function(){return{invalidated:!0,newData:e}}))}})},t.prototype.addObservableQuery=function(t,e){this.setQuery(t,(function(){return{observableQuery:e}}))},t.prototype.removeObservableQuery=function(t){var e=this.getQuery(t).cancel;this.setQuery(t,(function(){return{observableQuery:null}})),e&&e()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach((function(t){t(new l.a(16))}));var t=[];return this.queries.forEach((function(e,n){e.observableQuery&&t.push(n)})),this.queryStore.reset(t),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var t=this;return this.clearStore().then((function(){return t.reFetchObservableQueries()}))},t.prototype.reFetchObservableQueries=function(t){var e=this;void 0===t&&(t=!1);var n=[];return this.queries.forEach((function(r,i){var o=r.observableQuery;if(o){var a=o.options.fetchPolicy;o.resetLastResults(),"cache-only"===a||!t&&"standby"===a||n.push(o.refetch()),e.setQuery(i,(function(){return{newData:null}})),e.invalidate(i)}})),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(t,e,n){return this.addQueryListener(t,this.queryListenerForObserver(t,e,n)),this.fetchQuery(t,e)},t.prototype.startQuery=function(t,e,n){return this.addQueryListener(t,n),this.fetchQuery(t,e).catch((function(){})),t},t.prototype.startGraphQLSubscription=function(t){var e=this,n=t.query,r=t.fetchPolicy,i=t.variables;n=this.transform(n).document,i=this.getVariables(n,i);var a=function(t){return e.getObservableFromLink(n,{},t,!1).map((function(i){if(r&&"no-cache"===r||(e.dataStore.markSubscriptionResult(i,n,t),e.broadcastQueries()),Object(o.q)(i))throw new y({graphQLErrors:i.errors});return i}))};if(this.transform(n).hasClientExports){var s=this.localState.addExportedVariables(n,i).then(a);return new p((function(t){var e=null;return s.then((function(n){return e=n.subscribe(t)}),t.error),function(){return e&&e.unsubscribe()}}))}return a(i)},t.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},t.prototype.removeQuery=function(t){this.fetchQueryRejectFns.delete("query:"+t),this.fetchQueryRejectFns.delete("fetchRequest:"+t),this.getQuery(t).subscriptions.forEach((function(t){return t.unsubscribe()})),this.queries.delete(t)},t.prototype.getCurrentQueryResult=function(t,e){void 0===e&&(e=!0);var n=t.options,r=n.variables,i=n.query,o=n.fetchPolicy,a=n.returnPartialData,s=t.getLastResult(),u=this.getQuery(t.queryId).newData;if(u&&u.complete)return{data:u.result,partial:!1};if("no-cache"===o||"network-only"===o)return{data:void 0,partial:!1};var c=this.dataStore.getCache().diff({query:i,variables:r,previousResult:s?s.data:void 0,returnPartialData:!0,optimistic:e}),l=c.result,f=c.complete;return{data:f||a?l:void 0,partial:!f}},t.prototype.getQueryWithPreviousResult=function(t){var e;if("string"===typeof t){var n=this.getQuery(t).observableQuery;Object(l.b)(n,17),e=n}else e=t;var r=e.options,i=r.variables,o=r.query;return{previousResult:this.getCurrentQueryResult(e,!1).data,variables:i,document:o}},t.prototype.broadcastQueries=function(){var t=this;this.onBroadcast(),this.queries.forEach((function(e,n){e.invalidated&&e.listeners.forEach((function(r){r&&r(t.queryStore.get(n),e.newData)}))}))},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(t,e,n,r){var a,s=this;void 0===r&&(r=this.queryDeduplication);var c=this.transform(t).serverQuery;if(c){var l=this.inFlightLinkObservables,f=this.link,h={query:c,variables:n,operationName:Object(o.n)(c)||void 0,context:this.prepareContext(Object(i.a)(Object(i.a)({},e),{forceFetch:!r}))};if(e=h.context,r){var d=l.get(c)||new Map;l.set(c,d);var g=JSON.stringify(n);if(!(a=d.get(g))){d.set(g,a=E(Object(u.b)(f,h)));var y=function(){d.delete(g),d.size||l.delete(c),v.unsubscribe()},v=a.subscribe({next:y,error:y,complete:y})}}else a=E(Object(u.b)(f,h))}else a=p.of({data:{}}),e=this.prepareContext(e);var m=this.transform(t).clientQuery;return m&&(a=function(t,e){return new p((function(n){var r=n.next,i=n.error,o=n.complete,a=0,s=!1,u={next:function(t){++a,new Promise((function(n){n(e(t))})).then((function(t){--a,r&&r.call(n,t),s&&u.complete()}),(function(t){--a,i&&i.call(n,t)}))},error:function(t){i&&i.call(n,t)},complete:function(){s=!0,a||o&&o.call(n)}},c=t.subscribe(u);return function(){return c.unsubscribe()}}))}(a,(function(t){return s.localState.runResolvers({document:m,remoteResult:t,context:e,variables:n})}))),a},t.prototype.fetchRequest=function(t){var e,n,i=this,o=t.requestId,a=t.queryId,s=t.document,u=t.options,c=t.fetchMoreForQueryId,l=u.variables,f=u.errorPolicy,h=void 0===f?"none":f,p=u.fetchPolicy;return new Promise((function(t,f){var g=i.getObservableFromLink(s,u.context,l),v="fetchRequest:"+a;i.fetchQueryRejectFns.set(v,f);var m=function(){i.fetchQueryRejectFns.delete(v),i.setQuery(a,(function(t){t.subscriptions.delete(A)}))},A=g.map((function(t){if(o>=i.getQuery(a).lastRequestId&&(i.markQueryResult(a,t,u,c),i.queryStore.markQueryResult(a,t,c),i.invalidate(a),i.invalidate(c),i.broadcastQueries()),"none"===h&&d(t.errors))return f(new y({graphQLErrors:t.errors}));if("all"===h&&(n=t.errors),c||"no-cache"===p)e=t.data;else{var r=i.dataStore.getCache().diff({variables:l,query:s,optimistic:!1,returnPartialData:!0}),g=r.result;(r.complete||u.returnPartialData)&&(e=g)}})).subscribe({error:function(t){m(),f(t)},complete:function(){m(),t({data:e,errors:n,loading:!1,networkStatus:r.ready,stale:!1})}});i.setQuery(a,(function(t){t.subscriptions.add(A)}))}))},t.prototype.getQuery=function(t){return this.queries.get(t)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(t,e){var n=this.getQuery(t),r=Object(i.a)(Object(i.a)({},n),e(n));this.queries.set(t,r)},t.prototype.invalidate=function(t,e){void 0===e&&(e=!0),t&&this.setQuery(t,(function(){return{invalidated:e}}))},t.prototype.prepareContext=function(t){void 0===t&&(t={});var e=this.localState.prepareContext(t);return Object(i.a)(Object(i.a)({},e),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(t){var e=this.queryStore.get(t);return e&&e.networkStatus!==r.ready&&e.networkStatus!==r.error},t.prototype.startPollingQuery=function(t,e,n){var r=this,o=t.pollInterval;if(Object(l.b)(o,18),!this.ssrMode){var a=this.pollingInfoByQueryId.get(e);a||this.pollingInfoByQueryId.set(e,a={}),a.interval=o,a.options=Object(i.a)(Object(i.a)({},t),{fetchPolicy:"network-only"});var s=function(){var t=r.pollingInfoByQueryId.get(e);t&&(r.checkInFlight(e)?u():r.fetchQuery(e,t.options,g.poll).then(u,u))},u=function(){var t=r.pollingInfoByQueryId.get(e);t&&(clearTimeout(t.timeout),t.timeout=setTimeout(s,t.interval))};n&&this.addQueryListener(e,n),u()}return e},t.prototype.stopPollingQuery=function(t){this.pollingInfoByQueryId.delete(t)},t}(),T=function(){function t(t){this.cache=t}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(t,e,n,r,i){void 0===i&&(i=!1);var a=!Object(o.q)(t);i&&Object(o.q)(t)&&t.data&&(a=!0),!r&&a&&this.cache.write({result:t.data,dataId:"ROOT_QUERY",query:e,variables:n})},t.prototype.markSubscriptionResult=function(t,e,n){Object(o.q)(t)||this.cache.write({result:t.data,dataId:"ROOT_SUBSCRIPTION",query:e,variables:n})},t.prototype.markMutationInit=function(t){var e,n=this;t.optimisticResponse&&(e="function"===typeof t.optimisticResponse?t.optimisticResponse(t.variables):t.optimisticResponse,this.cache.recordOptimisticTransaction((function(r){var i=n.cache;n.cache=r;try{n.markMutationResult({mutationId:t.mutationId,result:{data:e},document:t.document,variables:t.variables,updateQueries:t.updateQueries,update:t.update})}finally{n.cache=i}}),t.mutationId))},t.prototype.markMutationResult=function(t){var e=this;if(!Object(o.q)(t.result)){var n=[{result:t.result.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables}],r=t.updateQueries;r&&Object.keys(r).forEach((function(i){var a=r[i],s=a.query,u=a.updater,c=e.cache.diff({query:s.document,variables:s.variables,returnPartialData:!0,optimistic:!1}),l=c.result;if(c.complete){var f=Object(o.I)((function(){return u(l,{mutationResult:t.result,queryName:Object(o.n)(s.document)||void 0,queryVariables:s.variables})}));f&&n.push({result:f,dataId:"ROOT_QUERY",query:s.document,variables:s.variables})}})),this.cache.performTransaction((function(e){n.forEach((function(t){return e.write(t)}));var r=t.update;r&&Object(o.I)((function(){return r(e,t.result)}))}))}},t.prototype.markMutationComplete=function(t){var e=t.mutationId;t.optimisticResponse&&this.cache.removeOptimistic(e)},t.prototype.markUpdateQueryResult=function(t,e,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:e,query:t})},t.prototype.reset=function(){return this.cache.reset()},t}(),P=function(){function t(t){var e=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=t.cache,r=t.ssrMode,i=void 0!==r&&r,o=t.ssrForceFetchDelay,a=void 0===o?0:o,s=t.connectToDevTools,c=t.queryDeduplication,f=void 0===c||c,h=t.defaultOptions,p=t.assumeImmutableResults,d=void 0!==p&&p,g=t.resolvers,y=t.typeDefs,v=t.fragmentMatcher,m=t.name,A=t.version,b=t.link;if(!b&&g&&(b=u.a.empty()),!b||!n)throw new l.a(4);this.link=b,this.cache=n,this.store=new T(n),this.disableNetworkFetches=i||a>0,this.queryDeduplication=f,this.defaultOptions=h||{},this.typeDefs=y,a&&setTimeout((function(){return e.disableNetworkFetches=!1}),a),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);"undefined"!==typeof s&&(s&&"undefined"!==typeof window)&&(window.__APOLLO_CLIENT__=this),this.version="2.6.10",this.localState=new x({cache:n,client:this,resolvers:g,fragmentMatcher:v}),this.queryManager=new S({link:this.link,store:this.store,queryDeduplication:f,ssrMode:i,clientAwareness:{name:m,version:A},localState:this.localState,assumeImmutableResults:d,onBroadcast:function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.queryStore.getStore(),mutations:e.queryManager.mutationStore.getStore()},dataWithOptimisticResults:e.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=Object(i.a)(Object(i.a)({},this.defaultOptions.watchQuery),t)),!this.disableNetworkFetches||"network-only"!==t.fetchPolicy&&"cache-and-network"!==t.fetchPolicy||(t=Object(i.a)(Object(i.a)({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},t.prototype.query=function(t){return this.defaultOptions.query&&(t=Object(i.a)(Object(i.a)({},this.defaultOptions.query),t)),Object(l.b)("cache-and-network"!==t.fetchPolicy,5),this.disableNetworkFetches&&"network-only"===t.fetchPolicy&&(t=Object(i.a)(Object(i.a)({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},t.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=Object(i.a)(Object(i.a)({},this.defaultOptions.mutate),t)),this.queryManager.mutate(t)},t.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!1),this.cache.readQuery(t,e)},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!1),this.cache.readFragment(t,e)},t.prototype.writeQuery=function(t){var e=this.cache.writeQuery(t);return this.queryManager.broadcastQueries(),e},t.prototype.writeFragment=function(t){var e=this.cache.writeFragment(t);return this.queryManager.broadcastQueries(),e},t.prototype.writeData=function(t){var e=this.cache.writeData(t);return this.queryManager.broadcastQueries(),e},t.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},t.prototype.__requestRaw=function(t){return Object(u.b)(this.link,t)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var t=this;return Promise.resolve().then((function(){return t.queryManager.clearStore()})).then((function(){return Promise.all(t.resetStoreCallbacks.map((function(t){return t()})))})).then((function(){return t.reFetchObservableQueries()}))},t.prototype.clearStore=function(){var t=this;return Promise.resolve().then((function(){return t.queryManager.clearStore()})).then((function(){return Promise.all(t.clearStoreCallbacks.map((function(t){return t()})))}))},t.prototype.onResetStore=function(t){var e=this;return this.resetStoreCallbacks.push(t),function(){e.resetStoreCallbacks=e.resetStoreCallbacks.filter((function(e){return e!==t}))}},t.prototype.onClearStore=function(t){var e=this;return this.clearStoreCallbacks.push(t),function(){e.clearStoreCallbacks=e.clearStoreCallbacks.filter((function(e){return e!==t}))}},t.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},t.prototype.extract=function(t){return this.cache.extract(t)},t.prototype.restore=function(t){return this.cache.restore(t)},t.prototype.addResolvers=function(t){this.localState.addResolvers(t)},t.prototype.setResolvers=function(t){this.localState.setResolvers(t)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return p}));var r,i=n(0),o=n(106),a=n(254),s=(r={},Object(i.a)(r,o.b,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(i.a)(r,o.a,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),r),u="__LUMA_INJECT_DECLARATIONS__",c=/void\s+main\s*\([^)]*\)\s*\{\n?/,l=/}\n?[^{}]*$/,f=[];function h(t,e,n,r){var i=e===o.b,a=function(e){var r=n[e];r.sort((function(t,e){return t.order-e.order})),f.length=r.length;for(var o=0,a=r.length;o<a;++o)f[o]=r[o].injection;var s="".concat(f.join("\n"),"\n");switch(e){case"vs:#decl":i&&(t=t.replace(u,s));break;case"vs:#main-start":i&&(t=t.replace(c,(function(t){return t+s})));break;case"vs:#main-end":i&&(t=t.replace(l,(function(t){return s+t})));break;case"fs:#decl":i||(t=t.replace(u,s));break;case"fs:#main-start":i||(t=t.replace(c,(function(t){return t+s})));break;case"fs:#main-end":i||(t=t.replace(l,(function(t){return s+t})));break;default:t=t.replace(e,(function(t){return t+s}))}};for(var h in n)a(h);return t=t.replace(u,""),r&&(t=t.replace(/\}\s*$/,(function(t){return t+s[e]}))),t}function p(t){var e={};return Object(a.a)(Array.isArray(t)&&t.length>1),t.forEach((function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}},,,,function(t,e,n){"use strict";(function(t){var r=n(176);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if("undefined"!==typeof window&&"object"===(0,i.default)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!==typeof t&&"object"===(0,i.default)(t.versions)&&Boolean(t.versions.electron))return!0;var n="object"===("undefined"===typeof navigator?"undefined":(0,i.default)(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent,r=e||n;if(r&&r.indexOf("Electron")>=0)return!0;return!1};var i=r(n(205))}).call(this,n(78))},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),i=n.n(r),o=n(11),a=n(160),s=n(111),u=n(69);function c(t){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(i.a.mark((function t(e){var n,r,o,c,l,f,h,p,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=[],o=!0,c=!1,t.prev=4,f=Object(a.a)(e);case 6:return t.next=8,f.next();case 8:return h=t.sent,o=h.done,t.next=12,h.value;case 12:if(p=t.sent,o){t.next=19;break}"string"===typeof(d=p)?r.push(d):n.push(d);case 16:o=!0,t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),c=!0,l=t.t0;case 25:if(t.prev=25,t.prev=26,o||null==f.return){t.next=30;break}return t.next=30,f.return();case 30:if(t.prev=30,!c){t.next=33;break}throw l;case 33:return t.finish(30);case 34:return t.finish(25);case 35:if(!(r.length>0)){t.next=38;break}return Object(u.a)(0===n.length),t.abrupt("return",r.join(""));case 38:return t.abrupt("return",s.b.apply(void 0,n));case 39:case"end":return t.stop()}}),t,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ArrowStyles",{enumerable:!0,get:function(){return r.ArrowStyles}}),Object.defineProperty(e,"DEFAULT_ARROWS",{enumerable:!0,get:function(){return r.DEFAULT_ARROWS}}),Object.defineProperty(e,"MAX_ARROWS",{enumerable:!0,get:function(){return r.MAX_ARROWS}}),Object.defineProperty(e,"EditableGeoJsonLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"EditableH3ClusterLayer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SelectionLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"ElevatedEditHandleLayer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PathOutlineLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"PathMarkerLayer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"JunctionScatterplotLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"toDeckColor",{enumerable:!0,get:function(){return f.toDeckColor}});var r=n(441),i=h(n(266)),o=h(n(479)),a=h(n(480)),s=h(n(481)),u=h(n(348)),c=h(n(483)),l=h(n(487)),f=n(488);function h(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n(63),o=n(207),a=(r=n(343))&&r.__esModule?r:{default:r};function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=[0,0,0,153],v=[0,0,0,144],m=[0,0,0,255],A=[0,0,144,144],b=[144,144,144,255],_=[144,144,144,144],w=[192,0,0,255],x=[0,0,0,128],E=[124,0,192,255],O=[255,255,255,255],S=o.DrawPolygonMode;function T(t){return t&&"function"===typeof t?function(e){return t(function(t){if(t.__source)return t.__source.object;if(t.sourceFeature)return t.sourceFeature.feature;return t}(e))}:t}function P(t){switch(t.properties.editHandleType){case"existing":return w;case"snap-source":return E;case"intermediate":default:return x}}var M={mode:S,onEdit:function(){},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:1,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",lineJointRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:function(t,e,n){return e?m:y},getFillColor:function(t,e,n){return e?A:v},getRadius:function(t){return t&&t.properties&&t.properties.radius||t&&t.properties&&t.properties.size||1},getLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},getTentativeLineColor:function(t){return b},getTentativeFillColor:function(t){return _},getTentativeLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:P,getEditHandlePointOutlineColor:function(t){return O},getEditHandlePointRadius:function(t){switch(t.properties.editHandleType){case"existing":return 5;case"snap":return 7;case"intermediate":default:return 3}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,getEditHandleIcon:function(t){return t.properties.editHandleType},getEditHandleIconSize:10,getEditHandleIconColor:P,getEditHandleIconAngle:0,billboard:!0},C={view:o.ViewMode,modify:o.ModifyMode,translate:new o.SnappableMode(new o.TranslateMode),transform:new o.SnappableMode(new o.TransformMode),scale:o.ScaleMode,rotate:o.RotateMode,duplicate:o.DuplicateMode,split:o.SplitPolygonMode,extrude:o.ExtrudeMode,elevation:o.ElevationMode,drawPoint:o.DrawPointMode,drawLineString:o.DrawLineStringMode,drawPolygon:o.DrawPolygonMode,drawRectangle:o.DrawRectangleMode,drawCircleFromCenter:o.DrawCircleFromCenterMode,drawCircleByBoundingBox:o.DrawCircleByDiameterMode,drawEllipseByBoundingBox:o.DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:o.DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:o.DrawEllipseUsingThreePointsMode,draw90DegreePolygon:o.Draw90DegreePolygonMode,drawPolygonByDragging:o.DrawPolygonByDraggingMode},I=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(s,t);var e,n,r,o,a=(e=s,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function s(){return u(this,s),a.apply(this,arguments)}return n=s,(r=[{key:"renderLayers",value:function(){var t=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{"line-strings":{billboard:this.props.billboard},"polygons-stroke":{billboard:this.props.billboard}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}}),e=[new i.GeoJsonLayer(t)];return e=e.concat(this.createGuidesLayers(),this.createTooltipsLayers())}},{key:"initializeState",value:function(){l(p(s.prototype),"initializeState",this).call(this),this.setState({selectedFeatures:[],editHandles:[]})}},{key:"shouldUpdateState",value:function(t){return l(p(s.prototype),"shouldUpdateState",this).call(this,t)||t.changeFlags.stateChanged}},{key:"updateState",value:function(t){var e,n=t.props,r=t.oldProps,i=t.changeFlags;(l(p(s.prototype),"updateState",this).call(this,{oldProps:r,props:n,changeFlags:i}),!i.propsOrDataChanged||0!==Object.keys(r).length&&n.mode===r.mode)||("function"===typeof n.mode?e=new(0,n.mode):"string"===typeof n.mode?(e=C[n.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):e=n.mode,e||(console.warn("No mode configured for ".concat(String(n.mode))),e=new S),e!==this.state.mode&&this.setState({mode:e,cursor:null}));var o=[];Array.isArray(n.selectedFeatureIndexes)&&(o=n.selectedFeatureIndexes.map((function(t){return n.data.features[t]}))),this.setState({selectedFeatures:o})}},{key:"getModeProps",value:function(t){var e=this;return{modeConfig:t.modeConfig,data:t.data,selectedIndexes:t.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:function(n){e.setNeedsUpdate(),t.onEdit(n)},onUpdateCursor:function(t){e.setState({cursor:t})}}}},{key:"selectionAwareAccessor",value:function(t){var e=this;return"function"!==typeof t?t:function(n){return t(n,e.isFeatureSelected(n),e.props.mode)}}},{key:"isFeatureSelected",value:function(t){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var e=this.props.data.features.indexOf(t);return this.props.selectedFeatureIndexes.includes(e)}},{key:"getPickingInfo",value:function(t){var e=t.info;return t.sourceLayer.id.endsWith("guides")&&(e.isGuide=!0),e}},{key:"createGuidesLayers",value:function(){var t,e=this.getActiveMode().getGuides(this.getModeProps(this.props));return e&&e.features.length?(t="icon"===this.props.editHandleType?{type:i.IconLayer,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeScale:this.props.editHandleIconSizeScale,getIcon:T(this.props.getEditHandleIcon),getSize:T(this.props.getEditHandleIconSize),getColor:T(this.props.getEditHandleIconColor),getAngle:T(this.props.getEditHandleIconAngle)}:{type:i.ScatterplotLayer,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:T(this.props.getEditHandlePointRadius),getFillColor:T(this.props.getEditHandlePointColor),getLineColor:T(this.props.getEditHandlePointOutlineColor)},[new i.GeoJsonLayer(this.getSubLayerProps({id:"guides",data:e,fp64:this.props.fp64,_subLayerProps:{points:t},lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:T(this.props.getTentativeLineColor),getLineWidth:T(this.props.getTentativeLineWidth),getFillColor:T(this.props.getTentativeFillColor)}))]):[]}},{key:"createTooltipsLayers",value:function(){var t=this.getActiveMode().getTooltips(this.getModeProps(this.props));return[new i.TextLayer(this.getSubLayerProps({id:"tooltips",data:t}))]}},{key:"onLayerClick",value:function(t){this.getActiveMode().handleClick(t,this.getModeProps(this.props))}},{key:"onLayerKeyUp",value:function(t){this.getActiveMode().handleKeyUp(t,this.getModeProps(this.props))}},{key:"onStartDragging",value:function(t){this.getActiveMode().handleStartDragging(t,this.getModeProps(this.props))}},{key:"onDragging",value:function(t){this.getActiveMode().handleDragging(t,this.getModeProps(this.props))}},{key:"onStopDragging",value:function(t){this.getActiveMode().handleStopDragging(t,this.getModeProps(this.props))}},{key:"onPointerMove",value:function(t){this.setState({lastPointerMoveEvent:t}),this.getActiveMode().handlePointerMove(t,this.getModeProps(this.props))}},{key:"getCursor",value:function(t){var e=t.isDragging,n=this.state.cursor;return n||(n=e?"grabbing":"grab"),n}},{key:"getActiveMode",value:function(){return this.state.mode}}])&&c(n.prototype,r),o&&c(n,o),s}(a.default);e.default=I,g(I,"layerName","EditableGeoJsonLayer"),g(I,"defaultProps",M)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(180);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModifyMode=void 0;var r,i=(r=n(336))&&r.__esModule?r:{default:r},o=n(44),a=n(71),s=n(54),u=n(109);function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(h,t);var e,n,r,s,c=(e=h,function(){var t,n=v(e);if(y()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function h(){return p(this,h),c.apply(this,arguments)}return n=h,(r=[{key:"getGuides",value:function(t){var e,n=this,r=[],i=t.data,s=t.lastPointerMoveEvent,u=i.features,c=s&&s.picks,h=s&&s.mapCoords,p=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t.selectedIndexes);try{for(p.s();!(e=p.n()).done;){var d=e.value;if(d<u.length){var g=u[d].geometry;r.push.apply(r,l((0,a.getEditHandlesForGeometry)(g,d)))}else console.warn("selectedFeatureIndexes out of range ".concat(d))}}catch(x){p.e(x)}finally{p.f()}if(c&&c.length&&h){var y=!(0,a.getPickedExistingEditHandle)(c)&&c.find((function(t){return!t.isGuide}));if(y&&!y.object.geometry.type.includes("Point")&&t.selectedIndexes.includes(y.index)){var v=null,m=[],A=(0,o.point)(h);if((0,a.recursivelyTraverseNestedArrays)(y.object.geometry.coordinates,[],(function(e,r){var i=(0,o.lineString)(e),a=n.nearestPointOnLine(i,A,t.modeConfig&&t.modeConfig.viewport);(!v||a.properties.dist<v.properties.dist)&&(v=a,m=r)})),v){var b=v,_=b.geometry.coordinates,w=b.properties.index;r.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:y.index,positionIndexes:[].concat(l(m),[w+1])},geometry:{type:"Point",coordinates:_}})}}}return{type:"FeatureCollection",features:r}}},{key:"nearestPointOnLine",value:function(t,e,n){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(n)return(0,a.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,i.default)(t,e)}},{key:"handleClick",value:function(t,e){var n=(0,a.getPickedExistingEditHandle)(t.picks),r=(0,a.getPickedIntermediateEditHandle)(t.picks);if(n){var i,o=n.properties,s=o.featureIndex,c=o.positionIndexes;try{i=new u.ImmutableFeatureCollection(e.data).removePosition(s,c).getObject()}catch(d){}i&&e.onEdit({updatedData:i,editType:"removePosition",editContext:{featureIndexes:[s],positionIndexes:c,position:n.geometry.coordinates}})}else if(r){var l=r.properties,f=l.featureIndex,h=l.positionIndexes,p=new u.ImmutableFeatureCollection(e.data).addPosition(f,h,r.geometry.coordinates).getObject();p&&e.onEdit({updatedData:p,editType:"addPosition",editContext:{featureIndexes:[f],positionIndexes:h,position:r.geometry.coordinates}})}}},{key:"handleDragging",value:function(t,e){var n=(0,a.getPickedEditHandle)(t.pointerDownPicks);if(n){t.cancelPan();var r=n.properties,i=new u.ImmutableFeatureCollection(e.data).replacePosition(r.featureIndex,r.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:i,editType:"movePosition",editContext:{featureIndexes:[r.featureIndex],positionIndexes:r.positionIndexes,position:t.mapCoords}})}}},{key:"handlePointerMove",value:function(t,e){var n=this.getCursor(t);e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,a.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var i=r.properties,o=new u.ImmutableFeatureCollection(e.data).addPosition(i.featureIndex,i.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:o,editType:"addPosition",editContext:{featureIndexes:[i.featureIndex],positionIndexes:i.positionIndexes,position:t.mapCoords}})}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,a.getPickedEditHandle)(t.picks);if(n.length&&r){var i=r.properties,o=new u.ImmutableFeatureCollection(e.data).replacePosition(i.featureIndex,i.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:o,editType:"finishMovePosition",editContext:{featureIndexes:[i.featureIndex],positionIndexes:i.positionIndexes,position:t.mapCoords}})}}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,a.getPickedEditHandles)(e).length?"cell":null}}])&&d(n.prototype,r),s&&d(n,s),h}(s.GeoJsonEditMode);e.ModifyMode=A},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(44),o=n(91),a=r(n(448)),s=n(122),u=r(n(449));function c(t,e){var n=o.getCoords(t),r=o.getCoords(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=n[0][0],s=n[0][1],u=n[1][0],c=n[1][1],l=r[0][0],f=r[0][1],h=r[1][0],p=r[1][1],d=(p-f)*(u-a)-(h-l)*(c-s),g=(h-l)*(s-f)-(p-f)*(a-l),y=(u-a)*(s-f)-(c-s)*(a-l);if(0===d)return null;var v=g/d,m=y/d;if(v>=0&&v<=1&&m>=0&&m<=1){var A=a+v*(u-a),b=s+v*(c-s);return i.point([A,b])}return null}e.default=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=i.feature(t)),"LineString"===e.type&&(e=i.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var l=c(t,e);return l&&r.push(l),i.featureCollection(r)}var f=u.default();return f.load(a.default(e)),s.featureEach(a.default(t),(function(t){s.featureEach(f.search(t),(function(e){var i=c(t,e);if(i){var a=o.getCoords(i).join(",");n[a]||(n[a]=!0,r.push(i))}}))})),i.featureCollection(r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TranslateMode=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(452)),a=n(44),s=n(54),u=n(109);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(A,t);var e,n,s,c,l=(e=A,function(){var t,n=y(e);if(g()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function A(){var t;f(this,A);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(d(t=l.call.apply(l,[this].concat(n))),"_geometryBeforeTranslate",void 0),m(d(t),"_isTranslatable",void 0),t}return n=A,(s=[{key:"handleDragging",value:function(t,e){if(this._isTranslatable){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translating",e);n&&e.onEdit(n)}t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){this._isTranslatable=this.isSelectionPicked(t.pointerDownPicks||t.picks,e),this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translated",e);n&&e.onEdit(n),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("move"):t.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(t,e,n,s){if(!this._geometryBeforeTranslate)return null;for(var c=(0,a.point)(t),l=(0,a.point)(e),f=(0,i.default)(c,l),h=(0,r.default)(c,l),p=(0,o.default)(this._geometryBeforeTranslate,f,h),d=new u.ImmutableFeatureCollection(s.data),g=s.selectedIndexes,y=0;y<g.length;y++){var v=g[y],m=p.features[y];d=d.replaceGeometry(v,m.geometry)}return{updatedData:d.getObject(),editType:n,editContext:{featureIndexes:g}}}}])&&h(n.prototype,s),c&&h(n,c),A}(s.GeoJsonEditMode);e.TranslateMode=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(122),i=n(44);e.default=function(t,e){void 0===e&&(e={});var n=0,o=0,a=0;return r.coordEach(t,(function(t){n+=t[0],o+=t[1],a++})),i.point([n/a,o/a],e.properties)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44),i=n(91);function o(t,e){void 0===e&&(e={});var n=i.getGeom(t);n.type;return s(n.coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function a(t,e){void 0===e&&(e={});var n=i.getGeom(t),o=(n.type,n.coordinates),a=e.properties?e.properties:"Feature"===t.type?t.properties:{},u=[];return o.forEach((function(t){u.push(s(t,a))})),r.featureCollection(u)}function s(t,e){return t.length>1?r.multiLineString(t,e):r.lineString(t[0],e)}e.default=function(t,e){void 0===e&&(e={});var n=i.getGeom(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return o(n,e);case"MultiPolygon":return a(n,e);default:throw new Error("invalid poly")}},e.polygonToLine=o,e.multiPolygonToLine=a,e.coordsToLine=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonMode=void 0;var r=n(71);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,i,a,d=(e=g,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function g(){return s(this,g),d.apply(this,arguments)}return n=g,(i=[{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length||2===r.length?e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(o(r),i)}}:r.length>2&&(e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(o(r),i,[r[0]])]}}),e}},{key:"getGuides",value:function(t){var e,n=this.getClickSequence(),r={type:"FeatureCollection",features:[]},i=this.createTentativeFeature(t);i&&r.features.push(i);var a=n.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=r.features).push.apply(e,o(a)),r}},{key:"handleClick",value:function(t,e){var n=t.picks,i=(0,r.getPickedEditHandle)(n),a=!1;i||(this.addClickSequence(t),a=!0);var s=this.getClickSequence();if(s.length>2&&i&&Array.isArray(i.properties.positionIndexes)&&(0===i.properties.positionIndexes[0]||i.properties.positionIndexes[0]===s.length-1)){var u={type:"Polygon",coordinates:[[].concat(o(s),[s[0]])]};this.resetClickSequence();var c=this.getAddFeatureOrBooleanPolygonAction(u,e);c&&e.onEdit(c)}else a&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>2){var r={type:"Polygon",coordinates:[[].concat(o(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),c(h(g.prototype),"handlePointerMove",this).call(this,t,e)}}])&&u(n.prototype,i),a&&u(n,a),g}(n(54).GeoJsonEditMode);e.DrawPolygonMode=d},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n={};return function(i){for(var o in i)if(!r(i[o],n[o])){e=t(i),n=i;break}return e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(4),i=n.n(r),o=n(11),a=n(67),s=n(200),u=n(69),c={};function l(t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(i.a.mark((function t(e){var n,r,o=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:{},n&&(e=h(e,n,r)),c[e]=c[e]||p(e),t.next=6,c[e];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,e,n){var r=n.modules||{};return r[t]?r[t]:a.b?n.CDN?(Object(u.a)(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat("2.3.7","/dist/libs/").concat(t)):a.c?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function p(t){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(i.a.mark((function t(e){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith("wasm")){t.next=7;break}return t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.arrayBuffer();case 6:return t.abrupt("return",t.sent);case 7:if(a.b){t.next=9;break}return t.abrupt("return",s.requireFromFile&&s.requireFromFile(e));case 9:if(!a.c){t.next=11;break}return t.abrupt("return",importScripts(e));case 11:return t.next=13,fetch(e);case 13:return r=t.sent,t.next=16,r.text();case 16:return o=t.sent,t.abrupt("return",g(o,e));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e){if(!a.b)return s.requireFromString&&s.requireFromString(t,e);if(a.c)return eval.call(a.a,t),null;var n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(r){n.text=t}return document.body.appendChild(n),null}},function(t,e,n){"use strict";function r(t){if(!t||!t.POSITION)return null;var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=t.POSITION.value,u=s&&s.length;if(!u)return null;for(var c=0;c<u;c+=3){var l=s[c],f=s[c+1],h=s[c+2];e=l<e?l:e,n=f<n?f:n,r=h<r?h:r,i=l>i?l:i,o=f>o?f:o,a=h>a?h:a}return[[e,n,r],[i,o,a]]}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.r(e);var r=n(383);n.d(e,"SimpleMeshLayer",(function(){return r.a}));var i=n(379);n.d(e,"ScenegraphLayer",(function(){return i.a}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"objects",void 0),i(this,"originals",void 0),i(this,"updateTrigger",void 0),i(this,"_idToPosition",void 0),i(this,"_getData",void 0),i(this,"_convert",void 0),this.objects=[],this.originals=[],this.updateTrigger=0,this._idToPosition=new Map,this._getData=e,this._convert=n}var e,n,o;return e=t,(n=[{key:"updateAllDeckObjects",value:function(){var t=this;this._getData&&this._convert&&(this.originals.length=0,this.objects.length=0,this._idToPosition.clear(),this._getData().forEach((function(e){t._idToPosition.set(e.id,t.objects.length),t.originals.push(e),t.objects.push(t._convert(e))})),this.triggerUpdate())}},{key:"updateDeckObjectsByIds",value:function(t){var e=this;this._getData&&this._convert&&(t.forEach((function(t){var n=e._idToPosition.get(t);void 0!==n&&(e.objects[n]=e._convert(e.originals[n]))})),this.triggerUpdate())}},{key:"triggerUpdate",value:function(){this.updateTrigger++}},{key:"getDeckObjectById",value:function(t){var e=this._idToPosition.get(t);return void 0!==e?this.objects[e]:null}},{key:"getOriginalById",value:function(t){var e=this._idToPosition.get(t);return void 0!==e?this.originals[e]:null}}])&&r(e.prototype,n),o&&r(e,o),t}();e.default=o},function(t,e,n){"use strict";t.exports=n(502)},function(t,e,n){var r=n(281),i=n(214),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(349);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(527),i=n(99),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(98),i=n(528),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(175)(t))},function(t,e,n){(function(t){var r=n(350),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,n(175)(t))},function(t,e,n){var r=n(133)(n(98),"Map");t.exports=r},function(t,e,n){var r=n(363),i=n(364),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(358)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(565),i=n(286),o=n(566),a=n(567),s=n(568),u=n(134),c=n(351),l="[object Map]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",d="[object DataView]",g=c(r),y=c(i),v=c(o),m=c(a),A=c(s),b=u;(r&&b(new r(new ArrayBuffer(1)))!=d||i&&b(new i)!=l||o&&b(o.resolve())!=f||a&&b(new a)!=h||s&&b(new s)!=p)&&(b=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return d;case y:return l;case v:return f;case m:return h;case A:return p}return e}),t.exports=b},function(t,e,n){var r=n(571);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(134),i=n(289),o=n(99),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(619);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===r[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}}))}));var i=n(620);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}))},function(t,e,n){"use strict";n.r(e);var r=n(244),i=n(164),o=n(256),a=n(46),s=n(19),u=n(103);function c(t,e,n){if(n=n||{},!Object(s.g)(n))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&Object(s.f)(t[0])?t="mercator"===e?l(t):f(t):(!0!==r&&(t=Object(u.a)(t)),Object(a.a)(t,(function(t){var n="mercator"===e?l(t):f(t);t[0]=n[0],t[1]=n[1]}))),t}function l(t){var e,n=Math.PI/180,r=6378137,i=20037508.342789244,o=[r*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*n,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return o[0]>i&&(o[0]=i),o[0]<-i&&(o[0]=-i),o[1]>i&&(o[1]=i),o[1]<-i&&(o[1]=-i),o}function f(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}var h=function(){return new p};function p(){this.reset()}p.prototype={constructor:p,reset:function(){this.s=this.t=0},add:function(t){g(d,t,this.t),g(this,d.s,this.s),this.s?this.t+=d.t:this.s=d.t},valueOf:function(){return this.s}};var d=new p;function g(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var y=1e-6,v=Math.PI,m=v/2,A=v/4,b=2*v,_=180/v,w=v/180,x=Math.abs,E=Math.atan,O=Math.atan2,S=Math.cos,T=(Math.ceil,Math.exp),P=(Math.floor,Math.log),M=(Math.pow,Math.sin),C=(Math.sign,Math.sqrt),I=Math.tan;function R(t){return t>1?0:t<-1?v:Math.acos(t)}function k(t){return t>1?m:t<-1?-m:Math.asin(t)}function j(){}function L(t,e){t&&D.hasOwnProperty(t.type)&&D[t.type](t,e)}var N={Feature:function(t,e){L(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)L(n[r].geometry,e)}},D={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){F(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)F(n[r],e,0)},Polygon:function(t,e){B(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)B(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)L(n[r],e)}};function F(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function B(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)F(t[n],e,1);e.polygonEnd()}var z=function(t,e){t&&N.hasOwnProperty(t.type)?N[t.type](t,e):L(t,e)};h(),h();function U(t){return[O(t[1],t[0]),k(t[2])]}function G(t){var e=t[0],n=t[1],r=S(n);return[r*S(e),r*M(e),M(n)]}function V(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function q(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function H(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function W(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function X(t){var e=C(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}h();var Y=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function Q(t,e){return[t>v?t-b:t<-v?t+b:t,e]}function Z(t,e,n){return(t%=b)?e||n?Y(J(t),$(e,n)):J(t):e||n?$(e,n):Q}function K(t){return function(e,n){return[(e+=t)>v?e-b:e<-v?e+b:e,n]}}function J(t){var e=K(t);return e.invert=K(-t),e}function $(t,e){var n=S(t),r=M(t),i=S(e),o=M(e);function a(t,e){var a=S(e),s=S(t)*a,u=M(t)*a,c=M(e),l=c*n+s*r;return[O(u*i-l*o,s*n-c*r),k(l*i+u*o)]}return a.invert=function(t,e){var a=S(e),s=S(t)*a,u=M(t)*a,c=M(e),l=c*i-u*o;return[O(u*i+c*o,s*n+l*r),k(l*n-s*r)]},a}Q.invert=Q;function tt(t,e,n,r,i,o){if(n){var a=S(e),s=M(e),u=r*n;null==i?(i=e+r*b,o=e-u/2):(i=et(a,i),o=et(a,o),(r>0?i<o:i>o)&&(i+=r*b));for(var c,l=i;r>0?l>o:l<o;l-=u)c=U([a,-s*S(l),-s*M(l)]),t.point(c[0],c[1])}}function et(t,e){(e=G(e))[0]-=t,X(e);var n=R(-e[1]);return((-e[2]<0?-n:n)+b-y)%b}var nt=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:j,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},rt=function(t,e){return x(t[0]-e[0])<y&&x(t[1]-e[1])<y};function it(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var ot=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(rt(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new it(r,t,null,!0)),u.push(n.o=new it(r,null,n,!1)),s.push(n=new it(a,t,null,!1)),u.push(n.o=new it(a,null,n,!0))}})),s.length){for(u.sort(e),at(s),at(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}};function at(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var st=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var ut=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return st(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(st);ut.right,ut.left;var ct=Array.prototype;ct.slice,ct.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var lt=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var ft=1e9,ht=-ft;function pt(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return x(r[0]-t)<y?i>0?0:3:x(r[0]-n)<y?i>0?2:1:x(r[1]-e)<y?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,f,h,p,d,g,y,v,m,A=a,b=nt(),_={point:w,lineStart:function(){_.point=x,c&&c.push(l=[]);v=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(x(f,h),p&&y&&b.rejoin(),u.push(b.result()));_.point=w,y&&A.lineEnd()},polygonStart:function(){A=b,u=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,f=s[0],h=f[0],p=f[1];u<l;++u)o=h,a=p,h=(f=s[u])[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=m&&e,i=(u=lt(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ot(u,s,e,o,a),a.polygonEnd());A=a,u=c=l=null}};function w(t,e){i(t,e)&&A.point(t,e)}function x(o,a){var s=i(o,a);if(c&&l.push([o,a]),v)f=o,h=a,p=s,v=!1,s&&(A.lineStart(),A.point(o,a));else if(s&&y)A.point(o,a);else{var u=[d=Math.max(ht,Math.min(ft,d)),g=Math.max(ht,Math.min(ft,g))],b=[o=Math.max(ht,Math.min(ft,o)),a=Math.max(ht,Math.min(ft,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*f,t[1]=u+c*h),l<1&&(e[0]=s+l*f,e[1]=u+l*h),!0}}}}}(u,b,t,e,n,r)?s&&(A.lineStart(),A.point(o,a),m=!1):(y||(A.lineStart(),A.point(u[0],u[1])),A.point(b[0],b[1]),s||A.lineEnd(),m=!1)}d=o,g=a,y=s}return _}}var dt=h(),gt=function(t,e){var n=e[0],r=e[1],i=[M(n),-S(n),0],o=0,a=0;dt.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,f=c[l-1],h=f[0],p=f[1]/2+A,d=M(p),g=S(p),m=0;m<l;++m,h=w,d=E,g=T,f=_){var _=c[m],w=_[0],x=_[1]/2+A,E=M(x),T=S(x),P=w-h,C=P>=0?1:-1,I=C*P,R=I>v,j=d*E;if(dt.add(O(j*C*M(I),g*T+j*S(I))),o+=R?P+C*b:P,R^h>=n^w>=n){var L=q(G(f),G(_));X(L);var N=q(i,L);X(N);var D=(R^P>=0?-1:1)*k(N[2]);(r>D||r===D&&(L[0]||L[1]))&&(a+=R^P>=0?1:-1)}}return(o<-y||o<y&&dt<-y)^1&a};h();var yt=function(t){return t};h(),h();var vt=1/0,mt=vt,At=-vt,bt=At;var _t={point:function(t,e){t<vt&&(vt=t);t>At&&(At=t);e<mt&&(mt=e);e>bt&&(bt=e)},lineStart:j,lineEnd:j,polygonStart:j,polygonEnd:j,result:function(){var t=[[vt,mt],[At,bt]];return At=bt=-(mt=vt=1/0),t}};function wt(t){this._context=t}wt.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,b)}},result:j};h();function xt(){this._string=[]}function Et(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}xt.prototype={_radius:4.5,_circle:Et(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Et(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Ot=function(t,e,n,r){return function(i,o){var a,s,u,c=e(o),l=i.invert(r[0],r[1]),f=nt(),h=e(f),p=!1,d={point:g,lineStart:v,lineEnd:m,polygonStart:function(){d.point=A,d.lineStart=b,d.lineEnd=_,s=[],a=[]},polygonEnd:function(){d.point=g,d.lineStart=v,d.lineEnd=m,s=lt(s);var t=gt(a,l);s.length?(p||(o.polygonStart(),p=!0),ot(s,Tt,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);c.point(n[0],n[1])}function v(){d.point=y,c.lineStart()}function m(){d.point=g,c.lineEnd()}function A(t,e){u.push([t,e]);var n=i(t,e);h.point(n[0],n[1])}function b(){h.lineStart(),u=[]}function _(){A(u[0][0],u[0][1]),h.lineEnd();var t,e,n,r,i=h.clean(),c=f.result(),l=c.length;if(u.pop(),a.push(u),u=null,l)if(1&i){if((e=(n=c[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else l>1&&2&i&&c.push(c.pop().concat(c.shift())),s.push(c.filter(St))}return d}};function St(t){return t.length>1}function Tt(t,e){return((t=t.x)[0]<0?t[1]-m-y:m-t[1])-((e=e.x)[0]<0?e[1]-m-y:m-e[1])}var Pt=Ot((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?v:-v,u=x(o-n);x(u-v)<y?(t.point(n,r=(r+a)/2>0?m:-m),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=v&&(x(n-i)<y&&(n-=i*y),x(o-s)<y&&(o-=s*y),r=function(t,e,n,r){var i,o,a=M(t-n);return x(a)>y?E((M(e)*(o=S(r))*M(n)-M(r)*(i=S(e))*M(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*m,r.point(-v,i),r.point(0,i),r.point(v,i),r.point(v,0),r.point(v,-i),r.point(0,-i),r.point(-v,-i),r.point(-v,0),r.point(-v,i);else if(x(t[0]-e[0])>y){var o=t[0]<e[0]?v:-v;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-v,-m]);var Mt=function(t,e){var n=S(t),r=n>0,i=x(n)>y;function o(t,e){return S(t)*S(e)>n}function a(t,e,r){var i=[1,0,0],o=q(G(t),G(e)),a=V(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=n*a/u,l=-n*s/u,f=q(i,o),h=W(i,c);H(h,W(o,l));var p=f,d=V(h,p),g=V(p,p),m=d*d-g*(V(h,h)-1);if(!(m<0)){var A=C(m),b=W(p,(-d-A)/g);if(H(b,h),b=U(b),!r)return b;var _,w=t[0],E=e[0],O=t[1],S=e[1];E<w&&(_=w,w=E,E=_);var T=E-w,P=x(T-v)<y;if(!P&&S<O&&(_=O,O=S,S=_),P||T<y?P?O+S>0^b[1]<(x(b[0]-w)<y?O:S):O<=b[1]&&b[1]<=S:T>v^(w<=b[0]&&b[0]<=E)){var M=W(p,(-d+A)/g);return H(M,h),[b,U(M)]}}}function s(e,n){var i=r?t:v-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Ot(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var p,d=[f,h],g=o(f,h),m=r?g?0:s(f,h):g?s(f+(f<0?v:-v),h):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(p=a(e,d))||rt(e,p)||rt(d,p))&&(d[0]+=y,d[1]+=y,g=o(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var A;m&n||!(A=a(d,e,!0))||(l=0,r?(t.lineStart(),t.point(A[0][0],A[0][1]),t.point(A[1][0],A[1][1]),t.lineEnd()):(t.point(A[1][0],A[1][1]),t.lineEnd(),t.lineStart(),t.point(A[0][0],A[0][1])))}!g||e&&rt(e,d)||t.point(d[0],d[1]),e=d,u=g,n=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(n,r,i,o){tt(o,t,e,i,n,r)}),r?[0,-t]:[-v,t-v])};function Ct(t){return function(e){var n=new It;for(var r in t)n[r]=t[r];return n.stream=e,n}}function It(){}function Rt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),z(n,t.stream(_t));var a=_t.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function kt(t,e,n){return Rt(t,[[0,0],e],n)}It.prototype={constructor:It,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var jt=S(30*w),Lt=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,f,h,p,d,g,v){var m=c-r,A=l-i,b=m*m+A*A;if(b>4*e&&g--){var _=a+h,w=s+p,E=u+d,S=C(_*_+w*w+E*E),T=k(E/=S),P=x(x(E)-1)<y||x(o-f)<y?(o+f)/2:O(w,_),M=t(P,T),I=M[0],R=M[1],j=I-r,L=R-i,N=A*j-m*L;(N*N/b>e||x((m*j+A*L)/b-.5)>.3||a*h+s*p+u*d<jt)&&(n(r,i,o,a,s,u,I,R,P,_/=S,w/=S,E,g,v),v.point(I,R),n(I,R,P,_,w,E,c,l,f,h,p,d,g,v))}}return function(e){var r,i,o,a,s,u,c,l,f,h,p,d,g={point:y,lineStart:v,lineEnd:A,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,g.point=m,e.lineStart()}function m(r,i){var o=G([r,i]),a=t(r,i);n(l,f,c,h,p,d,l=a[0],f=a[1],c=r,h=o[0],p=o[1],d=o[2],16,e),e.point(l,f)}function A(){g.point=y,e.lineEnd()}function b(){v(),g.point=_,g.lineEnd=w}function _(t,e){m(r=t,e),i=l,o=f,a=h,s=p,u=d,g.point=m}function w(){n(l,f,c,h,p,d,i,o,r,a,s,u,16,e),g.lineEnd=A,A()}return g}}(t,e):function(t){return Ct({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var Nt=Ct({point:function(t,e){this.stream.point(t*w,e*w)}});function Dt(t){return Ft((function(){return t}))()}function Ft(t){var e,n,r,i,o,a,s,u,c,l,f=150,h=480,p=250,d=0,g=0,y=0,v=0,m=0,A=null,b=Pt,x=null,E=yt,O=.5,S=Lt(M,O);function T(t){return[(t=o(t[0]*w,t[1]*w))[0]*f+n,r-t[1]*f]}function P(t){return(t=o.invert((t[0]-n)/f,(r-t[1])/f))&&[t[0]*_,t[1]*_]}function M(t,i){return[(t=e(t,i))[0]*f+n,r-t[1]*f]}function I(){o=Y(i=Z(y,v,m),e);var t=e(d,g);return n=h-t[0]*f,r=p+t[1]*f,R()}function R(){return c=l=null,T}return T.stream=function(t){return c&&l===t?c:c=Nt(b(i,S(E(l=t))))},T.clipAngle=function(t){return arguments.length?(b=+t?Mt(A=t*w,6*w):(A=null,Pt),R()):A*_},T.clipExtent=function(t){return arguments.length?(E=null==t?(x=a=s=u=null,yt):pt(x=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),R()):null==x?null:[[x,a],[s,u]]},T.scale=function(t){return arguments.length?(f=+t,I()):f},T.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],I()):[h,p]},T.center=function(t){return arguments.length?(d=t[0]%360*w,g=t[1]%360*w,I()):[d*_,g*_]},T.rotate=function(t){return arguments.length?(y=t[0]%360*w,v=t[1]%360*w,m=t.length>2?t[2]%360*w:0,I()):[y*_,v*_,m*_]},T.precision=function(t){return arguments.length?(S=Lt(M,O=t*t),R()):C(O)},T.fitExtent=function(t,e){return Rt(T,t,e)},T.fitSize=function(t,e){return kt(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&P,I()}}function Bt(t){return function(e,n){var r=S(e),i=S(n),o=t(r*i);return[o*i*M(e),o*M(n)]}}function zt(t){return function(e,n){var r=C(e*e+n*n),i=t(r),o=M(i),a=S(i);return[O(e*o,r*a),k(r&&n*o/r)]}}var Ut=Bt((function(t){return C(2/(1+t))}));Ut.invert=zt((function(t){return 2*k(t/2)}));var Gt=Bt((function(t){return(t=R(t))&&t/M(t)}));Gt.invert=zt((function(t){return t}));function Vt(t,e){return[t,P(I((m+e)/2))]}Vt.invert=function(t,e){return[t,2*E(T(e))-m]};function qt(t){var e,n,r,i=Dt(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=v*a(),s=i(function(t){function e(e){return(e=t(e[0]*w,e[1]*w))[0]*=_,e[1]*=_,e}return t=Z(t[0]*w,t[1]*w,t.length>2?t[2]*w:0),e.invert=function(e){return(e=t.invert(e[0]*w,e[1]*w))[0]*=_,e[1]*=_,e},e}(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Vt?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function Ht(t,e){return[t,e]}Ht.invert=Ht;function Wt(t,e){var n=S(e),r=S(t)*n;return[n*M(t)/r,M(e)/r]}Wt.invert=zt(E);function Xt(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Xt.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(x(n)>y&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function Yt(t,e){return[S(e)*M(t),M(e)]}Yt.invert=zt(k);function Qt(t,e){var n=S(e),r=1+S(t)*n;return[n*M(t)/r,M(e)/r]}Qt.invert=zt((function(t){return 2*E(t)}));function Zt(t,e){return[P(I((m+e)/2)),-t]}Zt.invert=function(t,e){return[-e,2*E(T(t))-m]};function Kt(t,e,n,r){var u,l=t.properties||{},f="Feature"===t.type?t.geometry:t;if("GeometryCollection"===f.type){var h=[];return Object(a.c)(t,(function(t){var i=Kt(t,e,n,r);i&&h.push(i)})),Object(s.e)(h)}var p=Object(i.a)(t),d=p[1]>50&&p[3]>50;u=d?{type:f.type,coordinates:$t(f.coordinates,ee(f))}:function(t,e){return c(t,"mercator",e)}(f);var g,y=(new o.GeoJSONReader).read(u),v=Object(s.m)(Object(s.h)(e,n),"meters"),m=o.BufferOp.bufferOp(y,v);if(!Jt((m=(new o.GeoJSONWriter).write(m)).coordinates))return(g=d?{type:m.type,coordinates:te(m.coordinates,ee(f))}:function(t,e){return c(t,"wgs84",e)}(m)).geometry?g:Object(s.d)(g,l)}function Jt(t){return Array.isArray(t[0])?Jt(t[0]):isNaN(t[0])}function $t(t,e){return"object"!==typeof t[0]?e(t):t.map((function(t){return $t(t,e)}))}function te(t,e){return"object"!==typeof t[0]?e.invert(t):t.map((function(t){return te(t,e)}))}function ee(t){var e=Object(r.a)(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return function(){var t=qt(Zt),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}().center(e).rotate(n).scale(s.c)}e.default=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!==typeof n)throw new Error("options must be an object");if("number"!==typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return Object(a.c)(t,(function(t){var n=Kt(t,e,r,i);n&&o.push(n)})),Object(s.e)(o);case"FeatureCollection":return Object(a.b)(t,(function(t){var n=Kt(t,e,r,i);n&&Object(a.b)(n,(function(t){t&&o.push(t)}))})),Object(s.e)(o)}return Kt(t,e,r,i)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(153),l=n(49),f=n(94);function h(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var g=function(t){Object(a.a)(n,t);var e=d(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(t){Object(o.a)(Object(u.a)(n.prototype),"setState",this).call(this,t),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(t){var e=t.info,n=e.object;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?Object.assign(e,{object:n.__source.object,index:n.__source.index}):e}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(t,e){var n=this.props._subLayerProps;return e&&e.length||n&&n[t]}},{key:"getSubLayerClass",value:function(t,e){var n=this.props._subLayerProps;return n&&n[t]&&n[t].type||e}},{key:"getSubLayerRow",value:function(t,e,n){return t.__source={parent:this,object:e,index:n},t}},{key:"getSubLayerAccessor",value:function(t){if("function"===typeof t){var e={data:this.props.data,target:[]};return function(n,r){return n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}}return t}},{key:"getSubLayerProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,n=e.opacity,r=e.pickable,i=e.visible,o=e.parameters,a=e.getPolygonOffset,s=e.highlightedObjectIndex,u=e.autoHighlight,c=e.highlightColor,l=e.coordinateSystem,f=e.coordinateOrigin,p=e.wrapLongitude,d=e.positionFormat,g=e.modelMatrix,y=e.extensions,v=e._subLayerProps,m={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:u,highlightColor:c,coordinateSystem:l,coordinateOrigin:f,wrapLongitude:p,positionFormat:d,modelMatrix:g,extensions:y},A=v&&v[t.id],b=A&&A.updateTriggers,_=t.id||"sublayer";if(A){var w=this.constructor._propTypes;for(var x in A){var E=w[x];E&&"accessor"===E.type&&(A[x]=this.getSubLayerAccessor(A[x]))}}Object.assign(m,t,A,{id:"".concat(this.props.id,"-").concat(_),updateTriggers:Object.assign({all:this.props.updateTriggers.all},t.updateTriggers,b)});var O,S=h(y);try{for(S.s();!(O=S.n()).done;){var T=O.value,P=T.getSubLayerProps.call(this,T);P&&Object.assign(m,P,{updateTriggers:Object.assign(m.updateTriggers,P.updateTriggers)})}}catch(M){S.e(M)}finally{S.f()}return m}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var t=this.internalState.subLayers,e=!t||this.needsUpdate();e&&(t=this.renderLayers(),t=Object(f.b)(t,Boolean),this.internalState.subLayers=t),Object(l.a)("compositeLayer.renderLayers",this,e,t);var n,r=h(t);try{for(r.s();!(n=r.n()).done;){n.value.parent=this}}catch(i){r.e(i)}finally{r.f()}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Object(o.a)(Object(u.a)(n.prototype),"isLoaded",this)&&this.getSubLayers().every((function(t){return t.isLoaded}))}}]),n}(c.a);g.layerName="CompositeLayer"},function(t,e,n){"use strict";n.r(e);var r=n(245),i=n(246),o=n(247),a=n(116),s=n(103),u=n(46),c=n(39),l=n(19);e.default=function(t,e,n){if(n=n||{},!Object(l.g)(n))throw new Error("options is invalid");var f=n.pivot,h=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e||(f||(f=Object(r.a)(t)),!1!==h&&void 0!==h||(t=Object(s.a)(t)),Object(u.a)(t,(function(t){var n=Object(i.a)(f,t)+e,r=Object(o.a)(f,t),s=Object(c.b)(Object(a.a)(f,r,n));t[0]=s[0],t[1]=s[1]}))),t}},function(t,e,n){"use strict";var r=n(393),i=n(650),o=n(36),a=n(26),s=n(49);var u={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){var e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},c="8.4.0-alpha.4",l=o.global.deck&&o.global.deck.VERSION;if(l&&l!==c)throw new Error("deck.gl - multiple versions detected: ".concat(l," vs ").concat(c));l||(o.global.deck=Object.assign(o.global.deck||{},{VERSION:c,version:c,log:a.a,_registerLoggers:s.b}),Object(r.b)([u,[i.a,{imagebitmap:{premultiplyAlpha:"none"}}]]));e.a=o.global.deck},function(t,e,n){"use strict";function r(t){throw new Error('"'+t+'" is read-only')}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(155);function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(r.a)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,i=n(0),o=n(101),a=n(167),s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};e.b=(r={},Object(i.a)(r,s.WEBGL2,[!1,!0]),Object(i.a)(r,s.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(i.a)(r,s.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(i.a)(r,s.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(i.a)(r,s.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(i.a)(r,s.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(i.a)(r,s.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(i.a)(r,s.FLOAT_BLEND,["EXT_float_blend"]),Object(i.a)(r,s.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(i.a)(r,s.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(i.a)(r,s.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(i.a)(r,s.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(i.a)(r,s.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(i.a)(r,s.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(i.a)(r,s.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(i.a)(r,s.COLOR_ATTACHMENT_RGBA32F,[function(t){var e=new a.a(t,{format:6408,type:5126,dataFormat:6408}),n=new o.a(t,{id:"test-framebuffer",check:!1,attachments:Object(i.a)({},36064,e)}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),Object(i.a)(r,s.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(i.a)(r,s.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(i.a)(r,s.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(i.a)(r,s.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(i.a)(r,s.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(i.a)(r,s.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),r)},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ArrowStyles",{enumerable:!0,get:function(){return r.ArrowStyles}}),Object.defineProperty(e,"DEFAULT_ARROWS",{enumerable:!0,get:function(){return r.DEFAULT_ARROWS}}),Object.defineProperty(e,"MAX_ARROWS",{enumerable:!0,get:function(){return r.MAX_ARROWS}}),Object.defineProperty(e,"SELECTION_TYPE",{enumerable:!0,get:function(){return i.SELECTION_TYPE}}),Object.defineProperty(e,"Feature",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"LayerMouseEvent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"NebulaLayer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"JunctionsLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"TextsLayer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"SegmentsLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"NebulaCore",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"toDeckColor",{enumerable:!0,get:function(){return h.toDeckColor}}),Object.defineProperty(e,"EditableGeoJsonLayer",{enumerable:!0,get:function(){return p.EditableGeoJsonLayer}}),Object.defineProperty(e,"SelectionLayer",{enumerable:!0,get:function(){return p.SelectionLayer}}),Object.defineProperty(e,"ElevatedEditHandleLayer",{enumerable:!0,get:function(){return p.ElevatedEditHandleLayer}}),Object.defineProperty(e,"PathOutlineLayer",{enumerable:!0,get:function(){return p.PathOutlineLayer}}),Object.defineProperty(e,"PathMarkerLayer",{enumerable:!0,get:function(){return p.PathMarkerLayer}}),Object.defineProperty(e,"GeoJsonEditMode",{enumerable:!0,get:function(){return d.GeoJsonEditMode}}),Object.defineProperty(e,"ModifyMode",{enumerable:!0,get:function(){return d.ModifyMode}}),Object.defineProperty(e,"TranslateMode",{enumerable:!0,get:function(){return d.TranslateMode}}),Object.defineProperty(e,"ScaleMode",{enumerable:!0,get:function(){return d.ScaleMode}}),Object.defineProperty(e,"RotateMode",{enumerable:!0,get:function(){return d.RotateMode}}),Object.defineProperty(e,"DuplicateMode",{enumerable:!0,get:function(){return d.DuplicateMode}}),Object.defineProperty(e,"ExtendLineStringMode",{enumerable:!0,get:function(){return d.ExtendLineStringMode}}),Object.defineProperty(e,"SplitPolygonMode",{enumerable:!0,get:function(){return d.SplitPolygonMode}}),Object.defineProperty(e,"ExtrudeMode",{enumerable:!0,get:function(){return d.ExtrudeMode}}),Object.defineProperty(e,"ElevationMode",{enumerable:!0,get:function(){return d.ElevationMode}}),Object.defineProperty(e,"TransformMode",{enumerable:!0,get:function(){return d.TransformMode}}),Object.defineProperty(e,"DrawPointMode",{enumerable:!0,get:function(){return d.DrawPointMode}}),Object.defineProperty(e,"DrawLineStringMode",{enumerable:!0,get:function(){return d.DrawLineStringMode}}),Object.defineProperty(e,"DrawPolygonMode",{enumerable:!0,get:function(){return d.DrawPolygonMode}}),Object.defineProperty(e,"DrawRectangleMode",{enumerable:!0,get:function(){return d.DrawRectangleMode}}),Object.defineProperty(e,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return d.DrawCircleByDiameterMode}}),Object.defineProperty(e,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return d.DrawCircleFromCenterMode}}),Object.defineProperty(e,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return d.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(e,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return d.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(e,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return d.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(e,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return d.Draw90DegreePolygonMode}}),Object.defineProperty(e,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return d.DrawPolygonByDraggingMode}}),Object.defineProperty(e,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return d.ImmutableFeatureCollection}}),Object.defineProperty(e,"ViewMode",{enumerable:!0,get:function(){return d.ViewMode}}),Object.defineProperty(e,"MeasureDistanceMode",{enumerable:!0,get:function(){return d.MeasureDistanceMode}}),Object.defineProperty(e,"MeasureAreaMode",{enumerable:!0,get:function(){return d.MeasureAreaMode}}),Object.defineProperty(e,"MeasureAngleMode",{enumerable:!0,get:function(){return d.MeasureAngleMode}}),Object.defineProperty(e,"CompositeMode",{enumerable:!0,get:function(){return d.CompositeMode}}),Object.defineProperty(e,"SnappableMode",{enumerable:!0,get:function(){return d.SnappableMode}});var r=n(326),i=n(327),o=g(n(439)),a=g(n(330)),s=g(n(178)),u=g(n(440)),c=g(n(491)),l=g(n(492)),f=g(n(493)),h=n(212),p=n(265),d=n(207);function g(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){(function(t,n){var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",d="[object Promise]",g="[object RegExp]",y="[object Set]",v="[object String]",m="[object Symbol]",A="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[o]=E[a]=E[b]=E[s]=E[_]=E[u]=E[c]=E[l]=E[f]=E[h]=E[p]=E[g]=E[y]=E[v]=E[A]=!1;var O="object"==typeof t&&t&&t.Object===Object&&t,S="object"==typeof self&&self&&self.Object===Object&&self,T=O||S||Function("return this")(),P=e&&!e.nodeType&&e,M=P&&"object"==typeof n&&n&&!n.nodeType&&n,C=M&&M.exports===P,I=C&&O.process,R=function(){try{return I&&I.binding&&I.binding("util")}catch(t){}}(),k=R&&R.isTypedArray;function j(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function L(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function N(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var D,F,B=Array.prototype,z=Function.prototype,U=Object.prototype,G=T["__core-js_shared__"],V=z.toString,q=U.hasOwnProperty,H=function(){var t=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),W=U.toString,X=RegExp("^"+V.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=C?T.Buffer:void 0,Q=T.Symbol,Z=T.Uint8Array,K=U.propertyIsEnumerable,J=B.splice,$=Q?Q.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=Y?Y.isBuffer:void 0,nt=(D=Object.keys,F=Object,function(t){return D(F(t))}),rt=It(T,"DataView"),it=It(T,"Map"),ot=It(T,"Promise"),at=It(T,"Set"),st=It(T,"WeakMap"),ut=It(Object,"create"),ct=Lt(rt),lt=Lt(it),ft=Lt(ot),ht=Lt(at),pt=Lt(st),dt=Q?Q.prototype:void 0,gt=dt?dt.valueOf:void 0;function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new mt;++e<n;)this.add(t[e])}function bt(t){var e=this.__data__=new vt(t);this.size=e.size}function _t(t,e){var n=Ft(t),r=!n&&Dt(t),i=!n&&!r&&Bt(t),o=!n&&!r&&!i&&qt(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!q.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jt(c,u))||s.push(c);return s}function wt(t,e){for(var n=t.length;n--;)if(Nt(t[n][0],e))return n;return-1}function xt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":$&&$ in Object(t)?function(t){var e=q.call(t,$),n=t[$];try{t[$]=void 0;var r=!0}catch(o){}var i=W.call(t);r&&(e?t[$]=n:delete t[$]);return i}(t):function(t){return W.call(t)}(t)}function Et(t){return Vt(t)&&xt(t)==o}function Ot(t,e,n,r,i){return t===e||(null==t||null==e||!Vt(t)&&!Vt(e)?t!==t&&e!==e:function(t,e,n,r,i,l){var d=Ft(t),A=Ft(e),w=d?a:kt(t),x=A?a:kt(e),E=(w=w==o?p:w)==p,O=(x=x==o?p:x)==p,S=w==x;if(S&&Bt(t)){if(!Bt(e))return!1;d=!0,E=!1}if(S&&!E)return l||(l=new bt),d||qt(t)?Pt(t,e,n,r,i,l):function(t,e,n,r,i,o,a){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!o(new Z(t),new Z(e)));case s:case u:case h:return Nt(+t,+e);case c:return t.name==e.name&&t.message==e.message;case g:case v:return t==e+"";case f:var l=L;case y:var p=1&r;if(l||(l=N),t.size!=e.size&&!p)return!1;var d=a.get(t);if(d)return d==e;r|=2,a.set(t,e);var A=Pt(l(t),l(e),r,i,o,a);return a.delete(t),A;case m:if(gt)return gt.call(t)==gt.call(e)}return!1}(t,e,w,n,r,i,l);if(!(1&n)){var T=E&&q.call(t,"__wrapped__"),P=O&&q.call(e,"__wrapped__");if(T||P){var M=T?t.value():t,C=P?e.value():e;return l||(l=new bt),i(M,C,n,r,l)}}if(!S)return!1;return l||(l=new bt),function(t,e,n,r,i,o){var a=1&n,s=Mt(t),u=s.length,c=Mt(e).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in e:q.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);var d=a;for(;++l<u;){var g=t[f=s[l]],y=e[f];if(r)var v=a?r(y,g,f,e,t,o):r(g,y,f,t,e,o);if(!(void 0===v?g===y||i(g,y,n,r,o):v)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var m=t.constructor,A=e.constructor;m==A||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof A&&A instanceof A||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,l)}(t,e,n,r,Ot,i))}function St(t){return!(!Gt(t)||function(t){return!!H&&H in t}(t))&&(zt(t)?X:w).test(Lt(t))}function Tt(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||U;return t===n}(t))return nt(t);var e=[];for(var n in Object(t))q.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pt(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,h=2&n?new At:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var p=t[l],d=e[l];if(r)var g=a?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!j(e,(function(t,e){if(a=e,!h.has(a)&&(p===t||i(p,t,n,r,o)))return h.push(e);var a}))){f=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Mt(t){return function(t,e,n){var r=e(t);return Ft(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Ht,Rt)}function Ct(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function It(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return St(n)?n:void 0}yt.prototype.clear=function(){this.__data__=ut?ut(null):{},this.size=0},yt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yt.prototype.get=function(t){var e=this.__data__;if(ut){var n=e[t];return n===r?void 0:n}return q.call(e,t)?e[t]:void 0},yt.prototype.has=function(t){var e=this.__data__;return ut?void 0!==e[t]:q.call(e,t)},yt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ut&&void 0===e?r:e,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(t){var e=this.__data__,n=wt(e,t);return!(n<0)&&(n==e.length-1?e.pop():J.call(e,n,1),--this.size,!0)},vt.prototype.get=function(t){var e=this.__data__,n=wt(e,t);return n<0?void 0:e[n][1]},vt.prototype.has=function(t){return wt(this.__data__,t)>-1},vt.prototype.set=function(t,e){var n=this.__data__,r=wt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},mt.prototype.clear=function(){this.size=0,this.__data__={hash:new yt,map:new(it||vt),string:new yt}},mt.prototype.delete=function(t){var e=Ct(this,t).delete(t);return this.size-=e?1:0,e},mt.prototype.get=function(t){return Ct(this,t).get(t)},mt.prototype.has=function(t){return Ct(this,t).has(t)},mt.prototype.set=function(t,e){var n=Ct(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},At.prototype.add=At.prototype.push=function(t){return this.__data__.set(t,r),this},At.prototype.has=function(t){return this.__data__.has(t)},bt.prototype.clear=function(){this.__data__=new vt,this.size=0},bt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},bt.prototype.get=function(t){return this.__data__.get(t)},bt.prototype.has=function(t){return this.__data__.has(t)},bt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vt){var r=n.__data__;if(!it||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mt(r)}return n.set(t,e),this.size=n.size,this};var Rt=tt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(tt(t),(function(e){return K.call(t,e)})))}:function(){return[]},kt=xt;function jt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||x.test(t))&&t>-1&&t%1==0&&t<e}function Lt(t){if(null!=t){try{return V.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Nt(t,e){return t===e||t!==t&&e!==e}(rt&&kt(new rt(new ArrayBuffer(1)))!=_||it&&kt(new it)!=f||ot&&kt(ot.resolve())!=d||at&&kt(new at)!=y||st&&kt(new st)!=A)&&(kt=function(t){var e=xt(t),n=e==p?t.constructor:void 0,r=n?Lt(n):"";if(r)switch(r){case ct:return _;case lt:return f;case ft:return d;case ht:return y;case pt:return A}return e});var Dt=Et(function(){return arguments}())?Et:function(t){return Vt(t)&&q.call(t,"callee")&&!K.call(t,"callee")},Ft=Array.isArray;var Bt=et||function(){return!1};function zt(t){if(!Gt(t))return!1;var e=xt(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Gt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Vt(t){return null!=t&&"object"==typeof t}var qt=k?function(t){return function(e){return t(e)}}(k):function(t){return Vt(t)&&Ut(t.length)&&!!E[xt(t)]};function Ht(t){return null!=(e=t)&&Ut(e.length)&&!zt(e)?_t(t):Tt(t);var e}n.exports=function(t,e){return Ot(t,e)}}).call(this,n(62),n(175)(t))},function(t,e,n){t.exports=n(317)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));var r=n(1),i=n(2),o=n(254),a=n(22),s={number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate:function(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function u(t){var e=c(t);return"object"===e?t?"type"in t?Object.assign({},t,s[t.type]):"value"in t?(e=c(t.value),Object.assign({type:e},t,s[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},s[e])}function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":Object(a.a)(t)}var l=function(){function t(e){var n=e.name,i=e.vs,a=e.fs,s=e.dependencies,c=void 0===s?[]:s,l=e.uniforms,f=e.getUniforms,h=e.deprecations,p=void 0===h?[]:h,d=e.defines,g=void 0===d?{}:d,y=e.inject,v=void 0===y?{}:y,m=e.vertexShader,A=e.fragmentShader;Object(r.a)(this,t),Object(o.a)("string"===typeof n),this.name=n,this.vs=i||m,this.fs=a||A,this.getModuleUniforms=f,this.dependencies=c,this.deprecations=this._parseDeprecationDefinitions(p),this.defines=g,this.injections=function(t){var e={vs:{},fs:{}};for(var n in t){var r=t[n];"string"===typeof r&&(r={injection:r}),e[n.slice(0,2)][n]=r}return e}(v),l&&(this.uniforms=function(t){var e={};for(var n in t){var r=u(t[n]);e[n]=r}return e}(l))}return Object(i.a)(t,[{key:"getModuleSource",value:function(t){var e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Object(o.a)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach((function(n){n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(t){return t.forEach((function(t){switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}})),t}},{key:"_defaultGetUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(var r in n){var i=n[r];r in t&&!i.private?(i.validate&&Object(o.a)(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}]),t}();function f(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){var e=new l(t);t.getUniforms=e.getUniforms.bind(e)}return t}},function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return g}));var r=n(53),i=n(101),o=n(79),a=n(10),s=n(97),u=n(121),c=n(31);function l(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(c.a)(!1),0}}var f=n(390);function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceX,r=void 0===n?0:n,i=e.sourceY,o=void 0===i?0:i,a=e.sourceFormat,s=void 0===a?6408:a,l=e.sourceAttachment,f=void 0===l?36064:l,h=e.target,p=void 0===h?null:h,d=e.sourceWidth,g=e.sourceHeight,m=e.sourceType,A=y(t),b=A.framebuffer,_=A.deleteFramebuffer;Object(c.a)(b);var w=b.gl,x=b.handle,E=b.attachments;d=d||b.width,g=g||b.height,36064===f&&null===x&&(f=1028),Object(c.a)(E[f]),p=v(p,m=m||E[f].type,s,d,g),m=m||Object(u.b)(p);var O=w.bindFramebuffer(36160,x);return w.readPixels(r,o,d,g,s,m,p),w.bindFramebuffer(36160,O||null),_&&b.delete(),p}function p(t,e){var n=e.sourceX,i=void 0===n?0:n,o=e.sourceY,u=void 0===o?0:o,f=e.sourceFormat,h=void 0===f?6408:f,p=e.target,d=void 0===p?null:p,g=e.targetByteOffset,v=void 0===g?0:g,m=e.sourceWidth,A=e.sourceHeight,b=e.sourceType,_=y(t),w=_.framebuffer,x=_.deleteFramebuffer;Object(c.a)(w);var E=w.gl;if(m=m||w.width,A=A||w.height,Object(s.a)(E),b=b||(d?d.type:5121),!d){var O=l(h),S=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(c.a)(!1),0}}(b),T=v+m*A*O*S;d=new r.a(E,{byteLength:T,accessor:{type:b,size:O}})}return d.bind({target:35051}),Object(a.l)(E,{framebuffer:w},(function(){E.readPixels(i,u,m,A,h,b,v)})),d.unbind({target:35051}),x&&w.delete(),d}function d(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceAttachment,r=void 0===n?36064:n,i=e.targetMaxHeight,o=void 0===i?Number.MAX_SAFE_INTEGER:i,a=h(t,{sourceAttachment:r}),s=t.width,c=t.height;c>o;){var l=Object(u.d)({data:a,width:s,height:c});a=l.data,s=l.width,c=l.height}Object(u.a)({data:a,width:s,height:c});var f=document.createElement("canvas");f.width=s,f.height=c;var p=f.getContext("2d"),d=p.createImageData(s,c);return d.data.set(a),p.putImageData(d,0,0),f.toDataURL()}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sourceX,i=void 0===r?0:r,a=n.sourceY,s=void 0===a?0:a,u=n.targetX,l=n.targetY,f=n.targetZ,h=n.targetMipmaplevel,p=void 0===h?0:h,d=n.targetInternalFormat,g=void 0===d?6408:d,v=n.width,m=n.height,A=y(t),b=A.framebuffer,_=A.deleteFramebuffer;Object(c.a)(b);var w=b.gl,x=b.handle,E="undefined"!==typeof u||"undefined"!==typeof l||"undefined"!==typeof f;u=u||0,l=l||0,f=f||0;var O=w.bindFramebuffer(36160,x);Object(c.a)(e);var S=null;if(e instanceof o.a&&(S=e,v=Number.isFinite(v)?v:S.width,m=Number.isFinite(m)?m:S.height,S.bind(0),e=S.target),E)switch(e){case 3553:case 34067:w.copyTexSubImage2D(e,p,u,l,i,s,v,m);break;case 35866:case 32879:w.copyTexSubImage3D(e,p,u,l,f,i,s,v,m)}else w.copyTexImage2D(e,p,g,i,s,v,m,0);return S&&S.unbind(),w.bindFramebuffer(36160,O||null),_&&b.delete(),S}function y(t){return t instanceof i.a?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Object(f.b)(t),deleteFramebuffer:!0}}function v(t,e,n,r,i){return t||(e=e||5121,new(Object(u.c)(e,{clamped:!1}))(r*i*l(n)))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(10);function i(t,e,n){var i=n.removedProps,o=void 0===i?{}:i,a=n.deprecatedProps,s=void 0===a?{}:a,u=n.replacedProps,c=void 0===u?{}:u;for(var l in o)if(l in e){var f=o[l]?"".concat(t,".").concat(o[l]):"N/A";r.h.removed("".concat(t,".").concat(l),f)()}for(var h in s)if(h in e){var p=s[h];r.h.deprecated("".concat(t,".").concat(h),"".concat(t,".").concat(p))()}var d=null;for(var g in c)if(g in e){var y=c[g];r.h.deprecated("".concat(t,".").concat(g),"".concat(t,".").concat(y))(),(d=d||Object.assign({},e))[y]=e[g],delete d[g]}return d||e}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(1),i=n(2),o=n(73),a=n(95),s=n(35),u=n(53);function c(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.attributes,i=void 0===n?{}:n;this.typedArrayManager=a.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=i,this.opts=e,this.updateGeometry(e),Object.seal(this)}return Object(i.a)(t,[{key:"updateGeometry",value:function(t){Object.assign(this.opts,t);var e=this.opts,n=e.data,r=e.buffers,i=void 0===r?{}:r,o=e.getGeometry,a=e.geometryBuffer,u=e.positionFormat,l=e.dataChanged,f=e.normalize,h=void 0===f||f;if(this.data=n,this.getGeometry=o,this.positionSize=a&&a.size||("XY"===u?2:3),this.buffers=i,this.normalize=h,a&&(Object(s.a)(n.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(a),h||(i.positions=a)),this.geometryBuffer=i.positions,Array.isArray(l)){var p,d=c(l);try{for(d.s();!(p=d.n()).done;){var g=p.value;this._rebuildGeometry(g)}}catch(y){d.e(y)}finally{d.f()}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(t){var e=t.startRow,n=t.endRow;this._rebuildGeometry({startRow:e,endRow:n})}},{key:"normalizeGeometry",value:function(t){return t}},{key:"updateGeometryAttributes",value:function(t,e,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(t){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(t){var e=t.value||t;return Object(s.a)(ArrayBuffer.isView(e),"cannot read geometries"),Object(o.b)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(t,e){var n=this.attributes,r=this.buffers,i=this._attributeDefs,o=this.typedArrayManager;for(var a in i)if(a in r)o.release(n[a]),n[a]=null;else{var s=i[a];s.copy=e,n[a]=o.allocate(n[a],t,s)}}},{key:"_forEachGeometry",value:function(t,e,n){var r,i=this.data,a=this.getGeometry,s=Object(o.a)(i,e,n),u=s.iterable,l=s.objectInfo,f=c(u);try{for(f.s();!(r=f.n()).done;){var h=r.value;l.index++,t(a(h,l),l.index)}}catch(p){f.e(p)}finally{f.f()}}},{key:"_rebuildGeometry",value:function(t){var e=this;if(this.data&&this.getGeometry){var n=this.indexStarts,r=this.vertexStarts,i=this.instanceCount,o=this.data,a=this.geometryBuffer,s=t||{},c=s.startRow,l=void 0===c?0:c,f=s.endRow,h=void 0===f?1/0:f,p={};if(t||(n=[0],r=[0]),this.normalize||!a)this._forEachGeometry((function(t,n){t=e.normalizeGeometry(t),p[n]=t,r[n+1]=r[n]+e.getGeometrySize(t)}),l,h),i=r[r.length-1];else if(a.buffer instanceof u.a){var d=a.stride||4*this.positionSize;r=o.startIndices,i=r[o.length]||a.buffer.byteLength/d}else{var g=a.value||a,y=a.stride/g.BYTES_PER_ELEMENT||this.positionSize;r=o.startIndices,i=r[o.length]||g.length/y}this._allocate(i,Boolean(t)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;var v={};this._forEachGeometry((function(t,o){t=p[o]||t,v.vertexStart=r[o],v.indexStart=n[o];var a=o<r.length-1?r[o+1]:i;v.geometrySize=a-r[o],v.geometryIndex=o,e.updateGeometryAttributes(t,v)}),l,h),this.vertexCount=n[n.length-1]}}}]),t}()},function(t,e,n){"use strict";(function(t){var e=n(389),r=n(25),i=n(173);function o(t,e){var n=e.extension,o=e.target,a=e.target2,s=i.b[n];Object(r.a)(s);for(var u=s.meta,c=(void 0===u?{}:u).suffix,l=void 0===c?"":c,f=t.getExtension(n),h=function(){var e=d[p],n="".concat(e).concat(l),r=null;"meta"===e||"function"===typeof t[e]||(f&&"function"===typeof f[n]?r=function(){return f[n].apply(f,arguments)}:"function"===typeof s[e]&&(r=s[e].bind(o))),r&&(o[e]=r,a[e]=r)},p=0,d=Object.keys(s);p<d.length;p++)h()}("undefined"!==typeof t?t:window).polyfillContext=function(t){return t.luma=t.luma||{},t.luma.polyfilled||(Object(e.a)(t),function(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.luma[s]=t.getExtension(s)}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(t),function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,s=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;"overrides"!==u&&o(t,{extension:u,target:t.luma,target2:t})}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}(t,i.b),function(t,e){var n=e.target,r=e.target2;Object.keys(i.a).forEach((function(e){if("function"===typeof i.a[e]){var o=t[e]?t[e].bind(t):function(){},a=i.a[e].bind(null,t,o);n[e]=a,r[e]=a}}))}(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0),t}}).call(this,n(62))},function(t,e,n){"use strict";(function(t,r){var i=n(176);Object.defineProperty(e,"__esModule",{value:!0}),e.console=e.process=e.document=e.global=e.window=e.self=void 0;var o=i(n(205)),a={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof t&&t,document:"undefined"!==typeof document&&document,process:"object"===("undefined"===typeof r?"undefined":(0,o.default)(r))&&r},s=a.self||a.window||a.global;e.self=s;var u=a.window||a.self||a.global;e.window=u;var c=a.global||a.self||a.window;e.global=c;var l=a.document||{};e.document=l;var f=a.process||{};e.process=f;var h=console;e.console=h}).call(this,n(62),n(78))},function(t,e,n){"use strict";(function(t){var r=n(176);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a,e.isBrowserMainThread=function(){return a()&&"undefined"!==typeof document};var i=r(n(205)),o=r(n(262));function a(){return!("object"===("undefined"===typeof t?"undefined":(0,i.default)(t))&&"[object process]"===String(t)&&!t.browser)||(0,o.default)()}}).call(this,n(78))},function(t,e,n){"use strict";var r=n(139);e.a={name:"project32",dependencies:[r.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},function(t,e,n){"use strict";var r=n(630);e.a=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},r.a)},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(I){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={};function y(){}function v(){}function m(){}var A={};A[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(M([])));_&&_!==n&&r.call(_,o)&&(A=_);var w=m.prototype=y.prototype=Object.create(A);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:e,done:!0}}return v.prototype=w.constructor=m,m.constructor=v,v.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),u(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(69),i="2.3.7";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;Object(r.a)(t,"no loader provided");var n=t.version;e&&n&&(e=a(e),n=a(n))}function a(t){var e=t.split(".").map(Number);return{major:e[0],minor:e[1]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),i=n.n(r),o=n(11),a=n(1),s=n(2),u=n(222),c=function(){function t(e){var n=e.maxConcurrency,r=void 0===n?5:n,i=e.onMessage,o=void 0===i?null:i,s=e.onDebug,u=void 0===s?function(){}:s,c=e.reuseWorkers,l=void 0===c||c;Object(a.a)(this,t),this.maxConcurrency=r,this.onMessage=o,this.onDebug=u,this.workerPools=new Map,this.reuseWorkers=l}return Object(s.a)(t,null,[{key:"isSupported",value:function(){return"undefined"!==typeof Worker}}]),Object(s.a)(t,[{key:"setProps",value:function(t){"maxConcurrency"in t&&(this.maxConcurrency=t.maxConcurrency),"onDebug"in t&&(this.onDebug=t.onDebug),"reuseWorkers"in t&&(this.reuseWorkers=t.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach((function(t){return t.destroy()}))}},{key:"process",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n,r){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this._getWorkerPool(e,n),t.abrupt("return",o.process(r));case 2:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_getWorkerPool",value:function(t,e){var n=this.workerPools.get(e);return n||(n=new u.a({source:t,name:e,onMessage:l.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(e,n)),n}}]),t}();function l(t,e){var n=e.worker,r=e.data,i=e.resolve,o=e.reject;if(t)t({worker:n,data:r,resolve:i,reject:o});else switch(r.type){case"done":i(r.result);break;case"error":o(r.message)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(161),c=n(20),l=n(23),f=n(43),h=n(80);function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var d=function(t){Object(o.a)(n,t);var e=p(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,n),t=e.call(this,2),Object(c.m)(i)&&1===arguments.length?t.copy(i):(c.f.debug&&(Object(l.a)(i),Object(l.a)(o)),t[0]=i,t[1]=o),t}return Object(i.a)(n,[{key:"set",value:function(t,e){return this[0]=t,this[1]=e,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this.check()}},{key:"fromObject",value:function(t){return c.f.debug&&(Object(l.a)(t.x),Object(l.a)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return f.j(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(h.a)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return f.i(this,this,t),this.check()}},{key:"transformByMatrix2x3",value:function(t){return f.h(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return f.g(this,this,t),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),n}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(161),c=n(20),l=n(23),f=n(29),h=n(80);function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var d={},g=function(t){Object(o.a)(n,t);var e=p(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(r.a)(this,n),t=e.call(this,-0,-0,-0,-0),Object(c.m)(i)&&1===arguments.length?t.copy(i):(c.f.debug&&(Object(l.a)(i),Object(l.a)(o),Object(l.a)(a),Object(l.a)(s)),t[0]=i,t[1]=o,t[2]=a,t[3]=s),t}return Object(i.a)(n,null,[{key:"ZERO",get:function(){return d.ZERO=d.ZERO||Object.freeze(new n(0,0,0,0))}}]),Object(i.a)(n,[{key:"set",value:function(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"fromObject",value:function(t){return c.f.debug&&(Object(l.a)(t.x),Object(l.a)(t.y),Object(l.a)(t.z),Object(l.a)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}},{key:"transform",value:function(t){return f.q(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return Object(h.e)(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Object(h.d)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return f.r(this,this,t),this.check()}},{key:"applyMatrix4",value:function(t){return t.transform(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(l.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=Object(l.a)(t)}}]),n}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(242),c=n(23),l=n(80),f=n(81),h=n(43),p=n(29);function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var g=Object.freeze([1,0,0,0,1,0,0,0,1]),y=Object.freeze([0,0,0,0,0,0,0,0,0]),v=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),m={},A=function(t){Object(o.a)(n,t);var e=d(n);function n(t){var i;return Object(r.a)(this,n),i=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?i.copy(t):i.identity(),i}return Object(i.a)(n,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return v}}],[{key:"IDENTITY",get:function(){return m.IDENTITY=m.IDENTITY||Object.freeze(new n(g)),m.IDENTITY}},{key:"ZERO",get:function(){return m.ZERO=m.ZERO||Object.freeze(new n(y)),m.ZERO}}]),Object(i.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,n,r,i,o,a,s,u){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this.check()}},{key:"setRowMajor",value:function(t,e,n,r,i,o,a,s,u){return this[0]=t,this[1]=r,this[2]=a,this[3]=e,this[4]=i,this[5]=s,this[6]=n,this[7]=o,this[8]=u,this.check()}},{key:"determinant",value:function(){return f.b(this)}},{key:"identity",value:function(){return this.copy(g)}},{key:"fromQuaternion",value:function(t){return f.c(this,t),this.check()}},{key:"transpose",value:function(){return f.i(this,this),this.check()}},{key:"invert",value:function(){return f.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return f.e(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return f.e(this,this,t),this.check()}},{key:"rotate",value:function(t){return f.f(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?f.g(this,this,t):f.g(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return f.h(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=h.i(e||[-0,-0],t,this);break;case 3:e=p.p(e||[-0,-0,-0],t,this);break;case 4:e=Object(l.e)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}}]),n}(u.a)},function(t,e,n){"use strict";e.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(12),i=n(1),o=n(2),a=n(20),s=n(135),u=n(29),c=1e-6,l=6371e3,f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.phi,r=void 0===n?0:n,o=e.theta,a=void 0===o?0:o,s=e.radius,u=void 0===s?1:s,c=e.bearing,f=void 0===c?void 0:c,h=e.pitch,p=void 0===h?void 0:h,d=e.altitude,g=void 0===d?void 0:d,y=e.radiusScale,v=void 0===y?l:y;Object(i.a)(this,t),this.phi=r,this.theta=a,this.radius=u||g||1,this.radiusScale=v||1,void 0!==f&&(this.bearing=f),void 0!==p&&(this.pitch=p),this.check()}return Object(o.a)(t,[{key:"toString",value:function(){return this.formatString(a.f)}},{key:"formatString",value:function(t){var e=t.printTypes,n=void 0!==e&&e,r=a.l;return"".concat(n?"Spherical":"","[rho:").concat(r(this.radius),",theta:").concat(r(this.theta),",phi:").concat(r(this.phi),"]")}},{key:"equals",value:function(t){return Object(a.j)(this.radius,t.radius)&&Object(a.j)(this.theta,t.theta)&&Object(a.j)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],o=e[2];this.radius=1+o/this.radiusScale,this.phi=Object(a.o)(i),this.theta=Object(a.o)(n)}},{key:"fromVector3",value:function(t){return this.radius=u.g(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(Object(a.d)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new s.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){return this.phi=Math.max(c,Math.min(Math.PI-c,this.phi)),this}},{key:"check",value:function(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-Object(a.i)(this.phi)},set:function(t){this.phi=Math.PI-Object(a.o)(t)}},{key:"pitch",get:function(){return Object(a.i)(this.theta)},set:function(t){this.theta=Object(a.o)(t)}},{key:"longitude",get:function(){return Object(a.i)(this.phi)}},{key:"latitude",get:function(){return Object(a.i)(this.theta)}},{key:"lng",get:function(){return Object(a.i)(this.phi)}},{key:"lat",get:function(){return Object(a.i)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(1),i=n(2),o=n(162),a=n(135),s=n(163),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=void 0===n?0:n,o=e.y,u=void 0===o?0:o,c=e.z,l=void 0===c?0:c,f=e.roll,h=void 0===f?0:f,p=e.pitch,d=void 0===p?0:p,g=e.yaw,y=void 0===g?0:g,v=e.position,m=void 0===v?void 0:v,A=e.orientation,b=void 0===A?void 0:A;Object(r.a)(this,t),Array.isArray(m)&&3===m.length?this.position=new a.a(m):this.position=new a.a(i,u,l),Array.isArray(b)&&4===b.length?this.orientation=new s.a(b,b[3]):this.orientation=new s.a(h,d,y,s.a.RollPitchYaw)}return Object(i.a)(t,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}},{key:"exactEquals",value:function(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}},{key:"getTransformationMatrix",value:function(){var t=Math.sin(this.roll),e=Math.sin(this.pitch),n=Math.sin(this.yaw),r=Math.cos(this.roll),i=Math.cos(this.pitch),a=Math.cos(this.yaw);return(new o.a).setRowMajor(a*i,-n*r+a*e*t,n*t+a*e*r,this.x,n*i,a*r+n*e*t,-a*t+n*e*r,this.y,-e,i*t,i*r,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(t){return(new o.a).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(t){return(new o.a).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"z",get:function(){return this.position.z},set:function(t){this.position.z=t}},{key:"roll",get:function(){return this.orientation.roll},set:function(t){this.orientation.roll=t}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(t){this.orientation.pitch=t}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(t){this.orientation.yaw=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_STYLE=e.MAX_ARROWS=e.DEFAULT_ARROWS=e.ArrowStyles=void 0;var r={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3};e.ArrowStyles=r;e.DEFAULT_ARROWS=1;e.MAX_ARROWS=3;var i={arrowColor:[0,0,0,1],arrowCount:1,arrowStyle:r.NONE,fillColor:[0,0,0,1],lineColor:[0,0,0,1],lineWidthMeters:5,outlineRadiusMeters:0,opacity:1,zLevel:0};e.DEFAULT_STYLE=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SELECTION_TYPE=void 0;var r=n(63),i=n(177),o=l(n(431)),a=l(n(433)),s=l(n(295)),u=l(n(206)),c=l(n(437));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=[0,255,0,255],A=[255,255,255,90],b=[20,20],_="DeckDrawerPick",w={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};e.SELECTION_TYPE=w;var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"nebula",void 0),v(this,"usePolygon",void 0),v(this,"validPolygon",void 0),v(this,"landPoints",void 0),v(this,"mousePoints",void 0),this.nebula=e,this.usePolygon=!1,this.landPoints=[],this.mousePoints=[]}var e,n,l;return e=t,(n=[{key:"_getLayerIds",value:function(){return this.nebula.deckgl.props.layers.filter((function(t){return t&&t.props&&t.props.nebulaLayer&&t.props.nebulaLayer.enableSelection})).map((function(t){return t.id}))}},{key:"_selectFromPickingInfos",value:function(t){var e=t.map((function(t){var e=t.layer,n=t.index;return t.object.original||e.props.nebulaLayer.deckCache.originals[n]}));this.nebula.props.onSelection(e)}},{key:"_getBoundingBox",value:function(){var t=this.mousePoints,e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,p(e)),i=Math.min.apply(Math,p(n));return{x:r,y:i,width:Math.max.apply(Math,p(e))-r,height:Math.max.apply(Math,p(n))-i}}},{key:"_selectRectangleObjects",value:function(){if(2===this.landPoints.length){var t=h(this.mousePoints[0],2),e=t[0],n=t[1],r=h(this.mousePoints[1],2),i=r[0],o=r[1],a=this.nebula.deckgl.pickObjects({x:Math.min(e,i),y:Math.min(n,o),width:Math.abs(i-e),height:Math.abs(o-n),layerIds:this._getLayerIds()});this._selectFromPickingInfos(a)}}},{key:"_selectPolygonObjects",value:function(){var t=this.nebula.deckgl.pickObjects(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this._getBoundingBox(),{layerIds:[_].concat(p(this._getLayerIds()))}));this._selectFromPickingInfos(t.filter((function(t){return t.layer.id!==_})))}},{key:"_getMousePosFromEvent",value:function(t){return[t.offsetX,t.offsetY]}},{key:"handleEvent",value:function(t,e,n){"mouseup"!==t.type&&t.stopPropagation(),this.usePolygon=n===w.POLYGON;var r=!1,i=!1,o=this.usePolygon,a=this.landPoints,s=this.mousePoints;if("mousedown"===t.type){if(o&&a.length)(this.landPoints.length<3||this.validPolygon)&&(a.push(e),s.push(this._getMousePosFromEvent(t)));else{this.landPoints=[e,e];var u=this._getMousePosFromEvent(t);this.mousePoints=[u,u]}r=!0}else"mousemove"===t.type&&a.length?(a[a.length-1]=e,s[s.length-1]=this._getMousePosFromEvent(t),r=!0):"mouseup"===t.type&&(o?a.length>4&&(0,c.default)(a[0],a[a.length-1])<.01&&this.validPolygon&&(this._selectPolygonObjects(),this.reset(),r=!0,i=!0):(this._selectRectangleObjects(),this.reset(),r=!0,i=!0));return{redraw:r,deactivate:i}}},{key:"reset",value:function(){this.landPoints=[],this.mousePoints=[]}},{key:"_makeStartPointHighlight",value:function(t){var e=(0,s.default)((0,i.point)(t),.0025);return(0,a.default)((0,o.default)(e)).geometry.coordinates}},{key:"render",value:function(){var t=this,e=[],n=[];if(this.usePolygon||2!==this.landPoints.length){if(this.usePolygon&&this.landPoints.length&&(e.push({polygon:this.landPoints,lineColor:m,fillColor:A}),this.landPoints.length>=3)){var o,a=(0,i.polygon)([[].concat(p(this.landPoints),[this.landPoints[0]])]),c=(0,s.default)((0,i.point)(this.landPoints[0]),10);try{o=(0,u.default)(c,a),n.push({polygon:o.geometry.coordinates,fillColor:[0,0,0,1]}),this.validPolygon=!0}catch(E){this.validPolygon=!1}}}else{var l=h(this.mousePoints,2),f=h(l[0],2),d=f[0],g=f[1],y=h(l[1],2),v=y[0],w=y[1],x=[[d,g],[d,w],[v,w],[v,g],[d,g]].map((function(e){return t.nebula.unprojectMousePosition(e)}));e.push({polygon:x,lineColor:m,fillColor:A})}return this.landPoints.length&&e.push({polygon:this._makeStartPointHighlight(this.landPoints[0]),lineColor:[0,0,0,0],fillColor:m}),e.push({polygon:[[0,0]]}),n.push({polygon:[[0,0]]}),[new r.PolygonLayer({id:"DeckDrawerView",data:e,fp64:!1,opacity:1,pickable:!1,lineWidthMinPixels:2,lineWidthMaxPixels:2,lineDashJustified:!0,getLineDashArray:function(t){return b},getLineColor:function(t){return t.lineColor||[0,0,0,255]},getFillColor:function(t){return t.fillColor||[0,0,0,255]},getPolygon:function(t){return t.polygon}}),new r.PolygonLayer({id:_,data:n,getLineColor:function(t){return t.lineColor||[0,0,0,255]},getFillColor:function(t){return t.fillColor||[0,0,0,255]},fp64:!1,opacity:1,stroked:!1,pickable:!0,getPolygon:function(t){return t.polygon}})]}}])&&y(e.prototype,n),l&&y(e,l),t}();e.default=x},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(26),c=n(73),l=n(296),f=n(154),h=n(137),p=n(193),d=n(243);function g(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var m=[0,0,0,255],A={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(t){return t.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:m},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},b=function(t){Object(o.a)(n,t);var e=v(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&u.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=this,n=(t.oldProps,t.props,t.changeFlags),r=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon);if(r&&Array.isArray(n.dataChanged)){var i=this.state.paths.slice(),o=n.dataChanged.map((function(t){return Object(d.a)({data:i,getIndex:function(t){return t.__source.index},dataRange:t,replace:e._getPaths(t)})}));this.setState({paths:i,pathsDiff:o})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.data,i=n.getPolygon,o=n.positionFormat,a=n._normalize,s=[],u="XY"===o?2:3,l=e.startRow,f=e.endRow,h=Object(c.a)(r,l,f),d=h.iterable,y=h.objectInfo,v=g(d);try{for(v.s();!(t=v.n()).done;){var m=t.value;y.index++;var A=i(m,y);a&&(A=p.b(A,u));var b=A,_=b.holeIndices,w=A.positions||A;if(_)for(var x=0;x<=_.length;x++){var E=w.slice(_[x-1]||0,_[x]||w.length);s.push(this.getSubLayerRow({path:E},m,y.index))}else s.push(this.getSubLayerRow({path:w},m,y.index))}}catch(O){v.e(O)}finally{v.f()}return s}},{key:"renderLayers",value:function(){var t=this.props,e=t.data,n=t._dataDiff,r=t.stroked,i=t.filled,o=t.extruded,a=t.wireframe,s=t._normalize,u=t.elevationScale,c=t.transitions,l=t.positionFormat,p=this.props,d=p.lineWidthUnits,g=p.lineWidthScale,y=p.lineWidthMinPixels,v=p.lineWidthMaxPixels,A=p.lineJointRounded,b=p.lineMiterLimit,_=p.lineDashJustified,w=this.props,x=w.getFillColor,E=w.getLineColor,O=w.getLineWidth,S=w.getLineDashArray,T=w.getElevation,P=w.getPolygon,M=w.updateTriggers,C=w.material,I=this.state,R=I.paths,k=I.pathsDiff,j=this.getSubLayerClass("fill",f.a),L=this.getSubLayerClass("stroke",h.a),N=this.shouldRenderSubLayer("fill",R)&&new j({_dataDiff:n,extruded:o,elevationScale:u,filled:i,wireframe:a,_normalize:s,getElevation:T,getFillColor:x,getLineColor:o&&a?E:m,material:C,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:M.getPolygon,getElevation:M.getElevation,getFillColor:M.getFillColor,lineColors:o&&a,getLineColor:M.getLineColor}}),{data:e,positionFormat:l,getPolygon:P});return[!o&&N,!o&&r&&this.shouldRenderSubLayer("stroke",R)&&new L({_dataDiff:k&&function(){return k},widthUnits:d,widthScale:g,widthMinPixels:y,widthMaxPixels:v,rounded:A,miterLimit:b,dashJustified:_,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(O),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:M.getLineWidth,getColor:M.getLineColor,getDashArray:M.getLineDashArray}}),{data:R,positionFormat:l,getPath:function(t){return t.path}}),o&&N]}}]),n}(l.a);b.layerName="PolygonLayer",b.defaultProps=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(264);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,f,h=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,v=g?t.features.length:1,m=0;m<v;m++){u=(f=!!(l=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var A=0;A<u;A++){var b=0,_=0;if(null!==(s=f?l.geometries[A]:l)){c=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,m,b,_))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],p,m,b,_))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-h;o++){if(!1===e(c[r][o],p,m,b,_))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(_=0,o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-h;a++){if(!1===e(c[r][o][a],p,m,b,_))return!1;p++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function u(t,e){s(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:s,coordinates:t.coordinates[c]};if(!1===e(r.feature(l,i),n,c))return!1}}))}function c(t,e){u(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,f=0;return!1!==i(t,(function(i,s,h,p,d){if(void 0===u||n>c||p>l||d>f)return u=i,c=n,l=p,f=d,void(a=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function l(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,i=!1;return c(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r},e.lineEach=l,e.lineReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),r.lineString([c[s],c[s+1]],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),r.lineString([c[a][s],c[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),r.lineString([c[o][s],c[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),r.lineString([c[o][a][s],c[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),r.point(c[o],u,e);case"LineString":return s<0&&(s=c.length+s),r.point(c[s],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),r.point(c[a][s],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),r.point(c[o][s],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),r.point(c[o][a][s],u,e)}throw new Error("geojson is invalid")}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(e,n){var r=n.data,o=n.groundPoint,a=n.nebula,s=n.metadata;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"canceled",void 0),i(this,"data",void 0),i(this,"metadata",void 0),i(this,"groundPoint",void 0),i(this,"nativeEvent",void 0),i(this,"nebula",void 0),this.nativeEvent=e,this.data=r,this.groundPoint=o,this.nebula=a,this.metadata=s}var e,n,o;return e=t,(n=[{key:"stopPropagation",value:function(){this.nativeEvent.stopPropagation(),this.canceled=!0}}])&&r(e.prototype,n),o&&r(e,o),t}();e.default=o},function(t,e,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(){void 0!==o&&t.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==e&&(o=function(n){t.removeListener(e,i),r(n)},t.once("error",o)),t.once(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"===typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"===typeof u)o(u,this,e);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return f(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return f(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){!function(t){"use strict";function e(t,e){return t>e?1:t<e?-1:0}var n=function(t,n){void 0===t&&(t=e),void 0===n&&(n=!1),this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!n},r={size:{configurable:!0}};function i(t,e,n,r,o){var a=o-r;if(a>0){var s=r+Math.floor(a/2),u={key:e[s],data:n[s],parent:t};return u.left=i(u,e,n,r,s),u.right=i(u,e,n,s+1,o),u}return null}function o(t,e,n,r,i){if(!(n>=r)){for(var a=t[n+r>>1],s=n-1,u=r+1;;){do{s++}while(i(t[s],a)<0);do{u--}while(i(t[u],a)>0);if(s>=u)break;var c=t[s];t[s]=t[u],t[u]=c,c=e[s],e[s]=e[u],e[u]=c}o(t,e,n,u,i),o(t,e,u+1,r,i)}}n.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},n.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},n.prototype._splay=function(t){for(var e=this;t.parent;){var n=t.parent;n.parent?n.left===t&&n.parent.left===n?(e.rotateRight(n.parent),e.rotateRight(n)):n.right===t&&n.parent.right===n?(e.rotateLeft(n.parent),e.rotateLeft(n)):n.left===t&&n.parent.right===n?(e.rotateRight(n),e.rotateLeft(n)):(e.rotateLeft(n),e.rotateRight(n)):n.left===t?e.rotateRight(n):e.rotateLeft(n)}},n.prototype.splay=function(t){for(var e,n,r,i,o,a=this;t.parent;)(n=(e=t.parent).parent)&&n.parent?((r=n.parent).left===n?r.left=t:r.right=t,t.parent=r):(t.parent=null,a._root=t),i=t.left,o=t.right,t===e.left?(n&&(n.left===e?(e.right?(n.left=e.right,n.left.parent=n):n.left=null,e.right=n,n.parent=e):(i?(n.right=i,i.parent=n):n.right=null,t.left=n,n.parent=t)),o?(e.left=o,o.parent=e):e.left=null,t.right=e,e.parent=t):(n&&(n.right===e?(e.left?(n.right=e.left,n.right.parent=n):n.right=null,e.left=n,n.parent=e):(o?(n.left=o,o.parent=n):n.left=null,t.right=n,n.parent=t)),i?(e.right=i,i.parent=e):e.right=null,t.left=e,e.parent=t)},n.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},n.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},n.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},n.prototype.insert=function(t,e){var n=this._root,r=null,i=this._compare;if(this._noDuplicates)for(;n;){if(r=n,0===i(n.key,t))return;n=i(n.key,t)<0?n.right:n.left}else for(;n;)r=n,n=i(n.key,t)<0?n.right:n.left;return n={key:t,data:e,left:null,right:null,parent:r},r?i(r.key,n.key)<0?r.right=n:r.left=n:this._root=n,this.splay(n),this._size++,n},n.prototype.find=function(t){for(var e=this._root,n=this._compare;e;){var r=n(e.key,t);if(r<0)e=e.right;else{if(!(r>0))return e;e=e.left}}return null},n.prototype.contains=function(t){for(var e=this._root,n=this._compare;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},n.prototype.remove=function(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var n=this.minNode(e.right);n.parent!==e&&(this.replace(n,n.right),n.right=e.right,n.right.parent=n),this.replace(e,n),n.left=e.left,n.left.parent=n}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},n.prototype.removeNode=function(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},n.prototype.erase=function(t){var e=this.find(t);if(e){this.splay(e);var n=e.left,r=e.right,i=null;n&&(n.parent=null,i=this.maxNode(n),this.splay(i),this._root=i),r&&(n?i.right=r:this._root=r,r.parent=i),this._size--}},n.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},n.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e},n.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e},n.prototype.forEach=function(t){for(var e=this._root,n=[],r=!1,i=0;!r;)e?(n.push(e),e=e.left):n.length>0?(t(e=n.pop(),i++),e=e.right):r=!0;return this},n.prototype.range=function(t,e,n,r){for(var i=this,o=[],a=this._compare,s=this._root;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(a((s=o.pop()).key,e)>0)break;if(a(s.key,t)>=0&&n.call(r,s))return i;s=s.right}return this},n.prototype.keys=function(){for(var t=this._root,e=[],n=[],r=!1;!r;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.key),t=t.right):r=!0;return n},n.prototype.values=function(){for(var t=this._root,e=[],n=[],r=!1;!r;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.data),t=t.right):r=!0;return n},n.prototype.at=function(t){for(var e=this._root,n=[],r=!1,i=0;!r;)if(e)n.push(e),e=e.left;else if(n.length>0){if(e=n.pop(),i===t)return e;i++,e=e.right}else r=!0;return null},n.prototype.load=function(t,e,n){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var r=t.length;return n&&o(t,e,0,r-1,this._compare),this._root=i(null,t,e,0,r),this._size=r,this},n.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},n.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},n.prototype.isEmpty=function(){return null===this._root},r.size.get=function(){return this._size},n.createTree=function(t,e,r,i,o){return new n(r,o).load(t,e,i)},Object.defineProperties(n.prototype,r);var a=0,s=1,u=2,c=3,l=0,f=1,h=2,p=3;function d(t,e,n){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!g(e,n)||e.isVertical()?e.prevInResult:e)),t.inResult=g(t,n)}function g(t,e){switch(t.type){case a:switch(e){case l:return!t.otherInOut;case f:return t.otherInOut;case h:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case p:return!0}break;case u:return e===l||e===f;case c:return e===h;case s:return!1}return!1}var y=function(t,e,n,r,i){this.left=e,this.point=t,this.otherEvent=n,this.isSubject=r,this.type=i||a,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function v(t,e){return t[0]===e[0]&&t[1]===e[1]}function m(t,e,n){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}function A(t,e){var n=t.point,r=e.point;return n[0]>r[0]?1:n[0]<r[0]?-1:n[1]!==r[1]?n[1]>r[1]?1:-1:b(t,e,n,r)}function b(t,e,n,r){return t.left!==e.left?t.left?1:-1:0!==m(n,t.otherEvent.point,e.otherEvent.point)?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}function _(t,e,n){var r=new y(e,!1,t,t.isSubject),i=new y(e,!0,t.otherEvent,t.isSubject);return v(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),r.contourId=i.contourId=t.contourId,A(i,t.otherEvent)>0&&(t.otherEvent.left=!0,i.left=!1),t.otherEvent.otherEvent=i,t.otherEvent=r,n.push(i),n.push(r),n}function w(t,e){return t[0]*e[1]-t[1]*e[0]}function x(t,e){return t[0]*e[0]+t[1]*e[1]}function E(t,e,n,r,i){var o=[e[0]-t[0],e[1]-t[1]],a=[r[0]-n[0],r[1]-n[1]];function s(t,e,n){return[t[0]+e*n[0],t[1]+e*n[1]]}var u=[n[0]-t[0],n[1]-t[1]],c=w(o,a),l=c*c,f=x(o,o);if(l>0){var h=w(u,a)/c;if(h<0||h>1)return null;var p=w(u,o)/c;return p<0||p>1?null:0===h||1===h?i?null:[s(t,h,o)]:0===p||1===p?i?null:[s(n,p,a)]:[s(t,h,o)]}if((l=(c=w(u,o))*c)>0)return null;var d=x(o,u)/f,g=d+x(o,a)/f,y=Math.min(d,g),v=Math.max(d,g);return y<=1&&v>=0?1===y?i?null:[s(t,y>0?y:0,o)]:0===v?i?null:[s(t,v<1?v:1,o)]:i&&0===y&&1===v?null:[s(t,y>0?y:0,o),s(t,v<1?v:1,o)]:null}function O(t,e,n){var r=E(t.point,t.otherEvent.point,e.point,e.otherEvent.point),i=r?r.length:0;if(0===i)return 0;if(1===i&&(v(t.point,e.point)||v(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===i&&t.isSubject===e.isSubject)return 0;if(1===i)return v(t.point,r[0])||v(t.otherEvent.point,r[0])||_(t,r[0],n),v(e.point,r[0])||v(e.otherEvent.point,r[0])||_(e,r[0],n),1;var o=[],a=!1,l=!1;return v(t.point,e.point)?a=!0:1===A(t,e)?o.push(e,t):o.push(t,e),v(t.otherEvent.point,e.otherEvent.point)?l=!0:1===A(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),a&&l||a?(e.type=s,t.type=e.inOut===t.inOut?u:c,a&&!l&&_(o[1].otherEvent,o[0].point,n),2):l?(_(o[0],o[1].point,n),3):o[0]!==o[3].otherEvent?(_(o[0],o[1].point,n),_(o[1],o[2].point,n),3):(_(o[0],o[1].point,n),_(o[3].otherEvent,o[2].point,n),3)}function S(t,e){if(t===e)return 0;if(0!==m(t.point,t.otherEvent.point,e.point)||0!==m(t.point,t.otherEvent.point,e.otherEvent.point))return v(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===A(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var n=t.point,r=e.point;return n[0]===r[0]&&n[1]===r[1]?(n=t.otherEvent.point,r=e.otherEvent.point,n[0]===r[0]&&n[1]===r[1]?0:t.contourId>e.contourId?1:-1):1===A(t,e)?1:-1}function T(t,e,r,i,o,a){for(var s,u,c,f=new n(S),p=[],g=Math.min(i[2],o[2]);0!==t.length;){var y=t.pop();if(p.push(y),a===l&&y.point[0]>g||a===h&&y.point[0]>i[2])break;if(y.left){u=s=f.insert(y),s=s!==(c=f.minNode())?f.prev(s):null,u=f.next(u);var v=s?s.key:null;if(d(y,v,a),u&&2===O(y,u.key,t)&&(d(y,v,a),d(y,u.key,a)),s&&2===O(s.key,y,t)){var m=s;d(v,(m=m!==c?f.prev(m):null)?m.key:null,a),d(y,v,a)}}else y=y.otherEvent,u=s=f.find(y),s&&u&&(s=s!==c?f.prev(s):null,u=f.next(u),f.remove(y),u&&s&&O(s.key,u.key,t))}return p}function P(t){var e,n,r,i,o=[];for(n=0,r=t.length;n<r;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var a=!1;!a;)for(a=!0,n=0,r=o.length;n<r;n++)n+1<r&&1===A(o[n],o[n+1])&&(i=o[n],o[n]=o[n+1],o[n+1]=i,a=!1);for(n=0,r=o.length;n<r;n++)(e=o[n]).pos=n;for(n=0,r=o.length;n<r;n++)(e=o[n]).left||(i=e.pos,e.pos=e.otherEvent.pos,e.otherEvent.pos=i);return o}function M(t,e,n,r){var i=t+1,o=e.length;if(i>o-1)return t-1;for(var a=e[t].point,s=e[i].point;i<o&&s[0]===a[0]&&s[1]===a[1];){if(!n[i])return i;s=e[++i].point}for(i=t-1;n[i]&&i>=r;)i--;return i}function C(t,e){var n,r,i,o=P(t),a={},s=[];for(n=0,r=o.length;n<r;n++)if(!a[n]){var u=[[]];o[n].isExteriorRing?e===h&&!o[n].isSubject&&s.length>1?s[s.length-1].push(u[0]):s.push(u):e!==h||o[n].isSubject||0!==s.length?0===s.length?s.push([[u]]):s[s.length-1].push(u[0]):s.push(u);var c=s.length-1,l=n,f=o[n].point;for(u[0].push(f);l>=n;)i=o[l],a[l]=!0,i.left?(i.resultInOut=!1,i.contourId=c):(i.otherEvent.resultInOut=!0,i.otherEvent.contourId=c),a[l=i.pos]=!0,u[0].push(o[l].point),l=M(l,o,a,n);i=o[l=-1===l?n:l],a[l]=a[i.pos]=!0,i.otherEvent.resultInOut=!0,i.otherEvent.contourId=c}return s}y.prototype.isBelow=function(t){var e=this.point,n=this.otherEvent.point;return this.left?(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])>0:(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])>0},y.prototype.isAbove=function(t){return!this.isBelow(t)},y.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},y.prototype.clone=function(){var t=new y(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.inResult=this.inResult,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t};var I=k,R=k;function k(t,e){var n=this;if(!(this instanceof k))return new k(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||j,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)n._down(r)}function j(t,e){return t<e?-1:t>e?1:0}k.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this,n=this.data,r=this.compare,i=this.length>>1,o=n[t];t<i;){var a=1+(t<<1),s=a+1,u=n[a];if(s<e.length&&r(n[s],u)<0&&(a=s,u=n[s]),r(u,o)>=0)break;n[t]=u,t=a}n[t]=o}},I.default=R;var L=Math.max,N=Math.min,D=0;function F(t,e,n,r,i,o){var a,s,u,c,l,f;for(a=0,s=t.length-1;a<s;a++)if(u=t[a],c=t[a+1],l=new y(u,!1,void 0,e),f=new y(c,!1,l,e),l.otherEvent=f,u[0]!==c[0]||u[1]!==c[1]){l.contourId=f.contourId=n,o||(l.isExteriorRing=!1,f.isExteriorRing=!1),A(l,f)>0?f.left=!0:l.left=!0;var h=u[0],p=u[1];i[0]=N(i[0],h),i[1]=N(i[1],p),i[2]=L(i[2],h),i[3]=L(i[3],p),r.push(l),r.push(f)}}function B(t,e,n,r,i){var o,a,s,u,c,l,f=new I(null,A);for(s=0,u=t.length;s<u;s++)for(c=0,l=(o=t[s]).length;c<l;c++)(a=0===c)&&D++,F(o[c],!0,D,f,n,a);for(s=0,u=e.length;s<u;s++)for(c=0,l=(o=e[s]).length;c<l;c++)a=0===c,i===h&&(a=!1),a&&D++,F(o[c],!1,D,f,r,a);return f}var z=[];function U(t,e,n){var r=null;return t.length*e.length===0&&(n===l?r=z:n===h?r=t:n!==f&&n!==p||(r=0===t.length?e:t)),r}function G(t,e,n,r,i){var o=null;return(n[0]>r[2]||r[0]>n[2]||n[1]>r[3]||r[1]>n[3])&&(i===l?o=z:i===h?o=t:i!==f&&i!==p||(o=t.concat(e))),o}function V(t,e,n){"number"===typeof t[0][0][0]&&(t=[t]),"number"===typeof e[0][0][0]&&(e=[e]);var r=U(t,e,n);if(r)return r===z?null:r;var i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=B(t,e,i,o,n);return(r=G(t,e,i,o,n))?r===z?null:r:C(T(a,t,e,i,o,n),n)}function q(t,e){return V(t,e,f)}function H(t,e){return V(t,e,h)}function W(t,e){return V(t,e,p)}function X(t,e){return V(t,e,l)}var Y={UNION:f,DIFFERENCE:h,INTERSECTION:l,XOR:p};t.union=q,t.diff=H,t.xor=W,t.intersection=X,t.operations=Y,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(445)),o=n(180),a=n(267),s=n(446),u=r(n(447));function c(t,e){return t[0]*e[0]+t[1]*e[1]}function l(t,e,n){return"planar"===n.method?u.default(t,e,n):i.default(t,e,n)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=o.point(t):"Point"===t.type?t=o.feature(t):a.featureOf(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=o.lineString(e):"LineString"===e.type?e=o.feature(e):a.featureOf(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return s.segmentEach(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],a=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=c([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return l(t,e,{method:r.method,units:"degrees"});var a=c(i,i);if(a<=o)return l(t,n,{method:r.method,units:"degrees"});var s=o/a,u=[e[0]+s*i[0],e[1]+s*i[1]];return l(t,u,{method:r.method,units:"degrees"})}(i,e,o,n);a<r&&(r=a)})),o.convertLength(r,"degrees",n.units)}},function(t,e,n){"use strict";n.r(e);var r=n(34);n.d(e,"default",(function(){return r.a})),n.d(e,"WebMercatorViewport",(function(){return r.a})),n.d(e,"getBounds",(function(){return r.e})),n.d(e,"fitBounds",(function(){return r.c})),n.d(e,"normalizeViewportProps",(function(){return r.m})),n.d(e,"flyToViewport",(function(){return r.d})),n.d(e,"getFlyToDuration",(function(){return r.g})),n.d(e,"lngLatToWorld",(function(){return r.l})),n.d(e,"worldToLngLat",(function(){return r.p})),n.d(e,"worldToPixels",(function(){return r.q})),n.d(e,"pixelsToWorld",(function(){return r.n})),n.d(e,"zoomToScale",(function(){return r.r})),n.d(e,"scaleToZoom",(function(){return r.o})),n.d(e,"getMeterZoom",(function(){return r.h})),n.d(e,"getDistanceScales",(function(){return r.f})),n.d(e,"addMetersToLngLat",(function(){return r.b})),n.d(e,"getViewMatrix",(function(){return r.k})),n.d(e,"getProjectionMatrix",(function(){return r.i})),n.d(e,"getProjectionParameters",(function(){return r.j}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(92),i=n(93),o=n(179),a=n(269),s=n(122),u=n(44),c=n(91);e.default=function(t,e,n){void 0===n&&(n={});var l=u.point([1/0,1/0],{dist:1/0}),f=0;return s.flattenEach(t,(function(t){for(var s=c.getCoords(t),h=0;h<s.length-1;h++){var p=u.point(s[h]);p.properties.dist=i.default(e,p,n);var d=u.point(s[h+1]);d.properties.dist=i.default(e,d,n);var g=i.default(p,d,n),y=Math.max(p.properties.dist,d.properties.dist),v=r.default(p,d),m=o.default(e,y,v+90,n),A=o.default(e,y,v-90,n),b=a.default(u.lineString([m.geometry.coordinates,A.geometry.coordinates]),u.lineString([p.geometry.coordinates,d.geometry.coordinates])),_=null;b.features.length>0&&((_=b.features[0]).properties.dist=i.default(e,_,n),_.properties.location=f+i.default(p,_,n)),p.properties.dist<l.properties.dist&&((l=p).properties.index=h,l.properties.location=f),d.properties.dist<l.properties.dist&&((l=d).properties.index=h+1,l.properties.location=f+g),_&&_.properties.dist<l.properties.dist&&((l=_).properties.index=h),f+=g}})),l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScaleMode=void 0;var r=y(n(208)),i=y(n(271)),o=y(n(92)),a=y(n(209)),s=n(44),u=y(n(272)),c=n(122),l=y(n(93)),f=y(n(453)),h=n(91),p=n(71),d=n(54),g=n(109);function y(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return!e||"object"!==v(e)&&"function"!==typeof e?x(t):e}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(v,t);var e,n,l,d,y=(e=v,function(){var t,n=O(e);if(E()){var r=O(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return w(this,t)});function v(){var t;b(this,v);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return T(x(t=y.call.apply(y,[this].concat(n))),"_geometryBeingScaled",void 0),T(x(t),"_selectedEditHandle",void 0),T(x(t),"_cornerGuidePoints",void 0),T(x(t),"_cursor",void 0),T(x(t),"_isScaling",!1),T(x(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,h.getGeom)(e[0]).type})),T(x(t),"_getOppositeScaleHandle",(function(e){var n=e&&e.properties&&Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0];if("number"!==typeof n)return null;var r=t._cornerGuidePoints.length,i=(n+r/2)%r;return t._cornerGuidePoints.find((function(t){return!!Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0]===i}))})),T(x(t),"_getUpdatedData",(function(t,e){for(var n=new g.ImmutableFeatureCollection(t.data),r=t.selectedIndexes,i=0;i<r.length;i++){var o=r[i],a=e.features[i];n=n.replaceGeometry(o,a.geometry)}return n.getObject()})),T(x(t),"isEditHandleSelected",(function(){return Boolean(t._selectedEditHandle)})),T(x(t),"getScaleAction",(function(e,n,r,i){if(!t._selectedEditHandle)return null;var o=t._getOppositeScaleHandle(t._selectedEditHandle),a=(0,h.getCoord)(o),s=M(a,e,n),u=(0,f.default)(t._geometryBeingScaled,s,{origin:a});return{updatedData:t._getUpdatedData(i,u),editType:r,editContext:{featureIndexes:i.selectedIndexes}}})),T(x(t),"updateCursor",(function(e){if(t._selectedEditHandle){t._cursor&&e.onUpdateCursor(t._cursor);var n=t.getSelectedFeaturesAsFeatureCollection(e),r=(0,i.default)(n),a=(0,o.default)(r,t._selectedEditHandle),s=a<0?a+180:a;s>=0&&s<=90||s>=180&&s<=270?(t._cursor="nesw-resize",e.onUpdateCursor("nesw-resize")):(t._cursor="nwse-resize",e.onUpdateCursor("nwse-resize"))}else e.onUpdateCursor(null),t._cursor=null})),t}return n=v,(l=[{key:"handlePointerMove",value:function(t,e){if(!this._isScaling){var n=(0,p.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,n&&this.updateCursor(e)}}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleDragging",value:function(t,e){if(this._isScaling){e.onUpdateCursor(this._cursor);var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaling",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handleStopDragging",value:function(t,e){if(this._isScaling){var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaled",e);n&&e.onEdit(n),e.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(t){this._cornerGuidePoints=[];var e=this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};var n=(0,a.default)((0,r.default)(e));n.properties.mode="scale";var i=[];return(0,c.coordEach)(n,(function(t,e){if(e<4){var n=(0,s.point)(t,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[e]});i.push(n)}})),this._cornerGuidePoints=i,(0,s.featureCollection)([(0,u.default)(n)].concat(m(this._cornerGuidePoints)))}}])&&_(n.prototype,l),d&&_(n,d),v}(d.GeoJsonEditMode);function M(t,e,n){var r=(0,l.default)(t,e);return(0,l.default)(t,n)/r}e.ScaleMode=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RotateMode=void 0;var r=y(n(208)),i=y(n(271)),o=y(n(92)),a=y(n(209)),s=y(n(93)),u=n(122),c=n(91),l=n(44),f=y(n(297)),h=y(n(272)),p=n(71),d=n(54),g=n(109);function y(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return!e||"object"!==v(e)&&"function"!==typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(T,t);var e,n,y,v,S=(e=T,function(){var t,n=x(e);if(w()){var r=x(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b(this,t)});function T(){var t;m(this,T);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return O(_(t=S.call.apply(S,[this].concat(n))),"_selectedEditHandle",void 0),O(_(t),"_geometryBeingRotated",void 0),O(_(t),"_isRotating",!1),O(_(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,c.getGeom)(e[0]).type})),O(_(t),"getIsRotating",(function(){return t._isRotating})),t}return n=T,(y=[{key:"getGuides",value:function(t){var e=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};if(this._isRotating)return(0,l.featureCollection)([(0,i.default)(e)]);var n=(0,a.default)((0,r.default)(e)),o=null,c=null,f=0;(0,u.coordEach)(n,(function(t){if(o){var e=(0,d.getIntermediatePosition)(t,o);(!c||e[1]>c[1])&&(c=e);var n=(0,s.default)(t,o);f=Math.max(f,n)}o=t}));var p=c&&[c[0],c[1]+f/1e3],g=(0,l.lineString)([c,p]),y=(0,l.point)(p,{guideType:"editHandle",editHandleType:"rotate"});return(0,l.featureCollection)([(0,h.default)(n),y,g])}},{key:"handleDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotating",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){if(!this._isRotating){var n=(0,p.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"rotate"===n.properties.editHandleType?n:null}this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotated",e);n&&e.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(t){this._selectedEditHandle?t.onUpdateCursor("crosshair"):t.onUpdateCursor(null)}},{key:"getRotateAction",value:function(t,e,n,r){if(!this._geometryBeingRotated)return null;for(var a=(0,i.default)(this._geometryBeingRotated),s=function(t,e,n){var r=(0,o.default)(t,e);return(0,o.default)(t,n)-r}(a,t,e),u=(0,f.default)(this._geometryBeingRotated,s,{pivot:a}),c=new g.ImmutableFeatureCollection(r.data),l=r.selectedIndexes,h=0;h<l.length;h++){var p=l[h],d=u.features[h];c=c.replaceGeometry(p,d.geometry)}return{updatedData:c.getObject(),editType:n,editContext:{featureIndexes:l}}}}])&&A(n.prototype,y),v&&A(n,v),T}(d.GeoJsonEditMode);e.RotateMode=S},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CompositeMode=void 0;var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,t);var e,n,r,a,p=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function d(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),e=p.call(this),n=c(e),i=void 0,(r="_modes")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e._modes=t,e}return n=d,(r=[{key:"_coalesce",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this._modes.length&&(e=t(this._modes[r]),!(n?n(e):e));r++);return e}},{key:"handleClick",value:function(t,e){this._coalesce((function(n){return n.handleClick(t,e)}))}},{key:"handlePointerMove",value:function(t,e){return this._coalesce((function(n){return n.handlePointerMove(t,e)}))}},{key:"handleStartDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStartDragging(t,e)}))}},{key:"handleStopDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStopDragging(t,e)}))}},{key:"handleDragging",value:function(t,e){return this._coalesce((function(n){return n.handleDragging(t,e)}))}},{key:"getGuides",value:function(t){var e,n=[],r=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(this._modes);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push.apply(n,i(a.getGuides(t).features))}}catch(s){r.e(s)}finally{r.f()}return{type:"FeatureCollection",features:n}}}])&&s(n.prototype,r),a&&s(n,a),d}(n(54).GeoJsonEditMode);e.CompositeMode=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(179),i=n(44);e.default=function(t,e,n){void 0===n&&(n={});for(var o=n.steps||64,a=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},s=[],u=0;u<o;u++)s.push(r.default(t,e,-360*u/o,n).geometry.coordinates);return s.push(s[0]),i.polygon([s],a)}},function(t,e,n){"use strict";n.r(e);var r=n(19),i=n(116),o=n(297),a=n(39);function s(t){var e=t*Math.PI/180;return Math.tan(e)}e.default=function(t,e,n,u){var c=(u=u||{}).steps||64,l=u.units||"kilometers",f=u.angle||0,h=u.pivot||t,p=u.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!Object(r.g)(u))throw new Error("options must be an object");if(!Object(r.f)(c))throw new Error("steps must be a number");if(!Object(r.f)(f))throw new Error("angle must be a number");var d=Object(a.a)(t);if("degrees"===l)var g=Object(r.b)(f);else e=Object(i.a)(t,e,90,{units:l}),n=Object(i.a)(t,n,0,{units:l}),e=Object(a.a)(e)[0]-d[0],n=Object(a.a)(n)[1]-d[1];for(var y=[],v=0;v<c;v+=1){var m=-360*v/c,A=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(s(m),2)),b=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(s(m),2));if(m<-90&&m>=-270&&(A=-A),m<-180&&m>=-360&&(b=-b),"degrees"===l){var _=A*Math.cos(g)+b*Math.sin(g),w=b*Math.cos(g)-A*Math.sin(g);A=_,b=w}y.push([A+d[0],b+d[1]])}return y.push(y[0]),"degrees"===l?Object(r.k)([y],p):Object(o.default)(Object(r.k)([y],p),f,{pivot:h})}},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeClickPolygonMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,t);var e,n,r,f,h=(e=p,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function p(){return i(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"handleClick",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence(),r=this.getTentativeGuide(e);if(n.length>2&&r&&"Polygon"===r.geometry.type){var i=this.getAddFeatureOrBooleanPolygonAction(r.geometry,e);this.resetClickSequence(),i&&e.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=e.mapCoords;if(1===r.length)i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[0],o]}});else{var a=this.getThreeClickPolygon(r[0],r[1],o,n);a&&i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:a.geometry})}return i}},{key:"getThreeClickPolygon",value:function(t,e,n,r){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),a(c(p.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 2===r.length&&(e=this.getThreeClickPolygon(r[0],r[1],i[0],t.modeConfig)),e}}])&&o(n.prototype,r),f&&o(n,f),p}(n(54).GeoJsonEditMode);e.ThreeClickPolygonMode=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(28);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=["anyclick","pointermove","panstart","panmove","panend","keyup"],v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(u,t);var e,n,r,i,o=(e=u,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function u(){return c(this,u),o.apply(this,arguments)}return n=u,(r=[{key:"onLayerClick",value:function(t){}},{key:"onStartDragging",value:function(t){}},{key:"onStopDragging",value:function(t){}},{key:"onDragging",value:function(t){}},{key:"onPointerMove",value:function(t){}},{key:"onLayerKeyUp",value:function(t){}},{key:"initializeState",value:function(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}},{key:"finalizeState",value:function(){this._removeEventHandlers()}},{key:"_addEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=s(y);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.on(i,n,{priority:100})}}catch(o){r.e(o)}finally{r.f()}}},{key:"_removeEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=s(y);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.off(i,n)}}catch(o){r.e(o)}finally{r.f()}}},{key:"_forwardEventToCurrentLayer",value:function(t){var e=this.getCurrentLayer(),n=e["_on".concat(t.type)].bind(e);n?n(t):console.warn("no handler for mjolnir.js event ".concat(t.type))}},{key:"_onanyclick",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.getPicks(n);this.onLayerClick({mapCoords:r,screenCoords:n,picks:i,sourceEvent:e})}},{key:"_onkeyup",value:function(t){var e=t.srcEvent;this.onLayerKeyUp(e)}},{key:"_onpanstart",value:function(t){var e=this.getScreenCoords(t.srcEvent),n=this.getMapCoords(e),r=this.getPicks(e);this.setState({_editableLayerState:a({},this.state._editableLayerState,{pointerDownScreenCoords:e,pointerDownMapCoords:n,pointerDownPicks:r})}),this.onStartDragging({picks:r,screenCoords:e,mapCoords:n,pointerDownScreenCoords:e,pointerDownMapCoords:n,cancelPan:t.stopImmediatePropagation,sourceEvent:t.srcEvent})}},{key:"_onpanmove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,a=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,u=this.getPicks(n);this.onDragging({screenCoords:n,mapCoords:r,picks:u,pointerDownPicks:o,pointerDownScreenCoords:a,pointerDownMapCoords:s,sourceEvent:e,cancelPan:t.stopImmediatePropagation})}},{key:"_onpanend",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,s=i.pointerDownScreenCoords,u=i.pointerDownMapCoords,c=this.getPicks(n);this.onStopDragging({picks:c,screenCoords:n,mapCoords:r,pointerDownPicks:o,pointerDownScreenCoords:s,pointerDownMapCoords:u,sourceEvent:e}),this.setState({_editableLayerState:a({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null})})}},{key:"_onpointermove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,a=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,u=this.getPicks(n);this.onPointerMove({screenCoords:n,mapCoords:r,picks:u,pointerDownPicks:o,pointerDownScreenCoords:a,pointerDownMapCoords:s,sourceEvent:e})}},{key:"getPicks",value:function(t){return this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}},{key:"getScreenCoords",value:function(t){return[t.clientX-this.context.gl.canvas.getBoundingClientRect().left,t.clientY-this.context.gl.canvas.getBoundingClientRect().top]}},{key:"getMapCoords",value:function(t){return this.context.viewport.unproject([t[0],t[1]])}}])&&l(n.prototype,r),i&&l(n,i),u}(r.CompositeLayer);e.default=v,g(v,"layerName","EditableLayer")},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1),i=n(2),o=n(104),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.opts=e}return Object(i.a)(t,[{key:"equals",value:function(t){return this===t||this.constructor===t.constructor&&Object(o.a)(this.opts,t.opts)}},{key:"getShaders",value:function(t){return null}},{key:"getSubLayerProps",value:function(t){var e=t.constructor.defaultProps,n=void 0===e?{}:e,r={updateTriggers:{}};for(var i in n)if(i in this.props){var o=n[i],a=this.props[i];r[i]=a,o&&"accessor"===o.type&&(r.updateTriggers[i]=this.props.updateTriggers[i],"function"===typeof a&&(r[i]=this.getSubLayerAccessor(a,!0)))}return r}},{key:"initializeState",value:function(t,e){}},{key:"updateState",value:function(t,e){}},{key:"draw",value:function(t,e){}},{key:"finalizeState",value:function(t){}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(0),i=n(1),o=n(2),a=n(196);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c="Queued Requests",l="Active Requests",f="Cancelled Requests",h="Queued Requests Ever",p="Active Requests Ever",d={id:"request-scheduler",throttleRequests:!0,maxRequests:6},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),this.props=u(u({},d),e),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new a.a({id:e.id}),this.stats.get(c),this.stats.get(l),this.stats.get(f),this.stats.get(h),this.stats.get(p),this._deferredUpdate=null}return Object(o.a)(t,[{key:"scheduleRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var n={handle:t,getPriority:e},r=new Promise((function(t){return n.resolve=t,n}));return this.requestQueue.push(n),this.requestMap.set(t,r),this._issueNewRequests(),r}},{key:"_issueRequest",value:function(t){var e=this,n=t.handle,r=t.resolve,i=!1,o=function(){i||(i=!0,e.requestMap.delete(n),e.activeRequestCount--,e._issueNewRequests())};return this.activeRequestCount++,r?r({done:o}):Promise.resolve({done:o})}},{key:"_issueNewRequests",value:function(){var t=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return t._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(var e=0;e<t;++e)if(this.requestQueue.length>0){var n=this.requestQueue.shift();this._issueRequest(n)}}}},{key:"_updateAllRequests",value:function(){for(var t=this.requestQueue,e=0;e<t.length;++e){var n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort((function(t,e){return t.priority-e.priority}))}},{key:"_updateRequest",value:function(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(184);function i(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat(Object(r.a)(t),'"'))}}},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*g}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(63),i=s(n(128)),o=n(30),a=s(n(482));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=t.source,n=t.code,r=void 0===n?"":n;return e.replace(/}[^{}]*$/,r.concat("\n}\n"))}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(y,t);var e,n,r,s,u=(e=y,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function y(){return c(this,y),u.apply(this,arguments)}return n=y,(r=[{key:"getShaders",value:function(){var t=f(d(y.prototype),"getShaders",this).call(this);return Object.assign({},t,{modules:t.modules.concat([a.default]),vs:v({source:t.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:v({source:t.fs,code:"  gl_FragColor = outline_filterColor(gl_FragColor);\n"})})}},{key:"initializeState",value:function(t){f(d(y.prototype),"initializeState",this).call(this,t),this.setState({outlineFramebuffer:new o.Framebuffer(t.gl),dummyTexture:new o.Texture2D(t.gl)}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:i.default.UNSIGNED_BYTE,update:this.calculateZLevels,accessor:"getZLevel"}})}},{key:"draw",value:function(t){t.moduleParameters,t.parameters;var e=t.uniforms,n=(t.context,this.props),r=n.rounded,o=n.miterLimit,a=n.widthScale,s=n.widthMinPixels,u=n.widthMaxPixels,c=n.dashJustified;e=Object.assign({},e,{jointType:Number(r),alignMode:Number(c),widthScale:a,miterLimit:o,widthMinPixels:s,widthMaxPixels:u});var l=this.state,f=l.outlineFramebuffer,h=l.dummyTexture;f.resize(),f.clear({color:!0,depth:!0}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:h}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:i.default.MAX},framebuffer:f}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:f}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:Number(r),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})}},{key:"calculateZLevels",value:function(t){var e=this.props.getZLevel,n=this.state.pathTesselator;t.value=n._updateAttribute({target:t.value,size:1,getValue:function(t,n){return[e(t,n)||0]}})}}])&&l(n.prototype,r),s&&l(n,s),y}(r.PathLayer);e.default=m,y(m,"layerName","PathOutlineLayer"),y(m,"defaultProps",{getZLevel:{type:"accessor",value:0}})},function(t,e,n){var r=n(133),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(62))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(353),i=n(525);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}},function(t,e,n){var r=n(282),i=n(519),o=n(521);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(526),i=n(283),o=n(123),a=n(284),s=n(355),u=n(357),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),f=!n&&!l&&a(t),h=!n&&!l&&!f&&u(t),p=n||l||f||h,d=p?r(t.length,String):[],g=d.length;for(var y in t)!e&&!c.call(t,y)||p&&("length"==y||f&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,g))||d.push(y);return d}},function(t,e,n){var r=n(529),i=n(216),o=n(285),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(217),i=n(539),o=n(540),a=n(541),s=n(542),u=n(543);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e,n){var r=n(544),i=n(551),o=n(553),a=n(554),s=n(555);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){(function(t){var r=n(98),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(175)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(288),i=n(289),o=n(287),a=n(364),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(288),i=n(123);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e,n){var r=n(291);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(575),i=n(289),o=n(215);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(148),i=n(99);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(134),i=n(123),o=n(99);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(134),i=n(99);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(281),i=n(214);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var r=n(182),i=n(292),o=n(123),a=n(371),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.CloudinaryContextType=void 0;var o=(0,function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,e&&e.set(t,n);return n}(n(8)).createContext)();e.CloudinaryContextType=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(8)),i=u(n(14)),o=n(112),a=u(n(213)),s=n(294);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function f(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?A(t):e}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(c,t);var e,n,i,u=v(c);function c(){var t;d(this,c);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return _(A(t=u.call.apply(u,[this].concat(n))),"mimeType","video"),_(A(t),"getMergedProps",(function(){return p(p({},t.getContext()),t.props)})),_(A(t),"generateVideoUrl",(function(t,e,n,r,i){var a=r[i]||{},s=o.Util.defaults({},a,n,{resource_type:"video",format:i});return t.url(e,s)})),_(A(t),"generateSources",(function(e,n,i,o,a){return a.map((function(a){var s=t.generateVideoUrl(e,n,i,o,a),u="".concat(t.mimeType,"/").concat("ogv"===a?"ogg":a);return r.default.createElement("source",{key:u,src:s,type:u})}))})),_(A(t),"getVideoTagProps",(function(){var e=t.getMergedProps(),n=(e.innerRef,e.publicId),r=(e.fallback,e.children),i=e.sourceTypes,u=e.sourceTransformation,c=void 0===u?{}:u,l=f(e,["innerRef","publicId","fallback","children","sourceTypes","sourceTransformation"]);l=a.default.normalizeOptions(l,{});var h=(0,s.extractCloudinaryProps)(l),d=h.cloudinaryProps,g=h.cloudinaryReactProps,y=h.nonCloudinaryProps;l=p(p({},d),g);var v=o.Util.withSnakeCaseKeys(l),m=o.Cloudinary.new(v),A=m.videoTag(n,l).attributes();A=p(p({},o.Util.withCamelCaseKeys(A)),y);var b=t.getTransformation(p(p({},l),{},{children:r})),_=null;return o.Util.isArray(i)?_=t.generateSources(m,n,b,c,i):A.src=t.generateVideoUrl(m,n,b,c,i),{sources:_,tagAttributes:A}})),_(A(t),"reloadVideo",(function(){t.element&&t.element.current&&t.element.current.load()})),t}return e=c,(n=[{key:"componentDidUpdate",value:function(){this.reloadVideo()}},{key:"render",value:function(){var t=this.props,e=t.fallback,n=t.children,i=this.getVideoTagProps(),o=i.tagAttributes,a=i.sources;return r.default.createElement("video",l({ref:this.attachRef},o),a,e,n)}}])&&g(e.prototype,n),i&&g(e,i),c}(a.default);w.propTypes={publicId:i.default.string},w.defaultProps={sourceTypes:o.Cloudinary.DEFAULT_VIDEO_PARAMS.source_types};var x=w;e.default=x},function(t,e,n){"use strict";n.r(e),n.d(e,"GreatCircleLayer",(function(){return h})),n.d(e,"S2Layer",(function(){return C})),n.d(e,"TileLayer",(function(){return I.a})),n.d(e,"TripsLayer",(function(){return j})),n.d(e,"H3ClusterLayer",(function(){return U})),n.d(e,"H3HexagonLayer",(function(){return $})),n.d(e,"Tile3DLayer",(function(){return sa})),n.d(e,"TerrainLayer",(function(){return Sa})),n.d(e,"MVTLayer",(function(){return Ms}));var r={};n.r(r),n.d(r,"decode",(function(){return pi})),n.d(r,"encode",(function(){return gi}));var i={};n.r(i),n.d(i,"decode",(function(){return xi})),n.d(i,"encode",(function(){return Ei}));var o={};n.r(o),n.d(o,"decode",(function(){return Ti})),n.d(o,"encode",(function(){return Pi}));var a={};n.r(a),n.d(a,"decode",(function(){return Ii})),n.d(a,"encode",(function(){return Ri}));var s=n(1),u=n(5),c=n(6),l=n(3);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=function(t){Object(u.a)(n,t);var e=f(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return n}(n(381).a);h.layerName="GreatCircleLayer",h.defaultProps={getHeight:{type:"accessor",value:0},greatCircle:!0};var p=n(2),d=n(296),g=n(328),y=n(12),v=n(170),m=n.n(v),A=180/Math.PI;function b(t,e,n){var r=1<<e;return[(t[0]+n[0])/r,(t[1]+n[1])/r]}function _(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function w(t){return[_(t[0]),_(t[1])]}function x(t,e){var n=Object(y.a)(e,2),r=n[0],i=n[1];switch(t){case 0:return[1,r,i];case 1:return[-r,1,i];case 2:return[-r,-i,1];case 3:return[-1,-i,-r];case 4:return[i,-1,-r];case 5:return[i,r,-1];default:throw new Error("Invalid face")}}function E(t){var e=Object(y.a)(t,3),n=e[0],r=e[1],i=e[2],o=Math.atan2(i,Math.sqrt(n*n+r*r));return[Math.atan2(r,n)*A,o*A]}function O(t,e,n,r){if(0===r){1===n&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);var i=e[0];e[0]=e[1],e[1]=i}}function S(t){if("string"===typeof t){if(t.indexOf("/")>0)return t;t=function(t){var e=t.padEnd(16,"0");return m.a.fromString(e,16)}(t)}return function(t){for(var e=m.a.fromString(t,!0,10).toString(2);e.length<64;)e="0"+e;for(var n=e.lastIndexOf("1"),r=e.substring(0,3),i=e.substring(3,n),o=i.length/2,a=m.a.fromString(r,!0,2).toString(10),s=m.a.fromString(i,!0,2).toString(4);s.length<o;)s="0"+s;return"".concat(a,"/").concat(s)}(t.toString())}function T(t){return function(t){for(var e=t.face,n=t.ij,r=t.level,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],o=Math.max(1,Math.ceil(100*Math.pow(2,-r))),a=new Float64Array(4*o*2+2),s=0,u=0;u<4;u++)for(var c=i[u].slice(0),l=i[u+1],f=(l[0]-c[0])/o,h=(l[1]-c[1])/o,p=0;p<o;p++){c[0]+=f,c[1]+=h;var d=E(x(e,w(b(n,r,c))));a[s++]=d[0],a[s++]=d[1]}return a[s++]=a[0],a[s++]=a[1],a}(function(t){for(var e,n=t.split("/"),r=parseInt(n[0],10),i=n[1],o=i.length,a=[0,0],s=o-1;s>=0;s--){e=o-s;var u=i[s],c=0,l=0;"1"===u?l=1:"2"===u?(c=1,l=1):"3"===u&&(c=1);var f=Math.pow(2,e-1);O(f,a,c,l),a[0]+=f*c,a[1]+=f*l}if(r%2===1){var h=a[0];a[0]=a[1],a[1]=h}return{face:r,ij:a,level:e}}(S(t)))}function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var M=Object.assign({getS2Token:{type:"accessor",value:function(t){return t.token}}},g.a.defaultProps),C=function(t){Object(u.a)(n,t);var e=P(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"renderLayers",value:function(){var t=this.props,e=t.data,n=t.getS2Token,r=this.props,i=r.elevationScale,o=r.extruded,a=r.wireframe,s=r.filled,u=r.stroked,c=r.lineWidthUnits,l=r.lineWidthScale,f=r.lineWidthMinPixels,h=r.lineWidthMaxPixels,p=r.lineJointRounded,d=r.lineMiterLimit,y=r.lineDashJustified,v=r.getElevation,m=r.getFillColor,A=r.getLineColor,b=r.getLineWidth,_=r.getLineDashArray,w=this.props,x=w.updateTriggers,E=w.material;return new(this.getSubLayerClass("cell",g.a))({filled:s,wireframe:a,extruded:o,elevationScale:i,stroked:u,lineWidthUnits:c,lineWidthScale:l,lineWidthMinPixels:f,lineWidthMaxPixels:h,lineJointRounded:p,lineMiterLimit:d,lineDashJustified:y,material:E,getElevation:v,getFillColor:m,getLineColor:A,getLineWidth:b,getLineDashArray:_},this.getSubLayerProps({id:"cell",updateTriggers:{getElevation:x.getElevation,getFillColor:x.getFillColor,getLineColor:x.getLineColor,getLineWidth:x.getLineWidth,getLineDashArray:x.getLineDashArray}}),{data:e,_normalize:!1,positionFormat:"XY",getPolygon:function(t,e){return T(n(t,e))}})}}]),n}(d.a);C.layerName="S2Layer",C.defaultProps=M;var I=n(138),R=n(15);function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var j=function(t){Object(u.a)(n,t);var e=k(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"getShaders",value:function(){var t=Object(R.a)(Object(l.a)(n.prototype),"getShaders",this).call(this);return t.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || vTime < currentTime - trailLength) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"color.a *= 1.0 - (currentTime - vTime) / trailLength;"},t}},{key:"initializeState",value:function(t){Object(R.a)(Object(l.a)(n.prototype),"initializeState",this).call(this,t),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(t){var e=this.props,r=e.trailLength,i=e.currentTime;t.uniforms=Object.assign({},t.uniforms,{trailLength:r,currentTime:i}),Object(R.a)(Object(l.a)(n.prototype),"draw",this).call(this,t)}}]),n}(n(137).a);j.layerName="TripsLayer",j.defaultProps={trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:null}};var L=n(75),N=n(73);function D(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var z=Object.assign({getHexagons:{type:"accessor",value:function(t){return t.hexagons}}},g.a.defaultProps),U=function(t){Object(u.a)(n,t);var e=B(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"updateState",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagons){var r,i=e.data,o=e.getHexagons,a=[],s=Object(N.a)(i),u=s.iterable,c=s.objectInfo,l=D(u);try{for(l.s();!(r=l.n()).done;){var f=r.value;c.index++;var h,p=o(f,c),d=D(Object(L.h3SetToMultiPolygon)(p,!0));try{for(d.s();!(h=d.n()).done;){var g=h.value;a.push(this.getSubLayerRow({polygon:g},f,c.index))}}catch(y){d.e(y)}finally{d.f()}}}catch(y){l.e(y)}finally{l.f()}this.setState({polygons:a})}}},{key:"renderLayers",value:function(){var t=this.props,e=t.elevationScale,n=t.extruded,r=t.wireframe,i=t.filled,o=t.stroked,a=t.lineWidthScale,s=t.lineWidthMinPixels,u=t.lineWidthMaxPixels,c=t.lineJointRounded,l=t.lineMiterLimit,f=t.lineDashJustified,h=t.material,p=t.getFillColor,d=t.getLineColor,y=t.getLineWidth,v=t.getLineDashArray,m=t.getElevation,A=t.updateTriggers;return new(this.getSubLayerClass("cluster-region",g.a))({filled:i,wireframe:r,extruded:n,elevationScale:e,stroked:o,lineWidthScale:a,lineWidthMinPixels:s,lineWidthMaxPixels:u,lineJointRounded:c,lineMiterLimit:l,lineDashJustified:f,material:h,getFillColor:this.getSubLayerAccessor(p),getLineColor:this.getSubLayerAccessor(d),getLineWidth:this.getSubLayerAccessor(y),getLineDashArray:this.getSubLayerAccessor(v),getElevation:this.getSubLayerAccessor(m)},this.getSubLayerProps({id:"cluster-region",updateTriggers:A}),{data:this.state.polygons,getPolygon:function(t){return t.polygon}})}}]),n}(d.a);U.defaultProps=z,U.layerName="H3ClusterLayer";var G=n(22),V=n(13),q=n(229);function H(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function W(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t,e){e=void 0===e?t[0][0]:e;var n,r=W(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i[0]-e;o>180?i[0]-=360:o<-180&&(i[0]+=360)}}catch(a){r.e(a)}finally{r.f()}}function Q(t,e,n){var r=Object(L.h3ToGeo)(t),i=Object(y.a)(r,2),o=i[0],a=i[1],s=e.length;Y(e,a);for(var u=e[0]===e[s-1]?s-1:s,c=0;c<u;c++)e[c][0]=Object(V.lerp)(a,e[c][0],n),e[c][1]=Object(V.lerp)(o,e[c][1],n)}function Z(t,e,n){var r=t(e,n),i=Object(L.h3ToGeo)(r),o=Object(y.a)(i,2),a=o[0];return[o[1],a]}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=Object(L.h3ToGeoBoundary)(t,!0);if(1!==e?Q(t,r,e):Y(r),n){var i,o=new Float64Array(2*r.length),a=0,s=W(r);try{for(s.s();!(i=s.n()).done;){var u=i.value;o[a++]=u[0],o[a++]=u[1]}}catch(c){s.e(c)}finally{s.f()}return o}return r}var J=Object.assign({},g.a.defaultProps,{highPrecision:!1,coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:function(t){return t.hexagon}},extruded:!0});delete J.getLineDashArray;var $=function(t){Object(u.a)(n,t);var e=H(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"shouldUpdateState",value:function(t){var e=t.changeFlags;return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}},{key:"updateState",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggers&&n.updateTriggers.getHexagon){var r,i=-1,o=!1,a=!1,s=Object(N.a)(e.data),u=s.iterable,c=s.objectInfo,l=W(u);try{for(l.s();!(r=l.n()).done;){var f=r.value;c.index++;var h=e.getHexagon(f,c),p=Object(L.h3GetResolution)(h);if(i<0)i=p;else if(i!==p){a=!0;break}if(Object(L.h3IsPentagon)(h)){o=!0;break}}}catch(d){l.e(d)}finally{l.f()}this.setState({resolution:i,edgeLengthKM:i>=0?Object(L.edgeLength)(i,L.UNITS.km):0,hasMultipleRes:a,hasPentagon:o})}this._updateVertices(this.context.viewport)}},{key:"_shouldUseHighPrecision",value:function(){var t=this.state,e=t.resolution,n=t.hasPentagon,r=t.hasMultipleRes,i=this.context.viewport;return this.props.highPrecision||i.resolution||r||n||e>=0&&e<=5}},{key:"_updateVertices",value:function(t){if(!this._shouldUseHighPrecision()){var e=this.state,n=e.resolution,r=e.edgeLengthKM,i=e.centerHex;if(!(n<0)){var o=this.props.centerHexagon||Object(L.geoToH3)(t.latitude,t.longitude,n);if(i!==o){if(i){var a=Object(L.h3Distance)(i,o);if(a>=0&&a*r<10)return}var s=t.distanceScales.unitsPerMeter,u=K(o),c=Object(L.h3ToGeo)(o),l=Object(y.a)(c,2),f=l[0],h=l[1],p=t.projectFlat([h,f]),d=Object(y.a)(p,2),g=d[0],v=d[1];u=u.map((function(e){var n=t.projectFlat(e);return[(n[0]-g)/s[0],(n[1]-v)/s[1]]})),this.setState({centerHex:o,vertices:u})}}}}},{key:"renderLayers",value:function(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}},{key:"_getForwardProps",value:function(){var t=this.props,e=t.elevationScale,n=t.material,r=t.coverage,i=t.extruded,o=t.wireframe,a=t.stroked,s=t.filled,u=t.lineWidthUnits,c=t.lineWidthScale,l=t.lineWidthMinPixels,f=t.lineWidthMaxPixels,h=t.getFillColor,p=t.getElevation,d=t.getLineColor,g=t.getLineWidth,y=t.updateTriggers;return{elevationScale:e,extruded:i,coverage:r,wireframe:o,stroked:a,filled:s,lineWidthUnits:u,lineWidthScale:c,lineWidthMinPixels:l,lineWidthMaxPixels:f,material:n,getElevation:p,getFillColor:h,getLineColor:d,getLineWidth:g,updateTriggers:{getFillColor:y.getFillColor,getElevation:y.getElevation,getLineColor:y.getLineColor,getLineWidth:y.getLineWidth}}}},{key:"_renderPolygonLayer",value:function(){var t=this.props,e=t.data,n=t.getHexagon,r=t.updateTriggers,i=t.coverage,o=this.getSubLayerClass("hexagon-cell-hifi",g.a),a=this._getForwardProps();return a.updateTriggers.getPolygon=function(t,e){return void 0===t||null===t?e:"object"===Object(G.a)(t)?Object.assign({},t,{coverage:e}):{getHexagon:t,coverage:e}}(r.getHexagon,i),new o(a,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:a.updateTriggers}),{data:e,_normalize:!1,positionFormat:"XY",getPolygon:function(t,e){return K(n(t,e),i,!0)}})}},{key:"_renderColumnLayer",value:function(){var t=this.props,e=t.data,n=t.getHexagon,r=t.updateTriggers,i=this.getSubLayerClass("hexagon-cell",q.a),o=this._getForwardProps();return o.updateTriggers.getPosition=r.getHexagon,new i(o,this.getSubLayerProps({id:"hexagon-cell",updateTriggers:o.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:Z.bind(null,n)})}}]),n}(d.a);$.defaultProps=J,$.layerName="H3HexagonLayer";var tt=n(4),et=n.n(tt),nt=n(0),rt=n(11),it=n(87),ot=n(24),at=n(382),st=n(379),ut=n(383),ct=n(26),lt=n(649),ft=n(162),ht=n(135),pt=n(72),dt=n(323),gt=n(20),yt=n(29),vt=6378137,mt=6378137,At=6356752.314245179,bt=(Math.max(vt,mt,At),function(t){return t}),_t=new ht.a;function wt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt;return Object(gt.m)(t)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in t?(e[0]=n(t.longitude),e[1]=n(t.latitude),e[2]=t.height):(e[0]=n(t.x),e[1]=n(t.y),e[2]=t.z),e}function xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;return wt(t,e,gt.f._cartographicRadians?bt:gt.s)}function Et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt;return Object(gt.m)(e)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in e?(e.longitude=n(t[0]),e.latitude=n(t[1]),e.height=t[2]):(e.x=n(t[0]),e.y=n(t[1]),e.z=t[2]),e}function Ot(t,e){return Et(t,e,gt.f._cartographicRadians?bt:gt.r)}var St=new ht.a,Tt=new ht.a,Pt=new ht.a;var Mt=new ht.a,Ct={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},It={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Rt={east:new ht.a,north:new ht.a,up:new ht.a,west:new ht.a,south:new ht.a,down:new ht.a},kt=new ht.a,jt=new ht.a,Lt=new ht.a;function Nt(t,e,n,r,i,o){var a,s,u,c=Ct[e]&&Ct[e][n];Object(pt.a)(c&&(!r||r===c));var l=Mt.copy(i);if(Object(gt.j)(l.x,0,1e-14)&&Object(gt.j)(l.y,0,1e-14)){var f=Math.sign(l.z);a=kt.fromArray(It[e]),"east"!==e&&"west"!==e&&a.scale(f),s=jt.fromArray(It[n]),"east"!==n&&"west"!==n&&s.scale(f),u=Lt.fromArray(It[r]),"east"!==r&&"west"!==r&&u.scale(f)}else{var h=Rt.up,p=Rt.east,d=Rt.north;p.set(-l.y,l.x,0).normalize(),t.geodeticSurfaceNormal(l,h),d.copy(h).cross(p);var g=Rt.west,y=Rt.south;Rt.down.copy(h).scale(-1),g.copy(p).scale(-1),y.copy(d).scale(-1),a=Rt[e],s=Rt[n],u=Rt[r]}return o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=0,o[4]=s.x,o[5]=s.y,o[6]=s.z,o[7]=0,o[8]=u.x,o[9]=u.y,o[10]=u.z,o[11]=0,o[12]=l.x,o[13]=l.y,o[14]=l.z,o[15]=1,o}var Dt,Ft=new ht.a,Bt=new ht.a,zt=new ht.a,Ut=new ht.a,Gt=new ht.a,Vt=new ht.a,qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(s.a)(this,t),Object(pt.a)(e>=0),Object(pt.a)(n>=0),Object(pt.a)(r>=0),this.radii=new ht.a(e,n,r),this.radiiSquared=new ht.a(e*e,n*n,r*r),this.radiiToTheFourth=new ht.a(e*e*e*e,n*n*n*n,r*r*r*r),this.oneOverRadii=new ht.a(0===e?0:1/e,0===n?0:1/n,0===r?0:1/r),this.oneOverRadiiSquared=new ht.a(0===e?0:1/(e*e),0===n?0:1/(n*n),0===r?0:1/(r*r)),this.minimumRadius=Math.min(e,n,r),this.maximumRadius=Math.max(e,n,r),this.centerToleranceSquared=dt.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(p.a)(t,null,[{key:"WGS84",get:function(){return Dt=Dt||new t(vt,mt,At)}}]),Object(p.a)(t,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=Bt,r=zt,i=Object(y.a)(t,3),o=i[2];this.geodeticSurfaceNormalCartographic(t,n),r.copy(this.radiiSquared).scale(n);var a=Math.sqrt(n.dot(r));return r.scale(1/a),n.scale(o),r.add(n),r.to(e)}},{key:"cartesianToCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];Vt.from(t);var n=this.scaleToGeodeticSurface(Vt,Ut);if(n){var r=this.geodeticSurfaceNormal(n,Bt),i=Gt;i.copy(Vt).subtract(n);var o=Math.atan2(r.y,r.x),a=Math.asin(r.z),s=Math.sign(yt.d(i,Vt))*yt.g(i);return Ot([o,a,s],e)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ft.a;return Nt(this,"east","north","up",t,e)}},{key:"localFrameToFixedFrame",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ft.a;return Nt(this,t,e,n,r,i)}},{key:"geocentricSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Ft.from(t).normalize().to(e)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=xt(t),r=n[0],i=n[1],o=Math.cos(i);return Ft.set(o*Math.cos(r),o*Math.sin(r),Math.sin(i)).normalize(),Ft.to(e)}},{key:"geodeticSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Ft.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}},{key:"scaleToGeodeticSurface",value:function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ht.a,r=e.oneOverRadii,i=e.oneOverRadiiSquared,o=e.centerToleranceSquared;St.from(t);var a=t.x,s=t.y,u=t.z,c=r.x,l=r.y,f=r.z,h=a*a*c*c,p=s*s*l*l,d=u*u*f*f,g=h+p+d,y=Math.sqrt(1/g);if(Number.isFinite(y)){var v=Tt;if(v.copy(t).scale(y),g<o)return v.to(n);var m=i.x,A=i.y,b=i.z,_=Pt;_.set(v.x*m*2,v.y*A*2,v.z*b*2);var w,x,E,O,S=(1-y)*t.len()/(.5*_.len()),T=0;do{var P=(w=1/(1+(S-=T)*m))*w,M=(x=1/(1+S*A))*x,C=(E=1/(1+S*b))*E;T=(O=h*P+p*M+d*C-1)/(-2*(h*(P*w)*m+p*(M*x)*A+d*(C*E)*b))}while(Math.abs(O)>dt.a.EPSILON12);return St.scale([w,x,E]).to(n)}}(t,this,e)}},{key:"scaleToGeocentricSurface",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];Ut.from(t);var n=Ut.x,r=Ut.y,i=Ut.z,o=this.oneOverRadiiSquared,a=1/Math.sqrt(n*n*o.x+r*r*o.y+i*i*o.z);return Ut.multiplyScalar(a).to(e)}},{key:"transformPositionToScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Ut.from(t).scale(this.oneOverRadii).to(e)}},{key:"transformPositionFromScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return Ut.from(t).scale(this.radii).to(e)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(pt.a)(Object(gt.j)(this.radii.x,this.radii.y,dt.a.EPSILON15)),Object(pt.a)(this.radii.z>0),Ut.from(t);var r=Ut.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(r)>=this.radii.z-e))return Ut.set(0,0,r).to(n)}}]),t}(),Ht=n(196),Wt=n(69),Xt=n(37),Yt=n(345),Qt=function t(e,n,r){Object(s.a)(this,t),this.item=e,this.previous=n,this.next=r},Zt=function(){function t(){Object(s.a)(this,t),this.head=null,this.tail=null,this._length=0}return Object(p.a)(t,[{key:"add",value:function(t){var e=new Qt(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e}},{key:"remove",value:function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}},{key:"splice",value:function(t,e){t!==e&&(this.remove(e),this._insert(t,e))}},{key:"_insert",value:function(t,e){var n=t.next;t.next=e,this.tail===t?this.tail=e:n.previous=e,e.next=n,e.previous=t,++this._length}},{key:"length",get:function(){return this._length}}]),t}();function Kt(t){return void 0!==t&&null!==t}var Jt=function(){function t(){Object(s.a)(this,t),this._list=new Zt,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return Object(p.a)(t,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(t){var e=t._cacheNode;Kt(e)&&this._list.splice(this._sentinel,e)}},{key:"add",value:function(t,e,n){Kt(e._cacheNode)||(e._cacheNode=this._list.add(e),n&&n(t,e))}},{key:"unloadTile",value:function(t,e,n){var r=e._cacheNode;Kt(r)&&(this._list.remove(r),e._cacheNode=void 0,n&&n(t,e))}},{key:"unloadTiles",value:function(t,e){var n=this._trimTiles;this._trimTiles=!1;for(var r=this._list,i=1024*t.maximumMemoryUsage*1024,o=this._sentinel,a=r.head;a!==o&&(t.gpuMemoryUsageInBytes>i||n);){var s=a.item;a=a.next,this.unloadTile(t,s,e)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),t}();var $t=n(57),te=new ht.a,ee=new ht.a,ne=new $t.c([new $t.e,new $t.e,new $t.e,new $t.e,new $t.e,new $t.e]);function re(t,e){var n=t.cameraDirection,r=t.cameraUp,i=t.height,o=t.distanceScales.metersPerUnit,a=[t.longitude,t.latitude,0],s=qt.WGS84.cartographicToCartesian(a,new ht.a),u=qt.WGS84.eastNorthUpToFixedFrame(s),c=t.unprojectPosition(t.cameraPosition),l=qt.WGS84.cartographicToCartesian(c,new ht.a),f=new ht.a(u.transformAsVector(new ht.a(n).scale(o))).normalize(),h=new ht.a(u.transformAsVector(new ht.a(r).scale(o))).normalize();return function(t,e){var n=t.getFrustumPlanes(),r=0;for(var i in n){var o=n[i],a=o.normal.dot(t.center);ee.copy(o.normal).scale(o.distance-a).add(t.center);var s=t.unprojectPosition(ee),u=qt.WGS84.cartographicToCartesian(s,new ht.a);ne.planes[r++].fromPointNormal(u,te.copy(e).subtract(u))}}(t,s),{camera:{position:l,direction:f,up:h},viewport:t,height:i,cullingVolume:ne,frameNumber:e,sseDenominator:1.15}}var ie=6378137,oe=6378137,ae=6356752.314245179,se=new ht.a;var ue=0,ce=1,le=3,fe=4,he=5,pe=1,de=2,ge="empty",ye="scenegraph",ve="pointcloud",me="mesh",Ae="I3S",be="TILES3D",_e="geometricError",we=1,xe=n(322);function Ee(t){return void 0!==t&&null!==t}var Oe=new ht.a,Se=new ht.a,Te=new ht.a;new ft.a;function Pe(t,e,n){if(Object(Wt.a)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,n){var r=new ht.a(t[0],t[1],t[2]);e.transform(r,r);var i=e.transformAsVector(t.slice(3,6)),o=e.transformAsVector(t.slice(6,9)),a=e.transformAsVector(t.slice(9,12)),s=new xe.a([i[0],i[1],i[2],o[0],o[1],o[2],a[0],a[1],a[2]]);if(Ee(n))return n.center=r,n.halfAxes=s,n;return new $t.d(r,s)}(t.box,e,n);if(t.region){var r=Object(y.a)(t.region,6),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=qt.WGS84.cartographicToCartesian([Object(gt.i)(i),Object(gt.i)(s),u],Se),f=qt.WGS84.cartographicToCartesian([Object(gt.i)(a),Object(gt.i)(o),c],Te),h=(new ht.a).addVectors(l,f).multiplyScalar(.5),p=(new ht.a).subVectors(l,f).len()/2;return Me([h[0],h[1],h[2],p],new ft.a)}if(t.sphere)return Me(t.sphere,e,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function Me(t,e,n){var r=new ht.a(t[0],t[1],t[2]);e.transform(r,r);var i=e.getScale(Oe),o=Math.max(Math.max(i[0],i[1]),i[2]),a=t[3]*o;return Ee(n)?(n.center=r,n.radius=a,n):new $t.b(r,a)}new ht.a,new ht.a,new ft.a,new ht.a,new ht.a,new ht.a;function Ce(t,e){if(t.dynamicScreenSpaceError&&t._dynamicScreenSpaceErrorComputedDensity){var n=t._dynamicScreenSpaceErrorComputedDensity,r=t.dynamicScreenSpaceErrorFactor;return function(t,e){var n=t*e;return 1-Math.exp(-n*n)}(e,n)*r}return 0}var Ie=6378137,Re=Math.PI/2;function ke(t){var e=Object(y.a)(t,3),n=e[0],r=e[1],i=e[2],o=Object(gt.s)(n),a=Object(gt.s)(r),s=1+i/Ie,u=s*Math.cos(a);return[n=u*Math.cos(o),r=u*Math.sin(o),i=s*Math.sin(a)]}function je(t,e){var n=Object(y.a)(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=Object(y.a)(e,3),u=s[0],c=s[1],l=s[2],f=ke([u,c,void 0===l?0:l]),h=ke([r,i,a]),p=h[0]-f[0],d=h[1]-f[1],g=h[2]-f[2];return p*p+d*d+g*g}function Le(t,e){var n=e.viewport,r=t.header.mbs[1],i=t.header.mbs[0],o=t.header.mbs[2],a=t.header.mbs[3],s=[i,r,o],u=je(n.unprojectPosition(n.cameraPosition),s),c=a/Ie,l=u-c*c;if(l<=0)return 170141175e30;var f=function(t,e){var n=e.viewport,r=n.width,i=n.height,o=n.pixelProjectionMatrix,a=Math.tan(Math.atan(Math.sqrt(1/(o[0]*o[0])+1/(o[5]*o[5]))));return Math.sqrt(i*i+r*r)/a}(0,e);return f*=c/Math.sqrt(l)/n.scale}function Ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fe=new ht.a;var Be=function(){function t(e,n,r){Object(s.a)(this,t),Object(Wt.a)("object"===Object(G.a)(n)),this.header=n,this.tileset=e,this.id=n.id,this.url=n.url,this.parent=r,this.refine=this._getRefine(n.refine),this.type=n.type,this.contentUrl=n.contentUrl,this.lodMetricType=null,this.lodMetricValue=null,this.boundingVolume=null,this.content=null,this.contentState=ue,this.gpuMemoryUsageInBytes=0,this.children=[],this.depth=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this._initializeLodMetric(n),this._initializeTransforms(n),this._initializeBoundingVolumes(n),this._initializeContent(n),this._initializeRenderingState(n),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this._getPriority=this._getPriority.bind(this),Object.seal(this)}return Object(p.a)(t,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return null===this.header}},{key:"getScreenSpaceError",value:function(t,e){switch(this.tileset.type){case Ae:return Le(this,t);case be:return function(t,e,n){var r=t.tileset,i=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,o=n?i:t.lodMetricValue;if(0===o)return 0;var a=Math.max(t._distanceToCamera,1e-7),s=o*e.height/(a*e.sseDenominator);return s-Ce(r,a)}(this,t,e);default:return console.error("Unsupported tileset type"),null}}},{key:"_getPriority",value:function(){return this.isVisible?this.contentState===ue?-1:Math.max(1e7-this._priority,0)||0:-1}},{key:"loadContent",value:function(){var t=Object(rt.a)(et.a.mark((function t(){var e,n,r,i,o;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasEmptyContent){t.next=2;break}return t.abrupt("return",!1);case 2:if(!this.content){t.next=4;break}return t.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=ce,t.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority);case 9:if(e=t.sent){t.next=13;break}return this.contentState=ue,t.abrupt("return",!1);case 13:return t.prev=13,n=this.tileset.getTileUrl(this.contentUrl),r=this.tileset.fetchOptions,i=this.tileset.loader,o=De(De({},r),{},Object(nt.a)({},i.id,{tile:this.header,tileset:this.tileset.tileset,isTileset:"auto",isTileHeader:!1,assetGltfUpAxis:this.tileset.asset.gltfUpAxis})),t.next=20,Object(lt.a)(n,i,o);case 20:return this.content=t.sent,this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this,Xt.a.dirname(this.contentUrl)),this.contentState=le,this._onContentLoaded(),t.abrupt("return",!0);case 27:throw t.prev=27,t.t0=t.catch(13),this.contentState=he,t.t0;case 31:return t.prev=31,e.done(),t.finish(31);case 34:case"end":return t.stop()}}),t,this,[[13,27,31,34]])})));return function(){return t.apply(this,arguments)}}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.contentState=ue,!0}},{key:"updateVisibility",value:function(t){if(this._frameNumber!==t.frameNumber){var e=this.parent,n=e?e.computedTransform:this.tileset.modelMatrix,r=e?e._visibilityPlaneMask:$t.c.MASK_INDETERMINATE;this._updateTransform(n),this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,r),this._visible=this._visibilityPlaneMask!==$t.c.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._priority=this.lodMetricValue,this._frameNumber=t.frameNumber}}},{key:"visibility",value:function(t,e){var n=t.cullingVolume,r=this.boundingVolume;return n.computeVisibilityWithPlaneMask(r,e)}},{key:"contentVisibility",value:function(t){return!0}},{key:"distanceToTile",value:function(t){var e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(t){var e=t.camera,n=this.boundingVolume;return Fe.subVectors(n.center,e.position),e.direction.dot(Fe)}},{key:"insideViewerRequestVolume",value:function(t){var e=this._viewerRequestVolume;return!e||0===e.distanceToCamera(t)}},{key:"_initializeLodMetric",value:function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(t){this.transform=t.transform?new ft.a(t.transform):new ft.a;var e=this.parent,n=this.tileset,r=e&&e.computedTransform?e.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new ft.a(r).multiplyRight(this.transform);var i=e&&e._initialTransform?e._initialTransform.clone():new ft.a;this._initialTransform=new ft.a(i).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}},{key:"_initializeContent",value:function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=ue,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(t){this.depth=t.level,this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=$t.c.MASK_INDETERMINATE,this._visible=!1,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(t){return t||this.parent&&this.parent.refine||de}},{key:"_isTileset",value:function(){return-1!==this.contentUrl.indexOf(".json")}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset.traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(t){this.boundingVolume=Pe(t.boundingVolume,this.computedTransform,this.boundingVolume);var e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=Pe(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=Pe(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ft.a,e=t.clone().multiplyRight(this.transform),n=!e.equals(this.computedTransform);n&&(this.computedTransform=e,this._updateBoundingVolume(this.header))}},{key:"updateExpiration",value:function(){if(void 0!==(e=this._expireDate)&&null!==e&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=fe,this._expiredContent=this.content)}var e}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===le||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===ue}},{key:"contentExpired",get:function(){return this.contentState===fe}},{key:"contentFailed",get:function(){return this.contentState===he}},{key:"extras",get:function(){return this.header.extras}}]),t}(),ze=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(s.a)(this,t),this._array=new Array(e),this._map=new Map,this._length=e}return Object(p.a)(t,[{key:"get",value:function(t){return Object(Wt.a)(t<this._array.length),this._array[t]}},{key:"set",value:function(t,e){Object(Wt.a)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)}},{key:"delete",value:function(t){var e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(t){if(!this._map.has(t)){var e=this.length++;this._array[e]=t,this._map.set(t,e)}}},{key:"pop",value:function(){var t=this._array[--this.length];return this._map.delete(t),t}},{key:"reserve",value:function(t){Object(Wt.a)(t>=0),t>this._array.length&&(this._array.length=t)}},{key:"resize",value:function(t){Object(Wt.a)(t>=0),this.length=t}},{key:"trim",value:function(t){null!==t&&void 0!==t||(t=this.length),this._array.length=t}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(t){return this._map.has(t)}},{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}}]),t}();function Ue(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Ge(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var He={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2},We=function(){function t(e){Object(s.a)(this,t),this.options=qe(qe({},He),e),this._traversalStack=new ze,this._emptyTraversalStack=new ze,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return Object(p.a)(t,[{key:"traverse",value:function(t,e,n){this.root=t,this.options=qe(qe({},this.options),n),this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(t,e){var n=this._traversalStack;for(n.push(t);n.length>0;){var r=n.pop(),i=!1;this.canTraverse(r,e)&&(this.updateChildTiles(r,e),i=this.updateAndPushChildren(r,e,n));var o=r.parent,a=Boolean(!o||o._shouldRefine),s=!i;r.hasRenderContent?r.refine===pe?(this.loadTile(r,e),this.selectTile(r,e)):r.refine===de&&(this.loadTile(r,e),s&&this.selectTile(r,e)):(this.emptyTiles[r.id]=r,this.loadTile(r,e),s&&this.selectTile(r,e)),this.touchTile(r,e),r._shouldRefine=i&&a}this.options.onTraversalEnd&&this.options.onTraversalEnd(e)}},{key:"updateChildTiles",value:function(t,e){var n,r=Ue(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.updateTile(i,e)}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"updateAndPushChildren",value:function(t,e,n){var r=this.options,i=r.loadSiblings,o=r.skipLevelOfDetail,a=t.children;a.sort(this.compareDistanceToCamera);var s,u=!o&&t.refine===de&&t.hasRenderContent,c=!1,l=Ue(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(f.isVisibleAndInRequestVolume?(n.find(f)&&n.delete(f),n.push(f),c=!0):(u||i)&&(this.loadTile(f,e),this.touchTile(f,e)),u){var h=void 0;if(!(h=!!f._inRequestVolume&&(f.hasRenderContent?f.contentAvailable:this.executeEmptyTraversal(f,e))))return h}}}catch(p){l.e(p)}finally{l.f()}return c}},{key:"updateTile",value:function(t,e){this.updateTileVisibility(t,e)}},{key:"selectTile",value:function(t,e){this.shouldSelectTile(t,e)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)}},{key:"loadTile",value:function(t,e){this.shouldLoadTile(t,e)&&(t._requestedFrame=e.frameNumber,t._priority=this.getPriority(t),this.requestedTiles[t.id]=t)}},{key:"touchTile",value:function(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber}},{key:"canTraverse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(!r&&!t.isVisibleAndInRequestVolume)&&(!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:this.shouldRefine(t,e,n)))}},{key:"shouldLoadTile",value:function(t,e){return t.hasUnloadedContent||t.contentExpired}},{key:"shouldSelectTile",value:function(t,e){return t.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(t,e,n){var r=t._screenSpaceError;return n&&(r=t.getScreenSpaceError(e,!0)),r>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(t,e){t.updateVisibility(e)}},{key:"compareDistanceToCamera",value:function(t,e){return t._distanceToCamera-e._distanceToCamera}},{key:"getPriority",value:function(t){var e=this.options;switch(t.refine){case pe:return t._distanceToCamera;case de:var n=t.parent,r=n&&(!e.skipLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:t._screenSpaceError;return this.root._screenSpaceError-r;default:return Object(Wt.a)(!1)}}},{key:"anyChildrenVisible",value:function(t,e){var n,r=!1,i=Ue(t.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.updateVisibility(e),r=r||o.isVisibleAndInRequestVolume}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"executeEmptyTraversal",value:function(t,e){for(var n=!0,r=this._emptyTraversalStack;r.length>0;){var i=r.pop();this.updateTile(i,e),i.isVisibleAndInRequestVolume||(this.loadTile(i,e),this.touchTile(i,e));var o=!i.hasRenderContent&&this.canTraverse(i,e,!1,!0);if(o||i.contentAvailable||(n=!1),o){var a,s=Ue(i.children.filter((function(t){return t})));try{for(s.s();!(a=s.n()).done;){var u=a.value;r.find(u)&&r.delete(u),r.push(u)}}catch(c){s.e(c)}finally{s.f()}}}return n}}]),t}();function Xe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Ye=function(t){Object(u.a)(n,t);var e=Xe(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"compareDistanceToCamera",value:function(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera}},{key:"updateTileVisibility",value:function(t,e){if(t.updateVisibility(e),t.isVisibleAndInRequestVolume){var n=t.children.length>0;if(t.hasTilesetContent&&n){var r=t.children[0];return this.updateTileVisibility(r,e),void(t._visible=r._visible)}if(this.meetsScreenSpaceErrorEarly(t,e))t._visible=!1;else{var i=t.refine===de,o=t._optimChildrenWithinParent===we;i&&o&&n&&!this.anyChildrenVisible(t,e)&&(t._visible=!1)}}}},{key:"meetsScreenSpaceErrorEarly",value:function(t,e){var n=t.parent;return!(!n||n.hasTilesetContent||n.refine!==pe)&&!this.shouldRefine(t,e,!0)}}]),n}(We),Qe="REQUESTED",Ze="COMPLETED",Ke="ERROR",Je=function(){function t(){Object(s.a)(this,t),this._statusMap={}}return Object(p.a)(t,[{key:"add",value:function(t,e,n,r){var i=this;this._statusMap[e]||(this._statusMap[e]={request:t,callback:n,key:e,frameState:r,status:Qe},t().then((function(t){i._statusMap[e].status=Ze,i._statusMap[e].callback(t,r)})).catch((function(t){i._statusMap[e].status=Ke,n(t)})))}},{key:"update",value:function(t,e){this._statusMap[t]&&(this._statusMap[t].frameState=e)}},{key:"find",value:function(t){return this._statusMap[t]}}]),t}();function $e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$e(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function en(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return nn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var on=function(t){Object(u.a)(n,t);var e=rn(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t))._tileManager=new Je,r}return Object(p.a)(n,[{key:"shouldRefine",value:function(t,e){return t._lodJudge=function(t,e){var n=e.viewport,r=n.metersPerPixel,i=t.header.mbs[1],o=t.header.mbs[0],a=t.header.mbs[2],s=t.header.mbs[3],u=n.height,c=n.width,l=n.latitude,f=n.longitude,h=[f,l],p=[o,i,a],d=[f,i],g=[o,l],y=Math.sqrt(u*u+c*c)*r[0],v=je(h,p),m=.5*u+s/Ie,A=.5*c+s/Ie;if(v>y+s/Ie)return"OUT";if(je(h,d)>m)return"OUT";if(je(h,g)>A)return"OUT";if(0===t.lodMetricValue)return"DIG";var b=Le(t,e);return(b*=Re)<.5?"OUT":!t.header.children||b<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}(t,e),"DIG"===t._lodJudge}},{key:"updateChildTiles",value:function(t,e){var n,r=this,i=t.header.children||[],o=t.children,a=t.tileset,s=en(i);try{var u=function(){var i=n.value,s=o&&o.find((function(t){return t.id===i.id}));if(s)s&&r.updateTile(s,e);else{var u=function(){return r._loadTile(i.id,a)};r._tileManager.find(i.id)?r._tileManager.update(i.id,e):(a.tileset.nodePages&&(u=function(){return a.tileset.nodePagesTile.formTileFromNodePages(i.id)}),r._tileManager.add(u,i.id,(function(e){return r._onTileLoad(e,t)}),e))}};for(s.s();!(n=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}}},{key:"_loadTile",value:function(){var t=Object(rt.a)(et.a.mark((function t(e,n){var r,i,o;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.loader,i=n.getTileUrl("".concat(n.url,"/nodes/").concat(e)),o={i3s:tn(tn({},n.fetchOptions),{},{isTileHeader:!0,loadContent:!1})},t.next=5,Object(lt.a)(i,r,o);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(t,e){var n=this.options.basePath,r=new Be(e.tileset,t,e,n);e.children.push(r);var i=this._tileManager.find(r.id).frameState;this.updateTile(r,i),this._frameNumber===i.frameNumber&&this.executeTraversal(r,i)}}]),n}(We);function an(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return sn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sn(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ln="Tiles In Tileset(s)",fn="Tiles In Memory",hn="Tiles In View",pn="Tiles To Render",dn="Tiles Loaded",gn="Tiles Loading",yn="Tiles Unloaded",vn="Failed Tile Loads",mn="Points",An="Tile Memory Use";var bn={ellipsoid:qt.WGS84,modelMatrix:new ft.a,throttleRequests:!1,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(t,e,n){},maximumScreenSpaceError:8},_n=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),Object(Wt.a)(e),this.options=cn(cn({},bn),n),this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||Xt.a.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.fetchOptions=this.options.fetchOptions||{},this.options.headers&&(this.fetchOptions.headers=this.options.headers),this.options.token&&(this.fetchOptions.token=this.options.token),this.root=null,this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this._traverser=this._initializeTraverser(),this._cache=new Jt,this._requestScheduler=new Yt.a({throttleRequests:this.options.throttleRequests}),this._frameNumber=0,this._updateFrameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._queryParams={},this._queryParamsString=null,this.maximumMemoryUsage=this.options.maximumMemoryUsage,this.gpuMemoryUsageInBytes=0,this.stats=new Ht.a({id:this.url}),this._initializeStats(),this._hasMixedContent=!1,this._maximumScreenSpaceError=this.options.maximumScreenSpaceError,this._properties=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description,this._defaultGeometrySchema=[],this._initializeTileSet(e,this.options)}return Object(p.a)(t,[{key:"isLoaded",value:function(){return 0===this._pendingCount}},{key:"destroy",value:function(){this._destroy()}},{key:"getTileUrl",value:function(t){return t.startsWith("data:")?t:"".concat(t).concat(this.queryParams)}},{key:"update",value:function(t){this._cache.reset(),this._frameNumber++,this._frameState=re(t,this._frameNumber),this._traverser.traverse(this.root,this._frameState,this.options)}},{key:"_onTraversalEnd",value:function(){var t=Object.values(this._traverser.selectedTiles);this._tilesChanged(this.selectedTiles,t)&&this._updateFrameNumber++,this.selectedTiles=t;var e,n=an(this.selectedTiles);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._tiles[r.id]=r}}catch(i){n.e(i)}finally{n.f()}return this._requestedTiles=Object.values(this._traverser.requestedTiles),this._emptyTiles=Object.values(this._traverser.emptyTiles),this._loadTiles(this._frameState),this._unloadTiles(),this._updateStats(),this._updateFrameNumber}},{key:"_tilesChanged",value:function(t,e){if(t.length!==e.length)return!0;var n=new Set(t.map((function(t){return t.id}))),r=new Set(e.map((function(t){return t.id}))),i=t.filter((function(t){return!r.has(t.id)})).length>0;return i=i||e.filter((function(t){return!n.has(t.id)})).length>0}},{key:"_loadTiles",value:function(t){var e,n=an(this._requestedTiles);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.contentUnloaded&&this._loadTile(r,t)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,(function(t,e){return t._unloadTile(e)}))}},{key:"_updateStats",value:function(){var t,e=0,n=0,r=an(this.selectedTiles);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.contentAvailable&&(e++,i.content.pointCount&&(n+=i.content.pointCount))}}catch(o){r.e(o)}finally{r.f()}this.stats.get(hn).count=this.selectedTiles.length,this.stats.get(pn).count=e,this.stats.get(mn).count=n}},{key:"_initializeTileSet",value:function(t){this.root=this._initializeTileHeaders(t,null,this.basePath),this.type===be&&this._initializeCesiumTileset(t),this.type===Ae&&this._initializeI3STileset(t),this._calculateViewProps()}},{key:"_calculateViewProps",value:function(){var t=this.root,e=t.boundingVolume.center;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new ht.a,void(this.zoom=1);this.cartographicCenter=qt.WGS84.cartesianToCartographic(e,new ht.a),this.cartesianCenter=e,this.zoom=function(t){var e=t.halfAxes,n=t.radius,r=t.width,i=t.height;if(e){e.getColumn(0,se);var o=se.len();e.getColumn(1,se);var a=se.len();e.getColumn(2,se);var s=o/2,u=a/2,c=se.len()/2;return(Math.log2(ie/s)+Math.log2(oe/u)+Math.log2(ae/c))/3}return n?Math.log2(ae/n):i&&r?(Math.log2(ie/r)+Math.log2(oe/i))/2:1}(t.boundingVolume)}},{key:"_initializeStats",value:function(){this.stats.get(ln),this.stats.get(gn),this.stats.get(fn),this.stats.get(hn),this.stats.get(pn),this.stats.get(dn),this.stats.get(yn),this.stats.get(vn),this.stats.get(mn,"memory"),this.stats.get(An,"memory")}},{key:"_initializeTileHeaders",value:function(t,e,n){var r=new Be(this,t.root,e,n);if(e&&(e.children.push(r),r.depth=e.depth+1),this.type===be){var i=[];for(i.push(r);i.length>0;){var o=i.pop();this.stats.get(ln).incrementCount();var a,s=an(o.header.children||[]);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=new Be(this,u,o,n);o.children.push(c),c.depth=o.depth+1,i.push(c)}}catch(l){s.e(l)}finally{s.f()}}}return r}},{key:"_initializeTraverser",value:function(){var t;switch(this.type){case be:t=Ye;break;case Ae:t=on;break;default:t=We}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(t){this._destroySubtree(t)}},{key:"_loadTile",value:function(){var t=Object(rt.a)(et.a.mark((function t(e,n){var r;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._onStartTileLoading(),t.next=4,e.loadContent(n);case 4:r=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this._onTileLoadError(e,t.t0);case 10:return t.prev=10,this._onEndTileLoading(),this._onTileLoad(e,r),t.finish(10);case 14:case"end":return t.stop()}}),t,this,[[0,7,10,14]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_onTileLoadError",value:function(t,e){this.stats.get(vn).incrementCount();var n=e.message||e.toString(),r=t.url;console.error("A 3D tile failed to load: ".concat(t.url," ").concat(n)),this.options.onTileError(t,n,r)}},{key:"_onTileLoad",value:function(t,e){e&&(t&&t.content&&function(t,e){Object(Wt.a)(t),Object(Wt.a)(e);var n=e.rtcCenter,r=e.gltfUpAxis,i=t.computedTransform,o=t.boundingVolume.center,a=new ft.a(i);switch(n&&a.translate(n),r){case"Z":break;case"Y":var s=(new ft.a).rotateX(Math.PI/2);a=a.multiplyRight(s);break;case"X":var u=(new ft.a).rotateY(-Math.PI/2);a=a.multiplyRight(u)}e.isQuantized&&a.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);var c=new ht.a(o);e.cartesianModelMatrix=a,e.cartesianOrigin=c;var l=qt.WGS84.cartesianToCartographic(c,new ht.a),f=qt.WGS84.eastNorthUpToFixedFrame(c).invert();e.cartographicModelMatrix=f.multiplyRight(a),e.cartographicOrigin=l,e.modelMatrix=e.cartographicModelMatrix}(t,t.content),this._addTileToCache(t),this.options.onTileLoad(t))}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(gn).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(gn).decrementCount()}},{key:"_addTileToCache",value:function(t){this._cache.add(this,t,(function(e){return e._updateCacheStats(t)}))}},{key:"_updateCacheStats",value:function(t){this.stats.get(dn).incrementCount(),this.stats.get(fn).incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get(An).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(t){this.gpuMemoryUsageInBytes-=t.content.byteLength||0,this.stats.get(fn).decrementCount(),this.stats.get(yn).incrementCount(),this.stats.get(An).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}},{key:"_destroy",value:function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){var e,n=t.pop(),r=an(n.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.push(i)}}catch(o){r.e(o)}finally{r.f()}this._destroyTile(n)}this.root=null}},{key:"_destroySubtree",value:function(t){var e=t,n=[];for(n.push(e);n.length>0;){var r,i=an((t=n.pop()).children);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(a){i.e(a)}finally{i.f()}t!==e&&this._destroyTile(t)}e.children=[]}},{key:"_destroyTile",value:function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}},{key:"_initializeCesiumTileset",value:function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description,this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras}},{key:"_initializeI3STileset",value:function(t){"token"in this.options&&(this._queryParams.token=this.options.token),this._defaultGeometrySchema=t.store.defaultGeometrySchema}},{key:"hasExtension",value:function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(t){for(var e=[],n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e.push("".concat(i,"=").concat(t[i]))}switch(e.length){case 0:return"";case 1:return"?".concat(e[0]);default:return"?".concat(e.join("&"))}}(this._queryParams)),this._queryParamsString}}]),t}(),wn={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"};Object.keys(wn);function xn(t,e,n){Object(Wt.a)(t instanceof ArrayBuffer);var r=new TextDecoder("utf8"),i=new Uint8Array(t,e,n);return r.decode(i)}function En(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new DataView(t);return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}var On,Sn=n(275),Tn=n(67);function Pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cn(t){return In.apply(this,arguments)}function In(){return(In=Object(rt.a)(et.a.mark((function t(e){var n;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.modules||{},On=n.draco3d?On||new Promise((function(t){var e=n.draco3d.createDecoderModule({onModuleLoaded:function(){t({draco:e})}})})):On||Rn(e),t.next=4,On;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rn(t){return kn.apply(this,arguments)}function kn(){return(kn=Object(rt.a)(et.a.mark((function t(e){var n,r,i,o;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.draco&&e.draco.decoderType,t.next="js"===t.t0?3:(t.t0,7);break;case 3:return t.next=5,Object(Sn.a)("draco_decoder.js","draco",e);case 5:return n=t.sent,t.abrupt("break",21);case 7:return t.t1=Promise,t.next=10,Object(Sn.a)("draco_wasm_wrapper.js","draco",e);case 10:return t.t2=t.sent,t.next=13,Object(Sn.a)("draco_decoder.wasm","draco",e);case 13:return t.t3=t.sent,t.t4=[t.t2,t.t3],t.next=17,t.t1.all.call(t.t1,t.t4);case 17:i=t.sent,o=Object(y.a)(i,2),n=o[0],r=o[1];case 21:return n=n||Tn.a.DracoDecoderModule,t.next=24,jn(n,r);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jn(t,e){var n={};return e&&(n.wasmBinary=e),new Promise((function(e){t(Mn(Mn({},n),{},{onModuleLoaded:function(t){return e({draco:t})}}))}))}var Ln=n(276),Nn=0,Dn=1,Fn={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Bn={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},zn=function(){function t(e){Object(s.a)(this,t),this.draco=e,this.drawMode="TRIANGLE",this.metadataQuerier={}}return Object(p.a)(t,[{key:"destroy",value:function(){}},{key:"destroyGeometry",value:function(t){t&&this.draco.destroy(t.dracoGeometry)}},{key:"parseSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.metadataQuerier=new this.draco.MetadataQuerier;var n=new this.draco.DecoderBuffer;n.Init(new Int8Array(t),t.byteLength);var r,i,o,a=new this.draco.Decoder,s={};try{var u=a.GetEncodedGeometryType(n);switch(u){case this.draco.TRIANGULAR_MESH:i=new this.draco.Mesh,r=a.DecodeBufferToMesh(n,i),o={type:Nn,faceCount:i.num_faces(),attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;case this.draco.POINT_CLOUD:i=new this.draco.PointCloud,r=a.DecodeBufferToPointCloud(n,i),o={type:Dn,attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!r.ok()||!i.ptr){var c="DRACO decompression failed: ".concat(r.error_msg());throw i&&this.draco.destroy(i),new Error(c)}s.loaderData={header:o},this._extractDRACOGeometry(a,i,u,s,e);var l=this._getGeometryMetadata(a,i);s.header={vertexCount:o.vertexCount,boundingBox:Object(Ln.a)(s.attributes),metadata:l}}finally{this.draco.destroy(a),this.draco.destroy(n),this.draco.destroy(i),this.draco.destroy(this.metadataQuerier)}return s}},{key:"_extractDRACOGeometry",value:function(t,e,n,r,i){var o=this._getAttributes(t,e,i);if(!o.POSITION)throw new Error("DRACO decompressor: No position attribute found.");return n===this.draco.TRIANGULAR_MESH?(o.indices="TRIANGLE_STRIP"===this.drawMode?this._getMeshStripIndices(t,e):this._getMeshFaceIndices(t,e),r.mode="TRIANGLE_STRIP"===this.drawMode?5:4):r.mode=0,o.indices&&(r.indices={value:o.indices,size:1},delete o.indices),r.attributes=o,r}},{key:"getPositionAttributeMetadata",value:function(t){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var e=new this.draco.AttributeQuantizationTransform;if(e.InitFromAttribute(t)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=e.range(),this.metadata.attributes.position.numQuantizationBits=e.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var n=0;n<3;++n)this.metadata.attributes.position.minValues[n]=e.min_value(n)}this.draco.destroy(e)}},{key:"_getAttributes",value:function(t,e,n){for(var r={},i=e.num_points(),o=0;o<e.num_attributes();o++){var a=t.GetAttribute(e,o),s=this._getAttributeMetadata(t,e,o),u={uniqueId:a.unique_id(),attributeType:a.attribute_type(),dataType:Bn[a.data_type()],size:a.size(),numComponents:a.num_components(),byteOffset:a.byte_offset(),byteStride:a.byte_stride(),normalized:a.normalized(),metadata:s},c=this._deduceAttributeName(u,n),l=this._getAttributeTypedArray(t,e,a,c).typedArray;r[c]={value:l,size:l.length/i,metadata:s}}return r}},{key:"_getMeshFaceIndices",value:function(t,e){for(var n=e.num_faces(),r=new Uint32Array(3*n),i=new this.draco.DracoInt32Array,o=0;o<n;++o){t.GetFaceFromMesh(e,o,i);var a=3*o;r[a]=i.GetValue(0),r[a+1]=i.GetValue(1),r[a+2]=i.GetValue(2)}return this.draco.destroy(i),r}},{key:"_getMeshStripIndices",value:function(t,e){var n=new this.draco.DracoInt32Array;t.GetTriangleStripsFromMesh(e,n);for(var r=new Uint32Array(n.size()),i=0;i<n.size();++i)r[i]=n.GetValue(i);return this.draco.destroy(n),r}},{key:"_getAttributeTypedArray",value:function(t,e,n,r){if(0===n.ptr){var i="DRACO decode bad attribute ".concat(r);throw new Error(i)}var o,a,s=Bn[n.data_type()],u=n.num_components(),c=e.num_points()*u;switch(s){case Float32Array:o=new this.draco.DracoFloat32Array,t.GetAttributeFloatForAllPoints(e,n,o),a=new Float32Array(c);break;case Int8Array:o=new this.draco.DracoInt8Array,t.GetAttributeInt8ForAllPoints(e,n,o),a=new Int8Array(c);break;case Int16Array:o=new this.draco.DracoInt16Array,t.GetAttributeInt16ForAllPoints(e,n,o),a=new Int16Array(c);break;case Int32Array:o=new this.draco.DracoInt32Array,t.GetAttributeInt32ForAllPoints(e,n,o),a=new Int32Array(c);break;case Uint8Array:o=new this.draco.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(e,n,o),a=new Uint8Array(c);break;case Uint16Array:o=new this.draco.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(e,n,o),a=new Uint16Array(c);break;case Uint32Array:o=new this.draco.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(e,n,o),a=new Uint32Array(c);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var l=0;l<c;l++)a[l]=o.GetValue(l);return this.draco.destroy(o),{typedArray:a,components:u}}},{key:"_deduceAttributeName",value:function(t,e){var n=e.extraAttributes,r=void 0===n?{}:n;if(r&&"object"===Object(G.a)(r))for(var i=0,o=Object.entries(r);i<o.length;i++){var a=Object(y.a)(o[i],2),s=a[0];if(a[1]===t.uniqueId)return s}for(var u in Fn){var c=this.draco[u];if(t.attributeType===c)return Fn[u]}if(t.metadata){var l=e.attributeNameEntry||"name";if(t.metadata[l])return t.metadata[l].string}return"CUSTOM_ATTRIBUTE_".concat(t.uniqueId)}},{key:"_getGeometryMetadata",value:function(t,e){var n=t.GetMetadata(e);return this._queryDracoMetadata(n)}},{key:"_getAttributeMetadata",value:function(t,e,n){var r=t.GetAttributeMetadata(e,n);return this._queryDracoMetadata(r)}},{key:"_queryDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var e={},n=this.metadataQuerier.NumEntries(t),r=0;r<n;r++){var i=this.metadataQuerier.GetEntryName(t,r);e[i]={int:this.metadataQuerier.GetIntEntry(t,i),string:this.metadataQuerier.GetStringEntry(t,i),double:this.metadataQuerier.GetDoubleEntry(t,i),intArray:this.metadataQuerier.GetIntEntryArray(t,i)}}return e}},{key:"decode",value:function(t,e){return this.parseSync(t,e)}}]),t}();function Un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Un(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vn="2.3.7",qn=Gn(Gn({},{id:"draco",name:"Draco",version:Vn,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"===("undefined"===typeof WebAssembly?"undefined":Object(G.a)(WebAssembly))?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@".concat(Vn,"/dist/draco-loader.worker.js"),localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js",extraAttributes:{}}}}),{},{parse:function(t,e,n,r){return Hn.apply(this,arguments)}});function Hn(){return(Hn=Object(rt.a)(et.a.mark((function t(e,n,r,i){var o,a,s;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Cn(n);case 2:return o=t.sent,a=o.draco,s=new zn(a),t.prev=5,t.abrupt("return",s.parseSync(e,Gn({extraAttributes:n.draco&&n.draco.extraAttributes||null},n.parseOptions||{})));case 7:return t.prev=7,s.destroy(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))).apply(this,arguments)}function Wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wn(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yn,Qn={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Zn=Xn(Xn({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6}),Qn),Kn=(Yn={},Object(nt.a)(Yn,Qn.DOUBLE,Float64Array),Object(nt.a)(Yn,Qn.FLOAT,Float32Array),Object(nt.a)(Yn,Qn.UNSIGNED_SHORT,Uint16Array),Object(nt.a)(Yn,Qn.UNSIGNED_INT,Uint32Array),Object(nt.a)(Yn,Qn.UNSIGNED_BYTE,Uint8Array),Object(nt.a)(Yn,Qn.BYTE,Int8Array),Object(nt.a)(Yn,Qn.SHORT,Int16Array),Object(nt.a)(Yn,Qn.INT,Int32Array),Yn),Jn={DOUBLE:Qn.DOUBLE,FLOAT:Qn.FLOAT,UNSIGNED_SHORT:Qn.UNSIGNED_SHORT,UNSIGNED_INT:Qn.UNSIGNED_INT,UNSIGNED_BYTE:Qn.UNSIGNED_BYTE,BYTE:Qn.BYTE,SHORT:Qn.SHORT,INT:Qn.INT},$n="Failed to convert GL type",tr=function(){function t(){Object(s.a)(this,t)}return Object(p.a)(t,null,[{key:"fromTypedArray",value:function(t){for(var e in t=ArrayBuffer.isView(t)?t.constructor:t,Kn){if(Kn[e]===t)return e}throw new Error($n)}},{key:"fromName",value:function(t){var e=Jn[t];if(!e)throw new Error($n);return e}},{key:"getArrayType",value:function(t){switch(t){case Qn.UNSIGNED_SHORT_5_6_5:case Qn.UNSIGNED_SHORT_4_4_4_4:case Qn.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var e=Kn[t];if(!e)throw new Error($n);return e}}},{key:"getByteSize",value:function(e){return t.getArrayType(e).BYTES_PER_ELEMENT}},{key:"validate",value:function(e){return Boolean(t.getArrayType(e))}},{key:"createTypedArray",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;void 0===i&&(i=(n.byteLength-r)/t.getByteSize(e));var o=t.getArrayType(e);return new o(n,r,i)}}]),t}(),er=function(){function t(e,n){Object(s.a)(this,t),this.json=e,this.buffer=n,this.featuresLength=0,this._cachedTypedArrays={}}return Object(p.a)(t,[{key:"getExtension",value:function(t){return this.json.extensions&&this.json.extensions[t]}},{key:"hasProperty",value:function(t){return Boolean(this.json[t])}},{key:"getGlobalProperty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn.UNSIGNED_INT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.json[t];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(t,e,n,1,r.byteOffset):r}},{key:"getPropertyArray",value:function(t,e,n){var r=this.json[t];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(e=tr.fromName(r.componentType)),this._getTypedArrayFromBinary(t,e,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(t,e,r)}},{key:"getProperty",value:function(t,e,n,r,i){var o=this.json[t];if(!o)return o;var a=this.getPropertyArray(t,e,n);if(1===n)return a[r];for(var s=0;s<n;++s)i[s]=a[n*r+s];return i}},{key:"_getTypedArrayFromBinary",value:function(t,e,n,r,i){var o=this._cachedTypedArrays,a=o[t];return a||(a=tr.createTypedArray(e,this.buffer.buffer,this.buffer.byteOffset+i,r*n),o[t]=a),a}},{key:"_getTypedArrayFromArray",value:function(t,e,n){var r=this._cachedTypedArrays,i=r[t];return i||(i=tr.createTypedArray(e,n),r[t]=i),i}}]),t}(),nr=n(18),rr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ir={SCALAR:function(t,e){return t[e]},VEC2:function(t,e){return[t[2*e+0],t[2*e+1]]},VEC3:function(t,e){return[t[3*e+0],t[3*e+1],t[3*e+2]]},VEC4:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT2:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT3:function(t,e){return[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]]},MAT4:function(t,e){return[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]}},or={SCALAR:function(t,e,n){e[n]=t},VEC2:function(t,e,n){e[2*n+0]=t[0],e[2*n+1]=t[1]},VEC3:function(t,e,n){e[3*n+0]=t[0],e[3*n+1]=t[1],e[3*n+2]=t[2]},VEC4:function(t,e,n){e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT2:function(t,e,n){e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT3:function(t,e,n){e[9*n+0]=t[0],e[9*n+1]=t[1],e[9*n+2]=t[2],e[9*n+3]=t[3],e[9*n+4]=t[4],e[9*n+5]=t[5],e[9*n+6]=t[6],e[9*n+7]=t[7],e[9*n+8]=t[8],e[9*n+9]=t[9]},MAT4:function(t,e,n){e[16*n+0]=t[0],e[16*n+1]=t[1],e[16*n+2]=t[2],e[16*n+3]=t[3],e[16*n+4]=t[4],e[16*n+5]=t[5],e[16*n+6]=t[6],e[16*n+7]=t[7],e[16*n+8]=t[8],e[16*n+9]=t[9],e[16*n+10]=t[10],e[16*n+11]=t[11],e[16*n+12]=t[12],e[16*n+13]=t[13],e[16*n+14]=t[14],e[16*n+15]=t[15]}};function ar(t){throw new TypeError('"'+t+'" is read-only')}var sr=function(t){return void 0!==t};function ur(t,e,n){if(!e)return null;var r=t.getExtension("3DTILES_batch_table_hierarchy"),i=e.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(t,e){var n,r,i,o,a=t.instancesLength,s=t.classes,u=t.classIds,c=t.parentCounts,l=t.parentIds,f=a;sr(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),ar("classIds"),u=i.createArrayBufferView(e.buffer,e.byteOffset+u.byteOffset,a));if(sr(c))for(sr(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),ar("parentCounts"),c=i.createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,a)),o=new Uint16Array(a),ar("parentIdsLength"),f=0,n=0;n<a;++n)o[n]=f,f+=(ar("parentIdsLength"),c[n]);sr(l)&&sr(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),ar("parentIds"),l=i.createArrayBufferView(e.buffer,e.byteOffset+l.byteOffset,f));var h=s.length;for(n=0;n<h;++n){var p=s[n].length,d=s[n].instances,g=getBinaryProperties(p,d,e);s[n].instances=combine(g,d)}var y=new Array(h).fill(0),v=new Uint16Array(a);for(n=0;n<a;++n)r=u[n],v[n]=y[r],++y[r];var m={classes:s,classIds:u,classIndexes:v,parentCounts:c,parentIndexes:o,parentIds:l};return function(t){for(var e=t.classIds.length,n=0;n<e;++n)lr(t,n,stack)}(m),m}(r,n):null}function cr(t,e,n){if(t){var r=t.parentCounts;return t.parentIds?n(t,e):r>0?function(t,e,n){var r=t.classIds,i=t.parentCounts,o=t.parentIds,a=t.parentIndexes,s=r.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,l=scratchStack;l.length=0,l.push(e);for(;l.length>0;)if(u[e=l.pop()]!==c){u[e]=c;var f=n(t,e);if(sr(f))return f;for(var h=i[e],p=a[e],d=0;d<h;++d){var g=o[p+d];g!==e&&l.push(g)}}return null}(t,e,n):function(t,e,n){var r=!0;for(;r;){var i=n(t,e);if(sr(i))return i;var o=t.parentIds[e];r=o!==e,e=o}throw new Error("traverseHierarchySingleParent")}(t,e,n)}}function lr(t,e,n){var r=t.parentCounts,i=t.parentIds,o=t.parentIndexes,a=t.classIds.length;if(sr(i)){assert(e<a,"Parent index ".concat(e," exceeds the total number of instances: ").concat(a)),assert(-1===n.indexOf(e),"Circular dependency detected in the batch table hierarchy."),n.push(e);for(var s=sr(r)?r[e]:1,u=sr(r)?o[e]:e,c=0;c<s;++c){var l=i[u+c];l!==e&&lr(t,l,n)}n.pop(e)}}function fr(t){return void 0!==t&&null!==t}var hr=function(t,e){return t},pr={HIERARCHY:!0,extensions:!0,extras:!0},dr=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(var o in Object(s.a)(this,t),Object(Wt.a)(r>=0),this.json=e||{},this.binary=n,this.featureCount=r,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)pr[o]||(this._properties[o]=this.json[o]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=ur(this,this.json,this.binary))}return Object(p.a)(t,[{key:"getExtension",value:function(t){return this.json&&this.json.extensions&&this.json.extensions[t]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(t,e){return this._checkBatchId(t),Object(Wt.a)("string"===typeof e,e),!!this._hierarchy&&fr(cr(this._hierarchy,t,(function(t,n){var r=t.classIds[n];return t.classes[r].name===e})))}},{key:"isExactClass",value:function(t,e){return Object(Wt.a)("string"===typeof e,e),this.getExactClassName(t)===e}},{key:"getExactClassName",value:function(t){if(this._checkBatchId(t),this._hierarchy){var e=this._hierarchy.classIds[t];return this._hierarchy.classes[e].name}}},{key:"hasProperty",value:function(t,e){return this._checkBatchId(t),Object(Wt.a)("string"===typeof e,e),fr(this._properties[e])||this._hasPropertyInHierarchy(t,e)}},{key:"getPropertyNames",value:function(t,e){var n;this._checkBatchId(t),(e=fr(e)?e:[]).length=0;var r=Object.keys(this._properties);return(n=e).push.apply(n,Object(nr.a)(r)),this._hierarchy&&this._getPropertyNamesInHierarchy(t,e),e}},{key:"getProperty",value:function(t,e){if(this._checkBatchId(t),Object(Wt.a)("string"===typeof e,e),this._binaryProperties){var n=this._binaryProperties[e];if(fr(n))return this._getBinaryProperty(n,t)}var r=this._properties[e];if(fr(r))return hr(r[t]);if(this._hierarchy){var i=this._getHierarchyProperty(t,e);if(fr(i))return i}}},{key:"setProperty",value:function(t,e,n){var r=this.featureCount;if(this._checkBatchId(t),Object(Wt.a)("string"===typeof e,e),this._binaryProperties){var i=this._binaryProperties[e];if(i)return void this._setBinaryProperty(i,t,n)}if(!this._hierarchy||!this._setHierarchyProperty(this,t,e,n)){var o=this._properties[e];fr(o)||(this._properties[e]=new Array(r),o=this._properties[e]),o[t]=hr(n)}}},{key:"_checkBatchId",value:function(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(t,e){return t.unpack(t.typedArray,e)}},{key:"_setBinaryProperty",value:function(t,e,n){t.pack(n,t.typedArray,e)}},{key:"_initializeBinaryProperties",value:function(){var t=null;for(var e in this._properties){var n=this._properties[e],r=this._initializeBinaryProperty(e,n);r&&((t=t||{})[e]=r)}return t}},{key:"_initializeBinaryProperty",value:function(t,e){if("byteOffset"in e){var n=e;Object(Wt.a)(this.binary,"Property ".concat(t," requires a batch table binary.")),Object(Wt.a)(n.type,"Property ".concat(t," requires a type."));var r=function(t,e,n,r){var i=t.componentType;Object(Wt.a)(t.componentType);var o="string"===typeof i?tr.fromName(i):i,a=rr[t.type],s=ir[t.type],u=or[t.type];return n+=t.byteOffset,{values:tr.createTypedArray(o,e,n,a*r),type:o,size:a,unpacker:s,packer:u}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(t,e){if(!this._hierarchy)return!1;var n=cr(this._hierarchy,t,(function(t,n){var r=t.classIds[n];return fr(t.classes[r].instances[e])}));return fr(n)}},{key:"_getPropertyNamesInHierarchy",value:function(t,e){cr(this._hierarchy,t,(function(t,n){var r=t.classIds[n],i=t.classes[r].instances;for(var o in i)i.hasOwnProperty(o)&&-1===e.indexOf(o)&&e.push(o)}))}},{key:"_getHierarchyProperty",value:function(t,e){var n=this;return cr(this._hierarchy,t,(function(t,r){var i=t.classIds[r],o=t.classes[i],a=t.classIndexes[r],s=o.instances[e];return fr(s)?fr(s.typedArray)?n._getBinaryProperty(s,a):hr(s[a]):null}))}},{key:"_setHierarchyProperty",value:function(t,e,n,r){var i=this,o=cr(this._hierarchy,e,(function(t,o){var a=t.classIds[o],s=t.classes[a],u=t.classIndexes[o],c=s.instances[n];return!!fr(c)&&(Object(Wt.a)(o===e,'Inherited property "'.concat(n,'" is read-only.')),fr(c.typedArray)?i._setBinaryProperty(c,u,r):c[u]=hr(r),!0)}));return fr(o)}}]),t}();function gr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new DataView(e);if(t.magic=r.getUint32(n,!0),n+=4,t.version=r.getUint32(n,!0),n+=4,t.byteLength=r.getUint32(n,!0),n+=4,1!==t.version)throw new Error("3D Tile Version ".concat(t.version," not supported"));return n}function yr(t,e,n){var r=new DataView(e);return t.header=t.header||{},t.header.featureTableJsonByteLength=r.getUint32(n,!0),n+=4,t.header.featureTableBinaryByteLength=r.getUint32(n,!0),n+=4,t.header.batchTableJsonByteLength=r.getUint32(n,!0),n+=4,t.header.batchTableBinaryByteLength=r.getUint32(n,!0),n+=4}function vr(t,e,n,r){return n=function(t,e,n,r){var i=t.header,o=i.featureTableJsonByteLength,a=i.featureTableBinaryByteLength;if(t.featureTableJson={BATCH_LENGTH:0},o>0){var s=xn(e,n,o);t.featureTableJson=JSON.parse(s)}return n+=o,t.featureTableBinary=new Uint8Array(e,n,a),n+=a}(t,e,n),n=function(t,e,n,r){var i=t.header,o=i.batchTableJsonByteLength,a=i.batchTableBinaryByteLength;if(o>0){var s=xn(e,n,o);t.batchTableJson=JSON.parse(s),n+=o,a>0&&(t.batchTableBinary=new Uint8Array(e,n,a),t.batchTableBinary=new Uint8Array(t.batchTableBinary),n+=a)}return n}(t,e,n)}function mr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=t>>11&31,r=t>>5&63,i=31&t;return e[0]=n<<3,e[1]=r<<2,e[2]=i<<3,e}function Ar(t,e,n){if(!e&&(!t||!t.batchIds||!n))return null;var r=t.batchIds,i=t.isRGB565,o=t.pointCount;if(r&&n){for(var a=new Uint8ClampedArray(3*o),s=0;s<o;s++){var u=r[s],c=n.getProperty(u,"dimensions").map((function(t){return 255*t}));a[3*s]=c[0],a[3*s+1]=c[1],a[3*s+2]=c[2]}return{type:Zn.UNSIGNED_BYTE,value:a,size:3,normalized:!0}}if(i){for(var l=new Uint8ClampedArray(3*o),f=0;f<o;f++){var h=mr(e[f]);l[3*f]=h[0],l[3*f+1]=h[1],l[3*f+2]=h[2]}return{type:Zn.UNSIGNED_BYTE,value:l,size:3,normalized:!0}}return e&&e.length===3*o?{type:Zn.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:Zn.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}var br=n(320);function _r(t,e){if(!t)throw new Error("math.gl assertion failed. ".concat(e))}new br.a,new ht.a,new br.a,new br.a,new Uint8Array(1);function wr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Object(gt.d)(t,0,e)/e*2-1}function xr(t){return t<0?-1:1}function Er(t,e,n,r){if(_r(r),t<0||t>n||e<0||e>n)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(n));if(r.x=wr(t,n),r.y=wr(e,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){var i=r.x;r.x=(1-Math.abs(r.y))*xr(i),r.y=(1-Math.abs(i))*xr(r.y)}return r.normalize()}function Or(t,e,n){return Er(t,e,255,n)}var Sr=new ht.a;function Tr(t,e,n){return t.isQuantized?n["3d-tiles"]&&n["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,function(t,e){for(var n=new ht.a,r=new Float32Array(3*t.pointCount),i=0;i<t.pointCount;i++)n.set(e[3*i],e[3*i+1],e[3*i+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(r,3*i);return r}(t,e)):{type:Zn.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}function Pr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cr(t,e,n,r,i){return Ir.apply(this,arguments)}function Ir(){return(Ir=Object(rt.a)(et.a.mark((function t(e,n,r,i,o){var a,s,u;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=gr(e,n,r),r=yr(e,n,r),r=vr(e,n,r),Rr(e),a=kr(e),s=a.featureTable,u=a.batchTable,t.next=7,Dr(e,s,u,i,o);case 7:return jr(e,s,i),Lr(e,s,u),Nr(e,s),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rr(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function kr(t){var e=new er(t.featureTableJson,t.featureTableBinary),n=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=n,t.featuresLength=n,t.pointsLength=n,t.pointCount=n,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",Zn.FLOAT,3);var r=function(t,e){var n=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",Zn.UNSIGNED_SHORT,1),t.batchIds)){var r=e.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=t.batchTableJson,o=t.batchTableBinary;n=new dr(i,o,r)}return n}(t,e);return{featureTable:e,batchTable:r}}function jr(t,e,n){if(!t.attributes.positions)if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",Zn.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){var r=e.getPropertyArray("POSITION_QUANTIZED",Zn.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Zn.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Zn.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=Tr(t,r,n)}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function Lr(t,e,n){if(!t.attributes.colors){var r=null;e.hasProperty("RGBA")?(r=e.getPropertyArray("RGBA",Zn.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?r=e.getPropertyArray("RGB",Zn.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(r=e.getPropertyArray("RGB565",Zn.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=Ar(t,r,n)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",Zn.UNSIGNED_BYTE,4))}function Nr(t,e){if(!t.attributes.normals){var n=null;e.hasProperty("NORMAL")?n=e.getPropertyArray("NORMAL",Zn.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(n=e.getPropertyArray("NORMAL_OCT16P",Zn.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=function(t,e){if(!e)return null;if(t.isOctEncoded16P){for(var n=new Float32Array(3*t.pointsLength),r=0;r<t.pointsLength;r++)Or(e[2*r],e[2*r+1],Sr),Sr.toArray(n,3*r);return{type:Zn.FLOAT,size:2,value:n}}return{type:Zn.FLOAT,size:2,value:e}}(t,n)}}function Dr(t,e,n,r,i){return Fr.apply(this,arguments)}function Fr(){return(Fr=Object(rt.a)(et.a.mark((function t(e,n,r,i,o){var a,s,u,c,l,f,h,p;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((c=e.batchTableJson&&e.batchTableJson.extensions&&e.batchTableJson.extensions["3DTILES_draco_point_compression"])&&(u=c.properties),!(l=n.getExtension("3DTILES_draco_point_compression"))){t.next=15;break}if(s=l.properties,f=l.byteOffset,h=l.byteLength,s&&Number.isFinite(f)&&h){t.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:a=e.featureTableBinary.slice(f,f+h),e.hasPositions=Number.isFinite(s.POSITION),e.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),e.hasNormals=Number.isFinite(s.NORMAL),e.hasBatchIds=Number.isFinite(s.BATCH_ID),e.isTranslucent=Number.isFinite(s.RGBA);case 15:if(a){t.next=17;break}return t.abrupt("return",!0);case 17:return p={buffer:a,properties:Mr(Mr({},s),u),featureTableProperties:s,batchTableProperties:u,dequantizeInShader:!1},t.next=20,Br(e,p,i,o);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Br(t,e,n,r){return zr.apply(this,arguments)}function zr(){return(zr=Object(rt.a)(et.a.mark((function t(e,n,r,i){var o,a,s,u,c,l,f,h,p,d,g,y,v,m;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=i.parse,t.next=3,o(n.buffer,qn,{draco:{extraAttributes:n.batchTableProperties||{}}});case 3:if(a=t.sent,s=a.attributes.POSITION&&a.attributes.POSITION.value,u=a.attributes.COLOR_0&&a.attributes.COLOR_0.value,c=a.attributes.NORMAL&&a.attributes.NORMAL.value,l=a.attributes.BATCH_ID&&a.attributes.BATCH_ID.value,f=s&&a.attributes.POSITION.value.quantization,h=c&&a.attributes.NORMAL.value.quantization,f&&(p=a.POSITION.data.quantization,d=p.range,e.quantizedVolumeScale=new ht.a(d,d,d),e.quantizedVolumeOffset=new ht.a(p.minValues),e.quantizedRange=(1<<p.quantizationBits)-1,e.isQuantizedDraco=!0),h&&(e.octEncodedRange=(1<<a.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0),g={},n.batchTableProperties)for(y=0,v=Object.keys(n.batchTableProperties);y<v.length;y++)m=v[y],a.attributes[m]&&a.attributes[m].value&&(g[m.toLowerCase()]=a.attributes[m].value);e.attributes=Mr({positions:s,colors:Ar(e,u),normals:c,batchIds:l},g);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ur=n(650),Gr=n(346),Vr=n(146);function qr(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function Hr(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;var n=e.baseUri||e.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return n.substr(0,n.lastIndexOf("/")+1)+t}function Wr(t,e,n){var r=t.bufferViews[n];qr(r);var i=e[r.buffer];qr(i);var o=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,o,r.byteLength)}var Xr=n(129);var Yr=["SCALAR","VEC2","VEC3","VEC4"],Qr=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]),Zr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kr={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Jr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function $r(t){return Yr[t-1]||Yr[0]}function ti(t){var e=Qr.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function ei(t,e){var n=Jr[t.componentType],r=Zr[t.type],i=Kr[t.componentType],o=t.count*r,a=t.count*r*i;return qr(a>=0&&a<=e.byteLength),{ArrayType:n,length:o,byteLength:a}}var ni=function(){function t(e){if(Object(s.a)(this,t),e instanceof t)return e;e||(e={json:{asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},buffers:[]}),this.byteLength=0,this.gltf=e,qr(this.gltf.json)}return Object(p.a)(t,[{key:"getApplicationData",value:function(t){return this.json[t]}},{key:"getExtraData",value:function(t){return(this.json.extras||{})[t]}},{key:"getExtension",value:function(t){var e=this.getUsedExtensions().find((function(e){return e===t})),n=this.json.extensions||{};return e?n[t]||!0:null}},{key:"getRequiredExtension",value:function(t){return this.getRequiredExtensions().find((function(e){return e===t}))?this.getExtension(t):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(t,e){return(t.extensions||{})[e]}},{key:"getScene",value:function(t){return this.getObject("scenes",t)}},{key:"getNode",value:function(t){return this.getObject("nodes",t)}},{key:"getSkin",value:function(t){return this.getObject("skins",t)}},{key:"getMesh",value:function(t){return this.getObject("meshes",t)}},{key:"getMaterial",value:function(t){return this.getObject("materials",t)}},{key:"getAccessor",value:function(t){return this.getObject("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this.getObject("textures",t)}},{key:"getSampler",value:function(t){return this.getObject("samplers",t)}},{key:"getImage",value:function(t){return this.getObject("images",t)}},{key:"getBufferView",value:function(t){return this.getObject("bufferViews",t)}},{key:"getBuffer",value:function(t){return this.getObject("buffers",t)}},{key:"getObject",value:function(t,e){if("object"===Object(G.a)(e))return e;var n=this.json[t]&&this.json[t][e];if(!n)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(e,"]"));return n}},{key:"getTypedArrayForBufferView",value:function(t){var e=(t=this.getBufferView(t)).buffer,n=this.gltf.buffers[e];qr(n);var r=(t.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,t.byteLength)}},{key:"getTypedArrayForAccessor",value:function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=ei(t,e),i=r.ArrayType,o=r.length;return new i(n,e.byteOffset+t.byteOffset,o)}},{key:"getTypedArrayForImageData",value:function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=e.byteOffset||0;return new Uint8Array(n,r,e.byteLength)}},{key:"addApplicationData",value:function(t,e){return this.json[t]=e,this}},{key:"addExtraData",value:function(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}},{key:"addObjectExtension",value:function(t,e,n){return qr(n),t.extensions=t.extensions||{},t.extensions[e]=n,this.registerUsedExtension(e),this}},{key:"setObjectExtension",value:function(t,e,n){(t.extensions||{})[e]=n}},{key:"removeObjectExtension",value:function(t,e){var n=t.extensions||{},r=n[e];return delete n[e],r}},{key:"addExtension",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qr(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}},{key:"addRequiredExtension",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qr(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}},{key:"registerUsedExtension",value:function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((function(e){return e===t}))||this.json.extensionsUsed.push(t)}},{key:"registerRequiredExtension",value:function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((function(e){return e===t}))||this.json.extensionsRequired.push(t)}},{key:"removeExtension",value:function(t){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t]}},{key:"addMesh",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=this._addAttributes(t),i={primitives:[{attributes:r,indices:e,mode:n}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}},{key:"addPointCloud",value:function(t){var e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}},{key:"addImage",value:function(t,e){e=e||function(t){var e=Object(Xr.a)(t);return e?e.mimeType:null}(t);var n={bufferView:this.addBufferView(t),mimeType:e};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}},{key:"addBufferView",value:function(t){var e=t.byteLength;qr(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var n={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=Object(Vr.c)(e),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(t,e){var n={bufferView:t,type:$r(e.size),componentType:e.componentType,count:e.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},n=this.addBufferView(t),r={size:e.size,componentType:ti(t),count:Math.round(t.length/e.size)};return this.addAccessor(n,Object.assign(r,e))}},{key:"createBinaryChunk",value:function(){if(!this.arrayBuffer){for(var t=this.byteLength,e=new ArrayBuffer(t),n=new Uint8Array(e),r=0,i=0;i<this.sourceBuffers.length;i++){var o=this.sourceBuffers[i];r=Object(Vr.a)(o,n,r)}this.json.buffers[0].byteLength=t,this.arrayBuffer=e,this.sourceBuffers=[]}}},{key:"_removeStringFromArray",value:function(t,e){for(var n=!0;n;){var r=t.indexOf(e);r>-1?t.splice(r,1):n=!1}}},{key:"json",get:function(){return this.gltf.json}}]),t}(),ri="KHR_binary_glTF",ii="KHR_draco_mesh_compression",oi="KHR_lights_punctual",ai="KHR_materials_unlit",si="KHR_techniques_webgl";function ui(t){var e={};for(var n in t){var r=t[n];if("indices"!==n){var i=ci(r);e[n]=i}}return e}function ci(t,e){var n=function(t,e){var n=t,r=1,i=0;t&&t.value&&(n=t.value,r=t.size||1);n&&(ArrayBuffer.isView(n)||(n=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return null;if(Array.isArray(t))return new e(t);if(n&&!(t instanceof e))return new e(t);return t}(n,Float32Array)),i=n.length/r);return{buffer:n,size:r,count:i}}(t),r=n.buffer,i=n.size;return{value:r,size:i,bufferView:null,byteOffset:0,count:n.count,type:$r(i),componentType:ti(r)}}var li=et.a.mark(bi);function fi(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return hi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pi(t,e,n){return di.apply(this,arguments)}function di(){return(di=Object(rt.a)(et.a.mark((function t(e,n,r){var i,o,a,s,u;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.gltf.decompressMeshes){t.next=2;break}return t.abrupt("return");case 2:i=new ni(e),o=[],a=fi(bi(i));try{for(a.s();!(s=a.n()).done;)u=s.value,i.getObjectExtension(u,ii)&&o.push(yi(u,i,n,r))}catch(c){a.e(c)}finally{a.f()}return t.next=8,Promise.all(o);case 8:i.removeExtension(ii);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gi(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new ni(t),i=fi(r.json.meshes||[]);try{for(i.s();!(e=i.n()).done;){var o=e.value;mi(o,n),r.addRequiredExtension(ii)}}catch(a){i.e(a)}finally{i.f()}}function yi(t,e,n,r){return vi.apply(this,arguments)}function vi(){return(vi=Object(rt.a)(et.a.mark((function t(e,n,r,i){var o,a,s,u,c;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.getObjectExtension(e,ii),a=n.getTypedArrayForBufferView(o.bufferView),s=Object(Vr.b)(a.buffer,a.byteOffset),u=i.parse,t.next=6,u(s,qn,r,i);case 6:c=t.sent,e.attributes=ui(c.attributes),c.indices&&(e.indices=ci(c.indices)),Ai(e);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter||!r.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var o=r.DracoWriter.encodeSync({attributes:t}),a=i.parseSync,s=a({attributes:t}),u=r._addFauxAttributes(s.attributes),c=r.addBufferView(o),l={primitives:[{attributes:u,mode:n,extensions:Object(nt.a)({},ii,{bufferView:c,attributes:u})}]};return l}function Ai(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("Empty glTF primitive detected: Draco decompression failure?")}function bi(t){var e,n,r,i,o,a;return et.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=fi(t.json.meshes||[]),s.prev=1,e.s();case 3:if((n=e.n()).done){s.next=24;break}r=n.value,i=fi(r.primitives),s.prev=6,i.s();case 8:if((o=i.n()).done){s.next=14;break}return a=o.value,s.next=12,a;case 12:s.next=8;break;case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(6),i.e(s.t0);case 19:return s.prev=19,i.f(),s.finish(19);case 22:s.next=3;break;case 24:s.next=29;break;case 26:s.prev=26,s.t1=s.catch(1),e.e(s.t1);case 29:return s.prev=29,e.f(),s.finish(29);case 32:case"end":return s.stop()}}),li,null,[[1,26,29,32],[6,16,19,22]])}function _i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return wi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wi(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function wi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xi(t,e){var n=new ni(t),r=n.json,i=n.getExtension(oi);i&&(n.json.lights=i.lights,n.removeExtension(oi));var o,a=_i(r.nodes||[]);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=n.getObjectExtension(s,oi);u&&(s.light=u.light),n.removeObjectExtension(s,oi)}}catch(c){a.e(c)}finally{a.f()}}function Ei(t,e){var n=new ni(t),r=n.json;if(r.lights){var i=n.addExtension(oi);qr(!i.lights),i.lights=r.lights,delete r.lights}if(n.json.lights){var o,a=_i(n.json.lights);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.node;n.addObjectExtension(u,oi,s)}}catch(c){a.e(c)}finally{a.f()}delete n.json.lights}}function Oi(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Si(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Si(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Si(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ti(t,e){var n=new ni(t),r=n.json;n.removeExtension(ai);var i,o=Oi(r.materials||[]);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.extensions&&a.extensions.KHR_materials_unlit&&(a.unlit=!0),n.removeObjectExtension(a,ai)}}catch(s){o.e(s)}finally{o.f()}}function Pi(t,e){var n=new ni(t),r=n.json;if(n.materials){var i,o=Oi(r.materials);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.unlit&&(delete a.unlit,n.addObjectExtension(a,ai,{}),n.addExtension(ai))}}catch(s){o.e(s)}finally{o.f()}}}function Mi(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Ci(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ci(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ci(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ii(t,e){var n=new ni(t),r=n.json,i=n.getExtension(si);if(i){var o,a=function(t,e){var n=t.programs,r=void 0===n?[]:n,i=t.shaders,o=void 0===i?[]:i,a=t.techniques,s=void 0===a?[]:a,u=new TextDecoder;return o.forEach((function(t){if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=u.decode(e.getTypedArrayForBufferView(t.bufferView))})),r.forEach((function(t){t.fragmentShader=o[t.fragmentShader],t.vertexShader=o[t.vertexShader]})),s.forEach((function(t){t.program=r[t.program]})),s}(i,n),s=Mi(r.materials||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.getObjectExtension(u,si);c&&(u.technique=Object.assign({},c,a[c.technique]),u.technique.values=ki(u.technique,n)),n.removeObjectExtension(u,si)}}catch(l){s.e(l)}finally{s.f()}n.removeExtension(si)}}function Ri(t,e){}function ki(t,e){var n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((function(e){t.uniforms[e].value&&!(e in n)&&(n[e]=t.uniforms[e].value)})),Object.keys(n).forEach((function(t){"object"===Object(G.a)(n[t])&&void 0!==n[t].index&&(n[t].texture=e.getTexture(n[t].index))})),n}var ji={KHR_draco_mesh_compression:r,KHR_lights_punctual:i,KHR_materials_unlit:o,KHR_techniques_webgl:a};function Li(t){return Ni.apply(this,arguments)}function Ni(){return(Ni=Object(rt.a)(et.a.mark((function t(e){var n,r,i,o,a,s=arguments;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,n.gltf=n.gltf||{},t.t0=et.a.keys(ji);case 4:if((t.t1=t.t0()).done){t.next=14;break}if(i=t.t1.value,o=n.gltf.excludeExtensions||{},i in o&&!o[i]){t.next=12;break}return a=ji[i],t.next=12,a.decode(e,n,r);case 12:t.next=4;break;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Di=1735152710,Fi=1313821514,Bi=5130562,zi=!0;function Ui(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function Gi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new DataView(t),i=n.magic,o=void 0===i?Di:i,a=r.getUint32(e,!1);return a===o||a===Di}function Vi(t,e,n,r){Object(Wt.a)(t.header.byteLength>20);var i=e.getUint32(n+0,zi),o=e.getUint32(n+4,zi);return n+=8,Object(Wt.a)(0===o),Hi(t,e,n,i,r),n+=i,n+=Wi(t,e,n,t.header.byteLength,r)}function qi(t,e,n,r){return Object(Wt.a)(t.header.byteLength>20),function(t,e,n,r){for(;n+8<=t.header.byteLength;){var i=e.getUint32(n+0,zi),o=e.getUint32(n+4,zi);switch(n+=8,o){case Fi:Hi(t,e,n,i,r);break;case Bi:Wi(t,e,n,i,r);break;case 0:r.glb.strict||Hi(t,e,n,i,r);break;case 1:r.glb.strict||Wi(t,e,n,i,r)}n+=Object(Vr.c)(i)}}(t,e,n,r),n+t.header.byteLength}function Hi(t,e,n,r,i){var o=new Uint8Array(e.buffer,n,r),a=new TextDecoder("utf8").decode(o);return t.json=JSON.parse(a),Object(Vr.c)(r)}function Wi(t,e,n,r,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Object(Vr.c)(r)}function Xi(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Yi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yi(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qi(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Zi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zi(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Zi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ki,Ji={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},$i={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},to=function(){function t(e){Object(s.a)(this,t),this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}return Object(p.a)(t,[{key:"normalize",value:function(t,e){this.json=t.json;var n=t.json;switch(n.asset&&n.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(n.asset.version))}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),function(t,e){var n,r=new ni(t),i=r.json,o=Xi(i.images||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=r.removeObjectExtension(a,ri);s&&Object.assign(a,s)}}catch(u){o.e(u)}finally{o.f()}i.buffers&&i.buffers[0]&&delete i.buffers[0].uri,r.removeExtension(ri)}(t),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n)}},{key:"_addAsset",value:function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(t){for(var e in Ji)this._convertTopLevelObjectToArray(t,e)}},{key:"_convertTopLevelObjectToArray",value:function(t,e){var n=t[e];if(n&&!Array.isArray(n))for(var r in t[e]=[],n){var i=n[r];i.id=i.id||r;var o=t[e].length;t[e].push(i),this.idToIndexMap[e][r]=o}}},{key:"_convertObjectIdsToArrayIndices",value:function(t){for(var e in Ji)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));var n,r=Qi(t.textures);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._convertTextureIds(i)}}catch(d){r.e(d)}finally{r.f()}var o,a=Qi(t.meshes);try{for(a.s();!(o=a.n()).done;){var s=o.value;this._convertMeshIds(s)}}catch(d){a.e(d)}finally{a.f()}var u,c=Qi(t.nodes);try{for(c.s();!(u=c.n()).done;){var l=u.value;this._convertNodeIds(l)}}catch(d){c.e(d)}finally{c.f()}var f,h=Qi(t.scenes);try{for(h.s();!(f=h.n()).done;){var p=f.value;this._convertSceneIds(p)}}catch(d){h.e(d)}finally{h.f()}}},{key:"_convertTextureIds",value:function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}},{key:"_convertMeshIds",value:function(t){var e,n=Qi(t.primitives);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.attributes,o=r.indices,a=r.material;for(var s in i)i[s]=this._convertIdToIndex(i[s],"accessor");o&&(r.indices=this._convertIdToIndex(o,"accessor")),a&&(r.material=this._convertIdToIndex(a,"material"))}}catch(u){n.e(u)}finally{n.f()}}},{key:"_convertNodeIds",value:function(t){var e=this;t.children&&(t.children=t.children.map((function(t){return e._convertIdToIndex(t,"node")})))}},{key:"_convertSceneIds",value:function(t){var e=this;t.nodes&&(t.nodes=t.nodes.map((function(t){return e._convertIdToIndex(t,"node")})))}},{key:"_convertIdsToIndices",value:function(t,e){var n,r=Qi(t[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;for(var o in i){var a=i[o],s=this._convertIdToIndex(a,o);i[o]=s}}}catch(u){r.e(u)}finally{r.f()}}},{key:"_convertIdToIndex",value:function(t,e){var n=$i[e];if(n in this.idToIndexMap){var r=this.idToIndexMap[n][t];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(e," with id ").concat(t));return r}return t}},{key:"_updateObjects",value:function(t){var e,n=Qi(this.json.buffers);try{for(n.s();!(e=n.n()).done;){delete e.value.type}}catch(r){n.e(r)}finally{n.f()}}}]),t}();function eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new to).normalize(t,e)}function no(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ro(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?no(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var io={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},oo={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ao={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},so={magFilter:ao.TEXTURE_MAG_FILTER,minFilter:ao.TEXTURE_MIN_FILTER,wrapS:ao.TEXTURE_WRAP_S,wrapT:ao.TEXTURE_WRAP_T},uo=(Ki={},Object(nt.a)(Ki,ao.TEXTURE_MAG_FILTER,ao.LINEAR),Object(nt.a)(Ki,ao.TEXTURE_MIN_FILTER,ao.NEAREST_MIPMAP_LINEAR),Object(nt.a)(Ki,ao.TEXTURE_WRAP_S,ao.REPEAT),Object(nt.a)(Ki,ao.TEXTURE_WRAP_,ao.REPEAT),Ki);var co=function(){function t(){Object(s.a)(this,t)}return Object(p.a)(t,[{key:"postProcess",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.json,r=t.buffers,i=void 0===r?[]:r,o=t.images,a=void 0===o?[]:o,s=t.baseUri,u=void 0===s?"":s;return qr(n),this.baseUri=u,this.json=n,this.buffers=i,this.images=a,this._resolveTree(this.json,e),this.json}},{key:"_resolveTree",value:function(t){var e=this;t.bufferViews&&(t.bufferViews=t.bufferViews.map((function(t,n){return e._resolveBufferView(t,n)}))),t.images&&(t.images=t.images.map((function(t,n){return e._resolveImage(t,n)}))),t.samplers&&(t.samplers=t.samplers.map((function(t,n){return e._resolveSampler(t,n)}))),t.textures&&(t.textures=t.textures.map((function(t,n){return e._resolveTexture(t,n)}))),t.accessors&&(t.accessors=t.accessors.map((function(t,n){return e._resolveAccessor(t,n)}))),t.materials&&(t.materials=t.materials.map((function(t,n){return e._resolveMaterial(t,n)}))),t.meshes&&(t.meshes=t.meshes.map((function(t,n){return e._resolveMesh(t,n)}))),t.nodes&&(t.nodes=t.nodes.map((function(t,n){return e._resolveNode(t,n)}))),t.skins&&(t.skins=t.skins.map((function(t,n){return e._resolveSkin(t,n)}))),t.scenes&&(t.scenes=t.scenes.map((function(t,n){return e._resolveScene(t,n)}))),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])}},{key:"getScene",value:function(t){return this._get("scenes",t)}},{key:"getNode",value:function(t){return this._get("nodes",t)}},{key:"getSkin",value:function(t){return this._get("skins",t)}},{key:"getMesh",value:function(t){return this._get("meshes",t)}},{key:"getMaterial",value:function(t){return this._get("materials",t)}},{key:"getAccessor",value:function(t){return this._get("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this._get("textures",t)}},{key:"getSampler",value:function(t){return this._get("samplers",t)}},{key:"getImage",value:function(t){return this._get("images",t)}},{key:"getBufferView",value:function(t){return this._get("bufferViews",t)}},{key:"getBuffer",value:function(t){return this._get("buffers",t)}},{key:"_get",value:function(t,e){if("object"===Object(G.a)(e))return e;var n=this.json[t]&&this.json[t][e];return n||console.warn("glTF file error: Could not find ".concat(t,"[").concat(e,"]")),n}},{key:"_resolveScene",value:function(t,e){var n=this;return t.id=t.id||"scene-".concat(e),t.nodes=(t.nodes||[]).map((function(t){return n.getNode(t)})),t}},{key:"_resolveNode",value:function(t,e){var n=this;return t.id=t.id||"node-".concat(e),t.children&&(t.children=t.children.map((function(t){return n.getNode(t)}))),void 0!==t.mesh&&(t.mesh=this.getMesh(t.mesh)),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t}},{key:"_resolveSkin",value:function(t,e){return t.id=t.id||"skin-".concat(e),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}},{key:"_resolveMesh",value:function(t,e){var n=this;return t.id=t.id||"mesh-".concat(e),t.primitives&&(t.primitives=t.primitives.map((function(t){var e=(t=ro({},t)).attributes;for(var r in t.attributes={},e)t.attributes[r]=n.getAccessor(e[r]);return void 0!==t.indices&&(t.indices=n.getAccessor(t.indices)),void 0!==t.material&&(t.material=n.getMaterial(t.material)),t}))),t}},{key:"_resolveMaterial",value:function(t,e){if(t.id=t.id||"material-".concat(e),t.normalTexture&&(t.normalTexture=ro({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=ro({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=ro({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.pbrMetallicRoughness){t.pbrMetallicRoughness=ro({},t.pbrMetallicRoughness);var n=t.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture=ro({},n.baseColorTexture),n.baseColorTexture.texture=this.getTexture(n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture=ro({},n.metallicRoughnessTexture),n.metallicRoughnessTexture.texture=this.getTexture(n.metallicRoughnessTexture.index))}return t}},{key:"_resolveAccessor",value:function(t,e){var n,r;if(t.id=t.id||"accessor-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=(n=t.componentType,oo[n]),t.components=(r=t.type,io[r]),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var i=t.bufferView.buffer,o=ei(t,t.bufferView),a=o.ArrayType,s=o.length,u=(t.bufferView.byteOffset||0)+i.byteOffset;t.value=new a(i.arrayBuffer,u,s)}return t}},{key:"_resolveTexture",value:function(t,e){return t.id=t.id||"texture-".concat(e),t.sampler="sampler"in t?this.getSampler(t.sampler):uo,t.source=this.getImage(t.source),t}},{key:"_resolveSampler",value:function(t,e){for(var n in t.id=t.id||"sampler-".concat(e),t.parameters={},t){var r=this._enumSamplerParameter(n);void 0!==r&&(t.parameters[r]=t[n])}return t}},{key:"_enumSamplerParameter",value:function(t){return so[t]}},{key:"_resolveImage",value:function(t,e){t.id=t.id||"image-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));var n=this.images[e];return n&&(t.image=n),t}},{key:"_resolveBufferView",value:function(t,e){t.id=t.id||"bufferView-".concat(e);var n=t.buffer;t.buffer=this.buffers[n];var r=this.buffers[n].arrayBuffer,i=this.buffers[n].byteOffset||0;return"byteOffset"in t&&(i+=t.byteOffset),t.data=new Uint8Array(r,i,t.byteLength),t}},{key:"_resolveCamera",value:function(t,e){return t.id=t.id||"camera-".concat(e),t.perspective,t.orthographic,t}}]),t}();function lo(t,e){return(new co).postProcess(t,e)}function fo(t,e){return ho.apply(this,arguments)}function ho(){return(ho=Object(rt.a)(et.a.mark((function t(e,n){var r,i,o,a,s,u,c=arguments;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:0,i=c.length>3?c[3]:void 0,o=c.length>4?c[4]:void 0,po(e,n,r,i),eo(e,{normalize:i.gltf.normalize}),a=[],i.gltf.loadImages&&(s=vo(e,i,o),a.push(s)),!i.gltf.loadBuffers||!e.json.buffers){t.next=10;break}return t.next=10,go(e,i,o);case 10:return u=Li(e,i,o),a.push(u),t.next=14,Promise.all(a);case 14:return t.abrupt("return",i.gltf.postProcess?lo(e,i):e);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function po(t,e,n,r){(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!Gi(e,n,r))&&(e=(new TextDecoder).decode(e));if("string"===typeof e)t.json=Object(Gr.a)(e);else if(e instanceof ArrayBuffer){var i={};n=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new DataView(e);t.type=Ui(r,n+0),t.version=r.getUint32(n+4,zi);var i=r.getUint32(n+8,zi);switch(t.header={byteOffset:n,byteLength:i},t.json={},t.binChunks=[],n+=12,t.version){case 1:return Vi(t,r,n,{});case 2:return qi(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(i,e,n,r),qr("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),t._glb=i,t.json=i.json}else qr(!1,"GLTF: must be ArrayBuffer or string");var o=t.json.buffers||[];if(t.buffers=new Array(o.length).fill(null),t._glb&&t._glb.header.hasBinChunk){var a=t._glb.binChunks;t.buffers[0]={arrayBuffer:a[0].arrayBuffer,byteOffset:a[0].byteOffset,byteLength:a[0].byteLength}}var s=t.json.images||[];t.images=new Array(s.length).fill({})}function go(t,e,n){return yo.apply(this,arguments)}function yo(){return(yo=Object(rt.a)(et.a.mark((function t(e,n,r){var i,o,a,s,u,c;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.json.buffers.length)){t.next=18;break}if(!(o=e.json.buffers[i]).uri){t.next=15;break}return qr(a=r.fetch),s=Hr(o.uri,n),t.next=9,a(s);case 9:return u=t.sent,t.next=12,u.arrayBuffer();case 12:c=t.sent,e.buffers[i]={arrayBuffer:c,byteOffset:0,byteLength:c.byteLength},delete o.uri;case 15:++i,t.next=1;break;case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vo(t,e,n){return mo.apply(this,arguments)}function mo(){return(mo=Object(rt.a)(et.a.mark((function t(e,n,r){var i,o,a;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.json.images||[],o=[],a=0;a<i.length;++a)o.push(Ao(e,i[a],a,n,r));return t.next=5,Promise.all(o);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ao(t,e,n,r,i){return bo.apply(this,arguments)}function bo(){return(bo=Object(rt.a)(et.a.mark((function t(e,n,r,i,o){var a,s,u,c,l,f,h;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.fetch,s=o.parse,!n.uri){t.next=9;break}return c=Hr(n.uri,i),t.next=5,a(c);case 5:return l=t.sent,t.next=8,l.arrayBuffer();case 8:u=t.sent;case 9:return Number.isFinite(n.bufferView)&&(f=Wr(e.json,e.buffers,n.bufferView),u=Object(Vr.b)(f.buffer,f.byteOffset,f.byteLength)),qr(u,"glTF image has no data"),t.next=13,s(u,Ur.a,{},o);case 13:h=t.sent,e.images[r]=h;case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_o(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xo={id:"gltf",name:"glTF",version:"2.3.7",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(t){return Oo.apply(this,arguments)},options:{gltf:{normalize:!1,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},uri:"",log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}},Eo=xo;function Oo(){return(Oo=Object(rt.a)(et.a.mark((function t(e){var n,r,i,o,a,s=arguments;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,(n=wo(wo({},xo.options),n)).gltf=wo(wo({},xo.options.gltf),n.gltf),So(n),i=n.byteOffset,o=void 0===i?0:i,a={},t.next=9,fo(a,e,o,n,r);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function So(t){"fetchImages"in t&&(t.gltf.loadImages=t.fetchImages),"createImages"in t&&(t.gltf.loadImages=t.createImages),"fetchLinkedResources"in t&&(t.gltf.fetchBuffers=t.fetchLinkedResources),"decompress"in t&&(t.gltf.decompressMeshes=t.decompress),"decompress"in t.gltf&&(t.gltf.decompressMeshes=t.gltf.decompress),"postProcess"in t&&(t.gltf.postProcess=t.postProcess)}var To=0,Po=1;function Mo(t,e,n,r){t.rotateYtoZ=!0;var i=t.byteOffset+t.byteLength-n;if(0===i)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=Object(Vr.b)(e,n,i),t.gltfByteOffset=0,t.gltfByteLength=i,n%4===0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}function Co(t,e,n,r){return Io.apply(this,arguments)}function Io(){return(Io=Object(rt.a)(et.a.mark((function t(e,n,r,i){var o,a,s;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r["3d-tiles"]||{},Ro(e,n,r),!o.loadGLTF){t.next=16;break}if(a=i.parse,s=i.fetch,!e.gltfUrl){t.next=9;break}return t.next=7,s(e.gltfUrl,r);case 7:e.gltfArrayBuffer=t.sent,e.gltfByteOffset=0;case 9:if(!e.gltfArrayBuffer){t.next=16;break}return t.next=12,a(e.gltfArrayBuffer,Eo,r,i);case 12:e.gltf=t.sent,delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ro(t,e,n){switch(e){case To:var r=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),i=(new TextDecoder).decode(r);t.gltfUrl=i.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case Po:break;default:throw new Error("b3dm: Illegal glTF format field")}}function ko(t,e,n,r,i){return jo.apply(this,arguments)}function jo(){return(jo=Object(rt.a)(et.a.mark((function t(e,n,r,i,o){var a,s;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Lo(e,n,r,i,o),t.next=3,Co(e,Po,i,o);case 3:return a=e.gltf||{},(s=a.extensions)&&s.CESIUM_RTC&&(e.rtcCenter=s.CESIUM_RTC.center),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lo(t,e,n,r,i){n=Mo(t,e,n=vr(t,e,n=yr(t,e,n=gr(t,e,n))),r);var o=new er(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=o.getGlobalProperty("RTC_CENTER",Zn.FLOAT,3),n}var No=n(188);function Do(t,e,n,r,i){return Fo.apply(this,arguments)}function Fo(){return(Fo=Object(rt.a)(et.a.mark((function t(e,n,r,i,o){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Bo(e,n,r,i,o),t.next=3,Co(e,e.gltfFormat,i,o);case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bo(t,e,n,r,i){if(n=gr(t,e,n),1!==t.version)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));n=yr(t,e,n);var o=new DataView(e);if(t.gltfFormat=o.getUint32(n,!0),n=Mo(t,e,n=vr(t,e,n+=4),r),0===t.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var a=new er(t.featureTableJson,t.featureTableBinary),s=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=a.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=a.getGlobalProperty("RTC_CENTER",Zn.FLOAT,3);new dr(t.batchTableJson,t.batchTableBinary,s);return function(t,e,n,r){for(var i=[new Array(r),t._batchTable][0],o=new ht.a,a=new ht.a,s=new ht.a,u=new ht.a,c=new xe.a,l=new No.a,f=new ht.a,h={},p=new ft.a,d=[],g=[],y=new ht.a,v=new ht.a,m=0;m<r;m++){var A=void 0;if(e.hasProperty("POSITION"))A=e.getProperty("POSITION",Zn.FLOAT,3,m,o);else if(e.hasProperty("POSITION_QUANTIZED")){A=e.getProperty("POSITION_QUANTIZED",Zn.UNSIGNED_SHORT,3,m,o);var b=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Zn.FLOAT,3,y);if(!b)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var _=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Zn.FLOAT,3,v);if(!_)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var w=65535,x=0;x<3;x++)A[x]=A[x]/w*_[x]+b[x]}if(!A)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");o.copy(A),h.translation=o,t.normalUp=e.getProperty("NORMAL_UP",Zn.FLOAT,3,m,d),t.normalRight=e.getProperty("NORMAL_RIGHT",Zn.FLOAT,3,m,g);var E=!1;if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",Zn.UNSIGNED_SHORT,2,d),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",Zn.UNSIGNED_SHORT,2,g),t.octNormalUp){if(!t.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}t.eastNorthUp?(qt.WGS84.eastNorthUpToFixedFrame(o,p),p.getRotationMatrix3(c)):c.identity()}E&&(u.copy(a).cross(s).normalize(),c.setColumn(0,a),c.setColumn(1,s),c.setColumn(2,u)),l.fromMatrix3(c),h.rotation=l,f.set(1,1,1);var O=e.getProperty("SCALE",Zn.FLOAT,1,m);Number.isFinite(O)&&f.multiplyByScalar(O);var S=e.getProperty("SCALE_NON_UNIFORM",Zn.FLOAT,3,m,d);S&&f.scale(S),h.scale=f;var T=e.getProperty("BATCH_ID",Zn.UNSIGNED_SHORT,1,m);void 0===T&&(T=m);var P=(new ft.a).fromQuaternion(h.rotation);p.identity(),p.translate(h.translation),p.multiplyRight(P),p.scale(h.scale);var M=p.clone();i[m]={modelMatrix:M,batchId:T}}t.instances=i}(t,a,0,s),n}function zo(t,e,n,r,i,o){return Uo.apply(this,arguments)}function Uo(){return(Uo=Object(rt.a)(et.a.mark((function t(e,n,r,i,o,a){var s,u;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=gr(e,n,r),s=new DataView(n),e.tilesLength=s.getUint32(r,!0),r+=4,e.tiles=[];case 5:if(!(e.tiles.length<e.tilesLength&&e.byteLength-r>12)){t.next=13;break}return u={},e.tiles.push(u),t.next=10,a(n,r,i,o,u);case 10:r=t.sent,t.next=5;break;case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Go(t){return Vo.apply(this,arguments)}function Vo(){return(Vo=Object(rt.a)(et.a.mark((function t(e){var n,r,i,o,a=arguments;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:0,r=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,(o=a.length>4&&void 0!==a[4]?a[4]:{}).byteOffset=n,o.type=En(e,n),t.t0=o.type,t.next=t.t0===wn.COMPOSITE?9:t.t0===wn.BATCHED_3D_MODEL?12:t.t0===wn.INSTANCED_3D_MODEL?15:t.t0===wn.POINT_CLOUD?18:21;break;case 9:return t.next=11,zo(o,e,n,r,i,Go);case 11:return t.abrupt("return",t.sent);case 12:return t.next=14,ko(o,e,n,r,i);case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,Do(o,e,n,r,i);case 17:return t.abrupt("return",t.sent);case 18:return t.next=20,Cr(o,e,n,r,i);case 20:return t.abrupt("return",t.sent);case 21:throw new Error("3DTileLoader: unknown type ".concat(o.type));case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function qo(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Ho(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ho(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wo(t,e){if(t.content){var n=t.content.uri||t.content.url;t.contentUrl="".concat(e.basePath,"/").concat(n)}return t.id=t.contentUrl,t.lodMetricType=_e,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=function(t){if(!t.contentUrl)return ge;var e=t.contentUrl.split(".").pop();switch(e){case"pnts":return ve;case"i3dm":case"b3dm":return ye;default:return e}}(t),t.refine=function(t){switch(t){case"REPLACE":case"replace":return de;case"ADD":case"add":return pe;default:return t}}(t.refine),t}function Xo(t){var e=t.basePath,n=Wo(t.root,t),r=[];for(r.push(n);r.length>0;){var i,o=qo(r.pop().children||[]);try{for(o.s();!(i=o.n()).done;){var a=i.value;Wo(a,{basePath:e}),r.push(a)}}catch(s){o.e(s)}finally{o.f()}}return n}function Yo(t){return Xt.a.dirname(t.url)}function Qo(t,e,n){return Zo.apply(this,arguments)}function Zo(){return(Zo=Object(rt.a)(et.a.mark((function t(e,n,r){var i;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i={}).content=i.content||{},0,t.next=5,Go(e,0,n,r,i.content);case 5:return t.abrupt("return",i.content);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ko(t,e,n){return Jo.apply(this,arguments)}function Jo(){return(Jo=Object(rt.a)(et.a.mark((function t(e,n,r){var i;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=JSON.parse((new TextDecoder).decode(e))).loader=n.loader||ta,i.url=r.url,i.basePath=Yo(i),i.root=Xo(i),i.type=be,i.lodMetricType=_e,i.lodMetricValue=i.root.lodMetricValue,t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $o(){return($o=Object(rt.a)(et.a.mark((function t(e,n,r,i){var o;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n["3d-tiles"]||{},!("auto"===o.isTileset?r.url&&-1!==r.url.indexOf(".json"):o.isTileset)){t.next=8;break}return t.next=5,Ko(e,n,r);case 5:e=t.sent,t.next=11;break;case 8:return t.next=10,Qo(e,n,r);case 10:e=t.sent;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ta={id:"3d-tiles",name:"3D Tiles",version:"2.3.7",extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:function(t,e,n,r){return $o.apply(this,arguments)},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",tile:null,tileset:null,assetGltfUpAxis:null}}},ea=ta;function na(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ra(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?na(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ia(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var oa=new V.Vector3,aa={getPointColor:[0,0,0],pointSize:1,data:null,loadOptions:{},loader:ea,onTilesetLoad:function(t){},onTileLoad:function(t){},onTileUnload:function(t){},onTileError:function(t,e,n){}},sa=function(t){Object(u.a)(n,t);var e=ia(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&ct.a.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null}}},{key:"shouldUpdateState",value:function(t){return t.changeFlags.somethingChanged}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags;if(e.data&&e.data!==n.data&&this._loadTileset(e.data),r.viewportChanged){var i=this.state.tileset3d;this._updateTileset(i)}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=t.sourceLayer,r=this.state.layerMap,i=n&&n.id;if(i){var o=i.substring(this.id.length+1),a=o.substring(o.indexOf("-")+1);e.object=r[a]&&r[a].tile}return e}},{key:"_loadTileset",value:function(){var t=Object(rt.a)(et.a.mark((function t(e){var n,r,i,o,a,s,u;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props,r=n.loader,i=n.loadOptions,o=ra({},i),!r.preload){t.next=7;break}return t.next=5,r.preload(e,i);case 5:a=t.sent,Object.assign(o,a);case 7:return t.next=9,Object(lt.a)(e,r,o);case 9:s=t.sent,u=new _n(s,ra({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileLoadFail:this.props.onTileError},o)),this.setState({tileset3d:u,layerMap:{}}),this._updateTileset(u),this.props.onTilesetLoad(u);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_onTileLoad",value:function(t){this.props.onTileLoad(t),this._updateTileset(this.state.tileset3d),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(t){delete this.state.layerMap[t.id],this.props.onTileUnload(t)}},{key:"_updateTileset",value:function(t){var e=this.context,n=e.timeline,r=e.viewport;if(n&&r&&t){var i=t.update(r);this.state.frameNumber!==i&&this.setState({frameNumber:i})}}},{key:"_create3DTileLayer",value:function(t){if(!t.content)return null;switch(t.type){case ve:return this._createPointCloudTileLayer(t);case ye:return this._create3DModelTileLayer(t);case me:return this._createSimpleMeshLayer(t);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(t.content.type))}}},{key:"_createPointCloudTileLayer",value:function(t){var e=t.content,n=e.attributes,r=e.pointCount,i=e.constantRGBA,o=e.cartographicOrigin,a=e.modelMatrix,s=n.positions,u=n.normals,c=n.colors;if(!s)return null;var l=this.props,f=l.pointSize,h=l.getPointColor;return new(this.getSubLayerClass("pointcloud",at.a))({pointSize:f},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(t.id),data:{header:{vertexCount:r},attributes:{POSITION:s,NORMAL:u,COLOR_0:c}},coordinateSystem:ot.a.METER_OFFSETS,coordinateOrigin:o,modelMatrix:a,getColor:i||h})}},{key:"_create3DModelTileLayer",value:function(t){var e=t.content,n=e.gltf,r=e.instances,i=e.cartographicOrigin,o=e.modelMatrix;return new(this.getSubLayerClass("scenegraph",st.a))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(t.id),data:r||[{}],scenegraph:n,coordinateSystem:ot.a.METER_OFFSETS,coordinateOrigin:i,modelMatrix:o,getTransformMatrix:function(t){return t.modelMatrix},getPosition:function(t){return[0,0,0]}})}},{key:"_createSimpleMeshLayer",value:function(t){for(var e=t.content,n=e.attributes,r=e.modelMatrix,i=e.cartographicOrigin,o=e.texture,a=n.normals,s=n.texCoords,u=new Float32Array(n.positions.value.length),c=0;c<u.length;c+=3)oa.copy(n.positions.value.subarray(c,c+3)),u.set(oa,c);var l=new it.a({drawMode:4,attributes:{positions:u,normals:a,texCoords:s}});return new(this.getSubLayerClass("mesh",ut.a))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(t.id),mesh:l,data:[{}],getPosition:[0,0,0],getColor:[255,255,255],texture:o,modelMatrix:r,coordinateOrigin:i,coordinateSystem:ot.a.METER_OFFSETS})}},{key:"renderLayers",value:function(){var t=this,e=this.state,n=e.tileset3d,r=e.layerMap;return n?n.tiles.map((function(e){var n=r[e.id]&&r[e.id].layer;return e.selected?(n||(n=t._create3DTileLayer(e),r[e.id]={layer:n,tile:e}),n&&n.props&&!n.props.visible&&(n=n.clone({visible:!0}),r[e.id].layer=n),n):(n&&n.props&&n.props.visible&&(n=n.clone({visible:!1}),r[e.id].layer=n),n)})).filter(Boolean):null}}]),n}(d.a);sa.layerName="Tile3DLayer",sa.defaultProps=aa;var ua=n(150),ca=n(56),la=n(64),fa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:257;Object(ca.a)(this,t),this.gridSize=e;var n=e-1;if(n&n-1)throw new Error("Expected grid size to be 2^n+1, got ".concat(e,"."));this.numTriangles=n*n*2-2,this.numParentTriangles=this.numTriangles-n*n,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(4*this.numTriangles);for(var r=0;r<this.numTriangles;r++){var i=r+2,o=0,a=0,s=0,u=0,c=0,l=0;for(1&i?s=u=c=n:o=a=l=n;(i>>=1)>1;){var f=o+s>>1,h=a+u>>1;1&i?(s=o,u=a,o=c,a=l):(o=s,a=u,s=c,u=l),c=f,l=h}var p=4*r;this.coords[p+0]=o,this.coords[p+1]=a,this.coords[p+2]=s,this.coords[p+3]=u}}return Object(la.a)(t,[{key:"createTile",value:function(t){return new ha(t,this)}}]),t}(),ha=function(){function t(e,n){Object(ca.a)(this,t);var r=n.gridSize;if(e.length!==r*r)throw new Error("Expected terrain data of length ".concat(r*r," (").concat(r," x ").concat(r,"), got ").concat(e.length,"."));this.terrain=e,this.martini=n,this.errors=new Float32Array(e.length),this.update()}return Object(la.a)(t,[{key:"update",value:function(){for(var t=this.martini,e=t.numTriangles,n=t.numParentTriangles,r=t.coords,i=t.gridSize,o=this.terrain,a=this.errors,s=e-1;s>=0;s--){var u=4*s,c=r[u+0],l=r[u+1],f=r[u+2],h=r[u+3],p=c+f>>1,d=l+h>>1,g=p+d-l,y=d+c-p,v=(o[l*i+c]+o[h*i+f])/2,m=d*i+p,A=Math.abs(v-o[m]);if(a[m]=Math.max(a[m],A),s<n){var b=(l+y>>1)*i+(c+g>>1),_=(h+y>>1)*i+(f+g>>1);a[m]=Math.max(a[m],a[b],a[_])}}}},{key:"getMesh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.martini,n=e.gridSize,r=e.indices,i=this.errors,o=0,a=0,s=n-1;function u(e,s,c,l,f,h){var p=e+c>>1,d=s+l>>1;Math.abs(e-f)+Math.abs(s-h)>1&&i[d*n+p]>t?(u(f,h,e,s,p,d),u(c,l,f,h,p,d)):(r[s*n+e]=r[s*n+e]||++o,r[l*n+c]=r[l*n+c]||++o,r[h*n+f]=r[h*n+f]||++o,a++)}r.fill(0),u(0,0,s,s,s,0),u(s,s,0,0,0,s);var c=new Uint16Array(2*o),l=new Uint32Array(3*a),f=0;function h(e,o,a,s,u,p){var d=e+a>>1,g=o+s>>1;if(Math.abs(e-u)+Math.abs(o-p)>1&&i[g*n+d]>t)h(u,p,e,o,d,g),h(a,s,u,p,d,g);else{var y=r[o*n+e]-1,v=r[s*n+a]-1,m=r[p*n+u]-1;c[2*y]=e,c[2*y+1]=o,c[2*v]=a,c[2*v+1]=s,c[2*m]=u,c[2*m+1]=p,l[f++]=y,l[f++]=v,l[f++]=m}}return h(0,0,s,s,s,0),h(s,s,0,0,0,s),{vertices:c,triangles:l}}}]),t}();function pa(t,e){if(null===t)return null;var n=e.meshMaxError,r=e.bounds,i=e.elevationDecoder,o=t.data,a=t.width,s=a+1,u=function(t,e,n){for(var r=n.rScaler,i=n.bScaler,o=n.gScaler,a=n.offset,s=e+1,u=new Float32Array(s*s),c=0,l=0;l<e;l++)for(var f=0;f<e;f++,c++){var h=4*c,p=t[h+0],d=t[h+1],g=t[h+2];u[c+l]=p*r+d*o+g*i+a}for(var y=s*(s-1),v=0;v<s-1;v++,y++)u[y]=u[y-s];for(var m=s-1,A=0;A<s;A++,m+=s)u[m]=u[m-1];return u}(o,a,i),c=new fa(s).createTile(u).getMesh(n),l=c.vertices,f=c.triangles,h=function(t,e,n,r){for(var i=n+1,o=t.length/2,a=new Float32Array(3*o),s=new Float32Array(2*o),u=r||[0,0,n,n],c=Object(y.a)(u,4),l=c[0],f=c[1],h=c[2],p=c[3],d=(h-l)/n,g=(p-f)/n,v=0;v<o;v++){var m=t[2*v],A=t[2*v+1],b=A*i+m;a[3*v+0]=m*d+l,a[3*v+1]=-A*g+p,a[3*v+2]=e[b],s[2*v+0]=m/n,s[2*v+1]=A/n}return{POSITION:{value:a,size:3},TEXCOORD_0:{value:s,size:2}}}(l,u,a,r);return{loaderData:{header:{}},header:{vertexCount:f.length,boundingBox:Object(Ln.a)(h)},mode:4,indices:{value:f,size:1},attributes:h}}function da(){return(da=Object(rt.a)(et.a.mark((function t(e,n,r){var i;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.image=n.image||{},n.image.type="data",t.next=4,r.parse(e,n,n.baseUri);case 4:return i=t.sent,t.abrupt("return",pa(i,n.terrain));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ga(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ga(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var va="2.3.7",ma=ya(ya({},{id:"terrain",name:"Terrain",version:va,extensions:["png","pngraw"],mimeTypes:["image/png"],options:{terrain:{bounds:null,workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat(va,"/dist/terrain-loader.worker.js"),meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0}}}}),{},{parse:function(t,e,n){return da.apply(this,arguments)}}),Aa=n(74);function ba(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function _a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_a(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xa=[1],Ea=wa(wa({},I.a.defaultProps),{},{elevationData:Aa.f,texture:Aa.f,meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:{type:"string",value:null},wireframe:!1,material:!0});function Oa(t){return Array.isArray(t)?t.join(";"):t}var Sa=function(t){Object(u.a)(n,t);var e=ba(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=e.elevationData!==n.elevationData;if(r){var i=e.elevationData,o=i&&(Array.isArray(i)||i.includes("{x}")&&i.includes("{y}"));this.setState({isTiled:o})}var a=r||e.meshMaxError!==n.meshMaxError||e.elevationDecoder!==n.elevationDecoder||e.bounds!==n.bounds;if(!this.state.isTiled&&a){var s=this.loadTerrain(e);this.setState({terrain:s})}}},{key:"loadTerrain",value:function(t){var e=t.elevationData,n=t.bounds,r=t.elevationDecoder,i=t.meshMaxError,o=t.workerUrl;if(!e)return null;var a={terrain:{bounds:n,meshMaxError:i,elevationDecoder:r}};return null!==o&&(a.terrain.workerUrl=o),Object(lt.a)(e,ma,a)}},{key:"getTiledTerrainData",value:function(t){var e=this.props,n=e.elevationData,r=e.texture,i=e.elevationDecoder,o=e.meshMaxError,a=e.workerUrl,s=Object(Aa.b)(n,t),u=Object(Aa.b)(r,t),c=t.bbox,l=t.z,f=new ua.a({longitude:(c.west+c.east)/2,latitude:(c.north+c.south)/2,zoom:l}),h=f.projectFlat([c.west,c.south]),p=f.projectFlat([c.east,c.north]),d=[h[0],h[1],p[0],p[1]],g=this.loadTerrain({elevationData:s,bounds:d,elevationDecoder:i,meshMaxError:o,workerUrl:a}),y=u?Object(lt.a)(u).catch((function(t){return null})):Promise.resolve(null);return Promise.all([g,y])}},{key:"renderSubLayers",value:function(t){var e=this.getSubLayerClass("mesh",ut.a),n=t.data,r=t.color;if(!n)return null;var i=Object(y.a)(n,2),o=i[0],a=i[1];return new e(t,{data:xa,mesh:o,texture:a,coordinateSystem:ot.a.CARTESIAN,getPosition:function(t){return[0,0,0]},getColor:r})}},{key:"onViewportLoad",value:function(t){if(t&&0!==t.length&&!t.every((function(t){return!t}))){var e=this.state.zRange,n=t.filter(Boolean).map((function(t){return t[0].header.boundingBox.map((function(t){return t[2]}))})),r=Math.min.apply(Math,Object(nr.a)(n.map((function(t){return t[0]})))),i=Math.max.apply(Math,Object(nr.a)(n.map((function(t){return t[1]}))));(!e||r<e[0]||i>e[1])&&this.setState({zRange:[r,i]})}}},{key:"renderLayers",value:function(){var t=this.props,e=t.color,n=t.material,r=t.elevationData,i=t.texture,o=t.wireframe,a=t.meshMaxError,s=t.elevationDecoder,u=t.tileSize,c=t.maxZoom,l=t.minZoom,f=t.extent,h=t.maxRequests;return this.state.isTiled?new I.a(this.getSubLayerProps({id:"tiles"}),{wireframe:o,color:e,material:n,getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:Oa(r),texture:Oa(i),meshMaxError:a,elevationDecoder:s}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:u,maxZoom:c,minZoom:l,extent:f,maxRequests:h}):new(this.getSubLayerClass("mesh",ut.a))(this.getSubLayerProps({id:"mesh"}),{data:xa,mesh:this.state.terrain,texture:i,_instanced:!1,getPosition:function(t){return[0,0,0]},getColor:e,material:n,wireframe:o})}}]),n}(d.a);Sa.layerName="TerrainLayer",Sa.defaultProps=Ea;var Ta=n(397),Pa=n.n(Ta),Ma=function(){function t(e,n,r,i,o){Object(s.a)(this,t),this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=o,e.readFields(Ia,this,n)}return Object(p.a)(t,null,[{key:"types",get:function(){return["Unknown","Point","LineString","Polygon"]}}]),Object(p.a)(t,[{key:"loadGeometry",value:function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Pa.a(o,a));else{if(7!==r)throw new Error("unknown command ".concat(r));e&&e.push(e[0].clone())}}return e&&s.push(e),s}},{key:"bbox",value:function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command ".concat(n))}return[a,u,s,c]}},{key:"toGeoJSON",value:function(e,n,r){var i,o,a=this.extent*Math.pow(2,r),s=this.extent*e,u=this.extent*n,c=this.loadGeometry(),l=t.types[this.type];function f(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+u)/a;t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<c.length;i++)h[i]=c[i][0];f(c=h);break;case 2:for(i=0;i<c.length;i++)f(c[i]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Ca(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}n&&i.push(n);return i}(c),i=0;i<c.length;i++)for(o=0;o<c[i].length;o++)f(c[i][o])}return 1===c.length?c=c[0]:l="Multi".concat(l),{type:"Feature",geometry:{type:l,coordinates:c},properties:this.properties}}}]),t}();function Ca(t){for(var e,n,r=0,i=0,o=t.length-1;i<t.length;o=i++)e=t[i],r+=((n=t[o]).x-e.x)*(e.y+n.y);return r}function Ia(t,e,n){1===t?e.id=n.readVarint():2===t?function(t,e){var n=t.readVarint()+t.pos;for(;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3===t?e.type=n.readVarint():4===t&&(e._geometry=n.pos)}var Ra=function(){function t(e,n){Object(s.a)(this,t),this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ka,this,n),this.length=this._features.length}return Object(p.a)(t,[{key:"feature",value:function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ma(this._pbf,e,this.extent,this._keys,this._values)}}]),t}();function ka(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){var e=null,n=t.readVarint()+t.pos;for(;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}var ja=function t(e,n){Object(s.a)(this,t),this.layers=e.readFields(La,{},n)};function La(t,e,n){if(3===t){var r=new Ra(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function Na(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Da(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Da(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Da(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fa(t){var e,n,r=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=new Set,p={},d=Na(t);try{for(d.s();!(e=d.n()).done;){var g=e.value,y=g.geometry;switch(y.type){case"Point":i++,r++,h.add(y.coordinates.length);break;case"MultiPoint":i++,r+=y.coordinates.length;var v,m=Na(y.coordinates);try{for(m.s();!(v=m.n()).done;){var A=v.value;h.add(A.length)}}catch(z){m.e(z)}finally{m.f()}break;case"LineString":s++,o+=y.coordinates.length,a++;var b,_=Na(y.coordinates);try{for(_.s();!(b=_.n()).done;){var w=b.value;h.add(w.length)}}catch(z){_.e(z)}finally{_.f()}break;case"MultiLineString":s++;var x,E=Na(y.coordinates);try{for(E.s();!(x=E.n()).done;){var O=x.value;o+=O.length,a++;var S,T=Na(O);try{for(T.s();!(S=T.n()).done;){var P=S.value;h.add(P.length)}}catch(z){T.e(z)}finally{T.f()}}}catch(z){E.e(z)}finally{E.f()}break;case"Polygon":f++,c++,l+=y.coordinates.length,u+=Za(y.coordinates).length;var M,C=Na(Za(y.coordinates));try{for(C.s();!(M=C.n()).done;){var I=M.value;h.add(I.length)}}catch(z){C.e(z)}finally{C.f()}break;case"MultiPolygon":f++;var R,k=Na(y.coordinates);try{for(k.s();!(R=k.n()).done;){var j=R.value;c++,l+=j.length,u+=Za(j).length;var L,N=Na(Za(j));try{for(N.s();!(L=N.n()).done;){var D=L.value;h.add(D.length)}}catch(z){N.e(z)}finally{N.f()}}}catch(z){k.e(z)}finally{k.f()}break;default:throw new Error("Unsupported geometry type: ".concat(y.type))}if(g.properties)for(var F in g.properties){var B=g.properties[F];p[F]=p[F]||void 0===p[F]?(n=B,Number.isFinite(n)):p[F]}}}catch(z){d.e(z)}finally{d.f()}return{pointPositionsCount:r,pointFeaturesCount:i,linePositionsCount:o,linePathsCount:a,lineFeaturesCount:s,coordLength:Math.max.apply(Math,Object(nr.a)(h)),polygonPositionsCount:u,polygonObjectsCount:c,polygonRingsCount:l,polygonFeaturesCount:f,numericPropKeys:Object.keys(p).filter((function(t){return p[t]}))}}function Ba(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.pointPositionsCount,i=e.pointFeaturesCount,o=e.linePositionsCount,a=e.linePathsCount,s=e.lineFeaturesCount,u=e.polygonPositionsCount,c=e.polygonObjectsCount,l=e.polygonRingsCount,f=e.polygonFeaturesCount,h=n.coordLength,p=n.numericPropKeys,d=n.PositionDataType,g=void 0===d?Float32Array:d,y=t.length>65535?Uint32Array:Uint16Array,v={positions:new g(r*h),globalFeatureIds:new y(r),featureIds:i>65535?new Uint32Array(r):new Uint16Array(r),numericProps:{},properties:[]},m={pathIndices:o>65535?new Uint32Array(a+1):new Uint16Array(a+1),positions:new g(o*h),globalFeatureIds:new y(o),featureIds:s>65535?new Uint32Array(o):new Uint16Array(o),numericProps:{},properties:[]},A={polygonIndices:u>65535?new Uint32Array(c+1):new Uint16Array(c+1),primitivePolygonIndices:u>65535?new Uint32Array(l+1):new Uint16Array(l+1),positions:new g(u*h),globalFeatureIds:new y(u),featureIds:f>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[]},b=0,_=[v,m,A];b<_.length;b++){var w,x=_[b],E=Na(p);try{for(E.s();!(w=E.n()).done;){var O=w.value;x.numericProps[O]=new Float32Array(x.positions.length/h)}}catch(R){E.e(R)}finally{E.f()}}m.pathIndices[a]=o,A.polygonIndices[c]=u,A.primitivePolygonIndices[l]=u;var S,T={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},P=Na(t);try{for(P.s();!(S=P.n()).done;){var M=S.value,C=M.geometry,I=M.properties;switch(C.type){case"Point":za(C.coordinates,v,T,h,I),v.properties.push(Ya(I,p)),T.pointFeature++;break;case"MultiPoint":Ua(C.coordinates,v,T,h,I),v.properties.push(Ya(I,p)),T.pointFeature++;break;case"LineString":Ga(C.coordinates,m,T,h,I),m.properties.push(Ya(I,p)),T.lineFeature++;break;case"MultiLineString":Va(C.coordinates,m,T,h,I),m.properties.push(Ya(I,p)),T.lineFeature++;break;case"Polygon":qa(C.coordinates,A,T,h,I),A.properties.push(Ya(I,p)),T.polygonFeature++;break;case"MultiPolygon":Ha(C.coordinates,A,T,h,I),A.properties.push(Ya(I,p)),T.polygonFeature++;break;default:throw new Error("Invalid geometry type")}T.feature++}}catch(R){P.e(R)}finally{P.f()}return Wa(v,m,A,h)}function za(t,e,n,r,i){e.positions.set(t,n.pointPosition*r),e.globalFeatureIds[n.pointPosition]=n.feature,e.featureIds[n.pointPosition]=n.pointFeature,Xa(e,i,n.pointPosition,1),n.pointPosition++}function Ua(t,e,n,r,i){var o,a=Na(t);try{for(a.s();!(o=a.n()).done;){za(o.value,e,n,r,i)}}catch(s){a.e(s)}finally{a.f()}}function Ga(t,e,n,r,i){e.pathIndices[n.linePath]=n.linePosition,n.linePath++,Qa(e.positions,t,n.linePosition,r);var o=t.length;Xa(e,i,n.linePosition,o),e.globalFeatureIds.set(new Uint32Array(o).fill(n.feature),n.linePosition),e.featureIds.set(new Uint32Array(o).fill(n.lineFeature),n.linePosition),n.linePosition+=o}function Va(t,e,n,r,i){var o,a=Na(t);try{for(a.s();!(o=a.n()).done;){Ga(o.value,e,n,r,i)}}catch(s){a.e(s)}finally{a.f()}}function qa(t,e,n,r,i){e.polygonIndices[n.polygonObject]=n.polygonPosition,n.polygonObject++;var o,a=Na(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;e.primitivePolygonIndices[n.polygonRing]=n.polygonPosition,n.polygonRing++,Qa(e.positions,s,n.polygonPosition,r);var u=s.length;Xa(e,i,n.polygonPosition,u),e.globalFeatureIds.set(new Uint32Array(u).fill(n.feature),n.polygonPosition),e.featureIds.set(new Uint32Array(u).fill(n.polygonFeature),n.polygonPosition),n.polygonPosition+=u}}catch(c){a.e(c)}finally{a.f()}}function Ha(t,e,n,r,i){var o,a=Na(t);try{for(a.s();!(o=a.n()).done;){qa(o.value,e,n,r,i)}}catch(s){a.e(s)}finally{a.f()}}function Wa(t,e,n,r){var i={points:{positions:{value:t.positions,size:r},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:t.numericProps,properties:t.properties},lines:{pathIndices:{value:e.pathIndices,size:1},positions:{value:e.positions,size:r},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:e.numericProps,properties:e.properties},polygons:{polygonIndices:{value:n.polygonIndices,size:1},primitivePolygonIndices:{value:n.primitivePolygonIndices,size:1},positions:{value:n.positions,size:r},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:n.numericProps,properties:n.properties}};for(var o in i)for(var a in i[o].numericProps)i[o].numericProps[a]={value:i[o].numericProps[a],size:1};return i}function Xa(t,e,n,r){for(var i in t.numericProps)i in e&&t.numericProps[i].set(new Array(r).fill(e[i]),n)}function Ya(t,e){for(var n in t)e.includes(n)&&delete t[n];return t}function Qa(t,e,n,r){var i,o=n*r,a=Na(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;t.set(s,o),o+=r}}catch(u){a.e(u)}finally{a.f()}}function Za(t){var e;return(e=[]).concat.apply(e,Object(nr.a)(t))}var Ka=n(396),Ja=n.n(Ka),$a=["Unknown","Point","LineString","Polygon"];function ts(t,e){for(var n=0;n<t.length;n++){var r=t[n];t[n]=[r.x/e.extent,r.y/e.extent]}}function es(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return t},n=$a[t.type],r=t.loadGeometry();switch(t.type){case 1:for(var i=[],o=0;o<r.length;o++)i[o]=r[o][0];e(r=i,t);break;case 2:for(var a=0;a<r.length;a++)e(r[a],t);break;case 3:r=rs(r);for(var s=0;s<r.length;s++)for(var u=0;u<r[s].length;u++)e(r[s][u],t)}return ns(n,t,r)}function ns(t,e,n){var r=t;1===n.length?n=n[0]:r="Multi".concat(t);var i={type:"Feature",geometry:{type:r,coordinates:n},properties:e.properties||{}};return"id"in e&&(i.id=e.id),i}function rs(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=is(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n&&n.push(t[o]))}return n&&i.push(n),i}function is(t){for(var e,n,r=t.length,i=0,o=0,a=r-1;o<r;a=o++)e=t[o],i+=((n=t[a]).x-e.x)*(e.y+n.y);return i}function os(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?os(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ss(t,e){if((e=e||{}).mvt=e.mvt||{},e.gis=e.gis||{},0===t.byteLength)return[];var n=new ja(new Ja.a(t)),r=e.mvt,i=[];if((Array.isArray(r.layers)?r.layers:Object.keys(n.layers)).forEach((function(t){var e=n.layers[t],o=as(as({},r),{},{layerName:t});if(e)for(var a=0;a<e.length;a++){var s=us(e.feature(a),o);i.push(s)}})),"binary"===e.gis.format){var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Fa(t);return Ba(t,n,{coordLength:e.coordLength||n.coordLength,numericPropKeys:e.numericPropKeys||n.numericPropKeys,PositionDataType:e.PositionDataType||Float32Array})}(i);return o.byteLength=t.byteLength,o}return i}function us(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="wgs84"===e.coordinates,r=e.tileIndex&&Number.isFinite(e.tileIndex.x)&&Number.isFinite(e.tileIndex.y)&&Number.isFinite(e.tileIndex.z);if(n&&!r)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property. Check documentation.");var i=n&&r?t.toGeoJSON(e.tileIndex.x,e.tileIndex.y,e.tileIndex.z):es(t,ts);return e.layerProperty&&(i.properties[e.layerProperty]=e.layerName),i}function cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cs(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fs="2.3.7",hs=ls(ls({},{id:"mvt",name:"Mapbox Vector Tile",version:fs,extensions:["mvt"],mimeTypes:["application/x-protobuf"],category:"geometry",options:{mvt:{coordinates:"local",layerProperty:"layerName",layers:null,tileIndex:null,_format:"geojson",workerUrl:"https://unpkg.com/@loaders.gl/mvt@".concat(fs,"/dist/mvt-loader.worker.js")}}}),{},{parse:function(){var t=Object(rt.a)(et.a.mark((function t(e,n){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ss(e,n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),parseSync:ss,binary:!0}),ps=n(344);function ds(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var gs={clipBounds:[0,0,1,1]},ys="\nuniform vec4 clip_bounds;\n\nbool clip_isInBounds(vec2 position) {\n  return position.x >= clip_bounds[0] && position.y >= clip_bounds[1] && position.x < clip_bounds[2] && position.y < clip_bounds[3];\n}\n",vs={name:"clip-vs",vs:ys},ms={"vs:#decl":"\nvarying float clip_isVisible;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));\n","fs:#decl":"\nvarying float clip_isVisible;\n","fs:DECKGL_FILTER_COLOR":"\n  if (clip_isVisible < 0.5) discard;\n"},As={name:"clip-fs",fs:ys},bs={"vs:#decl":"\nvarying vec2 clip_commonPosition;\n","vs:DECKGL_FILTER_GL_POSITION":"\n  clip_commonPosition = geometry.position.xy;\n","fs:#decl":"\nvarying vec2 clip_commonPosition;\n","fs:DECKGL_FILTER_COLOR":"\n  if (!clip_isInBounds(clip_commonPosition)) discard;\n"},_s=function(t){Object(u.a)(n,t);var e=ds(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"getShaders",value:function(){var t="instancePositions"in this.getAttributeManager().attributes;return"clipByInstance"in this.props&&(t=this.props.clipByInstance),this.state.clipByInstance=t,t?{modules:[vs],inject:ms}:{modules:[As],inject:bs}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props.clipBounds,r=void 0===n?gs.clipBounds:n;if(this.state.clipByInstance)e.clip_bounds=r;else{var i=this.projectPosition([r[0],r[1],0]),o=this.projectPosition([r[2],r[3],0]);e.clip_bounds=[Math.min(i[0],o[0]),Math.min(i[1],o[1]),Math.max(i[0],o[0]),Math.max(i[1],o[1])]}}}]),n}(ps.a);function ws(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return xs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xs(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Es(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Os(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Es(Object(n),!0).forEach((function(e){Object(nt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ss(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}_s.extensionName="ClipExtension",_s.defaultProps=gs;function Ts(t){return Ps.apply(this,arguments)}function Ps(){return(Ps=Object(rt.a)(et.a.mark((function t(e){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(lt.a)(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Error("An error occurred fetching TileJSON: ".concat(t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}var Ms=function(t){Object(u.a)(n,t);var e=Ss(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"initializeState",value:function(){Object(R.a)(Object(l.a)(n.prototype),"initializeState",this).call(this),this.setState({data:null,tileJSON:null})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.context,o=t.changeFlags;if(o.dataChanged&&this._updateTileData({props:e}),this.state.data){Object(R.a)(Object(l.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,context:i,changeFlags:o});var a=this.state.tileset;o.viewportChanged&&a.isLoaded&&this._onViewportChange()}}},{key:"_updateTileData",value:function(){var t=Object(rt.a)(et.a.mark((function t(e){var n,r,i,o,a,s;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=this.props.onDataLoad,i=n.data,o=null,a=n.minZoom,s=n.maxZoom,"string"!==typeof i||Object(Aa.c)(i)){t.next=13;break}return this.setState({data:null,tileJSON:null}),t.next=9,Ts(i);case 9:o=t.sent,r&&r(o),t.next=14;break;case 13:i.tilejson&&(o=i);case 14:o&&(i=o.tiles,Number.isFinite(o.minzoom)&&o.minzoom>a&&(a=o.minzoom),Number.isFinite(o.maxzoom)&&(!Number.isFinite(s)||o.maxzoom<s)&&(s=o.maxzoom)),this.setState({data:i,tileJSON:o,minZoom:a,maxZoom:s});case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"renderLayers",value:function(){return this.state.data?Object(R.a)(Object(l.a)(n.prototype),"renderLayers",this).call(this):null}},{key:"getTileData",value:function(t){var e=Object(Aa.b)(this.state.data,t);if(!e)return Promise.reject("Invalid URL");var n=this.getLoadOptions();return n=Os(Os({},n),{},{mvt:Os(Os({},n&&n.mvt),{},{coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:{x:t.x,y:t.y,z:t.z}})}),Object(lt.a)(e,hs,n)}},{key:"renderSubLayers",value:function(t){var e=t.tile,r=Math.pow(2,e.z),i=512/r,o=-i,a=512*e.x/r,s=512*(1-e.y/r),u=(new V.Matrix4).scale([i,o,1]);return t.autoHighlight=!1,this.context.viewport.resolution||(t.modelMatrix=u,t.coordinateOrigin=[a,s,0],t.coordinateSystem=ot.a.CARTESIAN,t.extensions=[].concat(Object(nr.a)(t.extensions||[]),[new _s])),Object(R.a)(Object(l.a)(n.prototype),"renderSubLayers",this).call(this,t)}},{key:"onHover",value:function(t,e){var r=this.props,i=r.uniqueIdProperty;if(r.autoHighlight){var o,a=this.state.hoveredFeatureId,s=t.object;s&&(o=Cs(s,i)),a!==o&&this.setState({hoveredFeatureId:o})}return Object(R.a)(Object(l.a)(n.prototype),"onHover",this).call(this,t,e)}},{key:"getHighlightedObjectIndex",value:function(t){var e=this.state.hoveredFeatureId,n=this.props,r=n.uniqueIdProperty,i=n.highlightedFeatureId,o=t.data;if(!(Is(e)||Is(i))||!Array.isArray(o))return-1;var a=Is(i)?i:e;return o.findIndex((function(t){return Cs(t,r)===a}))}},{key:"_pickObjects",value:function(t){var e=this.context,n=e.deck,r=e.viewport,i=r.width,o=r.height,a=r.x,s=r.y,u=[this.id];return n.pickObjects({x:a,y:s,width:i,height:o,layerIds:u,maxObjects:t})}},{key:"getRenderedFeatures",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this._pickObjects(e),r=new Set,i=[],o=ws(n);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=Cs(a.object,this.props.uniqueIdProperty);-1===s?i.push(a.object):r.has(s)||(r.add(s),i.push(a.object))}}catch(u){o.e(u)}finally{o.f()}return i}},{key:"_onViewportChange",value:function(){var t=this.props.onViewportChange;if(t){var e=this.context.viewport;t({getRenderedFeatures:this.getRenderedFeatures.bind(this),viewport:e})}}},{key:"_onViewportLoad",value:function(){Object(R.a)(Object(l.a)(n.prototype),"_onViewportLoad",this).call(this),this._onViewportChange()}},{key:"isLoaded",get:function(){return this.state.data&&this.state.tileset&&Object(R.a)(Object(l.a)(n.prototype),"isLoaded",this)}}]),n}(I.a);function Cs(t,e){return e?t.properties[e]:"id"in t?t.id:-1}function Is(t){return void 0!==t&&null!==t&&""!==t}Ms.layerName="MVTLayer",Ms.defaultProps={uniqueIdProperty:{type:"string",value:""},highlightedFeatureId:null,onViewportChange:{type:"function",optional:!0,value:null,compare:!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return Ft}));var r=n(0),i=n(1),o=n(2),a=n(231),s=n(35),u=n(104),c=n(26),l=n(94);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}return Object(o.a)(t,[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"updateViewStates",value:function(){for(var t in this.controllers){var e=this.controllers[t];e&&e.updateTransition()}}},{key:"getViewports",value:function(t){return t?this._viewports.filter((function(e){return e.containsPixel(t)})):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach((function(e){t[e.id]=e})),t}},{key:"getView",value:function(t){return"string"===typeof t?this.views.find((function(e){return e.id===t})):t}},{key:"getViewState",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"unproject",value:function(t,e){for(var n=this.getViewports(),r={x:t[0],y:t[1]},i=n.length-1;i>=0;--i){var o=n[i];if(o.containsPixel(r)){var a=t.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,e)}}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,e){Object(s.a)(Number.isFinite(t)&&Number.isFinite(e)),t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=Object(l.b)(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!Object(u.a)(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):c.a.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange(e)}},{key:"_createController",value:function(t,e){return new(0,e.type)(h({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange,makeViewport:t._getViewport.bind(t)},e))}},{key:"_updateController",value:function(t,e,n,r){var i=t.controller;return i?(i=h(h(h(h({},e),t.props),i),{},{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height}),r?r.setProps(i):r=this._createController(t,i),r):null}},{key:"_rebuildViewports",value:function(){var t=this.width,e=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var o=n[i],a=this.getViewState(o),s=o.makeViewport({width:t,height:e,viewState:a});this.controllers[o.id]=this._updateController(o,a,s,r[o.id]),this._viewports.unshift(s)}for(var u in r)r[u]&&!this.controllers[u]&&r[u].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach((function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)}))}},{key:"_diffViews",value:function(t,e){return t.length!==e.length||t.some((function(n,r){return!t[r].equals(e[r])}))}}]),t}(),d=n(227),g=n(187);function y(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=new g.a,A=function(){function t(){Object(i.a)(this,t),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(o.a)(t,[{key:"setProps",value:function(t){"effects"in t&&(t.effects.length===this.effects.length&&Object(u.a)(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t,this._createInternalEffects()}},{key:"cleanup",value:function(){var t,e=y(this.effects);try{for(e.s();!(t=e.n()).done;){t.value.cleanup()}}catch(i){e.e(i)}finally{e.f()}var n,r=y(this._internalEffects);try{for(r.s();!(n=r.n()).done;){n.value.cleanup()}}catch(i){r.e(i)}finally{r.f()}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(t){return t instanceof g.a}))||this._internalEffects.push(m)}}]),t}(),b=n(126),_=n(233),w=n(101),x=n(167),E=n(10),O=n(307),S=n(249),T={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function P(t){var e=t.pickedColors,n=t.layers,r=t.deviceX,i=t.deviceY,o=t.deviceRadius,a=t.deviceRect;if(e){for(var s=a.x,u=a.y,l=a.width,f=a.height,h=o*o,p=-1,d=0,g=0;g<f;g++){var y=g+u-i,v=y*y;if(v>h)d+=4*l;else for(var m=0;m<l;m++){if(e[d+3]-1>=0){var A=m+s-r,b=A*A+v;b<=h&&(h=b,p=d)}d+=4}}if(p>=0){var _=e[p+3]-1,w=e.slice(p,p+4),x=n[_];if(x){var E=x.decodePickingColor(w),O=Math.floor(p/4/l);return{pickedColor:w,pickedLayer:x,pickedObjectIndex:E,pickedX:s+(p/4-O*l),pickedY:u+O}}c.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return T}function M(t){var e=t.pickInfo,n=t.viewports,r=t.pixelRatio,i=t.x,o=t.y,a=t.z,s={viewports:n}.viewports[0],u=s&&s.unproject([i-s.x,o-s.y],{targetZ:a});return{color:null,layer:null,index:-1,picked:!1,x:i,y:o,pixel:[i,o],coordinate:u,lngLat:u,devicePixel:e&&[e.pickedX,e.pickedY],pixelRatio:r}}function C(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,o=e.pickedColor,a=e.pickedLayer,s=e.pickedObjectIndex,u=a?[a]:[];if("hover"===r){var c=n.index,l=n.layerId,f=a&&a.props.id;if(f!==l||s!==c){if(f!==l){var h=i.find((function(t){return t.props.id===l}));h&&u.unshift(h)}n.layerId=f,n.index=s,n.info=null}}var p=M(t),d=new Map;return d.set(null,p),u.forEach((function(t){var e=Object.assign({},p);if(t===a&&(e.color=o,e.index=s,e.picked=!0),e=I({layer:t,info:e,mode:r}),t===a&&"hover"===r&&(n.info=e),e&&d.set(e.layer.id,e),"hover"===r&&t.props.autoHighlight){var i={pickingSelectedColor:a===t?o:null},u=t.props.highlightColor;a===t&&"function"===typeof u&&(i.pickingHighlightColor=u(e)),t.setModuleParameters(i),t.setNeedsRedraw()}})),d}function I(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||e;n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}function R(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j=function(){function t(e){Object(i.a)(this,t),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new S.a(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Object(o.a)(t,[{key:"setProps",value:function(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"onError"in t&&(this._onError=t.onError),"_pickable"in t&&(this._pickable=t._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(t){return this._pickClosestObject(t)}},{key:"pickObjects",value:function(t){return this._pickVisibleObjects(t)}},{key:"getLastPickedObject",value:function(t){var e=t.x,n=t.y,r=t.layers,i=t.viewports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,a=o&&o.layer&&o.layer.id,s=a?r.find((function(t){return t.id===a})):null,u=i[0]&&i[0].unproject([e,n]),c={x:e,y:n,coordinate:u,lngLat:u,layer:s};return s?Object.assign({},o,c):Object.assign(c,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var t=this.gl;return this.pickingFBO||(this.pickingFBO=new w.a(t),w.a.isSupported(t,{colorBufferFloat:!0})&&(this.depthFBO=new w.a(t),this.depthFBO.attach(Object(r.a)({},36064,new x.a(t,{format:Object(E.g)(t)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(t){if(!1===this._pickable)return null;var e=t.filter((function(t){return t.isPickable()&&!t.isComposite}));return e.length>255?(c.a.warn("Too many pickable layers, only picking the first 255")(),e.slice(0,255)):e.length?e:null}},{key:"_pickClosestObject",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.x,o=t.y,a=t.radius,s=void 0===a?0:a,u=t.depth,c=void 0===u?1:u,l=t.mode,f=void 0===l?"query":l,h=t.unproject3D,p=t.onViewportActive;if(!(e=this._getPickable(e)))return{result:[],emptyInfo:M({viewports:r,x:i,y:o})};this._resizeBuffer();for(var d,g=Object(E.c)(this.gl),y=Object(E.b)(this.gl,[i,o],!0),v=[y.x+Math.floor(y.width/2),y.y+Math.floor(y.height/2)],m=Math.round(s*g),A=this.pickingFBO,b=A.width,_=A.height,w=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:b,deviceHeight:_}),x=[],O={},S=0;S<c;S++){var T=P({pickedColors:w&&this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:p,deviceRect:w,pass:"picking:".concat(f),redrawReason:f}),layers:e,deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:w}),I=void 0;if(T.pickedLayer&&h&&this.depthFBO)I=this._drawAndSample({layers:[T.pickedLayer],views:n,viewports:r,onViewportActive:p,deviceRect:{x:T.pickedX,y:T.pickedY,width:1,height:1},pass:"picking:".concat(f),redrawReason:"pick-z",pickZ:!0})[0]*r[0].distanceScales.metersPerUnit[2]+r[0].position[2];if(T.pickedColor&&S+1<c){var k=T.pickedColor[3]-1;O[k]=!0,e[k].clearPickingColor(T.pickedColor)}var j,L=R((d=C({pickInfo:T,lastPickedInfo:this.lastPickedInfo,mode:f,layers:e,viewports:r,x:i,y:o,z:I,pixelRatio:g})).values());try{for(L.s();!(j=L.n()).done;){var N=j.value;N.layer&&x.push(N)}}catch(F){L.e(F)}finally{L.f()}if(!T.pickedColor)break}for(var D in O)e[D].restorePickingColors();return{result:x,emptyInfo:d&&d.get(null)}}},{key:"_pickVisibleObjects",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.x,o=t.y,a=t.width,s=void 0===a?1:a,u=t.height,l=void 0===u?1:u,f=t.mode,h=void 0===f?"query":f,p=t.maxObjects,d=void 0===p?null:p,g=t.onViewportActive;if(!(e=this._getPickable(e)))return[];this._resizeBuffer();for(var y=Object(E.c)(this.gl),v=Object(E.b)(this.gl,[i,o],!0),m=v.x,A=v.y+v.height,b=Object(E.b)(this.gl,[i+s,o+l],!0),_=b.x+b.width,w=b.y,x={x:m,y:w,width:_-m,height:A-w},O=function(t){var e=t.pickedColors,n=t.layers,r=new Map;if(e)for(var i=0;i<e.length;i+=4){var o=e[i+3]-1;if(o>=0){var a=e.slice(i,i+4),s=a.join(",");if(!r.has(s)){var u=n[o];u?r.set(s,{pickedColor:a,pickedLayer:u,pickedObjectIndex:u.decodePickingColor(a)}):c.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:g,deviceRect:x,pass:"picking:".concat(h),redrawReason:h}),layers:e}),S=new Map,T=Number.isFinite(d),P=0;P<O.length&&!(T&&S.size>=d);P++){var M=O[P],C={color:M.pickedColor,layer:null,index:M.pickedObjectIndex,picked:!0,x:i,y:o,width:s,height:l,pixelRatio:y};C=I({layer:M.pickedLayer,info:C,mode:h}),S.has(C.object)||S.set(C.object,C)}return Array.from(S.values())}},{key:"_drawAndSample",value:function(t){var e=t.layers,n=t.views,r=t.viewports,i=t.onViewportActive,o=t.deviceRect,a=t.pass,u=t.redrawReason,c=t.pickZ;if(Object(s.a)(o.width>0&&o.height>0),e.length<1)return null;var l=c?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,onError:this._onError,views:n,viewports:r,onViewportActive:i,pickingFBO:l,deviceRect:o,pass:a,redrawReason:u,pickZ:c});var f=o.x,h=o.y,p=o.width,d=o.height,g=new(c?Float32Array:Uint8Array)(p*d*4);return Object(O.c)(l,{sourceX:f,sourceY:h,sourceWidth:p,sourceHeight:d,target:g}),g}},{key:"_getPickingRect",value:function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,o=t.deviceHeight,a=Math.max(0,e-r),s=Math.max(0,n-r),u=Math.min(i,e+r+1)-a,c=Math.min(o,n+r+1)-s;return u<=0||c<=0?null:{x:a,y:s,width:u,height:c}}}]),t}(),L={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},N=function(){function t(e){Object(i.a)(this,t);var n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,L),n.appendChild(this.el))}return Object(o.a)(t,[{key:"setTooltip",value:function(t,e,n){var r=this.el;if("string"===typeof t)r.innerText=t;else{if(!t)return void(r.style.display="none");"text"in t&&(r.innerText=t.text),"html"in t&&(r.innerHTML=t.html),"className"in t&&(r.className=t.className),Object.assign(r.style,t.style)}r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),t}(),D=n(95),F=n(298),B=n(36),z=n(656),U=n(648),G=n(198),V=n(196),q=n(12),H=n(199),W=n.n(H),X={mousedown:1,mousemove:2,mouseup:4};!function(t){var e=t.prototype.handler;t.prototype.handler=function(t){var n=this.store;t.button>0&&(function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(function(e){return e.pointerId===t.pointerId}))||n.push(t)),e.call(this,t)}}(W.a.PointerEventInput),W.a.MouseInput.prototype.handler=function(t){var e=X[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};var Y=W.a.Manager,Q=W.a,Z=Q?[[Q.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Q.Rotate,{enable:!1}],[Q.Pinch,{enable:!1}],[Q.Swipe,{enable:!1}],[Q.Pan,{threshold:0,enable:!1}],[Q.Press,{enable:!1}],[Q.Tap,{event:"doubletap",taps:2,enable:!1}],[Q.Tap,{event:"anytap",enable:!1}],[Q.Tap,{enable:!1}]]:null,K={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},J={doubletap:["tap"]},$={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},tt=["keydown","keyup"],et=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],nt=["wheel","mousewheel","DOMMouseScroll"],rt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},it={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},ot=n(142),at=-1!==ot.b.indexOf("firefox"),st=nt,ut="wheel",ct=4.000244140625,lt=function(){function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},o),this.events=st.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent,!!ot.a&&{passive:!1})}))}return Object(o.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===ut&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){var e=t.deltaY;ot.c.WheelEvent&&(at&&t.deltaMode===ot.c.WheelEvent.DOM_DELTA_PIXEL&&(e/=ot.c.devicePixelRatio),t.deltaMode===ot.c.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%ct===0&&(e=Math.floor(e/ct)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:ut,center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),ft=et,ht="pointermove",pt="pointerover",dt="pointerout",gt="pointerleave",yt=function(){function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},o),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=ft.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return Object(o.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===ht&&(this.enableMoveEvent=e),t===pt&&(this.enableOverEvent=e),t===dt&&(this.enableOutEvent=e),t===gt&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}},{key:"handleOverEvent",value:function(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:pt,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleOutEvent",value:function(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:dt,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleLeaveEvent",value:function(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:gt,srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleMoveEvent",value:function(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:ht,srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),vt=tt,mt="keydown",At="keyup",bt=function(){function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},o),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=vt.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=o.tabIndex||0,e.style.outline="none",this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return Object(o.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){t===mt&&(this.enableDownEvent=e),t===At&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:mt,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:At,srcEvent:t,key:t.key,target:t.target}))}}]),t}(),_t="contextmenu",wt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return Object(o.a)(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(t,e){t===_t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){this.options.enable&&this.callback({type:_t,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),xt=n(22),Et={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var Ot={srcElement:"root",priority:0},St=function(){function t(e){Object(i.a)(this,t),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(o.a)(t,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.handlers,a=this.handlersByElement;n&&("object"!==Object(xt.a)(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},Ot,n):Ot;var s=a.get(n.srcElement);s||(s=[],a.set(n.srcElement,s));var u={type:t,handler:e,srcElement:n.srcElement,priority:n.priority};r&&(u.once=!0),i&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;for(var c=s.length-1;c>=0&&!(s[c].priority>=u.priority);)c--;s.splice(c+1,0,u)}},{key:"remove",value:function(t,e){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=n.some((function(t){return!t.passive}))}},{key:"handleEvent",value:function(t){if(!this.isEmpty()){for(var e=this._normalizeEvent(t),n=t.srcEvent.target;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")}}},{key:"_emit",value:function(t,e){var n=this.handlersByElement.get(e);if(n){for(var r=!1,i=function(){t.handled=!0},o=function(){t.handled=!0,r=!0},a=[],s=0;s<n.length;s++){var u=n[s],c=u.type,l=u.handler,f=u.once;if(l(Object.assign({},t,{type:c,stopPropagation:i,stopImmediatePropagation:o})),f&&a.push(n[s]),r)break}for(var h=0;h<a.length;h++){var p=a[h],d=p.type,g=p.handler;this.remove(d,g)}}}},{key:"_normalizeEvent",value:function(t){var e=this.eventManager.element;return Object.assign({},t,function(t){var e=Et[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,u=!1;return 4===e||2===e&&!Number.isFinite(r)?(a=1===o,s=2===o,u=3===o):2===e?(a=Boolean(1&r),s=Boolean(4&r),u=Boolean(2&r)):1===e&&(a=0===i,s=1===i,u=2===i),{leftButton:a,middleButton:s,rightButton:u}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth,a=i.height/e.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}}]),t}();function Tt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Mt={events:null,recognizers:null,recognizerOptions:{},Manager:Y,touchAction:"none",tabIndex:0},Ct=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.options=Object.assign({},Mt,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return Object(o.a)(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;for(var i in this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||Z}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(K).forEach((function(t){var n=e.manager.get(t);n&&K[t].forEach((function(t){n.recognizeWith(t)}))})),n.recognizerOptions){var o=this.manager.get(i);if(o){var a=n.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new lt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new yt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new bt(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new wt(t,this._onOtherEvent,{enable:!1});var s,u=Tt(this.events);try{for(u.s();!(s=u.n()).done;){var c=Object(q.a)(s.value,2),l=c[0],f=c[1];f.isEmpty()||(this._toggleRecognizer(f.recognizerName,!0),this.manager.on(l,f.handleEvent))}}catch(h){u.e(h)}finally{u.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){this._addEventHandler(t,e,n,!1)}},{key:"once",value:function(t,e,n){this._addEventHandler(t,e,n,!0)}},{key:"watch",value:function(t,e,n){this._addEventHandler(t,e,n,!1,!0)}},{key:"off",value:function(t,e){this._removeEventHandler(t,e)}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});var i=J[t];i&&!this.options.recognizers&&i.forEach((function(i){var o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e,n,r,i){if("string"===typeof t){var o=this.manager,a=this.events,s=it[t]||t,u=a.get(s);u||(u=new St(this),a.set(s,u),u.recognizerName=rt[s]||s,o&&o.on(s,u.handleEvent)),u.add(t,e,n,r,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}else for(var c in n=e,t)this._addEventHandler(c,t[c],n,r,i)}},{key:"_removeEventHandler",value:function(t,e){if("string"===typeof t){var n=this.events,r=it[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){var o,a=i.recognizerName,s=!1,u=Tt(n.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.recognizerName===a&&!c.isEmpty()){s=!0;break}}}catch(f){u.e(f)}finally{u.f()}s||this._toggleRecognizer(a,!1)}}else for(var l in t)this._removeEventHandler(l,t[l])}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=$[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}(),It=n(24);function Rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nt(){}var Dt={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Nt,onResize:Nt,onViewStateChange:Nt,onBeforeRender:Nt,onAfterRender:Nt,onLoad:Nt,onError:null,_onMetrics:null,getCursor:function(t){return t.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Ft=function(){function t(e){Object(i.a)(this,t),e=Object.assign({},Dt,e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.viewState&&e.initialViewState&&c.a.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Object(B.getBrowser)()&&c.a.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new V.a({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&D.a.setProps(e._typedArrayManagerProps),this.animationLoop.start()}return Object(o.a)(t,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&c.a.removed("onLayerHover","onHover")(),"onLayerClick"in t&&c.a.removed("onLayerClick","onClick")(),t.initialViewState&&!Object(u.a)(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);var e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o}},{key:"redraw",value:function(t){if(this.layerManager){var e=t||this.needsRedraw({clearRedrawFlags:!0});e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}},{key:"pickMultipleObjects",value:function(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}},{key:"pickObjects",value:function(t){return this._pick("pickObjects","pickObjects Time",t)}},{key:"_addResources",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}},{key:"_removeResources",value:function(t){var e,n=jt(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.layerManager.resourceManager.remove(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_pick",value:function(t,e,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(e).timeStart();var i=this.deckPicker[t](Object.assign({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport},n));return r.get(e).timeEnd(),i}},{key:"_createCanvas",value:function(t){var e=t.canvas;("string"===typeof e&&(e=document.getElementById(e),Object(s.a)(e)),e)||(e=document.createElement("canvas"),(t.parent||document.body).appendChild(e));var n=t.id,r=t.style;return e.id=n,Object.assign(e.style,r),e}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?"".concat(e,"px"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;if(!t)return!1;var e=t.clientWidth||t.width,n=t.clientHeight||t.height;return(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,o=t.glOptions,a=t.debug,s=t.useDevicePixels,u=t.autoResizeDrawingBuffer;return new z.a({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:u,autoResizeViewport:!1,gl:i,onCreateContext:function(t){return Object(E.a)(Object.assign({},o,t,{canvas:e.canvas,debug:a}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender,onError:t.onError})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var t=this.props.views||[new d.a({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}},{key:"_onPointerMove",value:function(t){var e=this._pickRequest;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;var n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t,e.mode="hover"}},{key:"_pickAndCallback",value:function(){var t=this._pickRequest;if(t.event){var e,n=this._pick("pickObject","pickObject Time",t),r=n.result,i=n.emptyInfo,o=!1,a=jt(r);try{for(a.s();!(e=a.n()).done;){var s=e.value;i=s,o=s.layer.onHover(s,t.event)}}catch(c){a.e(c)}finally{a.f()}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip){var u=this.props.getTooltip(i);this.tooltip.setTooltip(u,i.x,i.y)}t.event=null}}},{key:"_updateCursor",value:function(){var t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(t){if(!this.layerManager){this.canvas||(this.canvas=t.canvas,Object(E.e)(t,{enable:!0,copyState:!0})),this.tooltip=new N(this.canvas),Object(E.k)(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);var e=new U.a;for(var n in e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new Ct(this.props.parent||t.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),It.b)this.eventManager.on(n,this._onEvent);this.viewManager=new p({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new a.a(t,{deck:this,stats:this.stats,viewport:r,timeline:e}),this.effectManager=new A,this.deckRenderer=new _.a(t),this.deckPicker=new j(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t,e){var n=this.layerManager.context.gl;Object(E.k)(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects()},e)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(t){var e=t.gl;this._setGLContext(e)}},{key:"_onRenderFrame",value:function(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),c.a.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=kt(kt({},this.viewState),{},Object(r.a)({},t.viewId,e)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onEvent",value:function(t){var e=It.b[t.type],n=t.offsetCenter;if(e&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),o=i.layer,a=o&&(o[e.handler]||o.props[e.handler]),s=this.props[e.handler],u=!1;a&&(u=a.call(o,i,t)),!u&&s&&s(i,t)}}},{key:"_onPointerDown",value:function(t){var e=t.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:e.x,y:e.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var t=this.stats;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();var e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var t=this.metrics,e=this.stats;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();var n=G.a.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}]),t}();Ft.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(b.a)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}},Ft.defaultProps=Dt,Ft.VERSION=F.a.VERSION},function(t,e,n){"use strict";n.d(e,"a",(function(){return et}));var r=n(0),i=n(1),o=n(2),a=n(15),s=n(5),u=n(6),c=n(3),l=n(22),f=n(315),h=n(316),p=n(26),d=n(153),g=n(10),y=n(657),v=n(13),m=n(143),A=n(31),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id;this.id=n||Object(m.c)(this.constructor.name),this.display=!0,this.position=new v.Vector3,this.rotation=new v.Vector3,this.scale=new v.Vector3(1,1,1),this.matrix=new v.Matrix4,this.userData={},this.props={},this._setScenegraphNodeProps(e)}return Object(o.a)(t,[{key:"delete",value:function(){}},{key:"setProps",value:function(t){return this._setScenegraphNodeProps(t),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(t){return Object(A.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return Object(A.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return Object(A.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrix",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.matrix.copy(t):this.matrix=t}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,r=t.scale,i=t.update,o=void 0===i||i;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,r=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){Object(A.a)(t),e=e||this.matrix;var n=new v.Matrix4(t).multiplyRight(e),r=n.invert(),i=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"_setScenegraphNodeProps",value:function(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}]),t}(),_=n(53),w=n(90),x=n(18),E=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var r=n=Array.isArray(n)?{children:n}:n,o=r.children,a=void 0===o?[]:o;return g.h.assert(a.every((function(t){return t instanceof b})),"every child must an instance of ScenegraphNode"),(t=Object(u.a)(this,Object(c.a)(e).call(this,n))).children=a,t}return Object(s.a)(e,t),Object(o.a)(e,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];Array.isArray(o)?this.add.apply(this,Object(x.a)(o)):this.children.push(o)}return this}},{key:"remove",value:function(t){var e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach((function(t){return t.delete()})),this.removeAll(),Object(a.a)(Object(c.a)(e.prototype),"delete",this).call(this)}},{key:"traverse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.worldMatrix,i=void 0===r?new v.Matrix4:r,o=new v.Matrix4(i).multiplyRight(this.matrix),a=!0,s=!1,u=void 0;try{for(var c,l=this.children[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;f instanceof e?f.traverse(t,{worldMatrix:o}):t(f,{worldMatrix:o})}}catch(h){s=!0,u=h}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}}]),e}(b),O={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function T(t){if(!t._animation){var e=S[t.componentType],n=O[t.type],r=n*t.count,i=t.bufferView.data,o=new e(i.buffer,i.byteOffset+(t.byteOffset||0),r);if(1===n)t._animation=Array.from(o);else{for(var a=[],s=0;s<o.length;s+=n)a.push(Array.from(o.slice(s,s+n)));t._animation=a}}return t._animation}var P=new v.Matrix4;var M=new v.Quaternion;function C(t,e,n,r){var i=e.input,o=e.interpolation,a=e.output,s=t%i[i.length-1],u=i.findIndex((function(t){return t>=s})),c=Math.max(0,u-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:g.h.warn("Bad animation path ".concat(r))()}Object(A.a)(n[r].length===a[c].length);var l=i[c],f=i[u];switch(o){case"STEP":!function(t,e,n){for(var r=0;r<n.length;r++)t[e][r]=n[r]}(n,r,a[c]);break;case"LINEAR":if(f>l){var h=(s-l)/(f-l);!function(t,e,n,r,i){if("rotation"===e){M.slerp({start:n,target:r,ratio:i});for(var o=0;o<M.length;o++)t[e][o]=M[o]}else for(var a=0;a<n.length;a++)t[e][a]=i*r[a]+(1-i)*n[a]}(n,r,a[c],a[u],h)}break;case"CUBICSPLINE":if(f>l){var p=(s-l)/(f-l),d=f-l;!function(t,e,n){for(var r=n.p0,i=n.outTangent0,o=n.inTangent1,a=n.p1,s=n.tDiff,u=n.ratio,c=0;c<t[e].length;c++){var l=i[c]*s,f=o[c]*s;t[e][c]=(2*Math.pow(u,3)-3*Math.pow(u,2)+1)*r[c]+(Math.pow(u,3)-2*Math.pow(u,2)+u)*l+(-2*Math.pow(u,3)+3*Math.pow(u,2))*a[c]+(Math.pow(u,3)-Math.pow(u,2))*f}}(n,r,{p0:a[3*c+1],outTangent0:a[3*c+2],inTangent1:a[3*u+0],p1:a[3*u+1],tDiff:d,ratio:p})}break;default:g.h.warn("Interpolation ".concat(o," not supported"))()}}var I=function(){function t(e){Object(i.a)(this,t),this.startTime=0,this.playing=!0,this.speed=1,Object.assign(this,e)}return Object(o.a)(t,[{key:"animate",value:function(t){if(this.playing){var e=(t/1e3-this.startTime)*this.speed;this.channels.forEach((function(t){var n=t.sampler,r=t.target,i=t.path;C(e,n,r,i),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){var n=P.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)}))}}}]),t}(),R=function(){function t(e){Object(i.a)(this,t),this.animations=e.animations.map((function(t,n){var r=t.name||"Animation-".concat(n),i=t.samplers.map((function(t){var n=t.input,r=t.interpolation,i=void 0===r?"LINEAR":r,o=t.output;return{input:T(e.accessors[n]),interpolation:i,output:T(e.accessors[o])}})),o=t.channels.map((function(t){var n=t.sampler,r=t.target;return{sampler:i[n],target:e.nodes[r.node],path:r.path}}));return new I({name:r,channels:o})}))}return Object(o.a)(t,[{key:"animate",value:function(t){this.setTime(t)}},{key:"setTime",value:function(t){this.animations.forEach((function(e){return e.animate(t)}))}},{key:"getAnimations",value:function(){return this.animations}}]),t}(),k=n(252),j=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,r))).onBeforeRender=null,n.AfterRender=null,t instanceof k.a?(n.model=t,n._setModelNodeProps(r)):n.model=new k.a(t,r),n.managedResources=r.managedResources||[],n}return Object(s.a)(e,t),Object(o.a)(e,[{key:"setProps",value:function(t){return Object(a.a)(Object(c.a)(e.prototype),"setProps",this).call(this,t),this._setModelNodeProps(t),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((function(t){return t.delete()})),this.managedResources=[]}},{key:"draw",value:function(){var t;return(t=this.model).draw.apply(t,arguments)}},{key:"setUniforms",value:function(){var t;return(t=this.model).setUniforms.apply(t,arguments),this}},{key:"setAttributes",value:function(){var t;return(t=this.model).setAttributes.apply(t,arguments),this}},{key:"updateModuleSettings",value:function(){var t;return(t=this.model).updateModuleSettings.apply(t,arguments),this}},{key:"_setModelNodeProps",value:function(t){this.model.setProps(t)}}]),e}(b),L=n(631),N=n(301),D=n(167),F=function(){function t(e,n){var r=n.attributes,o=n.material,a=n.pbrDebug,s=n.imageBasedLightingEnvironment,u=n.lights,c=n.useTangents;Object(i.a)(this,t),this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Object(L.b)(e,N.a.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),a&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(u,"USE_LIGHTS"),this.defineIfPresent(a,"PBR_DEBUG"),o&&this.parseMaterial(o)}return Object(o.a)(t,[{key:"defineIfPresent",value:function(t,e){t&&(this.defines[e]=1)}},{key:"parseTexture",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},o=new D.a(this.gl,{id:t.name||t.id,parameters:i,pixelStore:Object(r.a)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1),data:t.texture.source.image});this.uniforms[e]=o,this.defineIfPresent(n,n),this.generatedTextures.push(o)}},{key:"parsePbrMetallicRoughness",value:function(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var e=t.metallicFactor,n=void 0===e?1:e,r=t.roughnessFactor,i=void 0===r?1:r;this.uniforms.u_MetallicRoughnessValues=[n,i]}},{key:"parseMaterial",value:function(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var e=t.normalTexture.scale,n=void 0===e?1:e;this.uniforms.u_NormalScale=n}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var r=t.occlusionTexture.strength,i=void 0===r?1:r;this.uniforms.u_OcclusionStrength=i}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){var o=t.alphaCutoff,a=void 0===o?.5:o;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=a}else"BLEND"===t.alphaMode&&(g.h.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}]),t}();function B(t,e){return Object(g.g)(t)?"#version 300 es\n".concat(e):e}var z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},G=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.gl=e,this.options=Object.assign({},U,n)}return Object(o.a)(t,[{key:"instantiate",value:function(t){var e=this;return this.gltf=t,(t.scenes||[]).map((function(t){return e.createScene(t)}))}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new R(this.gltf):null}},{key:"createScene",value:function(t){var e=this,n=(t.nodes||[]).map((function(t){return e.createNode(t)}));return new E({id:t.name||t.id,children:n})}},{key:"createNode",value:function(t){var e=this;if(!t._node){var n=(t.children||[]).map((function(t){return e.createNode(t)}));t.mesh&&n.push(this.createMesh(t.mesh));var r=new E({id:t.name||t.id,children:n});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){var i=(new v.Matrix4).fromQuaternion(t.rotation);r.matrix.multiplyRight(i)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}},{key:"createMesh",value:function(t){var e=this;if(!t._mesh){var n=(t.primitives||[]).map((function(n,r){return e.createPrimitive(n,r,t)})),r=new E({id:t.name||t.id,children:n});t._mesh=r}return t._mesh}},{key:"getVertexCount",value:function(t){g.h.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(t,e,n){return function(t,e){var n=e.id,r=e.drawMode,i=e.vertexCount,o=e.attributes,a=e.modelOptions,s=new F(t,e);g.h.info(4,"createGLTFModel defines: ",s.defines)();var u=[];u.push.apply(u,Object(x.a)(s.generatedTextures)),u.push.apply(u,Object(x.a)(Object.values(o).map((function(t){return t.buffer}))));var c=new j(t,Object.assign({id:n,drawMode:r,vertexCount:i,modules:[y.a],defines:s.defines,parameters:s.parameters,vs:B(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:B(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:u},a));return c.setProps({attributes:o}),c.setUniforms(s.uniforms),c}(this.gl,Object.assign({id:t.name||"".concat(n.name||n.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options))}},{key:"createAttributes",value:function(t,e){var n=this,r={};return Object.keys(t).forEach((function(e){r[e]=n.createAccessor(t[e],n.createBuffer(t[e],n.gl.ARRAY_BUFFER))})),e&&(r.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),g.h.info(4,"glTF Attributes",{attributes:t,indices:e,generated:r})(),r}},{key:"createBuffer",value:function(t,e){t.bufferView||(t.bufferView={});var n=t.bufferView;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[e]||(n.lumaBuffers[e]=new _.a(this.gl,{id:"from-".concat(n.id),data:n.data||t.value,target:e})),n.lumaBuffers[e]}},{key:"createAccessor",value:function(t,e){return new w.a({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:z[t.type]})}},{key:"createSampler",value:function(t){return t}},{key:"needsPOT",value:function(){return!1}}]),t}();var V=n(4),q=n.n(V),H=n(11);function W(){return(W=Object(H.a)(q.a.mark((function t(e){var n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.scenes.forEach((function(t){t.traverse((function(t){Object.values(t.model.getUniforms()).forEach((function(t){!1===t.loaded&&n.push(t)}))}))})),t.next=4,X((function(){return n.some((function(t){return!t.loaded}))}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function X(t){return Y.apply(this,arguments)}function Y(){return(Y=Object(H.a)(q.a.mark((function t(e){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e()){t.next=5;break}return t.next=3,new Promise((function(t){return requestAnimationFrame(t)}));case 3:t.next=0;break;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Q=n(171);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var $=[255,255,255,255],tt={scenegraph:{type:"object",value:null,async:!0},getScene:function(t){return t&&t.scenes?"object"===Object(l.a)(t.scene)?t.scene:t.scenes[t.scene||0]:t},getAnimator:function(t){return t&&t.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:$},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},et=function(t){Object(s.a)(n,t);var e=J(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getShaders",value:function(){var t=[f.a,h.a];return"pbr"===this.props._lighting&&t.push(y.a),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:$,transition:!0},instanceModelMatrix:Q.a})}},{key:"updateState",value:function(t){Object(a.a)(Object(c.a)(n.prototype),"updateState",this).call(this,t);var e=t.props,r=t.oldProps;e.scenegraph!==r.scenegraph?this._updateScenegraph(e):e._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,e._animations)}},{key:"finalizeState",value:function(){Object(a.a)(Object(c.a)(n.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(t){var e=this,n=this.context.gl,r=null;if(t.scenegraph instanceof b)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){var i=t.scenegraph,o=function(t,e,n){var r=new G(t,n);return{scenes:r.instantiate(e),animator:r.createAnimator()}}(n,i,this._getModelOptions());r=Object.assign({gltf:i},o),function(t){return W.apply(this,arguments)}(o).then((function(){return e.setNeedsRedraw()}))}else t.scenegraph&&(p.a.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);var a={layer:this,gl:n},s=t.getScene(r,a),u=t.getAnimator(r,a);s instanceof b?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,u,t._animations),this.setState({scenegraph:s,animator:u})):null!==s&&p.a.warn("invalid scenegraph:",s)()}},{key:"_applyAllAttributes",value:function(t){var e=this;if(this.state.attributesAvailable){var n=this.getAttributeManager().getAttributes();t.traverse((function(t){e._setModelAttributes(t.model,n)}))}}},{key:"_applyAnimationsProp",value:function(t,e,n){if(t&&e&&n){var r=e.getAnimations();Object.keys(n).sort().forEach((function(t){var e=n[t];if("*"===t)r.forEach((function(t){Object.assign(t,e)}));else if(Number.isFinite(Number(t))){var i=Number(t);i>=0&&i<r.length?Object.assign(r[i],e):p.a.warn("animation ".concat(t," not found"))()}else{var o=r.find((function(e){return e.name===t}));o?Object.assign(o,e):p.a.warn("animation ".concat(t," not found"))()}}))}}},{key:"_deleteScenegraph",value:function(){var t=this.state.scenegraph;t instanceof b&&t.delete()}},{key:"_getModelOptions",value:function(){var t=this.props._imageBasedLightingEnvironment,e=null;return t&&(e="function"===typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:e,modelOptions:K({isInstanced:!0,transpileToGLSL100:!Object(g.g)(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(t){var e=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((function(n){e._setModelAttributes(n.model,t)}))}},{key:"draw",value:function(t){var e=t.moduleParameters,n=void 0===e?null:e,r=t.parameters,i=void 0===r?{}:r,o=t.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(o.timeline.getTime()),this.setNeedsRedraw());var a=this.context.viewport,s=this.props,u=s.sizeScale,c=s.sizeMinPixels,l=s.sizeMaxPixels,f=s.opacity,h=s.coordinateSystem,p=this.getNumInstances();this.state.scenegraph.traverse((function(t,e){var r=e.worldMatrix;t.model.setInstanceCount(p),t.updateModuleSettings(n),t.draw({parameters:i,uniforms:{sizeScale:u,opacity:f,sizeMinPixels:c,sizeMaxPixels:l,composeModelMatrix:Object(Q.b)(a,h),sceneModelMatrix:r,u_Camera:t.model.getUniforms().project_uCameraPosition}})}))}}}]),n}(d.a);et.layerName="ScenegraphLayer",et.defaultProps=tt},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(0),i=n(1),o=n(2),a=n(15),s=n(5),u=n(6),c=n(3),l=n(24),f=n(315),h=n(316),p=n(153),d=n(252),g=n(87),y=n(34),v=n(13),m=new Uint16Array([0,2,1,0,3,2]),A=new Float32Array([0,1,0,0,1,0,1,1]);function b(t,e){if(!e)return function(t){for(var e=new Float64Array(12),n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:m,texCoords:A}}(t);for(var n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),u=new Float32Array(i*o*2),c=new Float64Array(i*o*3),l=0,f=0,h=0;h<i;h++)for(var p=h/(i-1),d=0;d<o;d++){var g=d/(o-1),y=_(t,p,g);c[3*l+0]=y[0],c[3*l+1]=y[1],c[3*l+2]=y[2]||0,u[2*l+0]=p,u[2*l+1]=1-g,h>0&&d>0&&(s[f++]=l-o,s[f++]=l-o-1,s[f++]=l-1,s[f++]=l-o,s[f++]=l-1,s[f++]=l),l++}return{vertexCount:a,positions:c,indices:s,texCoords:u}}function _(t,e,n){return Object(v.lerp)(Object(v.lerp)(t[0],t[1],n),Object(v.lerp)(t[3],t[2],n),e)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var E={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:l.a.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}},O=function(t){Object(s.a)(n,t);var e=x(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getShaders",value:function(){return Object(a.a)(Object(c.a)(n.prototype),"getShaders",this).call(this,{vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:"\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[f.a,h.a]})}},{key:"initializeState",value:function(){var t=this,e=this.getAttributeManager();e.remove(["instancePickingColors"]);var n=!0;e.add({indices:{size:1,isIndexed:!0,update:function(e){return e.value=t.state.mesh.indices},noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:function(e){return e.value=t.state.mesh.positions},noAlloc:n},texCoords:{size:2,update:function(e){return e.value=t.state.mesh.texCoords},noAlloc:n}})}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps;if(t.changeFlags.extensionsChanged){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}var o=this.getAttributeManager();if(e.bounds!==n.bounds){var a=this.state.mesh,s=this._createMesh();for(var u in this.state.model.setVertexCount(s.vertexCount),s)a&&a[u]!==s[u]&&o.invalidate(u);this.setState(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({mesh:s},this._getCoordinateUniforms()))}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}},{key:"_createMesh",value:function(){var t=this.props.bounds,e=t;return Number.isFinite(t[0])&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),b(e,this.context.viewport.resolution)}},{key:"_getModel",value:function(t){return t?new d.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new g.a({drawMode:4,vertexCount:6}),isInstanced:!1})):null}},{key:"draw",value:function(t){var e=t.uniforms,n=this.state,r=n.model,i=n.coordinateConversion,o=n.bounds,a=this.props,s=a.image,u=a.desaturate,c=a.transparentColor,l=a.tintColor;s&&r&&r.setUniforms(e).setUniforms({bitmapTexture:s,desaturate:u,transparentColor:c.map((function(t){return t/255})),tintColor:l.slice(0,3).map((function(t){return t/255})),coordinateConversion:i,bounds:o}).draw()}},{key:"_getCoordinateUniforms",value:function(){var t=l.a.LNGLAT,e=l.a.CARTESIAN,n=l.a.DEFAULT,r=this.props._imageCoordinateSystem;if(r!==n){var i=this.props.bounds;if(!Number.isFinite(i[0]))throw new Error("_imageCoordinateSystem only supports rectangular bounds");var o=this.context.viewport.resolution?t:e;if((r=r===t?t:e)===t&&o===e)return{coordinateConversion:-1,bounds:i};if(r===e&&o===t){var a=Object(y.l)([i[0],i[1]]),s=Object(y.l)([i[2],i[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],s[0],s[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}]),n}(p.a);O.layerName="BitmapLayer",O.defaultProps=E},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(315),l=n(316),f=n(153),h=n(252),p=n(87);function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var g=[0,0,0,255],y={getSourcePosition:{type:"accessor",value:function(t){return t.sourcePosition}},getTargetPosition:{type:"accessor",value:function(t){return t.targetPosition}},getSourceColor:{type:"accessor",value:g},getTargetColor:{type:"accessor",value:g},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},v=function(t){Object(a.a)(n,t);var e=d(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){return Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  float unitZ = dh == 0.0 ? 0.0 : deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n\n    if (useShortestPath) {\n      float thresholdRatio = -source.x / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < 0.0) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:g},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:g},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.widthUnits,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,u=r.greatCircle,c=r.wrapLongitude,l="pixels"===i?n.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({greatCircle:u,widthScale:o*l,widthMinPixels:a,widthMaxPixels:s,useShortestPath:c}).draw()}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<50;n++)e=e.concat([n,1,0,n,-1,0]);var r=new h.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new p.a({drawMode:5,attributes:{positions:new Float32Array(e)}}),isInstanced:!0}));return r.setUniforms({numSegments:50}),r}},{key:"wrapLongitude",get:function(){return!1}}]),n}(f.a);v.layerName="ArcLayer",v.defaultProps=y},function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(315),l=n(658),f=n(316),h=n(153),p=n(252),d=n(87);function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var y=[0,0,0,255],v=[0,0,1],m={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(t){return t.position}},getNormal:{type:"accessor",value:v},getColor:{type:"accessor",value:y},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};var A=function(t){Object(a.a)(n,t);var e=g(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){return Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * radiusPixels, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:v},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:y}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),i.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}i.dataChanged&&function(t){var e=t.header,n=t.attributes;e&&n&&(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}(e.data)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.pointSize,o="meters"===r.sizeUnits?1/n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},e,{radiusPixels:i*o})).draw()}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<3;n++){var r=n/3*Math.PI*2;e.push(2*Math.cos(r),2*Math.sin(r),0)}return new p.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new d.a({drawMode:4,attributes:{positions:new Float32Array(e)}}),isInstanced:!0}))}}]),n}(h.a);A.layerName="PointCloudLayer",A.defaultProps=m},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(1),i=n(2),o=n(15),a=n(5),s=n(6),u=n(3),c=n(26),l=n(315),f=n(658),h=n(316),p=n(153),d=n(87),g=n(10),y=n(167),v=n(252),m=n(631),A=n(301),b=n(171);function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}function w(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),c.a.assert(t.positions||t.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function x(t,e){if(t.attributes)return w(t.attributes,e),t instanceof d.a?t:new d.a(t);if(t.positions||t.POSITION)return w(t,e),new d.a({attributes:t});throw Error("Invalid mesh")}var E={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},O=function(t){Object(a.a)(n,t);var e=_(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"getShaders",value:function(){var t=!Object(g.g)(this.context.gl),e={};return Object(m.b)(this.context.gl,A.a.GLSL_DERIVATIVES)&&(e.DERIVATIVES_AVAILABLE=1),Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[l.a,f.b,h.a],transpileToGLSL100:t,defines:e})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:b.a}),this.setState({emptyTexture:new y.a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),e.mesh!==r.mesh||i.extensionsChanged){if(this.state.model&&this.state.model.delete(),e.mesh){this.setState({model:this.getModel(e.mesh)});var a=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(a.NORMAL||a.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==r.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){Object(o.a)(Object(u.a)(n.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete()}},{key:"draw",value:function(t){var e=t.uniforms;if(this.state.model){var n=this.context.viewport,r=this.props,i=r.sizeScale,o=r.coordinateSystem,a=r._instanced;this.state.model.draw({uniforms:Object.assign({},e,{sizeScale:i,composeModelMatrix:!a||Object(b.b)(n,o),flatShading:!this.state.hasNormals})})}}},{key:"getModel",value:function(t){var e=new v.a(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:x(t,this.props._useMeshColors),isInstanced:!0})),n=this.props.texture,r=this.state.emptyTexture;return e.setUniforms({sampler:n||r,hasTexture:Boolean(n)}),e}},{key:"setTexture",value:function(t){this.context.gl;var e=this.state,n=e.emptyTexture,r=e.model;r&&r.setUniforms({sampler:t||n,hasTexture:Boolean(t)})}}]),n}(p.a);O.layerName="SimpleMeshLayer",O.defaultProps=E},function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n(1),i=n(2),o=n(5),a=n(6),s=n(3),u=n(26),c=n(296),l=n(230),f=n(137),h=n(154),p=n(243);function d(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=n.startRow,o=void 0===i?0:i,a=n.endRow,s=void 0===a?t.length:a,c=o;c<s;c++){var l=t[c];u.a.assert(l&&l.geometry,"GeoJSON does not have geometry");var f=l.geometry;if("GeometryCollection"===f.type){u.a.assert(Array.isArray(f.geometries),"GeoJSON does not have geometries array");for(var h=f.geometries,p=0;p<h.length;p++){var d=h[p];g(d,r,e,l,c)}}else g(f,r,e,l,c)}return r}function g(t,e,n,r,i){var o=t.type,a=t.coordinates,s=e.pointFeatures,c=e.lineFeatures,l=e.polygonFeatures,f=e.polygonOutlineFeatures;if(function(t,e){var n=y[t];u.a.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,a))switch(o){case"Point":s.push(n({geometry:t},r,i));break;case"MultiPoint":a.forEach((function(t){s.push(n({geometry:{type:"Point",coordinates:t}},r,i))}));break;case"LineString":c.push(n({geometry:t},r,i));break;case"MultiLineString":a.forEach((function(t){c.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"Polygon":l.push(n({geometry:t},r,i)),a.forEach((function(t){f.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"MultiPolygon":a.forEach((function(t){l.push(n({geometry:{type:"Polygon",coordinates:t}},r,i)),t.forEach((function(t){f.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}))}))}else u.a.warn("".concat(o," coordinates are malformed"))()}var y={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function v(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var b=[0,0,0,255],_={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusUnits:"meters",pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:b},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};function w(t){return t.geometry.coordinates}var x=function(t){Object(o.a)(n,t);var e=A(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"initializeState",value:function(){this.state={features:{}},this.props.getLineDashArray&&u.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=t.props,n=t.changeFlags;if(n.dataChanged){var r=function(t){if(Array.isArray(t))return t;switch(u.a.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return u.a.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),i=this.getSubLayerRow.bind(this);if(Array.isArray(n.dataChanged)){var o=this.state.features,a={},s={};for(var c in o)a[c]=o[c].slice(),s[c]=[];var l,f=v(n.dataChanged);try{for(f.s();!(l=f.n()).done;){var h=l.value,g=d(r,i,h);for(var y in o)s[y].push(Object(p.a)({data:a[y],getIndex:function(t){return t.__source.index},dataRange:h,replace:g[y]}))}}catch(m){f.e(m)}finally{f.f()}this.setState({features:a,featuresDiff:s})}else this.setState({features:d(r,i),featuresDiff:{}})}}},{key:"renderLayers",value:function(){var t=this.state,e=t.features,n=t.featuresDiff,r=e.pointFeatures,i=e.lineFeatures,o=e.polygonFeatures,a=e.polygonOutlineFeatures,s=this.props,u=s.stroked,c=s.filled,p=s.extruded,d=s.wireframe,g=s.material,y=s.transitions,v=this.props,m=v.lineWidthUnits,A=v.lineWidthScale,_=v.lineWidthMinPixels,x=v.lineWidthMaxPixels,E=v.lineJointRounded,O=v.lineMiterLimit,S=v.pointRadiusUnits,T=v.pointRadiusScale,P=v.pointRadiusMinPixels,M=v.pointRadiusMaxPixels,C=v.elevationScale,I=v.lineDashJustified,R=this.props,k=R.getLineColor,j=R.getFillColor,L=R.getRadius,N=R.getLineWidth,D=R.getLineDashArray,F=R.getElevation,B=R.updateTriggers,z=this.getSubLayerClass("polygons-fill",h.a),U=this.getSubLayerClass("polygons-stroke",f.a),G=this.getSubLayerClass("line-strings",f.a),V=this.getSubLayerClass("points",l.a),q=this.shouldRenderSubLayer("polygons-fill",o)&&new z({_dataDiff:n.polygonFeatures&&function(){return n.polygonFeatures},extruded:p,elevationScale:C,filled:c,wireframe:d,material:g,getElevation:this.getSubLayerAccessor(F),getFillColor:this.getSubLayerAccessor(j),getLineColor:this.getSubLayerAccessor(p&&d?k:b),transitions:y&&{getPolygon:y.geometry,getElevation:y.getElevation,getFillColor:y.getFillColor,getLineColor:y.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:B.getElevation,getFillColor:B.getFillColor,lineColors:p&&d,getLineColor:B.getLineColor}}),{data:o,getPolygon:w});return[!p&&q,!p&&u&&this.shouldRenderSubLayer("polygons-stroke",a)&&new U({_dataDiff:n.polygonOutlineFeatures&&function(){return n.polygonOutlineFeatures},widthUnits:m,widthScale:A,widthMinPixels:_,widthMaxPixels:x,rounded:E,miterLimit:O,dashJustified:I,getColor:this.getSubLayerAccessor(k),getWidth:this.getSubLayerAccessor(N),getDashArray:this.getSubLayerAccessor(D),transitions:y&&{getPath:y.geometry,getColor:y.getLineColor,getWidth:y.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:B.getLineColor,getWidth:B.getLineWidth,getDashArray:B.getLineDashArray}}),{data:a,getPath:w}),this.shouldRenderSubLayer("linestrings",i)&&new G({_dataDiff:n.lineFeatures&&function(){return n.lineFeatures},widthUnits:m,widthScale:A,widthMinPixels:_,widthMaxPixels:x,rounded:E,miterLimit:O,dashJustified:I,getColor:this.getSubLayerAccessor(k),getWidth:this.getSubLayerAccessor(N),getDashArray:this.getSubLayerAccessor(D),transitions:y&&{getPath:y.geometry,getColor:y.getLineColor,getWidth:y.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:B.getLineColor,getWidth:B.getLineWidth,getDashArray:B.getLineDashArray}}),{data:i,getPath:w}),this.shouldRenderSubLayer("points",r)&&new V({_dataDiff:n.pointFeatures&&function(){return n.pointFeatures},stroked:u,filled:c,radiusUnits:S,radiusScale:T,radiusMinPixels:P,radiusMaxPixels:M,lineWidthUnits:m,lineWidthScale:A,lineWidthMinPixels:_,lineWidthMaxPixels:x,getFillColor:this.getSubLayerAccessor(j),getLineColor:this.getSubLayerAccessor(k),getRadius:this.getSubLayerAccessor(L),getLineWidth:this.getSubLayerAccessor(N),transitions:y&&{getPosition:y.geometry,getFillColor:y.getFillColor,getLineColor:y.getLineColor,getRadius:y.getRadius,getLineWidth:y.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:B.getFillColor,getLineColor:B.getLineColor,getRadius:B.getRadius,getLineWidth:B.getLineWidth}}),{data:r,getPosition:w,highlightedObjectIndex:this._getHighlightedIndex(r)}),p&&q]}},{key:"_getHighlightedIndex",value:function(t){var e=this.props.highlightedObjectIndex;return Number.isFinite(e)?t.findIndex((function(t){return t.__source.index===e})):null}}]),n}(c.a);x.layerName="GeoJsonLayer",x.defaultProps=_},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function a(){n&&(n=!1,t()),r&&u()}function s(){o(a)}function u(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,e);i=t}return u}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;a.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),c=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},l=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},f=v(0,0,0,0);function h(t){return parseFloat(t)||0}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+h(t["border-"+n+"-width"])}),0)}function d(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return f;var r=l(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=h(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=h(r.width),u=h(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=p(r,"left","right")+o),Math.round(u+a)!==n&&(u-=p(r,"top","bottom")+a)),!function(t){return t===l(t).document.documentElement}(t)){var c=Math.round(s+o)-e,d=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(d)&&(u-=d)}return v(i.left,i.top,s,u)}var g="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof l(t).SVGGraphicsElement}:function(t){return t instanceof l(t).SVGElement&&"function"===typeof t.getBBox};function y(t){return r?g(t)?function(t){var e=t.getBBox();return v(0,0,e.width,e.height)}(t):d(t):f}function v(t,e,n,r){return{x:t,y:e,width:n,height:r}}var m=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=y(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),A=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return c(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}(e);c(this,{target:t,contentRect:n})},b=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof l(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new m(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof l(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new A(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),_="undefined"!==typeof WeakMap?new WeakMap:new n,w=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new b(e,n,this);_.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){w.prototype[t]=function(){var e;return(e=_.get(this))[t].apply(e,arguments)}}));var x="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:w;e.a=x}).call(this,n(62))},function(t,e){function n(t,e,n){var r,i,o,a,s,u,c,l,f,h,p=0,d="FeatureCollection"===t.type,g="Feature"===t.type,y=d?t.features.length:1;for(r=0;r<y;r++)for(c=(h="GeometryCollection"===(f=d?t.features[r].geometry:g?t.geometry:t).type)?f.geometries.length:1,a=0;a<c;a++)if(l=(u=h?f.geometries[a]:f).coordinates,p=!n||"Polygon"!==u.type&&"MultiPolygon"!==u.type?0:1,"Point"===u.type)e(l);else if("LineString"===u.type||"MultiPoint"===u.type)for(i=0;i<l.length;i++)e(l[i]);else if("Polygon"===u.type||"MultiLineString"===u.type)for(i=0;i<l.length;i++)for(o=0;o<l[i].length-p;o++)e(l[i][o]);else{if("MultiPolygon"!==u.type)throw new Error("Unknown Geometry Type");for(i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)for(s=0;s<l[i][o].length-p;s++)e(l[i][o][s])}}function r(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}t.exports.coordEach=n,t.exports.coordReduce=function(t,e,r,i){return n(t,(function(t){r=e(r,t)}),i),r},t.exports.propEach=r,t.exports.propReduce=function(t,e,n){return r(t,(function(t){n=e(n,t)})),n},t.exports.featureEach=function(t,e){if("Feature"===t.type)e(t);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n])},t.exports.coordAll=function(t){var e=[];return n(t,(function(t){e.push(t)})),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(237),i=n(238);function o(t,e,n){return(o=Object(i.a)()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&Object(r.a)(o,n.prototype),o}).apply(null,arguments)}},function(t,e,n){(function(t,r){var i;(function(){var o,a="Expected a function",s="__lodash_hash_undefined__",u="__lodash_placeholder__",c=16,l=32,f=64,h=128,p=256,d=1/0,g=9007199254740991,y=NaN,v=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",f],["rearg",p]],A="[object Arguments]",b="[object Array]",_="[object Boolean]",w="[object Date]",x="[object Error]",E="[object Function]",O="[object GeneratorFunction]",S="[object Map]",T="[object Number]",P="[object Object]",M="[object Promise]",C="[object RegExp]",I="[object Set]",R="[object String]",k="[object Symbol]",j="[object WeakMap]",L="[object ArrayBuffer]",N="[object DataView]",D="[object Float32Array]",F="[object Float64Array]",B="[object Int8Array]",z="[object Int16Array]",U="[object Int32Array]",G="[object Uint8Array]",V="[object Uint8ClampedArray]",q="[object Uint16Array]",H="[object Uint32Array]",W=/\b__p \+= '';/g,X=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,K=RegExp(Q.source),J=RegExp(Z.source),$=/<%-([\s\S]+?)%>/g,tt=/<%([\s\S]+?)%>/g,et=/<%=([\s\S]+?)%>/g,nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,at=RegExp(ot.source),st=/^\s+|\s+$/g,ut=/^\s+/,ct=/\s+$/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,ht=/,? & /,pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/\\(\\)?/g,gt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,At=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xt=/($^)/,Et=/['\n\r\u2028\u2029\\]/g,Ot="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",Tt="a-z\\xdf-\\xf6\\xf8-\\xff",Pt="A-Z\\xc0-\\xd6\\xd8-\\xde",Mt="\\ufe0e\\ufe0f",Ct="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",It="['\u2019]",Rt="[\\ud800-\\udfff]",kt="["+Ct+"]",jt="["+Ot+"]",Lt="\\d+",Nt="[\\u2700-\\u27bf]",Dt="["+Tt+"]",Ft="[^\\ud800-\\udfff"+Ct+Lt+St+Tt+Pt+"]",Bt="\\ud83c[\\udffb-\\udfff]",zt="[^\\ud800-\\udfff]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",Gt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Pt+"]",qt="(?:"+Dt+"|"+Ft+")",Ht="(?:"+Vt+"|"+Ft+")",Wt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Xt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+jt+"|"+Bt+")"+"?",Qt="[\\ufe0e\\ufe0f]?",Zt=Qt+Yt+("(?:\\u200d(?:"+[zt,Ut,Gt].join("|")+")"+Qt+Yt+")*"),Kt="(?:"+[Nt,Ut,Gt].join("|")+")"+Zt,Jt="(?:"+[zt+jt+"?",jt,Ut,Gt,Rt].join("|")+")",$t=RegExp(It,"g"),te=RegExp(jt,"g"),ee=RegExp(Bt+"(?="+Bt+")|"+Jt+Zt,"g"),ne=RegExp([Vt+"?"+Dt+"+"+Wt+"(?="+[kt,Vt,"$"].join("|")+")",Ht+"+"+Xt+"(?="+[kt,Vt+qt,"$"].join("|")+")",Vt+"?"+qt+"+"+Wt,Vt+"+"+Xt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,Kt].join("|"),"g"),re=RegExp("[\\u200d\\ud800-\\udfff"+Ot+Mt+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ae=-1,se={};se[D]=se[F]=se[B]=se[z]=se[U]=se[G]=se[V]=se[q]=se[H]=!0,se[A]=se[b]=se[L]=se[_]=se[N]=se[w]=se[x]=se[E]=se[S]=se[T]=se[P]=se[C]=se[I]=se[R]=se[j]=!1;var ue={};ue[A]=ue[b]=ue[L]=ue[N]=ue[_]=ue[w]=ue[D]=ue[F]=ue[B]=ue[z]=ue[U]=ue[S]=ue[T]=ue[P]=ue[C]=ue[I]=ue[R]=ue[k]=ue[G]=ue[V]=ue[q]=ue[H]=!0,ue[x]=ue[E]=ue[j]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},le=parseFloat,fe=parseInt,he="object"==typeof t&&t&&t.Object===Object&&t,pe="object"==typeof self&&self&&self.Object===Object&&self,de=he||pe||Function("return this")(),ge=e&&!e.nodeType&&e,ye=ge&&"object"==typeof r&&r&&!r.nodeType&&r,ve=ye&&ye.exports===ge,me=ve&&he.process,Ae=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(e){}}(),be=Ae&&Ae.isArrayBuffer,_e=Ae&&Ae.isDate,we=Ae&&Ae.isMap,xe=Ae&&Ae.isRegExp,Ee=Ae&&Ae.isSet,Oe=Ae&&Ae.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Te(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Me(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Re(t,e){return!!(null==t?0:t.length)&&Ge(t,e,0)>-1}function ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ne(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function De(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Fe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Be=We("length");function ze(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ge(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,qe,n)}function Ve(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function qe(t){return t!==t}function He(t,e){var n=null==t?0:t.length;return n?Qe(t,e)/n:y}function We(t){return function(e){return null==e?o:e[t]}}function Xe(t){return function(e){return null==t?o:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Qe(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Ze(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ke(t){return function(e){return t(e)}}function Je(t,e){return je(e,(function(e){return t[e]}))}function $e(t,e){return t.has(e)}function tn(t,e){for(var n=-1,r=t.length;++n<r&&Ge(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length;n--&&Ge(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var rn=Xe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Xe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+ce[t]}function sn(t){return re.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function ln(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==u||(t[n]=u,o[i++]=n)}return o}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return sn(t)?function(t){var e=ee.lastIndex=0;for(;ee.test(t);)++e;return e}(t):Be(t)}function dn(t){return sn(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.split("")}(t)}var gn=Xe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function t(e){var n=(e=null==e?de:yn.defaults(de.Object(),e,yn.pick(de,oe))).Array,r=e.Date,i=e.Error,Ot=e.Function,St=e.Math,Tt=e.Object,Pt=e.RegExp,Mt=e.String,Ct=e.TypeError,It=n.prototype,Rt=Ot.prototype,kt=Tt.prototype,jt=e["__core-js_shared__"],Lt=Rt.toString,Nt=kt.hasOwnProperty,Dt=0,Ft=function(){var t=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Bt=kt.toString,zt=Lt.call(Tt),Ut=de._,Gt=Pt("^"+Lt.call(Nt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=ve?e.Buffer:o,qt=e.Symbol,Ht=e.Uint8Array,Wt=Vt?Vt.allocUnsafe:o,Xt=cn(Tt.getPrototypeOf,Tt),Yt=Tt.create,Qt=kt.propertyIsEnumerable,Zt=It.splice,Kt=qt?qt.isConcatSpreadable:o,Jt=qt?qt.iterator:o,ee=qt?qt.toStringTag:o,re=function(){try{var t=fo(Tt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ce=e.clearTimeout!==de.clearTimeout&&e.clearTimeout,he=r&&r.now!==de.Date.now&&r.now,pe=e.setTimeout!==de.setTimeout&&e.setTimeout,ge=St.ceil,ye=St.floor,me=Tt.getOwnPropertySymbols,Ae=Vt?Vt.isBuffer:o,Be=e.isFinite,Xe=It.join,vn=cn(Tt.keys,Tt),mn=St.max,An=St.min,bn=r.now,_n=e.parseInt,wn=St.random,xn=It.reverse,En=fo(e,"DataView"),On=fo(e,"Map"),Sn=fo(e,"Promise"),Tn=fo(e,"Set"),Pn=fo(e,"WeakMap"),Mn=fo(Tt,"create"),Cn=Pn&&new Pn,In={},Rn=Bo(En),kn=Bo(On),jn=Bo(Sn),Ln=Bo(Tn),Nn=Bo(Pn),Dn=qt?qt.prototype:o,Fn=Dn?Dn.valueOf:o,Bn=Dn?Dn.toString:o;function zn(t){if(ns(t)&&!Ha(t)&&!(t instanceof qn)){if(t instanceof Vn)return t;if(Nt.call(t,"__wrapped__"))return zo(t)}return new Vn(t)}var Un=function(){function t(){}return function(e){if(!es(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function Gn(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function qn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new Wn(t);this.size=e.size}function Zn(t,e){var n=Ha(t),r=!n&&qa(t),i=!n&&!r&&Qa(t),o=!n&&!r&&!i&&ls(t),a=n||r||i||o,s=a?Ze(t.length,Mt):[],u=s.length;for(var c in t)!e&&!Nt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ao(c,u))||s.push(c);return s}function Kn(t){var e=t.length;return e?t[Yr(0,e-1)]:o}function Jn(t,e){return No(Mi(t),sr(e,0,t.length))}function $n(t){return No(Mi(t))}function tr(t,e,n){(n!==o&&!Ua(t[e],n)||n===o&&!(e in t))&&or(t,e,n)}function er(t,e,n){var r=t[e];Nt.call(t,e)&&Ua(r,n)&&(n!==o||e in t)||or(t,e,n)}function nr(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function rr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function ir(t,e){return t&&Ci(e,Rs(e),t)}function or(t,e,n){"__proto__"==e&&re?re(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){for(var r=-1,i=e.length,a=n(i),s=null==t;++r<i;)a[r]=s?o:Ts(t,e[r]);return a}function sr(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function ur(t,e,n,r,i,a){var s,u=1&e,c=2&e,l=4&e;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!es(t))return t;var f=Ha(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return Mi(t,s)}else{var h=go(t),p=h==E||h==O;if(Qa(t))return xi(t,u);if(h==P||h==A||p&&!i){if(s=c||p?{}:vo(t),!u)return c?function(t,e){return Ci(t,po(t),e)}(t,function(t,e){return t&&Ci(e,ks(e),t)}(s,t)):function(t,e){return Ci(t,ho(t),e)}(t,ir(s,t))}else{if(!ue[h])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case L:return Ei(t);case _:case w:return new r(+t);case N:return function(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case D:case F:case B:case z:case U:case G:case V:case q:case H:return Oi(t,n);case S:return new r;case T:case R:return new r(t);case C:return function(t){var e=new t.constructor(t.source,yt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case I:return new r;case k:return i=t,Fn?Tt(Fn.call(i)):{}}var i}(t,h,u)}}a||(a=new Qn);var d=a.get(t);if(d)return d;a.set(t,s),ss(t)?t.forEach((function(r){s.add(ur(r,e,n,r,t,a))})):rs(t)&&t.forEach((function(r,i){s.set(i,ur(r,e,n,i,t,a))}));var g=f?o:(l?c?io:ro:c?ks:Rs)(t);return Pe(g||t,(function(r,i){g&&(r=t[i=r]),er(s,i,ur(r,e,n,i,t,a))})),s}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Tt(t);r--;){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new Ct(a);return Ro((function(){t.apply(o,n)}),e)}function fr(t,e,n,r){var i=-1,o=Re,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=je(e,Ke(n))),r?(o=ke,a=!1):e.length>=200&&(o=$e,a=!1,e=new Yn(e));t:for(;++i<s;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(e[h]===f)continue t;u.push(l)}else o(e,f,r)||u.push(l)}return u}zn.templateSettings={escape:$,evaluate:tt,interpolate:et,variable:"",imports:{_:zn}},zn.prototype=Gn.prototype,zn.prototype.constructor=zn,Vn.prototype=Un(Gn.prototype),Vn.prototype.constructor=Vn,qn.prototype=Un(Gn.prototype),qn.prototype.constructor=qn,Hn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(Mn){var n=e[t];return n===s?o:n}return Nt.call(e,t)?e[t]:o},Hn.prototype.has=function(t){var e=this.__data__;return Mn?e[t]!==o:Nt.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mn&&e===o?s:e,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=nr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,!0)},Wn.prototype.get=function(t){var e=this.__data__,n=nr(e,t);return n<0?o:e[n][1]},Wn.prototype.has=function(t){return nr(this.__data__,t)>-1},Wn.prototype.set=function(t,e){var n=this.__data__,r=nr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(On||Wn),string:new Hn}},Xn.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},Xn.prototype.get=function(t){return co(this,t).get(t)},Xn.prototype.has=function(t){return co(this,t).has(t)},Xn.prototype.set=function(t,e){var n=co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,s),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!On||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(t,e),this.size=n.size,this};var hr=ki(br),pr=ki(_r,!0);function dr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(u===o?s===s&&!cs(s):n(s,u)))var u=s,c=a}return c}function yr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=mo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):Le(i,s):r||(i[i.length]=s)}return i}var mr=ji(),Ar=ji(!0);function br(t,e){return t&&mr(t,e,Rs)}function _r(t,e){return t&&Ar(t,e,Rs)}function wr(t,e){return Ie(e,(function(e){return Ja(t[e])}))}function xr(t,e){for(var n=0,r=(e=Ai(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:o}function Er(t,e,n){var r=e(t);return Ha(t)?r:Le(r,n(t))}function Or(t){return null==t?t===o?"[object Undefined]":"[object Null]":ee&&ee in Tt(t)?function(t){var e=Nt.call(t,ee),n=t[ee];try{t[ee]=o;var r=!0}catch(a){}var i=Bt.call(t);r&&(e?t[ee]=n:delete t[ee]);return i}(t):function(t){return Bt.call(t)}(t)}function Sr(t,e){return t>e}function Tr(t,e){return null!=t&&Nt.call(t,e)}function Pr(t,e){return null!=t&&e in Tt(t)}function Mr(t,e,r){for(var i=r?ke:Re,a=t[0].length,s=t.length,u=s,c=n(s),l=1/0,f=[];u--;){var h=t[u];u&&e&&(h=je(h,Ke(e))),l=An(h.length,l),c[u]=!r&&(e||a>=120&&h.length>=120)?new Yn(u&&h):o}h=t[0];var p=-1,d=c[0];t:for(;++p<a&&f.length<l;){var g=h[p],y=e?e(g):g;if(g=r||0!==g?g:0,!(d?$e(d,y):i(f,y,r))){for(u=s;--u;){var v=c[u];if(!(v?$e(v,y):i(t[u],y,r)))continue t}d&&d.push(y),f.push(g)}}return f}function Cr(t,e,n){var r=null==(t=Po(t,e=Ai(e,t)))?t:t[Fo(Ko(e))];return null==r?o:Se(r,t,n)}function Ir(t){return ns(t)&&Or(t)==A}function Rr(t,e,n,r,i){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!==t&&e!==e:function(t,e,n,r,i,a){var s=Ha(t),u=Ha(e),c=s?b:go(t),l=u?b:go(e),f=(c=c==A?P:c)==P,h=(l=l==A?P:l)==P,p=c==l;if(p&&Qa(t)){if(!Qa(e))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new Qn),s||ls(t)?eo(t,e,n,r,i,a):function(t,e,n,r,i,o,a){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case _:case w:case T:return Ua(+t,+e);case x:return t.name==e.name&&t.message==e.message;case C:case R:return t==e+"";case S:var s=un;case I:var u=1&r;if(s||(s=fn),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=eo(s(t),s(e),r,i,o,a);return a.delete(t),l;case k:if(Fn)return Fn.call(t)==Fn.call(e)}return!1}(t,e,c,n,r,i,a);if(!(1&n)){var d=f&&Nt.call(t,"__wrapped__"),g=h&&Nt.call(e,"__wrapped__");if(d||g){var y=d?t.value():t,v=g?e.value():e;return a||(a=new Qn),i(y,v,n,r,a)}}if(!p)return!1;return a||(a=new Qn),function(t,e,n,r,i,a){var s=1&n,u=ro(t),c=u.length,l=ro(e).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var h=u[f];if(!(s?h in e:Nt.call(e,h)))return!1}var p=a.get(t),d=a.get(e);if(p&&d)return p==e&&d==t;var g=!0;a.set(t,e),a.set(e,t);var y=s;for(;++f<c;){var v=t[h=u[f]],m=e[h];if(r)var A=s?r(m,v,h,e,t,a):r(v,m,h,t,e,a);if(!(A===o?v===m||i(v,m,n,r,a):A)){g=!1;break}y||(y="constructor"==h)}if(g&&!y){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(t),a.delete(e),g}(t,e,n,r,i,a)}(t,e,n,r,Rr,i))}function kr(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=Tt(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=n[i])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===o&&!(c in t))return!1}else{var h=new Qn;if(r)var p=r(l,f,c,t,e,h);if(!(p===o?Rr(f,l,3,r,h):p))return!1}}return!0}function jr(t){return!(!es(t)||(e=t,Ft&&Ft in e))&&(Ja(t)?Gt:At).test(Bo(t));var e}function Lr(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Ha(t)?Ur(t[0],t[1]):zr(t):pu(t)}function Nr(t){if(!Eo(t))return vn(t);var e=[];for(var n in Tt(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Dr(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Eo(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}function Fr(t,e){return t<e}function Br(t,e){var r=-1,i=Xa(t)?n(t.length):[];return hr(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function zr(t){var e=lo(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(n){return n===t||kr(n,t,e)}}function Ur(t,e){return _o(t)&&Oo(e)?So(Fo(t),e):function(n){var r=Ts(n,t);return r===o&&r===e?Ps(n,t):Rr(e,r,3)}}function Gr(t,e,n,r,i){t!==e&&mr(e,(function(a,s){if(i||(i=new Qn),es(a))!function(t,e,n,r,i,a,s){var u=Co(t,n),c=Co(e,n),l=s.get(c);if(l)return void tr(t,n,l);var f=a?a(u,c,n+"",t,e,s):o,h=f===o;if(h){var p=Ha(c),d=!p&&Qa(c),g=!p&&!d&&ls(c);f=c,p||d||g?Ha(u)?f=u:Ya(u)?f=Mi(u):d?(h=!1,f=xi(c,!0)):g?(h=!1,f=Oi(c,!0)):f=[]:os(c)||qa(c)?(f=u,qa(u)?f=ms(u):es(u)&&!Ja(u)||(f=vo(c))):h=!1}h&&(s.set(c,f),i(f,c,r,a,s),s.delete(c));tr(t,n,f)}(t,e,s,n,Gr,r,i);else{var u=r?r(Co(t,s),a,s+"",t,e,i):o;u===o&&(u=a),tr(t,s,u)}}),ks)}function Vr(t,e){var n=t.length;if(n)return Ao(e+=e<0?n:0,n)?t[e]:o}function qr(t,e,n){e=e.length?je(e,(function(t){return Ha(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;return e=je(e,Ke(uo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Br(t,(function(t,n,i){return{criteria:je(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Si(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Hr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=xr(t,a);n(s,a)&&$r(o,Ai(a,t),s)}return o}function Wr(t,e,n,r){var i=r?Ve:Ge,o=-1,a=e.length,s=t;for(t===e&&(e=Mi(e)),n&&(s=je(t,Ke(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Zt.call(s,u,1),Zt.call(t,u,1);return t}function Xr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Ao(i)?Zt.call(t,i,1):fi(t,i)}}return t}function Yr(t,e){return t+ye(wn()*(e-t+1))}function Qr(t,e){var n="";if(!t||e<1||e>g)return n;do{e%2&&(n+=t),(e=ye(e/2))&&(t+=t)}while(e);return n}function Zr(t,e){return ko(To(t,e,iu),t+"")}function Kr(t){return Kn(Us(t))}function Jr(t,e){var n=Us(t);return No(n,sr(e,0,n.length))}function $r(t,e,n,r){if(!es(t))return t;for(var i=-1,a=(e=Ai(e,t)).length,s=a-1,u=t;null!=u&&++i<a;){var c=Fo(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var f=u[c];(l=r?r(f,c,u):o)===o&&(l=es(f)?f:Ao(e[i+1])?[]:{})}er(u,c,l),u=u[c]}return t}var ti=Cn?function(t,e){return Cn.set(t,e),t}:iu,ei=re?function(t,e){return re(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ni(t){return No(Us(t))}function ri(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=n(o);++i<o;)a[i]=t[i+e];return a}function ii(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!cs(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ai(t,e,iu,n)}function ai(t,e,n,r){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!==e,u=null===e,c=cs(e),l=e===o;i<a;){var f=ye((i+a)/2),h=n(t[f]),p=h!==o,d=null===h,g=h===h,y=cs(h);if(s)var v=r||g;else v=l?g&&(r||p):u?g&&p&&(r||!d):c?g&&p&&!d&&(r||!y):!d&&!y&&(r?h<=e:h<e);v?i=f+1:a=f}return An(a,4294967294)}function si(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ua(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ui(t){return"number"==typeof t?t:cs(t)?y:+t}function ci(t){if("string"==typeof t)return t;if(Ha(t))return je(t,ci)+"";if(cs(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,n){var r=-1,i=Re,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=ke;else if(o>=200){var c=e?null:Qi(t);if(c)return fn(c);a=!1,i=$e,u=new Yn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function fi(t,e){return null==(t=Po(t,e=Ai(e,t)))||delete t[Fo(Ko(e))]}function hi(t,e,n,r){return $r(t,e,n(xr(t,e)),r)}function pi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ri(t,r?0:o,r?o+1:i):ri(t,r?o+1:0,r?i:o)}function di(t,e){var n=t;return n instanceof qn&&(n=n.value()),Ne(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),n)}function gi(t,e,r){var i=t.length;if(i<2)return i?li(t[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=fr(a[o]||s,t[u],e,r));return li(vr(a,1),e,r)}function yi(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function vi(t){return Ya(t)?t:[]}function mi(t){return"function"==typeof t?t:iu}function Ai(t,e){return Ha(t)?t:_o(t,e)?[t]:Do(As(t))}var bi=Zr;function _i(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:ri(t,e,n)}var wi=ce||function(t){return de.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function Ei(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function Oi(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var n=t!==o,r=null===t,i=t===t,a=cs(t),s=e!==o,u=null===e,c=e===e,l=cs(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function Ti(t,e,r,i){for(var o=-1,a=t.length,s=r.length,u=-1,c=e.length,l=mn(a-s,0),f=n(c+l),h=!i;++u<c;)f[u]=e[u];for(;++o<s;)(h||o<a)&&(f[r[o]]=t[o]);for(;l--;)f[u++]=t[o++];return f}function Pi(t,e,r,i){for(var o=-1,a=t.length,s=-1,u=r.length,c=-1,l=e.length,f=mn(a-u,0),h=n(f+l),p=!i;++o<f;)h[o]=t[o];for(var d=o;++c<l;)h[d+c]=e[c];for(;++s<u;)(p||o<a)&&(h[d+r[s]]=t[o++]);return h}function Mi(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function Ci(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=r?r(n[u],t[u],u,n,t):o;c===o&&(c=t[u]),i?or(n,u,c):er(n,u,c)}return n}function Ii(t,e){return function(n,r){var i=Ha(n)?Te:rr,o=e?e():{};return i(n,t,uo(r,2),o)}}function Ri(t){return Zr((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,s&&bo(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=Tt(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e}))}function ki(t,e){return function(n,r){if(null==n)return n;if(!Xa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Tt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ji(t){return function(e,n,r){for(var i=-1,o=Tt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Li(t){return function(e){var n=sn(e=As(e))?dn(e):o,r=n?n[0]:e.charAt(0),i=n?_i(n,1).join(""):e.slice(1);return r[t]()+i}}function Ni(t){return function(e){return Ne(Js(qs(e).replace($t,"")),t,"")}}function Di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function Fi(t){return function(e,n,r){var i=Tt(e);if(!Xa(e)){var a=uo(n,3);e=Rs(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function Bi(t){return no((function(e){var n=e.length,r=n,i=Vn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Ct(a);if(i&&!u&&"wrapper"==ao(s))var u=new Vn([],!0)}for(r=u?r:n;++r<n;){var c=ao(s=e[r]),l="wrapper"==c?oo(s):o;u=l&&wo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[ao(l[0])].apply(u,l[3]):1==s.length&&wo(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ha(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function zi(t,e,r,i,a,s,u,c,l,f){var p=e&h,d=1&e,g=2&e,y=24&e,v=512&e,m=g?o:Di(t);return function o(){for(var h=arguments.length,A=n(h),b=h;b--;)A[b]=arguments[b];if(y)var _=so(o),w=nn(A,_);if(i&&(A=Ti(A,i,a,y)),s&&(A=Pi(A,s,u,y)),h-=w,y&&h<f){var x=ln(A,_);return Xi(t,e,zi,o.placeholder,r,A,x,c,l,f-h)}var E=d?r:this,O=g?E[t]:t;return h=A.length,c?A=Mo(A,c):v&&h>1&&A.reverse(),p&&l<h&&(A.length=l),this&&this!==de&&this instanceof o&&(O=m||Di(O)),O.apply(E,A)}}function Ui(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Gi(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=ui(n),r=ui(r)),i=t(n,r)}return i}}function Vi(t){return no((function(e){return e=je(e,Ke(uo())),Zr((function(n){var r=this;return t(e,(function(t){return Se(t,r,n)}))}))}))}function qi(t,e){var n=(e=e===o?" ":ci(e)).length;if(n<2)return n?Qr(e,t):e;var r=Qr(e,ge(t/pn(e)));return sn(e)?_i(dn(r),0,t).join(""):r.slice(0,t)}function Hi(t){return function(e,r,i){return i&&"number"!=typeof i&&bo(e,r,i)&&(r=i=o),e=ds(e),r===o?(r=e,e=0):r=ds(r),function(t,e,r,i){for(var o=-1,a=mn(ge((e-t)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=t,t+=r;return s}(e,r,i=i===o?e<r?1:-1:ds(i),t)}}function Wi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Xi(t,e,n,r,i,a,s,u,c,h){var p=8&e;e|=p?l:f,4&(e&=~(p?f:l))||(e&=-4);var d=[t,e,i,p?a:o,p?s:o,p?o:a,p?o:s,u,c,h],g=n.apply(o,d);return wo(t)&&Io(g,d),g.placeholder=r,jo(g,t,e)}function Yi(t){var e=St[t];return function(t,n){if(t=vs(t),(n=null==n?0:An(gs(n),292))&&Be(t)){var r=(As(t)+"e").split("e");return+((r=(As(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Qi=Tn&&1/fn(new Tn([,-0]))[1]==d?function(t){return new Tn(t)}:cu;function Zi(t){return function(e){var n=go(e);return n==S?un(e):n==I?hn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ki(t,e,r,i,s,d,g,y){var v=2&e;if(!v&&"function"!=typeof t)throw new Ct(a);var m=i?i.length:0;if(m||(e&=-97,i=s=o),g=g===o?g:mn(gs(g),0),y=y===o?y:gs(y),m-=s?s.length:0,e&f){var A=i,b=s;i=s=o}var _=v?o:oo(t),w=[t,e,r,i,s,A,b,d,g,y];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==p&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var c=t[3];t[3]=c?Ti(c,s,e[4]):s,t[4]=c?ln(t[3],u):e[4]}(s=e[5])&&(c=t[5],t[5]=c?Pi(c,s,e[6]):s,t[6]=c?ln(t[5],u):e[6]);(s=e[7])&&(t[7]=s);r&h&&(t[8]=null==t[8]?e[8]:An(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,_),t=w[0],e=w[1],r=w[2],i=w[3],s=w[4],!(y=w[9]=w[9]===o?v?0:t.length:mn(w[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||e==c?function(t,e,r){var i=Di(t);return function a(){for(var s=arguments.length,u=n(s),c=s,l=so(a);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:ln(u,l);return(s-=f.length)<r?Xi(t,e,zi,a.placeholder,o,u,f,o,o,r-s):Se(this&&this!==de&&this instanceof a?i:t,this,u)}}(t,e,y):e!=l&&33!=e||s.length?zi.apply(o,w):function(t,e,r,i){var o=1&e,a=Di(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==de&&this instanceof e?a:t;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return Se(h,o?r:this,f)}}(t,e,r,i);else var x=function(t,e,n){var r=1&e,i=Di(t);return function e(){return(this&&this!==de&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return jo((_?ti:Io)(x,w),t,e)}function Ji(t,e,n,r){return t===o||Ua(t,kt[n])&&!Nt.call(r,n)?e:t}function $i(t,e,n,r,i,a){return es(t)&&es(e)&&(a.set(e,t),Gr(t,e,o,$i,a),a.delete(e)),t}function to(t){return os(t)?o:t}function eo(t,e,n,r,i,a){var s=1&n,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t),f=a.get(e);if(l&&f)return l==e&&f==t;var h=-1,p=!0,d=2&n?new Yn:o;for(a.set(t,e),a.set(e,t);++h<u;){var g=t[h],y=e[h];if(r)var v=s?r(y,g,h,e,t,a):r(g,y,h,t,e,a);if(v!==o){if(v)continue;p=!1;break}if(d){if(!Fe(e,(function(t,e){if(!$e(d,e)&&(g===t||i(g,t,n,r,a)))return d.push(e)}))){p=!1;break}}else if(g!==y&&!i(g,y,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function no(t){return ko(To(t,o,Wo),t+"")}function ro(t){return Er(t,Rs,ho)}function io(t){return Er(t,ks,po)}var oo=Cn?function(t){return Cn.get(t)}:cu;function ao(t){for(var e=t.name+"",n=In[e],r=Nt.call(In,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function so(t){return(Nt.call(zn,"placeholder")?zn:t).placeholder}function uo(){var t=zn.iteratee||ou;return t=t===ou?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function lo(t){for(var e=Rs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Oo(i)]}return e}function fo(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return jr(n)?n:o}var ho=me?function(t){return null==t?[]:(t=Tt(t),Ie(me(t),(function(e){return Qt.call(t,e)})))}:yu,po=me?function(t){for(var e=[];t;)Le(e,ho(t)),t=Xt(t);return e}:yu,go=Or;function yo(t,e,n){for(var r=-1,i=(e=Ai(e,t)).length,o=!1;++r<i;){var a=Fo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ts(i)&&Ao(a,i)&&(Ha(t)||qa(t))}function vo(t){return"function"!=typeof t.constructor||Eo(t)?{}:Un(Xt(t))}function mo(t){return Ha(t)||qa(t)||!!(Kt&&t&&t[Kt])}function Ao(t,e){var n=typeof t;return!!(e=null==e?g:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}function bo(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Xa(n)&&Ao(e,n.length):"string"==r&&e in n)&&Ua(n[e],t)}function _o(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cs(t))||(rt.test(t)||!nt.test(t)||null!=e&&t in Tt(e))}function wo(t){var e=ao(t),n=zn[e];if("function"!=typeof n||!(e in qn.prototype))return!1;if(t===n)return!0;var r=oo(n);return!!r&&t===r[0]}(En&&go(new En(new ArrayBuffer(1)))!=N||On&&go(new On)!=S||Sn&&go(Sn.resolve())!=M||Tn&&go(new Tn)!=I||Pn&&go(new Pn)!=j)&&(go=function(t){var e=Or(t),n=e==P?t.constructor:o,r=n?Bo(n):"";if(r)switch(r){case Rn:return N;case kn:return S;case jn:return M;case Ln:return I;case Nn:return j}return e});var xo=jt?Ja:vu;function Eo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function Oo(t){return t===t&&!es(t)}function So(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in Tt(n)))}}function To(t,e,r){return e=mn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=mn(i.length-e,0),s=n(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=n(e+1);++o<e;)u[o]=i[o];return u[e]=r(s),Se(t,this,u)}}function Po(t,e){return e.length<2?t:xr(t,ri(e,0,-1))}function Mo(t,e){for(var n=t.length,r=An(e.length,n),i=Mi(t);r--;){var a=e[r];t[r]=Ao(a,n)?i[a]:o}return t}function Co(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Io=Lo(ti),Ro=pe||function(t,e){return de.setTimeout(t,e)},ko=Lo(ei);function jo(t,e,n){var r=e+"";return ko(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Pe(m,(function(n){var r="_."+n[0];e&n[1]&&!Re(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ft);return e?e[1].split(ht):[]}(r),n)))}function Lo(t){var e=0,n=0;return function(){var r=bn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function No(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=Yr(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Do=function(t){var e=La(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,n,r,i){e.push(r?i.replace(dt,"$1"):n||t)})),e}));function Fo(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return Lt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function zo(t){if(t instanceof qn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=Zr((function(t,e){return Ya(t)?fr(t,vr(e,1,Ya,!0)):[]})),Go=Zr((function(t,e){var n=Ko(e);return Ya(n)&&(n=o),Ya(t)?fr(t,vr(e,1,Ya,!0),uo(n,2)):[]})),Vo=Zr((function(t,e){var n=Ko(e);return Ya(n)&&(n=o),Ya(t)?fr(t,vr(e,1,Ya,!0),o,n):[]}));function qo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=mn(r+i,0)),Ue(t,uo(e,3),i)}function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gs(n),i=n<0?mn(r+i,0):An(i,r-1)),Ue(t,uo(e,3),i,!0)}function Wo(t){return(null==t?0:t.length)?vr(t,1):[]}function Xo(t){return t&&t.length?t[0]:o}var Yo=Zr((function(t){var e=je(t,vi);return e.length&&e[0]===t[0]?Mr(e):[]})),Qo=Zr((function(t){var e=Ko(t),n=je(t,vi);return e===Ko(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Mr(n,uo(e,2)):[]})),Zo=Zr((function(t){var e=Ko(t),n=je(t,vi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?Mr(n,o,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Jo=Zr($o);function $o(t,e){return t&&t.length&&e&&e.length?Wr(t,e):t}var ta=no((function(t,e){var n=null==t?0:t.length,r=ar(t,e);return Xr(t,je(e,(function(t){return Ao(t,n)?+t:t})).sort(Si)),r}));function ea(t){return null==t?t:xn.call(t)}var na=Zr((function(t){return li(vr(t,1,Ya,!0))})),ra=Zr((function(t){var e=Ko(t);return Ya(e)&&(e=o),li(vr(t,1,Ya,!0),uo(e,2))})),ia=Zr((function(t){var e=Ko(t);return e="function"==typeof e?e:o,li(vr(t,1,Ya,!0),o,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=Ie(t,(function(t){if(Ya(t))return e=mn(t.length,e),!0})),Ze(e,(function(e){return je(t,We(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=oa(t);return null==e?n:je(n,(function(t){return Se(e,o,t)}))}var sa=Zr((function(t,e){return Ya(t)?fr(t,e):[]})),ua=Zr((function(t){return gi(Ie(t,Ya))})),ca=Zr((function(t){var e=Ko(t);return Ya(e)&&(e=o),gi(Ie(t,Ya),uo(e,2))})),la=Zr((function(t){var e=Ko(t);return e="function"==typeof e?e:o,gi(Ie(t,Ya),o,e)})),fa=Zr(oa);var ha=Zr((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,aa(t,n)}));function pa(t){var e=zn(t);return e.__chain__=!0,e}function da(t,e){return e(t)}var ga=no((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return ar(e,t)};return!(e>1||this.__actions__.length)&&r instanceof qn&&Ao(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:da,args:[i],thisArg:o}),new Vn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));var ya=Ii((function(t,e,n){Nt.call(t,n)?++t[n]:or(t,n,1)}));var va=Fi(qo),ma=Fi(Ho);function Aa(t,e){return(Ha(t)?Pe:hr)(t,uo(e,3))}function ba(t,e){return(Ha(t)?Me:pr)(t,uo(e,3))}var _a=Ii((function(t,e,n){Nt.call(t,n)?t[n].push(e):or(t,n,[e])}));var wa=Zr((function(t,e,r){var i=-1,o="function"==typeof e,a=Xa(t)?n(t.length):[];return hr(t,(function(t){a[++i]=o?Se(e,t,r):Cr(t,e,r)})),a})),xa=Ii((function(t,e,n){or(t,n,e)}));function Ea(t,e){return(Ha(t)?je:Br)(t,uo(e,3))}var Oa=Ii((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Sa=Zr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&bo(t,e[0],e[1])?e=[]:n>2&&bo(e[0],e[1],e[2])&&(e=[e[0]]),qr(t,vr(e,1),[])})),Ta=he||function(){return de.Date.now()};function Pa(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Ki(t,h,o,o,o,o,e)}function Ma(t,e){var n;if("function"!=typeof e)throw new Ct(a);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Ca=Zr((function(t,e,n){var r=1;if(n.length){var i=ln(n,so(Ca));r|=l}return Ki(t,r,e,n,i)})),Ia=Zr((function(t,e,n){var r=3;if(n.length){var i=ln(n,so(Ia));r|=l}return Ki(e,r,t,n,i)}));function Ra(t,e,n){var r,i,s,u,c,l,f=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new Ct(a);function g(e){var n=r,a=i;return r=i=o,f=e,u=t.apply(a,n)}function y(t){return f=t,c=Ro(m,e),h?g(t):u}function v(t){var n=t-l;return l===o||n>=e||n<0||p&&t-f>=s}function m(){var t=Ta();if(v(t))return A(t);c=Ro(m,function(t){var n=e-(t-l);return p?An(n,s-(t-f)):n}(t))}function A(t){return c=o,d&&r?g(t):(r=i=o,u)}function b(){var t=Ta(),n=v(t);if(r=arguments,i=this,l=t,n){if(c===o)return y(l);if(p)return wi(c),c=Ro(m,e),g(l)}return c===o&&(c=Ro(m,e)),u}return e=vs(e)||0,es(n)&&(h=!!n.leading,s=(p="maxWait"in n)?mn(vs(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),b.cancel=function(){c!==o&&wi(c),f=0,r=l=i=c=o},b.flush=function(){return c===o?u:A(Ta())},b}var ka=Zr((function(t,e){return lr(t,1,e)})),ja=Zr((function(t,e,n){return lr(t,vs(e)||0,n)}));function La(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ct(a);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(La.Cache||Xn),n}function Na(t){if("function"!=typeof t)throw new Ct(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}La.Cache=Xn;var Da=bi((function(t,e){var n=(e=1==e.length&&Ha(e[0])?je(e[0],Ke(uo())):je(vr(e,1),Ke(uo()))).length;return Zr((function(r){for(var i=-1,o=An(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Se(t,this,r)}))})),Fa=Zr((function(t,e){var n=ln(e,so(Fa));return Ki(t,l,o,e,n)})),Ba=Zr((function(t,e){var n=ln(e,so(Ba));return Ki(t,f,o,e,n)})),za=no((function(t,e){return Ki(t,p,o,o,o,e)}));function Ua(t,e){return t===e||t!==t&&e!==e}var Ga=Wi(Sr),Va=Wi((function(t,e){return t>=e})),qa=Ir(function(){return arguments}())?Ir:function(t){return ns(t)&&Nt.call(t,"callee")&&!Qt.call(t,"callee")},Ha=n.isArray,Wa=be?Ke(be):function(t){return ns(t)&&Or(t)==L};function Xa(t){return null!=t&&ts(t.length)&&!Ja(t)}function Ya(t){return ns(t)&&Xa(t)}var Qa=Ae||vu,Za=_e?Ke(_e):function(t){return ns(t)&&Or(t)==w};function Ka(t){if(!ns(t))return!1;var e=Or(t);return e==x||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Or(t);return e==E||e==O||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $a(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=g}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=we?Ke(we):function(t){return ns(t)&&go(t)==S};function is(t){return"number"==typeof t||ns(t)&&Or(t)==T}function os(t){if(!ns(t)||Or(t)!=P)return!1;var e=Xt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==zt}var as=xe?Ke(xe):function(t){return ns(t)&&Or(t)==C};var ss=Ee?Ke(Ee):function(t){return ns(t)&&go(t)==I};function us(t){return"string"==typeof t||!Ha(t)&&ns(t)&&Or(t)==R}function cs(t){return"symbol"==typeof t||ns(t)&&Or(t)==k}var ls=Oe?Ke(Oe):function(t){return ns(t)&&ts(t.length)&&!!se[Or(t)]};var fs=Wi(Fr),hs=Wi((function(t,e){return t<=e}));function ps(t){if(!t)return[];if(Xa(t))return us(t)?dn(t):Mi(t);if(Jt&&t[Jt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Jt]());var e=go(t);return(e==S?un:e==I?fn:Us)(t)}function ds(t){return t?(t=vs(t))===d||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function gs(t){var e=ds(t),n=e%1;return e===e?n?e-n:e:0}function ys(t){return t?sr(gs(t),0,v):0}function vs(t){if("number"==typeof t)return t;if(cs(t))return y;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(st,"");var n=mt.test(t);return n||bt.test(t)?fe(t.slice(2),n?2:8):vt.test(t)?y:+t}function ms(t){return Ci(t,ks(t))}function As(t){return null==t?"":ci(t)}var bs=Ri((function(t,e){if(Eo(e)||Xa(e))Ci(e,Rs(e),t);else for(var n in e)Nt.call(e,n)&&er(t,n,e[n])})),_s=Ri((function(t,e){Ci(e,ks(e),t)})),ws=Ri((function(t,e,n,r){Ci(e,ks(e),t,r)})),xs=Ri((function(t,e,n,r){Ci(e,Rs(e),t,r)})),Es=no(ar);var Os=Zr((function(t,e){t=Tt(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&bo(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=ks(a),u=-1,c=s.length;++u<c;){var l=s[u],f=t[l];(f===o||Ua(f,kt[l])&&!Nt.call(t,l))&&(t[l]=a[l])}return t})),Ss=Zr((function(t){return t.push(o,$i),Se(Ls,o,t)}));function Ts(t,e,n){var r=null==t?o:xr(t,e);return r===o?n:r}function Ps(t,e){return null!=t&&yo(t,e,Pr)}var Ms=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),eu(iu)),Cs=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),uo),Is=Zr(Cr);function Rs(t){return Xa(t)?Zn(t):Nr(t)}function ks(t){return Xa(t)?Zn(t,!0):Dr(t)}var js=Ri((function(t,e,n){Gr(t,e,n)})),Ls=Ri((function(t,e,n,r){Gr(t,e,n,r)})),Ns=no((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=Ai(e,t),r||(r=e.length>1),e})),Ci(t,io(t),n),r&&(n=ur(n,7,to));for(var i=e.length;i--;)fi(n,e[i]);return n}));var Ds=no((function(t,e){return null==t?{}:function(t,e){return Hr(t,e,(function(e,n){return Ps(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=je(io(t),(function(t){return[t]}));return e=uo(e),Hr(t,n,(function(t,n){return e(t,n[0])}))}var Bs=Zi(Rs),zs=Zi(ks);function Us(t){return null==t?[]:Je(t,Rs(t))}var Gs=Ni((function(t,e,n){return e=e.toLowerCase(),t+(n?Vs(e):e)}));function Vs(t){return Ks(As(t).toLowerCase())}function qs(t){return(t=As(t))&&t.replace(wt,rn).replace(te,"")}var Hs=Ni((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ws=Ni((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=Li("toLowerCase");var Ys=Ni((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Qs=Ni((function(t,e,n){return t+(n?" ":"")+Ks(e)}));var Zs=Ni((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Li("toUpperCase");function Js(t,e,n){return t=As(t),(e=n?o:e)===o?function(t){return ie.test(t)}(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.match(pt)||[]}(t):t.match(e)||[]}var $s=Zr((function(t,e){try{return Se(t,o,e)}catch(n){return Ka(n)?n:new i(n)}})),tu=no((function(t,e){return Pe(e,(function(e){e=Fo(e),or(t,e,Ca(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Bi(),ru=Bi(!0);function iu(t){return t}function ou(t){return Lr("function"==typeof t?t:ur(t,1))}var au=Zr((function(t,e){return function(n){return Cr(n,t,e)}})),su=Zr((function(t,e){return function(n){return Cr(t,n,e)}}));function uu(t,e,n){var r=Rs(e),i=wr(e,r);null!=n||es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Rs(e)));var o=!(es(n)&&"chain"in n)||!!n.chain,a=Ja(t);return Pe(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Le([this.value()],arguments))})})),t}function cu(){}var lu=Vi(je),fu=Vi(Ce),hu=Vi(Fe);function pu(t){return _o(t)?We(Fo(t)):function(t){return function(e){return xr(e,t)}}(t)}var du=Hi(),gu=Hi(!0);function yu(){return[]}function vu(){return!1}var mu=Gi((function(t,e){return t+e}),0),Au=Yi("ceil"),bu=Gi((function(t,e){return t/e}),1),_u=Yi("floor");var wu=Gi((function(t,e){return t*e}),1),xu=Yi("round"),Eu=Gi((function(t,e){return t-e}),0);return zn.after=function(t,e){if("function"!=typeof e)throw new Ct(a);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},zn.ary=Pa,zn.assign=bs,zn.assignIn=_s,zn.assignInWith=ws,zn.assignWith=xs,zn.at=Es,zn.before=Ma,zn.bind=Ca,zn.bindAll=tu,zn.bindKey=Ia,zn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},zn.chain=pa,zn.chunk=function(t,e,r){e=(r?bo(t,e,r):e===o)?1:mn(gs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,u=n(ge(i/e));a<i;)u[s++]=ri(t,a,a+=e);return u},zn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},zn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Le(Ha(r)?Mi(r):[r],vr(e,1))},zn.cond=function(t){var e=null==t?0:t.length,n=uo();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Ct(a);return[n(t[0]),t[1]]})):[],Zr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Se(i[0],this,n))return Se(i[1],this,n)}}))},zn.conforms=function(t){return function(t){var e=Rs(t);return function(n){return cr(n,t,e)}}(ur(t,1))},zn.constant=eu,zn.countBy=ya,zn.create=function(t,e){var n=Un(t);return null==e?n:ir(n,e)},zn.curry=function t(e,n,r){var i=Ki(e,8,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},zn.curryRight=function t(e,n,r){var i=Ki(e,c,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},zn.debounce=Ra,zn.defaults=Os,zn.defaultsDeep=Ss,zn.defer=ka,zn.delay=ja,zn.difference=Uo,zn.differenceBy=Go,zn.differenceWith=Vo,zn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=n||e===o?1:gs(e))<0?0:e,r):[]},zn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,0,(e=r-(e=n||e===o?1:gs(e)))<0?0:e):[]},zn.dropRightWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!0,!0):[]},zn.dropWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!0):[]},zn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&bo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gs(r))<0&&(r+=i),r=n>r?0:ys(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},zn.filter=function(t,e){return(Ha(t)?Ie:yr)(t,uo(e,3))},zn.flatMap=function(t,e){return vr(Ea(t,e),1)},zn.flatMapDeep=function(t,e){return vr(Ea(t,e),d)},zn.flatMapDepth=function(t,e,n){return n=n===o?1:gs(n),vr(Ea(t,e),n)},zn.flatten=Wo,zn.flattenDeep=function(t){return(null==t?0:t.length)?vr(t,d):[]},zn.flattenDepth=function(t,e){return(null==t?0:t.length)?vr(t,e=e===o?1:gs(e)):[]},zn.flip=function(t){return Ki(t,512)},zn.flow=nu,zn.flowRight=ru,zn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},zn.functions=function(t){return null==t?[]:wr(t,Rs(t))},zn.functionsIn=function(t){return null==t?[]:wr(t,ks(t))},zn.groupBy=_a,zn.initial=function(t){return(null==t?0:t.length)?ri(t,0,-1):[]},zn.intersection=Yo,zn.intersectionBy=Qo,zn.intersectionWith=Zo,zn.invert=Ms,zn.invertBy=Cs,zn.invokeMap=wa,zn.iteratee=ou,zn.keyBy=xa,zn.keys=Rs,zn.keysIn=ks,zn.map=Ea,zn.mapKeys=function(t,e){var n={};return e=uo(e,3),br(t,(function(t,r,i){or(n,e(t,r,i),t)})),n},zn.mapValues=function(t,e){var n={};return e=uo(e,3),br(t,(function(t,r,i){or(n,r,e(t,r,i))})),n},zn.matches=function(t){return zr(ur(t,1))},zn.matchesProperty=function(t,e){return Ur(t,ur(e,1))},zn.memoize=La,zn.merge=js,zn.mergeWith=Ls,zn.method=au,zn.methodOf=su,zn.mixin=uu,zn.negate=Na,zn.nthArg=function(t){return t=gs(t),Zr((function(e){return Vr(e,t)}))},zn.omit=Ns,zn.omitBy=function(t,e){return Fs(t,Na(uo(e)))},zn.once=function(t){return Ma(2,t)},zn.orderBy=function(t,e,n,r){return null==t?[]:(Ha(e)||(e=null==e?[]:[e]),Ha(n=r?o:n)||(n=null==n?[]:[n]),qr(t,e,n))},zn.over=lu,zn.overArgs=Da,zn.overEvery=fu,zn.overSome=hu,zn.partial=Fa,zn.partialRight=Ba,zn.partition=Oa,zn.pick=Ds,zn.pickBy=Fs,zn.property=pu,zn.propertyOf=function(t){return function(e){return null==t?o:xr(t,e)}},zn.pull=Jo,zn.pullAll=$o,zn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,uo(n,2)):t},zn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,o,n):t},zn.pullAt=ta,zn.range=du,zn.rangeRight=gu,zn.rearg=za,zn.reject=function(t,e){return(Ha(t)?Ie:yr)(t,Na(uo(e,3)))},zn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=uo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Xr(t,i),n},zn.rest=function(t,e){if("function"!=typeof t)throw new Ct(a);return Zr(t,e=e===o?e:gs(e))},zn.reverse=ea,zn.sampleSize=function(t,e,n){return e=(n?bo(t,e,n):e===o)?1:gs(e),(Ha(t)?Jn:Jr)(t,e)},zn.set=function(t,e,n){return null==t?t:$r(t,e,n)},zn.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:$r(t,e,n,r)},zn.shuffle=function(t){return(Ha(t)?$n:ni)(t)},zn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&bo(t,e,n)?(e=0,n=r):(e=null==e?0:gs(e),n=n===o?r:gs(n)),ri(t,e,n)):[]},zn.sortBy=Sa,zn.sortedUniq=function(t){return t&&t.length?si(t):[]},zn.sortedUniqBy=function(t,e){return t&&t.length?si(t,uo(e,2)):[]},zn.split=function(t,e,n){return n&&"number"!=typeof n&&bo(t,e,n)&&(e=n=o),(n=n===o?v:n>>>0)?(t=As(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=ci(e))&&sn(t)?_i(dn(t),0,n):t.split(e,n):[]},zn.spread=function(t,e){if("function"!=typeof t)throw new Ct(a);return e=null==e?0:mn(gs(e),0),Zr((function(n){var r=n[e],i=_i(n,0,e);return r&&Le(i,r),Se(t,this,i)}))},zn.tail=function(t){var e=null==t?0:t.length;return e?ri(t,1,e):[]},zn.take=function(t,e,n){return t&&t.length?ri(t,0,(e=n||e===o?1:gs(e))<0?0:e):[]},zn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=r-(e=n||e===o?1:gs(e)))<0?0:e,r):[]},zn.takeRightWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!1,!0):[]},zn.takeWhile=function(t,e){return t&&t.length?pi(t,uo(e,3)):[]},zn.tap=function(t,e){return e(t),t},zn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ct(a);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ra(t,e,{leading:r,maxWait:e,trailing:i})},zn.thru=da,zn.toArray=ps,zn.toPairs=Bs,zn.toPairsIn=zs,zn.toPath=function(t){return Ha(t)?je(t,Fo):cs(t)?[t]:Mi(Do(As(t)))},zn.toPlainObject=ms,zn.transform=function(t,e,n){var r=Ha(t),i=r||Qa(t)||ls(t);if(e=uo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:es(t)&&Ja(o)?Un(Xt(t)):{}}return(i?Pe:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},zn.unary=function(t){return Pa(t,1)},zn.union=na,zn.unionBy=ra,zn.unionWith=ia,zn.uniq=function(t){return t&&t.length?li(t):[]},zn.uniqBy=function(t,e){return t&&t.length?li(t,uo(e,2)):[]},zn.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?li(t,o,e):[]},zn.unset=function(t,e){return null==t||fi(t,e)},zn.unzip=oa,zn.unzipWith=aa,zn.update=function(t,e,n){return null==t?t:hi(t,e,mi(n))},zn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:hi(t,e,mi(n),r)},zn.values=Us,zn.valuesIn=function(t){return null==t?[]:Je(t,ks(t))},zn.without=sa,zn.words=Js,zn.wrap=function(t,e){return Fa(mi(e),t)},zn.xor=ua,zn.xorBy=ca,zn.xorWith=la,zn.zip=fa,zn.zipObject=function(t,e){return yi(t||[],e||[],er)},zn.zipObjectDeep=function(t,e){return yi(t||[],e||[],$r)},zn.zipWith=ha,zn.entries=Bs,zn.entriesIn=zs,zn.extend=_s,zn.extendWith=ws,uu(zn,zn),zn.add=mu,zn.attempt=$s,zn.camelCase=Gs,zn.capitalize=Vs,zn.ceil=Au,zn.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=vs(n))===n?n:0),e!==o&&(e=(e=vs(e))===e?e:0),sr(vs(t),e,n)},zn.clone=function(t){return ur(t,4)},zn.cloneDeep=function(t){return ur(t,5)},zn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:o)},zn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:o)},zn.conformsTo=function(t,e){return null==e||cr(t,e,Rs(e))},zn.deburr=qs,zn.defaultTo=function(t,e){return null==t||t!==t?e:t},zn.divide=bu,zn.endsWith=function(t,e,n){t=As(t),e=ci(e);var r=t.length,i=n=n===o?r:sr(gs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},zn.eq=Ua,zn.escape=function(t){return(t=As(t))&&J.test(t)?t.replace(Z,on):t},zn.escapeRegExp=function(t){return(t=As(t))&&at.test(t)?t.replace(ot,"\\$&"):t},zn.every=function(t,e,n){var r=Ha(t)?Ce:dr;return n&&bo(t,e,n)&&(e=o),r(t,uo(e,3))},zn.find=va,zn.findIndex=qo,zn.findKey=function(t,e){return ze(t,uo(e,3),br)},zn.findLast=ma,zn.findLastIndex=Ho,zn.findLastKey=function(t,e){return ze(t,uo(e,3),_r)},zn.floor=_u,zn.forEach=Aa,zn.forEachRight=ba,zn.forIn=function(t,e){return null==t?t:mr(t,uo(e,3),ks)},zn.forInRight=function(t,e){return null==t?t:Ar(t,uo(e,3),ks)},zn.forOwn=function(t,e){return t&&br(t,uo(e,3))},zn.forOwnRight=function(t,e){return t&&_r(t,uo(e,3))},zn.get=Ts,zn.gt=Ga,zn.gte=Va,zn.has=function(t,e){return null!=t&&yo(t,e,Tr)},zn.hasIn=Ps,zn.head=Xo,zn.identity=iu,zn.includes=function(t,e,n,r){t=Xa(t)?t:Us(t),n=n&&!r?gs(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),us(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ge(t,e,n)>-1},zn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=mn(r+i,0)),Ge(t,e,i)},zn.inRange=function(t,e,n){return e=ds(e),n===o?(n=e,e=0):n=ds(n),function(t,e,n){return t>=An(e,n)&&t<mn(e,n)}(t=vs(t),e,n)},zn.invoke=Is,zn.isArguments=qa,zn.isArray=Ha,zn.isArrayBuffer=Wa,zn.isArrayLike=Xa,zn.isArrayLikeObject=Ya,zn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Or(t)==_},zn.isBuffer=Qa,zn.isDate=Za,zn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},zn.isEmpty=function(t){if(null==t)return!0;if(Xa(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||Qa(t)||ls(t)||qa(t)))return!t.length;var e=go(t);if(e==S||e==I)return!t.size;if(Eo(t))return!Nr(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},zn.isEqual=function(t,e){return Rr(t,e)},zn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?Rr(t,e,o,n):!!r},zn.isError=Ka,zn.isFinite=function(t){return"number"==typeof t&&Be(t)},zn.isFunction=Ja,zn.isInteger=$a,zn.isLength=ts,zn.isMap=rs,zn.isMatch=function(t,e){return t===e||kr(t,e,lo(e))},zn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,kr(t,e,lo(e),n)},zn.isNaN=function(t){return is(t)&&t!=+t},zn.isNative=function(t){if(xo(t))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jr(t)},zn.isNil=function(t){return null==t},zn.isNull=function(t){return null===t},zn.isNumber=is,zn.isObject=es,zn.isObjectLike=ns,zn.isPlainObject=os,zn.isRegExp=as,zn.isSafeInteger=function(t){return $a(t)&&t>=-9007199254740991&&t<=g},zn.isSet=ss,zn.isString=us,zn.isSymbol=cs,zn.isTypedArray=ls,zn.isUndefined=function(t){return t===o},zn.isWeakMap=function(t){return ns(t)&&go(t)==j},zn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Or(t)},zn.join=function(t,e){return null==t?"":Xe.call(t,e)},zn.kebabCase=Hs,zn.last=Ko,zn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gs(n))<0?mn(r+i,0):An(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Ue(t,qe,i,!0)},zn.lowerCase=Ws,zn.lowerFirst=Xs,zn.lt=fs,zn.lte=hs,zn.max=function(t){return t&&t.length?gr(t,iu,Sr):o},zn.maxBy=function(t,e){return t&&t.length?gr(t,uo(e,2),Sr):o},zn.mean=function(t){return He(t,iu)},zn.meanBy=function(t,e){return He(t,uo(e,2))},zn.min=function(t){return t&&t.length?gr(t,iu,Fr):o},zn.minBy=function(t,e){return t&&t.length?gr(t,uo(e,2),Fr):o},zn.stubArray=yu,zn.stubFalse=vu,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=wu,zn.nth=function(t,e){return t&&t.length?Vr(t,gs(e)):o},zn.noConflict=function(){return de._===this&&(de._=Ut),this},zn.noop=cu,zn.now=Ta,zn.pad=function(t,e,n){t=As(t);var r=(e=gs(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return qi(ye(i),n)+t+qi(ge(i),n)},zn.padEnd=function(t,e,n){t=As(t);var r=(e=gs(e))?pn(t):0;return e&&r<e?t+qi(e-r,n):t},zn.padStart=function(t,e,n){t=As(t);var r=(e=gs(e))?pn(t):0;return e&&r<e?qi(e-r,n)+t:t},zn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(As(t).replace(ut,""),e||0)},zn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&bo(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=ds(t),e===o?(e=t,t=0):e=ds(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=wn();return An(t+i*(e-t+le("1e-"+((i+"").length-1))),e)}return Yr(t,e)},zn.reduce=function(t,e,n){var r=Ha(t)?Ne:Ye,i=arguments.length<3;return r(t,uo(e,4),n,i,hr)},zn.reduceRight=function(t,e,n){var r=Ha(t)?De:Ye,i=arguments.length<3;return r(t,uo(e,4),n,i,pr)},zn.repeat=function(t,e,n){return e=(n?bo(t,e,n):e===o)?1:gs(e),Qr(As(t),e)},zn.replace=function(){var t=arguments,e=As(t[0]);return t.length<3?e:e.replace(t[1],t[2])},zn.result=function(t,e,n){var r=-1,i=(e=Ai(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[Fo(e[r])];a===o&&(r=i,a=n),t=Ja(a)?a.call(t):a}return t},zn.round=xu,zn.runInContext=t,zn.sample=function(t){return(Ha(t)?Kn:Kr)(t)},zn.size=function(t){if(null==t)return 0;if(Xa(t))return us(t)?pn(t):t.length;var e=go(t);return e==S||e==I?t.size:Nr(t).length},zn.snakeCase=Ys,zn.some=function(t,e,n){var r=Ha(t)?Fe:ii;return n&&bo(t,e,n)&&(e=o),r(t,uo(e,3))},zn.sortedIndex=function(t,e){return oi(t,e)},zn.sortedIndexBy=function(t,e,n){return ai(t,e,uo(n,2))},zn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=oi(t,e);if(r<n&&Ua(t[r],e))return r}return-1},zn.sortedLastIndex=function(t,e){return oi(t,e,!0)},zn.sortedLastIndexBy=function(t,e,n){return ai(t,e,uo(n,2),!0)},zn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=oi(t,e,!0)-1;if(Ua(t[n],e))return n}return-1},zn.startCase=Qs,zn.startsWith=function(t,e,n){return t=As(t),n=null==n?0:sr(gs(n),0,t.length),e=ci(e),t.slice(n,n+e.length)==e},zn.subtract=Eu,zn.sum=function(t){return t&&t.length?Qe(t,iu):0},zn.sumBy=function(t,e){return t&&t.length?Qe(t,uo(e,2)):0},zn.template=function(t,e,n){var r=zn.templateSettings;n&&bo(t,e,n)&&(e=o),t=As(t),e=ws({},e,r,Ji);var i,a,s=ws({},e.imports,r.imports,Ji),u=Rs(s),c=Je(s,u),l=0,f=e.interpolate||xt,h="__p += '",p=Pt((e.escape||xt).source+"|"+f.source+"|"+(f===et?gt:xt).source+"|"+(e.evaluate||xt).source+"|$","g"),d="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ae+"]")+"\n";t.replace(p,(function(e,n,r,o,s,u){return r||(r=o),h+=t.slice(l,u).replace(Et,an),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var g=Nt.call(e,"variable")&&e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(W,""):h).replace(X,"$1").replace(Y,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=$s((function(){return Ot(u,d+"return "+h).apply(o,c)}));if(y.source=h,Ka(y))throw y;return y},zn.times=function(t,e){if((t=gs(t))<1||t>g)return[];var n=v,r=An(t,v);e=uo(e),t-=v;for(var i=Ze(r,e);++n<t;)e(n);return i},zn.toFinite=ds,zn.toInteger=gs,zn.toLength=ys,zn.toLower=function(t){return As(t).toLowerCase()},zn.toNumber=vs,zn.toSafeInteger=function(t){return t?sr(gs(t),-9007199254740991,g):0===t?t:0},zn.toString=As,zn.toUpper=function(t){return As(t).toUpperCase()},zn.trim=function(t,e,n){if((t=As(t))&&(n||e===o))return t.replace(st,"");if(!t||!(e=ci(e)))return t;var r=dn(t),i=dn(e);return _i(r,tn(r,i),en(r,i)+1).join("")},zn.trimEnd=function(t,e,n){if((t=As(t))&&(n||e===o))return t.replace(ct,"");if(!t||!(e=ci(e)))return t;var r=dn(t);return _i(r,0,en(r,dn(e))+1).join("")},zn.trimStart=function(t,e,n){if((t=As(t))&&(n||e===o))return t.replace(ut,"");if(!t||!(e=ci(e)))return t;var r=dn(t);return _i(r,tn(r,dn(e))).join("")},zn.truncate=function(t,e){var n=30,r="...";if(es(e)){var i="separator"in e?e.separator:i;n="length"in e?gs(e.length):n,r="omission"in e?ci(e.omission):r}var a=(t=As(t)).length;if(sn(t)){var s=dn(t);a=s.length}if(n>=a)return t;var u=n-pn(r);if(u<1)return r;var c=s?_i(s,0,u).join(""):t.slice(0,u);if(i===o)return c+r;if(s&&(u+=c.length-u),as(i)){if(t.slice(u).search(i)){var l,f=c;for(i.global||(i=Pt(i.source,As(yt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===o?u:h)}}else if(t.indexOf(ci(i),u)!=u){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r},zn.unescape=function(t){return(t=As(t))&&K.test(t)?t.replace(Q,gn):t},zn.uniqueId=function(t){var e=++Dt;return As(t)+e},zn.upperCase=Zs,zn.upperFirst=Ks,zn.each=Aa,zn.eachRight=ba,zn.first=Xo,uu(zn,function(){var t={};return br(zn,(function(e,n){Nt.call(zn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),zn.VERSION="4.17.20",Pe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){zn[t].placeholder=zn})),Pe(["drop","take"],(function(t,e){qn.prototype[t]=function(n){n=n===o?1:mn(gs(n),0);var r=this.__filtered__&&!e?new qn(this):this.clone();return r.__filtered__?r.__takeCount__=An(n,r.__takeCount__):r.__views__.push({size:An(n,v),type:t+(r.__dir__<0?"Right":"")}),r},qn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Pe(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;qn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:uo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Pe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");qn.prototype[t]=function(){return this[n](1).value()[0]}})),Pe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");qn.prototype[t]=function(){return this.__filtered__?new qn(this):this[n](1)}})),qn.prototype.compact=function(){return this.filter(iu)},qn.prototype.find=function(t){return this.filter(t).head()},qn.prototype.findLast=function(t){return this.reverse().find(t)},qn.prototype.invokeMap=Zr((function(t,e){return"function"==typeof t?new qn(this):this.map((function(n){return Cr(n,t,e)}))})),qn.prototype.reject=function(t){return this.filter(Na(uo(t)))},qn.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new qn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},qn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qn.prototype.toArray=function(){return this.take(v)},br(qn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=zn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(zn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof qn,c=s[0],l=u||Ha(e),f=function(t){var e=i.apply(zn,Le([t],s));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=a&&!h,g=u&&!p;if(!a&&l){e=g?e:new qn(this);var y=t.apply(e,s);return y.__actions__.push({func:da,args:[f],thisArg:o}),new Vn(y,h)}return d&&g?t.apply(this,s):(y=this.thru(f),d?r?y.value()[0]:y.value():y)})})),Pe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=It[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);zn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ha(i)?i:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),br(qn.prototype,(function(t,e){var n=zn[e];if(n){var r=n.name+"";Nt.call(In,r)||(In[r]=[]),In[r].push({name:e,func:n})}})),In[zi(o,2).name]=[{name:"wrapper",func:o}],qn.prototype.clone=function(){var t=new qn(this.__wrapped__);return t.__actions__=Mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Mi(this.__views__),t},qn.prototype.reverse=function(){if(this.__filtered__){var t=new qn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=An(e,t+a);break;case"takeRight":t=mn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=An(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return di(t,this.__actions__);var d=[];t:for(;u--&&h<p;){for(var g=-1,y=t[c+=e];++g<f;){var v=l[g],m=v.iteratee,A=v.type,b=m(y);if(2==A)y=b;else if(!b){if(1==A)continue t;break t}}d[h++]=y}return d},zn.prototype.at=ga,zn.prototype.chain=function(){return pa(this)},zn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===o&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},zn.prototype.plant=function(t){for(var e,n=this;n instanceof Gn;){var r=zo(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},zn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof qn){var e=t;return this.__actions__.length&&(e=new qn(this)),(e=e.reverse()).__actions__.push({func:da,args:[ea],thisArg:o}),new Vn(e,this.__chain__)}return this.thru(ea)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,Jt&&(zn.prototype[Jt]=function(){return this}),zn}();de._=yn,(i=function(){return yn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(this,n(62),n(175)(t))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(36),i={};function o(t,e){var n;i[t]=!0,void 0!==e&&(n=e,r.global.console&&r.global.console.error&&r.global.console.error(n))}var a=function t(e){var n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(a.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var s=function(t){var e=this;this.gl=t,function(t){var e=t.getError;t.getError=function(){var n;do{0!==(n=e.apply(t))&&(i[n]=!0)}while(0!==n);for(n in i)if(i[n])return delete i[n],parseInt(n,10);return 0}}(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){var i=e.currentVertexArrayObject,o=i.attribs[t];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,a,s){var u=e.currentVertexArrayObject;u.maxAttrib=Math.max(u.maxAttrib,t);var c=u.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=a,c.offset=s,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",r.global.console&&r.global.console.log&&r.global.console.log(t),e.reset_()}),!0),this.reset_()};function u(t){if("function"!==typeof t.createVertexArray){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var n=t.getExtension;t.getExtension=function(e){var r=n.call(this,e);return r||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new s(this)),this.__OESVertexArrayObject))}}}s.prototype.VERTEX_ARRAY_BINDING_OES=34229,s.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new a(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},s.prototype.createVertexArrayOES=function(){var t=new a(this);return this.vertexArrayObjects.push(t),t},s.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},s.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof a&&t.hasBeenBound&&t.ext===this)},s.prototype.bindVertexArrayOES=function(t){var e=this.gl;if(!t||t.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(r!==i){r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);for(var a=this.currentArrayBuffer,s=Math.max(r?r.maxAttrib:0,i.maxAttrib),u=0;u<=s;u++){var c=i.attribs[u],l=r?r.attribs[u]:null;if(r&&c.enabled===l.enabled||(c.enabled?n.enableVertexAttribArray.call(e,u):n.disableVertexAttribArray.call(e,u)),c.enabled){var f=!1;r&&c.buffer===l.buffer||(a!==c.buffer&&(n.bindBuffer.call(e,34962,c.buffer),a=c.buffer),f=!0),(f||c.cached!==l.cached)&&n.vertexAttribPointer.call(e,u,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}}else o(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n(0),i=n(167),o=n(391),a=n(392),s=n(101),u=n(31);function c(t,e){Object(u.a)(t instanceof i.a||t instanceof o.a||t instanceof a.a);var n=t.constructor,r=t.gl,s=t.width,c=t.height,l=t.format,f=t.type,h=t.dataFormat,p=t.border,d=t.mipmaps;return new n(r,Object.assign({width:s,height:c,format:l,type:f,dataFormat:h,border:p,mipmaps:d},e))}function l(t,e){var n=t.gl,i=t.width,o=t.height,a=t.id;return new s.a(n,Object.assign({},e,{id:"framebuffer-for-".concat(a),width:i,height:o,attachments:Object(r.a)({},36064,t)}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(4),i=n.n(r),o=n(11),a=n(1),s=n(2),u=n(6),c=n(3),l=n(40),f=n(5),h=n(10),p=n(79),d=n(97),g=[34069,34070,34071,34072,34073,34074],y=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)(this,e),Object(d.b)(t),(n=Object(u.a)(this,Object(c.a)(e).call(this,t,Object.assign({},r,{target:34067})))).initialize(r),Object.seal(Object(l.a)(n)),n}return Object(f.a)(e,t),Object(s.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mipmaps,r=void 0===n||n,i=e.parameters,o=void 0===i?{}:i;this.opts=e,this.setCubeMapImageData(e).then((function(){t.loaded=!0,r&&t.generateMipmap(e),t.setParameters(o)}))}},{key:"subImage",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:e,data:n,x:i,y:a,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(){var t=Object(o.a)(i.a.mark((function t(e){var n,r,o,a,s,u,c,l,f,p,d,y,v,m=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.width,r=e.height,o=e.pixels,a=e.data,s=e.border,u=void 0===s?0:s,c=e.format,l=void 0===c?6408:c,f=e.type,p=void 0===f?5121:f,d=this.gl,y=o||a,t.next=5,Promise.all(g.map((function(t){var e=y[t];return Promise.all(Array.isArray(e)?e:[e])})));case 5:v=t.sent,this.bind(),g.forEach((function(t,e){v[e].length>1&&!1!==m.opts.mipmaps&&h.h.warn("".concat(m.id," has mipmap and multiple LODs."))(),v[e].forEach((function(e,i){n&&r?d.texImage2D(t,i,l,n,r,u,l,p,e):d.texImage2D(t,i,l,l,p,e)}))})),this.unbind();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function(t){var e=this,n=t.face,r=t.width,i=t.height,o=t.pixels,a=t.data,s=t.border,u=void 0===s?0:s,c=t.format,l=void 0===c?6408:c,f=t.type,h=void 0===f?5121:f,p=this.gl,d=o||a;return this.bind(),d instanceof Promise?d.then((function(r){return e.setImageDataForFace(Object.assign({},t,{face:n,data:r,pixels:r}))})):this.width||this.height?p.texImage2D(n,0,l,r,i,u,l,h,d):p.texImage2D(n,0,l,l,h,d),this}}]),e}(p.a);y.FACES=g},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),i=n(6),o=n(3),a=n(40),s=n(2),u=n(5),c=n(10),l=n(97),f=n(79),h=n(119),p=n(53),d=function(t){function e(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(l.a)(t),s=Object.assign({depth:1},s,{target:32879,unpackFlipY:!1}),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,s))).initialize(s),Object.seal(Object(a.a)(n)),n}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:"isSupported",value:function(t){return Object(c.g)(t)}}]),Object(s.a)(e,[{key:"setImageData",value:function(t){var e=this,n=t.level,r=void 0===n?0:n,i=t.dataFormat,o=void 0===i?6408:i,a=t.width,s=t.height,u=t.depth,l=void 0===u?1:u,f=t.border,d=void 0===f?0:f,g=t.format,y=t.type,v=void 0===y?5121:y,m=t.offset,A=void 0===m?0:m,b=t.data,_=t.parameters,w=void 0===_?{}:_;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(c.l)(this.gl,w,(function(){ArrayBuffer.isView(b)&&e.gl.texImage3D(e.target,r,o,a,s,l,d,g,v,b),b instanceof p.a&&(e.gl.bindBuffer(35052,b.handle),e.gl.texImage3D(e.target,r,o,a,s,l,d,g,v,A))})),b&&b.byteLength)this._trackAllocatedMemory(b.byteLength,"Texture");else{var x=h.a[this.dataFormat]||4,E=h.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*x*E,"Texture")}return this.loaded=!0,this}}]),e}(f.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c}));var r=n(115),i=n(117);function o(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=function(){var t=Object(i.b)();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function u(t){var e,n=s(),i=o(t=Array.isArray(t)?t:[t]);try{var a=function(){var t=e.value,i=Object(r.b)(t);n.find((function(t){return i===t}))||n.unshift(i)};for(i.s();!(e=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}function c(){return s()}},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,s,u,c,l,p,d,y=e&&e.length,v=y?e[0]*n:t.length,m=i(t,0,v,n,!0),A=[];if(!m||m.next===m.prev)return A;if(y&&(m=function(t,e,n,r){var a,s,u,c=[];for(a=0,s=e.length;a<s;a++)(u=i(t,e[a]*r,a<s-1?e[a+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),c.push(g(u));for(c.sort(f),a=0;a<c.length;a++)h(c[a],n),n=o(n,n.next);return n}(t,e,m,n)),t.length>80*n){r=u=t[0],s=c=t[1];for(var b=n;b<v;b+=n)(l=t[b])<r&&(r=l),(p=t[b+1])<s&&(s=p),l>u&&(u=l),p>c&&(c=p);d=0!==(d=Math.max(u-r,c-s))?1/d:0}return a(m,A,n,r,s,d),A}function i(t,e,n,r,i){var o,a;if(i===P(t,e,n,r)>0)for(o=e;o<n;o+=r)a=O(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=O(o,t[o],t[o+1],a);return a&&A(a,a.next)&&(S(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!A(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,h){if(t){!h&&f&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,f);for(var p,g,y=t;t.prev!==t.next;)if(p=t.prev,g=t.next,f?u(t,r,i,f):s(t))e.push(p.i/n),e.push(t.i/n),e.push(g.i/n),S(t),t=g.next,y=g.next;else if((t=g)===y){h?1===h?a(t=c(o(t),e,n),e,n,r,i,f,2):2===h&&l(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(y(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(m(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=d(s,u,e,n,r),h=d(c,l,e,n,r),p=t.prevZ,g=t.nextZ;p&&p.z>=f&&g&&g.z<=h;){if(p!==t.prev&&p!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,g!==t.prev&&g!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;g&&g.z<=h;){if(g!==t.prev&&g!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!A(i,a)&&b(i,r,r.next,a)&&x(i,a)&&x(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),S(r),S(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function l(t,e,n,r,i,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&v(u,c)){var l=E(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s),void a(l,e,n,r,i,s)}c=c.next}u=u.next}while(u!==t)}function f(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&y(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),x(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}(t,e)){var n=E(e,t);o(e,e.next),o(n,n.next)}}function p(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||A(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function A(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){var i=w(m(t,e,n)),o=w(m(t,e,r)),a=w(m(n,r,t)),s=w(m(n,r,e));return i!==o&&a!==s||(!(0!==i||!_(t,n,e))||(!(0!==o||!_(t,r,e))||(!(0!==a||!_(n,t,r))||!(0!==s||!_(n,e,r)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function x(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function E(t,e){var n=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function O(t,e,n,r){var i=new T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(P(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(P(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=1e20;function i(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(t,e,n,r,i,o,s){for(var u=0;u<e;u++){for(var c=0;c<n;c++)r[c]=t[c*e+u];for(a(r,i,o,s,n),c=0;c<n;c++)t[c*e+u]=i[c]}for(c=0;c<n;c++){for(u=0;u<e;u++)r[u]=t[c*e+u];for(a(r,i,o,s,e),u=0;u<e;u++)t[c*e+u]=Math.sqrt(i[u])}}function a(t,e,n,i,o){n[0]=0,i[0]=-r,i[1]=+r;for(var a=1,s=0;a<o;a++){for(var u=(t[a]+a*a-(t[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);u<=i[s];)s--,u=(t[a]+a*a-(t[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);n[++s]=a,i[s]=u,i[s+1]=+r}for(a=0,s=0;a<o;a++){for(;i[s+1]<a;)s++;e[a]=(a-n[s])*(a-n[s])+t[n[s]]}}i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var a=e.data[4*i+3]/255;this.gridOuter[i]=1===a?0:0===a?r:Math.pow(Math.max(0,.5-a),2),this.gridInner[i]=1===a?r:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var s=this.gridOuter[i]-this.gridInner[i];n[i]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},function(t,e,n){"use strict";t.exports=i;var r=n(347);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function u(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function c(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function l(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function f(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function A(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return c(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return c(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return c(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return c(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return c(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return c(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,n){return s.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){var r="",i=e;for(;i<n;){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128===(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=u(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;if(e.buf[e.pos++]|=n|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&l(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&l(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,A,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(t){var e=t.trim().toLowerCase();return"."===e.charAt(0)?r.toLowerCase().endsWith(e):e.endsWith("/*")?o===e.replace(/\/.*$/,""):i===e}))}return!0}},function(t,e,n){(function(e){var r=function(){"use strict";var t,r=/\s*/g,i=/^\s*|\s*$/g,o=/\s+/;function a(t){if(!t||!t.length)return 0;for(var e=0,n=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e)|0;return n}function s(t,e){return t.getElementsByTagName(e)}function u(t,e){return t.getAttribute(e)}function c(t,e){return parseFloat(u(t,e))}function l(t,e){var n=s(t,e);return n.length?n[0]:null}function f(t){for(var e=0,n=[];e<t.length;e++)n[e]=parseFloat(t[e]);return n}function h(t){var e;return t&&(e=t).normalize&&e.normalize(),t&&t.textContent||""}function p(t,e){var n,r,i={};for(r=0;r<e.length;r++)(n=l(t,e[r]))&&(i[e[r]]=h(n));return i}function d(t,e){for(var n in e)t[n]=e[n]}function g(t){return f(t.replace(r,"").split(","))}function y(t){for(var e=t.replace(i,"").split(o),n=[],r=0;r<e.length;r++)n.push(g(e[r]));return n}function v(t){var e,n=[c(t,"lon"),c(t,"lat")],r=l(t,"ele"),i=l(t,"gpxtpx:hr")||l(t,"hr"),o=l(t,"time");return r&&(e=parseFloat(h(r)),isNaN(e)||n.push(e)),{coordinates:n,time:o?h(o):null,heartRate:i?parseFloat(h(i)):null}}function m(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return"undefined"!==typeof XMLSerializer?t=new XMLSerializer:"object"!==typeof e||e.browser||(t=new(n(497).XMLSerializer)),{kml:function(t){for(var e={type:"FeatureCollection",features:[]},n={},r={},i={},o=["Polygon","LineString","Point","Track","gx:Track"],c=s(t,"Placemark"),p=s(t,"Style"),d=s(t,"StyleMap"),v=0;v<p.length;v++){var A=a(m(p[v])).toString(16);n["#"+u(p[v],"id")]=A,r[A]=p[v]}for(var b=0;b<d.length;b++){n["#"+u(d[b],"id")]=a(m(d[b])).toString(16);for(var _=s(d[b],"Pair"),w={},x=0;x<_.length;x++)w[h(l(_[x],"key"))]=h(l(_[x],"styleUrl"));i["#"+u(d[b],"id")]=w}for(var E=0;E<c.length;E++)e.features=e.features.concat(P(c[E]));function O(t){var e,n;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(n=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(n)?void 0:n]}function S(t){var e=s(t,"coord"),n=[],r=[];0===e.length&&(e=s(t,"gx:coord"));for(var i=0;i<e.length;i++)n.push(f(h(e[i]).split(" ")));for(var o=s(t,"when"),a=0;a<o.length;a++)r.push(h(o[a]));return{coords:n,times:r}}function T(t){var e,n,r,i,a,u=[],c=[];if(l(t,"MultiGeometry"))return T(l(t,"MultiGeometry"));if(l(t,"MultiTrack"))return T(l(t,"MultiTrack"));if(l(t,"gx:MultiTrack"))return T(l(t,"gx:MultiTrack"));for(r=0;r<o.length;r++)if(n=s(t,o[r]))for(i=0;i<n.length;i++)if(e=n[i],"Point"===o[r])u.push({type:"Point",coordinates:g(h(l(e,"coordinates")))});else if("LineString"===o[r])u.push({type:"LineString",coordinates:y(h(l(e,"coordinates")))});else if("Polygon"===o[r]){var f=s(e,"LinearRing"),p=[];for(a=0;a<f.length;a++)p.push(y(h(l(f[a],"coordinates"))));u.push({type:"Polygon",coordinates:p})}else if("Track"===o[r]||"gx:Track"===o[r]){var d=S(e);u.push({type:"LineString",coordinates:d.coords}),d.times.length&&c.push(d.times)}return{geoms:u,coordTimes:c}}function P(t){var e,o=T(t),a={},c=h(l(t,"name")),f=h(l(t,"address")),p=h(l(t,"styleUrl")),d=h(l(t,"description")),g=l(t,"TimeSpan"),y=l(t,"TimeStamp"),v=l(t,"ExtendedData"),m=l(t,"LineStyle"),A=l(t,"PolyStyle"),b=l(t,"visibility");if(!o.geoms.length)return[];if(c&&(a.name=c),f&&(a.address=f),p){"#"!==p[0]&&(p="#"+p),a.styleUrl=p,n[p]&&(a.styleHash=n[p]),i[p]&&(a.styleMapHash=i[p],a.styleHash=n[i[p].normal]);var _=r[a.styleHash];_&&(m||(m=l(_,"LineStyle")),A||(A=l(_,"PolyStyle")))}if(d&&(a.description=d),g){var w=h(l(g,"begin")),x=h(l(g,"end"));a.timespan={begin:w,end:x}}if(y&&(a.timestamp=h(l(y,"when"))),m){var E=O(h(l(m,"color"))),S=E[0],P=E[1],M=parseFloat(h(l(m,"width")));S&&(a.stroke=S),isNaN(P)||(a["stroke-opacity"]=P),isNaN(M)||(a["stroke-width"]=M)}if(A){var C=O(h(l(A,"color"))),I=C[0],R=C[1],k=h(l(A,"fill")),j=h(l(A,"outline"));I&&(a.fill=I),isNaN(R)||(a["fill-opacity"]=R),k&&(a["fill-opacity"]="1"===k?a["fill-opacity"]||1:0),j&&(a["stroke-opacity"]="1"===j?a["stroke-opacity"]||1:0)}if(v){var L=s(v,"Data"),N=s(v,"SimpleData");for(e=0;e<L.length;e++)a[L[e].getAttribute("name")]=h(l(L[e],"value"));for(e=0;e<N.length;e++)a[N[e].getAttribute("name")]=h(N[e])}b&&(a.visibility=h(b)),o.coordTimes.length&&(a.coordTimes=1===o.coordTimes.length?o.coordTimes[0]:o.coordTimes);var D={type:"Feature",geometry:1===o.geoms.length?o.geoms[0]:{type:"GeometryCollection",geometries:o.geoms},properties:a};return u(t,"id")&&(D.id=u(t,"id")),[D]}return e},gpx:function(t){var e,n,r=s(t,"trk"),i=s(t,"rte"),o=s(t,"wpt"),a={type:"FeatureCollection",features:[]};for(e=0;e<r.length;e++)(n=f(r[e]))&&a.features.push(n);for(e=0;e<i.length;e++)(n=g(i[e]))&&a.features.push(n);for(e=0;e<o.length;e++)a.features.push(y(o[e]));function c(t,e){var n=s(t,e),r=[],i=[],o=[],a=n.length;if(a<2)return{};for(var u=0;u<a;u++){var c=v(n[u]);r.push(c.coordinates),c.time&&i.push(c.time),c.heartRate&&o.push(c.heartRate)}return{line:r,times:i,heartRates:o}}function f(t){for(var e,n=s(t,"trkseg"),r=[],i=[],o=[],a=0;a<n.length;a++)(e=c(n[a],"trkpt"))&&(e.line&&r.push(e.line),e.times&&e.times.length&&i.push(e.times),e.heartRates&&e.heartRates.length&&o.push(e.heartRates));if(0!==r.length){var u=A(t);return d(u,m(l(t,"extensions"))),i.length&&(u.coordTimes=1===r.length?i[0]:i),o.length&&(u.heartRates=1===r.length?o[0]:o),{type:"Feature",properties:u,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function g(t){var e=c(t,"rtept");if(e.line){var n=A(t);return d(n,m(l(t,"extensions"))),{type:"Feature",properties:n,geometry:{type:"LineString",coordinates:e.line}}}}function y(t){var e=A(t);return d(e,p(t,["sym"])),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:v(t).coordinates}}}function m(t){var e={};if(t){var n=l(t,"line");if(n){var r=h(l(n,"color")),i=parseFloat(h(l(n,"opacity"))),o=parseFloat(h(l(n,"width")));r&&(e.stroke=r),isNaN(i)||(e["stroke-opacity"]=i),isNaN(o)||(e["stroke-width"]=96*o/25.4)}}return e}function A(t){var e=p(t,["name","cmt","desc","type","time","keywords"]),n=s(t,"link");n.length&&(e.links=[]);for(var r,i=0;i<n.length;i++)d(r={href:u(n[i],"href")},p(n[i],["text","type"])),e.links.push(r);return e}return a}}}();t.exports=r}).call(this,n(78))},function(t,e,n){"use strict";(function(t,r){var i,o=n(401);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:r;var a=Object(o.a)(i);e.a=a}).call(this,n(62),n(500)(t))},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(501).Observable},function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n,r="boolean"===typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},o={key:r,value:t[r]};return n(i,o)}}),o=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var n,a;if(Array.isArray(e)){for(a="[",n=0;n<e.length;n++)n&&(a+=","),a+=t(e[n])||"null";return a+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(e)-1,u=Object.keys(e).sort(i&&i(e));for(a="",n=0;n<u.length;n++){var c=u[n],l=t(e[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return o.splice(s,1),"{"+a+"}"}}(t)}},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=n(1),i=n(2),o=n(12),a=n(0),s=n(106),u=n(306),c=n(254);function l(t){return f(p(t))}function f(t){var e={},n={};return h({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((function(t,e){return n[e]-n[t]})).map((function(t){return e[t]}))}function h(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;r[l.name]=l,(void 0===i[l.name]||i[l.name]<n)&&(i[l.name]=n)}}catch(m){a=!0,s=m}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}var f=!0,p=!1,d=void 0;try{for(var g,y=e[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var v=g.value;v.dependencies&&h({modules:v.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(m){p=!0,d=m}finally{try{f||null==y.return||y.return()}finally{if(p)throw d}}}function p(t,e){return t.map((function(t){return t instanceof u.a||(Object(c.a)("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Object(c.a)(t.name,"shader module has no name"),(t=new u.a(t)).dependencies=p(t.dependencies)),t}))}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var g={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},y={};Object.keys(g).forEach((function(t){y[t]=t}));var v={};function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=g[e];if(Object(c.a)(r,e),!d(n))return!0;if(e in v)return v[e];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=t.createShader(35633);t.shaderSource(s,a),t.compileShader(s);var u=t.getShaderParameter(s,35713);return t.deleteShader(s),v[e]=u,u}function A(t,e){var n=g[e];Object(c.a)(n,e);var r=function(t){return Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"===typeof r?Boolean(t.getExtension(r)):r;return Object(c.a)(!1===i||!0===i),i}function b(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return A(t,e)}))}var _=n(258);function w(t,e,n){switch(e){case 300:return n?function(t){return t.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"out $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(+/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}(t):function(t){return t.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"in $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}(t);case 100:return n?function(t){return t.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1").replace(/^[ \t]*out[ \t]+(.+;)/gm,"varying $1").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")}(t):function(t){var e=(t=t.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+/gm,"varying ").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")).match(E);if(e){var n=e[1];t=t.replace(E,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),"gl_FragColor")}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}var x,E=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;var O="\n\n".concat(_.a,"\n\n"),S=(x={},Object(a.a)(x,s.b,"vertex"),Object(a.a)(x,s.a,"fragment"),x);function T(t,e){var n=e.vs,r=e.fs,i=l(e.modules||[]);return{gl:t,vs:P(t,Object.assign({},e,{source:n,type:s.b,modules:i})),fs:P(t,Object.assign({},e,{source:r,type:s.a,modules:i})),getUniforms:M(i)}}function P(t,e){var n=e.id,r=e.source,i=e.type,a=e.modules,u=e.defines,l=void 0===u?{}:u,f=e.hookFunctions,h=void 0===f?[]:f,p=e.inject,d=void 0===p?{}:p,g=e.transpileToGLSL100,v=void 0!==g&&g,A=e.prologue,x=void 0===A||A,E=e.log;Object(c.a)("string"===typeof r,"shader source must be a string");var T=i===s.b,P=r.split("\n"),M=100,C="",I=r;0===P[0].indexOf("#version ")?(M=300,C=P[0],I=P.slice(1).join("\n")):C="#version ".concat(M);var R={};a.forEach((function(t){Object.assign(R,t.getDefines())})),Object.assign(R,l);var k=x?"".concat(C,"\n").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(S[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){var e=t.type;return"\n#define SHADER_TYPE_".concat(S[e].toUpperCase(),"\n")}({type:i}),"\n").concat(function(t){switch(function(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return b(t,y.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),b(t,y.GLSL_DERIVATIVES)&&m(t,y.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),b(t,y.GLSL_FRAG_DATA)&&m(t,y.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),b(t,y.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(t),"\n").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(R),"\n").concat(T?"":"precision highp float;\n\n","\n"):"".concat(C,"\n");h=function(t){var e={vs:{},fs:{}};return t.forEach((function(t){var n;"string"!==typeof t?t=(n=t).hook:n={};var r=(t=t.trim()).split(":"),i=Object(o.a)(r,2),a=i[0],s=i[1],u=t.replace(/\(.+/,"");e[a][u]=Object.assign(n,{signature:s})})),e}(h);var j={},L={},N={};for(var D in d){var F="string"===typeof d[D]?{injection:d[D],order:0}:d[D],B=D.match(/^(v|f)s:(#)?([\w-]+)$/);if(B){var z=B[2],U=B[3];z?"decl"===U?L[D]=[F]:N[D]=[F]:j[D]=[F]}else N[D]=[F]}var G=!0,V=!1,q=void 0;try{for(var H,W=a[Symbol.iterator]();!(G=(H=W.next()).done);G=!0){var X=H.value;E&&X.checkDeprecations(I,E),k+=X.getModuleSource(i,M);var Y=X.injections[i];for(var Q in Y){var Z=Q.match(/^(v|f)s:#([\w-]+)$/);if(Z){var K="decl"===Z[2]?L:N;K[Q]=K[Q]||[],K[Q].push(Y[Q])}else j[Q]=j[Q]||[],j[Q].push(Y[Q])}}}catch(J){V=!0,q=J}finally{try{G||null==W.return||W.return()}finally{if(V)throw q}}return k+=O,k=Object(_.c)(k,i,L),k+=function(t,e){var n="";for(var r in t){var i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){var o=e[r];o.sort((function(t,e){return t.order-e.order}));var a=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;n+="  ".concat(f.injection,"\n")}}catch(J){s=!0,u=J}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(h[i],j),k+=I,k=w(k=Object(_.c)(k,i,N),v?100:M,T)}function M(t){return function(e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value.getUniforms(e,n);Object.assign(n,u)}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}var C=n(651),I=function(){function t(e){Object(r.a)(this,t),this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(i.a)(t,null,[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),Object(i.a)(t,[{key:"addDefaultModule",value:function(t){this._defaultModules.find((function(e){return e.name===t.name}))||this._defaultModules.push(t),this.stateHash++}},{key:"removeDefaultModule",value:function(t){var e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((function(t){return t.name!==e})),this.stateHash++}},{key:"addShaderHook",value:function(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}},{key:"get",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.vs,r=void 0===n?"":n,i=e.fs,o=void 0===i?"":i,a=e.defines,s=void 0===a?{}:a,u=e.inject,c=void 0===u?{}:u,l=e.varyings,f=void 0===l?[]:l,h=e.bufferMode,p=void 0===h?35981:h,d=e.transpileToGLSL100,g=void 0!==d&&d,y=this._getModuleList(e.modules),v=this._getHash(r),m=this._getHash(o),A=y.map((function(e){return t._getHash(e.name)})).sort(),b=f.map((function(e){return t._getHash(e)})),_=Object.keys(s).sort(),w=Object.keys(c).sort(),x=[],E=[],O=!0,S=!1,P=void 0;try{for(var M,I=_[Symbol.iterator]();!(O=(M=I.next()).done);O=!0){var R=M.value;x.push(this._getHash(R)),x.push(this._getHash(s[R]))}}catch(U){S=!0,P=U}finally{try{O||null==I.return||I.return()}finally{if(S)throw P}}var k=!0,j=!1,L=void 0;try{for(var N,D=w[Symbol.iterator]();!(k=(N=D.next()).done);k=!0){var F=N.value;E.push(this._getHash(F)),E.push(this._getHash(c[F]))}}catch(U){j=!0,L=U}finally{try{k||null==D.return||D.return()}finally{if(j)throw L}}var B="".concat(v,"/").concat(m,"D").concat(x.join("/"),"M").concat(A.join("/"),"I").concat(E.join("/"),"V").concat(b.join("/"),"H").concat(this.stateHash,"B").concat(p).concat(g?"T":"");if(!this._programCache[B]){var z=T(this.gl,{vs:r,fs:o,modules:y,inject:c,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:g});this._programCache[B]=new C.a(this.gl,{hash:B,vs:z.vs,fs:z.fs,varyings:f,bufferMode:p}),this._getUniforms[B]=z.getUniforms||function(t){},this._useCounts[B]=0}return this._useCounts[B]++,this._programCache[B]}},{key:"getUniforms",value:function(t){return this._getUniforms[t.hash]||null}},{key:"release",value:function(t){var e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}},{key:"_getHash",value:function(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}},{key:"_getModuleList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(this._defaultModules.length+t.length),n={},r=0,i=0,o=this._defaultModules.length;i<o;++i){var a=this._defaultModules[i],s=a.name;e[r++]=a,n[s]=!0}for(var u=0,c=t.length;u<c;++u){var l=t[u],f=l.name;n[f]||(e[r++]=l,n[f]=!0)}return e.length=r,e}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return $}));var r=n(8),i=n.n(r),o=n(14),a=n.n(o);function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;var l=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function f(t,e){var n=function(t){var e=t.name;if(e&&-1!==e.lastIndexOf(".")&&!t.type){var n=e.split(".").pop().toLowerCase(),r=l.get(n);r&&Object.defineProperty(t,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t}(t);if("string"!==typeof n.path){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof e?e:"string"===typeof r&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}var h=[".DS_Store","Thumbs.db"];function p(t){return(null!==t.target&&t.target.files?y(t.target.files):[]).map((function(t){return f(t)}))}function d(t,e){return s(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return t.items?(n=y(t.items).filter((function(t){return"file"===t.kind})),"drop"!==e?[2,n]:[4,Promise.all(n.map(v))]):[3,2];case 1:return[2,g(m(r.sent()))];case 2:return[2,g(y(t.files).map((function(t){return f(t)})))]}}))}))}function g(t){return t.filter((function(t){return-1===h.indexOf(t.name)}))}function y(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function v(t){if("function"!==typeof t.webkitGetAsEntry)return A(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?_(e):A(t)}function m(t){return t.reduce((function(t,e){return function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}(t,Array.isArray(e)?m(e):[e])}),[])}function A(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=f(e);return Promise.resolve(n)}function b(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,t.isDirectory?_(t):w(t)]}))}))}function _(t){var e=t.createReader();return new Promise((function(t,n){var r=[];!function i(){var o=this;e.readEntries((function(e){return s(o,void 0,void 0,(function(){var o,a,s;return u(this,(function(u){switch(u.label){case 0:if(e.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=u.sent(),t(o),[3,4];case 3:return a=u.sent(),n(a),[3,4];case 4:return[3,6];case 5:s=Promise.all(e.map(b)),r.push(s),i(),u.label=6;case 6:return[2]}}))}))}),(function(t){n(t)}))}()}))}function w(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e,n){t.file((function(n){var r=f(n,t.fullPath);e(r)}),(function(t){n(t)}))}))]}))}))}var x=n(398),E=n.n(x);function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var T=function(t){t=Array.isArray(t)&&1===t.length?t[0]:t;var e=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:"file-invalid-type",message:"File type must be ".concat(e)}},P=function(t){return{code:"file-too-large",message:"File is larger than ".concat(t," bytes")}},M=function(t){return{code:"file-too-small",message:"File is smaller than ".concat(t," bytes")}},C={code:"too-many-files",message:"Too many files"};function I(t,e){var n="application/x-moz-file"===t.type||E()(t,e);return[n,n?null:T(e)]}function R(t,e,n){if(k(t.size))if(k(e)&&k(n)){if(t.size>n)return[!1,P(n)];if(t.size<e)return[!1,M(e)]}else{if(k(e)&&t.size<e)return[!1,M(e)];if(k(n)&&t.size>n)return[!1,P(n)]}return[!0,null]}function k(t){return void 0!==t&&null!==t}function j(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,o=t.multiple,a=t.maxFiles;return!(!o&&e.length>1||o&&a>=1&&e.length>a)&&e.every((function(t){var e=O(I(t,n),1)[0],o=O(R(t,r,i),1)[0];return e&&o}))}function L(t){return"function"===typeof t.isPropagationStopped?t.isPropagationStopped():"undefined"!==typeof t.cancelBubble&&t.cancelBubble}function N(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,(function(t){return"Files"===t||"application/x-moz-file"===t})):!!t.target&&!!t.target.files}function D(t){t.preventDefault()}function F(t){return-1!==t.indexOf("MSIE")||-1!==t.indexOf("Trident/")}function B(t){return-1!==t.indexOf("Edge/")}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return F(t)||B(t)}function U(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.some((function(e){return!L(t)&&e&&e.apply(void 0,[t].concat(r)),L(t)}))}}function G(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||q(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){if(t){if("string"===typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Z=Object(r.forwardRef)((function(t,e){var n=t.children,o=$(Q(t,["children"])),a=o.open,s=Q(o,["open"]);return Object(r.useImperativeHandle)(e,(function(){return{open:a}}),[a]),i.a.createElement(r.Fragment,null,n(X(X({},s),{},{open:a})))}));Z.displayName="Dropzone";var K={disabled:!1,getFilesFromEvent:function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,(n=t,n.dataTransfer&&t.dataTransfer?d(t.dataTransfer,t.type):p(t))];var n}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1};Z.defaultProps=K,Z.propTypes={children:a.a.func,accept:a.a.oneOfType([a.a.string,a.a.arrayOf(a.a.string)]),multiple:a.a.bool,preventDropOnDocument:a.a.bool,noClick:a.a.bool,noKeyboard:a.a.bool,noDrag:a.a.bool,noDragEventsBubbling:a.a.bool,minSize:a.a.number,maxSize:a.a.number,maxFiles:a.a.number,disabled:a.a.bool,getFilesFromEvent:a.a.func,onFileDialogCancel:a.a.func,onDragEnter:a.a.func,onDragLeave:a.a.func,onDragOver:a.a.func,onDrop:a.a.func,onDropAccepted:a.a.func,onDropRejected:a.a.func};var J={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=X(X({},K),t),n=e.accept,i=e.disabled,o=e.getFilesFromEvent,a=e.maxSize,s=e.minSize,u=e.multiple,c=e.maxFiles,l=e.onDragEnter,f=e.onDragLeave,h=e.onDragOver,p=e.onDrop,d=e.onDropAccepted,g=e.onDropRejected,y=e.onFileDialogCancel,v=e.preventDropOnDocument,m=e.noClick,A=e.noKeyboard,b=e.noDrag,_=e.noDragEventsBubbling,w=Object(r.useRef)(null),x=Object(r.useRef)(null),E=Object(r.useReducer)(tt,J),O=V(E,2),S=O[0],T=O[1],P=S.isFocused,M=S.isFileDialogActive,k=S.draggedFiles,F=Object(r.useCallback)((function(){x.current&&(T({type:"openDialog"}),x.current.value=null,x.current.click())}),[T]),B=function(){M&&setTimeout((function(){x.current&&(x.current.files.length||(T({type:"closeDialog"}),"function"===typeof y&&y()))}),300)};Object(r.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[x,M,y]);var q=Object(r.useCallback)((function(t){w.current&&w.current.isEqualNode(t.target)&&(32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),F()))}),[w,x]),H=Object(r.useCallback)((function(){T({type:"focus"})}),[]),W=Object(r.useCallback)((function(){T({type:"blur"})}),[]),Z=Object(r.useCallback)((function(){m||(z()?setTimeout(F,0):F())}),[x,m]),$=Object(r.useRef)([]),et=function(t){w.current&&w.current.contains(t.target)||(t.preventDefault(),$.current=[])};Object(r.useEffect)((function(){return v&&(document.addEventListener("dragover",D,!1),document.addEventListener("drop",et,!1)),function(){v&&(document.removeEventListener("dragover",D),document.removeEventListener("drop",et))}}),[w,v]);var nt=Object(r.useCallback)((function(t){t.preventDefault(),t.persist(),ct(t),$.current=[].concat(G($.current),[t.target]),N(t)&&Promise.resolve(o(t)).then((function(e){L(t)&&!_||(T({draggedFiles:e,isDragActive:!0,type:"setDraggedFiles"}),l&&l(t))}))}),[o,l,_]),rt=Object(r.useCallback)((function(t){if(t.preventDefault(),t.persist(),ct(t),t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch(e){}return N(t)&&h&&h(t),!1}),[h,_]),it=Object(r.useCallback)((function(t){t.preventDefault(),t.persist(),ct(t);var e=$.current.filter((function(t){return w.current&&w.current.contains(t)})),n=e.indexOf(t.target);-1!==n&&e.splice(n,1),$.current=e,e.length>0||(T({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),N(t)&&f&&f(t))}),[w,f,_]),ot=Object(r.useCallback)((function(t){t.preventDefault(),t.persist(),ct(t),$.current=[],N(t)&&Promise.resolve(o(t)).then((function(e){if(!L(t)||_){var r=[],i=[];e.forEach((function(t){var e=V(I(t,n),2),o=e[0],u=e[1],c=V(R(t,s,a),2),l=c[0],f=c[1];if(o&&l)r.push(t);else{var h=[u,f].filter((function(t){return t}));i.push({file:t,errors:h})}})),(!u&&r.length>1||u&&c>=1&&r.length>c)&&(r.forEach((function(t){i.push({file:t,errors:[C]})})),r.splice(0)),T({acceptedFiles:r,fileRejections:i,type:"setFiles"}),p&&p(r,i,t),i.length>0&&g&&g(i,t),r.length>0&&d&&d(r,t)}})),T({type:"reset"})}),[u,n,s,a,c,o,p,d,g,_]),at=function(t){return i?null:t},st=function(t){return A?null:at(t)},ut=function(t){return b?null:at(t)},ct=function(t){_&&t.stopPropagation()},lt=Object(r.useMemo)((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.refKey,n=void 0===e?"ref":e,r=t.onKeyDown,o=t.onFocus,a=t.onBlur,s=t.onClick,u=t.onDragEnter,c=t.onDragOver,l=t.onDragLeave,f=t.onDrop,h=Q(t,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return X(X(Y({onKeyDown:st(U(r,q)),onFocus:st(U(o,H)),onBlur:st(U(a,W)),onClick:at(U(s,Z)),onDragEnter:ut(U(u,nt)),onDragOver:ut(U(c,rt)),onDragLeave:ut(U(l,it)),onDrop:ut(U(f,ot))},n,w),i||A?{}:{tabIndex:0}),h)}}),[w,q,H,W,Z,nt,rt,it,ot,A,b,i]),ft=Object(r.useCallback)((function(t){t.stopPropagation()}),[]),ht=Object(r.useMemo)((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.refKey,r=void 0===e?"ref":e,i=t.onChange,o=t.onClick,a=Q(t,["refKey","onChange","onClick"]),s=Y({accept:n,multiple:u,type:"file",style:{display:"none"},onChange:at(U(i,ot)),onClick:at(U(o,ft)),autoComplete:"off",tabIndex:-1},r,x);return X(X({},s),a)}}),[x,n,u,ot,i]),pt=k.length,dt=pt>0&&j({files:k,accept:n,minSize:s,maxSize:a,multiple:u,maxFiles:c}),gt=pt>0&&!dt;return X(X({},S),{},{isDragAccept:dt,isDragReject:gt,isFocused:P&&!i,getRootProps:lt,getInputProps:ht,rootRef:w,inputRef:x,open:at(F)})}function tt(t,e){switch(e.type){case"focus":return X(X({},t),{},{isFocused:!0});case"blur":return X(X({},t),{},{isFocused:!1});case"openDialog":return X(X({},t),{},{isFileDialogActive:!0});case"closeDialog":return X(X({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return X(X({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return X(X({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return X(X({},t),{},{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]});default:return t}}},function(t,e,n){"use strict";var r=n(236),i=n(156),o=n(8),a=o.useLayoutEffect,s=function(t){var e=Object(o.useRef)(t);return a((function(){e.current=t})),e},u=function(t,e){"function"!==typeof t?t.current=e:t(e)},c=function(t,e){var n=Object(o.useRef)();return Object(o.useCallback)((function(r){t.current=r,n.current&&u(n.current,null),n.current=e,e&&u(e,r)}),[e])},l={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},f=function(t){Object.keys(l).forEach((function(e){t.style.setProperty(e,l[e],"important")}))},h=null;var p=function(){},d=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],g=!!document.documentElement.currentStyle,y=function(t,e){var n=t.cacheMeasurements,a=t.maxRows,u=t.minRows,l=t.onChange,y=void 0===l?p:l,v=t.onHeightChange,m=void 0===v?p:v,A=Object(i.a)(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var b=void 0!==A.value,_=Object(o.useRef)(null),w=c(_,e),x=Object(o.useRef)(0),E=Object(o.useRef)(),O=function(){var t=_.current,e=n&&E.current?E.current:function(t){var e=window.getComputedStyle(t);if(null===e)return null;var n,r=(n=e,d.reduce((function(t,e){return t[e]=n[e],t}),{})),i=r.boxSizing;return""===i?null:(g&&"border-box"===i&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})}(t);if(e){E.current=e;var r=function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=1/0),h||((h=document.createElement("textarea")).setAttribute("tab-index","-1"),h.setAttribute("aria-hidden","true"),f(h)),null===h.parentNode&&document.body.appendChild(h);var i=t.paddingSize,o=t.borderSize,a=t.sizingStyle,s=a.boxSizing;Object.keys(a).forEach((function(t){var e=t;h.style[e]=a[e]})),f(h),h.value=e;var u=function(t,e){var n=t.scrollHeight;return"border-box"===e.sizingStyle.boxSizing?n+e.borderSize:n-e.paddingSize}(h,t);h.value="x";var c=h.scrollHeight-i,l=c*n;"border-box"===s&&(l=l+i+o),u=Math.max(l,u);var p=c*r;return"border-box"===s&&(p=p+i+o),[u=Math.min(p,u),c]}(e,t.value||t.placeholder||"x",u,a),i=r[0],o=r[1];x.current!==i&&(x.current=i,t.style.setProperty("height",i+"px","important"),m(i,{rowHeight:o}))}};return Object(o.useLayoutEffect)(O),function(t){var e=s(t);Object(o.useEffect)((function(){var t=function(t){e.current(t)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[])}(O),Object(o.createElement)("textarea",Object(r.a)({},A,{onChange:function(t){b||O(),y(t)},ref:w}))},v=Object(o.forwardRef)(y);e.a=v},function(t,e,n){"use strict";var r=n(236),i=n(156);var o=n(8),a=n(14),s=n.n(a),u=n(385),c=["client","offset","scroll","bounds","margin"];function l(t){var e=[];return c.forEach((function(n){t[n]&&e.push(n)})),e}function f(t,e){var n={};if(e.indexOf("client")>-1&&(n.client={top:t.clientTop,left:t.clientLeft,width:t.clientWidth,height:t.clientHeight}),e.indexOf("offset")>-1&&(n.offset={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}),e.indexOf("scroll")>-1&&(n.scroll={top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}),e.indexOf("bounds")>-1){var r=t.getBoundingClientRect();n.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(e.indexOf("margin")>-1){var i=getComputedStyle(t);n.margin={top:i?parseInt(i.marginTop):0,right:i?parseInt(i.marginRight):0,bottom:i?parseInt(i.marginBottom):0,left:i?parseInt(i.marginLeft):0}}return n}function h(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||window}var p,d=function(t){var e,n;return n=e=function(e){var n,a;function s(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},t._animationFrameID=null,t._resizeObserver=null,t._node=null,t._window=null,t.measure=function(e){var n=f(t._node,p||l(t.props));e&&(n.entry=e[0].contentRect),t._animationFrameID=t._window.requestAnimationFrame((function(){null!==t._resizeObserver&&(t.setState({contentRect:n}),"function"===typeof t.props.onResize&&t.props.onResize(n))}))},t._handleRef=function(e){null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.unobserve(t._node),t._node=e,t._window=h(t._node);var n=t.props.innerRef;n&&("function"===typeof n?n(t._node):n.current=t._node),null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.observe(t._node)},t}a=e,(n=s).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var c=s.prototype;return c.componentDidMount=function(){this._resizeObserver=null!==this._window&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new u.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(f(this._node,p||l(this.props))))},c.componentWillUnmount=function(){null!==this._window&&this._window.cancelAnimationFrame(this._animationFrameID),null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},c.render=function(){var e=this.props,n=(e.innerRef,e.onResize,Object(i.a)(e,["innerRef","onResize"]));return Object(o.createElement)(t,Object(r.a)({},n,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},s}(o.Component),e.propTypes={client:s.a.bool,offset:s.a.bool,scroll:s.a.bool,bounds:s.a.bool,margin:s.a.bool,innerRef:s.a.oneOfType([s.a.object,s.a.func]),onResize:s.a.func},n}((function(t){var e=t.measure,n=t.measureRef,r=t.contentRect;return(0,t.children)({measure:e,measureRef:n,contentRect:r})}));d.displayName="Measure",d.propTypes.children=s.a.func;e.a=d},,,,,,,,function(t,e,n){"use strict";n(204);var r=n(8),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),e.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(l=e.ref),e)s.call(e,r)&&!u.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:l,props:o,_owner:a.current}}e.jsx=c,e.jsxs=c},function(t,e,n){"use strict";var r=n(204),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),o=f("react.portal"),e.Fragment=f("react.fragment"),e.StrictMode=f("react.strict_mode"),e.Profiler=f("react.profiler"),a=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),e.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}function v(){}function m(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var A=m.prototype=new v;A.constructor=m,r(A,y.prototype),A.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function x(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,r)&&!w.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:b.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var O=/\/+/g;function S(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=t),t=""===r?"."+S(u,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(O,"$&/")+"/"),T(a,e,n,"",(function(t){return t}))):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+t)),e.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+S(s=t[c],c);u+=T(s,e,n,l,a)}else if("function"===typeof(l=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=h&&t[h]||t["@@iterator"])?t:null}(t)))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=T(s=s.value,e,n,l=r+S(s,c++),a);else if("object"===s)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function P(t,e,n){if(null==t)return t;var r=[],i=0;return T(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function M(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var C={current:null};function I(){var t=C.current;if(null===t)throw Error(p(321));return t}var R={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error(p(143));return t}},e.Component=y,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(p(267,t));var o=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=b.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)_.call(e,l)&&!w.hasOwnProperty(l)&&(o[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=x,e.createFactory=function(t){var e=x.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:l,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return I().useCallback(t,e)},e.useContext=function(t,e){return I().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return I().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return I().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return I().useLayoutEffect(t,e)},e.useMemo=function(t,e){return I().useMemo(t,e)},e.useReducer=function(t,e,n){return I().useReducer(t,e,n)},e.useRef=function(t){return I().useRef(t)},e.useState=function(t){return I().useState(t)},e.version="17.0.1"},function(t,e,n){"use strict";var r=n(8),i=n(204),o=n(419);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},g={};function y(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new y(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new y(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new y(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new y(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new y(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new y(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new y(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new y(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new y(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function A(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=v.hasOwnProperty(e)?v[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!p.call(g,t)||!p.call(d,t)&&(h.test(t)?g[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,A);v[e]=new y(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,A);v[e]=new y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,A);v[e]=new y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new y(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new y(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,x=60106,E=60107,O=60108,S=60114,T=60109,P=60110,M=60112,C=60113,I=60120,R=60115,k=60116,j=60121,L=60128,N=60129,D=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),x=B("react.portal"),E=B("react.fragment"),O=B("react.strict_mode"),S=B("react.profiler"),T=B("react.provider"),P=B("react.context"),M=B("react.forward_ref"),C=B("react.suspense"),I=B("react.suspense_list"),R=B("react.memo"),k=B("react.lazy"),j=B("react.block"),B("react.scope"),L=B("react.opaque.id"),N=B("react.debug_trace_mode"),D=B("react.offscreen"),F=B("react.legacy_hidden")}var z,U="function"===typeof Symbol&&Symbol.iterator;function G(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=U&&t[U]||t["@@iterator"])?t:null}function V(t){if(void 0===z)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);z=e&&e[1]||""}return"\n"+z+t}var q=!1;function H(t,e){if(!t||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?V(t):""}function W(t){switch(t.tag){case 5:return V(t.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return t=H(t.type,!1);case 11:return t=H(t.type.render,!1);case 22:return t=H(t.type._render,!1);case 1:return t=H(t.type,!0);default:return""}}function X(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case x:return"Portal";case S:return"Profiler";case O:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case P:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case R:return X(t.type);case j:return X(t._render);case k:e=t._payload,t=t._init;try{return X(t(e))}catch(n){}}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Z(t){t._valueTracker||(t._valueTracker=function(t){var e=Q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Y(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Y(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Y(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Y(n)}}function ct(t,e){var n=Y(e.value),r=Y(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function lt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ft="http://www.w3.org/1999/xhtml",ht="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var gt,yt,vt=(yt=function(t,e){if(t.namespaceURI!==ht||"innerHTML"in t)t.innerHTML=e;else{for((gt=gt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return yt(t,e)}))}:yt);function mt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var At={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function _t(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||At.hasOwnProperty(t)&&At[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_t(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(At).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),At[e]=At[t]}))}));var xt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(t,e){if(e){if(xt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function Ot(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function St(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Tt=null,Pt=null,Mt=null;function Ct(t){if(t=ti(t)){if("function"!==typeof Tt)throw Error(a(280));var e=t.stateNode;e&&(e=ni(e),Tt(t.stateNode,t.type,e))}}function It(t){Pt?Mt?Mt.push(t):Mt=[t]:Pt=t}function Rt(){if(Pt){var t=Pt,e=Mt;if(Mt=Pt=null,Ct(t),e)for(t=0;t<e.length;t++)Ct(e[t])}}function kt(t,e){return t(e)}function jt(t,e,n,r,i){return t(e,n,r,i)}function Lt(){}var Nt=kt,Dt=!1,Ft=!1;function Bt(){null===Pt&&null===Mt||(Lt(),Rt())}function zt(t,e){var n=t.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Ut=!1;if(f)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch(yt){Ut=!1}function Vt(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var qt=!1,Ht=null,Wt=!1,Xt=null,Yt={onError:function(t){qt=!0,Ht=t}};function Qt(t,e,n,r,i,o,a,s,u){qt=!1,Ht=null,Vt.apply(Yt,arguments)}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if(Zt(t)!==t)throw Error(a(188))}function $t(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Jt(i),t;if(o===r)return Jt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,re,ie,oe=!1,ae=[],se=null,ue=null,ce=null,le=new Map,fe=new Map,he=[],pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ge(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":ue=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(e.pointerId)}}function ye(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=de(e,n,r,i,o),null!==e&&(null!==(e=ti(e))&&ne(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ve(t){var e=$r(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Kt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){re(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function me(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=ti(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function Ae(t,e,n){me(t)&&n.delete(e)}function be(){for(oe=!1;0<ae.length;){var t=ae[0];if(null!==t.blockedOn){null!==(t=ti(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&ae.shift()}null!==se&&me(se)&&(se=null),null!==ue&&me(ue)&&(ue=null),null!==ce&&me(ce)&&(ce=null),le.forEach(Ae),fe.forEach(Ae)}function _e(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,be)))}function we(t){function e(e){return _e(e,t)}if(0<ae.length){_e(ae[0],t);for(var n=1;n<ae.length;n++){var r=ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==se&&_e(se,t),null!==ue&&_e(ue,t),null!==ce&&_e(ce,t),le.forEach(e),fe.forEach(e),n=0;n<he.length;n++)(r=he[n]).blockedOn===t&&(r.blockedOn=null);for(;0<he.length&&null===(n=he[0]).blockedOn;)ve(n),null===n.blockedOn&&he.shift()}function xe(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ee={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionend:xe("Transition","TransitionEnd")},Oe={},Se={};function Te(t){if(Oe[t])return Oe[t];if(!Ee[t])return t;var e,n=Ee[t];for(e in n)if(n.hasOwnProperty(e)&&e in Se)return Oe[t]=n[e];return t}f&&(Se=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);var Pe=Te("animationend"),Me=Te("animationiteration"),Ce=Te("animationstart"),Ie=Te("transitionend"),Re=new Map,ke=new Map,je=["abort","abort",Pe,"animationEnd",Me,"animationIteration",Ce,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ie,"transitionEnd","waiting","waiting"];function Le(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),ke.set(r,e),Re.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Ne=8;function De(t){if(0!==(1&t))return Ne=15,1;if(0!==(2&t))return Ne=14,2;if(0!==(4&t))return Ne=13,4;var e=24&t;return 0!==e?(Ne=12,e):0!==(32&t)?(Ne=11,32):0!==(e=192&t)?(Ne=10,e):0!==(256&t)?(Ne=9,256):0!==(e=3584&t)?(Ne=8,e):0!==(4096&t)?(Ne=7,4096):0!==(e=4186112&t)?(Ne=6,e):0!==(e=62914560&t)?(Ne=5,e):67108864&t?(Ne=4,67108864):0!==(134217728&t)?(Ne=3,134217728):0!==(e=805306368&t)?(Ne=2,e):0!==(1073741824&t)?(Ne=1,1073741824):(Ne=8,t)}function Fe(t,e){var n=t.pendingLanes;if(0===n)return Ne=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=Ne=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=De(u),i=Ne):0!==(s&=o)&&(r=De(s),i=Ne)}else 0!==(o=n&~a)?(r=De(o),i=Ne):0!==s&&(r=De(s),i=Ne);if(0===r)return 0;if(r=n&((0>(r=31-qe(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&a)){if(De(e),i<=Ne)return e;Ne=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-qe(e)),r|=t[n],e&=~i;return r}function Be(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ze(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ue(24&~e))?ze(10,e):t;case 10:return 0===(t=Ue(192&~e))?ze(8,e):t;case 8:return 0===(t=Ue(3584&~e))&&(0===(t=Ue(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ue(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function Ue(t){return t&-t}function Ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ve(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-qe(e)]=n}var qe=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(He(t)/We|0)|0},He=Math.log,We=Math.LN2;var Xe=o.unstable_UserBlockingPriority,Ye=o.unstable_runWithPriority,Qe=!0;function Ze(t,e,n,r){Dt||Lt();var i=Je,o=Dt;Dt=!0;try{jt(i,t,e,n,r)}finally{(Dt=o)||Bt()}}function Ke(t,e,n,r){Ye(Xe,Je.bind(null,t,e,n,r))}function Je(t,e,n,r){var i;if(Qe)if((i=0===(4&e))&&0<ae.length&&-1<pe.indexOf(t))t=de(null,t,e,n,r),ae.push(t);else{var o=$e(t,e,n,r);if(null===o)i&&ge(t,r);else{if(i){if(-1<pe.indexOf(t))return t=de(o,t,e,n,r),void ae.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return se=ye(se,t,e,n,r,i),!0;case"dragenter":return ue=ye(ue,t,e,n,r,i),!0;case"mouseover":return ce=ye(ce,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return le.set(o,ye(le.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,fe.set(o,ye(fe.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;ge(t,r)}Rr(t,e,r,null,n)}}}function $e(t,e,n,r){var i=St(r);if(null!==(i=$r(i))){var o=Zt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Kt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rr(t,e,r,i,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,r=n.length,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function an(){return!0}function sn(){return!1}function un(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),e}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(hn),dn=i({},hn,{view:0,detail:0}),gn=un(dn),yn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fn&&(fn&&"mousemove"===t.type?(cn=t.screenX-fn.screenX,ln=t.screenY-fn.screenY):ln=cn=0,fn=t),cn)},movementY:function(t){return"movementY"in t?t.movementY:ln}}),vn=un(yn),mn=un(i({},yn,{dataTransfer:0})),An=un(i({},dn,{relatedTarget:0})),bn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=un(i({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=un(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=On[t])&&!!e[t]}function Tn(){return Sn}var Pn=un(i({},dn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Mn=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=un(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),In=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=un(i({},yn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=[9,13,27,32],jn=f&&"CompositionEvent"in window,Ln=null;f&&"documentMode"in document&&(Ln=document.documentMode);var Nn=f&&"TextEvent"in window&&!Ln,Dn=f&&(!jn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Bn=!1;function zn(t,e){switch(t){case"keyup":return-1!==kn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Gn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function Hn(t,e,n,r){It(r),0<(e=jr(e,"onChange")).length&&(n=new pn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Xn=null;function Yn(t){Sr(t,0)}function Qn(t){if(K(ei(t)))return t}function Zn(t,e){if("change"===t)return e}var Kn=!1;if(f){var Jn;if(f){var $n="oninput"in document;if(!$n){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),$n="function"===typeof tr.oninput}Jn=$n}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",nr),Xn=Wn=null)}function nr(t){if("value"===t.propertyName&&Qn(Xn)){var e=[];if(Hn(e,Xn,t,St(t)),t=Yn,Dt)t(e);else{Dt=!0;try{kt(t,e)}finally{Dt=!1,Bt()}}}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(Wn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Qn(Xn)}function or(t,e){if("click"===t)return Qn(e)}function ar(t,e){if("input"===t||"change"===t)return Qn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ur=Object.prototype.hasOwnProperty;function cr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(e,n[r])||!sr(t[n[r]],e[n[r]]))return!1;return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fr(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pr(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function dr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,mr=null,Ar=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ar||null==yr||yr!==J(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&cr(mr,r)||(mr=r,0<(r=jr(vr,"onSelect")).length&&(e=new pn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yr)))}Le("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Le("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Le(je,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<_r.length;wr++)ke.set(_r[wr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Er=new Set("cancel close invalid load scroll toggle".split(" ").concat(xr));function Or(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,c){if(Qt.apply(this,arguments),qt){if(!qt)throw Error(a(198));var l=Ht;qt=!1,Ht=null,Wt||(Wt=!0,Xt=l)}}(r,e,void 0,t),t.currentTarget=null}function Sr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;Or(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;Or(i,s,c),o=u}}}if(Wt)throw t=Xt,Wt=!1,Xt=null,t}function Tr(t,e){var n=ri(e),r=t+"__bubble";n.has(r)||(Ir(e,t,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Mr(t){t[Pr]||(t[Pr]=!0,s.forEach((function(e){Er.has(e)||Cr(e,!1,t,null),Cr(e,!0,t,null)})))}function Cr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Er.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ri(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Ir(o,t,i,e),a.add(s))}function Ir(t,e,n,r){var i=ke.get(e);switch(void 0===i?2:i){case 0:i=Ze;break;case 1:i=Ke;break;default:i=Je}n=i.bind(null,e,n,t),i=void 0,!Ut||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=$r(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Ft)return t(e,n);Ft=!0;try{Nt(t,e,n)}finally{Ft=!1,Bt()}}((function(){var r=o,i=St(n),a=[];t:{var s=Re.get(t);if(void 0!==s){var u=pn,c=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":u=Pn;break;case"focusin":c="focus",u=An;break;case"focusout":c="blur",u=An;break;case"beforeblur":case"afterblur":u=An;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case Pe:case Me:case Ce:u=bn;break;case Ie:u=In;break;case"scroll":u=gn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Mn}var l=0!==(4&e),f=!l&&"scroll"===t,h=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=r;null!==d;){var g=(p=d).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=zt(d,h))&&l.push(kr(d,g,p)))),f)break;d=d.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=n.relatedTarget||n.fromElement)||!$r(c)&&!c[Kr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?$r(c):null)&&(c!==(f=Zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=vn,g="onMouseLeave",h="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(l=Mn,g="onPointerLeave",h="onPointerEnter",d="pointer"),f=null==u?s:ei(u),p=null==c?s:ei(c),(s=new l(g,d+"leave",u,n,i)).target=f,s.relatedTarget=p,g=null,$r(i)===r&&((l=new l(h,d+"enter",c,n,i)).target=p,l.relatedTarget=f,g=l),f=g,u&&c)t:{for(h=c,d=0,p=l=u;p;p=Lr(p))d++;for(p=0,g=h;g;g=Lr(g))p++;for(;0<d-p;)l=Lr(l),d--;for(;0<p-d;)h=Lr(h),p--;for(;d--;){if(l===h||null!==h&&l===h.alternate)break t;l=Lr(l),h=Lr(h)}l=null}else l=null;null!==u&&Nr(a,s,u,l,!1),null!==c&&null!==f&&Nr(a,f,c,l,!0)}if("select"===(u=(s=r?ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Zn;else if(qn(s))if(Kn)y=ar;else{y=ir;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=or);switch(y&&(y=y(t,r))?Hn(a,y,n,i):(v&&v(t,s,r),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&it(s,"number",s.value)),v=r?ei(r):window,t){case"focusin":(qn(v)||"true"===v.contentEditable)&&(yr=v,vr=r,mr=null);break;case"focusout":mr=vr=yr=null;break;case"mousedown":Ar=!0;break;case"contextmenu":case"mouseup":case"dragend":Ar=!1,br(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(a,n,i)}var m;if(jn)t:{switch(t){case"compositionstart":var A="onCompositionStart";break t;case"compositionend":A="onCompositionEnd";break t;case"compositionupdate":A="onCompositionUpdate";break t}A=void 0}else Gn?zn(t,n)&&(A="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(A="onCompositionStart");A&&(Dn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==A?"onCompositionEnd"===A&&Gn&&(m=rn()):(en="value"in(tn=i)?tn.value:tn.textContent,Gn=!0)),0<(v=jr(r,A)).length&&(A=new wn(A,t,null,n,i),a.push({event:A,listeners:v}),m?A.data=m:null!==(m=Un(n))&&(A.data=m))),(m=Nn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Bn=!0,Fn);case"textInput":return(t=e.data)===Fn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Gn)return"compositionend"===t||!jn&&zn(t,e)?(t=rn(),nn=en=tn=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}Sr(a,e)}))}function kr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=zt(t,n))&&r.unshift(kr(t,o,i)),null!=(o=zt(t,e))&&r.push(kr(t,o,i))),t=t.return}return r}function Lr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Nr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=zt(n,o))&&a.unshift(kr(n,u,s)):i||null!=(u=zt(n,o))&&a.push(kr(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Dr(){}var Fr=null,Br=null;function zr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ur(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Vr="function"===typeof clearTimeout?clearTimeout:void 0;function qr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Hr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Wr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Xr=0;var Yr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Yr,Zr="__reactProps$"+Yr,Kr="__reactContainer$"+Yr,Jr="__reactEvents$"+Yr;function $r(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[Qr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Wr(t);null!==t;){if(n=t[Qr])return n;t=Wr(t)}return e}n=(t=n).parentNode}return null}function ti(t){return!(t=t[Qr]||t[Kr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ei(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function ni(t){return t[Zr]||null}function ri(t){var e=t[Jr];return void 0===e&&(e=t[Jr]=new Set),e}var ii=[],oi=-1;function ai(t){return{current:t}}function si(t){0>oi||(t.current=ii[oi],ii[oi]=null,oi--)}function ui(t,e){oi++,ii[oi]=t.current,t.current=e}var ci={},li=ai(ci),fi=ai(!1),hi=ci;function pi(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function di(t){return null!==(t=t.childContextTypes)&&void 0!==t}function gi(){si(fi),si(li)}function yi(t,e,n){if(li.current!==ci)throw Error(a(168));ui(li,e),ui(fi,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,X(e)||"Unknown",o));return i({},n,r)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,hi=li.current,ui(li,t),ui(fi,fi.current),!0}function Ai(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=vi(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,si(fi),si(li),ui(li,t)):si(fi),ui(fi,n)}var bi=null,_i=null,wi=o.unstable_runWithPriority,xi=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Oi=o.unstable_shouldYield,Si=o.unstable_requestPaint,Ti=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Mi=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,Ii=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,ki=o.unstable_IdlePriority,ji={},Li=void 0!==Si?Si:function(){},Ni=null,Di=null,Fi=!1,Bi=Ti(),zi=1e4>Bi?Ti:function(){return Ti()-Bi};function Ui(){switch(Pi()){case Mi:return 99;case Ci:return 98;case Ii:return 97;case Ri:return 96;case ki:return 95;default:throw Error(a(332))}}function Gi(t){switch(t){case 99:return Mi;case 98:return Ci;case 97:return Ii;case 96:return Ri;case 95:return ki;default:throw Error(a(332))}}function Vi(t,e){return t=Gi(t),wi(t,e)}function qi(t,e,n){return t=Gi(t),xi(t,e,n)}function Hi(){if(null!==Di){var t=Di;Di=null,Ei(t)}Wi()}function Wi(){if(!Fi&&null!==Ni){Fi=!0;var t=0;try{var e=Ni;Vi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ni=null}catch(n){throw null!==Ni&&(Ni=Ni.slice(t+1)),xi(Mi,Hi),n}finally{Fi=!1}}}var Xi=_.ReactCurrentBatchConfig;function Yi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Qi=ai(null),Zi=null,Ki=null,Ji=null;function $i(){Ji=Ki=Zi=null}function to(t){var e=Qi.current;si(Qi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function no(t,e){Zi=t,Ji=Ki=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(ja=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ki){if(null===Zi)throw Error(a(308));Ki=e,Zi.dependencies={lanes:0,firstContext:e,responders:null}}else Ki=Ki.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var f=t.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==a){for(h=o.baseState,s=0,f=l=c=null;;){u=a.lane;var p=a.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var d=t,g=a;switch(u=e,p=n,g.tag){case 1:if("function"===typeof(d=g.payload)){h=d.call(p,h,u);break t}h=d;break t;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(u="function"===typeof(d=g.payload)?d.call(p,h,u):d)||void 0===u)break t;h=i({},h,u);break t;case 2:io=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===f?(l=f=p,c=h):f=f.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===f&&(c=h),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=f,Fs|=s,t.lanes=s,t.memoizedState=h}}function fo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ho=(new r.Component).refs;function po(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var go={isMounted:function(t){return!!(t=t._reactInternals)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cu(),i=lu(t),o=so(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),uo(t,o),fu(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cu(),i=lu(t),o=so(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),uo(t,o),fu(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cu(),r=lu(t),i=so(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),uo(t,i),fu(t,r,n)}};function yo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function vo(t,e,n){var r=!1,i=ci,o=e.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=di(e)?hi:li.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?pi(t,i):ci),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=go,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function mo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&go.enqueueReplaceState(e,e.state,null)}function Ao(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ho,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=di(e)?hi:li.current,i.context=pi(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(po(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&go.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var bo=Array.isArray;function _o(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===ho&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function wo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function xo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Vu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Xu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=_o(t,e,n),r.return=t,r):((r=qu(n.type,n.key,n.props,null,t.mode,r)).ref=_o(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Yu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=Hu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Xu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=qu(e.type,e.key,e.props,null,t.mode,n)).ref=_o(t,null,e),n.return=t,n;case x:return(e=Yu(e,t.mode,n)).return=t,e}if(bo(e)||G(e))return(e=Hu(e,t.mode,n,null)).return=t,e;wo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===E?f(t,e,n.props.children,r,i):c(t,e,n,r):null;case x:return n.key===i?l(t,e,n,r):null}if(bo(n)||G(n))return null!==i?null:f(t,e,n,r,null);wo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return t=t.get(null===r.key?n:r.key)||null,r.type===E?f(e,t,r.props.children,i,r.key):c(e,t,r,i);case x:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(bo(r)||G(r))return f(e,t=t.get(n)||null,r,i,null);wo(e,r)}return null}function g(i,a,s,u){for(var c=null,l=null,f=a,g=a=0,y=null;null!==f&&g<s.length;g++){f.index>g?(y=f,f=null):y=f.sibling;var v=p(i,f,s[g],u);if(null===v){null===f&&(f=y);break}t&&f&&null===v.alternate&&e(i,f),a=o(v,a,g),null===l?c=v:l.sibling=v,l=v,f=y}if(g===s.length)return n(i,f),c;if(null===f){for(;g<s.length;g++)null!==(f=h(i,s[g],u))&&(a=o(f,a,g),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);g<s.length;g++)null!==(y=d(f,i,g,s[g],u))&&(t&&null!==y.alternate&&f.delete(null===y.key?g:y.key),a=o(y,a,g),null===l?c=y:l.sibling=y,l=y);return t&&f.forEach((function(t){return e(i,t)})),c}function y(i,s,u,c){var l=G(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,g=s,y=s=0,v=null,m=u.next();null!==g&&!m.done;y++,m=u.next()){g.index>y?(v=g,g=null):v=g.sibling;var A=p(i,g,m.value,c);if(null===A){null===g&&(g=v);break}t&&g&&null===A.alternate&&e(i,g),s=o(A,s,y),null===f?l=A:f.sibling=A,f=A,g=v}if(m.done)return n(i,g),l;if(null===g){for(;!m.done;y++,m=u.next())null!==(m=h(i,m.value,c))&&(s=o(m,s,y),null===f?l=m:f.sibling=m,f=m);return l}for(g=r(i,g);!m.done;y++,m=u.next())null!==(m=d(g,i,y,m.value,c))&&(t&&null!==m.alternate&&g.delete(null===m.key?y:m.key),s=o(m,s,y),null===f?l=m:f.sibling=m,f=m);return t&&g.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case w:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===E){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=_o(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===E?((r=Hu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=qu(o.type,o.key,o.props,null,t.mode,u)).ref=_o(t,r,o),u.return=t,t=u)}return s(t);case x:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Yu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Xu(o,t.mode,u)).return=t,t=r),s(t);if(bo(o))return g(t,r,o,u);if(G(o))return y(t,r,o,u);if(l&&wo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,X(t.type)||"Component"))}return n(t,r)}}var Eo=xo(!0),Oo=xo(!1),So={},To=ai(So),Po=ai(So),Mo=ai(So);function Co(t){if(t===So)throw Error(a(174));return t}function Io(t,e){switch(ui(Mo,e),ui(Po,t),ui(To,So),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dt(null,"");break;default:e=dt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}si(To),ui(To,e)}function Ro(){si(To),si(Po),si(Mo)}function ko(t){Co(Mo.current);var e=Co(To.current),n=dt(e,t.type);e!==n&&(ui(Po,t),ui(To,n))}function jo(t){Po.current===t&&(si(To),si(Po))}var Lo=ai(0);function No(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Do=null,Fo=null,Bo=!1;function zo(t,e){var n=Uu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Uo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Go(t){if(Bo){var e=Fo;if(e){var n=e;if(!Uo(t,e)){if(!(e=Hr(n.nextSibling))||!Uo(t,e))return t.flags=-1025&t.flags|2,Bo=!1,void(Do=t);zo(Do,n)}Do=t,Fo=Hr(e.firstChild)}else t.flags=-1025&t.flags|2,Bo=!1,Do=t}}function Vo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Do=t}function qo(t){if(t!==Do)return!1;if(!Bo)return Vo(t),Bo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Ur(e,t.memoizedProps))for(e=Fo;e;)zo(t,e),e=Hr(e.nextSibling);if(Vo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Fo=Hr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Fo=null}}else Fo=Do?Hr(t.stateNode.nextSibling):null;return!0}function Ho(){Fo=Do=null,Bo=!1}var Wo=[];function Xo(){for(var t=0;t<Wo.length;t++)Wo[t]._workInProgressVersionPrimary=null;Wo.length=0}var Yo=_.ReactCurrentDispatcher,Qo=_.ReactCurrentBatchConfig,Zo=0,Ko=null,Jo=null,$o=null,ta=!1,ea=!1;function na(){throw Error(a(321))}function ra(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ia(t,e,n,r,i,o){if(Zo=o,Ko=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yo.current=null===t||null===t.memoizedState?Ca:Ia,t=n(r,i),ea){o=0;do{if(ea=!1,!(25>o))throw Error(a(301));o+=1,$o=Jo=null,e.updateQueue=null,Yo.current=Ra,t=n(r,i)}while(ea)}if(Yo.current=Ma,e=null!==Jo&&null!==Jo.next,Zo=0,$o=Jo=Ko=null,ta=!1,e)throw Error(a(300));return t}function oa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$o?Ko.memoizedState=$o=t:$o=$o.next=t,$o}function aa(){if(null===Jo){var t=Ko.alternate;t=null!==t?t.memoizedState:null}else t=Jo.next;var e=null===$o?Ko.memoizedState:$o.next;if(null!==e)$o=e,Jo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Jo=t).memoizedState,baseState:Jo.baseState,baseQueue:Jo.baseQueue,queue:Jo.queue,next:null},null===$o?Ko.memoizedState=$o=t:$o=$o.next=t}return $o}function sa(t,e){return"function"===typeof e?e(t):e}function ua(t){var e=aa(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Jo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Zo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,Ko.lanes|=l,Fs|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,sr(r,e.memoizedState)||(ja=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function ca(t){var e=aa(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);sr(o,e.memoizedState)||(ja=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function la(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Zo&t)===t)&&(e._workInProgressVersionPrimary=r,Wo.push(e))),t)return n(e._source);throw Wo.push(e),Error(a(350))}function fa(t,e,n,r){var i=Cs;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Yo.current,c=u.useState((function(){return la(i,e,n)})),l=c[1],f=c[0];c=$o;var h=t.memoizedState,p=h.refs,d=p.getSnapshot,g=h.source;h=h.subscribe;var y=Ko;return t.memoizedState={refs:p,source:e,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var t=o(e._source);if(!sr(s,t)){t=n(e._source),sr(f,t)||(l(t),t=lu(y),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var u=31-qe(a),c=1<<u;r[u]|=t,a&=~c}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var r=lu(y);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),sr(d,n)&&sr(g,e)&&sr(h,r)||((t={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:f}).dispatch=l=Pa.bind(null,Ko,t),c.queue=t,c.baseQueue=null,f=la(i,e,n),c.memoizedState=c.baseState=f),f}function ha(t,e,n){return fa(aa(),t,e,n)}function pa(t){var e=oa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t}).dispatch=Pa.bind(null,Ko,t),[e.memoizedState,t]}function da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Ko.updateQueue)?(e={lastEffect:null},Ko.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ga(t){return t={current:t},oa().memoizedState=t}function ya(){return aa().memoizedState}function va(t,e,n,r){var i=oa();Ko.flags|=t,i.memoizedState=da(1|e,n,void 0,void 0===r?null:r)}function ma(t,e,n,r){var i=aa();r=void 0===r?null:r;var o=void 0;if(null!==Jo){var a=Jo.memoizedState;if(o=a.destroy,null!==r&&ra(r,a.deps))return void da(e,n,o,r)}Ko.flags|=t,i.memoizedState=da(1|e,n,o,r)}function Aa(t,e){return va(516,4,t,e)}function ba(t,e){return ma(516,4,t,e)}function _a(t,e){return ma(4,2,t,e)}function wa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function xa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ma(4,2,wa.bind(null,e,t),n)}function Ea(){}function Oa(t,e){var n=aa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ra(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sa(t,e){var n=aa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ra(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ta(t,e){var n=Ui();Vi(98>n?98:n,(function(){t(!0)})),Vi(97<n?97:n,(function(){var n=Qo.transition;Qo.transition=1;try{t(!1),e()}finally{Qo.transition=n}}))}function Pa(t,e,n){var r=cu(),i=lu(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===Ko||null!==a&&a===Ko)ea=ta=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,sr(u,s))return}catch(c){}fu(t,i,r)}}var Ma={readContext:ro,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},Ca={readContext:ro,useCallback:function(t,e){return oa().memoizedState=[t,void 0===e?null:e],t},useContext:ro,useEffect:Aa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,va(4,2,wa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var n=oa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oa();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Pa.bind(null,Ko,t),[r.memoizedState,t]},useRef:ga,useState:pa,useDebugValue:Ea,useDeferredValue:function(t){var e=pa(t),n=e[0],r=e[1];return Aa((function(){var e=Qo.transition;Qo.transition=1;try{r(t)}finally{Qo.transition=e}}),[t]),n},useTransition:function(){var t=pa(!1),e=t[0];return ga(t=Ta.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=oa();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},fa(r,t,e,n)},useOpaqueIdentifier:function(){if(Bo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Xr++).toString(36))),Error(a(355))})),n=pa(e)[1];return 0===(2&Ko.mode)&&(Ko.flags|=516,da(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),e}return pa(e="r:"+(Xr++).toString(36)),e},unstable_isNewReconciler:!1},Ia={readContext:ro,useCallback:Oa,useContext:ro,useEffect:ba,useImperativeHandle:xa,useLayoutEffect:_a,useMemo:Sa,useReducer:ua,useRef:ya,useState:function(){return ua(sa)},useDebugValue:Ea,useDeferredValue:function(t){var e=ua(sa),n=e[0],r=e[1];return ba((function(){var e=Qo.transition;Qo.transition=1;try{r(t)}finally{Qo.transition=e}}),[t]),n},useTransition:function(){var t=ua(sa)[0];return[ya().current,t]},useMutableSource:ha,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},Ra={readContext:ro,useCallback:Oa,useContext:ro,useEffect:ba,useImperativeHandle:xa,useLayoutEffect:_a,useMemo:Sa,useReducer:ca,useRef:ya,useState:function(){return ca(sa)},useDebugValue:Ea,useDeferredValue:function(t){var e=ca(sa),n=e[0],r=e[1];return ba((function(){var e=Qo.transition;Qo.transition=1;try{r(t)}finally{Qo.transition=e}}),[t]),n},useTransition:function(){var t=ca(sa)[0];return[ya().current,t]},useMutableSource:ha,useOpaqueIdentifier:function(){return ca(sa)[0]},unstable_isNewReconciler:!1},ka=_.ReactCurrentOwner,ja=!1;function La(t,e,n,r){e.child=null===t?Oo(e,null,n,r):Eo(e,t.child,n,r)}function Na(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=ia(t,e,n,r,o,i),null===t||ja?(e.flags|=1,La(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ns(t,e,i))}function Da(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Gu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=qu(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Fa(t,e,a,r,i,o))}return a=t.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:cr)(i,r)&&t.ref===e.ref)?ns(t,e,o):(e.flags|=1,(t=Vu(a,r)).ref=e.ref,t.return=e,e.child=t)}function Fa(t,e,n,r,i,o){if(null!==t&&cr(t.memoizedProps,r)&&t.ref===e.ref){if(ja=!1,0===(o&i))return e.lanes=t.lanes,ns(t,e,o);0!==(16384&t.flags)&&(ja=!0)}return Ua(t,e,n,r,o)}function Ba(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},Au(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Au(e,t),null;e.memoizedState={baseLanes:0},Au(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Au(e,r);return La(t,e,i,n),e.child}function za(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Ua(t,e,n,r,i){var o=di(n)?hi:li.current;return o=pi(e,o),no(e,i),n=ia(t,e,n,r,o,i),null===t||ja?(e.flags|=1,La(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ns(t,e,i))}function Ga(t,e,n,r,i){if(di(n)){var o=!0;mi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),vo(e,n,r),Ao(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=pi(e,c=di(n)?hi:li.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&mo(e,a,r,c),io=!1;var h=e.memoizedState;a.state=h,lo(e,r,a,i),u=e.memoizedState,s!==r||h!==u||fi.current||io?("function"===typeof l&&(po(e,n,l,r),u=e.memoizedState),(s=io||yo(e,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,ao(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Yi(e.type,s),a.props=c,f=e.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ro(u):u=pi(e,u=di(n)?hi:li.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||h!==u)&&mo(e,a,r,u),io=!1,h=e.memoizedState,a.state=h,lo(e,r,a,i);var d=e.memoizedState;s!==f||h!==d||fi.current||io?("function"===typeof p&&(po(e,n,p,r),d=e.memoizedState),(c=io||yo(e,n,c,r,h,d,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),r=!1)}return Va(t,e,n,r,o,i)}function Va(t,e,n,r,i,o){za(t,e);var a=0!==(64&e.flags);if(!r&&!a)return i&&Ai(e,n,!1),ns(t,e,o);r=e.stateNode,ka.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Eo(e,t.child,null,o),e.child=Eo(e,null,s,o)):La(t,e,s,o),e.memoizedState=r.state,i&&Ai(e,n,!0),e.child}function qa(t){var e=t.stateNode;e.pendingContext?yi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&yi(0,e.context,!1),Io(t,e.containerInfo)}var Ha,Wa,Xa,Ya={dehydrated:null,retryLane:0};function Qa(t,e,n){var r,i=e.pendingProps,o=Lo.current,a=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ui(Lo,1&o),null===t?(void 0!==i.fallback&&Go(e),t=i.children,o=i.fallback,a?(t=Za(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ya,t):"number"===typeof i.unstable_expectedLoadTime?(t=Za(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ya,e.lanes=33554432,t):((n=Wu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=Ja(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Ya,i):(n=Ka(t,e,i.children,n),e.memoizedState=null,n))}function Za(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Wu(e,i,0,null),n=Hu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Ka(t,e,n,r){var i=t.child;return t=i.sibling,n=Vu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Ja(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Vu(a,s),null!==t?r=Vu(t,r):(r=Hu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function $a(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),eo(t.return,e)}function ts(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function es(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(La(t,e,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&$a(t,n);else if(19===t.tag)$a(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ui(Lo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===No(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ts(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===No(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ts(e,!0,n,null,o,e.lastEffect);break;case"together":ts(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ns(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fs|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Vu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Vu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function rs(t,e){if(!Bo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function is(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return di(e.type)&&gi(),null;case 3:return Ro(),si(fi),si(li),Xo(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(qo(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:jo(e);var o=Co(Mo.current);if(n=e.type,null!==t&&null!=e.stateNode)Wa(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Co(To.current),qo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qr]=e,r[Zr]=s,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(t=0;t<xr.length;t++)Tr(xr[t],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":tt(r,s),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tr("invalid",r);break;case"textarea":ut(r,s),Tr("invalid",r)}for(var c in Et(n,s),t=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Tr("scroll",r));switch(n){case"input":Z(r),rt(r,s,!0);break;case"textarea":Z(r),lt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Dr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ft&&(t=pt(n)),t===ft?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Qr]=e,t[Zr]=r,Ha(t,e),e.stateNode=t,c=Ot(n,r),n){case"dialog":Tr("cancel",t),Tr("close",t),o=r;break;case"iframe":case"object":case"embed":Tr("load",t),o=r;break;case"video":case"audio":for(o=0;o<xr.length;o++)Tr(xr[o],t);o=r;break;case"source":Tr("error",t),o=r;break;case"img":case"image":case"link":Tr("error",t),Tr("load",t),o=r;break;case"details":Tr("toggle",t),o=r;break;case"input":tt(t,r),o=$(t,r),Tr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Tr("invalid",t);break;case"textarea":ut(t,r),o=st(t,r),Tr("invalid",t);break;default:o=r}Et(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?wt(t,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&vt(t,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&mt(t,f):"number"===typeof f&&mt(t,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Tr("scroll",t):null!=f&&b(t,s,f,c))}switch(n){case"input":Z(t),rt(t,r,!1);break;case"textarea":Z(t),lt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Y(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Dr)}zr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Xa(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Co(Mo.current),Co(To.current),qo(e)?(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=e,e.stateNode=r)}return null;case 13:return si(Lo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&qo(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Cs||0===(134217727&Fs)&&0===(134217727&Bs)||gu(Cs,Rs))),(r||n)&&(e.flags|=4),null);case 4:return Ro(),null===t&&Mr(e.stateNode.containerInfo),null;case 10:return to(e),null;case 17:return di(e.type)&&gi(),null;case 19:if(si(Lo),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(c=r.rendering))if(s)rs(r,!1);else{if(0!==Ls||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=No(t))){for(e.flags|=64,rs(r,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,t=c.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ui(Lo,1&Lo.current|2),e.child}t=t.sibling}null!==r.tail&&zi()>Vs&&(e.flags|=64,s=!0,rs(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=No(c))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Bo)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Vs&&1073741824!==n&&(e.flags|=64,s=!0,rs(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=r.last)?n.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=zi(),n.sibling=null,e=Lo.current,ui(Lo,s?1&e|2:1&e),n):null;case 23:case 24:return bu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function os(t){switch(t.tag){case 1:di(t.type)&&gi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Ro(),si(fi),si(li),Xo(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return jo(t),null;case 13:return si(Lo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return si(Lo),null;case 4:return Ro(),null;case 10:return to(t),null;case 23:case 24:return bu(),null;default:return null}}function as(t,e){try{var n="",r=e;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function ss(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Ha=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Co(To.current);var a,s=null;switch(n){case"input":o=$(t,o),r=$(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Dr)}for(f in Et(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var c=o[f];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Tr("scroll",t),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}},Xa=function(t,e,n,r){n!==r&&(e.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function cs(t,e,n){(n=so(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xs||(Xs=!0,Ys=r),ss(0,e)},n}function ls(t,e,n){(n=so(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ss(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),ss(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var fs="function"===typeof WeakSet?WeakSet:Set;function hs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Du(t,n)}else e.current=null}function ps(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Yi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&qr(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ds(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(ju(n,t),ku(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Yi(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&fo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}fo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&zr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function gs(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_t("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ys(t,e){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(bi,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))ju(e,n);else{r=e;try{i()}catch(o){Du(r,o)}}n=n.next}while(n!==t)}break;case 1:if(hs(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Du(e,o)}break;case 5:hs(e);break;case 4:ws(t,e)}}function vs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ms(t){return 5===t.tag||3===t.tag||4===t.tag}function As(t){t:{for(var e=t.return;null!==e;){if(ms(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(mt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ms(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?bs(t,n,e):_s(t,n,e)}function bs(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Dr));else if(4!==r&&null!==(t=t.child))for(bs(t,e,n),t=t.sibling;null!==t;)bs(t,e,n),t=t.sibling}function _s(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(_s(t,e,n),t=t.sibling;null!==t;)_s(t,e,n),t=t.sibling}function ws(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,c=u;;)if(ys(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ys(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function xs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Zr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),Ot(t,i),e=Ot(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?wt(n,u):"dangerouslySetInnerHTML"===s?vt(n,u):"children"===s?mt(n,u):b(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":ct(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Gs=zi(),gs(e.child,!0)),void Es(e);case 19:return void Es(e);case 17:return;case 23:case 24:return void gs(e,null!==e.memoizedState)}throw Error(a(163))}function Es(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new fs),e.forEach((function(e){var r=Bu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Os(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ss=Math.ceil,Ts=_.ReactCurrentDispatcher,Ps=_.ReactCurrentOwner,Ms=0,Cs=null,Is=null,Rs=0,ks=0,js=ai(0),Ls=0,Ns=null,Ds=0,Fs=0,Bs=0,zs=0,Us=null,Gs=0,Vs=1/0;function qs(){Vs=zi()+500}var Hs,Ws=null,Xs=!1,Ys=null,Qs=null,Zs=!1,Ks=null,Js=90,$s=[],tu=[],eu=null,nu=0,ru=null,iu=-1,ou=0,au=0,su=null,uu=!1;function cu(){return 0!==(48&Ms)?zi():-1!==iu?iu:iu=zi()}function lu(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Ui()?1:2;if(0===ou&&(ou=Ds),0!==Xi.transition){0!==au&&(au=null!==Us?Us.pendingLanes:0),t=ou;var e=4186112&~au;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Ui(),0!==(4&Ms)&&98===t?t=ze(12,ou):t=ze(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ou),t}function fu(t,e,n){if(50<nu)throw nu=0,ru=null,Error(a(185));if(null===(t=hu(t,e)))return null;Ve(t,e,n),t===Cs&&(Bs|=e,4===Ls&&gu(t,Rs));var r=Ui();1===e?0!==(8&Ms)&&0===(48&Ms)?yu(t):(pu(t,n),0===Ms&&(qs(),Hi())):(0===(4&Ms)||98!==r&&99!==r||(null===eu?eu=new Set([t]):eu.add(t)),pu(t,n)),Us=t}function hu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function pu(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-qe(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=e,De(c);var f=Ne;o[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);s&=~c}if(r=Fe(t,t===Cs?Rs:0),e=Ne,0===r)null!==n&&(n!==ji&&Ei(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==ji&&Ei(n)}15===e?(n=yu.bind(null,t),null===Ni?(Ni=[n],Di=xi(Mi,Wi)):Ni.push(n),n=ji):14===e?n=qi(99,yu.bind(null,t)):n=qi(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),du.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function du(t){if(iu=-1,au=ou=0,0!==(48&Ms))throw Error(a(327));var e=t.callbackNode;if(Ru()&&t.callbackNode!==e)return null;var n=Fe(t,t===Cs?Rs:0);if(0===n)return null;var r=n,i=Ms;Ms|=16;var o=xu();for(Cs===t&&Rs===r||(qs(),_u(t,r));;)try{Su();break}catch(u){wu(t,u)}if($i(),Ts.current=o,Ms=i,null!==Is?r=0:(Cs=null,Rs=0,r=Ls),0!==(Ds&Bs))_u(t,0);else if(0!==r){if(2===r&&(Ms|=64,t.hydrate&&(t.hydrate=!1,qr(t.containerInfo)),0!==(n=Be(t))&&(r=Eu(t,n))),1===r)throw e=Ns,_u(t,0),gu(t,n),pu(t,zi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Mu(t);break;case 3:if(gu(t,n),(62914560&n)===n&&10<(r=Gs+500-zi())){if(0!==Fe(t,0))break;if(((i=t.suspendedLanes)&n)!==n){cu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gr(Mu.bind(null,t),r);break}Mu(t);break;case 4:if(gu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-qe(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ss(n/1960))-n)){t.timeoutHandle=Gr(Mu.bind(null,t),n);break}Mu(t);break;case 5:Mu(t);break;default:throw Error(a(329))}}return pu(t,zi()),t.callbackNode===e?du.bind(null,t):null}function gu(t,e){for(e&=~zs,e&=~Bs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qe(e),r=1<<n;t[n]=-1,e&=~r}}function yu(t){if(0!==(48&Ms))throw Error(a(327));if(Ru(),t===Cs&&0!==(t.expiredLanes&Rs)){var e=Rs,n=Eu(t,e);0!==(Ds&Bs)&&(n=Eu(t,e=Fe(t,e)))}else n=Eu(t,e=Fe(t,0));if(0!==t.tag&&2===n&&(Ms|=64,t.hydrate&&(t.hydrate=!1,qr(t.containerInfo)),0!==(e=Be(t))&&(n=Eu(t,e))),1===n)throw n=Ns,_u(t,0),gu(t,e),pu(t,zi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mu(t),pu(t,zi()),null}function vu(t,e){var n=Ms;Ms|=1;try{return t(e)}finally{0===(Ms=n)&&(qs(),Hi())}}function mu(t,e){var n=Ms;Ms&=-2,Ms|=8;try{return t(e)}finally{0===(Ms=n)&&(qs(),Hi())}}function Au(t,e){ui(js,ks),ks|=e,Ds|=e}function bu(){ks=js.current,si(js)}function _u(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Vr(n)),null!==Is)for(n=Is.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ro(),si(fi),si(li),Xo();break;case 5:jo(r);break;case 4:Ro();break;case 13:case 19:si(Lo);break;case 10:to(r);break;case 23:case 24:bu()}n=n.return}Cs=t,Is=Vu(t.current,null),Rs=ks=Ds=e,Ls=0,Ns=null,zs=Bs=Fs=0}function wu(t,e){for(;;){var n=Is;try{if($i(),Yo.current=Ma,ta){for(var r=Ko.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ta=!1}if(Zo=0,$o=Jo=Ko=null,ea=!1,Ps.current=null,null===n||null===n.return){Ls=1,Ns=e,Is=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Rs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Lo.current),h=a;do{var p;if(p=13===h.tag){var d=h.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var g=h.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!f)}}if(p){var y=h.updateQueue;if(null===y){var v=new Set;v.add(c),h.updateQueue=v}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=so(-1,1);m.tag=2,uo(s,m)}s.lanes|=1;break t}u=void 0,s=e;var A=o.pingCache;if(null===A?(A=o.pingCache=new us,u=new Set,A.set(c,u)):void 0===(u=A.get(c))&&(u=new Set,A.set(c,u)),!u.has(s)){u.add(s);var b=Fu.bind(null,o,c,s);c.then(b,b)}h.flags|=4096,h.lanes=e;break t}h=h.return}while(null!==h);u=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),u=as(u,s),h=a;do{switch(h.tag){case 3:o=u,h.flags|=4096,e&=-e,h.lanes|=e,co(h,cs(0,o,e));break t;case 1:o=u;var _=h.type,w=h.stateNode;if(0===(64&h.flags)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Qs||!Qs.has(w)))){h.flags|=4096,e&=-e,h.lanes|=e,co(h,ls(h,o,e));break t}}h=h.return}while(null!==h)}Pu(n)}catch(x){e=x,Is===n&&null!==n&&(Is=n=n.return);continue}break}}function xu(){var t=Ts.current;return Ts.current=Ma,null===t?Ma:t}function Eu(t,e){var n=Ms;Ms|=16;var r=xu();for(Cs===t&&Rs===e||_u(t,e);;)try{Ou();break}catch(i){wu(t,i)}if($i(),Ms=n,Ts.current=r,null!==Is)throw Error(a(261));return Cs=null,Rs=0,Ls}function Ou(){for(;null!==Is;)Tu(Is)}function Su(){for(;null!==Is&&!Oi();)Tu(Is)}function Tu(t){var e=Hs(t.alternate,t,ks);t.memoizedProps=t.pendingProps,null===e?Pu(t):Is=e,Ps.current=null}function Pu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=is(n,e,ks)))return void(Is=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&ks)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=os(e)))return n.flags&=2047,void(Is=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Is=e);Is=e=t}while(null!==e);0===Ls&&(Ls=5)}function Mu(t){var e=Ui();return Vi(99,Cu.bind(null,t,e)),null}function Cu(t,e){do{Ru()}while(null!==Ks);if(0!==(48&Ms))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var c=31-qe(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==eu&&0===(24&r)&&eu.has(t)&&eu.delete(t),t===Cs&&(Is=Cs=null,Rs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ms,Ms|=32,Ps.current=null,Fr=Qe,dr(s=pr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(S){u=null;break t}var f=0,h=-1,p=-1,d=0,g=0,y=s,v=null;e:for(;;){for(var m;y!==u||0!==o&&3!==y.nodeType||(h=f+o),y!==c||0!==l&&3!==y.nodeType||(p=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(m=y.firstChild);)v=y,y=m;for(;;){if(y===s)break e;if(v===u&&++d===o&&(h=f),v===c&&++g===l&&(p=f),null!==(m=y.nextSibling))break;v=(y=v).parentNode}y=m}u=-1===h||-1===p?null:{start:h,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Qe=!1,su=null,uu=!1,Ws=r;do{try{Iu()}catch(S){if(null===Ws)throw Error(a(330));Du(Ws,S),Ws=Ws.nextEffect}}while(null!==Ws);su=null,Ws=r;do{try{for(s=t;null!==Ws;){var A=Ws.flags;if(16&A&&mt(Ws.stateNode,""),128&A){var b=Ws.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&A){case 2:As(Ws),Ws.flags&=-3;break;case 6:As(Ws),Ws.flags&=-3,xs(Ws.alternate,Ws);break;case 1024:Ws.flags&=-1025;break;case 1028:Ws.flags&=-1025,xs(Ws.alternate,Ws);break;case 4:xs(Ws.alternate,Ws);break;case 8:ws(s,u=Ws);var w=u.alternate;vs(u),null!==w&&vs(w)}Ws=Ws.nextEffect}}catch(S){if(null===Ws)throw Error(a(330));Du(Ws,S),Ws=Ws.nextEffect}}while(null!==Ws);if(_=Br,b=pr(),A=_.focusedElem,s=_.selectionRange,b!==A&&A&&A.ownerDocument&&hr(A.ownerDocument.documentElement,A)){null!==s&&dr(A)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in A?(A.selectionStart=b,A.selectionEnd=Math.min(_,A.value.length)):(_=(b=A.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),u=A.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!_.extend&&w>s&&(u=s,s=w,w=u),u=fr(A,w),o=fr(A,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),w>s?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=A;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof A.focus&&A.focus(),A=0;A<b.length;A++)(_=b[A]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qe=!!Fr,Br=Fr=null,t.current=n,Ws=r;do{try{for(A=t;null!==Ws;){var x=Ws.flags;if(36&x&&ds(A,Ws.alternate,Ws),128&x){b=void 0;var E=Ws.ref;if(null!==E){var O=Ws.stateNode;switch(Ws.tag){case 5:b=O;break;default:b=O}"function"===typeof E?E(b):E.current=b}}Ws=Ws.nextEffect}}catch(S){if(null===Ws)throw Error(a(330));Du(Ws,S),Ws=Ws.nextEffect}}while(null!==Ws);Ws=null,Li(),Ms=i}else t.current=n;if(Zs)Zs=!1,Ks=t,Js=e;else for(Ws=r;null!==Ws;)e=Ws.nextEffect,Ws.nextEffect=null,8&Ws.flags&&((x=Ws).sibling=null,x.stateNode=null),Ws=e;if(0===(r=t.pendingLanes)&&(Qs=null),1===r?t===ru?nu++:(nu=0,ru=t):nu=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(bi,n,void 0,64===(64&n.current.flags))}catch(S){}if(pu(t,zi()),Xs)throw Xs=!1,t=Ys,Ys=null,t;return 0!==(8&Ms)||Hi(),null}function Iu(){for(;null!==Ws;){var t=Ws.alternate;uu||null===su||(0!==(8&Ws.flags)?te(Ws,su)&&(uu=!0):13===Ws.tag&&Os(t,Ws)&&te(Ws,su)&&(uu=!0));var e=Ws.flags;0!==(256&e)&&ps(t,Ws),0===(512&e)||Zs||(Zs=!0,qi(97,(function(){return Ru(),null}))),Ws=Ws.nextEffect}}function Ru(){if(90!==Js){var t=97<Js?97:Js;return Js=90,Vi(t,Lu)}return!1}function ku(t,e){$s.push(e,t),Zs||(Zs=!0,qi(97,(function(){return Ru(),null})))}function ju(t,e){tu.push(e,t),Zs||(Zs=!0,qi(97,(function(){return Ru(),null})))}function Lu(){if(null===Ks)return!1;var t=Ks;if(Ks=null,0!==(48&Ms))throw Error(a(331));var e=Ms;Ms|=32;var n=tu;tu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));Du(o,c)}}for(n=$s,$s=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));Du(o,c)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Ms=e,Hi(),!0}function Nu(t,e,n){uo(t,e=cs(0,e=as(n,e),1)),e=cu(),null!==(t=hu(t,1))&&(Ve(t,1,e),pu(t,e))}function Du(t,e){if(3===t.tag)Nu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Nu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var i=ls(n,t=as(e,t),1);if(uo(n,i),i=cu(),null!==(n=hu(n,1)))Ve(n,1,i),pu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Fu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=cu(),t.pingedLanes|=t.suspendedLanes&n,Cs===t&&(Rs&n)===n&&(4===Ls||3===Ls&&(62914560&Rs)===Rs&&500>zi()-Gs?_u(t,0):zs|=n),pu(t,e)}function Bu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Ui()?1:2:(0===ou&&(ou=Ds),0===(e=Ue(62914560&~ou))&&(e=4194304))),n=cu(),null!==(t=hu(t,e))&&(Ve(t,e,n),pu(t,n))}function zu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Uu(t,e,n,r){return new zu(t,e,n,r)}function Gu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Vu(t,e){var n=t.alternate;return null===n?((n=Uu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qu(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Gu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case E:return Hu(n.children,i,o,e);case N:s=8,i|=16;break;case O:s=8,i|=1;break;case S:return(t=Uu(12,n,e,8|i)).elementType=S,t.type=S,t.lanes=o,t;case C:return(t=Uu(13,n,e,i)).type=C,t.elementType=C,t.lanes=o,t;case I:return(t=Uu(19,n,e,i)).elementType=I,t.lanes=o,t;case D:return Wu(n,i,o,e);case F:return(t=Uu(24,n,e,i)).elementType=F,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case P:s=9;break t;case M:s=11;break t;case R:s=14;break t;case k:s=16,r=null;break t;case j:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Uu(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Hu(t,e,n,r){return(t=Uu(7,t,r,e)).lanes=n,t}function Wu(t,e,n,r){return(t=Uu(23,t,r,e)).elementType=D,t.lanes=n,t}function Xu(t,e,n){return(t=Uu(6,t,null,e)).lanes=n,t}function Yu(t,e,n){return(e=Uu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ge(0),this.expirationTimes=Ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ge(0),this.mutableSourceEagerHydrationData=null}function Zu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Ku(t,e,n,r){var i=e.current,o=cu(),s=lu(i);t:if(n){e:{if(Zt(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(di(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(di(c)){n=vi(n,c,u);break t}}n=u}else n=ci;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),fu(i,s,o),s}function Ju(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function $u(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function tc(t,e){$u(t,e),(t=t.alternate)&&$u(t,e)}function ec(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Qu(t,e,null!=n&&!0===n.hydrate),e=Uu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,oo(e),t[Kr]=n.current,Mr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function nc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function rc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Ju(a);s.call(t)}}Ku(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ec(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Ju(a);u.call(t)}}mu((function(){Ku(e,a,t,i)}))}return Ju(a)}function ic(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(e))throw Error(a(200));return Zu(t,e,null,n)}Hs=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||fi.current)ja=!0;else{if(0===(n&r)){switch(ja=!1,e.tag){case 3:qa(e),Ho();break;case 5:ko(e);break;case 1:di(e.type)&&mi(e);break;case 4:Io(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;ui(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Qa(t,e,n):(ui(Lo,1&Lo.current),null!==(e=ns(t,e,n))?e.sibling:null);ui(Lo,1&Lo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return es(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Lo,Lo.current),r)break;return null;case 23:case 24:return e.lanes=0,Ba(t,e,n)}return ns(t,e,n)}ja=0!==(16384&t.flags)}else ja=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=pi(e,li.current),no(e,n),i=ia(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,di(r)){var o=!0;mi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&po(e,r,s,t),i.updater=go,e.stateNode=i,i._reactInternals=e,Ao(e,r,t,n),e=Va(null,e,r,!0,o,n)}else e.tag=0,La(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Gu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===R)return 14}return 2}(i),t=Yi(i,t),o){case 0:e=Ua(null,e,i,t,n);break t;case 1:e=Ga(null,e,i,t,n);break t;case 11:e=Na(null,e,i,t,n);break t;case 14:e=Da(null,e,i,Yi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ua(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ga(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 3:if(qa(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Ho(),e=ns(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(Fo=Hr(e.stateNode.containerInfo.firstChild),Do=e,o=Bo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Wo.push(o);for(n=Oo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else La(t,e,r,n),Ho();e=e.child}return e;case 5:return ko(e),null===t&&Go(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,Ur(r,i)?s=null:null!==o&&Ur(r,o)&&(e.flags|=16),za(t,e),La(t,e,s,n),e.child;case 6:return null===t&&Go(e),null;case 13:return Qa(t,e,n);case 4:return Io(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Eo(e,null,r,n):La(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Na(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 7:return La(t,e,e.pendingProps,n),e.child;case 8:case 12:return La(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ui(Qi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=sr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!fi.current){e=ns(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(-1,n&-n)).tag=2,uo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),eo(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}La(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.flags|=1,La(t,e,r,n),e.child;case 14:return o=Yi(i=e.type,e.pendingProps),Da(t,e,i,o=Yi(i.type,o),r,n);case 15:return Fa(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,di(r)?(t=!0,mi(e)):t=!1,no(e,n),vo(e,r,i),Ao(e,r,i,n),Va(null,e,r,!0,t,n);case 19:return es(t,e,n);case 23:case 24:return Ba(t,e,n)}throw Error(a(156,e.tag))},ec.prototype.render=function(t){Ku(t,this._internalRoot,null,null)},ec.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Ku(null,t,null,(function(){e[Kr]=null}))},ee=function(t){13===t.tag&&(fu(t,4,cu()),tc(t,4))},ne=function(t){13===t.tag&&(fu(t,67108864,cu()),tc(t,67108864))},re=function(t){if(13===t.tag){var e=cu(),n=lu(t);fu(t,n,e),tc(t,n)}},ie=function(t,e){return e()},Tt=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ni(r);if(!i)throw Error(a(90));K(r),nt(r,i)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},kt=vu,jt=function(t,e,n,r,i){var o=Ms;Ms|=4;try{return Vi(98,t.bind(null,e,n,r,i))}finally{0===(Ms=o)&&(qs(),Hi())}},Lt=function(){0===(49&Ms)&&(function(){if(null!==eu){var t=eu;eu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,pu(t,zi())}))}Hi()}(),Ru())},Nt=function(t,e){var n=Ms;Ms|=2;try{return t(e)}finally{0===(Ms=n)&&(qs(),Hi())}};var oc={Events:[ti,ei,ni,It,Rt,Ru,{current:!1}]},ac={findFiberByHostInstance:$r,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},sc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=$t(t))?null:t.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{bi=uc.inject(sc),_i=uc}catch(yt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,e.createPortal=ic,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=$t(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ms;if(0!==(48&n))return t(e);Ms|=1;try{if(t)return Vi(99,t.bind(null,e))}finally{Ms=n,Hi()}},e.hydrate=function(t,e,n){if(!nc(e))throw Error(a(200));return rc(null,t,e,!0,n)},e.render=function(t,e,n){if(!nc(e))throw Error(a(200));return rc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!nc(t))throw Error(a(40));return!!t._reactRootContainer&&(mu((function(){rc(null,null,t,!1,(function(){t._reactRootContainer=null,t[Kr]=null}))})),!0)},e.unstable_batchedUpdates=vu,e.unstable_createPortal=function(t,e){return ic(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nc(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return rc(t,e,n,!1,r)},e.version="17.0.1"},function(t,e,n){"use strict";t.exports=n(420)},function(t,e,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,h=function t(){if(null!==l)try{var n=e.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(t,0),r}};r=function(t){null!==l?setTimeout(r,0,t):(l=t,setTimeout(h,0))},i=function(t,e){f=setTimeout(t,e)},o=function(){clearTimeout(f)},e.unstable_shouldYield=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,v=null,m=-1,A=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();b=t+A;try{v(!0,t)?w.postMessage(null):(y=!1,v=null)}catch(n){throw w.postMessage(null),n}}else y=!1},r=function(t){v=t,y||(y=!0,w.postMessage(null))},i=function(t,n){m=p((function(){t(e.unstable_now())}),n)},o=function(){d(m),m=-1}}function x(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<S(i,e)))break t;t[r]=e,t[n]=i,n=r}}function E(t){return void 0===(t=t[0])?null:t}function O(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>S(a,n))void 0!==u&&0>S(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function S(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var T=[],P=[],M=1,C=null,I=3,R=!1,k=!1,j=!1;function L(t){for(var e=E(P);null!==e;){if(null===e.callback)O(P);else{if(!(e.startTime<=t))break;O(P),e.sortIndex=e.expirationTime,x(T,e)}e=E(P)}}function N(t){if(j=!1,L(t),!k)if(null!==E(T))k=!0,r(D);else{var e=E(P);null!==e&&i(N,e.startTime-t)}}function D(t,n){k=!1,j&&(j=!1,o()),R=!0;var r=I;try{for(L(n),C=E(T);null!==C&&(!(C.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=C.callback;if("function"===typeof a){C.callback=null,I=C.priorityLevel;var s=a(C.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?C.callback=s:C===E(T)&&O(T),L(n)}else O(T);C=E(T)}if(null!==C)var u=!0;else{var c=E(P);null!==c&&i(N,c.startTime-n),u=!1}return u}finally{C=null,I=r,R=!1}}var F=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){k||R||(k=!0,r(D))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return E(T)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:M++,callback:n,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,x(P,t),null===E(T)&&t===E(P)&&(j?o():j=!0,i(N,a-s))):(t.sortIndex=u,x(T,t),k||R||(k=!0,r(D))),t},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}}},,function(t,e,n){"use strict";var r=n(423);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&O(r),i&&S(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var i,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&O(a),t){case"Point":i=r(e).geometry;break;case"LineString":i=s(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=f(e).geometry;break;case"MultiLineString":i=l(e).geometry;break;case"MultiPolygon":i=h(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(i.bbox=a),i}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!x(t[0])||!x(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return r(t,e)})),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!x(o[0][0])||!x(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return o(t,e)})),n)}function s(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!x(t[0][1])||!x(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return s(t,e)})),n)}function c(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&O(n),r&&S(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Do[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Do[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function v(t,e){return A(y(t,e))}function m(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function A(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function _(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(y(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Bo[e||"meters"];if(!r)throw new Error("invalid original units");var i=Bo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function x(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function E(t){return!!t&&t.constructor===Object}function O(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!x(t))throw new Error("bbox must only contain numbers")}))}function S(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function T(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,f=0,h=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,v=0;v<y;v++){s=(l=!!(c=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<s;m++){var A=0,b=0;if(null!==(a=l?c.geometries[m]:c)){u=a.coordinates;var _=a.type;switch(f=!n||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":e(u,h,v,A,b),h++,A++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],h,v,A,b),h++,"MultiPoint"===_&&A++;"LineString"===_&&A++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++)e(u[r][i],h,v,A,b),h++;"MultiLineString"===_&&A++,"Polygon"===_&&b++}"Polygon"===_&&A++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===_&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++)e(u[r][i][o],h,v,A,b),h++;b++}A++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)T(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function P(t,e,n,r){var i=n;return T(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function M(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function C(t,e,n){var r=n;return M(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function I(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function R(t,e,n){var r=n;return I(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function k(t){var e=[];return T(t,(function(t){e.push(t)})),e}function j(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,h,c,l,f);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],h,c,l,f);break;default:throw new Error("Unknown Geometry Type")}else e(null,h,c,l,f);h++}}function L(t,e,n){var r=n;return j(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function N(t,n){j(t,(function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:a}),r,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){n(e({type:s,coordinates:t},i),r,o)}))}))}function D(t,e,n){var r=n;return N(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function F(t,e){N(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&P(t,(function(o,a,u,c,l,f){var h=s([o,a],t.properties);return e(h,n,r,f,i),i++,a}))}}))}function B(t,e,n){var r=n,i=!1;return F(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}function z(t,e){if(!t)throw new Error("geojson is required");N(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),n,r,a)}}}))}function U(t,e,n){var r=n;return z(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function G(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function V(t){if(!t)throw new Error("obj is required");var e=q(t);if(e.length>1&&x(e[0])&&x(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function q(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return H(e),e;throw new Error("No valid coordinates")}function H(t){if(t.length>1&&x(t[0])&&x(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return H(t[0]);throw new Error("coordinates must only contain numbers")}function W(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function X(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Y(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function Q(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function K(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function J(t,e,n){n=n||{};for(var r=Object.keys(Vo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=void 0!==a&&null!==a?a:Vo[o],qo[o]=a}qo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach((function(r,i){r.forEach((function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var a=function(t,e,n){var r,i,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],f=(t[e][n],t[e][n]),h=f.cval,p=nt(f,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h]);s.push([n+p[0],e+p[1]]),p=nt(f,o=l[h]),s.push([n+p[0],e+p[1]]),et(f);for(var d=n+u[h],g=e+c[h],y=h;d>=0&&g>=0&&g<a&&(d!=n||g!=e)&&void 0!==(f=t[g][d]);){if(0===(h=f.cval)||15===h)return{path:s,info:"mergeable"};o=l[h],r=u[h],i=c[h],5!==h&&10!==h||(5===h?f.flipped?-1===c[y]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[y]&&(o="bottom",r=0,i=-1):10===h&&(f.flipped?-1===u[y]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===c[y]&&(o="left",r=-1,i=0))),p=nt(f,o),s.push([d+p[0],g+p[1]]),et(f),d+=r,g+=i,y=h}return{path:s,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],l=n-1;l>=0;l--)if(Math.abs(e[l][0][0]-u)<=1e-7&&Math.abs(e[l][0][1]-c)<=1e-7){for(var f=a.path.length-2;f>=0;--f)e[l].unshift(a.path[f]);s=!0;break}s||(e[n++]=a.path)}}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],c=t[o+1][a+1],l=t[o][a+1],f=t[o][a];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(f))){s|=u>=e?8:0,s|=c>=e?4:0,s|=l>=e?2:0;var h,p,d,g,y=!1;if(5===(s|=f>=e?1:0)||10===s){var v=(u+c+l+f)/4;5===s&&v<e?(s=10,y=!0):10===s&&v<e&&(s=5,y=!0)}0!==s&&15!==s&&(h=p=d=g=.5,1===s?(d=1-$(e,u,f),p=1-$(e,l,f)):2===s?(p=$(e,f,l),g=1-$(e,c,l)):3===s?(d=1-$(e,u,f),g=1-$(e,c,l)):4===s?(h=$(e,u,c),g=$(e,l,c)):5===s?(h=$(e,u,c),g=$(e,l,c),p=1-$(e,l,f),d=1-$(e,u,f)):6===s?(p=$(e,f,l),h=$(e,u,c)):7===s?(d=1-$(e,u,f),h=$(e,u,c)):8===s?(d=$(e,f,u),h=1-$(e,c,u)):9===s?(p=1-$(e,l,f),h=1-$(e,c,u)):10===s?(h=1-$(e,c,u),g=1-$(e,c,l),p=$(e,f,l),d=$(e,f,u)):11===s?(h=1-$(e,c,u),g=1-$(e,c,l)):12===s?(d=$(e,f,u),g=$(e,l,c)):13===s?(p=1-$(e,l,f),g=$(e,l,c)):14===s?(d=$(e,f,u),p=$(e,f,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:y,top:h,right:g,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof qo.successCallback&&qo.successCallback(s),s}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Y(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return I(t,(function(t){var e=q(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return q(t)[0]-q(e)[0]}))})).sort((function(t,n){return e?q(t[0])[1]-q(n[0])[1]:q(n[0])[1]-q(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var f=u[l];f.properties[n]?c.push(f.properties[n]):c.push(0),!0===i&&(f.properties.matrixPosition=[s,l])}a.push(c)}return a}function it(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||function(t,e){return t<e?-1:t>e?1:0};r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);it(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],f=n,h=r;for(ot(t,n,e),i(t[r],l)>0&&ot(t,n,r);f<h;){for(ot(t,f,h),f++,h--;i(t[f],l)<0;)f++;for(;i(t[h],l)>0;)h--}0===i(t[n],l)?ot(t,n,h):ot(t,++h,r),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function at(t,e){if(!(this instanceof at))return new at(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function st(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,n,r,i){i||(i=yt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],ct(i,t.leaf?r(o):o);return i}function ct(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function lt(t,e){return t.minX-e.minX}function ft(t,e){return t.minY-e.minY}function ht(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function pt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function gt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function yt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Ho(t,o,e,n,i),a.push(e,o,o,n))}function mt(t,e){return t(e={exports:{}},e.exports),e.exports}function At(t,e){if(!(this instanceof At))return new At(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function bt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)ia(t[o],s)||u.push(t[o]);var c=ta(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=Wo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=Ot(u,r),a.push(r)}var c=Wo(16);for(s=0;s<a.length;s++)c.insert(Et(a[s]));for(var l=e*e,f=n*n;a.length;){var h=a.shift(),p=h.p,d=h.next.p,g=St(p,d);if(!(g<f)){var y=g/l;(u=function(t,e,n,r,i,o,a){for(var s=new na(null,_t),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],f=u.leaf?Tt(l,n,r):function(t,e,n){if(wt(t,n)||wt(e,n))return 0;var r=Pt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Pt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Pt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Pt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,l);f>o||s.push({node:l,dist:f})}for(;s.length&&!s.peek().node.children;){var h=s.pop(),p=h.node,d=Tt(p,e,n),g=Tt(p,r,i);if(h.dist<d&&h.dist<g&&xt(n,p,a)&&xt(r,p,a))return p}(u=s.pop())&&(u=u.node)}return null}(o,h.prev.p,p,d,h.next.next.p,y,c))&&Math.min(St(u,p),St(u,d))<=y&&(a.push(h),a.push(Ot(u,h)),o.remove(u),c.remove(h),c.insert(Et(h)),c.insert(Et(h.next)))}}h=r;var v=[];do{v.push(h.p),h=h.next}while(h!==r);return v.push(h.p),v}function _t(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function xt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&oa(t,e,n)>0!=oa(t,e,r)>0&&oa(n,r,t)>0!=oa(n,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function Et(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Ot(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function St(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Tt(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function Pt(t,e,n,r,i,o,a,s){var u,c,l,f,h=n-t,p=r-e,d=a-i,g=s-o,y=t-i,v=e-o,m=h*h+p*p,A=h*d+p*g,b=d*d+g*g,_=h*y+p*v,w=d*y+g*v,x=m*b-A*A,E=x,O=x;0===x?(c=0,E=1,f=w,O=b):(f=m*w-A*_,(c=A*w-b*_)<0?(c=0,f=w,O=b):c>E&&(c=E,f=w+A,O=b)),f<0?(f=0,-_<0?c=0:-_>m?c=E:(c=-_,E=m)):f>O&&(f=O,-_+A<0?c=0:-_+A>m?c=E:(c=-_+A,E=m));var S=(1-(l=0===f?0:f/O))*i+l*a-((1-(u=0===c?0:c/E))*t+u*n),T=(1-l)*o+l*s-((1-u)*e+u*r);return S*S+T*T}function Mt(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(T(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var i=aa(r,n);return i.length>3?o([i]):null}function Ct(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=V(t),o=q(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(It(i,o[u][0],r)){for(var l=!1,f=1;f<o[u].length&&!l;)It(i,o[u][f],!r)&&(l=!0),f++;l||(c=!0)}return c}function It(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}function Rt(t,e){var n=[];return j(e,(function(e){I(t,(function(t){Ct(t,e)&&n.push(t)}))})),c(n)}function kt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(function(t){if(t.length<3)return[];t.sort(Lt);for(var e,n,r,i,o,a,s=t.length-1,u=t[s].x,c=t[0].x,l=t[s].y,f=l;s--;)t[s].y<l&&(l=t[s].y),t[s].y>f&&(f=t[s].y);var h,p=c-u,d=f-l,g=p>d?p:d,y=.5*(c+u),v=.5*(f+l),m=[new jt({x:y-20*g,y:v-g,__sentinel:!0},{x:y,y:v+20*g,__sentinel:!0},{x:y+20*g,y:v-g,__sentinel:!0})],A=[],b=[];for(s=t.length;s--;){for(b.length=0,h=m.length;h--;)(p=t[s].x-m[h].x)>0&&p*p>m[h].r?(A.push(m[h]),m.splice(h,1)):p*p+(d=t[s].y-m[h].y)*d>m[h].r||(b.push(m[h].a,m[h].b,m[h].b,m[h].c,m[h].c,m[h].a),m.splice(h,1));for(Nt(b),h=b.length;h;)n=b[--h],e=b[--h],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&m.push(new jt(e,n,r))}for(Array.prototype.push.apply(A,m),s=A.length;s--;)(A[s].a.__sentinel||A[s].b.__sentinel||A[s].c.__sentinel)&&A.splice(s,1);return A}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],a)})))}function jt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+a*(t.y+e.y),l=s*(t.x+n.x)+u*(t.y+n.y),f=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*c-a*l)/f,this.y=(o*l-s*c)/f,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Lt(t,e){return e.x-t.x}function Nt(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function Dt(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.units,i=V(t),o=V(e),a=b(o[1]-i[1]),s=b(o[0]-i[0]),u=b(i[1]),c=b(o[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return g(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Bt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ut(t);default:throw new Error("unknown GeoJSON type")}}function Bt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=zt(t.properties),e.geometry=Ut(t.geometry),e}function zt(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map((function(t){return t})):e[n]=zt(r):e[n]=r})),e):e}function Ut(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ut(t)})),e):(e.coordinates=Gt(t.coordinates),e)}function Gt(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return Gt(t)}))}function Vt(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&la(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}function s(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(s)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:n,coordinates:e}}var u=ca(t.transform),c=t.arcs;return s(e)}function qt(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach((function(e){e.forEach((function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)}))})),a.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Vt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],s=[];return e.forEach(n),a.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),a.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:s.map((function(e){var n,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].length<2&&r.push(t)}))}))})),(n=(r=fa(t,r)).length)>1)for(var a,s,u=1,c=i(r[0]);u<n;++u)(a=i(r[u]))>c&&(s=r[0],r[0]=r[u],r[u]=s,c=a);return r}))}}function Ht(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Wt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Xt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Xt:Yt)(t)}function Xt(t){var e,n=Yt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Yt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Yt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Qt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Zt(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Kt(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[],i=U(t,(function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Jt(r[0]),a=Jt(r[r.length-1]),u=Jt(i[0]),c=Jt(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===a)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(a!==c)return null;n=r.concat(i.reverse().slice(1))}return s(n)}(t,e)||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:l(r.map((function(t){return t.coordinates}))):null}function Jt(t){return t[0].toString()+","+t[1].toString()}function $t(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=function(t){var e={};N(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return Kt(t,e);case"Polygon":return function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[];N(t,(function(t){r.push(t.geometry)}));var i=wa({geoms:p(r).geometry});return ha(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=K(t),o=[];switch(i){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":q(t).forEach((function(t){o.push(ee(t))}));break;case"MultiPolygon":q(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(ee(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};q(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=q(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)n=e[s-1],r=e[s],function(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return(r-o)*l-(i-a)*c==0&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}(n,i=e[s+1],r)||o.push(r);return o.push(i),o}function ne(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function re(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function ie(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var u=re(t[s],t[e],t[n]);u>a&&(o=s,a=u)}a>r&&(o-e>1&&ie(t,e,o,r,i),i.push(t[o]),n-o>1&&ie(t,o,n,r,i))}function oe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,r=[t[0]];return ie(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)ne(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),r)}function ae(t,e,n){return oe(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function se(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=oe(r,e,n).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=oe(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function ue(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!x(n))throw new Error("resolution must be an number");if(!x(r))throw new Error("sharpness must be an number");for(var i=[],o=new xa({points:Q(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return s(i,t.properties)}function ce(t){O(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[r,n],[r,i],[e,i],a]])}function le(t){return ce(G(t))}function fe(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Dt(t.slice(0,2),[r,n])>=Dt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function he(t,e,n,i){if(!E(i=i||{}))throw new Error("options is invalid");var o=i.units,a=i.properties,s=V(t),u=b(s[0]),c=b(s[1]),l=b(n),f=y(e,o),h=Math.asin(Math.sin(c)*Math.cos(f)+Math.cos(c)*Math.sin(f)*Math.cos(l));return r([A(u+Math.atan2(Math.sin(l)*Math.sin(f)*Math.cos(c),Math.cos(f)-Math.sin(c)*Math.sin(h))),A(h)],a)}function pe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(he(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),o([a],i)}function de(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=de(e,t);return(n+180)%360}(t,e);var r=V(t),i=V(e),o=b(r[0]),a=b(i[0]),s=b(r[1]),u=b(i[1]),c=Math.sin(a-o)*Math.cos(u),l=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return A(Math.atan2(c,l))}function ge(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=G(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ye(t,e){var n=0,i=0,o=0;return T(t,(function(t){n+=t[0],i+=t[1],o++}),!0),r([n/o,i/o],e)}function ve(t,e){switch(K(t)){case"Point":return t;case"Polygon":var n=[];T(t,(function(t){n.push(t)}));var i,o,a,s,u,c,l,f,h=ye(t,e),p=h.geometry.coordinates,d=0,g=0,y=0,v=n.map((function(t){return[t[0]-p[0],t[1]-p[1]]}));for(i=0;i<n.length-1;i++)s=(o=v[i])[0],c=o[1],u=(a=v[i+1])[0],y+=f=s*(l=a[1])-u*c,d+=(s+u)*f,g+=(c+l)*f;if(0===y)return h;var m=1/(.5*y*6);return r([p[0]+m*d,p[1]+m*g],e);default:var A=Mt(t);return A?ve(A,e):ye(t,e)}}function me(t){var e=[];return"FeatureCollection"===t.type?I(t,(function(t){T(t,(function(n){e.push(r(n,t.properties))}))})):T(t,(function(n){e.push(r(n,t.properties))})),c(e)}function Ae(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,f=l?e[0]*n:t.length,h=be(t,0,f,n,!0),p=[];if(!h)return p;if(l&&(h=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=be(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(a));for(s.sort(xe),i=0;i<s.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,f=n.y,h=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Oe(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&Me(r,t)&&(n=r,h=u),r=r.next;return n}(t,e)){var n=Ce(e,t);_e(n,n.next)}}(s[i],n),n=_e(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return we(h,p,n,r,i,c),p}function be(t,e,n,r,i){var o,a;if(i===je(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ie(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ie(o,t[o],t[o+1],a);return a&&Te(a,a.next)&&(Re(a),a=a.next),a}function _e(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Te(r,r.next)&&0!==Se(r.prev,r,r.next))r=r.next;else{if(Re(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function we(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Ee(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Se(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=Ee(s,u,e,n,r),h=Ee(c,l,e,n,r),p=t.nextZ;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&Oe(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Se(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&Oe(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Se(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(Se(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Oe(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Se(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Re(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?we(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Te(i,o)&&Pe(i,r,r.next,o)&&Me(i,o)&&Me(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Re(r),Re(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===a&&function(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Pe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Me(t,e)&&Me(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(a,s)){var u=Ce(a,s);return a=_e(a,a.next),u=_e(u,u.next),we(a,e,n,r,i,o),void we(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}(t,e,n,r,i,o):we(_e(t),e,n,r,i,o,1);break}}}function xe(t,e){return t.x-e.x}function Ee(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Oe(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Se(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Te(t,e){return t.x===e.x&&t.y===e.y}function Pe(t,e,n,r){return!!(Te(t,e)&&Te(n,r)||Te(t,r)&&Te(n,e))||Se(t,e,n)>0!=Se(t,e,r)>0&&Se(n,r,t)>0!=Se(n,r,e)>0}function Me(t,e){return Se(t.prev,t,t.next)<0?Se(t,e,t.next)>=0&&Se(t,t.prev,e)>=0:Se(t,e,t.prev)<0||Se(t,t.next,e)<0}function Ce(t,e){var n=new ke(t.i,t.x,t.y),r=new ke(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ie(t,e,n,r){var i=new ke(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Re(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ke(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function je(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Le(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Ea(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<i.length;a+=3){var s=i.slice(a,a+3);s.push(i[a]),r.push(o([s]))}return r}function Ne(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return I(e,(function(e,i){var o=Dt(t,e);o<r&&((n=Ft(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)})),n}function De(t,e,n,r,i){Fe(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Fe(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Fe(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],f=n,h=r;for(Be(t,n,e),i(t[r],l)>0&&Be(t,n,r);f<h;){for(Be(t,f,h),f++,h--;i(t[f],l)<0;)f++;for(;i(t[h],l)>0;)h--}0===i(t[n],l)?Be(t,n,h):Be(t,++h,r),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function Be(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ze(t,e){if(!(this instanceof ze))return new ze(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ue(t,e){Ge(t,0,t.children.length,e,t)}function Ge(t,e,n,r,i){i||(i=Ze(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Ve(i,t.leaf?r(o):o);return i}function Ve(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function qe(t,e){return t.minX-e.minX}function He(t,e){return t.minY-e.minY}function We(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Xe(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ye(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Qe(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(De(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function Je(t){var e=ze(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tn(t);return ze.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=$e(t);n.bbox=t,e.push(n)})):I(t,(function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)})),ze.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}return ze.prototype.remove.call(this,t)},e.clear=function(){return ze.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:ze.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return ze.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:ze.prototype.all.call(this)}},e.toJSON=function(){return ze.prototype.toJSON.call(this)},e.fromJSON=function(t){return ze.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function $e(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return N(t,(function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=q(r);break;case"LineString":n=[q(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=s([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),c(e)}function nn(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&i.push(o),c(i)}var a=Je();return a.load(en(n)),I(en(t),(function(t){I(a.search(t),(function(e){var n=rn(t,e);if(n){var o=q(n).join(",");r[o]||(r[o]=!0,i.push(n))}}))})),c(i)}function rn(t,e){var n=q(t),i=q(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],c=i[0][0],l=i[0][1],f=i[1][0],h=i[1][1],p=(h-l)*(s-o)-(f-c)*(u-a);if(0===p)return null;var d=((f-c)*(a-l)-(h-l)*(o-c))/p,g=((s-o)*(a-l)-(u-a)*(o-c))/p;return d>=0&&d<=1&&g>=0&&g<=1?r([o+d*(s-o),a+d*(u-a)]):null}function on(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return N(t,(function(t){for(var i=q(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=Dt(e,c,n);var l=r(i[u+1]);l.properties.dist=Dt(e,l,n);var f=Dt(c,l,n),h=Math.max(c.properties.dist,l.properties.dist),p=de(c,l),d=he(e,h,p+90,n),g=he(e,h,p-90,n),y=nn(s([d.geometry.coordinates,g.geometry.coordinates]),s([c.geometry.coordinates,l.geometry.coordinates])),v=null;y.features.length>0&&((v=y.features[0]).properties.dist=Dt(e,v,n),v.properties.location=a+Dt(c,v,n)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=a),l.properties.dist<o.properties.dist&&((o=l).properties.index=u+1,o.properties.location=a+f),v&&v.properties.dist<o.properties.dist&&((o=v).properties.index=u),a+=f}})),o}function an(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=i?sn(V(e),V(t)):sn(V(t),V(e)))>180?-(360-r):r}function sn(t,e){var n=b(t[1]),r=b(e[1]),i=b(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(A(Math.atan2(i,o))+360)%360}function un(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=V(t),o=V(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,_(function(t,e,n){var r=n=void 0===n?No:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+c*c*s*s)*r}(i,o),"meters",r)}function cn(t,e){return fn(t,"mercator",e)}function ln(t,e){return fn(t,"wgs84",e)}function fn(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&x(t[0])?t="mercator"===e?hn(t):pn(t):(!0!==r&&(t=Ft(t)),T(t,(function(t){var n="mercator"===e?hn(t):pn(t);t[0]=n[0],t[1]=n[1]}))),t}function hn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function pn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function dn(t,n,i){if(!E(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):X(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):X(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return F(n,(function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],s=function(t,e,n,i){var o=i.mercator,a=!0!==o?Dt(e,t,i):gn(e,t,i),s=m(!0!==o?de(e,t):an(e,t)),u=m(!0!==o?de(e,n):an(e,n)),c=Math.abs(s-u);if(c>90)return a;var l=(u+180)%360,f=m(!0!==o?de(n,t):an(n,t)),h=Math.abs(f-l);return h>180&&(h=Math.abs(h-360)),h>90?!0!==o?Dt(t,n,i):gn(t,n,i):!0!==o?a*Math.sin(b(c)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=r(n),s=ln(function(t,e,n){var r=t[0],i=t[1],o=e[0]-r,a=e[1]-i,s=((n[0]-r)*o+(n[1]-i)*a)/(o*o+a*a);return[r+s*o,i+s*a]}(cn([t[0]+o,t[1]]),cn([e[0]+o,e[1]]),cn([n[0]+o,n[1]])));return 0!==o&&(s[0]-=o),un(a,s,i)}(e,n,t,i)}(a,e,n,i);o>s&&(o=s)})),o}function gn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=cn([t[0]+i,t[1]]),a=cn([e[0]+i,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return _(Math.sqrt(u),"meters",r)}function yn(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?c([e(t)]):c([t]):t}(t),i=ge(n),o=!1,a=0;!o&&a<n.features.length;){var s,u=n.features[a].geometry,l=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var f=!1;for(s=0;!f&&s<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[s][0]&&i.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,f=!0),s++}else if("LineString"===u.type)for(s=0;!l&&s<u.coordinates.length-1;)vn(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(l=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var h=0;h<u.coordinates.length;){l=!1,s=0;for(var p=u.coordinates[h];!l&&s<p.length-1;)vn(i.geometry.coordinates[0],i.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(l=!0,o=!0),s++;h++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Ct(i,u)&&(o=!0);a++}if(o)return i;var d=c([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(me(n.features[a]).features);return r(Ne(i,d).geometry.coordinates)}function vn(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function mn(t){return L(t,(function(t,e){return t+An(e)}),0)}function An(t){var e,n=0;switch(t.type){case"Polygon":return bn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=bn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=An(t.geometries[e]);return n}}function bn(t){var e=0;if(t&&t.length>0){e+=Math.abs(_n(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(_n(t[n]))}return e}function _n(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(wn(t[o][0])-wn(e[0]))*Math.sin(wn(n[1]));s=s*Ta*Ta/2}return s}function wn(t){return t*Math.PI/180}function xn(t,e){if(!E(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,(function(t,n){var r=n.geometry.coordinates;return t+Dt(r[0],r[1],e)}),0)}function En(t,e,n,r){if(!E(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,u,c,l=0,f=0;f<i.length&&!(e>=l&&f===i.length-1);f++){if(l>e&&0===o.length){if(!(a=e-l))return o.push(i[f]),s(o);u=de(i[f],i[f-1])-180,c=he(i[f],a,u,r),o.push(c.geometry.coordinates)}if(l>=n)return(a=n-l)?(u=de(i[f],i[f-1])-180,c=he(i[f],a,u,r),o.push(c.geometry.coordinates),s(o)):(o.push(i[f]),s(o));if(l>=e&&o.push(i[f]),f===i.length-1)return s(o);l+=Dt(i[f],i[f+1],r)}return s(i[i.length-1])}function On(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!E(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=V(t),o=q(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,r){var i=n[0],o=n[1],a=t[0],s=t[1],u=e[0],c=e[1],l=u-a,f=c-s;return(n[0]-a)*f-(n[1]-s)*l==0&&(r?"start"===r?Math.abs(l)>=Math.abs(f)?l>0?a<i&&i<=u:u<=i&&i<a:f>0?s<o&&o<=c:c<=o&&o<s:"end"===r?Math.abs(l)>=Math.abs(f)?l>0?a<=i&&i<u:u<i&&i<=a:f>0?s<=o&&o<c:c<o&&o<=s:"both"===r?Math.abs(l)>=Math.abs(f)?l>0?a<i&&i<u:u<i&&i<a:f>0?s<o&&o<c:c<o&&o<s:void 0:Math.abs(l)>=Math.abs(f)?l>0?a<=i&&i<=u:u<=i&&i<=a:f>0?s<=o&&o<=c:c<=o&&o<=s)}(o[a],o[a+1],i,s))return!0}return!1}function Sn(t,e){var n=K(t),r=K(e),i=Q(t),o=Q(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Pn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return On(i,o,{ignoreEndVertices:!0});case"Polygon":return Ct(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Pn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!On(t.coordinates[r],e))return!1;n||(n=On(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Ct(t.coordinates[1],e);if(!i){n=!1;break}i=Ct(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!On(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!Tn(G(e),G(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!Ct(t.coordinates[r],e))return!1;n||(n=Ct(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=Ct(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=G(t);if(!Tn(G(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Ct(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Tn(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Pn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Mn(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var i=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!x(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],l=t[2],f=t[3],h=e/Dt([s,u],[l,u],n)*(l-s),p=e/Dt([s,u],[s,f],n)*(f-u),d=l-s,g=f-u,y=Math.floor(d/h),v=(g-Math.floor(g/p)*p)/2,m=s+(d-y*h)/2;m<=l;){for(var A=u+v;A<=f;){var b=r([m,A],o);i?Sn(b,i)&&a.push(b):a.push(b),A+=p}m+=h}return c(a)}function Cn(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return T(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function In(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!In(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Rn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function kn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!kn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function jn(t,e){var n=[],r=Je();return N(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=Nn(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),I(Ln(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=Ln(t,e).features).forEach((function(t){t.bbox||(t.bbox=fe(G(t)))})),r.load(c(n))})),c(n)}function Ln(t,e){var n=[],r=q(t)[0],i=q(t)[t.geometry.coordinates.length-1];if(Dn(r,V(e))||Dn(i,V(e)))return c([t]);var o=Je(),a=en(t);o.load(a);var u=o.search(e);if(!u.features.length)return c([t]);var l=Nn(e,u),f=R(a,(function(t,r,i){var o=q(r)[1],a=V(e);return i===l.id?(t.push(a),n.push(s(t)),Dn(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return f.length>1&&n.push(s(f)),c(n)}function Nn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return I(e,(function(e){var i=on(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function Dn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fn(t,e,n,r,i){if(!E(i=i||{}))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Bn(n),c=Bn(r),l=t.properties;if(u===c)return s(pe(t,e,i).geometry.coordinates[0],l);for(var f=u,h=u<c?c:c+360,p=f,d=[],g=0;p<h;)d.push(he(t,e,p,a).geometry.coordinates),p=f+360*++g/o;return p>h&&d.push(he(t,e,h,a).geometry.coordinates),s(d,l)}function Bn(t){var e=t%360;return e<0&&(e+=360),e}function zn(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=K(t),i=q(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Un(i,n);case"MultiPolygon":var o=[];return i.forEach((function(t){o.push(Un(t,n))})),c(o);default:throw new Error("geom "+r+" not supported")}}function Un(t,e){return t.length>1?l(t,e):s(t[0],e)}function Gn(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,K(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(q(Vn(t,{},r,i)))})),h(o,n)}return Vn(t,n,r,i)}function Vn(t,e,n,r){e=e||t.properties||{};var i=q(t),a=K(t);if(!i.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(i=qn(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach((function(t){if(n&&(t=qn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(G(s(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)})),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function qn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function Hn(t,e,n){var r,i,o,a,s,u=t.length,c=Xn(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],a=s=Xn(o=t[r],e);;){if(!(c|a)){l.push(i),a!==s?(l.push(o),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(o);break}if(c&a)break;c?c=Xn(i=Wn(i,o,c,e),e):a=Xn(o=Wn(i,o,a,e),e)}c=s}return l.length&&n.push(l),n}function Wn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Xn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Yn(t,e){for(var n=[],r=0;r<t.length;r++){var i=Fa.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function Qn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Zn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Kn(t)||Kn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Qn(t))return!!Qn(e)&&Zn(t=Ba.call(t),e=Ba.call(e),n);if(Jn(t)){if(!Jn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(!Zn(t[i=o[r]],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Kn(t){return null===t||void 0===t}function Jn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}function $n(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=Je();return a.load(en(t)),F(e,(function(t){var e=!1;I(a.search(t),(function(n){if(!1===e){var o=q(t).sort(),a=q(n).sort();Zn(o,a)||(0===i?On(o[0],n)&&On(o[1],n):on(n,o[0]).properties.dist<=i&&on(n,o[1]).properties.dist<=i)?(e=!0,r=r?tr(r,t):t):(0===i?On(a[0],t)&&On(a[1],t):on(t,a[0]).properties.dist<=i&&on(t,a[1]).properties.dist<=i)&&(r=r?tr(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0)})),r&&o.push(r),c(o)}function tr(t,e){var n=q(e),r=q(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Zn(n[0],i)?a.unshift(n[1]):Zn(n[0],o)?a.push(n[1]):Zn(n[1],i)?a.unshift(n[0]):Zn(n[1],o)&&a.push(n[0]),t}function er(t){var e=t%360;return e<0&&(e+=360),e}function nr(t,e,n,i){if(!E(i=i||{}))throw new Error("options is invalid");var o=i.units,a=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=_(e,o,"meters"),u=V(t),c=function(t,e,n,r){var i=e/(r=void 0===r?No:Number(r)),o=t[0]*Math.PI/180,a=b(t[1]),s=b(n),u=i*Math.cos(s),c=a+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(l)>1e-11?u/l:Math.cos(a);return[(180*(o+i*Math.sin(s)/f)/Math.PI+540)%360-180,180*c/Math.PI]}(u,s,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,r(c,a)}function rr(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=ir(s,u,e),n<=0&&r>0?function(t,e,n){return ir(t,e,n)<0}(e,s,i)||(i=s):n>0&&r<=0&&(function(t,e,n){return ir(t,e,n)>0}(e,s,o)||(o=s)),n=r}return[i,o]}function ir(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function or(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=q(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function ar(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return j(t,(function(t){ar(t,e)})),t;case"LineString":return sr(q(t),e),t;case"Polygon":return ur(q(t),e),t;case"MultiLineString":return q(t).forEach((function(t){sr(t,e)})),t;case"MultiPolygon":return q(t).forEach((function(t){ur(t,e)})),t;case"Point":case"MultiPoint":return t}}function sr(t,e){or(t)===e&&t.reverse()}function ur(t,e){or(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)or(t[n])===e&&t[n].reverse()}function cr(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Y(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return I(t,(function(t){var e=q(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return q(t)[0]-q(e)[0]}))})).sort((function(t,n){return e?q(t[0])[1]-q(n[0])[1]:q(n[0])[1]-q(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var f=u[l];f.properties[n]?c.push(f.properties[n]):c.push(0),!0===i&&(f.properties.matrixPosition=[s,l])}a.push(c)}return a}function lr(t,e,n,r){r=r||{};for(var i=Object.keys(za),o=0;o<i.length;o++){var a=i[o],s=r[a];s=void 0!==s&&null!==s?s:za[a],Ua[a]=s}Ua.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var c=0,l=t[s+1][u],f=t[s+1][u+1],h=t[s][u+1],p=t[s][u];if(!(isNaN(l)||isNaN(f)||isNaN(h)||isNaN(p))){c|=l<e?0:l>a?128:64,c|=f<e?0:f>a?32:16,c|=h<e?0:h>a?8:4;var d=+(c|=p<e?0:p>a?2:1),g=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var y=(l+f+h+p)/4;g=y>a?2:y<e?0:1,34===c?1===g?c=35:0===g&&(c=136):136===c?1===g?(c=35,g=4):0===g&&(c=34):17===c?1===g?(c=155,g=4):0===g&&(c=153):68===c?1===g?(c=103,g=4):0===g&&(c=102):153===c?1===g&&(c=155):102===c?1===g&&(c=103):152===c?g<2&&(c=156,g=1):137===c?g<2&&(c=139,g=1):98===c?g<2&&(c=99,g=1):38===c?g<2&&(c=39,g=1):18===c?g>0?(c=156,g=4):c=152:33===c?g>0?(c=139,g=4):c=137:72===c?g>0?(c=99,g=4):c=98:132===c&&(g>0?(c=39,g=4):c=38)}if(0!=c&&170!=c){var v,m,A,b,_,w,x,E;v=m=A=b=_=w=x=E=.5;var O=[];1===c?(A=1-fr(e,h,p),E=1-fr(e,l,p),O.push(Ts[c])):169===c?(A=fr(a,p,h),E=fr(a,p,l),O.push(Ts[c])):4===c?(w=1-fr(e,f,h),b=fr(e,p,h),O.push(Os[c])):166===c?(w=fr(a,h,f),b=1-fr(a,h,p),O.push(Os[c])):16===c?(_=fr(e,h,f),m=fr(e,l,f),O.push(Es[c])):154===c?(_=1-fr(a,f,h),m=1-fr(a,f,l),O.push(Es[c])):64===c?(x=fr(e,p,l),v=1-fr(e,f,l),O.push(Ms[c])):106===c?(x=1-fr(a,l,p),v=fr(a,l,f),O.push(Ms[c])):168===c?(b=fr(a,p,h),A=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),O.push(Ss[c]),O.push(Ts[c])):2===c?(b=1-fr(e,h,p),A=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),O.push(Ss[c]),O.push(Ts[c])):162===c?(_=fr(a,h,f),w=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),O.push(Ss[c]),O.push(Ts[c])):8===c?(_=1-fr(e,f,h),w=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),O.push(Es[c]),O.push(Os[c])):138===c?(_=1-fr(e,f,h),w=1-fr(a,f,h),v=1-fr(a,f,l),m=1-fr(e,f,l),O.push(Es[c]),O.push(Os[c])):32===c?(_=fr(a,h,f),w=fr(e,h,f),v=fr(e,l,f),m=fr(a,l,f),O.push(Es[c]),O.push(Os[c])):42===c?(E=1-fr(a,l,p),x=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f),O.push(Ps[c]),O.push(Ms[c])):128===c&&(E=fr(e,p,l),x=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l),O.push(Ps[c]),O.push(Ms[c])),5===c?(w=1-fr(e,f,h),E=1-fr(e,l,p),O.push(Os[c])):165===c?(w=fr(a,h,f),E=fr(a,p,l),O.push(Os[c])):20===c?(b=fr(e,p,h),m=fr(e,l,f),O.push(Ss[c])):150===c?(b=1-fr(a,h,p),m=1-fr(a,f,l),O.push(Ss[c])):80===c?(_=fr(e,h,f),x=fr(e,p,l),O.push(Es[c])):90===c?(_=1-fr(a,f,h),x=1-fr(a,l,p),O.push(Es[c])):65===c?(A=1-fr(e,h,p),v=1-fr(e,f,l),O.push(Ts[c])):105===c?(A=fr(a,p,h),v=fr(a,l,f),O.push(Ts[c])):160===c?(_=fr(a,h,f),w=fr(e,h,f),E=fr(e,p,l),x=fr(a,p,l),O.push(Es[c]),O.push(Os[c])):10===c?(_=1-fr(e,f,h),w=1-fr(a,f,h),E=1-fr(a,l,p),x=1-fr(e,l,p),O.push(Es[c]),O.push(Os[c])):130===c?(b=1-fr(e,h,p),A=1-fr(a,h,p),v=1-fr(a,f,l),m=1-fr(e,f,l),O.push(Ss[c]),O.push(Ts[c])):40===c?(b=fr(a,p,h),A=fr(e,p,h),v=fr(e,l,f),m=fr(a,l,f),O.push(Ss[c]),O.push(Ts[c])):101===c?(w=fr(a,h,f),v=fr(a,l,f),O.push(Os[c])):69===c?(w=1-fr(e,f,h),v=1-fr(e,f,l),O.push(Os[c])):149===c?(E=fr(a,p,l),m=1-fr(a,f,l),O.push(Ps[c])):21===c?(E=1-fr(e,l,p),m=fr(e,l,f),O.push(Ps[c])):86===c?(b=1-fr(a,h,p),x=1-fr(a,l,p),O.push(Ss[c])):84===c?(b=fr(e,p,h),x=fr(e,p,l),O.push(Ss[c])):89===c?(_=1-fr(a,f,h),A=fr(a,p,h),O.push(Ts[c])):81===c?(_=fr(e,h,f),A=1-fr(e,h,p),O.push(Ts[c])):96===c?(_=fr(a,h,f),w=fr(e,h,f),x=fr(e,p,l),v=fr(a,l,f),O.push(Es[c]),O.push(Os[c])):74===c?(_=1-fr(e,f,h),w=1-fr(a,f,h),x=1-fr(a,l,p),v=1-fr(e,f,l),O.push(Es[c]),O.push(Os[c])):24===c?(_=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),m=fr(e,l,f),O.push(Es[c]),O.push(Ts[c])):146===c?(_=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),m=1-fr(a,f,l),O.push(Es[c]),O.push(Ts[c])):6===c?(w=1-fr(e,f,h),b=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),O.push(Os[c]),O.push(Ss[c])):164===c?(w=fr(a,h,f),b=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),O.push(Os[c]),O.push(Ss[c])):129===c?(A=1-fr(e,h,p),E=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l),O.push(Ts[c]),O.push(Ps[c])):41===c?(A=fr(a,p,h),E=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f),O.push(Ts[c]),O.push(Ps[c])):66===c?(b=1-fr(e,h,p),A=1-fr(a,h,p),x=1-fr(a,l,p),v=1-fr(e,f,l),O.push(Ss[c]),O.push(Ts[c])):104===c?(b=fr(a,p,h),A=fr(e,p,h),x=fr(e,p,l),v=fr(a,l,f),O.push(Ts[c]),O.push(Cs[c])):144===c?(_=fr(e,h,f),E=fr(e,p,l),x=fr(a,p,l),m=1-fr(a,f,l),O.push(Es[c]),O.push(Ms[c])):26===c?(_=1-fr(a,f,h),E=1-fr(a,l,p),x=1-fr(e,l,p),m=fr(e,l,f),O.push(Es[c]),O.push(Ms[c])):36===c?(w=fr(a,h,f),b=fr(e,p,h),v=fr(e,l,f),m=fr(a,l,f),O.push(Os[c]),O.push(Ss[c])):134===c?(w=1-fr(e,f,h),b=1-fr(a,h,p),v=1-fr(a,f,l),m=1-fr(e,f,l),O.push(Os[c]),O.push(Ss[c])):9===c?(_=1-fr(e,f,h),w=1-fr(a,f,h),A=fr(a,p,h),E=1-fr(e,l,p),O.push(Es[c]),O.push(Os[c])):161===c?(_=fr(a,h,f),w=fr(e,h,f),A=1-fr(e,h,p),E=fr(a,p,l),O.push(Es[c]),O.push(Os[c])):37===c?(w=fr(a,h,f),E=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f),O.push(Os[c]),O.push(Ps[c])):133===c?(w=1-fr(e,f,h),E=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l),O.push(Os[c]),O.push(Ps[c])):148===c?(b=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),m=1-fr(a,f,l),O.push(Ss[c]),O.push(Ms[c])):22===c?(b=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),m=fr(e,l,f),O.push(Ss[c]),O.push(Ms[c])):82===c?(_=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),x=1-fr(a,l,p),O.push(Es[c]),O.push(Ts[c])):88===c?(_=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),x=fr(e,p,l),O.push(Es[c]),O.push(Ts[c])):73===c?(_=1-fr(e,f,h),w=1-fr(a,f,h),A=fr(a,p,h),v=1-fr(e,f,l),O.push(Es[c]),O.push(Os[c])):97===c?(_=fr(a,h,f),w=fr(e,h,f),A=1-fr(e,h,p),v=fr(a,l,f),O.push(Es[c]),O.push(Os[c])):145===c?(_=fr(e,h,f),A=1-fr(e,h,p),E=fr(a,p,l),m=1-fr(a,f,l),O.push(Es[c]),O.push(Ps[c])):25===c?(_=1-fr(a,f,h),A=fr(a,p,h),E=1-fr(e,l,p),m=fr(e,l,f),O.push(Es[c]),O.push(Ps[c])):70===c?(w=1-fr(e,f,h),b=1-fr(a,h,p),x=1-fr(a,l,p),v=1-fr(e,f,l),O.push(Os[c]),O.push(Ss[c])):100===c?(w=fr(a,h,f),b=fr(e,p,h),x=fr(e,p,l),v=fr(a,l,f),O.push(Os[c]),O.push(Ss[c])):34===c?(0===g?(_=1-fr(e,f,h),w=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)):(_=fr(a,h,f),w=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)),O.push(Es[c]),O.push(Os[c]),O.push(Ps[c]),O.push(Ms[c])):35===c?(4===g?(_=1-fr(e,f,h),w=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)):(_=fr(a,h,f),w=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)),O.push(Es[c]),O.push(Os[c]),O.push(Ts[c]),O.push(Ms[c])):136===c?(0===g?(_=fr(a,h,f),w=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)):(_=1-fr(e,f,h),w=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)),O.push(Es[c]),O.push(Os[c]),O.push(Ps[c]),O.push(Ms[c])):153===c?(0===g?(_=fr(e,h,f),A=1-fr(e,h,p),E=1-fr(e,l,p),m=fr(e,l,f)):(_=1-fr(a,f,h),A=fr(a,p,h),E=fr(a,p,l),m=1-fr(a,f,l)),O.push(Es[c]),O.push(Ts[c])):102===c?(0===g?(w=1-fr(e,f,h),b=fr(e,p,h),x=fr(e,p,l),v=1-fr(e,f,l)):(w=fr(a,h,f),b=1-fr(a,h,p),x=1-fr(a,l,p),v=fr(a,l,f)),O.push(Os[c]),O.push(Ms[c])):155===c?(4===g?(_=fr(e,h,f),A=1-fr(e,h,p),E=1-fr(e,l,p),m=fr(e,l,f)):(_=1-fr(a,f,h),A=fr(a,p,h),E=fr(a,p,l),m=1-fr(a,f,l)),O.push(Es[c]),O.push(Ps[c])):103===c?(4===g?(w=1-fr(e,f,h),b=fr(e,p,h),x=fr(e,p,l),v=1-fr(e,f,l)):(w=fr(a,h,f),b=1-fr(a,h,p),x=1-fr(a,l,p),v=fr(a,l,f)),O.push(Os[c]),O.push(Ss[c])):152===c?(0===g?(_=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),m=fr(e,l,f)):(_=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),m=1-fr(a,f,l)),O.push(Es[c]),O.push(Ss[c]),O.push(Ts[c])):156===c?(4===g?(_=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),m=fr(e,l,f)):(_=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),m=1-fr(a,f,l)),O.push(Es[c]),O.push(Ts[c]),O.push(Ms[c])):137===c?(0===g?(_=fr(a,h,f),w=fr(e,h,f),A=1-fr(e,h,p),E=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)):(_=1-fr(e,f,h),w=1-fr(a,f,h),A=fr(a,p,h),E=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)),O.push(Es[c]),O.push(Os[c]),O.push(Ts[c])):139===c?(4===g?(_=fr(a,h,f),w=fr(e,h,f),A=1-fr(e,h,p),E=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)):(_=1-fr(e,f,h),w=1-fr(a,f,h),A=fr(a,p,h),E=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)),O.push(Es[c]),O.push(Os[c]),O.push(Ps[c])):98===c?(0===g?(_=1-fr(e,f,h),w=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),x=fr(e,p,l),v=1-fr(e,f,l)):(_=fr(a,h,f),w=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),x=1-fr(a,l,p),v=fr(a,l,f)),O.push(Es[c]),O.push(Os[c]),O.push(Ms[c])):99===c?(4===g?(_=1-fr(e,f,h),w=1-fr(a,f,h),b=fr(a,p,h),A=fr(e,p,h),x=fr(e,p,l),v=1-fr(e,f,l)):(_=fr(a,h,f),w=fr(e,h,f),b=1-fr(e,h,p),A=1-fr(a,h,p),x=1-fr(a,l,p),v=fr(a,l,f)),O.push(Es[c]),O.push(Os[c]),O.push(Ts[c])):38===c?(0===g?(w=1-fr(e,f,h),b=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)):(w=fr(a,h,f),b=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)),O.push(Os[c]),O.push(Ps[c]),O.push(Ms[c])):39===c?(4===g?(w=1-fr(e,f,h),b=fr(e,p,h),E=fr(e,p,l),x=fr(a,p,l),v=1-fr(a,f,l),m=1-fr(e,f,l)):(w=fr(a,h,f),b=1-fr(a,h,p),E=1-fr(a,l,p),x=1-fr(e,l,p),v=fr(e,l,f),m=fr(a,l,f)),O.push(Os[c]),O.push(Ss[c]),O.push(Ms[c])):85===c&&(_=1,w=0,b=1,A=0,E=0,x=1,v=0,m=1),(v<0||v>1||m<0||m>1||_<0||_>1||b<0||b>1||E<0||E>1||x<0||x>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+d+" "+l+","+f+","+h+","+p+" "+g+" "+v+" "+m+" "+_+" "+w+" "+b+" "+A+" "+E+" "+x),o.cells[s][u]={cval:c,cval_real:d,flipped:g,topleft:v,topright:m,righttop:_,rightbottom:w,bottomright:b,bottomleft:A,leftbottom:E,lefttop:x,edges:O}}}}}return o}(t,e,n);return Ua.polygons?(Ua.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Rs[t.cval](t);"object"==typeof o&&hr(o)?"object"==typeof o[0]&&hr(o[0])?"object"==typeof o[0][0]&&hr(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):(Ua.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Va?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&qa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&qa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Ha?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Va?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&qa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&qa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Ha?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&qa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Ha?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Ha?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ga?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&qa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Ha?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Ha?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ga?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&qa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Ha?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ga?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ga?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Va?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ga?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Va?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),u=null,c=a,l=o;null!==s&&i.push([s.p[0]+c,s.p[1]+l]);do{if(null===(u=function(t,e,n,r){var i,o,a,s,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=Os[c],a=es[c],s=ns[c],u=rs[c];break;default:i=Es[c],a=Ja[c],s=$a[c],u=ts[c]}break;case 1:switch(r){case 0:i=Ps[c],a=ps[c],s=ds[c],u=gs[c];break;default:i=Ms[c],a=ls[c],s=fs[c],u=hs[c]}break;default:switch(n){case-1:switch(r){case 0:i=Cs[c],a=Wa[c],s=Xa[c],u=Ya[c];break;default:i=Is[c],a=Qa[c],s=Za[c],u=Ka[c]}break;case 1:switch(r){case 0:i=Ts[c],a=is[c],s=os[c],u=as[c];break;default:i=Ss[c],a=ss[c],s=us[c],u=cs[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:c&Va?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:c&qa?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:c&qa?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:c&Ha?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&Va?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:c&qa?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:c&qa?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:c&Ha?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:c&qa?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:c&Ha?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:c&Ha?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&Ga?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:c&qa?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:c&Ha?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:c&Ha?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&Ga?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:c&qa?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&Ga?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:c&Ha?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&Ga?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&Ga?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&Va?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&Ga?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&Va?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}(t.cells[l][c],s.x,s.y,s.o)))break;if(i.push([u.p[0]+c,u.p[1]+l]),c+=u.x,s=u,(l+=u.y)<0||l>=n||c<0||c>=r||void 0===t.cells[l][c]){var f=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,c=n+i,l=[],f=!1;!f;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,s=(a=t.cells[c][u]).cval_real,-1===i)if(0===o)if(s&Ha)l.push([u,c]),r=-1,i=0,o=0;else{if(!(s&qa)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,f=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(s&Ha)){if(s&qa){l.push([u+a.bottomright,c]),r=0,i=1,o=1,f=!0;break}l.push([u+a.bottomleft,c]),r=0,i=1,o=0,f=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&Va)){if(s&Ga){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,f=!0;break}l.push([u+a.topright,c+1]),r=0,i=-1,o=1,f=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else l.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&Ga)){if(s&Ha){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,f=!0;break}l.push([u,c+a.lefttop]),r=1,i=0,o=1,f=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(s&Ga)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&qa)){l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,f=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(s&qa)){if(s&Va){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,f=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(s=(a=t.cells[c][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(s&Ha)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,f=!0;break}l.push([u,c])}else{if(!(s&Ga)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(s&Va)){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,f=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(s&qa)){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1,f=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(s&Ga)){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,f=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(c+=i,(u+=r)===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}(t,c-=u.x,l-=u.y,u.x,u.y,u.o);if(null===f)break;f.path.forEach((function(t){i.push(t)})),c=f.i,l=f.j,s=f}}while(void 0!==t.cells[l][c]&&t.cells[l][c].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(c)),"function"==typeof Ua.successCallback&&Ua.successCallback(u),u}function fr(t,e,n){return(t-e)/(n-e)}function hr(t){return t.constructor.toString().indexOf("Array")>-1}function pr(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=ye(t)),!1!==i&&void 0!==i||(t=Ft(t)),T(t,(function(t){var n=an(r,t)+e,i=un(r,t),o=q(nr(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function dr(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Ft(t)),"FeatureCollection"!==t.type||o?gr(t,e,r):(I(t,(function(n,i){t.features[i]=gr(n,e,r)})),t)}function gr(t,e,n){var i="Point"===K(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return V(e);var n=t.bbox?t.bbox:G(t),i=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return ge(t);case void 0:case null:case"centroid":return ye(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||T(t,(function(t){var r=un(n,t),i=an(n,t),o=q(nr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function yr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function vr(t,e){return t[0]*e[1]-e[0]*t[1]}function mr(t,e){return!function(t,e){return 0===vr(yr(t),yr(e))}(t,e)&&function(t,e){var n=t[0],r=yr(t),i=e[0],o=yr(e),a=vr(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(vr(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/a,r))}(t,e)}function Ar(t,e,n){var r=[],i=v(e,n),o=q(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r;return[[i,t[1]+n*(t[0]-e[0])/r],[o,e[1]+n*(t[0]-e[0])/r]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],u=mr(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),s(a,t.properties)}function br(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(r*a-o*i)}function _r(t,e){return e.geometry.coordinates[0].every((function(e){return Ct(r(e),t)}))}function wr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return r*a-i*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function xr(t,e){return nn(e,zn(t)).features.length>0}function Er(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Or(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),Mr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function Tr(t,e){return nn(t,zn(e)).features.length>0}function Pr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,a=0;a<o&&n&&i;)Ct(r(t.coordinates[0][a]),e)?n=!0:i=!0,a++;return i&&i}function Mr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Cr(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Ir(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Rr(t,e){return zs(t,e,{strict:!0})}function kr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=K(t);if(n!==K(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new Gs({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=k(t),o=k(e);i.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&r++}))}));break;case"LineString":case"MultiLineString":F(t,(function(t){F(e,(function(e){$n(t,e).features.length&&r++}))}));break;case"Polygon":case"MultiPolygon":F(t,(function(t){F(e,(function(e){nn(t,e).features.length&&r++}))}))}return r>0}function jr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Lr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Nr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Dr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Fr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Fr(t,e,n){this.x=t,this.y=e,this.weight=n}function Br(t){this.content=[],this.scoreFunction=t}function zr(t){return t[0]}function Ur(t){return t[1]}function Gr(){this._=null}function Vr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function qr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Hr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Wr(t){for(;t.L;)t=t.L;return t}function Xr(t,e,n,r){var i=[null,null],o=uu.push(i)-1;return i.left=t,i.right=e,n&&Qr(i,t,e,n),r&&Qr(i,e,t,r),au[t.index].halfedges.push(o),au[e.index].halfedges.push(o),i}function Yr(t,e,n){var r=[e,n];return r.left=t,r}function Qr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Zr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=0,f=1,h=s[0]-u,p=s[1]-c;if(o=e-u,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>l&&(l=o)}if(o=r-u,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<f&&(f=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<f&&(f=o)}return!(l>0||f<1)||(l>0&&(t[0]=[u+l*h,c+l*p]),f<1&&(t[1]=[u+f*h,c+f*p]),!0)}}}}}function Kr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,f=c[0],h=c[1],p=l[0],d=l[1],g=(f+p)/2,y=(h+d)/2;if(d===h){if(g<e||g>=r)return;if(f>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(s=y-(a=(f-p)/(d-h))*g,a<-1||a>1)if(f>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Jr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $r(t,e){return e[+(e.left!==t.site)]}function ti(t,e){return e[+(e.left===t.site)]}function ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,f=o[1]-s,h=2*(u*f-c*l);if(!(h>=-hu)){var p=u*u+c*c,d=l*l+f*f,g=(f*p-c*d)/h,y=(u*d-l*p)/h,v=cu.pop()||new function(){Vr(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=g+a,v.y=(v.cy=y+s)+Math.sqrt(g*g+y*y),t.circle=v;for(var m=null,A=su._;A;)if(v.y<A.y||v.y===A.y&&v.x<=A.x){if(!A.L){m=A.P;break}A=A.L}else{if(!A.R){m=A;break}A=A.R}su.insert(m,v),m||(iu=v)}}}}function ni(t){var e=t.circle;e&&(e.P||(iu=e.N),su.remove(e),cu.push(e),Vr(e),t.circle=null)}function ri(t){var e=lu.pop()||new function(){Vr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ii(t){ni(t),ou.remove(t),lu.push(t),Vr(t)}function oi(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ii(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<fu&&Math.abs(r-u.circle.cy)<fu;)o=u.P,s.unshift(u),ii(u),u=o;s.unshift(u),ni(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<fu&&Math.abs(r-c.circle.cy)<fu;)a=c.N,s.push(c),ii(c),c=a;s.push(c),ni(c);var l,f=s.length;for(l=1;l<f;++l)c=s[l],u=s[l-1],Qr(c.edge,u.site,c.site,i);u=s[0],(c=s[f-1]).edge=Xr(u.site,c.site,null,i),ei(u),ei(c)}function ai(t){for(var e,n,r,i,o=t[0],a=t[1],s=ou._;s;)if((r=si(s,a)-o)>fu)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return si(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>fu)){r>-fu?(e=s.P,n=s):i>-fu?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){au[t.index]={site:t,halfedges:[]}}(t);var u=ri(t);if(ou.insert(e,u),e||n){if(e===n)return ni(e),n=ri(e.site),ou.insert(u,n),u.edge=n.edge=Xr(e.site,u.site),ei(e),void ei(n);if(n){ni(e),ni(n);var c=e.site,l=c[0],f=c[1],h=t[0]-l,p=t[1]-f,d=n.site,g=d[0]-l,y=d[1]-f,v=2*(h*y-p*g),m=h*h+p*p,A=g*g+y*y,b=[(y*m-p*A)/v+l,(h*A-g*m)/v+f];Qr(n.edge,c,d,b),u.edge=Xr(c,t,null,b),n.edge=Xr(t,d,null,b),ei(e),ei(n)}else u.edge=Xr(e.site,u.site)}}function si(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+r:(r+s)/2}function ui(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ci(t,e){return e[1]-t[1]||e[0]-t[0]}function li(t,e){var n,r,i,o=t.sort(ci).pop();for(uu=[],au=new Array(t.length),ou=new Gr,su=new Gr;;)if(i=iu,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ai(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;oi(i.arc)}if(function(){for(var t,e,n,r,i=0,o=au.length;i<o;++i)if((t=au[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Jr(t,uu[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=uu.length;o--;)Kr(i=uu[o],t,e,n,r)&&Zr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>fu||Math.abs(i[0][1]-i[1][1])>fu)||delete uu[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,d,g,y=au.length,v=!0;for(i=0;i<y;++i)if(o=au[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)uu[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=(p=ti(o,uu[u[s]]))[0],g=p[1],f=(l=$r(o,uu[u[++s%c]]))[0],h=l[1],(Math.abs(d-f)>fu||Math.abs(g-h)>fu)&&(u.splice(s,0,uu.push(Yr(a,p,Math.abs(d-t)<fu&&r-g>fu?[t,Math.abs(f-t)<fu?h:r]:Math.abs(g-r)<fu&&n-d>fu?[Math.abs(h-r)<fu?f:n,r]:Math.abs(d-n)<fu&&g-e>fu?[n,Math.abs(f-n)<fu?h:e]:Math.abs(g-e)<fu&&d-t>fu?[Math.abs(h-e)<fu?f:t,e]:null))-1),++c);c&&(v=!1)}if(v){var m,A,b,_=1/0;for(i=0,v=null;i<y;++i)(o=au[i])&&(b=(m=(a=o.site)[0]-t)*m+(A=a[1]-e)*A)<_&&(_=b,v=o);if(v){var w=[t,e],x=[t,r],E=[n,r],O=[n,e];v.halfedges.push(uu.push(Yr(a=v.site,w,x))-1,uu.push(Yr(a,x,E))-1,uu.push(Yr(a,E,O))-1,uu.push(Yr(a,O,w))-1)}}for(i=0;i<y;++i)(o=au[i])&&(o.halfedges.length||delete au[i])}(a,s,u,c)}this.edges=uu,this.cells=au,ou=su=uu=au=null}function fi(t){return(t=t.slice()).push(t[0]),o([t])}function hi(t,e,n,r){var i=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!E(r))throw new Error("options must be an object");if(!x(i))throw new Error("steps must be a number");if(!x(s))throw new Error("angle must be a number");var l=V(t);if("degrees"===a)var f=b(s);else e=nr(t,e,90,{units:a}),n=nr(t,n,0,{units:a}),e=V(e)[0]-l[0],n=V(n)[1]-l[1];for(var h=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(pi(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(pi(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===a){var v=g*Math.cos(f)+y*Math.sin(f),m=y*Math.cos(f)-g*Math.sin(f);g=v,y=m}h.push([g+l[0],y+l[1]])}return h.push(h[0]),"degrees"===a?o([h],c):pr(o([h],c),s,{pivot:u})}function pi(t){var e=t*Math.PI/180;return Math.tan(e)}function di(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return j(t,(function(t,e,n){var r=n[i];if(!x(r=void 0===r||null===r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&T(t,(function(t){o+=t[0]*r,a+=t[1]*r,s+=r}))})),r([o/s,a/s],n)}function gi(t,e,n,i){var o=n.properties.tolerance||.001,a=0,s=0,u=0,c=0;if(I(n,(function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(!x(r=Number(r)))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*Dt(e,t);0===i&&(i=1);var o=r/i;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}})),c<1)throw new Error("no features to measure");var l=a/u,f=s/u;return 1===c||0===i||Math.abs(l-e[0])<o&&Math.abs(f-e[1])<o?r([l,f],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([l,f]),gi([l,f],t,n,i-1))}function yi(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function vi(t){if(E(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*_i(),180*_i()]}function mi(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(vi(n)));return c(i)}function Ai(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),x(r)||(r=10),x(i)||(i=10);for(var a=[],s=0;s<t;s++){var u=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])})),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(vi(n))),a.push(o([u]))}return c(a)}function bi(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!x(r)||r<2)&&(r=10),x(i)||(i=1e-4),x(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var l=[vi(n)],f=0;f<r-1;f++){var h=(0===f?2*Math.random()*Math.PI:Math.tan((l[f][1]-l[f-1][1])/(l[f][0]-l[f-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;l.push([l[f][0]+p*Math.cos(h),l[f][1]+p*Math.sin(h)])}a.push(s(l))}return c(a)}function _i(){return Math.random()-.5}function wi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return I(t,(function(t){Si(t.properties,e)&&n.push(t)})),c(n)}function xi(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=Oi(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],l=0;l<s.length;l++)u.push(t.features[s[l]]);n(c(u),a,o)}}function Ei(t,e,n,r){var i=r;return xi(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function Oi(t,e){var n={};return I(t,(function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}})),n}function Si(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Si(t,e[r]))return!1;return!0}return Ti(t,e)}function Ti(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Pi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function Mi(){}function Ci(t){this.message=t||""}function Ii(t){this.message=t||""}function Ri(){}function ki(t){return null===t?jc:t.color}function ji(t){return null===t?null:t.parent}function Li(t,e){null!==t&&(t.color=e)}function Ni(t){return null===t?null:t.left}function Di(t){return null===t?null:t.right}function Fi(){this.root_=null,this.size_=0}function Bi(){}function zi(){this.array_=[],arguments[0]instanceof Ac&&this.addAll(arguments[0])}function Ui(){}function Gi(t){this.message=t||""}function Vi(){this.array_=[]}function qi(t){switch(t.type){case"Polygon":return mn(t)>1?t:null;case"MultiPolygon":var e=[];if(N(t,(function(t){mn(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Hi(){this.reset()}function Wi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Xi(t){return t>1?zp:t<-1?-zp:Math.asin(t)}function Yi(){}function Qi(t,e){t&&ed.hasOwnProperty(t.type)&&ed[t.type](t,e)}function Zi(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ki(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Zi(t[n],e,1);e.polygonEnd()}function Ji(t){return[Xp(t[1],t[0]),Xi(t[2])]}function $i(t){var e=t[0],n=t[1],r=Yp(n);return[r*Yp(e),r*Kp(e),Kp(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function io(t){var e=Jp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>Bp?t-Gp:t<-Bp?t+Gp:t,e]}function ao(t,e,n){return(t%=Gp)?e||n?rd(uo(t),co(e,n)):uo(t):e||n?co(e,n):oo}function so(t){return function(e,n){return[(e+=t)>Bp?e-Gp:e<-Bp?e+Gp:e,n]}}function uo(t){var e=so(t);return e.invert=so(-t),e}function co(t,e){function n(t,e){var n=Yp(e),s=Yp(t)*n,u=Kp(t)*n,c=Kp(e),l=c*r+s*i;return[Xp(u*o-l*a,s*r-c*i),Xi(l*o+u*a)]}var r=Yp(t),i=Kp(t),o=Yp(e),a=Kp(e);return n.invert=function(t,e){var n=Yp(e),s=Yp(t)*n,u=Kp(t)*n,c=Kp(e),l=c*o-u*a;return[Xp(u*o+c*a,s*r+l*i),Xi(l*r-s*i)]},n}function lo(t,e){(e=$i(e))[0]-=t,io(e);var n=function(t){return t>1?0:t<-1?Bp:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+Gp-Fp)%Gp}function fo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ho(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function po(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return Hp(r[0]-t)<Fp?i>0?0:3:Hp(r[0]-n)<Fp?i>0?2:1:Hp(r[1]-e)<Fp?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&_.point(t,e)}function c(o,a){var s=i(o,a);if(f&&h.push([o,a]),A)p=o,d=a,g=s,A=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&m)_.point(o,a);else{var u=[y=Math.max(hd,Math.min(fd,y)),v=Math.max(hd,Math.min(fd,v))],c=[o=Math.max(hd,Math.min(fd,o)),a=Math.max(hd,Math.min(fd,a))];ad(u,c,t,e,n,r)?(m||(_.lineStart(),_.point(u[0],u[1])),_.point(c[0],c[1]),s||_.lineEnd(),b=!1):s&&(_.lineStart(),_.point(o,a),b=!1)}y=o,v=a,m=s}var l,f,h,p,d,g,y,v,m,A,b,_=a,w=od(),x={point:u,lineStart:function(){x.point=c,f&&f.push(h=[]),A=!0,m=!1,y=v=NaN},lineEnd:function(){l&&(c(p,d),g&&m&&w.rejoin(),l.push(w.result())),x.point=u,m&&_.lineEnd()},polygonStart:function(){_=w,l=[],f=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=f.length;n<i;++n)for(var o,a,s=f[n],u=1,c=s.length,l=s[0],h=l[0],p=l[1];u<c;++u)o=h,a=p,h=(l=s[u])[0],p=l[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=b&&e,i=(l=ld(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ud(l,s,e,o,a),a.polygonEnd()),_=a,l=f=h=null}};return x}}function go(t){return t.length>1}function yo(t,e){return((t=t.x)[0]<0?t[1]-zp-Fp:zp-t[1])-((e=e.x)[0]<0?e[1]-zp-Fp:zp-e[1])}function vo(t){return function(e){var n=new mo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function mo(){}function Ao(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),nd(n,t.stream(Ad));var a=Ad.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function bo(t){return function(t){function e(t){return[(t=c(t[0]*qp,t[1]*qp))[0]*g+a,s-t[1]*g]}function n(t,e){return[(t=o(t,e))[0]*g+a,s-t[1]*g]}function r(){c=rd(u=ao(b,_,w),o);var t=o(m,A);return a=y-t[0]*g,s=v+t[1]*g,i()}function i(){return p=d=null,e}var o,a,s,u,c,l,f,h,p,d,g=150,y=480,v=250,m=0,A=0,b=0,_=0,w=0,x=null,E=_d,O=null,S=dd,T=.5,P=Od(n,T);return e.stream=function(t){return p&&d===t?p:p=Sd(E(u,P(S(d=t))))},e.clipAngle=function(t){return arguments.length?(E=+t?wd(x=t*qp,6*qp):(x=null,_d),i()):x*Vp},e.clipExtent=function(t){return arguments.length?(S=null==t?(O=l=f=h=null,dd):po(O=+t[0][0],l=+t[0][1],f=+t[1][0],h=+t[1][1]),i()):null==O?null:[[O,l],[f,h]]},e.scale=function(t){return arguments.length?(g=+t,r()):g},e.translate=function(t){return arguments.length?(y=+t[0],v=+t[1],r()):[y,v]},e.center=function(t){return arguments.length?(m=t[0]%360*qp,A=t[1]%360*qp,r()):[m*Vp,A*Vp]},e.rotate=function(t){return arguments.length?(b=t[0]%360*qp,_=t[1]%360*qp,w=t.length>2?t[2]%360*qp:0,r()):[b*Vp,_*Vp,w*Vp]},e.precision=function(t){return arguments.length?(P=Od(n,T=t*t),i()):Jp(T)},e.fitExtent=function(t,n){return Ao(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return Ao(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-a)/g,(s-t[1])/g))&&[t[0]*Vp,t[1]*Vp]},r()}}((function(){return t}))()}function _o(t,e){return[t,Zp($p((zp+e)/2))]}function wo(t,e){return[Zp($p((zp+e)/2)),-t]}function xo(t,n,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return j(t,(function(t){var e=xo(t,n,r,i);e&&s.push(e)})),c(s)}var u,l=G(t),f=l[1]>50&&l[3]>50;u=f?{type:a.type,coordinates:Oo(a.coordinates,To(a))}:cn(a);var h,p=(new xl).read(u),d=g(y(n,r),"meters"),v=gh.bufferOp(p,d);if(!Eo((v=(new El).write(v)).coordinates))return(h=f?{type:v.type,coordinates:So(v.coordinates,To(a))}:ln(v)).geometry?h:e(h,o)}function Eo(t){return Array.isArray(t[0])?Eo(t[0]):isNaN(t[0])}function Oo(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return Oo(t,e)}))}function So(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return So(t,e)}))}function To(t){var e=ge(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return Td().center(e).rotate(n).scale(No)}function Po(){for(var t=new xl,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Lp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new El).write(e),properties:arguments[0].properties}}function Mo(t,n){var r=Q(t),i=Q(n);if(te(Cn(i,{precision:4})).coordinates[0].length<4)return null;if(te(Cn(r,{precision:4})).coordinates[0].length<4)return null;var o=new xl,a=o.read(Cn(r)),s=o.read(Cn(i)),u=Sp.intersection(a,s);return u.isEmpty()?null:e((new El).write(u))}function Co(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,o){var a=n(e,t);a>=0&&(void 0===i||a<i)&&(i=a,r=o)})),r}(t,e,(function(t,e){return t-e}))}function Io(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!x(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(K(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],l=t[2],f=t[3],h=(u+f)/2,p=(s+l)/2,d=2*e/Dt([s,h],[l,h],n)*(l-s),g=2*e/Dt([p,u],[p,f],n)*(f-u),y=d/2,v=2*y,m=Math.sqrt(3)/2*g,A=l-s,b=f-u,_=.75*v,w=m,O=(A-v)/(v-y/2),S=Math.floor(O),T=(S*_-y/2-A)/2-y/2+_/2,P=Math.floor((b-m)/m),M=(b-P*m)/2,C=P*m-b>m/2;C&&(M-=m/4);for(var I=[],R=[],k=0;k<6;k++){var j=2*Math.PI/6*k;I.push(Math.cos(j)),R.push(Math.sin(j))}for(var L=[],N=0;N<=S;N++)for(var D=0;D<=P;D++){var F=N%2==1;if((0!==D||!F)&&(0!==D||!C)){var B=N*_+s-T,z=D*w+u+M;if(F&&(z-=m/2),!0===i)(function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*a[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*a[(u+1)%6]]),c.push(t),s.push(o([c],r))}return s})([B,z],d/2,g/2,r,I,R).forEach((function(t){a?Mo(a,t)&&L.push(t):L.push(t)}));else{var U=function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var c=t[0]+e*i[u],l=t[1]+n*a[u];s.push([c,l])}return s.push(s[0].slice()),o([s],r)}([B,z],d/2,g/2,r,I,R);a?Mo(a,U)&&L.push(U):L.push(U)}}}return c(L)}function Ro(t){if(t.features.length<=1)return t;var e=function(t){var e=Wo(),n=[];return N(t,(function(t,e){var r=G(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],r={};return N(t,(function(t,i){if(r[i])return!0;for(e.remove({index:i},ko),r[i]=!0;;){var o=G(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return r[t.index]=!0,e.remove({index:t.index},ko),t.geojson}));s.push(t),t=Po.apply(this,s)}if(0===a.length)break}n.push(t)})),c(n)}function ko(t,e){return t.index===e.index}function jo(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!x(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],l=t[2],f=t[3],h=e/Dt([s,u],[l,u],n)*(l-s),p=e/Dt([s,u],[s,f],n)*(f-u),d=l-s,g=f-u,y=Math.floor(d/h),v=Math.floor(g/p),m=(g-v*p)/2,A=s+(d-y*h)/2,b=0;b<y;b++){for(var _=u+m,w=0;w<v;w++){var O=o([[[A,_],[A,_+p],[A+h,_+p],[A+h,_],[A,_]]],r);i?Mo(i,O)&&a.push(O):a.push(O),_+=p}A+=h}return c(a)}function Lo(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!x(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Dt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/Dt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,f=t[0];f<=t[2];){for(var h=0,p=t[1];p<=t[3];){var d=null,g=null;l%2==0&&h%2==0?(d=o([[[f,p],[f,p+u],[f+s,p],[f,p]]],r),g=o([[[f,p+u],[f+s,p+u],[f+s,p],[f,p+u]]],r)):l%2==0&&h%2==1?(d=o([[[f,p],[f+s,p+u],[f+s,p],[f,p]]],r),g=o([[[f,p],[f,p+u],[f+s,p+u],[f,p]]],r)):h%2==0&&l%2==1?(d=o([[[f,p],[f,p+u],[f+s,p+u],[f,p]]],r),g=o([[[f,p],[f+s,p+u],[f+s,p],[f,p]]],r)):h%2==1&&l%2==1&&(d=o([[[f,p],[f,p+u],[f+s,p],[f,p]]],r),g=o([[[f,p+u],[f+s,p+u],[f+s,p],[f,p+u]]],r)),i?(Mo(i,d)&&a.push(d),Mo(i,g)&&a.push(g)):(a.push(d),a.push(g)),p+=u,h++}l++,f+=s}return c(a)}var No=6371008.8,Do={meters:No,metres:No,millimeters:1e3*No,millimetres:1e3*No,centimeters:100*No,centimetres:100*No,kilometers:No/1e3,kilometres:No/1e3,miles:No/1609.344,nauticalmiles:No/1852,inches:39.37*No,yards:No/1.0936,feet:3.28084*No,radians:1,degrees:No/111325},Fo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/No,degrees:1/111325},Bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},zo=Object.freeze({earthRadius:No,factors:Do,unitsFactors:Fo,areaFactors:Bo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:c,multiLineString:l,multiPoint:f,multiPolygon:h,geometryCollection:p,round:d,radiansToLength:g,lengthToRadians:y,lengthToDegrees:v,bearingToAzimuth:m,radiansToDegrees:A,degreesToRadians:b,convertLength:_,convertArea:w,isNumber:x,isObject:E,validateBBox:O,validateId:S,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Uo=Object.freeze({coordEach:T,coordReduce:P,propEach:M,propReduce:C,featureEach:I,featureReduce:R,coordAll:k,geomEach:j,geomReduce:L,flattenEach:N,flattenReduce:D,segmentEach:F,segmentReduce:B,lineEach:z,lineReduce:U}),Go=Object.freeze({getCoord:V,getCoords:q,containsNumber:H,geojsonType:W,featureOf:X,collectionOf:Y,getGeom:Q,getGeomType:Z,getType:K}),Vo={successCallback:null,verbose:!1},qo={},Ho=it,Wo=at;at.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!gt(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],gt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):dt(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!gt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],gt(t,a=e.leaf?n(o):o)){if(e.leaf||dt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=yt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!dt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:lt,compareMinY:ft,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return st(i=yt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=yt([])).leaf=!1,i.height=r;var s,u,c,l,f=Math.ceil(o/a),h=f*Math.ceil(Math.sqrt(a));for(vt(t,e,n,h,this.compareMinX),s=e;s<=n;s+=h)for(vt(t,s,c=Math.min(s+h-1,n),f,this.compareMinY),u=s;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,r-1));return st(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=ht(a=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<f?(f=c,l=u<l?u:l,s=a):c===f&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),ct(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=yt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,st(n,this.toBBox),st(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=yt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ut(t,0,r,this.toBBox),o=ut(t,r,n,this.toBBox)),s=ht(i)+ht(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:lt,i=t.leaf?this.compareMinY:ft;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=ut(t,0,e,a),u=ut(t,n-e,n,a),c=pt(s)+pt(u);for(i=e;i<n-e;i++)o=t.children[i],ct(s,t.leaf?a(o):o),c+=pt(s);for(i=n-e-1;i>=e;i--)o=t.children[i],ct(u,t.leaf?a(o):o),c+=pt(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)ct(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():st(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Xo=function(t,e,n){var r=t*e,i=Yo*t,o=i-(i-t),a=t-o,s=Yo*e,u=s-(s-e),c=e-u,l=a*c-(r-o*u-a*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]},Yo=+(Math.pow(2,27)+1),Qo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),p=e[c],d=l(p);h<d?(o=f,(u+=1)<n&&(h=l(f=t[u]))):(o=p,(c+=1)<r&&(d=l(p=e[c]))),u<n&&h<d||c>=r?(i=f,(u+=1)<n&&(h=l(f=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c])));for(var g,y,v=i+o,m=v-i,A=o-m,b=A,_=v;u<n&&c<r;)h<d?(i=f,(u+=1)<n&&(h=l(f=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c]))),(A=(o=b)-(m=(v=i+o)-i))&&(a[s++]=A),b=_-((g=_+v)-(y=g-_))+(v-y),_=g;for(;u<n;)(A=(o=b)-(m=(v=(i=f)+o)-i))&&(a[s++]=A),b=_-((g=_+v)-(y=g-_))+(v-y),_=g,(u+=1)<n&&(f=t[u]);for(;c<r;)(A=(o=b)-(m=(v=(i=p)+o)-i))&&(a[s++]=A),b=_-((g=_+v)-(y=g-_))+(v-y),_=g,(c+=1)<r&&(p=e[c]);return b&&(a[s++]=b),_&&(a[s++]=_),s||(a[s++]=0),a.length=s,a},Zo=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Ko=function(t,e){var n=t.length;if(1===n){var r=Xo(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Xo(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){Xo(t[u],e,a);var c=o[1];Zo(c,a[0],o),o[0]&&(i[s++]=o[0]);var l=a[1],f=o[1],h=l+f,p=f-(h-l);o[1]=h,p&&(i[s++]=p)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Jo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),p=-e[c],d=l(p);h<d?(o=f,(u+=1)<n&&(h=l(f=t[u]))):(o=p,(c+=1)<r&&(d=l(p=-e[c]))),u<n&&h<d||c>=r?(i=f,(u+=1)<n&&(h=l(f=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c])));for(var g,y,v=i+o,m=v-i,A=o-m,b=A,_=v;u<n&&c<r;)h<d?(i=f,(u+=1)<n&&(h=l(f=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c]))),(A=(o=b)-(m=(v=i+o)-i))&&(a[s++]=A),b=_-((g=_+v)-(y=g-_))+(v-y),_=g;for(;u<n;)(A=(o=b)-(m=(v=(i=f)+o)-i))&&(a[s++]=A),b=_-((g=_+v)-(y=g-_))+(v-y),_=g,(u+=1)<n&&(f=t[u]);for(;c<r;)(A=(o=b)-(m=(v=(i=p)+o)-i))&&(a[s++]=A),b=_-((g=_+v)-(y=g-_))+(v-y),_=g,(c+=1)<r&&(p=-e[c]);return b&&(a[s++]=b),_&&(a[s++]=_),s||(a[s++]=0),a.length=s,a},$o=mt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(i(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(a,u))):o.push.apply(o,i(e(a,u))),s.push("m"+u);var c=r(n),l=r(o),f="orientation"+t+"Exact",h=["function ",f,"(",s.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",f].join("");return new Function("sum","prod","scale","sub",h)(Qo,Xo,Ko,Jo)}var a=5,s=o(3),u=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:s(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],f=t[2]-r[2],h=e[2]-r[2],p=n[2]-r[2],d=o*l,g=a*c,y=a*s,v=i*l,m=i*c,A=o*s,b=f*(d-g)+h*(y-v)+p*(m-A),_=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(f)+(Math.abs(y)+Math.abs(v))*Math.abs(h)+(Math.abs(m)+Math.abs(A))*Math.abs(p));return b>_||-b>_?b:u(t,e,n,r)}];!function(){for(;c.length<=a;)c.push(o(c.length));for(var e=[],n=["slow"],r=0;r<=a;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=a;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=c[t.length];return e||(e=c[t.length]=o(t.length)),e.apply(void 0,t)}].concat(c)),r=0;r<=a;++r)t.exports[r]=c[r]}()})),ta=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],c=o.length;c>1&&ea(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(s),c=a.length;c>1&&ea(t[a[c-2]],t[a[c-1]],u)>=0;)c-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var l=0,f=(r=0,o.length);r<f;++r)n[l++]=o[r];for(var h=a.length-2;h>0;--h)n[l++]=a[h];return n},ea=$o[3],na=At,ra=At;At.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},na.default=ra;var ia=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i},oa=$o[3],aa=bt,sa=bt;aa.default=sa;var ua=function(t){return t},ca=function(t){if(null==t)return ua;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;u<c;)l[u]=t[u],++u;return l}},la=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},fa=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){r[t<0?~t:t]=1})),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var c=r===n?n:n.concat(r);i[c.start=n.start]=o[c.end=r.end]=c}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=o[l.end=n.end]=l}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n})),n(o,i),n(i,o),e.forEach((function(t){r[t<0?~t:t]||a.push([t])})),a},ha=function(t){return Vt(t,qt.apply(this,arguments))},pa=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,c=0;c<t;++c)a[c]=i;return{set:function(r,o){for(var c=e(r)&u,l=a[c],f=0;l!=i;){if(n(l,r))return s[c]=o;if(++f>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o},maybeSet:function(r,o){for(var c=e(r)&u,l=a[c],f=0;l!=i;){if(n(l,r))return s[c];if(++f>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o},get:function(r,o){for(var c=e(r)&u,l=a[c],f=0;l!=i;){if(n(l,r))return s[c];if(++f>=t)break;l=a[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}},da=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ga=new ArrayBuffer(16),ya=new Float64Array(ga),va=new Uint32Array(ga),ma=function(t){ya[0]=t[0],ya[1]=t[1];var e=va[0]^va[1];return 2147483647&(e<<5^e>>7^va[2]^va[3])},Aa=function(t){function e(t,e,n,r){if(h[n]!==t){h[n]=t;var i=p[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++y,g[n]=1)}else p[n]=e,d[n]=r}}function n(t){return ma(u[t])}function r(t,e){return da(u[t],u[e])}var i,o,a,s,u=t.coordinates,c=t.lines,l=t.rings,f=function(){for(var t=pa(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),h=new Int32Array(u.length),p=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),y=0;for(i=0,o=u.length;i<o;++i)h[i]=p[i]=d[i]=-1;for(i=0,o=c.length;i<o;++i){var v=c[i],m=v[0],A=v[1];for(a=f[m],s=f[++m],++y,g[a]=1;++m<=A;)e(i,a,a=s,s=f[m]);++y,g[s]=1}for(i=0,o=u.length;i<o;++i)h[i]=-1;for(i=0,o=l.length;i<o;++i){var b=l[i],_=b[0]+1,w=b[1];for(e(i,f[w-1],a=f[_-1],s=f[_]);++_<=w;)e(i,a,a=s,s=f[_])}h=p=d=null;var x,E=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*y,ma,da);for(i=0,o=u.length;i<o;++i)g[x=f[i]]&&E.add(u[x]);return E},ba=function(t){var e,n,r,i=Aa(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var f=s[n],h=f[0],p=h,d=f[1],g=i.has(o[h]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:f[1]},f[1]=p,f=f.next=e):(function(t,e,n,r){Ht(t,e,n),Ht(t,e,e+r),Ht(t,e+r,n)}(o,h,d,d-p),o[d]=o[h],g=!0,p=h));return t},_a=function(t){function e(t){var e,n,r,i,o,a,s,u;if(r=p.get(e=c[t[0]]))for(s=0,u=r.length;s<u;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!da(c[n],c[r]))return!1;return!0}(i=r[s],t))return t[0]=i[0],void(t[1]=i[1]);if(o=p.get(n=c[t[1]]))for(s=0,u=o.length;s<u;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!da(c[n],c[o]))return!1;return!0}(a=o[s],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var a=i(t),s=i(e),u=0;u<o;++u)if(!da(c[n+(u+a)%o],c[r+(u+s)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],a=e[1],s=o-n;if(s!==a-r)return!1;for(var u=i(t),l=s-i(e),f=0;f<s;++f)if(!da(c[n+(f+u)%s],c[a-(f+l)%s]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var a=c[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var o,a,s,u,c=t.coordinates,l=t.lines,f=t.rings,h=l.length+f.length;for(delete t.lines,delete t.rings,s=0,u=l.length;s<u;++s)for(o=l[s];o=o.next;)++h;for(s=0,u=f.length;s<u;++s)for(a=f[s];a=a.next;)++h;var p=pa(2*h*1.4,ma,da),d=t.arcs=[];for(s=0,u=l.length;s<u;++s){o=l[s];do{e(o)}while(o=o.next)}for(s=0,u=f.length;s<u;++s)if((a=f[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=p.get(e=c[t[0]]))for(s=0,u=o.length;s<u;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=p.get(e=c[t[0]+i(t)]))for(s=0,u=o.length;s<u;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):p.set(e,[t]),d.push(t)}(a);return t},wa=function(t,e){function n(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var l in t)e(t[l]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Wt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-c)*p),Math.round((t[1]-l)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,u=0,f=t.length,h=new Array(f);++s<f;)n=t[s],o=Math.round((n[0]-c)*p),a=Math.round((n[1]-l)*d),o===r&&a===i||(h[u++]=[r=o,i=a]);for(h.length=u;u<e;)u=h.push([h[0][0],h[0][1]]);return h}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var c=e[0],l=e[1],f=e[2],h=e[3],p=f-c?(n-1)/(f-c):1,d=h-l?(n-1)/(h-l):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var y in t)u(t[y]);return{scale:[1/p,1/d],translate:[c,l]}}(t,o,e),s=_a(ba(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)e(t[l]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,c=pa(1.4*s.arcs.length,Qt,Zt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map((function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)})),delete s.coordinates,u=null;var l={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var f in t)n(t[f]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,c=o[0],l=c[0],f=c[1];++a<u;)r=(c=o[a])[0],i=c[1],r===l&&i===f||(o[s++]=[r-l,i-f],l=r,f=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},xa=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};xa.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},xa.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},xa.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Ea=Ae,Oa=Ae;Ae.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(je(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(je(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},Ae.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Ea.default=Oa,ze.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Qe(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],Qe(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Ye(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Qe(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Qe(t,a=e.leaf?n(o):o)){if(e.leaf||Ye(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ze([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Ye(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:qe,compareMinY:He,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return Ue(i=Ze(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Ze([])).leaf=!1,i.height=r;var s,u,c,l,f=Math.ceil(o/a),h=f*Math.ceil(Math.sqrt(a));for(Ke(t,e,n,h,this.compareMinX),s=e;s<=n;s+=h)for(Ke(t,s,c=Math.min(s+h-1,n),f,this.compareMinY),u=s;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,r-1));return Ue(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=We(a=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<f?(f=c,l=u<l?u:l,s=a):c===f&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Ve(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Ze(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ue(n,this.toBBox),Ue(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ue(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Ge(t,0,r,this.toBBox),o=Ge(t,r,n,this.toBBox)),s=We(i)+We(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:qe,i=t.leaf?this.compareMinY:He;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=Ge(t,0,e,a),u=Ge(t,n-e,n,a),c=Xe(s)+Xe(u);for(i=e;i<n-e;i++)o=t.children[i],Ve(s,t.leaf?a(o):o),c+=Xe(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Ve(u,t.leaf?a(o):o),c+=Xe(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ve(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ue(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Sa=Object.freeze({toMercator:cn,toWgs84:ln}),Ta=6378137,Pa=function(t,e,n){function r(t,n,r,i){var u,c,l=o[t][n],f=o[t][n+1],h=o[r][i],p=o[r][i+1],d=function(t,e,n,r){if(In(t,n)||In(t,r)||In(e,n)||In(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],c=n[1],l=r[0],f=r[1],h=(i-a)*(c-f)-(o-s)*(u-l);return 0===h?null:[((i*s-o*a)*(u-l)-(i-a)*(u*f-c*l))/h,((i*s-o*a)*(c-f)-(o-s)*(u*f-c*l))/h]}(l,f,h,p);if(null!==d&&(u=f[0]!==l[0]?(d[0]-l[0])/(f[0]-l[0]):(d[1]-l[1])/(f[1]-l[1]),c=p[0]!==h[0]?(d[0]-h[0])/(p[0]-h[0]):(d[1]-h[1])/(p[1]-h[1]),!(u>=1||u<=0||c>=1||c<=0))){var g=d,y=!s[g];y&&(s[g]=!0),e?a.push(e(d,t,n,l,f,u,r,i,h,p,c,y)):a.push(d)}}function i(t,e){var n,r,i,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(n=s[0],r=u[0]):(n=u[0],r=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var u=[],c=0;c<o.length;c++)for(var l=0;l<o[c].length-1;l++)u.push(i(c,l));var f=Wo();f.load(u)}for(var h=0;h<o.length;h++)for(var p=0;p<o[h].length-1;p++)if(n)f.search(i(h,p)).forEach((function(t){var e=t.ring,n=t.edge;r(h,p,e,n)}));else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)r(h,p,d,g);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a},Ma=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&Ct(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&mn(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,a=[],s=0;s<i;s++){var u=t.geometry.coordinates[s];kn(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=a.length,f=Pa(t,(function(t,e,n,r,i,o,a,s,u,c,l,f){return[t,e,n,r,i,o,a,s,u,c,l,f]})),h=f.length;if(0==h){var p=[];for(s=0;s<i;s++)p.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Rn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var d=c(p);return e(),n(),d}var g=[],y=[];for(s=0;s<i;s++){g.push([]);for(var v=0;v<t.geometry.coordinates[s].length-1;v++)g[s].push([new Ca(t.geometry.coordinates[s][(v+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,v],[s,(v+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),y.push(new Ia(t.geometry.coordinates[s][v],[s,(v-1).modulo(t.geometry.coordinates[s].length-1)],[s,v],void 0,void 0,!1,!0))}for(s=0;s<h;s++)g[f[s][1]][f[s][2]].push(new Ca(f[s][0],f[s][5],[f[s][1],f[s][2]],[f[s][6],f[s][7]],void 0)),f[s][11]&&y.push(new Ia(f[s][0],[f[s][1],f[s][2]],[f[s][6],f[s][7]],void 0,void 0,!0,!0));var m=y.length;for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)g[s][v].sort((function(t,e){return t.param<e.param?-1:1}));var A=[];for(s=0;s<m;s++)A.push({minX:y[s].coord[0],minY:y[s].coord[1],maxX:y[s].coord[0],maxY:y[s].coord[1],index:s});var b=Wo();for(b.load(A),s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(var _=0;_<g[s][v].length;_++){x=_==g[s][v].length-1?g[s][(v+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:g[s][v][_+1].coord;var w=b.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0];g[s][v][_].nxtIsectAlongEdgeIn=w.index}for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(_=0;_<g[s][v].length;_++){var x=g[s][v][_].coord,E=(w=b.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0]).index;E<l?y[E].nxtIsectAlongRingAndEdge2=g[s][v][_].nxtIsectAlongEdgeIn:kn(y[E].ringAndEdge1,g[s][v][_].ringAndEdgeIn)?y[E].nxtIsectAlongRingAndEdge1=g[s][v][_].nxtIsectAlongEdgeIn:y[E].nxtIsectAlongRingAndEdge2=g[s][v][_].nxtIsectAlongEdgeIn}var O=[];for(s=0,v=0;v<i;v++){var S=s;for(_=0;_<t.geometry.coordinates[v].length-1;_++)y[s].coord[0]<y[S].coord[0]&&(S=s),s++;var T=y[S].nxtIsectAlongRingAndEdge2;for(_=0;_<y.length;_++)if(y[_].nxtIsectAlongRingAndEdge1==S||y[_].nxtIsectAlongRingAndEdge2==S){var P=_;break}var M=Rn([y[P].coord,y[S].coord,y[T].coord],!0)?1:-1;O.push({isect:S,parent:-1,winding:M})}for(O.sort((function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1})),p=[];O.length>0;){var C=O.pop(),I=C.isect,R=C.parent,k=C.winding,j=p.length,L=[y[I].coord],N=I;if(y[I].ringAndEdge1Walkable)var D=y[I].ringAndEdge1,F=y[I].nxtIsectAlongRingAndEdge1;else D=y[I].ringAndEdge2,F=y[I].nxtIsectAlongRingAndEdge2;for(;!kn(y[I].coord,y[F].coord);){L.push(y[F].coord);var B=void 0;for(s=0;s<O.length;s++)if(O[s].isect==F){B=s;break}if(void 0!=B&&O.splice(B,1),kn(D,y[F].ringAndEdge1)){if(D=y[F].ringAndEdge2,y[F].ringAndEdge2Walkable=!1,y[F].ringAndEdge1Walkable){var z={isect:F};Rn([y[N].coord,y[F].coord,y[y[F].nxtIsectAlongRingAndEdge2].coord],1==k)?(z.parent=R,z.winding=-k):(z.parent=j,z.winding=k),O.push(z)}N=F,F=y[F].nxtIsectAlongRingAndEdge2}else D=y[F].ringAndEdge1,y[F].ringAndEdge1Walkable=!1,y[F].ringAndEdge2Walkable&&(z={isect:F},Rn([y[N].coord,y[F].coord,y[y[F].nxtIsectAlongRingAndEdge1].coord],1==k)?(z.parent=R,z.winding=-k):(z.parent=j,z.winding=k),O.push(z)),N=F,F=y[F].nxtIsectAlongRingAndEdge1}L.push(y[F].coord),p.push(o([L],{index:j,parent:R,winding:k,netWinding:void 0}))}return d=c(p),e(),n(),d},Ca=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Ia=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var Ra=Math.PI/180,ka=180/Math.PI,ja=function(t,e){this.lon=t,this.lat=e,this.x=Ra*t,this.y=Ra*e};ja.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ja.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ja(e,t)};var La=function(){this.coords=[],this.length=0};La.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Na=function(t){this.properties=t||{},this.geometries=[]};Na.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Na.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Da=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ja(t.x,t.y),this.end=new ja(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};Da.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ka*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[ka*Math.atan2(i,r),a]},Da.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,f=-180+c,h=360-c,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],y=Math.abs(g-d);y>h&&(g>l&&d<f||d>l&&g<f)?s=!0:y>u&&(u=y)}var v=[];if(s&&u<c){var m=[];v.push(m);for(var A=0;A<n.length;++A){var b=parseFloat(n[A][0]);if(A>0&&Math.abs(b-n[A-1][0])>h){var _=parseFloat(n[A-1][0]),w=parseFloat(n[A-1][1]),x=parseFloat(n[A][0]),E=parseFloat(n[A][1]);if(_>-180&&_<f&&180===x&&A+1<n.length&&n[A-1][0]>-180&&n[A-1][0]<f){m.push([-180,n[A][1]]),A++,m.push([n[A][0],n[A][1]]);continue}if(_>l&&_<180&&-180===x&&A+1<n.length&&n[A-1][0]>l&&n[A-1][0]<180){m.push([180,n[A][1]]),A++,m.push([n[A][0],n[A][1]]);continue}if(_<f&&x>l){var O=_;_=x,x=O;var S=w;w=E,E=S}if(_>l&&x<f&&(x+=360),_<=180&&x>=180&&_<x){var T=(180-_)/(x-_),P=T*E+(1-T)*w;m.push([n[A-1][0]>l?180:-180,P]),(m=[]).push([n[A-1][0]>l?-180:180,P]),v.push(m)}else m=[],v.push(m);m.push([b,n[A][1]])}else m.push([n[A][0],n[A][1]])}}else{var M=[];v.push(M);for(var C=0;C<n.length;++C)M.push([n[C][0],n[C][1]])}for(var I=new Na(this.properties),R=0;R<v.length;++R){var k=new La;I.geometries.push(k);for(var j=v[R],L=0;L<j.length;++L)k.move_to(j[L])}return I};var Fa=Hn;Hn.polyline=Hn,Hn.polygon=function(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Xn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Xn(s=t[a],e)&r))!==o&&n.push(Wn(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n};var Ba=Array.prototype.slice,za={successCallback:null,verbose:!1,polygons:!1},Ua={},Ga=64,Va=16,qa=4,Ha=1,Wa=[],Xa=[],Ya=[],Qa=[],Za=[],Ka=[],Ja=[],$a=[],ts=[],es=[],ns=[],rs=[],is=[],os=[],as=[],ss=[],us=[],cs=[],ls=[],fs=[],hs=[],ps=[],ds=[],gs=[];Ja[85]=es[85]=-1,$a[85]=ns[85]=0,ts[85]=rs[85]=1,ls[85]=ps[85]=1,fs[85]=ds[85]=0,hs[85]=gs[85]=1,Wa[85]=Qa[85]=0,Xa[85]=Za[85]=-1,Ya[85]=as[85]=0,ss[85]=is[85]=0,us[85]=os[85]=1,Ka[85]=cs[85]=1,ps[1]=ps[169]=0,ds[1]=ds[169]=-1,gs[1]=gs[169]=0,is[1]=is[169]=-1,os[1]=os[169]=0,as[1]=as[169]=0,es[4]=es[166]=0,ns[4]=ns[166]=-1,rs[4]=rs[166]=1,ss[4]=ss[166]=1,us[4]=us[166]=0,cs[4]=cs[166]=0,Ja[16]=Ja[154]=0,$a[16]=$a[154]=1,ts[16]=ts[154]=1,Qa[16]=Qa[154]=1,Za[16]=Za[154]=0,Ka[16]=Ka[154]=1,ls[64]=ls[106]=0,fs[64]=fs[106]=1,hs[64]=hs[106]=0,Wa[64]=Wa[106]=-1,Xa[64]=Xa[106]=0,Ya[64]=Ya[106]=1,ls[2]=ls[168]=0,fs[2]=fs[168]=-1,hs[2]=hs[168]=1,ps[2]=ps[168]=0,ds[2]=ds[168]=-1,gs[2]=gs[168]=0,is[2]=is[168]=-1,os[2]=os[168]=0,as[2]=as[168]=0,ss[2]=ss[168]=-1,us[2]=us[168]=0,cs[2]=cs[168]=1,Ja[8]=Ja[162]=0,$a[8]=$a[162]=-1,ts[8]=ts[162]=0,es[8]=es[162]=0,ns[8]=ns[162]=-1,rs[8]=rs[162]=1,is[8]=is[162]=1,os[8]=os[162]=0,as[8]=as[162]=1,ss[8]=ss[162]=1,us[8]=us[162]=0,cs[8]=cs[162]=0,Ja[32]=Ja[138]=0,$a[32]=$a[138]=1,ts[32]=ts[138]=1,es[32]=es[138]=0,ns[32]=ns[138]=1,rs[32]=rs[138]=0,Wa[32]=Wa[138]=1,Xa[32]=Xa[138]=0,Ya[32]=Ya[138]=0,Qa[32]=Qa[138]=1,Za[32]=Za[138]=0,Ka[32]=Ka[138]=1,ps[128]=ps[42]=0,ds[128]=ds[42]=1,gs[128]=gs[42]=1,ls[128]=ls[42]=0,fs[128]=fs[42]=1,hs[128]=hs[42]=0,Wa[128]=Wa[42]=-1,Xa[128]=Xa[42]=0,Ya[128]=Ya[42]=1,Qa[128]=Qa[42]=-1,Za[128]=Za[42]=0,Ka[128]=Ka[42]=0,es[5]=es[165]=-1,ns[5]=ns[165]=0,rs[5]=rs[165]=0,ps[5]=ps[165]=1,ds[5]=ds[165]=0,gs[5]=gs[165]=0,ss[20]=ss[150]=0,us[20]=us[150]=1,cs[20]=cs[150]=1,Qa[20]=Qa[150]=0,Za[20]=Za[150]=-1,Ka[20]=Ka[150]=1,Ja[80]=Ja[90]=-1,$a[80]=$a[90]=0,ts[80]=ts[90]=1,ls[80]=ls[90]=1,fs[80]=fs[90]=0,hs[80]=hs[90]=1,is[65]=is[105]=0,os[65]=os[105]=1,as[65]=as[105]=0,Wa[65]=Wa[105]=0,Xa[65]=Xa[105]=-1,Ya[65]=Ya[105]=0,Ja[160]=Ja[10]=-1,$a[160]=$a[10]=0,ts[160]=ts[10]=1,es[160]=es[10]=-1,ns[160]=ns[10]=0,rs[160]=rs[10]=0,ps[160]=ps[10]=1,ds[160]=ds[10]=0,gs[160]=gs[10]=0,ls[160]=ls[10]=1,fs[160]=fs[10]=0,hs[160]=hs[10]=1,ss[130]=ss[40]=0,us[130]=us[40]=1,cs[130]=cs[40]=1,is[130]=is[40]=0,os[130]=os[40]=1,as[130]=as[40]=0,Wa[130]=Wa[40]=0,Xa[130]=Xa[40]=-1,Ya[130]=Ya[40]=0,Qa[130]=Qa[40]=0,Za[130]=Za[40]=-1,Ka[130]=Ka[40]=1,es[37]=es[133]=0,ns[37]=ns[133]=1,rs[37]=rs[133]=1,ps[37]=ps[133]=0,ds[37]=ds[133]=1,gs[37]=gs[133]=0,Wa[37]=Wa[133]=-1,Xa[37]=Xa[133]=0,Ya[37]=Ya[133]=0,Qa[37]=Qa[133]=1,Za[37]=Za[133]=0,Ka[37]=Ka[133]=0,ss[148]=ss[22]=-1,us[148]=us[22]=0,cs[148]=cs[22]=0,ps[148]=ps[22]=0,ds[148]=ds[22]=-1,gs[148]=gs[22]=1,ls[148]=ls[22]=0,fs[148]=fs[22]=1,hs[148]=hs[22]=1,Qa[148]=Qa[22]=-1,Za[148]=Za[22]=0,Ka[148]=Ka[22]=1,Ja[82]=Ja[88]=0,$a[82]=$a[88]=-1,ts[82]=ts[88]=1,ss[82]=ss[88]=1,us[82]=us[88]=0,cs[82]=cs[88]=1,is[82]=is[88]=-1,os[82]=os[88]=0,as[82]=as[88]=1,ls[82]=ls[88]=0,fs[82]=fs[88]=-1,hs[82]=hs[88]=0,Ja[73]=Ja[97]=0,$a[73]=$a[97]=1,ts[73]=ts[97]=0,es[73]=es[97]=0,ns[73]=ns[97]=-1,rs[73]=rs[97]=0,is[73]=is[97]=1,os[73]=os[97]=0,as[73]=as[97]=0,Wa[73]=Wa[97]=1,Xa[73]=Xa[97]=0,Ya[73]=Ya[97]=1,Ja[145]=Ja[25]=0,$a[145]=$a[25]=-1,ts[145]=ts[25]=0,is[145]=is[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,ps[145]=ps[25]=0,ds[145]=ds[25]=1,gs[145]=gs[25]=1,Qa[145]=Qa[25]=-1,Za[145]=Za[25]=0,Ka[145]=Ka[25]=0,es[70]=es[100]=0,ns[70]=ns[100]=1,rs[70]=rs[100]=0,ss[70]=ss[100]=-1,us[70]=us[100]=0,cs[70]=cs[100]=1,ls[70]=ls[100]=0,fs[70]=fs[100]=-1,hs[70]=hs[100]=1,Wa[70]=Wa[100]=1,Xa[70]=Xa[100]=0,Ya[70]=Ya[100]=0,es[101]=es[69]=0,ns[101]=ns[69]=1,rs[101]=rs[69]=0,Wa[101]=Wa[69]=1,Xa[101]=Xa[69]=0,Ya[101]=Ya[69]=0,ps[149]=ps[21]=0,ds[149]=ds[21]=1,gs[149]=gs[21]=1,Qa[149]=Qa[21]=-1,Za[149]=Za[21]=0,Ka[149]=Ka[21]=0,ss[86]=ss[84]=-1,us[86]=us[84]=0,cs[86]=cs[84]=1,ls[86]=ls[84]=0,fs[86]=fs[84]=-1,hs[86]=hs[84]=1,Ja[89]=Ja[81]=0,$a[89]=$a[81]=-1,ts[89]=ts[81]=0,is[89]=is[81]=1,os[89]=os[81]=0,as[89]=as[81]=1,Ja[96]=Ja[74]=0,$a[96]=$a[74]=1,ts[96]=ts[74]=0,es[96]=es[74]=-1,ns[96]=ns[74]=0,rs[96]=rs[74]=1,ls[96]=ls[74]=1,fs[96]=fs[74]=0,hs[96]=hs[74]=0,Wa[96]=Wa[74]=1,Xa[96]=Xa[74]=0,Ya[96]=Ya[74]=1,Ja[24]=Ja[146]=0,$a[24]=$a[146]=-1,ts[24]=ts[146]=1,ss[24]=ss[146]=1,us[24]=us[146]=0,cs[24]=cs[146]=1,is[24]=is[146]=0,os[24]=os[146]=1,as[24]=as[146]=1,Qa[24]=Qa[146]=0,Za[24]=Za[146]=-1,Ka[24]=Ka[146]=0,es[6]=es[164]=-1,ns[6]=ns[164]=0,rs[6]=rs[164]=1,ss[6]=ss[164]=-1,us[6]=us[164]=0,cs[6]=cs[164]=0,ps[6]=ps[164]=0,ds[6]=ds[164]=-1,gs[6]=gs[164]=1,ls[6]=ls[164]=1,fs[6]=fs[164]=0,hs[6]=hs[164]=0,is[129]=is[41]=0,os[129]=os[41]=1,as[129]=as[41]=1,ps[129]=ps[41]=0,ds[129]=ds[41]=1,gs[129]=gs[41]=0,Wa[129]=Wa[41]=-1,Xa[129]=Xa[41]=0,Ya[129]=Ya[41]=0,Qa[129]=Qa[41]=0,Za[129]=Za[41]=-1,Ka[129]=Ka[41]=0,ss[66]=ss[104]=0,us[66]=us[104]=1,cs[66]=cs[104]=0,is[66]=is[104]=-1,os[66]=os[104]=0,as[66]=as[104]=1,ls[66]=ls[104]=0,fs[66]=fs[104]=-1,hs[66]=hs[104]=0,Wa[66]=Wa[104]=0,Xa[66]=Xa[104]=-1,Ya[66]=Ya[104]=1,Ja[144]=Ja[26]=-1,$a[144]=$a[26]=0,ts[144]=ts[26]=0,ps[144]=ps[26]=1,ds[144]=ds[26]=0,gs[144]=gs[26]=1,ls[144]=ls[26]=0,fs[144]=fs[26]=1,hs[144]=hs[26]=1,Qa[144]=Qa[26]=-1,Za[144]=Za[26]=0,Ka[144]=Ka[26]=1,es[36]=es[134]=0,ns[36]=ns[134]=1,rs[36]=rs[134]=1,ss[36]=ss[134]=0,us[36]=us[134]=1,cs[36]=cs[134]=0,Wa[36]=Wa[134]=0,Xa[36]=Xa[134]=-1,Ya[36]=Ya[134]=1,Qa[36]=Qa[134]=1,Za[36]=Za[134]=0,Ka[36]=Ka[134]=0,Ja[9]=Ja[161]=-1,$a[9]=$a[161]=0,ts[9]=ts[161]=0,es[9]=es[161]=0,ns[9]=ns[161]=-1,rs[9]=rs[161]=0,is[9]=is[161]=1,os[9]=os[161]=0,as[9]=as[161]=0,ps[9]=ps[161]=1,ds[9]=ds[161]=0,gs[9]=gs[161]=1,Ja[136]=0,$a[136]=1,ts[136]=1,es[136]=0,ns[136]=1,rs[136]=0,ss[136]=-1,us[136]=0,cs[136]=1,is[136]=-1,os[136]=0,as[136]=0,ps[136]=0,ds[136]=-1,gs[136]=0,ls[136]=0,fs[136]=-1,hs[136]=1,Wa[136]=1,Xa[136]=0,Ya[136]=0,Qa[136]=1,Za[136]=0,Ka[136]=1,Ja[34]=0,$a[34]=-1,ts[34]=0,es[34]=0,ns[34]=-1,rs[34]=1,ss[34]=1,us[34]=0,cs[34]=0,is[34]=1,os[34]=0,as[34]=1,ps[34]=0,ds[34]=1,gs[34]=1,ls[34]=0,fs[34]=1,hs[34]=0,Wa[34]=-1,Xa[34]=0,Ya[34]=1,Qa[34]=-1,Za[34]=0,Ka[34]=0,Ja[35]=0,$a[35]=1,ts[35]=1,es[35]=0,ns[35]=-1,rs[35]=1,ss[35]=1,us[35]=0,cs[35]=0,is[35]=-1,os[35]=0,as[35]=0,ps[35]=0,ds[35]=-1,gs[35]=0,ls[35]=0,fs[35]=1,hs[35]=0,Wa[35]=-1,Xa[35]=0,Ya[35]=1,Qa[35]=1,Za[35]=0,Ka[35]=1,Ja[153]=0,$a[153]=1,ts[153]=1,is[153]=-1,os[153]=0,as[153]=0,ps[153]=0,ds[153]=-1,gs[153]=0,Qa[153]=1,Za[153]=0,Ka[153]=1,es[102]=0,ns[102]=-1,rs[102]=1,ss[102]=1,us[102]=0,cs[102]=0,ls[102]=0,fs[102]=1,hs[102]=0,Wa[102]=-1,Xa[102]=0,Ya[102]=1,Ja[155]=0,$a[155]=-1,ts[155]=0,is[155]=1,os[155]=0,as[155]=1,ps[155]=0,ds[155]=1,gs[155]=1,Qa[155]=-1,Za[155]=0,Ka[155]=0,es[103]=0,ns[103]=1,rs[103]=0,ss[103]=-1,us[103]=0,cs[103]=1,ls[103]=0,fs[103]=-1,hs[103]=1,Wa[103]=1,Xa[103]=0,Ya[103]=0,Ja[152]=0,$a[152]=1,ts[152]=1,ss[152]=-1,us[152]=0,cs[152]=1,is[152]=-1,os[152]=0,as[152]=0,ps[152]=0,ds[152]=-1,gs[152]=0,ls[152]=0,fs[152]=-1,hs[152]=1,Qa[152]=1,Za[152]=0,Ka[152]=1,Ja[156]=0,$a[156]=-1,ts[156]=1,ss[156]=1,us[156]=0,cs[156]=1,is[156]=-1,os[156]=0,as[156]=0,ps[156]=0,ds[156]=-1,gs[156]=0,ls[156]=0,fs[156]=1,hs[156]=1,Qa[156]=-1,Za[156]=0,Ka[156]=1,Ja[137]=0,$a[137]=1,ts[137]=1,es[137]=0,ns[137]=1,rs[137]=0,is[137]=-1,os[137]=0,as[137]=0,ps[137]=0,ds[137]=-1,gs[137]=0,Wa[137]=1,Xa[137]=0,Ya[137]=0,Qa[137]=1,Za[137]=0,Ka[137]=1,Ja[139]=0,$a[139]=1,ts[139]=1,es[139]=0,ns[139]=-1,rs[139]=0,is[139]=1,os[139]=0,as[139]=0,ps[139]=0,ds[139]=1,gs[139]=0,Wa[139]=-1,Xa[139]=0,Ya[139]=0,Qa[139]=1,Za[139]=0,Ka[139]=1,Ja[98]=0,$a[98]=-1,ts[98]=0,es[98]=0,ns[98]=-1,rs[98]=1,ss[98]=1,us[98]=0,cs[98]=0,is[98]=1,os[98]=0,as[98]=1,ls[98]=0,fs[98]=1,hs[98]=0,Wa[98]=-1,Xa[98]=0,Ya[98]=1,Ja[99]=0,$a[99]=1,ts[99]=0,es[99]=0,ns[99]=-1,rs[99]=1,ss[99]=1,us[99]=0,cs[99]=0,is[99]=-1,os[99]=0,as[99]=1,ls[99]=0,fs[99]=-1,hs[99]=0,Wa[99]=1,Xa[99]=0,Ya[99]=1,es[38]=0,ns[38]=-1,rs[38]=1,ss[38]=1,us[38]=0,cs[38]=0,ps[38]=0,ds[38]=1,gs[38]=1,ls[38]=0,fs[38]=1,hs[38]=0,Wa[38]=-1,Xa[38]=0,Ya[38]=1,Qa[38]=-1,Za[38]=0,Ka[38]=0,es[39]=0,ns[39]=1,rs[39]=1,ss[39]=-1,us[39]=0,cs[39]=0,ps[39]=0,ds[39]=-1,gs[39]=1,ls[39]=0,fs[39]=1,hs[39]=0,Wa[39]=-1,Xa[39]=0,Ya[39]=1,Qa[39]=1,Za[39]=0,Ka[39]=0;var ys=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},vs=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ms=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},As=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},bs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},_s=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ws=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},xs=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Es=[],Os=[],Ss=[],Ts=[],Ps=[],Ms=[],Cs=[],Is=[];Ts[1]=Ps[1]=18,Ts[169]=Ps[169]=18,Ss[4]=Os[4]=12,Ss[166]=Os[166]=12,Es[16]=Is[16]=4,Es[154]=Is[154]=4,Ms[64]=Cs[64]=22,Ms[106]=Cs[106]=22,Ss[2]=Ms[2]=17,Ts[2]=Ps[2]=18,Ss[168]=Ms[168]=17,Ts[168]=Ps[168]=18,Es[8]=Ts[8]=9,Os[8]=Ss[8]=12,Es[162]=Ts[162]=9,Os[162]=Ss[162]=12,Es[32]=Is[32]=4,Os[32]=Cs[32]=1,Es[138]=Is[138]=4,Os[138]=Cs[138]=1,Ps[128]=Is[128]=21,Ms[128]=Cs[128]=22,Ps[42]=Is[42]=21,Ms[42]=Cs[42]=22,Os[5]=Ps[5]=14,Os[165]=Ps[165]=14,Ss[20]=Is[20]=6,Ss[150]=Is[150]=6,Es[80]=Ms[80]=11,Es[90]=Ms[90]=11,Ts[65]=Cs[65]=3,Ts[105]=Cs[105]=3,Es[160]=Ms[160]=11,Os[160]=Ps[160]=14,Es[10]=Ms[10]=11,Os[10]=Ps[10]=14,Ss[130]=Is[130]=6,Ts[130]=Cs[130]=3,Ss[40]=Is[40]=6,Ts[40]=Cs[40]=3,Os[101]=Cs[101]=1,Os[69]=Cs[69]=1,Ps[149]=Is[149]=21,Ps[21]=Is[21]=21,Ss[86]=Ms[86]=17,Ss[84]=Ms[84]=17,Es[89]=Ts[89]=9,Es[81]=Ts[81]=9,Es[96]=Cs[96]=0,Os[96]=Ms[96]=15,Es[74]=Cs[74]=0,Os[74]=Ms[74]=15,Es[24]=Ss[24]=8,Ts[24]=Is[24]=7,Es[146]=Ss[146]=8,Ts[146]=Is[146]=7,Os[6]=Ms[6]=15,Ss[6]=Ps[6]=16,Os[164]=Ms[164]=15,Ss[164]=Ps[164]=16,Ts[129]=Is[129]=7,Ps[129]=Cs[129]=20,Ts[41]=Is[41]=7,Ps[41]=Cs[41]=20,Ss[66]=Cs[66]=2,Ts[66]=Ms[66]=19,Ss[104]=Cs[104]=2,Ts[104]=Ms[104]=19,Es[144]=Ps[144]=10,Ms[144]=Is[144]=23,Es[26]=Ps[26]=10,Ms[26]=Is[26]=23,Os[36]=Is[36]=5,Ss[36]=Cs[36]=2,Os[134]=Is[134]=5,Ss[134]=Cs[134]=2,Es[9]=Ps[9]=10,Os[9]=Ts[9]=13,Es[161]=Ps[161]=10,Os[161]=Ts[161]=13,Os[37]=Is[37]=5,Ps[37]=Cs[37]=20,Os[133]=Is[133]=5,Ps[133]=Cs[133]=20,Ss[148]=Ps[148]=16,Ms[148]=Is[148]=23,Ss[22]=Ps[22]=16,Ms[22]=Is[22]=23,Es[82]=Ss[82]=8,Ts[82]=Ms[82]=19,Es[88]=Ss[88]=8,Ts[88]=Ms[88]=19,Es[73]=Cs[73]=0,Os[73]=Ts[73]=13,Es[97]=Cs[97]=0,Os[97]=Ts[97]=13,Es[145]=Ts[145]=9,Ps[145]=Is[145]=21,Es[25]=Ts[25]=9,Ps[25]=Is[25]=21,Os[70]=Cs[70]=1,Ss[70]=Ms[70]=17,Os[100]=Cs[100]=1,Ss[100]=Ms[100]=17,Es[34]=Ts[34]=9,Os[34]=Ss[34]=12,Ps[34]=Is[34]=21,Ms[34]=Cs[34]=22,Es[136]=Is[136]=4,Os[136]=Cs[136]=1,Ss[136]=Ms[136]=17,Ts[136]=Ps[136]=18,Es[35]=Is[35]=4,Os[35]=Ss[35]=12,Ts[35]=Ps[35]=18,Ms[35]=Cs[35]=22,Es[153]=Is[153]=4,Ts[153]=Ps[153]=18,Os[102]=Ss[102]=12,Ms[102]=Cs[102]=22,Es[155]=Ts[155]=9,Ps[155]=Is[155]=23,Os[103]=Cs[103]=1,Ss[103]=Ms[103]=17,Es[152]=Is[152]=4,Ss[152]=Ms[152]=17,Ts[152]=Ps[152]=18,Es[156]=Ss[156]=8,Ts[156]=Ps[156]=18,Ms[156]=Is[156]=23,Es[137]=Is[137]=4,Os[137]=Cs[137]=1,Ts[137]=Ps[137]=18,Es[139]=Is[139]=4,Os[139]=Ts[139]=13,Ps[139]=Cs[139]=20,Es[98]=Ts[98]=9,Os[98]=Ss[98]=12,Ms[98]=Cs[98]=22,Es[99]=Cs[99]=0,Os[99]=Ss[99]=12,Ts[99]=Ms[99]=19,Os[38]=Ss[38]=12,Ps[38]=Is[38]=21,Ms[38]=Cs[38]=22,Os[39]=Is[39]=5,Ss[39]=Ps[39]=16,Ms[39]=Cs[39]=22;var Rs=[];Rs[1]=Rs[169]=ys,Rs[4]=Rs[166]=vs,Rs[16]=Rs[154]=ms,Rs[64]=Rs[106]=As,Rs[168]=Rs[2]=bs,Rs[162]=Rs[8]=_s,Rs[138]=Rs[32]=ws,Rs[42]=Rs[128]=xs,Rs[5]=Rs[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Rs[20]=Rs[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Rs[80]=Rs[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Rs[65]=Rs[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Rs[160]=Rs[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Rs[130]=Rs[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Rs[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Rs[101]=Rs[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Rs[149]=Rs[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Rs[86]=Rs[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Rs[89]=Rs[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Rs[96]=Rs[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[24]=Rs[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Rs[6]=Rs[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Rs[129]=Rs[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Rs[66]=Rs[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[144]=Rs[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Rs[36]=Rs[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Rs[9]=Rs[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Rs[37]=Rs[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Rs[148]=Rs[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Rs[82]=Rs[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Rs[73]=Rs[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Rs[145]=Rs[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Rs[70]=Rs[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[34]=function(t){return[xs(t),_s(t)]},Rs[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Rs[136]=function(t){return[ws(t),bs(t)]},Rs[153]=function(t){return[ms(t),ys(t)]},Rs[102]=function(t){return[vs(t),As(t)]},Rs[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Rs[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[152]=function(t){return[ms(t),bs(t)]},Rs[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Rs[137]=function(t){return[ws(t),ys(t)]},Rs[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Rs[98]=function(t){return[_s(t),As(t)]},Rs[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[38]=function(t){return[vs(t),xs(t)]},Rs[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ks=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ks.buildId=function(t){return t.join(",")},ks.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},ks.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},ks.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ks.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=br(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},ks.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ks.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ks.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var js=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};js.prototype.getSymetric=function(){return this.symetric||(this.symetric=new js(this.to,this.from),this.symetric.symetric=this),this.symetric},js.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},js.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},js.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},js.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},js.prototype.compareTo=function(t){return br(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Ls=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Ns={length:{configurable:!0}};Ls.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Ls.prototype.get=function(t){return this.edges[t]},Ns.length.get=function(){return this.edges.length},Ls.prototype.forEach=function(t){this.edges.forEach(t)},Ls.prototype.map=function(t){return this.edges.map(t)},Ls.prototype.some=function(t){return this.edges.some(t)},Ls.prototype.isValid=function(){return!0},Ls.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=br(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},Ls.prototype.toMultiPoint=function(){return f(this.edges.map((function(t){return t.from.coordinates})))},Ls.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Ls.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=le(this.toPolygon())},Ls.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map((function(t){return t[0]})),r=t.geometry.coordinates.map((function(t){return t[1]})),i=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&_r(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(r(s))&&(i&&!_r(n,a)||(i=e))}})),i},Ls.prototype.inside=function(t){return Ct(t,this.toPolygon())},Object.defineProperties(Ls.prototype,Ns);var Ds=function(){this.edges=[],this.nodes={}};Ds.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new Ds;return N(t,(function(t){X(t,"LineString","Graph::fromGeoJson"),P(t,(function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n}))})),e},Ds.prototype.getNode=function(t){var e=ks.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ks(t)),n},Ds.prototype.addEdge=function(t,e){var n=new js(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},Ds.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},Ds.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},Ds.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},Ds.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},Ds.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,c=void 0;a.label===e&&(u=a),s.label===e&&(c=s),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},Ds.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},Ds.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},Ds.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},Ds.prototype._findEdgeRing=function(t){var e=t,n=new Ls;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},Ds.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},Ds.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var Fs=mt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Bs=(Fs.shim,mt((function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r}))),zs=(Bs.supported,Bs.unsupported,mt((function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Bs(t))return!!Bs(o)&&(t=r.call(t),o=r.call(o),i(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=Fs(t),l=Fs(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),s=c.length-1;s>=0;s--)if(c[s]!=l[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!i(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}}))),Us=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Rr};Us.prototype.compare=function(t,e){if(t.type!==e.type||!Ir(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Cr(t),i=Cr(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Us.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Us.prototype.compareLine=function(t,e,n,r){if(!Ir(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Us.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Us.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Us.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Us.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Us.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Us.prototype.removePseudo=function(t){return t};var Gs=Us,Vs=mt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),qs=mt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(l),s=0,u=0;u<l;u++)a[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)a[u]+=this.dataset[c][u];s++}}if(s>0){for(u=0;u<l;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Hs=mt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Ws=mt((function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=Hs;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Xs=mt((function(t){t.exports&&(t.exports={DBSCAN:Vs,KMEANS:qs,OPTICS:Ws,PriorityQueue:Hs})})),Ys=(Xs.DBSCAN,Xs.KMEANS,Xs.OPTICS,Xs.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i}),Qs=Ys,Zs=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ks=Ys,Js=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},$s=function(t,e){var n=t[0].length?Qs:Zs,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,c=0,l=[],f=0;f<i;f++){for(var h=1/0,p=0;p<u;p++){var d=n(t[f],r[p]);d<=h&&(h=d)}s[f]=h}for(var g=0;g<i;g++)c+=s[g];for(var y=0;y<i;y++)l[y]={i:y,v:t[y],pr:s[y]/c,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var v=1;v<i;v++)l[v].cs=l[v-1].cs+l[v].pr;for(var m=Math.random(),A=0;A<i-1&&l[A++].cs<m;);r.push(l[A-1].v)}return r},tu=1e4,eu=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,c=r||tu,l=t.length,f=t[0].length,h=f>0,p=[];if(n)i="kmrand"==n?Js(t,e):"kmpp"==n?$s(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,i.push(t[g]))}do{jr(e,0,p);for(var y=0;y<l;y++){for(var v=1/0,m=0,A=0;A<e;A++)(s=h?Ks(t[y],i[A]):Math.abs(t[y]-i[A]))<=v&&(v=s,m=A);a[y]=m,p[m]++}for(var b=[],_=(o=[],0);_<e;_++)b[_]=h?jr(f,0,b[_]):0,o[_]=i[_];if(h){for(var w=0;w<e;w++)i[w]=[];for(var x=0;x<l;x++)for(var E=b[a[x]],O=t[x],S=0;S<f;S++)E[S]+=O[S];u=!0;for(var T=0;T<e;T++){for(var P=i[T],M=b[T],C=o[T],I=p[T],R=0;R<f;R++)P[R]=M[R]/I||0;if(u)for(var k=0;k<f;k++)if(C[k]!=P[k]){u=!1;break}}}else{for(var j=0;j<l;j++)b[a[j]]+=t[j];for(var L=0;L<e;L++)i[L]=b[L]/p[L]||0;u=!0;for(var N=0;N<e;N++)if(o[N]!=i[N]){u=!1;break}}u=u||--c<=0}while(!u);return{it:tu-c,k:e,idxs:a,centroids:i}},nu={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||nu.heuristics.manhattan,o=r.closest||!1,a=new Br((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return Nr(u);u.closed=!0;for(var c=t.neighbors(u),l=0,f=c.length;l<f;++l){var h=c[l];if(!h.closed&&!h.isWall()){var p=u.g+h.getCost(u),d=h.visited;(!d||p<h.g)&&(h.visited=!0,h.parent=u,h.h=h.h||i(h,n),h.g=p,h.f=h.g+h.h,t.markDirty(h),o&&(h.h<s.h||h.h===s.h&&h.g<s.g)&&(s=h),d?a.rescoreElement(h):a.push(h))}}}return o?Nr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Dr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)nu.cleanNode(this.nodes[t])},Dr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)nu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Dr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Dr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Dr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Fr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Fr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Fr.prototype.isWall=function(){return 0===this.weight},Br.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var ru=function(t){return function(){return t}};Gr.prototype={constructor:Gr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Wr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(qr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Hr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Hr(this,n),n=(t=n).U),n.C=!1,r.C=!0,qr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Wr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,qr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Hr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,qr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Hr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,qr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Hr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var iu,ou,au,su,uu,cu=[],lu=[],fu=1e-6,hu=1e-12;li.prototype={constructor:li,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return $r(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,l=(c=e[i[u]]).left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&ui(s,a,l)<0&&t.push([s.data,a.data,l.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],f=u*u+c*c;f<l&&(l=f,a=s.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var pu=function(){function t(t){return new li(t.map((function(r,i){var o=[Math.round(e(r,i,t)/fu)*fu,Math.round(n(r,i,t)/fu)*fu];return o.index=i,o.data=r,o})),r)}var e=zr,n=Ur,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:ru(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ru(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},du=Object.freeze({randomPosition:vi,randomPoint:mi,randomPolygon:Ai,randomLineString:bi}),gu=Object.freeze({getCluster:wi,clusterEach:xi,clusterReduce:Ei,createBins:Oi,applyFilter:Si,propertiesContainsFilter:Ti,filterProperties:Pi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var vu=function(){},mu=function(){},Au={MAX_VALUE:{configurable:!0}};mu.isNaN=function(t){return Number.isNaN(t)},mu.doubleToLongBits=function(t){return t},mu.longBitsToDouble=function(t){return t},mu.isInfinite=function(t){return!Number.isFinite(t)},Au.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(mu,Au);var bu=function(){},_u=function(){},wu=function(){},xu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Eu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};xu.prototype.setOrdinate=function(t,e){switch(t){case xu.X:this.x=e;break;case xu.Y:this.y=e;break;case xu.Z:this.z=e;break;default:throw new vu("Invalid ordinate index: "+t)}},xu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!yu.equalsWithTolerance(this.x,e.x,n)&&!!yu.equalsWithTolerance(this.y,e.y,n)}},xu.prototype.getOrdinate=function(t){switch(t){case xu.X:return this.x;case xu.Y:return this.y;case xu.Z:return this.z}throw new vu("Invalid ordinate index: "+t)},xu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||mu.isNaN(this.z))&&mu.isNaN(t.z)},xu.prototype.equals=function(t){return t instanceof xu&&this.equals2D(t)},xu.prototype.equalInZ=function(t,e){return yu.equalsWithTolerance(this.z,t.z,e)},xu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},xu.prototype.clone=function(){},xu.prototype.copy=function(){return new xu(this)},xu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},xu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},xu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},xu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+xu.hashCode(this.x))+xu.hashCode(this.y)},xu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},xu.prototype.interfaces_=function(){return[bu,_u,Mi]},xu.prototype.getClass=function(){return xu},xu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=mu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Eu.DimensionalComparator.get=function(){return Ou},Eu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Eu.NULL_ORDINATE.get=function(){return mu.NaN},Eu.X.get=function(){return 0},Eu.Y.get=function(){return 1},Eu.Z.get=function(){return 2},Object.defineProperties(xu,Eu);var Ou=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new vu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Ou.prototype.compare=function(t,e){var n=t,r=e,i=Ou.compare(n.x,r.x);if(0!==i)return i;var o=Ou.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Ou.compare(n.z,r.z)},Ou.prototype.interfaces_=function(){return[wu]},Ou.prototype.getClass=function(){return Ou},Ou.compare=function(t,e){return t<e?-1:t>e?1:mu.isNaN(t)?mu.isNaN(e)?0:-1:mu.isNaN(e)?1:0};var Su=function(){};Su.prototype.create=function(){},Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su};var Tu=function(){},Pu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu},Tu.toLocationSymbol=function(t){switch(t){case Tu.EXTERIOR:return"e";case Tu.BOUNDARY:return"b";case Tu.INTERIOR:return"i";case Tu.NONE:return"-"}throw new vu("Unknown location value: "+t)},Pu.INTERIOR.get=function(){return 0},Pu.BOUNDARY.get=function(){return 1},Pu.EXTERIOR.get=function(){return 2},Pu.NONE.get=function(){return-1},Object.defineProperties(Tu,Pu);var Mu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Cu=function(){},Iu={LOG_10:{configurable:!0}};Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu},Cu.log10=function(t){var e=Math.log(t);return mu.isInfinite(e)||mu.isNaN(e)?e:e/Cu.LOG_10},Cu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Cu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Cu.wrap=function(t,e){return t<0?e- -t%e:t%e},Cu.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},Cu.average=function(t,e){return(t+e)/2},Iu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Cu,Iu);var Ru=function(t){this.str=t};Ru.prototype.append=function(t){this.str+=t},Ru.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Ru.prototype.toString=function(t){return this.str};var ku=function(t){this.value=t};ku.prototype.intValue=function(){return this.value},ku.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ku.isNaN=function(t){return Number.isNaN(t)};var ju=function(){};ju.isWhitespace=function(t){return t<=32&&t>=0||127===t},ju.toUpperCase=function(t){return t.toUpperCase()};var Lu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},Nu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Lu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Lu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Lu.magnitude(n._hi),i=Lu.TEN.pow(r);(n=n.divide(i)).gt(Lu.TEN)?(n=n.divide(Lu.TEN),r+=1):n.lt(Lu.ONE)&&(n=n.multiply(Lu.TEN),r-=1);for(var o=r+1,a=new Ru,s=Lu.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),n=n.subtract(Lu.valueOf(c)).multiply(Lu.TEN),l&&n.selfAdd(Lu.TEN);var h=!0,p=Lu.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(h=!1),!h)break}return e[0]=r,a.toString()},Lu.prototype.sqr=function(){return this.multiply(this)},Lu.prototype.doubleValue=function(){return this._hi+this._lo},Lu.prototype.subtract=function(){if(arguments[0]instanceof Lu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Lu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Lu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Lu.prototype.selfSubtract=function(){if(arguments[0]instanceof Lu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Lu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Lu.prototype.min=function(t){return this.le(t)?this:t},Lu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/n,f=(i=(c=Lu.SPLIT*u)-(i=c-u))*(a=(f=Lu.SPLIT*n)-(a=f-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(c=(this._hi-l-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+c,this}},Lu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Lu.prototype.divide=function(){if(arguments[0]instanceof Lu){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=Lu.SPLIT*o)-(e=a-o)),u=e*(r=(u=Lu.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new Lu(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return mu.isNaN(c)?Lu.createNaN():Lu.copy(this).selfDivide(c,0)}},Lu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Lu.prototype.pow=function(t){if(0===t)return Lu.valueOf(1);var e=new Lu(this),n=Lu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Lu.prototype.ceil=function(){if(this.isNaN())return Lu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Lu(t,e)},Lu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Lu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Lu.prototype.setValue=function(){if(arguments[0]instanceof Lu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Lu.prototype.max=function(t){return this.ge(t)?this:t},Lu.prototype.sqrt=function(){if(this.isZero())return Lu.valueOf(0);if(this.isNegative())return Lu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Lu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Lu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,h=null,p=null,d=null,g=null,y=null;p=this._hi+u,f=this._lo+c,d=p-(g=p-this._hi),h=f-(y=f-this._lo);var v=(l=p+(g=(d=u-g+(this._hi-d))+f))+(g=(h=c-y+(this._lo-h))+(g+(p-l))),m=g+(l-v);return this._hi=v,this._lo=m,this}},Lu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=Lu.SPLIT*this._hi)-this._hi,c=Lu.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},Lu.prototype.selfSqr=function(){return this.selfMultiply(this)},Lu.prototype.floor=function(){if(this.isNaN())return Lu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Lu(t,e)},Lu.prototype.negate=function(){return this.isNaN()?this:new Lu(-this._hi,-this._lo)},Lu.prototype.clone=function(){},Lu.prototype.multiply=function(){if(arguments[0]instanceof Lu){var t=arguments[0];return t.isNaN()?Lu.createNaN():Lu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return mu.isNaN(e)?Lu.createNaN():Lu.copy(this).selfMultiply(e,0)}},Lu.prototype.isNaN=function(){return mu.isNaN(this._hi)},Lu.prototype.intValue=function(){return Math.trunc(this._hi)},Lu.prototype.toString=function(){var t=Lu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Lu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Lu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Lu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Lu.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=Lu.SPLIT*i)-(t=o-i)),n=(s=Lu.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new Lu(u,i-u+o)},Lu.prototype.toSciNotation=function(){if(this.isZero())return Lu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Lu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Lu.prototype.abs=function(){return this.isNaN()?Lu.NaN:this.isNegative()?this.negate():new Lu(this)},Lu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Lu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Lu.prototype.add=function(){if(arguments[0]instanceof Lu){var t=arguments[0];return Lu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Lu.copy(this).selfAdd(e)}},Lu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Lu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Lu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Lu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Lu.prototype.trunc=function(){return this.isNaN()?Lu.NaN:this.isPositive()?this.floor():this.ceil()},Lu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Lu.prototype.interfaces_=function(){return[Mi,bu,_u]},Lu.prototype.getClass=function(){return Lu},Lu.sqr=function(t){return Lu.valueOf(t).selfMultiply(t)},Lu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Lu.parse(t)}if("number"==typeof arguments[0])return new Lu(arguments[0])},Lu.sqrt=function(t){return Lu.valueOf(t).sqrt()},Lu.parse=function(t){for(var e=0,n=t.length;ju.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Lu,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,ju.isDigit(c)){var l=c-"0";o.selfMultiply(Lu.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=ku.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var h=o,p=a-s-u;if(0===p)h=o;else if(p>0){var d=Lu.TEN.pow(p);h=o.divide(d)}else if(p<0){var g=Lu.TEN.pow(-p);h=o.multiply(g)}return r?h.negate():h},Lu.createNaN=function(){return new Lu(mu.NaN,mu.NaN)},Lu.copy=function(t){return new Lu(t)},Lu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Lu.stringOfChar=function(t,e){for(var n=new Ru,r=0;r<e;r++)n.append(t);return n.toString()},Nu.PI.get=function(){return new Lu(3.141592653589793,12246467991473532e-32)},Nu.TWO_PI.get=function(){return new Lu(6.283185307179586,24492935982947064e-32)},Nu.PI_2.get=function(){return new Lu(1.5707963267948966,6123233995736766e-32)},Nu.E.get=function(){return new Lu(2.718281828459045,14456468917292502e-32)},Nu.NaN.get=function(){return new Lu(mu.NaN,mu.NaN)},Nu.EPS.get=function(){return 123259516440783e-46},Nu.SPLIT.get=function(){return 134217729},Nu.MAX_PRINT_DIGITS.get=function(){return 32},Nu.TEN.get=function(){return Lu.valueOf(10)},Nu.ONE.get=function(){return Lu.valueOf(1)},Nu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Nu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Lu,Nu);var Du=function(){},Fu={DP_SAFE_EPSILON:{configurable:!0}};Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du},Du.orientationIndex=function(t,e,n){var r=Du.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Lu.valueOf(e.x).selfAdd(-t.x),o=Lu.valueOf(e.y).selfAdd(-t.y),a=Lu.valueOf(n.x).selfAdd(-e.x),s=Lu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Du.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Du.intersection=function(t,e,n,r){var i=Lu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Lu.valueOf(e.x).selfSubtract(t.x)),o=Lu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Lu.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Lu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Lu.valueOf(t.y).selfSubtract(n.y)),u=Lu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Lu.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=Lu.valueOf(t.x).selfAdd(Lu.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=Lu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Lu.valueOf(t.y).selfSubtract(n.y)),h=Lu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Lu.valueOf(t.x).selfSubtract(n.x)),p=f.subtract(h).selfDivide(a).doubleValue(),d=Lu.valueOf(n.y).selfAdd(Lu.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new xu(l,d)},Du.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return Du.signum(a);r=i+o}else{if(!(i<0))return Du.signum(a);if(o>=0)return Du.signum(a);r=-i-o}var s=Du.DP_SAFE_EPSILON*r;return a>=s||-a>=s?Du.signum(a):2},Du.signum=function(t){return t>0?1:t<0?-1:0},Fu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Du,Fu);var Bu=function(){},zu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};zu.X.get=function(){return 0},zu.Y.get=function(){return 1},zu.Z.get=function(){return 2},zu.M.get=function(){return 3},Bu.prototype.setOrdinate=function(t,e,n){},Bu.prototype.size=function(){},Bu.prototype.getOrdinate=function(t,e){},Bu.prototype.getCoordinate=function(){},Bu.prototype.getCoordinateCopy=function(t){},Bu.prototype.getDimension=function(){},Bu.prototype.getX=function(t){},Bu.prototype.clone=function(){},Bu.prototype.expandEnvelope=function(t){},Bu.prototype.copy=function(){},Bu.prototype.getY=function(t){},Bu.prototype.toCoordinateArray=function(){},Bu.prototype.interfaces_=function(){return[_u]},Bu.prototype.getClass=function(){return Bu},Object.defineProperties(Bu,zu);var Uu=function(){},Gu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uu),Vu=function(){};Vu.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},Vu.getProperty=function(t){return{"line.separator":"\n"}[t]};var qu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof xu&&arguments[1]instanceof xu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],g=f.y-h.y,y=h.x-f.x,v=f.x*h.y-h.x*f.y,m=p.y-d.y,A=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-A*v,this.y=m*v-g*b,this.w=g*A-m*y}};qu.prototype.getY=function(){var t=this.y/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new Gu;return t},qu.prototype.getX=function(){var t=this.x/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new Gu;return t},qu.prototype.getCoordinate=function(){var t=new xu;return t.x=this.getX(),t.y=this.getY(),t},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,f=(o*c-u*a)/l,h=(s*a-i*c)/l;if(mu.isNaN(f)||mu.isInfinite(f)||mu.isNaN(h)||mu.isInfinite(h))throw new Gu;return new xu(f,h)};var Hu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof xu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Wu={serialVersionUID:{configurable:!0}};Hu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Hu.prototype.equals=function(t){if(!(t instanceof Hu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Hu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Hu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Hu(e,r,n,i)},Hu.prototype.isNull=function(){return this._maxx<this._minx},Hu.prototype.getMaxX=function(){return this._maxx},Hu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Hu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Hu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Hu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof xu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Hu.prototype.getMinY=function(){return this._miny},Hu.prototype.getMinX=function(){return this._minx},Hu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Hu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Hu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Hu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Hu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Hu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Hu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Hu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Hu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Hu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Hu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Hu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Hu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof xu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Hu.prototype.centre=function(){return this.isNull()?null:new xu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Hu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Hu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Hu.prototype.getMaxY=function(){return this._maxy},Hu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Hu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+xu.hashCode(this._minx))+xu.hashCode(this._maxx))+xu.hashCode(this._miny))+xu.hashCode(this._maxy)},Hu.prototype.interfaces_=function(){return[bu,Mi]},Hu.prototype.getClass=function(){return Hu},Hu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<s))}},Wu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Hu,Wu);var Xu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Yu=function(t){this.geometryFactory=t||new vl};Yu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Xu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Xu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Zu[n]&&(e=Zu[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Yu.prototype.write=function(t){return this.extractGeometry(t)},Yu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Qu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Qu[e].apply(this,[t])+")"};var Qu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Qu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Qu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Qu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Qu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Qu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Qu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Qu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Qu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Zu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Xu.spaces);return this.geometryFactory.createPoint(new xu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Zu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Xu.spaces),r.push(new xu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Xu.spaces),r.push(new xu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Xu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Zu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Xu.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Xu.trimParens,"$1"),n=Zu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Xu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Zu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Ku=function(t){this.parser=new Yu(t)};Ku.prototype.write=function(t){return this.parser.write(t)},Ku.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ju=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),$u=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ju),tc=function(){};tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.shouldNeverReachHere=function(){if(0===arguments.length)tc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new $u("Should never reach here"+(null!==t?": "+t:""))}},tc.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],tc.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new $u:new $u(e)},tc.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],tc.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new $u("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ec=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new xu,this._intPt[1]=new xu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ec.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ec.prototype.getTopologySummary=function(){var t=new Ru;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ec.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ec.prototype.getIntersectionNum=function(){return this._result},ec.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ec.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ec.prototype.setPrecisionModel=function(t){this._precisionModel=t},ec.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ec.prototype.getIntersection=function(t){return this._intPt[t]},ec.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ec.prototype.hasIntersection=function(){return this._result!==ec.NO_INTERSECTION},ec.prototype.getEdgeDistance=function(t,e){return ec.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ec.prototype.isCollinear=function(){return this._result===ec.COLLINEAR_INTERSECTION},ec.prototype.toString=function(){return Ku.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ku.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ec.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ec.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ec.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return tc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ec.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return tc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nc.DONT_INTERSECT.get=function(){return 0},nc.DO_INTERSECT.get=function(){return 1},nc.COLLINEAR.get=function(){return 2},nc.NO_INTERSECTION.get=function(){return 0},nc.POINT_INTERSECTION.get=function(){return 1},nc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ec,nc);var rc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Hu(this._inputLines[0][0],this._inputLines[0][1]),n=new Hu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Hu.intersects(n,r,e)&&0===ac.orientationIndex(n,r,e)&&0===ac.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=qu.intersection(t,n,r,i)}catch(a){if(!(a instanceof Gu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new xu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Du.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);Vu.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Vu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new xu(t),o=new xu(e),a=new xu(n),s=new xu(r),u=new xu;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Hu.intersects(e,n,r),a=Hu.intersects(e,n,i),s=Hu.intersects(r,i,e),u=Hu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,p=((o>c?o:c)+(s<f?s:f))/2,d=((a>l?a:l)+(u<h?u:h))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Hu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=ac.orientationIndex(e,n,r),a=ac.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=ac.orientationIndex(r,i,e),u=ac.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new xu(r):0===a?this._intPt[0]=new xu(i):0===s?this._intPt[0]=new xu(e):0===u&&(this._intPt[0]=new xu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=ac.distancePointLine(t,n,r),a=ac.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=ac.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=ac.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(ec),ic=function(){};ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ic.signOfDet2x2(r,i,o,a)},ic.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var oc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};oc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ic.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},oc.prototype.isPointInPolygon=function(){return this.getLocation()!==Tu.EXTERIOR},oc.prototype.getLocation=function(){return this._isPointOnSegment?Tu.BOUNDARY:this._crossingCount%2==1?Tu.INTERIOR:Tu.EXTERIOR},oc.prototype.isOnSegment=function(){return this._isPointOnSegment},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.locatePointInRing=function(){if(arguments[0]instanceof xu&&Mu(arguments[1],Bu)){for(var t=arguments[1],e=new oc(arguments[0]),n=new xu,r=new xu,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof xu&&arguments[1]instanceof Array){for(var o=arguments[1],a=new oc(arguments[0]),s=1;s<o.length;s++){var u=o[s],c=o[s-1];if(a.countSegment(u,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var ac=function(){},sc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.orientationIndex=function(t,e,n){return Du.orientationIndex(t,e,n)},ac.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Mu(arguments[0],Bu)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new xu,c=new xu,l=new xu;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var h=0,p=1;p<s-1;p++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(p+1,l),l.x-=f,h+=c.x*(u.y-l.y);return h/2}},ac.distanceLineLine=function(t,e,n,r){if(t.equals(e))return ac.distancePointLine(t,n,r);if(n.equals(r))return ac.distancePointLine(r,t,e);var i=!1;if(Hu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Cu.min(ac.distancePointLine(t,n,r),ac.distancePointLine(e,n,r),ac.distancePointLine(n,t,e),ac.distancePointLine(r,t,e)):0},ac.isPointInRing=function(t,e){return ac.locatePointInRing(t,e)!==Tu.EXTERIOR},ac.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new xu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},ac.isCCW=function(t){var e=t.length-1;if(e<3)throw new vu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=ac.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},ac.locatePointInRing=function(t,e){return oc.locatePointInRing(t,e)},ac.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},ac.computeOrientation=function(t,e,n){return ac.orientationIndex(t,e,n)},ac.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new vu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=ac.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},ac.isOnLine=function(t,e){for(var n=new rc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},sc.CLOCKWISE.get=function(){return-1},sc.RIGHT.get=function(){return ac.CLOCKWISE},sc.COUNTERCLOCKWISE.get=function(){return 1},sc.LEFT.get=function(){return ac.COUNTERCLOCKWISE},sc.COLLINEAR.get=function(){return 0},sc.STRAIGHT.get=function(){return ac.COLLINEAR},Object.defineProperties(ac,sc);var uc=function(){};uc.prototype.filter=function(t){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var cc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},lc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cc.prototype.isGeometryCollection=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION},cc.prototype.getFactory=function(){return this._factory},cc.prototype.getGeometryN=function(t){return this},cc.prototype.getArea=function(){return 0},cc.prototype.isRectangle=function(){return!1},cc.prototype.equals=function(){if(arguments[0]instanceof cc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof cc))return!1;var n=e;return this.equalsExact(n)}},cc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cc.prototype.geometryChanged=function(){this.apply(cc.geometryChangedFilter)},cc.prototype.geometryChangedAction=function(){this._envelope=null},cc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cc.prototype.getLength=function(){return 0},cc.prototype.getNumGeometries=function(){return 1},cc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},cc.prototype.getUserData=function(){return this._userData},cc.prototype.getSRID=function(){return this._SRID},cc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION)throw new vu("This method does not support GeometryCollection arguments")},cc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},cc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Hu(this._envelope)},cc.prototype.setSRID=function(t){this._SRID=t},cc.prototype.setUserData=function(t){this._userData=t},cc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},cc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cc.SORTINDEX_MULTIPOINT||this.getSortIndex()===cc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cc.SORTINDEX_MULTIPOLYGON},cc.prototype.interfaces_=function(){return[_u,bu,Mi]},cc.prototype.getClass=function(){return cc},cc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},lc.serialVersionUID.get=function(){return 0x799ea46522854c00},lc.SORTINDEX_POINT.get=function(){return 0},lc.SORTINDEX_MULTIPOINT.get=function(){return 1},lc.SORTINDEX_LINESTRING.get=function(){return 2},lc.SORTINDEX_LINEARRING.get=function(){return 3},lc.SORTINDEX_MULTILINESTRING.get=function(){return 4},lc.SORTINDEX_POLYGON.get=function(){return 5},lc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},lc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},lc.geometryChangedFilter.get=function(){return fc},Object.defineProperties(cc,lc);var fc=function(){};fc.interfaces_=function(){return[uc]},fc.filter=function(t){t.geometryChangedAction()};var hc=function(){};hc.prototype.filter=function(t){},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var pc=function(){},dc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};pc.prototype.isInBoundary=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},dc.Mod2BoundaryNodeRule.get=function(){return gc},dc.EndPointBoundaryNodeRule.get=function(){return yc},dc.MultiValentEndPointBoundaryNodeRule.get=function(){return vc},dc.MonoValentEndPointBoundaryNodeRule.get=function(){return mc},dc.MOD2_BOUNDARY_RULE.get=function(){return new gc},dc.ENDPOINT_BOUNDARY_RULE.get=function(){return new yc},dc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vc},dc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mc},dc.OGC_SFS_BOUNDARY_RULE.get=function(){return pc.MOD2_BOUNDARY_RULE},Object.defineProperties(pc,dc);var gc=function(){};gc.prototype.isInBoundary=function(t){return t%2==1},gc.prototype.interfaces_=function(){return[pc]},gc.prototype.getClass=function(){return gc};var yc=function(){};yc.prototype.isInBoundary=function(t){return t>0},yc.prototype.interfaces_=function(){return[pc]},yc.prototype.getClass=function(){return yc};var vc=function(){};vc.prototype.isInBoundary=function(t){return t>1},vc.prototype.interfaces_=function(){return[pc]},vc.prototype.getClass=function(){return vc};var mc=function(){};mc.prototype.isInBoundary=function(t){return 1===t},mc.prototype.interfaces_=function(){return[pc]},mc.prototype.getClass=function(){return mc};var Ac=function(){};Ac.prototype.add=function(){},Ac.prototype.addAll=function(){},Ac.prototype.isEmpty=function(){},Ac.prototype.iterator=function(){},Ac.prototype.size=function(){},Ac.prototype.toArray=function(){},Ac.prototype.remove=function(){};var bc=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),_c=function(){};_c.prototype.hasNext=function(){},_c.prototype.next=function(){},_c.prototype.remove=function(){};var wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Ac);(Ci.prototype=new Error).name="NoSuchElementException";var xc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ac&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Ac]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ec(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new bc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wc),Ec=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ci;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(_c),Oc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof xu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof xu){var f=arguments[0],h=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(f>0&&this.get(f-1).equals2D(h))return null;if(f<p&&this.get(f).equals2D(h))return null}}t.prototype.add.call(this,f,h)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],v=arguments[3],m=1;y>v&&(m=-1);for(var A=y;A!==v;A+=m)this.add(d[A],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new xu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(xc),Sc=function(){},Tc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Tc.ForwardComparator.get=function(){return Pc},Tc.BidirectionalComparator.get=function(){return Mc},Tc.coordArrayType.get=function(){return new Array(0).fill(null)},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc},Sc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Sc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Sc.indexOf(r,e)<0)return r}return null},Sc.scroll=function(t,e){var n=Sc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Vu.arraycopy(t,n,r,0,t.length-n),Vu.arraycopy(t,0,r,t.length-n,n),Vu.arraycopy(r,0,t,0,t.length)},Sc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Sc.intersection=function(t,e){for(var n=new Oc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Sc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Sc.removeRepeatedPoints=function(t){return Sc.hasRepeatedPoints(t)?new Oc(t,!1).toCoordinateArray():t},Sc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Sc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Sc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new xu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new xu(r[i+u])},Sc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Sc.envelope=function(t){for(var e=new Hu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Sc.toCoordinateArray=function(t){return t.toArray(Sc.coordArrayType)},Sc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Sc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Sc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Sc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Sc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Sc.extract=function(t,e,n){e=Cu.clamp(e,0,t.length);var r=(n=Cu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Sc,Tc);var Pc=function(){};Pc.prototype.compare=function(t,e){return Sc.compare(t,e)},Pc.prototype.interfaces_=function(){return[wu]},Pc.prototype.getClass=function(){return Pc};var Mc=function(){};Mc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Sc.compare(n,r);return Sc.isEqualReversed(n,r)?0:i},Mc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Sc.increasingDirection(n),o=Sc.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},Mc.prototype.interfaces_=function(){return[wu]},Mc.prototype.getClass=function(){return Mc};var Cc=function(){};Cc.prototype.get=function(){},Cc.prototype.put=function(){},Cc.prototype.size=function(){},Cc.prototype.values=function(){},Cc.prototype.entrySet=function(){};var Ic=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Cc);(Ii.prototype=new Error).name="OperationNotSupported",(Ri.prototype=new Ac).contains=function(){};var Rc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ac&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new kc(this)},e}(Ri),kc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ci;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Ii},e}(_c),jc=0;(Fi.prototype=new Ic).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Fi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:jc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:jc,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Fi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(ji(t)===Ni(ji(ji(t)))){var e=Di(ji(ji(t)));1===ki(e)?(Li(ji(t),jc),Li(e,jc),Li(ji(ji(t)),1),t=ji(ji(t))):(t===Di(ji(t))&&(t=ji(t),this.rotateLeft(t)),Li(ji(t),jc),Li(ji(ji(t)),1),this.rotateRight(ji(ji(t))))}else{var n=Ni(ji(ji(t)));1===ki(n)?(Li(ji(t),jc),Li(n,jc),Li(ji(ji(t)),1),t=ji(ji(t))):(t===Ni(ji(t))&&(t=ji(t),this.rotateRight(t)),Li(ji(t),jc),Li(ji(ji(t)),1),this.rotateLeft(ji(ji(t))))}this.root_.color=jc},Fi.prototype.values=function(){var t=new xc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Fi.successor(e));)t.add(e.value);return t},Fi.prototype.entrySet=function(){var t=new Rc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Fi.successor(e));)t.add(e);return t},Fi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Fi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Fi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Fi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Fi.prototype.size=function(){return this.size_};var Lc=function(){};Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Bi.prototype=new Ri,(zi.prototype=new Bi).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},zi.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},zi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},zi.prototype.remove=function(t){throw new Ii},zi.prototype.size=function(){return this.array_.length},zi.prototype.isEmpty=function(){return 0===this.array_.length},zi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},zi.prototype.iterator=function(){return new Nc(this)};var Nc=function(t){this.treeSet_=t,this.position_=0};Nc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ci;return this.treeSet_.array_[this.position_++]},Nc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Nc.prototype.remove=function(){throw new Ii};var Dc=function(){};Dc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Dc.asList=function(t){for(var e=new xc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Fc=function(){},Bc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bc.P.get=function(){return 0},Bc.L.get=function(){return 1},Bc.A.get=function(){return 2},Bc.FALSE.get=function(){return-1},Bc.TRUE.get=function(){return-2},Bc.DONTCARE.get=function(){return-3},Bc.SYM_FALSE.get=function(){return"F"},Bc.SYM_TRUE.get=function(){return"T"},Bc.SYM_DONTCARE.get=function(){return"*"},Bc.SYM_P.get=function(){return"0"},Bc.SYM_L.get=function(){return"1"},Bc.SYM_A.get=function(){return"2"},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc},Fc.toDimensionSymbol=function(t){switch(t){case Fc.FALSE:return Fc.SYM_FALSE;case Fc.TRUE:return Fc.SYM_TRUE;case Fc.DONTCARE:return Fc.SYM_DONTCARE;case Fc.P:return Fc.SYM_P;case Fc.L:return Fc.SYM_L;case Fc.A:return Fc.SYM_A}throw new vu("Unknown dimension value: "+t)},Fc.toDimensionValue=function(t){switch(ju.toUpperCase(t)){case Fc.SYM_FALSE:return Fc.FALSE;case Fc.SYM_TRUE:return Fc.TRUE;case Fc.SYM_DONTCARE:return Fc.DONTCARE;case Fc.SYM_P:return Fc.P;case Fc.SYM_L:return Fc.L;case Fc.SYM_A:return Fc.A}throw new vu("Unknown dimension symbol: "+t)},Object.defineProperties(Fc,Bc);var zc=function(){};zc.prototype.filter=function(t){},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Uc=function(){};Uc.prototype.filter=function(t,e){},Uc.prototype.isDone=function(){},Uc.prototype.isGeometryChanged=function(){},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Gc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new vu("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Hu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Fc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Fc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new zi(Dc.asList(this._geometries)),n=new zi(Dc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),c=i.getGeometryN(s),l=u.compareToSameClass(c,r);if(0!==l)return l;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(Mu(arguments[0],hc))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Mu(arguments[0],Uc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Mu(arguments[0],zc)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Mu(arguments[0],uc)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(cc),Vc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Fc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Gc),qc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=pc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};qc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qc.prototype.getBoundary=function(){return this._geom instanceof Qc?this.boundaryLineString(this._geom):this._geom instanceof Vc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qc.prototype.computeBoundaryCoordinates=function(t){var e=new xc;this._endpointMap=new Fi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Sc.toCoordinateArray(e)},qc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Hc,this._endpointMap.put(t,e)),e.count++},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc},qc.getBoundary=function(){return 1===arguments.length?new qc(arguments[0]).getBoundary():2===arguments.length?new qc(arguments[0],arguments[1]).getBoundary():void 0};var Hc=function(){this.count=null};Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Wc=function(){},Xc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wc.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wc.NEWLINE}catch(t){if(!(t instanceof Ui))throw t;tc.shouldNeverReachHere()}return o}},Wc.split=function(t,e){for(var n=e.length,r=new xc,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Wc.toString=function(){if(1===arguments.length){var t=arguments[0];return Wc.SIMPLE_ORDINATE_FORMAT.format(t)}},Wc.spaces=function(t){return Wc.chars(" ",t)},Xc.NEWLINE.get=function(){return Vu.getProperty("line.separator")},Xc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wc,Xc);var Yc=function(){};Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Yc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Bu.X)===t.getOrdinate(e-1,Bu.X)&&t.getOrdinate(0,Bu.Y)===t.getOrdinate(e-1,Bu.Y)},Yc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!mu.isNaN(a)||!mu.isNaN(s)))return!1}return!0},Yc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Yc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Yc.copy(e,i-1,r,o,1);return r},Yc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Yc.swap(t,r,e-r)},Yc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Yc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Yc.copyCoord(t,e+o,n,r+o)},Yc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Ru;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Yc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Yc.createClosedRing(t,e,4):e.getOrdinate(0,Bu.X)===e.getOrdinate(n-1,Bu.X)&&e.getOrdinate(0,Bu.Y)===e.getOrdinate(n-1,Bu.Y)?e:Yc.createClosedRing(t,e,n+1)},Yc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Yc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Yc.copy(e,0,r,o,1);return r};var Qc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Hu:this._points.expandEnvelope(new Hu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Yc.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Fc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ac.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Yc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Mu(arguments[0],hc))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Mu(arguments[0],Uc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(Mu(arguments[0],zc)||Mu(arguments[0],uc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new vu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(cc),Zc=function(){};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Kc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Hu;var t=new Hu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Fc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Mu(arguments[0],hc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Mu(arguments[0],Uc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(Mu(arguments[0],zc)||Mu(arguments[0],uc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(cc),Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc};var $c=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new vu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new vu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(ac.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(ac.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o===(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Vu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Sc.minCoordinate(e.getCoordinates());Sc.scroll(r,i),Vu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],ac.isCCW(e.getCoordinates())===n&&Sc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),c=i.getNumInteriorRing(),l=0;l<u&&l<c;){var f=this.getInteriorRingN(l),h=i.getInteriorRingN(l),p=f.compareToSameClass(h,r);if(0!==p)return p;l++}return l<u?1:l<c?-1:0}},e.prototype.apply=function(t){if(Mu(t,hc)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Mu(t,Uc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Mu(t,zc))t.filter(this);else if(Mu(t,uc)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(cc),tl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Fc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Gc),el=function(t){function e(e,n){e instanceof xu&&n instanceof vl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Fc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Yc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new vu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new vu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Qc),nl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new xc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Gc),rl=function(t){this._factory=t||null,this._isUserDataCopied=!1},il={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rl.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},rl.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Gc?this.editGeometryCollection(t,e):t instanceof $c?this.editPolygon(t,e):t instanceof Kc||t instanceof Qc?e.edit(t,this._factory):(tc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rl.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new xc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===tl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Vc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===nl?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rl.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new xc,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.GeometryEditorOperation=function(){},il.NoOpGeometryOperation.get=function(){return ol},il.CoordinateOperation.get=function(){return al},il.CoordinateSequenceOperation.get=function(){return sl},Object.defineProperties(rl,il);var ol=function(){};ol.prototype.edit=function(t,e){return t},ol.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},ol.prototype.getClass=function(){return ol};var al=function(){};al.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof el?e.createLinearRing(n):t instanceof Qc?e.createLineString(n):t instanceof Kc?n.length>0?e.createPoint(n[0]):e.createPoint():t},al.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},al.prototype.getClass=function(){return al};var sl=function(){};sl.prototype.edit=function(t,e){return t instanceof el?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},sl.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},sl.prototype.getClass=function(){return sl};var ul=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new xu}else if(Mu(arguments[0],Bu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new xu}},cl={serialVersionUID:{configurable:!0}};ul.prototype.setOrdinate=function(t,e,n){switch(e){case Bu.X:this._coordinates[t].x=n;break;case Bu.Y:this._coordinates[t].y=n;break;case Bu.Z:this._coordinates[t].z=n;break;default:throw new vu("invalid ordinateIndex")}},ul.prototype.size=function(){return this._coordinates.length},ul.prototype.getOrdinate=function(t,e){switch(e){case Bu.X:return this._coordinates[t].x;case Bu.Y:return this._coordinates[t].y;case Bu.Z:return this._coordinates[t].z}return mu.NaN},ul.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ul.prototype.getCoordinateCopy=function(t){return new xu(this._coordinates[t])},ul.prototype.getDimension=function(){return this._dimension},ul.prototype.getX=function(t){return this._coordinates[t].x},ul.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ul(t,this._dimension)},ul.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ul.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ul(t,this._dimension)},ul.prototype.toString=function(){if(this._coordinates.length>0){var t=new Ru(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ul.prototype.getY=function(t){return this._coordinates[t].y},ul.prototype.toCoordinateArray=function(){return this._coordinates},ul.prototype.interfaces_=function(){return[Bu,Mi]},ul.prototype.getClass=function(){return ul},cl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ul,cl);var ll=function(){},fl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ll.prototype.readResolve=function(){return ll.instance()},ll.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ul(arguments[0]);if(Mu(arguments[0],Bu))return new ul(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ul(t):new ul(t,e)}},ll.prototype.interfaces_=function(){return[Su,Mi]},ll.prototype.getClass=function(){return ll},ll.instance=function(){return ll.instanceObject},fl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fl.instanceObject.get=function(){return new ll},Object.defineProperties(ll,fl);var hl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new xc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rc;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Cc),pl=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gl){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},dl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pl.prototype.equals=function(t){if(!(t instanceof pl))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pl.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new ku(n).compareTo(new ku(r))},pl.prototype.getScale=function(){return this._scale},pl.prototype.isFloating=function(){return this._modelType===pl.FLOATING||this._modelType===pl.FLOATING_SINGLE},pl.prototype.getType=function(){return this._modelType},pl.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pl.FLOATING?t="Floating":this._modelType===pl.FLOATING_SINGLE?t="Floating-Single":this._modelType===pl.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pl.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return mu.isNaN(t)||this._modelType===pl.FLOATING_SINGLE?t:this._modelType===pl.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof xu){var e=arguments[0];if(this._modelType===pl.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pl.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pl.FLOATING?t=16:this._modelType===pl.FLOATING_SINGLE?t=6:this._modelType===pl.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pl.prototype.setScale=function(t){this._scale=Math.abs(t)},pl.prototype.interfaces_=function(){return[Mi,bu]},pl.prototype.getClass=function(){return pl},pl.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},dl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},dl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pl,dl);var gl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},yl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gl.prototype.readResolve=function(){return gl.nameToTypeMap.get(this._name)},gl.prototype.toString=function(){return this._name},gl.prototype.interfaces_=function(){return[Mi]},gl.prototype.getClass=function(){return gl},yl.serialVersionUID.get=function(){return-552860263173159e4},yl.nameToTypeMap.get=function(){return new hl},Object.defineProperties(gl,yl),pl.Type=gl,pl.FIXED=new gl("FIXED"),pl.FLOATING=new gl("FLOATING"),pl.FLOATING_SINGLE=new gl("FLOATING SINGLE");var vl=function t(){this._precisionModel=new pl,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Mu(arguments[0],Su)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pl&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ml={serialVersionUID:{configurable:!0}};vl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new xu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new xu(t.getMinX(),t.getMinY()),new xu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new xu(t.getMinX(),t.getMinY()),new xu(t.getMinX(),t.getMaxY()),new xu(t.getMaxX(),t.getMaxY()),new xu(t.getMaxX(),t.getMinY()),new xu(t.getMinX(),t.getMinY())]),null)},vl.prototype.createLineString=function(t){return t?t instanceof Array?new Qc(this.getCoordinateSequenceFactory().create(t),this):Mu(t,Bu)?new Qc(t,this):void 0:new Qc(this.getCoordinateSequenceFactory().create([]),this)},vl.prototype.createMultiLineString=function(){return 0===arguments.length?new Vc(null,this):1===arguments.length?new Vc(arguments[0],this):void 0},vl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(vl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $c)return this.createMultiPolygon(vl.toPolygonArray(t));if(s instanceof Qc)return this.createMultiLineString(vl.toLineStringArray(t));if(s instanceof Kc)return this.createMultiPoint(vl.toPointArray(t));tc.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},vl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},vl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Mu(arguments[0],Bu))return new Kc(arguments[0],this)}},vl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},vl.prototype.createPolygon=function(){if(0===arguments.length)return new $c(null,null,this);if(1===arguments.length){if(Mu(arguments[0],Bu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof el){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $c(arguments[0],arguments[1],this)},vl.prototype.getSRID=function(){return this._SRID},vl.prototype.createGeometryCollection=function(){return 0===arguments.length?new Gc(null,this):1===arguments.length?new Gc(arguments[0],this):void 0},vl.prototype.createGeometry=function(t){return new rl(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},vl.prototype.getPrecisionModel=function(){return this._precisionModel},vl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Mu(arguments[0],Bu))return new el(arguments[0],this)}},vl.prototype.createMultiPolygon=function(){return 0===arguments.length?new nl(null,this):1===arguments.length?new nl(arguments[0],this):void 0},vl.prototype.createMultiPoint=function(){if(0===arguments.length)return new tl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new tl(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Mu(arguments[0],Bu)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Yc.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},vl.prototype.interfaces_=function(){return[Mi]},vl.prototype.getClass=function(){return vl},vl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.getDefaultCoordinateSequenceFactory=function(){return ll.instance()},vl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ml.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(vl,ml);var Al=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bl=function(t){this.geometryFactory=t||new vl};bl.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!_l[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Al.indexOf(n)?_l[n].apply(this,[e.coordinates]):"GeometryCollection"===n?_l[n].apply(this,[e.geometries]):_l[n].apply(this,[e])},bl.prototype.write=function(t){var e=t.getGeometryType();if(!wl[e])throw new Error("Geometry is not supported");return wl[e].apply(this,[t])};var _l={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!_l[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=_l.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new xu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new xu(t[0],t[1]),new xu(t[2],t[1]),new xu(t[2],t[3]),new xu(t[0],t[3]),new xu(t[0],t[1])])},Point:function(t){var e=new xu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_l.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=_l.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_l.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=_l.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=_l.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(_l.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wl={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wl.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(wl.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wl.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=wl.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(wl[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},xl=function(t){this.geometryFactory=t||new vl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bl(this.geometryFactory)};xl.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pl.FIXED&&this.reducePrecision(e),e},xl.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var El=function(){this.parser=new bl(this.geometryFactory)};El.prototype.write=function(t){return this.parser.write(t)};var Ol=function(){},Sl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Ol.opposite=function(t){return t===Ol.LEFT?Ol.RIGHT:t===Ol.RIGHT?Ol.LEFT:t},Sl.ON.get=function(){return 0},Sl.LEFT.get=function(){return 1},Sl.RIGHT.get=function(){return 2},Object.defineProperties(Ol,Sl),(Gi.prototype=new Error).name="EmptyStackException",(Vi.prototype=new wc).add=function(t){return this.array_.push(t),!0},Vi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Vi.prototype.push=function(t){return this.array_.push(t),t},Vi.prototype.pop=function(t){if(0===this.array_.length)throw new Gi;return this.array_.pop()},Vi.prototype.peek=function(){if(0===this.array_.length)throw new Gi;return this.array_[this.array_.length-1]},Vi.prototype.empty=function(){return 0===this.array_.length},Vi.prototype.isEmpty=function(){return this.empty()},Vi.prototype.search=function(t){return this.array_.indexOf(t)},Vi.prototype.size=function(){return this.array_.length},Vi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Tl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Tl.prototype.getCoordinate=function(){return this._minCoord},Tl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Tl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ac.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ac.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ac.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Tl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ol.LEFT;return n[e].y<n[e+1].y&&(r=Ol.RIGHT),r},Tl.prototype.getEdge=function(){return this._orientedDe},Tl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Tl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Tl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}tc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ol.LEFT&&(this._orientedDe=this._minDe.getSym())},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl};var Pl=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new xu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Ju),Ml=function(){this.array_=[]};Ml.prototype.addLast=function(t){this.array_.push(t)},Ml.prototype.removeFirst=function(){return this.array_.shift()},Ml.prototype.isEmpty=function(){return 0===this.array_.length};var Cl=function(){this._finder=null,this._dirEdgeList=new xc,this._nodes=new xc,this._rightMostCoord=null,this._env=null,this._finder=new Tl};Cl.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Cl.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Cl.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Pl("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Cl.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ol.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Cl.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Cl.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ol.RIGHT)>=1&&e.getDepth(Ol.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Cl.prototype.computeDepths=function(t){var e=new Rc,n=new Ml,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Cl.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Cl.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Hu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Cl.prototype.addReachable=function(t){var e=new Vi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Cl.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ol.LEFT,t.getDepth(Ol.RIGHT)),e.setDepth(Ol.RIGHT,t.getDepth(Ol.LEFT))},Cl.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Cl.prototype.getNodes=function(){return this._nodes},Cl.prototype.getDirectedEdges=function(){return this._dirEdgeList},Cl.prototype.interfaces_=function(){return[bu]},Cl.prototype.getClass=function(){return Cl};var Il=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ol.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ol.ON]=o,this.location[Ol.LEFT]=a,this.location[Ol.RIGHT]=s}};Il.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Il.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Tu.NONE)return!1;return!0},Il.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Tu.NONE&&(this.location[e]=t)},Il.prototype.isLine=function(){return 1===this.location.length},Il.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ol.ON]=this.location[Ol.ON],e[Ol.LEFT]=Tu.NONE,e[Ol.RIGHT]=Tu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Tu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Il.prototype.getLocations=function(){return this.location},Il.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ol.LEFT];this.location[Ol.LEFT]=this.location[Ol.RIGHT],this.location[Ol.RIGHT]=t},Il.prototype.toString=function(){var t=new Ru;return this.location.length>1&&t.append(Tu.toLocationSymbol(this.location[Ol.LEFT])),t.append(Tu.toLocationSymbol(this.location[Ol.ON])),this.location.length>1&&t.append(Tu.toLocationSymbol(this.location[Ol.RIGHT])),t.toString()},Il.prototype.setLocations=function(t,e,n){this.location[Ol.ON]=t,this.location[Ol.LEFT]=e,this.location[Ol.RIGHT]=n},Il.prototype.get=function(t){return t<this.location.length?this.location[t]:Tu.NONE},Il.prototype.isArea=function(){return this.location.length>1},Il.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Tu.NONE)return!0;return!1},Il.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ol.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Il.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Tu.NONE)},Il.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Il.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var Rl=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Il(e),this.elt[1]=new Il(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Il(n.elt[0]),this.elt[1]=new Il(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Il(Tu.NONE),this.elt[1]=new Il(Tu.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Il(o,a,s),this.elt[1]=new Il(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Il(Tu.NONE,Tu.NONE,Tu.NONE),this.elt[1]=new Il(Tu.NONE,Tu.NONE,Tu.NONE),this.elt[u].setLocations(c,l,f)}};Rl.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Rl.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Rl.prototype.isNull=function(t){return this.elt[t].isNull()},Rl.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Rl.prototype.isLine=function(t){return this.elt[t].isLine()},Rl.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Il(t.elt[e]):this.elt[e].merge(t.elt[e])},Rl.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Rl.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ol.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Rl.prototype.toString=function(){var t=new Ru;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Rl.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Rl.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Rl.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ol.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Rl.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Rl.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Rl.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Il(this.elt[t].location[0]))},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl},Rl.toLineLabel=function(t){for(var e=new Rl(Tu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var kl=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new xc,this._pts=new xc,this._label=new Rl(Tu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new xc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};kl.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ac.isCCW(this._ring.getCoordinates())},kl.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},kl.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Pl("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pl("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();tc.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},kl.prototype.getLinearRing=function(){return this._ring},kl.prototype.getCoordinate=function(t){return this._pts.get(t)},kl.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},kl.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},kl.prototype.isHole=function(){return this._isHole},kl.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},kl.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ac.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},kl.prototype.addHole=function(t){this._holes.add(t)},kl.prototype.isShell=function(){return null===this._shell},kl.prototype.getLabel=function(){return this._label},kl.prototype.getEdges=function(){return this._edges},kl.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},kl.prototype.getShell=function(){return this._shell},kl.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ol.RIGHT);if(n===Tu.NONE)return null;if(this._label.getLocation(e)===Tu.NONE)return this._label.setLocation(e,n),null}},kl.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},kl.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl};var jl=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kl),Ll=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new xc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new jl(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kl),Nl=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Nl.prototype.setVisited=function(t){this._isVisited=t},Nl.prototype.setInResult=function(t){this._isInResult=t},Nl.prototype.isCovered=function(){return this._isCovered},Nl.prototype.isCoveredSet=function(){return this._isCoveredSet},Nl.prototype.setLabel=function(t){this._label=t},Nl.prototype.getLabel=function(){return this._label},Nl.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Nl.prototype.updateIM=function(t){tc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Nl.prototype.isInResult=function(){return this._isInResult},Nl.prototype.isVisited=function(){return this._isVisited},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl};var Dl=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Rl(0,Tu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Tu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Tu.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Rl(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Rl)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===Tu.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Tu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Tu.BOUNDARY:n=Tu.INTERIOR;break;case Tu.INTERIOR:default:n=Tu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nl),Fl=function(){this.nodeMap=new Fi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fl.prototype.find=function(t){return this.nodeMap.get(t)},Fl.prototype.addNode=function(){if(arguments[0]instanceof xu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Dl){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fl.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fl.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fl.prototype.values=function(){return this.nodeMap.values()},Fl.prototype.getBoundaryNodes=function(t){for(var e=new xc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Tu.BOUNDARY&&e.add(r)}return e},Fl.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl};var Bl=function(){},zl={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.isNorthern=function(t){return t===Bl.NE||t===Bl.NW},Bl.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Bl.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Bl.isInHalfPlane=function(t,e){return e===Bl.SE?t===Bl.SE||t===Bl.SW:t===e||t===e+1},Bl.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Bl.NE:Bl.SE:e>=0?Bl.NW:Bl.SW}if(arguments[0]instanceof xu&&arguments[1]instanceof xu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new vu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Bl.NE:Bl.SE:r.y>=n.y?Bl.NW:Bl.SW}},zl.NE.get=function(){return 0},zl.NW.get=function(){return 1},zl.SW.get=function(){return 2},zl.SE.get=function(){return 3},Object.defineProperties(Bl,zl);var Ul=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ul.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ac.computeOrientation(t._p0,t._p1,this._p1)},Ul.prototype.getDy=function(){return this._dy},Ul.prototype.getCoordinate=function(){return this._p0},Ul.prototype.setNode=function(t){this._node=t},Ul.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ul.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ul.prototype.getDirectedCoordinate=function(){return this._p1},Ul.prototype.getDx=function(){return this._dx},Ul.prototype.getLabel=function(){return this._label},Ul.prototype.getEdge=function(){return this._edge},Ul.prototype.getQuadrant=function(){return this._quadrant},Ul.prototype.getNode=function(){return this._node},Ul.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ul.prototype.computeLabel=function(t){},Ul.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Bl.quadrant(this._dx,this._dy),tc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ul.prototype.interfaces_=function(){return[bu]},Ul.prototype.getClass=function(){return Ul};var Gl=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Rl(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pl("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ol.LEFT)===Tu.INTERIOR&&this._label.getLocation(e,Ol.RIGHT)===Tu.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ol.LEFT]+"/"+this._depth[Ol.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Tu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Tu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ol.LEFT&&(r=-1);var i=Ol.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Tu.EXTERIOR&&e===Tu.INTERIOR?1:t===Tu.INTERIOR&&e===Tu.EXTERIOR?-1:0},e}(Ul),Vl=function(){};Vl.prototype.createNode=function(t){return new Dl(t,null)},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var ql=function(){if(this._edges=new xc,this._nodes=null,this._edgeEndList=new xc,0===arguments.length)this._nodes=new Fl(new Vl);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fl(t)}};ql.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},ql.prototype.find=function(t){return this._nodes.find(t)},ql.prototype.addNode=function(){if(arguments[0]instanceof Dl){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof xu){var e=arguments[0];return this._nodes.addNode(e)}},ql.prototype.getNodeIterator=function(){return this._nodes.iterator()},ql.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},ql.prototype.debugPrintln=function(t){Vu.out.println(t)},ql.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Tu.BOUNDARY},ql.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},ql.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&ac.computeOrientation(t,e,r)===ac.COLLINEAR&&Bl.quadrant(t,e)===Bl.quadrant(n,r)},ql.prototype.getEdgeEnds=function(){return this._edgeEndList},ql.prototype.debugPrint=function(t){Vu.out.print(t)},ql.prototype.getEdgeIterator=function(){return this._edges.iterator()},ql.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},ql.prototype.insertEdge=function(t){this._edges.add(t)},ql.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},ql.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Gl(n,!0),i=new Gl(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},ql.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},ql.prototype.getNodes=function(){return this._nodes.values()},ql.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Hl=function(){this._geometryFactory=null,this._shellList=new xc;var t=arguments[0];this._geometryFactory=t};Hl.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Hl.prototype.computePolygons=function(t){for(var e=new xc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Hl.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Pl("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Hl.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new xc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Hl.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Hl.prototype.buildMaximalEdgeRings=function(t){for(var e=new xc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Ll(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Hl.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Hl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Hl.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(r)&&ac.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},Hl.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return tc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Hl.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ql.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new xc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var Wl=function(){};Wl.prototype.getBounds=function(){},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var Xl=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xl.prototype.getItem=function(){return this._item},Xl.prototype.getBounds=function(){return this._bounds},Xl.prototype.interfaces_=function(){return[Wl,Mi]},Xl.prototype.getClass=function(){return Xl};var Yl=function(){this._size=null,this._items=null,this._size=0,this._items=new xc,this._items.add(null)};Yl.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Yl.prototype.size=function(){return this._size},Yl.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Yl.prototype.clear=function(){this._size=0,this._items.clear()},Yl.prototype.isEmpty=function(){return 0===this._size},Yl.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var Ql=function(){};Ql.prototype.visitItem=function(t){},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var Zl=function(){};Zl.prototype.insert=function(t,e){},Zl.prototype.remove=function(t,e){},Zl.prototype.query=function(){},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Kl=function(){if(this._childBoundables=new xc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Jl={serialVersionUID:{configurable:!0}};Kl.prototype.getLevel=function(){return this._level},Kl.prototype.size=function(){return this._childBoundables.size()},Kl.prototype.getChildBoundables=function(){return this._childBoundables},Kl.prototype.addChildBoundable=function(t){tc.isTrue(null===this._bounds),this._childBoundables.add(t)},Kl.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Kl.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Kl.prototype.interfaces_=function(){return[Wl,Mi]},Kl.prototype.getClass=function(){return Kl},Jl.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Kl,Jl);var $l=function(){};$l.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$l.min=function(t){return $l.sort(t),t.get(0)},$l.sort=function(t,e){var n=t.toArray();e?Dc.sort(n,e):Dc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$l.singletonList=function(t){var e=new xc;return e.add(t),e};var tf=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tf.prototype.expandToQueue=function(t,e){var n=tf.isComposite(this._boundable1),r=tf.isComposite(this._boundable2);if(n&&r)return tf.area(this._boundable1)>tf.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new vu("neither boundable is composite")},tf.prototype.isLeaves=function(){return!(tf.isComposite(this._boundable1)||tf.isComposite(this._boundable2))},tf.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tf.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tf(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tf.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tf.prototype.getDistance=function(){return this._distance},tf.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tf.prototype.interfaces_=function(){return[bu]},tf.prototype.getClass=function(){return tf},tf.area=function(t){return t.getBounds().getArea()},tf.isComposite=function(t){return t instanceof Kl};var ef=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new xc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];tc.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ef.prototype.getNodeCapacity=function(){return this._nodeCapacity},ef.prototype.lastNode=function(t){return t.get(t.size()-1)},ef.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Kl?t+=this.size(n):n instanceof Xl&&(t+=1)}return t}},ef.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xl&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},ef.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new xc:t}if(1===arguments.length){for(var e=arguments[0],n=new xc,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Kl){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xl?n.add(i.getItem()):tc.shouldNeverReachHere()}return n.size()<=0?null:n}},ef.prototype.insert=function(t,e){tc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xl(t,e))},ef.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new xc;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(tc.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Kl?this.boundablesAtLevel(n,a,i):(tc.isTrue(a instanceof Xl),-1===n&&i.add(a))}return null}},ef.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new xc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Mu(arguments[2],Ql)&&arguments[0]instanceof Object&&arguments[1]instanceof Kl)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Kl?this.query(i,u,o):u instanceof Xl?o.visitItem(u.getItem()):tc.shouldNeverReachHere())}else if(Mu(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kl)for(var c=arguments[0],l=arguments[2],f=arguments[1].getChildBoundables(),h=0;h<f.size();h++){var p=f.get(h);this.getIntersectsOp().intersects(p.getBounds(),c)&&(p instanceof Kl?this.query(c,p,l):p instanceof Xl?l.add(p.getItem()):tc.shouldNeverReachHere())}},ef.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ef.prototype.getRoot=function(){return this.build(),this._root},ef.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Kl&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},ef.prototype.createHigherLevels=function(t,e){tc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},ef.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Kl){var r=this.depth(n);r>t&&(t=r)}}return t+1}},ef.prototype.createParentBoundables=function(t,e){tc.isTrue(!t.isEmpty());var n=new xc;n.add(this.createNode(e));var r=new xc(t);$l.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},ef.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ef.prototype.interfaces_=function(){return[Mi]},ef.prototype.getClass=function(){return ef},ef.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nf.IntersectsOp.get=function(){return rf},nf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ef,nf);var rf=function(){},of=function(){};of.prototype.distance=function(t,e){},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var af=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){tc.isTrue(t.length>0);for(var n=new xc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new sf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new xc;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Mu(arguments[2],Ql)&&arguments[0]instanceof Object&&arguments[1]instanceof Kl){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(Mu(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kl){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){tc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new xc(t);$l.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Mu(arguments[0],of)){var t=arguments[0],n=new tf(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof tf){var r=arguments[0];return this.nearestNeighbour(r,mu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Mu(arguments[1],of)){var i=arguments[0],o=arguments[1],a=new tf(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tf&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new Yl;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),h=f.getDistance();if(h>=u)break;f.isLeaves()?(u=h,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Xl(arguments[0],arguments[1]),g=new tf(this.getRoot(),d,p);return this.nearestNeighbour(g)[0]}},e.prototype.interfaces_=function(){return[Zl,Mi]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return sf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(ef),sf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Hu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kl),uf=function(){};uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},uf.relativeSign=function(t,e){return t<e?-1:t>e?1:0},uf.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=uf.relativeSign(e.x,n.x),i=uf.relativeSign(e.y,n.y);switch(t){case 0:return uf.compareValue(r,i);case 1:return uf.compareValue(i,r);case 2:return uf.compareValue(i,-r);case 3:return uf.compareValue(-r,i);case 4:return uf.compareValue(-r,-i);case 5:return uf.compareValue(-i,-r);case 6:return uf.compareValue(-i,r);case 7:return uf.compareValue(r,-i)}return tc.shouldNeverReachHere("invalid octant value"),0},uf.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cf=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new xu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cf.prototype.getCoordinate=function(){return this.coord},cf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cf.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:uf.compare(this._segmentOctant,this.coord,e.coord)},cf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cf.prototype.isInterior=function(){return this._isInterior},cf.prototype.interfaces_=function(){return[bu]},cf.prototype.getClass=function(){return cf};var lf=function(){this._nodeMap=new Fi,this._edge=null;var t=arguments[0];this._edge=t};lf.prototype.getSplitCoordinates=function(){var t=new Oc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},lf.prototype.addCollapsedNodes=function(){var t=new xc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},lf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},lf.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new ku(e+1))}},lf.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new xu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new xu(e.coord))},lf.prototype.iterator=function(){return this._nodeMap.values().iterator()},lf.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},lf.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},lf.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new ku(e[0])),r=i}},lf.prototype.getEdge=function(){return this._edge},lf.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},lf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new xu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new xu(e.coord)),new df(o,this._edge.getData())},lf.prototype.add=function(t,e){var n=new cf(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(tc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},lf.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Ju("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Ju("bad split edge end point at "+i)},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf};var ff=function(){};ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof xu&&arguments[1]instanceof xu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new vu("Cannot compute the octant for two identical points "+i);return ff.octant(a,s)}};var hf=function(){};hf.prototype.getCoordinates=function(){},hf.prototype.size=function(){},hf.prototype.getCoordinate=function(t){},hf.prototype.isClosed=function(){},hf.prototype.setData=function(t){},hf.prototype.getData=function(){},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf};var pf=function(){};pf.prototype.addIntersection=function(t,e){},pf.prototype.interfaces_=function(){return[hf]},pf.prototype.getClass=function(){return pf};var df=function(){this._nodeList=new lf(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};df.prototype.getCoordinates=function(){return this._pts},df.prototype.size=function(){return this._pts.length},df.prototype.getCoordinate=function(t){return this._pts[t]},df.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},df.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},df.prototype.setData=function(t){this._data=t},df.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ff.octant(t,e)},df.prototype.getData=function(){return this._data},df.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new xu(arguments[0].getIntersection(r));this.addIntersection(i,n)}},df.prototype.toString=function(){return Ku.toLineString(new ul(this._pts))},df.prototype.getNodeList=function(){return this._nodeList},df.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},df.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},df.prototype.interfaces_=function(){return[pf]},df.prototype.getClass=function(){return df},df.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new xc;return df.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gf=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new xu,this.p1=new xu;else if(1===arguments.length){var t=arguments[0];this.p0=new xu(t.p0),this.p1=new xu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new xu(e,n),this.p1=new xu(r,i)}},yf={serialVersionUID:{configurable:!0}};gf.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gf.prototype.orientationIndex=function(){if(arguments[0]instanceof gf){var t=arguments[0],e=ac.orientationIndex(this.p0,this.p1,t.p0),n=ac.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof xu){var r=arguments[0];return ac.orientationIndex(this.p0,this.p1,r)}},gf.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gf.prototype.isVertical=function(){return this.p0.x===this.p1.x},gf.prototype.equals=function(t){if(!(t instanceof gf))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gf.prototype.intersection=function(t){var e=new rc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gf.prototype.project=function(){if(arguments[0]instanceof xu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new xu(t);var e=this.projectionFactor(t),n=new xu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gf){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gf(a,s)}},gf.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gf.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gf.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gf.prototype.distancePerpendicular=function(t){return ac.distancePointLinePerpendicular(t,this.p0,this.p1)},gf.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gf.prototype.midPoint=function(){return gf.midPoint(this.p0,this.p1)},gf.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?mu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gf.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=mu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gf.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gf.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gf.prototype.getLength=function(){return this.p0.distance(this.p1)},gf.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gf.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gf.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gf.prototype.lineIntersection=function(t){try{return qu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Gu))throw t}return null},gf.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gf.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new xu(n-u,r+s)},gf.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gf.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||mu.isNaN(e))&&(e=1),e},gf.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gf.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gf.prototype.distance=function(){if(arguments[0]instanceof gf){var t=arguments[0];return ac.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof xu){var e=arguments[0];return ac.distancePointLine(e,this.p0,this.p1)}},gf.prototype.pointAlong=function(t){var e=new xu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gf.prototype.hashCode=function(){var t=mu.doubleToLongBits(this.p0.x);t^=31*mu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=mu.doubleToLongBits(this.p1.x);return n^=31*mu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gf.prototype.interfaces_=function(){return[bu,Mi]},gf.prototype.getClass=function(){return gf},gf.midPoint=function(t,e){return new xu((t.x+e.x)/2,(t.y+e.y)/2)},yf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gf,yf);var vf=function(){this.tempEnv1=new Hu,this.tempEnv2=new Hu,this._overlapSeg1=new gf,this._overlapSeg2=new gf};vf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var mf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mf.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},mf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mf.prototype.setId=function(t){this._id=t},mf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Hu(t,e)}return this._env},mf.prototype.getEndIndex=function(){return this._end},mf.prototype.getStartIndex=function(){return this._start},mf.prototype.getContext=function(){return this._context},mf.prototype.getId=function(){return this._id},mf.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<l&&(r<f&&this.computeOverlapsInternal(t,l,n,r,f,o),f<i&&this.computeOverlapsInternal(t,l,n,f,i,o)),l<e&&(r<f&&this.computeOverlapsInternal(l,e,n,r,f,o),f<i&&this.computeOverlapsInternal(l,e,n,f,i,o))},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf};var Af=function(){};Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.getChainStartIndices=function(t){var e=0,n=new xc;n.add(new ku(e));do{var r=Af.findChainEnd(t,e);n.add(new ku(r)),e=r}while(e<t.length-1);return Af.toIntArray(n)},Af.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Bl.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Bl.quadrant(t[i-1],t[i])===r);)i++;return i-1},Af.getChains=function(){if(1===arguments.length){var t=arguments[0];return Af.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new xc,i=Af.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new mf(e,i[o],i[o+1],n);r.add(a)}return r}},Af.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bf=function(){};bf.prototype.computeNodes=function(t){},bf.prototype.getNodedSubstrings=function(){},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var _f=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};_f.prototype.setSegmentIntersector=function(t){this._segInt=t},_f.prototype.interfaces_=function(){return[bf]},_f.prototype.getClass=function(){return _f};var wf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new xc,this._index=new af,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return df.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Af.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new xf(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return xf},Object.defineProperties(e,n),e}(_f),xf=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vf),Ef=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Of={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ef.prototype.getEndCapStyle=function(){return this._endCapStyle},Ef.prototype.isSingleSided=function(){return this._isSingleSided},Ef.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Ef.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ef.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ef.JOIN_ROUND&&(this._quadrantSegments=Ef.DEFAULT_QUADRANT_SEGMENTS)},Ef.prototype.getJoinStyle=function(){return this._joinStyle},Ef.prototype.setJoinStyle=function(t){this._joinStyle=t},Ef.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Ef.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ef.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ef.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Ef.prototype.getMitreLimit=function(){return this._mitreLimit},Ef.prototype.setMitreLimit=function(t){this._mitreLimit=t},Ef.prototype.setSingleSided=function(t){this._isSingleSided=t},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Of.CAP_ROUND.get=function(){return 1},Of.CAP_FLAT.get=function(){return 2},Of.CAP_SQUARE.get=function(){return 3},Of.JOIN_ROUND.get=function(){return 1},Of.JOIN_MITRE.get=function(){return 2},Of.JOIN_BEVEL.get=function(){return 3},Of.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Of.DEFAULT_MITRE_LIMIT.get=function(){return 5},Of.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Ef,Of);var Sf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ac.COUNTERCLOCKWISE,this._inputLine=t||null},Tf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Sf.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Sf.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Sf.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Sf.prototype.isShallowConcavity=function(t,e,n,r){return ac.computeOrientation(t,e,n)===this._angleOrientation&&ac.distancePointLine(e,t,n)<r},Sf.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Sf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Sf.prototype.isConcave=function(t,e,n){return ac.computeOrientation(t,e,n)===this._angleOrientation},Sf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ac.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Sf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Sf.DELETE;)e++;return e},Sf.prototype.isShallow=function(t,e,n,r){return ac.distancePointLine(e,t,n)<r},Sf.prototype.collapseLine=function(){for(var t=new Oc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Sf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.simplify=function(t,e){return new Sf(t).simplify(e)},Tf.INIT.get=function(){return 0},Tf.DELETE.get=function(){return 1},Tf.KEEP.get=function(){return 1},Tf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Sf,Tf);var Pf=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new xc},Mf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Pf.prototype.getCoordinates=function(){return this._ptList.toArray(Pf.COORDINATE_ARRAY_TYPE)},Pf.prototype.setPrecisionModel=function(t){this._precisionModel=t},Pf.prototype.addPt=function(t){var e=new xu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Pf.prototype.revere=function(){},Pf.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Pf.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Pf.prototype.toString=function(){return(new vl).createLineString(this.getCoordinates()).toString()},Pf.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new xu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Pf.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Mf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Pf,Mf);var Cf=function(){},If={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Cf.toDegrees=function(t){return 180*t/Math.PI},Cf.normalize=function(t){for(;t>Math.PI;)t-=Cf.PI_TIMES_2;for(;t<=-Math.PI;)t+=Cf.PI_TIMES_2;return t},Cf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Cf.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Cf.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Cf.interiorAngle=function(t,e,n){var r=Cf.angle(e,t),i=Cf.angle(e,n);return Math.abs(i-r)},Cf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Cf.PI_TIMES_2;t>=Cf.PI_TIMES_2&&(t=0)}else{for(;t>=Cf.PI_TIMES_2;)t-=Cf.PI_TIMES_2;t<0&&(t=0)}return t},Cf.angleBetween=function(t,e,n){var r=Cf.angle(e,t),i=Cf.angle(e,n);return Cf.diff(r,i)},Cf.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Cf.toRadians=function(t){return t*Math.PI/180},Cf.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Cf.COUNTERCLOCKWISE:n<0?Cf.CLOCKWISE:Cf.NONE},Cf.angleBetweenOriented=function(t,e,n){var r=Cf.angle(e,t),i=Cf.angle(e,n)-r;return i<=-Math.PI?i+Cf.PI_TIMES_2:i>Math.PI?i-Cf.PI_TIMES_2:i},If.PI_TIMES_2.get=function(){return 2*Math.PI},If.PI_OVER_2.get=function(){return Math.PI/2},If.PI_OVER_4.get=function(){return Math.PI/4},If.COUNTERCLOCKWISE.get=function(){return ac.COUNTERCLOCKWISE},If.CLOCKWISE.get=function(){return ac.CLOCKWISE},If.NONE.get=function(){return ac.COLLINEAR},Object.defineProperties(Cf,If);var Rf=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gf,this._seg1=new gf,this._offset0=new gf,this._offset1=new gf,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Ef.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},kf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rf.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ac.computeOrientation(this._s0,this._s1,this._s2),r=n===ac.CLOCKWISE&&this._side===Ol.LEFT||n===ac.COUNTERCLOCKWISE&&this._side===Ol.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rf.prototype.addLineEndCap=function(t,e){var n=new gf(t,e),r=new gf;this.computeOffsetSegment(n,Ol.LEFT,this._distance,r);var i=new gf;this.computeOffsetSegment(n,Ol.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Ef.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ac.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Ef.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Ef.CAP_SQUARE:var u=new xu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new xu(r.p1.x+u.x,r.p1.y+u.y),l=new xu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Rf.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rf.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=qu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Gu))throw t;o=new xu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rf.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===ac.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Rf.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rf.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ef.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ef.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rf.prototype.createSquare=function(t){this._segList.addPt(new xu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new xu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new xu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new xu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rf.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rf.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rf.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rf.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rf.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Cf.angle(i,this._seg0.p0),a=Cf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Cf.normalize(o+a),u=Cf.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),h=i.y+c*Math.sin(u),p=new xu(f,h),d=new gf(i,p),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Ol.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Rf.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ol.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Rf.prototype.addFilletArc=function(t,e,n,r,i){var o=r===ac.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new xu;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},Rf.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new xu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new xu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rf.prototype.createCircle=function(t){var e=new xu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rf.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rf.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pf,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rf.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ef.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ef.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ac.CLOCKWISE,this._distance))},Rf.prototype.closeRing=function(){this._segList.closeRing()},Rf.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},kf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},kf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},kf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},kf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rf,kf);var jf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};jf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Sc.reverse(o),o},jf.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Sf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ol.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Sf.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ol.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},jf.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ol.RIGHT&&(r=-r);var i=Sf.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},jf.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Sf.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ol.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Sf.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ol.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},jf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Ef.CAP_ROUND:e.createCircle(t);break;case Ef.CAP_SQUARE:e.createSquare(t)}},jf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},jf.prototype.getBufferParameters=function(){return this._bufParams},jf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},jf.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return jf.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},jf.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Sf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ol.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Sf.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ol.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},jf.prototype.getSegGen=function(t){return new Rf(this._precisionModel,this._bufParams,t)},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new xu(t[n]);return e};var Lf=function(){this._subgraphs=null,this._seg=new gf,this._cga=new ac;var t=arguments[0];this._subgraphs=t},Nf={DepthSegment:{configurable:!0}};Lf.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new xc,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Mu(arguments[2],wc)&&arguments[0]instanceof xu&&arguments[1]instanceof Gl){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ac.computeOrientation(this._seg.p0,this._seg.p1,o)===ac.RIGHT)){var l=a.getDepth(Ol.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Ol.RIGHT));var f=new Df(this._seg,l);s.add(f)}}else if(Mu(arguments[2],wc)&&arguments[0]instanceof xu&&Mu(arguments[1],wc))for(var h=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(h,g,p)}},Lf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$l.min(e)._leftDepth},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf},Nf.DepthSegment.get=function(){return Df},Object.defineProperties(Lf,Nf);var Df=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gf(t),this._leftDepth=e};Df.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Df.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Df.prototype.toString=function(){return this._upwardSeg.toString()},Df.prototype.interfaces_=function(){return[bu]},Df.prototype.getClass=function(){return Df};var Ff=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Ff.prototype.area=function(){return Ff.area(this.p0,this.p1,this.p2)},Ff.prototype.signedArea=function(){return Ff.signedArea(this.p0,this.p1,this.p2)},Ff.prototype.interpolateZ=function(t){if(null===t)throw new vu("Supplied point is null.");return Ff.interpolateZ(t,this.p0,this.p1,this.p2)},Ff.prototype.longestSideLength=function(){return Ff.longestSideLength(this.p0,this.p1,this.p2)},Ff.prototype.isAcute=function(){return Ff.isAcute(this.p0,this.p1,this.p2)},Ff.prototype.circumcentre=function(){return Ff.circumcentre(this.p0,this.p1,this.p2)},Ff.prototype.area3D=function(){return Ff.area3D(this.p0,this.p1,this.p2)},Ff.prototype.centroid=function(){return Ff.centroid(this.p0,this.p1,this.p2)},Ff.prototype.inCentre=function(){return Ff.inCentre(this.p0,this.p1,this.p2)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ff.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ff.det=function(t,e,n,r){return t*r-e*n},Ff.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,f=t.x-i,h=t.y-o,p=(c*f-s*h)/l,d=(-u*f+a*h)/l;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Ff.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Ff.isAcute=function(t,e,n){return!!Cf.isAcute(t,e,n)&&!!Cf.isAcute(e,n,t)&&!!Cf.isAcute(n,t,e)},Ff.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*Ff.det(o,a,s,u),l=Ff.det(a,o*o+a*a,u,s*s+u*u),f=Ff.det(o,o*o+a*a,s,s*s+u*u);return new xu(r-l/c,i+f/c)},Ff.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new qu(t.x+n/2,t.y+r/2,1),o=new qu(t.x-r+n/2,t.y+n+r/2,1);return new qu(i,o)},Ff.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new xu(t.x+i*o,t.y+i*a)},Ff.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,h=c*c+l*l+f*f;return Math.sqrt(h)/2},Ff.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new xu(r,i)},Ff.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new xu(s,u)};var Bf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new xc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Tu.EXTERIOR,Tu.INTERIOR)},Bf.prototype.addPolygon=function(t){var e=this._distance,n=Ol.LEFT;this._distance<0&&(e=-this._distance,n=Ol.RIGHT);var r=t.getExteriorRing(),i=Sc.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Tu.EXTERIOR,Tu.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Sc.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ol.opposite(n),Tu.INTERIOR,Tu.EXTERIOR)}},Bf.prototype.isTriangleErodedCompletely=function(t,e){var n=new Ff(t[0],t[1],t[2]),r=n.inCentre();return ac.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Sc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Tu.EXTERIOR,Tu.INTERIOR)},Bf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new df(t,new Rl(0,Tu.BOUNDARY,e,n));this._curveList.add(r)},Bf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<el.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=el.MINIMUM_VALID_SIZE&&ac.isCCW(t)&&(o=i,a=r,n=Ol.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $c?this.addPolygon(t):t instanceof Qc?this.addLineString(t):t instanceof Kc?this.addPoint(t):(t instanceof tl||t instanceof Vc||t instanceof nl||t instanceof Gc)&&this.addCollection(t)},Bf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var zf=function(){};zf.prototype.locate=function(t){},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Uf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Uf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Uf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ci;var t=this._parent.getGeometryN(this._index++);return t instanceof Gc?(this._subcollectionIterator=new Uf(t),this._subcollectionIterator.next()):t},Uf.prototype.remove=function(){throw new Error(this.getClass().getName())},Uf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Uf.prototype.interfaces_=function(){return[_c]},Uf.prototype.getClass=function(){return Uf},Uf.isAtomic=function(t){return!(t instanceof Gc)};var Gf=function(){this._geom=null;var t=arguments[0];this._geom=t};Gf.prototype.locate=function(t){return Gf.locate(t,this._geom)},Gf.prototype.interfaces_=function(){return[zf]},Gf.prototype.getClass=function(){return Gf},Gf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ac.isPointInRing(t,e.getCoordinates())},Gf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Gf.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Gf.isPointInRing(t,i))return!1}return!0},Gf.containsPoint=function(t,e){if(e instanceof $c)return Gf.containsPointInPolygon(t,e);if(e instanceof Gc)for(var n=new Uf(e);n.hasNext();){var r=n.next();if(r!==e&&Gf.containsPoint(t,r))return!0}return!1},Gf.locate=function(t,e){return e.isEmpty()?Tu.EXTERIOR:Gf.containsPoint(t,e)?Tu.INTERIOR:Tu.EXTERIOR};var Vf=function(){this._edgeMap=new Fi,this._edgeList=null,this._ptInAreaLocation=[Tu.NONE,Tu.NONE]};Vf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vf.prototype.propagateSideLabels=function(t){for(var e=Tu.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ol.LEFT)!==Tu.NONE&&(e=r.getLocation(t,Ol.LEFT))}if(e===Tu.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ol.ON)===Tu.NONE&&s.setLocation(t,Ol.ON,i),s.isArea(t)){var u=s.getLocation(t,Ol.LEFT),c=s.getLocation(t,Ol.RIGHT);if(c!==Tu.NONE){if(c!==i)throw new Pl("side location conflict",a.getCoordinate());u===Tu.NONE&&tc.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else tc.isTrue(s.getLocation(t,Ol.LEFT)===Tu.NONE,"found single null side"),s.setLocation(t,Ol.RIGHT,i),s.setLocation(t,Ol.LEFT,i)}}},Vf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vf.prototype.print=function(t){Vu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ol.LEFT);tc.isTrue(r!==Tu.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();tc.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ol.LEFT),u=a.getLocation(t,Ol.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Vf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vf.prototype.iterator=function(){return this.getEdges().iterator()},Vf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new xc(this._edgeMap.values())),this._edgeList},Vf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Tu.NONE&&(this._ptInAreaLocation[t]=Gf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Vf.prototype.toString=function(){var t=new Ru;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Vf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Tu.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=Tu.NONE;if(e[u])c=Tu.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},Vf.prototype.getDegree=function(){return this._edgeMap.size()},Vf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var qf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Pl("no outgoing dirEdge found",this.getCoordinate());tc.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Bl.isNorthern(i)&&Bl.isNorthern(o)?n:Bl.isNorthern(i)||Bl.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(tc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Vu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new xc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ol.LEFT),r=t.getDepth(Ol.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Pl("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Ol.RIGHT,a),a=u.getDepth(Ol.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tc.isTrue(null!==e,"found null for first outgoing dirEdge"),tc.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Tu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Tu.INTERIOR;break}if(r.isInResult()){t=Tu.EXTERIOR;break}}}if(t===Tu.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Tu.INTERIOR):(a.isInResult()&&(i=Tu.EXTERIOR),s.isInResult()&&(i=Tu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Rl(Tu.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Tu.INTERIOR&&o!==Tu.BOUNDARY||this._label.setLocation(i,Tu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vf),Hf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Dl(t,new qf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vl),Wf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wf.prototype.compareTo=function(t){var e=t;return Wf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wf.prototype.interfaces_=function(){return[bu]},Wf.prototype.getClass=function(){return Wf},Wf.orientation=function(t){return 1===Sc.increasingDirection(t)},Wf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var f=(u+=i)===a,h=(c+=o)===s;if(f&&!h)return-1;if(!f&&h)return 1;if(f&&h)return 0}};var Xf=function(){this._edges=new xc,this._ocaMap=new Fi};Xf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xf.prototype.iterator=function(){return this._edges.iterator()},Xf.prototype.getEdges=function(){return this._edges},Xf.prototype.get=function(t){return this._edges.get(t)},Xf.prototype.findEqualEdge=function(t){var e=new Wf(t.getCoordinates());return this._ocaMap.get(e)},Xf.prototype.add=function(t){this._edges.add(t);var e=new Wf(t.getCoordinates());this._ocaMap.put(e,t)},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var Yf=function(){};Yf.prototype.processIntersections=function(t,e,n,r){},Yf.prototype.isDone=function(){},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf};var Qf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Qf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Qf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Qf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Qf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Qf.prototype.getLineIntersector=function(){return this._li},Qf.prototype.hasProperIntersection=function(){return this._hasProper},Qf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Qf.prototype.hasIntersection=function(){return this._hasIntersection},Qf.prototype.isDone=function(){return!1},Qf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Qf.prototype.interfaces_=function(){return[Yf]},Qf.prototype.getClass=function(){return Qf},Qf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new xu(t),this.segmentIndex=e,this.dist=n};Zf.prototype.getSegmentIndex=function(){return this.segmentIndex},Zf.prototype.getCoordinate=function(){return this.coord},Zf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zf.prototype.getDistance=function(){return this.dist},Zf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zf.prototype.interfaces_=function(){return[bu]},Zf.prototype.getClass=function(){return Zf};var Kf=function(){this._nodeMap=new Fi,this.edge=null;var t=arguments[0];this.edge=t};Kf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kf.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new xu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nh(o,new Rl(this.edge._label))},Kf.prototype.add=function(t,e,n){var r=new Zf(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var Jf=function(){};Jf.prototype.getChainStartIndices=function(t){var e=0,n=new xc;n.add(new ku(e));do{var r=this.findChainEnd(t,e);n.add(new ku(r)),e=r}while(e<t.length-1);return Jf.toIntArray(n)},Jf.prototype.findChainEnd=function(t,e){for(var n=Bl.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Bl.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $f=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Hu,this.env2=new Hu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jf;this.startIndex=e.getChainStartIndices(this.pts)};$f.prototype.getCoordinates=function(){return this.pts},$f.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$f.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$f.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],h=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},$f.prototype.getStartIndexes=function(){return this.startIndex},$f.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var th=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},eh={NULL_VALUE:{configurable:!0}};th.prototype.getDepth=function(t,e){return this._depth[t][e]},th.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},th.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==th.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===th.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===th.NULL_VALUE}},th.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},th.prototype.getDelta=function(t){return this._depth[t][Ol.RIGHT]-this._depth[t][Ol.LEFT]},th.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Tu.EXTERIOR:Tu.INTERIOR},th.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},th.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Tu.EXTERIOR&&r!==Tu.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=th.depthAtLocation(r):this._depth[e][n]+=th.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Tu.INTERIOR&&this._depth[i][o]++}},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.depthAtLocation=function(t){return t===Tu.EXTERIOR?0:t===Tu.INTERIOR?1:th.NULL_VALUE},eh.NULL_VALUE.get=function(){return-1},Object.defineProperties(th,eh);var nh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new th,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Rl.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $f(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Hu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new xu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new Ru;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ol.ON),e.getLocation(1,Ol.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ol.LEFT),e.getLocation(1,Ol.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ol.RIGHT),e.getLocation(1,Ol.RIGHT),2))},e}(Nl),rh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xf,this._bufParams=t||null};rh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Rl(t.getLabel())).flip(),n.merge(r);var i=rh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rh.depthDelta(t.getLabel()))},rh.prototype.buildSubgraphs=function(t,e){for(var n=new xc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Lf(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rh.prototype.createSubgraphs=function(t){for(var e=new xc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Cl;i.create(r),e.add(i)}}return $l.sort(e,$l.reverseOrder()),e},rh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wf,n=new rc;return n.setPrecisionModel(t),e.setSegmentIntersector(new Qf(n)),e},rh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new jf(n,this._bufParams),i=new Bf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new ql(new Hf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Hl(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nh(i.getCoordinates(),new Rl(a));this.insertUniqueEdge(s)}}},rh.prototype.setNoder=function(t){this._workingNoder=t},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh},rh.depthDelta=function(t){var e=t.getLocation(0,Ol.LEFT),n=t.getLocation(0,Ol.RIGHT);return e===Tu.INTERIOR&&n===Tu.EXTERIOR?1:e===Tu.EXTERIOR&&n===Tu.INTERIOR?-1:0},rh.convertSegStrings=function(t){for(var e=new vl,n=new xc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ih=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ih.prototype.rescale=function(){if(Mu(arguments[0],Ac))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Vu.out.println(n)}},ih.prototype.scale=function(){if(Mu(arguments[0],Ac)){for(var t=arguments[0],e=new xc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new df(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new xu(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Sc.removeRepeatedPoints(o)}},ih.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ih.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ih.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ih.prototype.interfaces_=function(){return[bf]},ih.prototype.getClass=function(){return ih};var oh=function(){this._li=new rc,this._segStrings=null;var t=arguments[0];this._segStrings=t},ah={fact:{configurable:!0}};oh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Ju("found endpt/interior pt intersection at index "+o+" :pt "+n)},oh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],h=arguments[2],p=arguments[3];if(l===h&&f===p)return null;var d=l.getCoordinates()[f],g=l.getCoordinates()[f+1],y=h.getCoordinates()[p],v=h.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,y,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,v)))throw new Ju("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+v)}},oh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oh.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},oh.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},oh.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Ju("found non-noded collapse at "+oh.fact.createLineString([t,e,n]))},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},ah.fact.get=function(){return new vl},Object.defineProperties(oh,ah);var sh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new vu("Scale factor must be non-zero");1!==e&&(this._pt=new xu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new xu,this._p1Scaled=new xu),this.initCorners(this._pt)},uh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sh.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return tc.isTrue(!(a&&s),"Found bad envelope test"),s},sh.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new xu(this._maxx,this._maxy),this._corner[1]=new xu(this._minx,this._maxy),this._corner[2]=new xu(this._minx,this._miny),this._corner[3]=new xu(this._maxx,this._miny)},sh.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sh.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sh.prototype.getCoordinate=function(){return this._originalPt},sh.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Hu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sh.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sh.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sh.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh},uh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sh,uh);var ch=function(){this.tempEnv1=new Hu,this.selectedSegment=new gf};ch.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var lh=function(){this._index=null;var t=arguments[0];this._index=t},fh={HotPixelSnapAction:{configurable:!0}};lh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new hh(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ql]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},fh.HotPixelSnapAction.get=function(){return hh},Object.defineProperties(lh,fh);var hh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ch),ph=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new xc};ph.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},ph.prototype.isDone=function(){return!1},ph.prototype.getInteriorIntersections=function(){return this._interiorIntersections},ph.prototype.interfaces_=function(){return[Yf]},ph.prototype.getClass=function(){return ph};var dh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dh.prototype.checkCorrectness=function(t){var e=df.getNodedSubstrings(t),n=new oh(e);try{n.checkValid()}catch(t){if(!(t instanceof Uu))throw t;t.printStackTrace()}},dh.prototype.getNodedSubstrings=function(){return df.getNodedSubstrings(this._nodedSegStrings)},dh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dh.prototype.findInteriorIntersections=function(t,e){var n=new ph(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dh.prototype.computeVertexSnaps=function(){if(Mu(arguments[0],Ac))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof df)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sh(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wf,this._pointSnapper=new lh(this._noder.getIndex()),this.snapRound(t,this._li)},dh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sh(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dh.prototype.interfaces_=function(){return[bf]},dh.prototype.getClass=function(){return dh};var gh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ef,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gh.prototype.bufferFixedPrecision=function(t){var e=new ih(new dh(new pl(1)),t.getScale()),n=new rh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pl))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gh.precisionScaleFactor(this._argGeom,this._distance,n),i=new pl(r);this.bufferFixedPrecision(i)}},gh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pl.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gh.prototype.bufferOriginalPrecision=function(){try{var t=new rh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ju))throw t;this._saveException=t}},gh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh},gh.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gh(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gh(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Ef&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var i=arguments[1];return new gh(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new gh(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},gh.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Cu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yh.CAP_ROUND.get=function(){return Ef.CAP_ROUND},yh.CAP_BUTT.get=function(){return Ef.CAP_FLAT},yh.CAP_FLAT.get=function(){return Ef.CAP_FLAT},yh.CAP_SQUARE.get=function(){return Ef.CAP_SQUARE},yh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gh,yh);var vh=function(){this._pt=[new xu,new xu],this._distance=mu.NaN,this._isNull=!0};vh.prototype.getCoordinates=function(){return this._pt},vh.prototype.getCoordinate=function(t){return this._pt[t]},vh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},vh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},vh.prototype.getDistance=function(){return this._distance},vh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var mh=function(){};mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.computeDistance=function(){if(arguments[2]instanceof vh&&arguments[0]instanceof Qc&&arguments[1]instanceof xu)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gf,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof vh&&arguments[0]instanceof $c&&arguments[1]instanceof xu){var a=arguments[0],s=arguments[1],u=arguments[2];mh.computeDistance(a.getExteriorRing(),s,u);for(var c=0;c<a.getNumInteriorRing();c++)mh.computeDistance(a.getInteriorRingN(c),s,u)}else if(arguments[2]instanceof vh&&arguments[0]instanceof cc&&arguments[1]instanceof xu){var l=arguments[0],f=arguments[1],h=arguments[2];if(l instanceof Qc)mh.computeDistance(l,f,h);else if(l instanceof $c)mh.computeDistance(l,f,h);else if(l instanceof Gc)for(var p=l,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);mh.computeDistance(g,f,h)}else h.setMinimum(l.getCoordinate(),f)}else if(arguments[2]instanceof vh&&arguments[0]instanceof gf&&arguments[1]instanceof xu){var y=arguments[1],v=arguments[2],m=arguments[0].closestPoint(y);v.setMinimum(m,y)}};var Ah=function(t){this._maxPtDist=new vh,this._inputGeom=t||null},bh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ah.prototype.computeMaxMidpointDistance=function(t){var e=new wh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ah.prototype.computeMaxVertexDistance=function(t){var e=new _h(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ah.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ah.prototype.getDistancePoints=function(){return this._maxPtDist},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},bh.MaxPointDistanceFilter.get=function(){return _h},bh.MaxMidpointDistanceFilter.get=function(){return wh},Object.defineProperties(Ah,bh);var _h=function(t){this._maxPtDist=new vh,this._minPtDist=new vh,this._geom=t||null};_h.prototype.filter=function(t){this._minPtDist.initialize(),mh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_h.prototype.getMaxPointDistance=function(){return this._maxPtDist},_h.prototype.interfaces_=function(){return[hc]},_h.prototype.getClass=function(){return _h};var wh=function(t){this._maxPtDist=new vh,this._minPtDist=new vh,this._geom=t||null};wh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new xu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wh.prototype.isDone=function(){return!1},wh.prototype.isGeometryChanged=function(){return!1},wh.prototype.getMaxPointDistance=function(){return this._maxPtDist},wh.prototype.interfaces_=function(){return[Uc]},wh.prototype.getClass=function(){return wh};var xh=function(t){this._comps=t||null};xh.prototype.filter=function(t){t instanceof $c&&this._comps.add(t)},xh.prototype.interfaces_=function(){return[zc]},xh.prototype.getClass=function(){return xh},xh.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return xh.getPolygons(t,new xc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $c?n.add(e):e instanceof Gc&&e.apply(new xh(n)),n}};var Eh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Eh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof el){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qc&&this._lines.add(t)},Eh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Eh.prototype.interfaces_=function(){return[uc]},Eh.prototype.getClass=function(){return Eh},Eh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Eh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Eh.getLines(e,n))}},Eh.getLines=function(){if(1===arguments.length){var t=arguments[0];return Eh.getLines(t,!1)}if(2===arguments.length){if(Mu(arguments[0],Ac)&&Mu(arguments[1],Ac)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Eh.getLines(r,e)}return e}if(arguments[0]instanceof cc&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new xc;return i.apply(new Eh(a,o)),a}if(arguments[0]instanceof cc&&Mu(arguments[1],Ac)){var s=arguments[0],u=arguments[1];return s instanceof Qc?u.add(s):s.apply(new Eh(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Mu(arguments[0],Ac)&&Mu(arguments[1],Ac)){for(var c=arguments[1],l=arguments[2],f=arguments[0].iterator();f.hasNext();){var h=f.next();Eh.getLines(h,c,l)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof cc&&Mu(arguments[1],Ac)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Eh(p,d)),p}}};var Oh=function(){if(this._boundaryRule=pc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new vu("Rule must be non-null");this._boundaryRule=t}};Oh.prototype.locateInternal=function(){if(arguments[0]instanceof xu&&arguments[1]instanceof $c){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Tu.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Tu.EXTERIOR)return Tu.EXTERIOR;if(r===Tu.BOUNDARY)return Tu.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===Tu.INTERIOR)return Tu.EXTERIOR;if(a===Tu.BOUNDARY)return Tu.BOUNDARY}return Tu.INTERIOR}if(arguments[0]instanceof xu&&arguments[1]instanceof Qc){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return Tu.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?ac.isOnLine(s,c)?Tu.INTERIOR:Tu.EXTERIOR:Tu.BOUNDARY}if(arguments[0]instanceof xu&&arguments[1]instanceof Kc){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?Tu.INTERIOR:Tu.EXTERIOR}},Oh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?ac.locatePointInRing(t,e.getCoordinates()):Tu.EXTERIOR},Oh.prototype.intersects=function(t,e){return this.locate(t,e)!==Tu.EXTERIOR},Oh.prototype.updateLocationInfo=function(t){t===Tu.INTERIOR&&(this._isIn=!0),t===Tu.BOUNDARY&&this._numBoundaries++},Oh.prototype.computeLocation=function(t,e){if(e instanceof Kc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $c)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vc)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof nl)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Gc)for(var u=new Uf(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Oh.prototype.locate=function(t,e){return e.isEmpty()?Tu.EXTERIOR:e instanceof Qc||e instanceof $c?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Tu.BOUNDARY:this._numBoundaries>0||this._isIn?Tu.INTERIOR:Tu.EXTERIOR)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Sh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Th={INSIDE_AREA:{configurable:!0}};Sh.prototype.isInsideArea=function(){return this._segIndex===Sh.INSIDE_AREA},Sh.prototype.getCoordinate=function(){return this._pt},Sh.prototype.getGeometryComponent=function(){return this._component},Sh.prototype.getSegmentIndex=function(){return this._segIndex},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Th.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Sh,Th);var Ph=function(t){this._pts=t||null};Ph.prototype.filter=function(t){t instanceof Kc&&this._pts.add(t)},Ph.prototype.interfaces_=function(){return[zc]},Ph.prototype.getClass=function(){return Ph},Ph.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kc?$l.singletonList(t):Ph.getPoints(t,new xc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kc?n.add(e):e instanceof Gc&&e.apply(new Ph(n)),n}};var Mh=function(){this._locations=null;var t=arguments[0];this._locations=t};Mh.prototype.filter=function(t){(t instanceof Kc||t instanceof Qc||t instanceof $c)&&this._locations.add(new Sh(t,0,t.getCoordinate()))},Mh.prototype.interfaces_=function(){return[zc]},Mh.prototype.getClass=function(){return Mh},Mh.getLocations=function(t){var e=new xc;return t.apply(new Mh(e)),e};var Ch=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Oh,this._minDistanceLocation=null,this._minDistance=mu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Ch.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=xh.getPolygons(this._geom[e]);if(i.size()>0){var o=Mh.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Mu(arguments[0],wc)&&Mu(arguments[1],wc)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Sh&&arguments[1]instanceof $c){var h=arguments[0],p=arguments[1],d=arguments[2],g=h.getCoordinate();if(Tu.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=h,d[1]=new Sh(p,g),null}},Ch.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Ch.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Eh.getLines(this._geom[0]),n=Eh.getLines(this._geom[1]),r=Ph.getPoints(this._geom[0]),i=Ph.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Ch.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ch.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ch.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ch.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof Kc){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=ac.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gf(r[o],r[o+1]).closestPoint(i);n[0]=new Sh(t,o,s),n[1]=new Sh(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qc&&arguments[1]instanceof Qc){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),h=c.getCoordinates(),p=0;p<f.length-1;p++)for(var d=0;d<h.length-1;d++){var g=ac.distanceLineLine(f[p],f[p+1],h[d],h[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gf(f[p],f[p+1]),v=new gf(h[d],h[d+1]),m=y.closestPoints(v);l[0]=new Sh(u,p,m[0]),l[1]=new Sh(c,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ch.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Sh(i,0,i.getCoordinate()),n[1]=new Sh(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ch.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new vu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ch.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.distance=function(t,e){return new Ch(t,e).distance()},Ch.isWithinDistance=function(t,e,n){return new Ch(t,e,n).distance()<=n},Ch.nearestPoints=function(t,e){return new Ch(t,e).nearestPoints()};var Ih=function(){this._pt=[new xu,new xu],this._distance=mu.NaN,this._isNull=!0};Ih.prototype.getCoordinates=function(){return this._pt},Ih.prototype.getCoordinate=function(t){return this._pt[t]},Ih.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Ih.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Ih.prototype.toString=function(){return Ku.toLineString(this._pt[0],this._pt[1])},Ih.prototype.getDistance=function(){return this._distance},Ih.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Rh=function(){};Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Rh.computeDistance=function(){if(arguments[2]instanceof Ih&&arguments[0]instanceof Qc&&arguments[1]instanceof xu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gf,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Ih&&arguments[0]instanceof $c&&arguments[1]instanceof xu){var s=arguments[0],u=arguments[1],c=arguments[2];Rh.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Rh.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Ih&&arguments[0]instanceof cc&&arguments[1]instanceof xu){var f=arguments[0],h=arguments[1],p=arguments[2];if(f instanceof Qc)Rh.computeDistance(f,h,p);else if(f instanceof $c)Rh.computeDistance(f,h,p);else if(f instanceof Gc)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Rh.computeDistance(y,h,p)}else p.setMinimum(f.getCoordinate(),h)}else if(arguments[2]instanceof Ih&&arguments[0]instanceof gf&&arguments[1]instanceof xu){var v=arguments[1],m=arguments[2],A=arguments[0].closestPoint(v);m.setMinimum(A,v)}};var kh=function(){this._g0=null,this._g1=null,this._ptDist=new Ih,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},jh={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kh.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kh.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new vu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kh.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kh.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kh.prototype.computeOrientedDistance=function(t,e,n){var r=new Lh(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Nh(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},kh.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},kh.distance=function(){if(2===arguments.length)return new kh(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new kh(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},jh.MaxPointDistanceFilter.get=function(){return Lh},jh.MaxDensifiedByFractionDistanceFilter.get=function(){return Nh},Object.defineProperties(kh,jh);var Lh=function(){this._maxPtDist=new Ih,this._minPtDist=new Ih,this._euclideanDist=new Rh,this._geom=null;var t=arguments[0];this._geom=t};Lh.prototype.filter=function(t){this._minPtDist.initialize(),Rh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Lh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lh.prototype.interfaces_=function(){return[hc]},Lh.prototype.getClass=function(){return Lh};var Nh=function(){this._maxPtDist=new Ih,this._minPtDist=new Ih,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Nh.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new xu(s,u);this._minPtDist.initialize(),Rh.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Nh.prototype.isDone=function(){return!1},Nh.prototype.isGeometryChanged=function(){return!1},Nh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nh.prototype.interfaces_=function(){return[Uc]},Nh.prototype.getClass=function(){return Nh};var Dh=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fh={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Dh.prototype.checkMaximumDistance=function(t,e,n){var r=new kh(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ku.toLineString(i[0],i[1])+")"}},Dh.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Dh.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Dh.VERBOSE&&Vu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Dh.prototype.checkNegativeValid=function(){if(!(this._input instanceof $c||this._input instanceof nl||this._input instanceof Gc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Dh.prototype.getErrorIndicator=function(){return this._errorIndicator},Dh.prototype.checkMinimumDistance=function(t,e,n){var r=new Ch(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ku.toLineString(i[0],i[1])+" )"}},Dh.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Dh.prototype.getErrorLocation=function(){return this._errorLocation},Dh.prototype.getPolygonLines=function(t){for(var e=new xc,n=new Eh(e),r=xh.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Dh.prototype.getErrorMessage=function(){return this._errMsg},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Fh.VERBOSE.get=function(){return!1},Fh.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Dh,Fh);var Bh=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},zh={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bh.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bh.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bh.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Hu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Hu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Bh.prototype.checkDistance=function(){var t=new Dh(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bh.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bh.prototype.checkPolygonal=function(){this._result instanceof $c||this._result instanceof nl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bh.prototype.getErrorIndicator=function(){return this._errorIndicator},Bh.prototype.getErrorLocation=function(){return this._errorLocation},Bh.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bh.prototype.report=function(t){if(!Bh.VERBOSE)return null;Vu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Bh.prototype.getErrorMessage=function(){return this._errorMsg},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.isValidMsg=function(t,e,n){var r=new Bh(t,e,n);return r.isValid()?null:r.getErrorMessage()},Bh.isValid=function(t,e,n){return!!new Bh(t,e,n).isValid()},zh.VERBOSE.get=function(){return!1},zh.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bh,zh);var Uh=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Uh.prototype.getCoordinates=function(){return this._pts},Uh.prototype.size=function(){return this._pts.length},Uh.prototype.getCoordinate=function(t){return this._pts[t]},Uh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Uh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ff.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Uh.prototype.setData=function(t){this._data=t},Uh.prototype.getData=function(){return this._data},Uh.prototype.toString=function(){return Ku.toLineString(new ul(this._pts))},Uh.prototype.interfaces_=function(){return[hf]},Uh.prototype.getClass=function(){return Uh};var Gh=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new xc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Gh.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Gh.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Gh.prototype.getIntersectionSegments=function(){return this._intSegments},Gh.prototype.count=function(){return this._intersectionCount},Gh.prototype.getIntersections=function(){return this._intersections},Gh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Gh.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Gh.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Gh.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Gh.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Gh.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Gh.prototype.interfaces_=function(){return[Yf]},Gh.prototype.getClass=function(){return Gh},Gh.createAllIntersectionsFinder=function(t){var e=new Gh(t);return e.setFindAllIntersections(!0),e},Gh.createAnyIntersectionFinder=function(t){return new Gh(t)},Gh.createIntersectionCounter=function(t){var e=new Gh(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vh=function(){this._li=new rc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vh.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vh.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vh.prototype.isValid=function(){return this.execute(),this._isValid},Vh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vh.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Gh(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vh.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pl(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vh.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ku.toLineString(t[0],t[1])+" and "+Ku.toLineString(t[2],t[3])},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.computeIntersections=function(t){var e=new Vh(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qh=function t(){this._nv=null;var e=arguments[0];this._nv=new Vh(t.toSegmentStrings(e))};qh.prototype.checkValid=function(){this._nv.checkValid()},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh},qh.toSegmentStrings=function(t){for(var e=new xc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Uh(r.getCoordinates(),r))}return e},qh.checkValid=function(t){new qh(t).checkValid()};var Hh=function(t){this._mapOp=t};Hh.prototype.map=function(t){for(var e=new xc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(vl.toGeometryArray(e))},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.map=function(t,e){return new Hh(e).map(t)};var Wh=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new xc,this._resultLineList=new xc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wh.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wh.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wh.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wh.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Sp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wh.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wh.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wh.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wh.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(tc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Sp.isResultOfOp(r,e)&&e===Sp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};var Xh=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new xc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xh.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xh.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Sp.INTERSECTION)){var r=n.getLabel();Sp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xh.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Yh=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Yh.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Yh.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof el&&!r.isEmpty()||(n=!1);for(var i=new xc,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof el||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new xc;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Yh.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Yh.prototype.getInputGeometry=function(){return this._inputGeom},Yh.prototype.transformMultiLineString=function(t,e){for(var n=new xc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yh.prototype.transformCoordinates=function(t,e){return this.copy(t)},Yh.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Yh.prototype.transformMultiPoint=function(t,e){for(var n=new xc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yh.prototype.transformMultiPolygon=function(t,e){for(var n=new xc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yh.prototype.copy=function(t){return t.copy()},Yh.prototype.transformGeometryCollection=function(t,e){for(var n=new xc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(vl.toGeometryArray(n)):this._factory.buildGeometry(n)},Yh.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kc)return this.transformPoint(t,null);if(t instanceof tl)return this.transformMultiPoint(t,null);if(t instanceof el)return this.transformLinearRing(t,null);if(t instanceof Qc)return this.transformLineString(t,null);if(t instanceof Vc)return this.transformMultiLineString(t,null);if(t instanceof $c)return this.transformPolygon(t,null);if(t instanceof nl)return this.transformMultiPolygon(t,null);if(t instanceof Gc)return this.transformGeometryCollection(t,null);throw new vu("Unknown Geometry subtype: "+t.getClass().getName())},Yh.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Qh=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gf,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qc&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Qh.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new xu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new xu(o)))}},Qh.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Qh.prototype.snapTo=function(t){var e=new Oc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Qh.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new xu(i),!1)}},Qh.prototype.findSegmentIndexToSnap=function(t,e){for(var n=mu.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Qh.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zh=function(t){this._srcGeom=t||null},Kh={SNAP_PRECISION_FACTOR:{configurable:!0}};Zh.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jh(e,n).transform(this._srcGeom)},Zh.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jh(t,n,!0).transform(this._srcGeom),i=r;return e&&Mu(i,Jc)&&(i=r.buffer(0)),i},Zh.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zh.prototype.extractTargetCoordinates=function(t){for(var e=new zi,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zh.prototype.computeMinimumSegmentLength=function(t){for(var e=mu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zh(t);r[0]=i.snapTo(e,n);var o=new Zh(e);return r[1]=o.snapTo(r[0],n),r},Zh.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zh.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pl.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zh.computeOverlaySnapTolerance(i),Zh.computeOverlaySnapTolerance(o))}},Zh.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zh.SNAP_PRECISION_FACTOR},Zh.snapToSelf=function(t,e,n){return new Zh(t).snapToSelf(e,n)},Kh.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zh,Kh);var Jh=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Qh(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yh),$h=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$h.prototype.getCommon=function(){return mu.longBitsToDouble(this._commonBits)},$h.prototype.add=function(t){var e=mu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$h.signExpBits(this._commonBits),this._isFirst=!1,null):$h.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$h.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$h.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$h.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=mu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+mu.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},$h.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$h.signExpBits=function(t){return t>>52},$h.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$h.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($h.getBit(t,r)!==$h.getBit(e,r))return n;n++}return 52};var tp=function(){this._commonCoord=null,this._ccFilter=new np},ep={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tp.prototype.addCommonBits=function(t){var e=new rp(this._commonCoord);t.apply(e),t.geometryChanged()},tp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new xu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new rp(e);return t.apply(n),t.geometryChanged(),t},tp.prototype.getCommonCoordinate=function(){return this._commonCoord},tp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp},ep.CommonCoordinateFilter.get=function(){return np},ep.Translater.get=function(){return rp},Object.defineProperties(tp,ep);var np=function(){this._commonBitsX=new $h,this._commonBitsY=new $h};np.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},np.prototype.getCommonCoordinate=function(){return new xu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},np.prototype.interfaces_=function(){return[hc]},np.prototype.getClass=function(){return np};var rp=function(){this.trans=null;var t=arguments[0];this.trans=t};rp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},rp.prototype.isDone=function(){return!1},rp.prototype.isGeometryChanged=function(){return!0},rp.prototype.interfaces_=function(){return[Uc]},rp.prototype.getClass=function(){return rp};var ip=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ip.prototype.selfSnap=function(t){return new Zh(t).snapTo(t,this._snapTolerance)},ip.prototype.removeCommonBits=function(t){this._cbr=new tp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ip.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ip.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Sp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ip.prototype.checkValid=function(t){t.isValid()||Vu.out.println("Snapped geometry is invalid")},ip.prototype.computeSnapTolerance=function(){this._snapTolerance=Zh.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ip.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zh.snap(e[0],e[1],this._snapTolerance)},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.overlayOp=function(t,e,n){return new ip(t,e).getResultGeometry(n)},ip.union=function(t,e){return ip.overlayOp(t,e,Sp.UNION)},ip.intersection=function(t,e){return ip.overlayOp(t,e,Sp.INTERSECTION)},ip.symDifference=function(t,e){return ip.overlayOp(t,e,Sp.SYMDIFFERENCE)},ip.difference=function(t,e){return ip.overlayOp(t,e,Sp.DIFFERENCE)};var op=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};op.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Sp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Ju))throw t;r=t}if(!n)try{e=ip.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ju?r:t}return e},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.overlayOp=function(t,e,n){return new op(t,e).getResultGeometry(n)},op.union=function(t,e){return op.overlayOp(t,e,Sp.UNION)},op.intersection=function(t,e){return op.overlayOp(t,e,Sp.INTERSECTION)},op.symDifference=function(t,e){return op.overlayOp(t,e,Sp.SYMDIFFERENCE)},op.difference=function(t,e){return op.overlayOp(t,e,Sp.DIFFERENCE)};var ap=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ap.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap};var sp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},up={INSERT:{configurable:!0},DELETE:{configurable:!0}};sp.prototype.isDelete=function(){return this._eventType===sp.DELETE},sp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},sp.prototype.getObject=function(){return this._obj},sp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},sp.prototype.getInsertEvent=function(){return this._insertEvent},sp.prototype.isInsert=function(){return this._eventType===sp.INSERT},sp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},sp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},sp.prototype.interfaces_=function(){return[bu]},sp.prototype.getClass=function(){return sp},up.INSERT.get=function(){return 1},up.DELETE.get=function(){return 2},Object.defineProperties(sp,up);var cp=function(){};cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var lp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};lp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(lp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},lp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},lp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},lp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},lp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},lp.prototype.hasProperIntersection=function(){return this._hasProper},lp.prototype.hasIntersection=function(){return this._hasIntersection},lp.prototype.isDone=function(){return this._isDone},lp.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},lp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},lp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fp=function(t){function e(){t.call(this),this.events=new xc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$l.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof lp&&Mu(arguments[0],wc)&&Mu(arguments[1],wc)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Mu(arguments[0],wc)&&arguments[1]instanceof lp){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ap(n,i),a=new sp(e,n.getMinX(i),o);this.events.add(a),this.events.add(new sp(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cp),hp=function(){this._min=mu.POSITIVE_INFINITY,this._max=mu.NEGATIVE_INFINITY},pp={NodeComparator:{configurable:!0}};hp.prototype.getMin=function(){return this._min},hp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hp.prototype.getMax=function(){return this._max},hp.prototype.toString=function(){return Ku.toLineString(new xu(this._min,0),new xu(this._max,0))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},pp.NodeComparator.get=function(){return dp},Object.defineProperties(hp,pp);var dp=function(){};dp.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},dp.prototype.interfaces_=function(){return[wu]},dp.prototype.getClass=function(){return dp};var gp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hp),yp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hp),vp=function(){this._leaves=new xc,this._root=null,this._level=0};vp.prototype.buildTree=function(){$l.sort(this._leaves,new hp.NodeComparator);for(var t=this._leaves,e=null,n=new xc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gp(t,e,n))},vp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},vp.prototype.printNode=function(t){Vu.out.println(Ku.toLineString(new xu(t._min,this._level),new xu(t._max,this._level)))},vp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},vp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yp(t.get(n),t.get(n+1));e.add(i)}}},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var mp=function(){this._items=new xc};mp.prototype.visitItem=function(t){this._items.add(t)},mp.prototype.getItems=function(){return this._items},mp.prototype.interfaces_=function(){return[Ql]},mp.prototype.getClass=function(){return mp};var Ap=function(){this._index=null;var t=arguments[0];if(!Mu(t,Jc))throw new vu("Argument must be Polygonal");this._index=new wp(t)},bp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ap.prototype.locate=function(t){var e=new oc(t),n=new _p(e);return this._index.query(t.y,t.y,n),e.getLocation()},Ap.prototype.interfaces_=function(){return[zf]},Ap.prototype.getClass=function(){return Ap},bp.SegmentVisitor.get=function(){return _p},bp.IntervalIndexedGeometry.get=function(){return wp},Object.defineProperties(Ap,bp);var _p=function(){this._counter=null;var t=arguments[0];this._counter=t};_p.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},_p.prototype.interfaces_=function(){return[Ql]},_p.prototype.getClass=function(){return _p};var wp=function(){this._index=new vp;var t=arguments[0];this.init(t)};wp.prototype.init=function(t){for(var e=Eh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gf(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp};var xp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new hl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Oh,2===arguments.length){var e=arguments[0],n=arguments[1],r=pc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;Tu.NONE,r.getLocation(t,Ol.ON)===Tu.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new lp(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof el||this._parentGeom instanceof $c||this._parentGeom instanceof nl,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new lp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Tu.INTERIOR)}else if(arguments[0]instanceof xu){var e=arguments[0];this.insertPoint(this._argIndex,e,Tu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Tu.EXTERIOR,Tu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Tu.INTERIOR,Tu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Tu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Tu.BOUNDARY)},e.prototype.addLineString=function(t){var e=Sc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nh(e,new Rl(this._argIndex,Tu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Tu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Sc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;ac.isCCW(r)&&(i=n,o=e);var a=new nh(r,new Rl(this._argIndex,Tu.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Tu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Rl(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof nl&&(this._useBoundaryDeterminationRule=!1),e instanceof $c)this.addPolygon(e);else if(e instanceof Qc)this.addLineString(e);else if(e instanceof Kc)this.addPoint(e);else if(e instanceof tl)this.addCollection(e);else if(e instanceof Vc)this.addCollection(e);else if(e instanceof nl)this.addCollection(e);else{if(!(e instanceof Gc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Mu(this._parentGeom,Jc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ap(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Tu.BOUNDARY:Tu.INTERIOR},e}(ql),Ep=function(){if(this._li=new rc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new xp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=pc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new xp(0,e,r),this._arg[1]=new xp(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new xp(0,i,a),this._arg[1]=new xp(1,o,a)}};Ep.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ep.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep};var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.map=function(){if(arguments[0]instanceof cc&&Mu(arguments[1],Op.MapOp)){for(var t=arguments[0],e=arguments[1],n=new xc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Mu(arguments[0],Ac)&&Mu(arguments[1],Op.MapOp)){for(var o=arguments[0],a=arguments[1],s=new xc,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Op.MapOp=function(){};var Sp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Oh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xf,this._resultPolyList=new xc,this._resultLineList=new xc,this._resultPointList=new xc,this._graph=new ql(new Hf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Rl(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new xc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Tu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new xc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new xc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qh.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Hl(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wh(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xh(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ol.RIGHT),i.getLocation(1,Ol.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(tc.isTrue(!r.isNull(i,Ol.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ol.LEFT,r.getLocation(i,Ol.LEFT)),tc.isTrue(!r.isNull(i,Ol.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ol.RIGHT,r.getLocation(i,Ol.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ep);Sp.overlayOp=function(t,e,n){return new Sp(t,e).getResultGeometry(n)},Sp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Sp.createEmptyResult(Sp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Hh.map(t,{interfaces_:function(){return[Op.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Sp.INTERSECTION)},Sp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Sp.createEmptyResult(Sp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Sp.SYMDIFFERENCE)},Sp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Sp.INTERSECTION:o=Math.min(r,i);break;case Sp.UNION:o=Math.max(r,i);break;case Sp.DIFFERENCE:o=r;break;case Sp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Sp.createEmptyResult=function(t,e,n,r){var i=null;switch(Sp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Sp.difference=function(t,e){return t.isEmpty()?Sp.createEmptyResult(Sp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Sp.DIFFERENCE))},Sp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Sp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Tu.BOUNDARY&&(i=Tu.INTERIOR),o===Tu.BOUNDARY&&(o=Tu.INTERIOR),a){case Sp.INTERSECTION:return i===Tu.INTERIOR&&o===Tu.INTERIOR;case Sp.UNION:return i===Tu.INTERIOR||o===Tu.INTERIOR;case Sp.DIFFERENCE:return i===Tu.INTERIOR&&o!==Tu.INTERIOR;case Sp.SYMDIFFERENCE:return i===Tu.INTERIOR&&o!==Tu.INTERIOR||i!==Tu.INTERIOR&&o===Tu.INTERIOR}return!1}},Sp.INTERSECTION=1,Sp.UNION=2,Sp.DIFFERENCE=3,Sp.SYMDIFFERENCE=4;var Tp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Oh,this._seg=new gf;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Tp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Tp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Tu.BOUNDARY:this._ptLocator.locate(t,this._g)},Tp.prototype.extractLinework=function(t){var e=new Pp;t.apply(e);var n=e.getLinework(),r=vl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp};var Pp=function(){this._linework=null,this._linework=new xc};Pp.prototype.getLinework=function(){return this._linework},Pp.prototype.filter=function(t){if(t instanceof $c){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pp.prototype.interfaces_=function(){return[zc]},Pp.prototype.getClass=function(){return Pp};var Mp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Mp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Mp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Mp.prototype.getPoints=function(t){for(var e=new xc,n=Eh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Mp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new xu(c-u,l+s);r.add(f)}if(this._doRight){var h=new xu(c+u,l-s);r.add(h)}},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp};var Cp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new xc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Tp(this._geom[0],this._boundaryDistanceTolerance),new Tp(this._geom[1],this._boundaryDistanceTolerance),new Tp(this._geom[2],this._boundaryDistanceTolerance)]},Ip={TOLERANCE:{configurable:!0}};Cp.prototype.reportResult=function(t,e,n){Vu.out.println("Overlay result invalid - A:"+Tu.toLocationSymbol(e[0])+" B:"+Tu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Tu.toLocationSymbol(e[2]))},Cp.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Cp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Cp.hasLocation(this._location,Tu.BOUNDARY)||this.isValidResult(r,this._location)}},Cp.prototype.addTestPts=function(t){var e=new Mp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Cp.prototype.isValidResult=function(t,e){var n=Sp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Tu.INTERIOR);return r||this.reportResult(t,e,n),r},Cp.prototype.getInvalidLocation=function(){return this._invalidLocation},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Cp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zh.computeSizeBasedSnapTolerance(t),Zh.computeSizeBasedSnapTolerance(e))},Cp.isValid=function(t,e,n,r){return new Cp(t,e,r).isValid(n)},Ip.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Cp,Ip);var Rp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Rp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Rp.prototype.combine=function(){for(var t=new xc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.combine=function(){if(1===arguments.length)return new Rp(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Rp(Rp.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Rp(Rp.createList(n,r,i)).combine()}},Rp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Rp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new xc;return a.add(r),a.add(i),a.add(o),a}};var kp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new xc)},jp={STRTREE_NODE_CAPACITY:{configurable:!0}};kp.prototype.reduceToGeometries=function(t){for(var e=new xc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Mu(r,wc)?i=this.unionTree(r):r instanceof cc&&(i=r),e.add(i)}return e},kp.prototype.extractByEnvelope=function(t,e,n){for(var r=new xc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},kp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Rp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},kp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new af(kp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},kp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=kp.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(kp.getGeometry(e,n),kp.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},kp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},kp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},kp.prototype.unionActual=function(t,e){return kp.restrictToPolygons(t.union(e))},kp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},kp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new xc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Rp.combine(r)},kp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.restrictToPolygons=function(t){if(Mu(t,Jc))return t;var e=xh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(vl.toPolygonArray(e))},kp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},kp.union=function(t){return new kp(t).union()},jp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(kp,jp);var Lp=function(){};Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Sp.createEmptyResult(Sp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Sp.UNION)};var Np=function(){return new Hi};Hi.prototype={constructor:Hi,reset:function(){this.s=this.t=0},add:function(t){Wi(Dp,t,this.t),Wi(this,Dp.s,this.s),this.s?this.t+=Dp.t:this.s=Dp.t},valueOf:function(){return this.s}};var Dp=new Hi,Fp=1e-6,Bp=Math.PI,zp=Bp/2,Up=Bp/4,Gp=2*Bp,Vp=180/Bp,qp=Bp/180,Hp=Math.abs,Wp=Math.atan,Xp=Math.atan2,Yp=Math.cos,Qp=Math.exp,Zp=Math.log,Kp=Math.sin,Jp=Math.sqrt,$p=Math.tan,td={Feature:function(t,e){Qi(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Qi(n[r].geometry,e)}},ed={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Zi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Zi(n[r],e,0)},Polygon:function(t,e){Ki(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ki(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Qi(n[r],e)}},nd=function(t,e){t&&td.hasOwnProperty(t.type)?td[t.type](t,e):Qi(t,e)},rd=(Np(),Np(),Np(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});oo.invert=oo;var id=function(t){function e(e){return(e=t(e[0]*qp,e[1]*qp))[0]*=Vp,e[1]*=Vp,e}return t=ao(t[0]*qp,t[1]*qp,t.length>2?t[2]*qp:0),e.invert=function(e){return(e=t.invert(e[0]*qp,e[1]*qp))[0]*=Vp,e[1]*=Vp,e},e},od=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Yi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},ad=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*f,t[1]=u+c*h),l<1&&(e[0]=s+l*f,e[1]=u+l*h),!0}}}}},sd=function(t,e){return Hp(t[0]-e[0])<Fp&&Hp(t[1]-e[1])<Fp},ud=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(sd(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new fo(r,t,null,!0)),u.push(n.o=new fo(r,null,n,!1)),s.push(n=new fo(a,t,null,!1)),u.push(n.o=new fo(a,null,n,!0))}})),s.length){for(u.sort(e),ho(s),ho(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}},cd=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ld=(function(t){1===t.length&&(t=function(t){return function(e,n){return cd(t(e),n)}}(t))}(cd),function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}),fd=1e9,hd=-fd,pd=Np(),dd=(Np(),function(t){return t}),gd=(Np(),Np(),1/0),yd=gd,vd=-gd,md=vd,Ad={point:function(t,e){t<gd&&(gd=t),t>vd&&(vd=t),e<yd&&(yd=e),e>md&&(md=e)},lineStart:Yi,lineEnd:Yi,polygonStart:Yi,polygonEnd:Yi,result:function(){var t=[[gd,yd],[vd,md]];return vd=md=-(yd=gd=1/0),t}},bd=(Np(),function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);y.point(n[0],n[1])}function u(){_.point=s,y.lineStart()}function c(){_.point=a,y.lineEnd()}function l(t,e){g.push([t,e]);var n=i(t,e);A.point(n[0],n[1])}function f(){A.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),A.lineEnd();var t,e,n,r,i=A.clean(),a=m.result(),s=a.length;if(g.pop(),p.push(g),g=null,s)if(1&i){if((e=(n=a[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(go))}var p,d,g,y=e(o),v=i.invert(r[0],r[1]),m=od(),A=e(m),b=!1,_={point:a,lineStart:u,lineEnd:c,polygonStart:function(){_.point=l,_.lineStart=f,_.lineEnd=h,d=[],p=[]},polygonEnd:function(){_.point=a,_.lineStart=u,_.lineEnd=c,d=ld(d);var t=function(t,e){var n=e[0],r=e[1],i=[Kp(n),-Yp(n),0],o=0,a=0;pd.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,f=c[l-1],h=f[0],p=f[1]/2+Up,d=Kp(p),g=Yp(p),y=0;y<l;++y,h=m,d=b,g=_,f=v){var v=c[y],m=v[0],A=v[1]/2+Up,b=Kp(A),_=Yp(A),w=m-h,x=w>=0?1:-1,E=x*w,O=E>Bp,S=d*b;if(pd.add(Xp(S*x*Kp(E),g*_+S*Yp(E))),o+=O?w+x*Gp:w,O^h>=n^m>=n){var T=eo($i(f),$i(v));io(T);var P=eo(i,T);io(P);var M=(O^w>=0?-1:1)*Xi(P[2]);(r>M||r===M&&(T[0]||T[1]))&&(a+=O^w>=0?1:-1)}}return(o<-Fp||o<Fp&&pd<-Fp)^1&a}(p,v);d.length?(b||(o.polygonStart(),b=!0),ud(d,yo,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return _}}),_d=bd((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Bp:-Bp,u=Hp(o-n);Hp(u-Bp)<Fp?(t.point(n,r=(r+a)/2>0?zp:-zp),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Bp&&(Hp(n-i)<Fp&&(n-=i*Fp),Hp(o-s)<Fp&&(o-=s*Fp),r=function(t,e,n,r){var i,o,a=Kp(t-n);return Hp(a)>Fp?Wp((Kp(e)*(o=Yp(r))*Kp(n)-Kp(r)*(i=Yp(e))*Kp(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*zp,r.point(-Bp,i),r.point(0,i),r.point(Bp,i),r.point(Bp,0),r.point(Bp,-i),r.point(0,-i),r.point(-Bp,-i),r.point(-Bp,0),r.point(-Bp,i);else if(Hp(t[0]-e[0])>Fp){var o=t[0]<e[0]?Bp:-Bp;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Bp,-zp]),wd=function(t,e){function n(t,e){return Yp(t)*Yp(e)>o}function r(t,e,n){var r=[1,0,0],i=eo($i(t),$i(e)),a=to(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var c=o*a/u,l=-o*s/u,f=eo(r,i),h=ro(r,c);no(h,ro(i,l));var p=f,d=to(h,p),g=to(p,p),y=d*d-g*(to(h,h)-1);if(!(y<0)){var v=Jp(y),m=ro(p,(-d-v)/g);if(no(m,h),m=Ji(m),!n)return m;var A,b=t[0],_=e[0],w=t[1],x=e[1];_<b&&(A=b,b=_,_=A);var E=_-b,O=Hp(E-Bp)<Fp;if(!O&&x<w&&(A=w,w=x,x=A),O||E<Fp?O?w+x>0^m[1]<(Hp(m[0]-b)<Fp?w:x):w<=m[1]&&m[1]<=x:E>Bp^(b<=m[0]&&m[0]<=_)){var S=ro(p,(-d+v)/g);return no(S,h),[m,Ji(S)]}}}function i(e,n){var r=a?t:Bp-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Yp(t),a=o>0,s=Hp(o)>Fp;return bd(n,(function(t){var e,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var p,d=[f,h],g=n(f,h),y=a?g?0:i(f,h):g?i(f+(f<0?Bp:-Bp),h):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(p=r(e,d))||sd(e,p)||sd(d,p))&&(d[0]+=Fp,d[1]+=Fp,g=n(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(s&&e&&a^g){var v;y&o||!(v=r(d,e,!0))||(l=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&sd(e,d)||t.point(d[0],d[1]),e=d,u=g,o=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Yp(e),s=Kp(e),u=r*n;null==i?(i=e+r*Gp,o=e-u/2):(i=lo(a,i),o=lo(a,o),(r>0?i<o:i>o)&&(i+=r*Gp));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Ji([a,-s*Yp(l),-s*Kp(l)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)}),a?[0,-t]:[-Bp,t-Bp])};mo.prototype={constructor:mo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var xd=16,Ed=Yp(30*qp),Od=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,f,h,p,d,g,y){var v=c-r,m=l-i,A=v*v+m*m;if(A>4*e&&g--){var b=a+h,_=s+p,w=u+d,x=Jp(b*b+_*_+w*w),E=Xi(w/=x),O=Hp(Hp(w)-1)<Fp||Hp(o-f)<Fp?(o+f)/2:Xp(_,b),S=t(O,E),T=S[0],P=S[1],M=T-r,C=P-i,I=m*M-v*C;(I*I/A>e||Hp((v*M+m*C)/A-.5)>.3||a*h+s*p+u*d<Ed)&&(n(r,i,o,a,s,u,T,P,O,b/=x,_/=x,w,g,y),y.point(T,P),n(T,P,O,b,_,w,c,l,f,h,p,d,g,y))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){v=NaN,w.point=o,e.lineStart()}function o(r,i){var o=$i([r,i]),a=t(r,i);n(v,m,y,A,b,_,v=a[0],m=a[1],y=r,A=o[0],b=o[1],_=o[2],xd,e),e.point(v,m)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(l=t,e),f=v,h=m,p=A,d=b,g=_,w.point=o}function c(){n(v,m,y,A,b,_,f,h,l,p,d,g,xd,e),w.lineEnd=a,a()}var l,f,h,p,d,g,y,v,m,A,b,_,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return vo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Sd=vo({point:function(t,e){this.stream.point(t*qp,e*qp)}});_o.invert=function(t,e){return[t,2*Wp(Qp(e))-zp]},wo.invert=function(t,e){return[-e,2*Wp(Qp(t))-zp]};var Td=function(){var t=function(t){function e(){var e=Bp*s(),a=o(id(o.rotate()).invert([0,0]));return c(null==l?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===_o?[[Math.max(a[0]-e,l),n],[Math.min(a[0]+e,r),i]]:[[l,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=bo(t),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}(wo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=Sa,t.random=du,t.clusters=gu,t.helpers=zo,t.invariant=Go,t.meta=Uo,t.isolines=function(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!E(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=rt(t,{zProperty:r,flip:!0});return c(function(t,e,n){var r=G(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,f=o/c,h=function(t){t[0]=t[0]*l+a,t[1]=t[1]*f+s};return t.forEach((function(t){T(t,h)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,i[a]);u[n]=s;var c=l(J(t,s),u);o.push(c)}return o}(a,e,r,i,o),a,t))},t.convex=Mt,t.pointsWithinPolygon=Rt,t.concave=function(t,n){if(!E(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!x(r))throw new Error("maxEdge is invalid");var i=kt(function(t){var e=[],n={};return I(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}})),c(e)}(t));if(i.features=i.features.filter((function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Dt(e,i,n),s=Dt(i,o,n),u=Dt(e,o,n);return a<=r&&s<=r&&u<=r})),i.features.length<1)return null;var o=$t(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Wo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=G(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){Ct([e.minX,e.minY],t)&&n.push(e.property)})),t.properties[r]=n})),t},t.flip=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ft(t)),T(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.simplify=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ft(t)),j(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;te(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=ae(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return ae(t,e,n)}));break;case"Polygon":t.coordinates=se(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return se(t,e,n)}))}}(t,n,r)})),t},t.bezierSpline=ue,t.tag=function(t,e,n,r){return t=Ft(t),e=Ft(e),I(t,(function(t){t.properties||(t.properties={}),I(e,(function(e){void 0===t.properties[r]&&Ct(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=le,t.square=fe,t.circle=pe,t.midpoint=function(t,e){return he(t,Dt(t,e)/2,de(t,e))},t.center=ge,t.centerOfMass=ve,t.centroid=ye,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return I(t,(function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))})),c(Object.keys(r).filter((function(t){return r[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})})))},t.distance=Dt,t.explode=me,t.bbox=G,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Le(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Le(t))})),e},t.bboxPolygon=ce,t.booleanPointInPolygon=Ct,t.nearestPoint=Ne,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return j(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==K(e))throw new Error("line must be a LineString");var o=1/0,a=null;return I(t,(function(t){var n=dn(t,e,{units:r});n<o&&(o=n,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=V(t),r=Q(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],c=n[1],l=r[0][0],f=r[0][1],h=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==a?a:r[1][2],y=r[2][0],v=r[2][1],m=void 0!==s?s:r[2][2];return(m*(u-l)*(c-d)+h*(u-p)*(c-v)+g*(u-y)*(c-f)-g*(u-l)*(c-v)-m*(u-p)*(c-f)-h*(u-y)*(c-d))/((u-l)*(c-d)+(u-p)*(c-v)+(u-y)*(c-f)-(u-l)*(c-v)-(u-p)*(c-f)-(u-y)*(c-d))},t.tin=kt,t.bearing=de,t.destination=he,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,r,i,o,a,s){var u,c,l,f,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==h.x&&null!==h.y&&h:(f=(n-t)*(c=e-o)-(r-e)*(l=t-i),c=((a-i)*c-(s-o)*l)/u,l=f/u,h.x=t+c*(n-t),h.y=e+c*(r-e),c>=0&&c<=1&&(h.onLine1=!0),l>=0&&l<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&i.features.push(r([a[0],a[1]]))}}))})),i},t.pointOnFeature=yn,t.area=mn,t.along=function(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!x(e))throw new Error("distance must be a number");for(var o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var u=de(i[a],i[a-1])-180;return he(i[a],s,u,n)}return r(i[a])}o+=Dt(i[a],i[a+1],n)}return r(i[i.length-1])},t.length=xn,t.lineSlice=function(t,e,n){var r=q(n);if("LineString"!==K(n))throw new Error("line must be a LineString");for(var i,o=on(n,t),a=on(n,e),u=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),s(u,n.properties)},t.lineSliceAlong=En,t.pointGrid=Mn,t.truncate=Cn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return N(t,(function(t){e.push(t)})),c(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return N(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=xn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(En(t,e*a,e*(a+1),{units:n}),a)}(t,e,r,(function(t){o.push(t)}))})),c(o)},t.unkinkPolygon=function(t){var e=[];return N(t,(function(t){"Polygon"===t.geometry.type&&I(Ma(t),(function(n){e.push(o(n.geometry.coordinates,t.properties))}))})),c(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=V(t),e=V(e),r=r||{},i=i||100,o=o||10,new Da({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=K(t),r=K(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Cn(e,{precision:7});switch(r){case"Point":return Ln(t,i);case"MultiPoint":return jn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return jn(t,nn(t,i))}},t.lineArc=Fn,t.polygonToLine=zn,t.lineToPolygon=Gn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=q(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(r=[r]),r.forEach((function(t){Fa(t,e,a)})),1===a.length?s(a[0],i):l(a,i);case"Polygon":return o(Yn(r,e),i);case"MultiPolygon":return h(r.map((function(t){return Yn(t,e)})),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=$n,t.sector=function(t,e,n,r,i){if(!E(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(er(n)===er(r))return pe(t,e,i);var a=q(t),s=[[a]];return T(Fn(t,e,n,r,i),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=an,t.rhumbDistance=un,t.rhumbDestination=nr,t.polygonTangents=function(t,e){var n,i,o,a=q(t),s=q(e);switch(K(e)){case"Polygon":n=s[0][0],i=s[0][0],o=ir(s[0][0],s[0][s[0].length-1],a);var u=rr(s[0],a,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=s[0][0][0],i=s[0][0][0],o=ir(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=rr(t[0],a,o,void 0,n,i);n=e[0],i=e[1]}))}return c([r(n),r(i)])},t.rewind=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ft(t));var i=[];switch(t.type){case"GeometryCollection":return j(t,(function(t){ar(t,n)})),t;case"FeatureCollection":return I(t,(function(t){I(ar(t,n),(function(t){i.push(t)}))})),c(i)}return ar(t,n)},t.isobands=function(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},a=n.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!E(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=cr(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var a=+e[i-1],s=+e[i],u=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||function(t,e){for(var n=me(t),r=0;r<n.features.length;r++)if(!Ct(n.features[r],e))return!1;return!0}(o([e[s].lrCoordinates]),a)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}(function(t){var e=[],n=[];t.forEach((function(t){var r=mn(o([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}(lr(t,a,s-a))),c={};c.groupedRings=u,c[n]=a+"-"+s,r.push(c)}return r}(s,e,r);return c((u=function(t,e,n){var r=G(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,f=o/c,h=function(t){t[0]=t[0]*l+a,t[1]=t[1]*f+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(h)}))}))})),t}(u,s,t)).map((function(t,e){if(a[e]&&!E(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,a[e]);return n[r]=t[r],h(t.groupedRings,n)})))},t.transformRotate=pr,t.transformScale=dr,t.transformTranslate=function(t,e,n,r){if(!E(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=Ft(t)),T(t,(function(t){var r=q(nr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,n){if(!E(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=K(t),o=t.properties;switch(i){case"LineString":return Ar(t,e,r);case"MultiLineString":var a=[];return N(t,(function(t){a.push(Ar(t,e,r).geometry.coordinates)})),l(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=Ds.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){Ls.findEdgeRingContaining(t,r)&&r.push(t)})),c(r.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var n;return N(t,(function(t){N(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!wr(e,t);case"Polygon":return!Ct(t,e)}break;case"LineString":switch(e.type){case"Point":return!wr(t,e);case"LineString":return!function(t,e){return nn(t,e).features.length>0}(t,e);case"Polygon":return!xr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Ct(e,t);case"LineString":return!xr(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Ct(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Ct(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),n},t.booleanContains=function(t,e){var n=K(t),r=K(e),i=Q(t),o=Q(e),a=q(t),s=q(e);switch(n){case"Point":switch(r){case"Point":return Or(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Or(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Or(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return On(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(On({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!On({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(On(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!On(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Ct(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Er(G(t),G(e)))return!1;for(;r<e.coordinates.length-1;r++)if(Ct({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(i,o);case"Polygon":return function(t,e){if(!Er(G(t),G(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!Ct(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Ct(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=K(t),r=K(e),i=Q(t),o=Q(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Sr(i,o);case"Polygon":return Pr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Sr(o,i);case"LineString":return function(t,e){if(nn(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Mr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return Tr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Pr(o,i);case"LineString":return Tr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=or,t.booleanOverlap=kr,t.booleanPointOnLine=On,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return K(t)===K(e)&&new Gs({precision:6}).compare(te(t),te(e))},t.booleanWithin=Sn,t.clone=Ft,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(Y(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Ft(t),r=r||3;var o=new Xs.DBSCAN,a=-1;return o.run(k(t),_(e,i),r,Dt).forEach((function(e){a++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"}))})),o.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;Y(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Ft(t));var o=k(t),a=o.slice(0,n),s=eu(o,n,a),u={};return s.centroids.forEach((function(t,e){u[e]=t})),I(t,(function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]})),t},t.pointToLineDistance=dn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Lr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Lr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,r=en(te(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){return m(an(t[0],t[1]))===m(an(e[0],e[1]))}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(!E(i=i||{}))throw new Error("options is invalid");var o=i.resolution,a=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!x(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var l=V(t),f=V(n);switch(t=r(l),n=r(f),K(u)){case"FeatureCollection":if(0===u.features.length)return s([l,f]);break;case"Polygon":u=c([e(Q(u))]);break;default:throw new Error("invalid obstacles")}var h=u;h.features.push(t),h.features.push(n);var p=G(dr(ce(G(h)),1.15));o||(o=Dt([p[0],p[1]],[p[2],p[1]],i)/100),h.features.pop(),h.features.pop();for(var d=p[0],g=p[1],y=p[2],v=p[3],m=o/Dt([d,g],[y,g],i)*(y-d),A=o/Dt([d,g],[d,v],i)*(v-g),b=y-d,_=v-g,w=(b-Math.floor(b/m)*m)/2,O=[],S=[],T=[],P=[],M=1/0,C=1/0,I=v-(_-Math.floor(_/A)*A)/2,R=0;I>=g;){for(var k=[],j=[],L=d+w,N=0;L<=y;){var D=r([L,I]),F=function(t,e){for(var n=0;n<e.features.length;n++)if(Ct(t,e.features[n]))return!0;return!1}(D,u);k.push(F?0:1),j.push(L+"|"+I);var B=Dt(D,t);!F&&B<M&&(M=B,T={x:N,y:R});var z=Dt(D,n);!F&&z<C&&(C=z,P={x:N,y:R}),L+=m,N++}S.push(k),O.push(j),I-=A,R++}var U=new Dr(S,{diagonal:!0}),q=U.grid[T.y][T.x],H=U.grid[P.y][P.x],W=[l];return nu.search(U,q,H).forEach((function(t){var e=O[t.x][t.y].split("|");W.push([+e[0],+e[1]])})),W.push(f),te(s(W))},t.voronoi=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Y(t,"Point","points"),c(pu().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(fi))},t.ellipse=hi,t.centerMean=di,t.centerMedian=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!x(n))throw new Error("counter must be a number");var r=e.weight,i=di(t,{weight:e.weight}),o=c([]);return I(t,(function(t){o.features.push(ye(t,{weight:t.properties[r]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},gi(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!x(n))throw new Error("steps must be a number");if(!E(i))throw new Error("properties must be a number");var o=k(t).length,a=di(t,{weight:r}),s=0,u=0,l=0;I(t,(function(t){var e=t.properties[r]||1,n=yi(q(t),q(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e}));var f=s-u,h=Math.sqrt(Math.pow(f,2)+4*Math.pow(l,2)),p=2*l,d=Math.atan((f+h)/p),g=180*d/Math.PI,y=0,v=0,m=0;I(t,(function(t){var e=t.properties[r]||1,n=yi(q(t),q(a));y+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,v+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,m+=e}));var A=Math.sqrt(2*y/m),b=Math.sqrt(2*v/m),_=hi(a,A,b,{units:"degrees",angle:g,steps:n,properties:i}),w=Rt(t,c([_])),O={meanCenterCoordinates:q(a),semiMajorAxis:A,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*k(w).length/o};return _.properties.standardDeviationalEllipse=O,_},t.difference=function(t,n){var r=Q(t),i=Q(n),o=t.properties||{};if(r=qi(r),i=qi(i),!r)return null;if(!i)return e(r,o);var a=new xl,s=a.read(r),u=a.read(i),c=Sp.difference(s,u);return c.isEmpty()?null:e((new El).write(c),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return j(t,(function(t){var n=xo(t,e,r,i);n&&o.push(n)})),c(o);case"FeatureCollection":return I(t,(function(t){var n=xo(t,e,r,i);n&&I(n,(function(t){t&&o.push(t)}))})),c(o)}return xo(t,e,r,i)},t.union=Po,t.intersect=Mo,t.dissolve=function(t,e){if(!E(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;Y(t,"Polygon","dissolve");var r=Ft(t),i=r.features,o=[];i.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=Je();for(var u in a.load(r),i){var c=i[u],l=!1;if(a.search(c).features.forEach((function(t){c=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Co(e,o);0!==r&&(e-=r)}if(e!==+u){var f=i[e];f&&c&&(void 0!==n&&f.properties[n]!==c.properties[n]||kr(c,f)&&function(t,e){return nn(s(k(t)),s(k(e))).features.length>0}(c,f)&&(i[u]=Po(c,f),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,a.remove(c,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),l=!0))}})),l){if(!c)continue;c.properties.origIndexPosition=u,a.insert(c),u--}}return i.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),r},t.hexGrid=Io,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],n=[];return N(t,(function(t){var r=t.geometry.coordinates,i=r[0],a=r.slice(1);e.push(o([i])),a.forEach((function(t){n.push(o([t]))}))})),[c(e),c(n)]}(t),i=r[0],a=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),N(e,(function(t){r.push(t.geometry.coordinates[0])})),N(n,(function(t){r.push(t.geometry.coordinates[0])})),o(r)}(n,i=Ro(i),a=Ro(a))},t.squareGrid=jo,t.triangleGrid=Lo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(Y(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=G(t);switch(r){case"point":case"points":a=Mn(s,e,n);break;case"square":case"squares":a=jo(s,e,n);break;case"hex":case"hexes":a=Io(s,e,n);break;case"triangle":case"triangles":a=Lo(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return I(a,(function(e){var a=0,s=0;I(t,(function(t){var u,c=Dt("point"===r?e:ye(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(a=u);var l=1/Math.pow(c,o);s+=l,a+=l*u}));var c=Ft(e);c.properties[i]=a/s,u.push(c)})),c(u)},t.pointOnSurface=yn,t.polygonToLineString=zn,t.lineStringToPolygon=Gn,t.inside=Ct,t.within=Rt,t.bezier=ue,t.nearest=Ne,t.pointOnLine=on,t.lineDistance=xn,t.radians2degrees=A,t.degrees2radians=b,t.distanceToDegrees=v,t.distanceToRadians=y,t.radiansToDistance=g,t.bearingToAngle=m,t.convertDistance=_,t.toMercator=cn,t.toWgs84=ln,t.randomPosition=vi,t.randomPoint=mi,t.randomPolygon=Ai,t.randomLineString=bi,t.getCluster=wi,t.clusterEach=xi,t.clusterReduce=Ei,t.createBins=Oi,t.applyFilter=Si,t.propertiesContainsFilter=Ti,t.filterProperties=Pi,t.earthRadius=No,t.factors=Do,t.unitsFactors=Fo,t.areaFactors=Bo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=c,t.multiLineString=l,t.multiPoint=f,t.multiPolygon=h,t.geometryCollection=p,t.round=d,t.radiansToLength=g,t.lengthToRadians=y,t.lengthToDegrees=v,t.bearingToAzimuth=m,t.radiansToDegrees=A,t.degreesToRadians=b,t.convertLength=_,t.convertArea=w,t.isNumber=x,t.isObject=E,t.validateBBox=O,t.validateId=S,t.getCoord=V,t.getCoords=q,t.containsNumber=H,t.geojsonType=W,t.featureOf=X,t.collectionOf=Y,t.getGeom=Q,t.getGeomType=Z,t.getType=K,t.coordEach=T,t.coordReduce=P,t.propEach=M,t.propReduce=C,t.featureEach=I,t.featureReduce=R,t.coordAll=k,t.geomEach=j,t.geomReduce=L,t.flattenEach=N,t.flattenReduce=D,t.segmentEach=F,t.segmentReduce=B,t.lineEach=z,t.lineReduce=U,Object.defineProperty(t,"__esModule",{value:!0})}(e)},,,function(t,e,n){"use strict";var r=n(176),i=n(428);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return o.self}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return o.window}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return o.global}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return o.document}}),Object.defineProperty(e,"process",{enumerable:!0,get:function(){return o.process}}),Object.defineProperty(e,"console",{enumerable:!0,get:function(){return o.console}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"isBrowserMainThread",{enumerable:!0,get:function(){return a.isBrowserMainThread}}),Object.defineProperty(e,"getBrowser",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return s.isMobile}}),Object.defineProperty(e,"isElectron",{enumerable:!0,get:function(){return u.default}});var o=n(313),a=i(n(314)),s=i(n(429)),u=r(n(262))},function(t,e,n){var r=n(205);function i(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}},function(t,e,n){"use strict";var r=n(176);Object.defineProperty(e,"__esModule",{value:!0}),e.isMobile=function(){return"undefined"!==typeof i.window.orientation},e.default=function(t){if(!t&&!(0,o.default)())return"Node";if((0,a.default)(t))return"Electron";var e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),s=-1!==n.indexOf("Trident/");if(r||s)return"IE";if(i.window.chrome)return"Chrome";if(i.window.safari)return"Safari";if(i.window.mozInnerScreenX)return"Firefox";return"Unknown"};var i=n(313),o=r(n(314)),a=r(n(262))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(432);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(177);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,f,h=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,v=g?t.features.length:1,m=0;m<v;m++){u=(f=!!(l=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var A=0;A<u;A++){var b=0,_=0;if(null!==(s=f?l.geometries[A]:l)){c=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,m,b,_))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],p,m,b,_))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-h;o++){if(!1===e(c[r][o],p,m,b,_))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(_=0,o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-h;a++){if(!1===e(c[r][o][a],p,m,b,_))return!1;p++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function u(t,e){s(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:s,coordinates:t.coordinates[c]};if(!1===e(r.feature(l,i),n,c))return!1}}))}function c(t,e){u(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,f=0;return!1!==i(t,(function(i,s,h,p,d){if(void 0===u||n>c||p>l||d>f)return u=i,c=n,l=p,f=d,void(a=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function l(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,i=!1;return c(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r},e.lineEach=l,e.lineReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),r.lineString([c[s],c[s+1]],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),r.lineString([c[a][s],c[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),r.lineString([c[o][s],c[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),r.lineString([c[o][a][s],c[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),r.point(c[o],u,e);case"LineString":return s<0&&(s=c.length+s),r.point(c[s],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),r.point(c[a][s],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),r.point(c[o][s],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),r.point(c[o][a][s],u,e)}throw new Error("geojson is invalid")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(177);e.default=function(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),o=Number(t[2]),a=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i],u=[n,a],c=[o,a],l=[o,i];return r.polygon([[s,l,c,u,s]],e.properties,{bbox:t,id:e.id})}},function(t,e,n){!function(t){"use strict";function e(t,e){return t>e?1:t<e?-1:0}var n=function(t,n){void 0===t&&(t=e),void 0===n&&(n=!1),this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!n},r={size:{configurable:!0}};function i(t,e,n,r,o){var a=o-r;if(a>0){var s=r+Math.floor(a/2),u={key:e[s],data:n[s],parent:t};return u.left=i(u,e,n,r,s),u.right=i(u,e,n,s+1,o),u}return null}function o(t,e,n,r,i){if(!(n>=r)){for(var a=t[n+r>>1],s=n-1,u=r+1;;){do{s++}while(i(t[s],a)<0);do{u--}while(i(t[u],a)>0);if(s>=u)break;var c=t[s];t[s]=t[u],t[u]=c,c=e[s],e[s]=e[u],e[u]=c}o(t,e,n,u,i),o(t,e,u+1,r,i)}}n.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},n.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},n.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},n.prototype.splay=function(t){for(var e,n,r,i,o;t.parent;)(n=(e=t.parent).parent)&&n.parent?((r=n.parent).left===n?r.left=t:r.right=t,t.parent=r):(t.parent=null,this._root=t),i=t.left,o=t.right,t===e.left?(n&&(n.left===e?(e.right?(n.left=e.right,n.left.parent=n):n.left=null,e.right=n,n.parent=e):(i?(n.right=i,i.parent=n):n.right=null,t.left=n,n.parent=t)),o?(e.left=o,o.parent=e):e.left=null,t.right=e,e.parent=t):(n&&(n.right===e?(e.left?(n.right=e.left,n.right.parent=n):n.right=null,e.left=n,n.parent=e):(o?(n.left=o,o.parent=n):n.left=null,t.right=n,n.parent=t)),i?(e.right=i,i.parent=e):e.right=null,t.left=e,e.parent=t)},n.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},n.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},n.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},n.prototype.insert=function(t,e){var n=this._root,r=null,i=this._compare;if(this._noDuplicates)for(;n;){if(r=n,0===i(n.key,t))return;n=i(n.key,t)<0?n.right:n.left}else for(;n;)r=n,n=i(n.key,t)<0?n.right:n.left;return n={key:t,data:e,left:null,right:null,parent:r},r?i(r.key,n.key)<0?r.right=n:r.left=n:this._root=n,this.splay(n),this._size++,n},n.prototype.find=function(t){for(var e=this._root,n=this._compare;e;){var r=n(e.key,t);if(r<0)e=e.right;else{if(!(r>0))return e;e=e.left}}return null},n.prototype.contains=function(t){for(var e=this._root,n=this._compare;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},n.prototype.remove=function(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var n=this.minNode(e.right);n.parent!==e&&(this.replace(n,n.right),n.right=e.right,n.right.parent=n),this.replace(e,n),n.left=e.left,n.left.parent=n}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},n.prototype.removeNode=function(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},n.prototype.erase=function(t){var e=this.find(t);if(e){this.splay(e);var n=e.left,r=e.right,i=null;n&&(n.parent=null,i=this.maxNode(n),this.splay(i),this._root=i),r&&(n?i.right=r:this._root=r,r.parent=i),this._size--}},n.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},n.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e},n.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e},n.prototype.forEach=function(t){for(var e=this._root,n=[],r=!1,i=0;!r;)e?(n.push(e),e=e.left):n.length>0?(t(e=n.pop(),i++),e=e.right):r=!0;return this},n.prototype.range=function(t,e,n,r){for(var i=[],o=this._compare,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},n.prototype.keys=function(){for(var t=this._root,e=[],n=[],r=!1;!r;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.key),t=t.right):r=!0;return n},n.prototype.values=function(){for(var t=this._root,e=[],n=[],r=!1;!r;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),n.push(t.data),t=t.right):r=!0;return n},n.prototype.at=function(t){for(var e=this._root,n=[],r=!1,i=0;!r;)if(e)n.push(e),e=e.left;else if(n.length>0){if(e=n.pop(),i===t)return e;i++,e=e.right}else r=!0;return null},n.prototype.load=function(t,e,n){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var r=t.length;return n&&o(t,e,0,r-1,this._compare),this._root=i(null,t,e,0,r),this._size=r,this},n.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},n.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},n.prototype.isEmpty=function(){return null===this._root},r.size.get=function(){return this._size},n.createTree=function(t,e,r,i,o){return new n(r,o).load(t,e,i)},Object.defineProperties(n.prototype,r);var a=0,s=1,u=2,c=3,l=0,f=1,h=2,p=3;function d(t,e,n){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!g(e,n)||e.isVertical()?e.prevInResult:e));var r=g(t,n);t.resultTransition=r?y(t,n):0}function g(t,e){switch(t.type){case a:switch(e){case l:return!t.otherInOut;case f:return t.otherInOut;case h:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case p:return!0}break;case u:return e===l||e===f;case c:return e===h;case s:return!1}return!1}function y(t,e){var n,r=!t.inOut,i=!t.otherInOut;switch(e){case l:n=r&&i;break;case f:n=r||i;break;case p:n=r^i;break;case h:n=t.isSubject?r&&!i:i&&!r}return n?1:-1}var v=function(t,e,n,r,i){this.left=e,this.point=t,this.otherEvent=n,this.isSubject=r,this.type=i||a,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},m={inResult:{configurable:!0}};function A(t,e){return t[0]===e[0]&&t[1]===e[1]}v.prototype.isBelow=function(t){var e=this.point,n=this.otherEvent.point;return this.left?(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])>0:(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])>0},v.prototype.isAbove=function(t){return!this.isBelow(t)},v.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},m.inResult.get=function(){return 0!==this.resultTransition},v.prototype.clone=function(){var t=new v(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(v.prototype,m);var b=11102230246251565e-32,_=134217729,w=(3+8*b)*b;function x(t,e,n,r,i){var o,a,s,u,c=e[0],l=r[0],f=0,h=0;l>c===l>-c?(o=c,c=e[++f]):(o=l,l=r[++h]);var p=0;if(f<t&&h<n)for(l>c===l>-c?(s=o-((a=c+o)-c),c=e[++f]):(s=o-((a=l+o)-l),l=r[++h]),o=a,0!==s&&(i[p++]=s);f<t&&h<n;)l>c===l>-c?(s=o-((a=o+c)-(u=a-o))+(c-u),c=e[++f]):(s=o-((a=o+l)-(u=a-o))+(l-u),l=r[++h]),o=a,0!==s&&(i[p++]=s);for(;f<t;)s=o-((a=o+c)-(u=a-o))+(c-u),c=e[++f],o=a,0!==s&&(i[p++]=s);for(;h<n;)s=o-((a=o+l)-(u=a-o))+(l-u),l=r[++h],o=a,0!==s&&(i[p++]=s);return 0===o&&0!==p||(i[p++]=o),p}function E(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}function O(t){return new Float64Array(t)}var S=(3+16*b)*b,T=(2+12*b)*b,P=(9+64*b)*b*b,M=O(4),C=O(8),I=O(12),R=O(16),k=O(4);function j(t,e,n,r,i,o,a){var s,u,c,l,f,h,p,d,g,y,v,m,A,b,O,S,j,L,N=t-i,D=n-i,F=e-o,B=r-o;f=(O=(d=N-(p=(h=_*N)-(h-N)))*(y=B-(g=(h=_*B)-(h-B)))-((b=N*B)-p*g-d*g-p*y))-(v=O-(j=(d=F-(p=(h=_*F)-(h-F)))*(y=D-(g=(h=_*D)-(h-D)))-((S=F*D)-p*g-d*g-p*y))),M[0]=O-(v+f)+(f-j),f=(A=b-((m=b+v)-(f=m-b))+(v-f))-(v=A-S),M[1]=A-(v+f)+(f-S),f=(L=m+v)-m,M[2]=m-(L-f)+(v-f),M[3]=L;var z=E(4,M),U=T*a;if(z>=U||-z>=U)return z;if(s=t-(N+(f=t-N))+(f-i),c=n-(D+(f=n-D))+(f-i),u=e-(F+(f=e-F))+(f-o),l=r-(B+(f=r-B))+(f-o),0===s&&0===u&&0===c&&0===l)return z;if(U=P*a+w*Math.abs(z),(z+=N*l+B*s-(F*c+D*u))>=U||-z>=U)return z;f=(O=(d=s-(p=(h=_*s)-(h-s)))*(y=B-(g=(h=_*B)-(h-B)))-((b=s*B)-p*g-d*g-p*y))-(v=O-(j=(d=u-(p=(h=_*u)-(h-u)))*(y=D-(g=(h=_*D)-(h-D)))-((S=u*D)-p*g-d*g-p*y))),k[0]=O-(v+f)+(f-j),f=(A=b-((m=b+v)-(f=m-b))+(v-f))-(v=A-S),k[1]=A-(v+f)+(f-S),f=(L=m+v)-m,k[2]=m-(L-f)+(v-f),k[3]=L;var G=x(4,M,4,k,C);f=(O=(d=N-(p=(h=_*N)-(h-N)))*(y=l-(g=(h=_*l)-(h-l)))-((b=N*l)-p*g-d*g-p*y))-(v=O-(j=(d=F-(p=(h=_*F)-(h-F)))*(y=c-(g=(h=_*c)-(h-c)))-((S=F*c)-p*g-d*g-p*y))),k[0]=O-(v+f)+(f-j),f=(A=b-((m=b+v)-(f=m-b))+(v-f))-(v=A-S),k[1]=A-(v+f)+(f-S),f=(L=m+v)-m,k[2]=m-(L-f)+(v-f),k[3]=L;var V=x(G,C,4,k,I);f=(O=(d=s-(p=(h=_*s)-(h-s)))*(y=l-(g=(h=_*l)-(h-l)))-((b=s*l)-p*g-d*g-p*y))-(v=O-(j=(d=u-(p=(h=_*u)-(h-u)))*(y=c-(g=(h=_*c)-(h-c)))-((S=u*c)-p*g-d*g-p*y))),k[0]=O-(v+f)+(f-j),f=(A=b-((m=b+v)-(f=m-b))+(v-f))-(v=A-S),k[1]=A-(v+f)+(f-S),f=(L=m+v)-m,k[2]=m-(L-f)+(v-f),k[3]=L;var q=x(V,I,4,k,R);return R[q-1]}function L(t,e,n,r,i,o){var a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s;if(0===a||0===s||a>0!==s>0)return u;var c=Math.abs(a+s);return Math.abs(u)>=S*c?u:-j(t,e,n,r,i,o,c)}function N(t,e,n){var r=L(t[0],t[1],e[0],e[1],n[0],n[1]);return r>0?-1:r<0?1:0}function D(t,e){var n=t.point,r=e.point;return n[0]>r[0]?1:n[0]<r[0]?-1:n[1]!==r[1]?n[1]>r[1]?1:-1:F(t,e,n)}function F(t,e,n,r){return t.left!==e.left?t.left?1:-1:0!==N(n,t.otherEvent.point,e.otherEvent.point)?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}function B(t,e,n){var r=new v(e,!1,t,t.isSubject),i=new v(e,!0,t.otherEvent,t.isSubject);return A(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),r.contourId=i.contourId=t.contourId,D(i,t.otherEvent)>0&&(t.otherEvent.left=!0,i.left=!1),t.otherEvent.otherEvent=i,t.otherEvent=r,n.push(i),n.push(r),n}function z(t,e){return t[0]*e[1]-t[1]*e[0]}function U(t,e){return t[0]*e[0]+t[1]*e[1]}function G(t,e,n,r,i){var o=[e[0]-t[0],e[1]-t[1]],a=[r[0]-n[0],r[1]-n[1]];function s(t,e,n){return[t[0]+e*n[0],t[1]+e*n[1]]}var u=[n[0]-t[0],n[1]-t[1]],c=z(o,a),l=c*c,f=U(o,o);if(l>0){var h=z(u,a)/c;if(h<0||h>1)return null;var p=z(u,o)/c;return p<0||p>1?null:0===h||1===h?i?null:[s(t,h,o)]:0===p||1===p?i?null:[s(n,p,a)]:[s(t,h,o)]}if((l=(c=z(u,o))*c)>0)return null;var d=U(o,u)/f,g=d+U(o,a)/f,y=Math.min(d,g),v=Math.max(d,g);return y<=1&&v>=0?1===y?i?null:[s(t,y>0?y:0,o)]:0===v?i?null:[s(t,v<1?v:1,o)]:i&&0===y&&1===v?null:[s(t,y>0?y:0,o),s(t,v<1?v:1,o)]:null}function V(t,e,n){var r=G(t.point,t.otherEvent.point,e.point,e.otherEvent.point),i=r?r.length:0;if(0===i)return 0;if(1===i&&(A(t.point,e.point)||A(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===i&&t.isSubject===e.isSubject)return 0;if(1===i)return A(t.point,r[0])||A(t.otherEvent.point,r[0])||B(t,r[0],n),A(e.point,r[0])||A(e.otherEvent.point,r[0])||B(e,r[0],n),1;var o=[],a=!1,l=!1;return A(t.point,e.point)?a=!0:1===D(t,e)?o.push(e,t):o.push(t,e),A(t.otherEvent.point,e.otherEvent.point)?l=!0:1===D(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),a&&l||a?(e.type=s,t.type=e.inOut===t.inOut?u:c,a&&!l&&B(o[1].otherEvent,o[0].point,n),2):l?(B(o[0],o[1].point,n),3):o[0]!==o[3].otherEvent?(B(o[0],o[1].point,n),B(o[1],o[2].point,n),3):(B(o[0],o[1].point,n),B(o[3].otherEvent,o[2].point,n),3)}function q(t,e){if(t===e)return 0;if(0!==N(t.point,t.otherEvent.point,e.point)||0!==N(t.point,t.otherEvent.point,e.otherEvent.point))return A(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===D(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var n=t.point,r=e.point;return n[0]===r[0]&&n[1]===r[1]?(n=t.otherEvent.point,r=e.otherEvent.point,n[0]===r[0]&&n[1]===r[1]?0:t.contourId>e.contourId?1:-1):1===D(t,e)?1:-1}function H(t,e,r,i,o,a){for(var s,u,c,f=new n(q),p=[],g=Math.min(i[2],o[2]);0!==t.length;){var y=t.pop();if(p.push(y),a===l&&y.point[0]>g||a===h&&y.point[0]>i[2])break;if(y.left){u=s=f.insert(y),s=s!==(c=f.minNode())?f.prev(s):null,u=f.next(u);var v=s?s.key:null;if(d(y,v,a),u&&2===V(y,u.key,t)&&(d(y,v,a),d(y,u.key,a)),s&&2===V(s.key,y,t)){var m=s;d(v,(m=m!==c?f.prev(m):null)?m.key:null,a),d(y,v,a)}}else y=y.otherEvent,u=s=f.find(y),s&&u&&(s=s!==c?f.prev(s):null,u=f.next(u),f.remove(y),u&&s&&V(s.key,u.key,t))}return p}var W=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function X(t){var e,n,r,i,o=[];for(n=0,r=t.length;n<r;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var a=!1;!a;)for(a=!0,n=0,r=o.length;n<r;n++)n+1<r&&1===D(o[n],o[n+1])&&(i=o[n],o[n]=o[n+1],o[n+1]=i,a=!1);for(n=0,r=o.length;n<r;n++)(e=o[n]).otherPos=n;for(n=0,r=o.length;n<r;n++)(e=o[n]).left||(i=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=i);return o}function Y(t,e,n,r){var i,o=t+1,a=e[t].point,s=e.length;for(o<s&&(i=e[o].point);o<s&&i[0]===a[0]&&i[1]===a[1];){if(!n[o])return o;i=e[++o].point}for(o=t-1;n[o]&&o>r;)o--;return o}function Q(t,e,n){var r=new W;if(null!=t.prevInResult){var i=t.prevInResult,o=i.outputContourId;if(i.resultTransition>0){var a=e[o];if(null!=a.holeOf){var s=a.holeOf;e[s].holeIds.push(n),r.holeOf=s,r.depth=e[o].depth}else e[o].holeIds.push(n),r.holeOf=o,r.depth=e[o].depth+1}else r.holeOf=null,r.depth=e[o].depth}else r.holeOf=null,r.depth=0;return r}function Z(t){var e,n,r=X(t),i={},o=[],a=function(){if(!i[e]){var t=o.length,n=Q(r[e],o,t),a=function(e){i[e]=!0,r[e].outputContourId=t},s=e,u=e,c=r[e].point;for(n.points.push(c);a(s),a(s=r[s].otherPos),n.points.push(r[s].point),(s=Y(s,r,i,u))!=u;);o.push(n)}};for(e=0,n=r.length;e<n;e++)a();return o}W.prototype.isExterior=function(){return null==this.holeOf};var K=$,J=$;function $(t,e){if(!(this instanceof $))return new $(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||tt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function tt(t,e){return t<e?-1:t>e?1:0}$.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},K.default=J;var et=Math.max,nt=Math.min,rt=0;function it(t,e,n,r,i,o){var a,s,u,c,l,f;for(a=0,s=t.length-1;a<s;a++)if(u=t[a],c=t[a+1],l=new v(u,!1,void 0,e),f=new v(c,!1,l,e),l.otherEvent=f,u[0]!==c[0]||u[1]!==c[1]){l.contourId=f.contourId=n,o||(l.isExteriorRing=!1,f.isExteriorRing=!1),D(l,f)>0?f.left=!0:l.left=!0;var h=u[0],p=u[1];i[0]=nt(i[0],h),i[1]=nt(i[1],p),i[2]=et(i[2],h),i[3]=et(i[3],p),r.push(l),r.push(f)}}function ot(t,e,n,r,i){var o,a,s,u,c,l,f=new K(null,D);for(s=0,u=t.length;s<u;s++)for(c=0,l=(o=t[s]).length;c<l;c++)(a=0===c)&&rt++,it(o[c],!0,rt,f,n,a);for(s=0,u=e.length;s<u;s++)for(c=0,l=(o=e[s]).length;c<l;c++)a=0===c,i===h&&(a=!1),a&&rt++,it(o[c],!1,rt,f,r,a);return f}var at=[];function st(t,e,n){var r=null;return t.length*e.length===0&&(n===l?r=at:n===h?r=t:n!==f&&n!==p||(r=0===t.length?e:t)),r}function ut(t,e,n,r,i){var o=null;return(n[0]>r[2]||r[0]>n[2]||n[1]>r[3]||r[1]>n[3])&&(i===l?o=at:i===h?o=t:i!==f&&i!==p||(o=t.concat(e))),o}function ct(t,e,n){"number"===typeof t[0][0][0]&&(t=[t]),"number"===typeof e[0][0][0]&&(e=[e]);var r=st(t,e,n);if(r)return r===at?null:r;var i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=ot(t,e,i,o,n);if(r=ut(t,e,i,o,n))return r===at?null:r;for(var s=Z(H(a,t,e,i,o,n)),u=[],c=0;c<s.length;c++){var l=s[c];if(l.isExterior()){for(var f=[l.points],h=0;h<l.holeIds.length;h++){var p=l.holeIds[h];f.push(s[p].points)}u.push(f)}}return u}function lt(t,e){return ct(t,e,f)}function ft(t,e){return ct(t,e,h)}function ht(t,e){return ct(t,e,p)}function pt(t,e){return ct(t,e,l)}var dt={UNION:f,DIFFERENCE:h,INTERSECTION:l,XOR:p};t.diff=ft,t.intersection=pt,t.operations=dt,t.union=lt,t.xor=ht,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(329),i=6378137;function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(a(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(a(t[n]))}return e}function a(t){var e,n,r,o,a,u,c=0,l=t.length;if(l>2){for(u=0;u<l;u++)u===l-2?(r=l-2,o=l-1,a=0):u===l-1?(r=l-1,o=0,a=1):(r=u,o=u+1,a=u+2),e=t[r],n=t[o],c+=(s(t[a][0])-s(e[0]))*Math.sin(s(n[1]));c=c*i*i/2}return c}function s(t){return t*Math.PI/180}e.default=function(t){return r.geomReduce(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(264);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(438),i=n(177);e.default=function(t,e,n){void 0===n&&(n={});var o=r.getCoord(t),a=r.getCoord(e),s=i.degreesToRadians(a[1]-o[1]),u=i.degreesToRadians(a[0]-o[0]),c=i.degreesToRadians(o[1]),l=i.degreesToRadians(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(l);return i.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(177);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,t),o(this,"geoJson",void 0),o(this,"style",void 0),o(this,"original",void 0),o(this,"metadata",void 0),this.geoJson=e,this.style=n,this.original=i,this.metadata=a}var e,n,a;return e=t,(n=[{key:"getCoords",value:function(){return this.geoJson.geometry.coordinates}}])&&i(e.prototype,n),a&&i(e,a),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(265),i=s(n(178)),o=n(212),a=s(n(278));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,i,s,u=(e=g,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function g(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),e=u.call(this,t),n=f(e),i=void 0,(r="deckCache")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.deckCache=new a.default(t.getData,(function(e){return t.toNebulaFeature(e)})),e.enablePicking=!0,e}return n=g,(i=[{key:"render",value:function(t){t.nebula;var e=[0,0,0,255],n=this.deckCache,i=n.objects,a=n.updateTrigger;return new r.JunctionScatterplotLayer({id:"junctions-".concat(this.id),data:i,opacity:1,fp64:!1,pickable:!0,getPosition:function(t){return t.geoJson.geometry.coordinates},getFillColor:function(t){return(0,o.toDeckColor)(t.style.fillColor)||e},getStrokeColor:function(t){return(0,o.toDeckColor)(t.style.outlineColor)||(0,o.toDeckColor)(t.style.fillColor)||e},getRadius:function(t){return t.style.pointRadiusMeters+t.style.outlineRadiusMeters||1},getInnerRadius:function(t){return t.style.pointRadiusMeters||.5},parameters:{depthTest:!1,blend:!1},updateTriggers:{all:a},nebulaLayer:this})}}])&&c(n.prototype,i),s&&c(n,s),g}(i.default);e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_ARROWS=e.DEFAULT_ARROWS=e.ArrowStyles=void 0;e.ArrowStyles={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3};e.DEFAULT_ARROWS=1;e.MAX_ARROWS=3},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(332),i=n(91),o=n(44);e.default=function(t,e,n){void 0===n&&(n={});var a=i.getGeom(t).coordinates,s=i.getGeom(e).coordinates,u=r.union(a,s);return 0===u.length?null:1===u.length?o.polygon(u[0],n.properties):o.multiPolygon(u,n.properties)}},function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(44),o=n(91),a=r(n(332));e.default=function t(e,n,r){void 0===r&&(r={});var s=o.getGeom(e),u=o.getGeom(n);if("Polygon"===s.type&&"Polygon"===u.type){var c=a.intersection(s.coordinates,u.coordinates);if(null===c||0===c.length)return null;if(1===c.length){var l=c[0][0][0],f=c[0][0][c[0][0].length-1];return l[0]===f[0]&&l[1]===f[1]?i.polygon(c[0],r.properties):null}return i.multiPolygon(c,r.properties)}if("MultiPolygon"===s.type){for(var h=[],p=0,d=s.coordinates;p<d.length;p++){var g=d[p],y=t(o.getGeom(i.polygon(g)),u);if(y){var v=o.getGeom(y);if("Polygon"===v.type)h.push(v.coordinates);else{if("MultiPolygon"!==v.type)throw new Error("intersection is invalid");h=h.concat(v.coordinates)}}}return 0===h.length?null:1===h.length?i.polygon(h[0],r.properties):i.multiPolygon(h,r.properties)}if("MultiPolygon"===u.type)return t(u,s);throw new Error("poly1 and poly2 must be either polygons or multiPolygons")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(333);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(267),i=n(180);e.default=function(t,e,n){void 0===n&&(n={});var o=r.getCoord(t),a=r.getCoord(e),s=i.degreesToRadians(a[1]-o[1]),u=i.degreesToRadians(a[0]-o[0]),c=i.degreesToRadians(o[1]),l=i.degreesToRadians(a[1]),f=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(l);return i.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(180);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,f,h=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,v=g?t.features.length:1,m=0;m<v;m++){u=(f=!!(l=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var A=0;A<u;A++){var b=0,_=0;if(null!==(s=f?l.geometries[A]:l)){c=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,m,b,_))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],p,m,b,_))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-h;o++){if(!1===e(c[r][o],p,m,b,_))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(_=0,o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-h;a++){if(!1===e(c[r][o][a],p,m,b,_))return!1;p++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function u(t,e){s(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:s,coordinates:t.coordinates[c]};if(!1===e(r.feature(l,i),n,c))return!1}}))}function c(t,e){u(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,f=0;return!1!==i(t,(function(i,s,h,p,d){if(void 0===u||n>c||p>l||d>f)return u=i,c=n,l=p,f=d,void(a=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function l(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,i=!1;return c(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r},e.lineEach=l,e.lineReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),r.lineString([c[s],c[s+1]],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),r.lineString([c[a][s],c[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),r.lineString([c[o][s],c[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),r.lineString([c[o][a][s],c[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),r.point(c[o],u,e);case"LineString":return s<0&&(s=c.length+s),r.point(c[s],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),r.point(c[a][s],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),r.point(c[o][s],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),r.point(c[o][a][s],u,e)}throw new Error("geojson is invalid")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(180),i=n(267);e.default=function(t,e,n){void 0===n&&(n={});var o=i.getCoord(t),a=i.getCoord(e);a[0]+=a[0]-o[0]>180?-360:o[0]-a[0]>180?360:0;var s=function(t,e,n){var i=n=void 0===n?r.earthRadius:Number(n),o=t[1]*Math.PI/180,a=e[1]*Math.PI/180,s=a-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var c=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(c)>1e-11?s/c:Math.cos(o);return Math.sqrt(s*s+l*l*u*u)*i}(o,a);return r.convertLength(s,"meters",n.units)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44),i=n(91),o=n(122);e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return o.flattenEach(t,(function(t){!function(t,e){var n=[],o=t.geometry;if(null!==o){switch(o.type){case"Polygon":n=i.getCoords(o);break;case"LineString":n=[i.getCoords(o)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var o=r.lineString([t,i],e);return o.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,i),n.push(o),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),r.featureCollection(e)}},function(t,e,n){var r=n(450),i=n(44),o=n(122),a=n(208).default,s=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function c(t){var e=r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return u(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(451);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!g(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],g(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!g(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],g(t,a=e.leaf?n(o):o)){if(e.leaf||d(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,u=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),c.push(s),this._condense(c),this;a||s.leaf||!d(s,u)?r?(n++,s=r.children[n],a=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=y(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=y([])).leaf=!1,i.height=r;var u,c,l,f,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(v(t,e,n,p,this.compareMinX),u=e;u<=n;u+=p)for(v(t,u,l=Math.min(u+p-1,n),h,this.compareMinY),c=u;c<=l;c+=h)f=Math.min(c+h-1,l),i.children.push(this._build(t,c,f,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,h,p,d;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=f(a=e.children[i]),p=t,d=a,(c=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u)<h?(h=c,l=u<l?u:l,s=a):c===h&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),u(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=y(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,u,c,l,h;for(c=l=1/0,r=e;r<=n-e;r++)a=p(i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox)),u=f(i)+f(o),a<c?(c=a,h=r,l=u<l?u:l):a===c&&u<l&&(l=u,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,c=s(t,0,e,a),l=s(t,n-e,n,a),f=h(c)+h(l);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?a(o):o),f+=h(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(l,t.leaf?a(o):o),f+=h(l);return f},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){t.exports=function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(o,Math.floor(r+(s-u)*l/s+f)),a)}var h=t[r],p=i,d=o;for(n(t,i,r),a(t[o],h)>0&&n(t,i,o);p<d;){for(n(t,p,d),p++,d--;a(t[p],h)<0;)p++;for(;a(t[d],h)>0;)d--}0===a(t[i],h)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},function(t,e,n){"use strict";n.r(e);var r=n(46),i=n(19),o=n(39),a=n(103),s=n(116);e.default=function(t,e,n,u){if(u=u||{},!Object(i.g)(u))throw new Error("options is invalid");var c=u.units,l=u.zTranslation,f=u.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(l&&"number"!==typeof l&&isNaN(l))throw new Error("zTranslation is not a number");if(l=void 0!==l?l:0,0===e&&0===l)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==f&&void 0!==f||(t=Object(a.a)(t)),Object(r.a)(t,(function(t){var r=Object(o.b)(Object(s.a)(t,e,n,{units:c}));t[0]=r[0],t[1]=r[1],l&&3===t.length&&(t[2]+=l)})),t}},function(t,e,n){"use strict";n.r(e);var r=n(103),i=n(244),o=n(245),a=n(164),s=n(246),u=n(247),c=n(116),l=n(46),f=n(19),h=n(39);function p(t,e,n){var r="Point"===Object(h.c)(t);return n=function(t,e){void 0!==e&&null!==e||(e="centroid");if(Array.isArray(e)||"object"===typeof e)return Object(h.a)(e);var n=t.bbox?t.bbox:Object(a.a)(t),r=n[0],s=n[1],u=n[2],c=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return Object(f.j)([r,s]);case"se":case"southeast":case"eastsouth":case"bottomright":return Object(f.j)([u,s]);case"nw":case"northwest":case"westnorth":case"topleft":return Object(f.j)([r,c]);case"ne":case"northeast":case"eastnorth":case"topright":return Object(f.j)([u,c]);case"center":return Object(i.a)(t);case void 0:case null:case"centroid":return Object(o.a)(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||Object(l.a)(t,(function(t){var r=Object(u.a)(n,t),i=Object(s.a)(n,t),o=r*e,a=Object(h.b)(Object(c.a)(n,o,i));t[0]=a[0],t[1]=a[1],3===t.length&&(t[2]*=e)})),t}e.default=function(t,e,n){if(n=n||{},!Object(f.g)(n))throw new Error("options is invalid");var i=n.origin,o=n.mutate;if(!t)throw new Error("geojson required");if("number"!==typeof e||0===e)throw new Error("invalid factor");var a=Array.isArray(i)||"object"===typeof i;return!0!==o&&(t=Object(r.a)(t)),"FeatureCollection"!==t.type||a?p(t,e,i):(Object(l.b)(t,(function(n,r){t.features[r]=p(n,e,i)})),t)}},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DuplicateMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,t);var e,n,r,f,h=(e=p,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function p(){return i(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"handleStartDragging",value:function(t,e){a(c(p.prototype),"handleStartDragging",this).call(this,t,e),this._geometryBeforeTranslate&&e.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,e.data))}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("copy"):t.onUpdateCursor(null)}}])&&o(n.prototype,r),f&&o(n,f),p}(n(270).TranslateMode);e.DuplicateMode=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendLineStringMode=void 0;var r=n(54),i=n(109);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,r,o,h=(e=p,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function p(){return a(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"getSingleSelectedLineString",value:function(t){var e=this.getSelectedGeometry(t);return e&&"LineString"===e.type?e:null}},{key:"handleClick",value:function(t,e){var n=e.selectedIndexes,r=this.getSingleSelectedLineString(e);if(r){var o=[r.coordinates.length],a=e.modeConfig;a&&a.drawAtFront&&(o=[0]);var s=n[0],u=new i.ImmutableFeatureCollection(e.data).addPosition(s,o,t.mapCoords).getObject();e.onEdit({updatedData:u,editType:"addPosition",editContext:{featureIndexes:[s],positionIndexes:o,position:t.mapCoords}})}else console.warn("ExtendLineStringMode only supported for single LineString selection")}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=this.getSingleSelectedLineString(t);if(!n)return e;var r=t.lastPointerMoveEvent&&t.lastPointerMoveEvent.mapCoords,i=null,o=t.modeConfig;return i=o&&o.drawAtFront?n.coordinates[0]:n.coordinates[n.coordinates.length-1],e.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[i,r]}}),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&s(n.prototype,r),o&&s(n,o),p}(r.GeoJsonEditMode);e.ExtendLineStringMode=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitPolygonMode=void 0;var r=y(n(457)),i=y(n(206)),o=y(n(295)),a=y(n(269)),s=n(44),u=y(n(92)),c=y(n(93)),l=y(n(179)),f=y(n(272)),h=y(n(336)),p=n(71),d=n(54),g=n(109);function y(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"===typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return!e||"object"!==v(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(b,t);var e,n,d,y,v=(e=b,function(){var t,n=S(e);if(O()){var r=S(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)});function b(){return w(this,b),v.apply(this,arguments)}return n=b,(d=[{key:"calculateMapCoords",value:function(t,e,n){var r=n.modeConfig;if(!r||!r.lock90Degree||!t.length)return e;if(1===t.length){var i=t[0],o=this.getSelectedGeometry(n),a=(0,f.default)(o),d="FeatureCollection"===a.type?a.features:[a],g=Number.MAX_SAFE_INTEGER,y=null;if(d.forEach((function(t){var e=(0,h.default)(t,i),n=(0,c.default)(e,i);g>n&&(g=n,y=e)})),y){var v=(0,u.default)(i,y),m=(0,c.default)(i,e,{units:"meters"});return(0,l.default)(i,m,v,{units:"meters"}).geometry.coordinates}return e}var b=t[t.length-1],_=A((0,p.generatePointsParallelToLinePoints)(t[t.length-2],b,e),1)[0];return(0,h.default)((0,s.lineString)([b,_]),e).geometry.coordinates}},{key:"getGuides",value:function(t){var e=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===e.length||!t.lastPointerMoveEvent)return n;var r=t.lastPointerMoveEvent.mapCoords;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(m(e),[this.calculateMapCoords(e,r,t)])}}),n}},{key:"handleClick",value:function(t,e){var n=this.getTentativeGuide(e),i=this.getSelectedGeometry(e);if(i){var o=this.getClickSequence();n&&"LineString"===n.geometry.type?o.push(n.geometry.coordinates[n.geometry.coordinates.length-1]):this.addClickSequence(t);var s={type:"Point",coordinates:o[o.length-1]},u=(0,r.default)(s,i);if(o.length>1&&n&&!u){if(this.resetClickSequence(),0===(0,a.default)(n,i).features.length)return;var c=this.splitPolygon(n,e);c&&e.onEdit(c)}}else console.warn("A polygon must be selected for splitting")}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(t,e){var n=this.getSelectedGeometry(e),r=e.selectedIndexes[0],a=e.modeConfig||{},s=a.gap,u=void 0===s?.1:s,c=a.units,l=void 0===c?"centimeters":c;0===u&&(u=.1,l="centimeters");var f=(0,o.default)(t,u,{units:l}),h=(0,i.default)(n,f);if(!h)return console.warn("Canceling edit. Split Polygon erased"),null;var p=h.geometry,d=p.type,y=p.coordinates,v=[];return v="Polygon"===d?y.map((function(t){return[t]})):y.reduce((function(t,e){return e.forEach((function(e){t.push([e])})),t}),[]),{updatedData:new g.ImmutableFeatureCollection(e.data).replaceGeometry(r,{type:"MultiPolygon",coordinates:v}).getObject(),editType:"split",editContext:{featureIndexes:[r]}}}}])&&x(n.prototype,d),y&&x(n,y),b}(d.GeoJsonEditMode);e.SplitPolygonMode=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(91);function i(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)===0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!==c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}e.default=function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var o=r.getCoord(t),a=r.getGeom(e),s=a.type,u=e.bbox,c=a.coordinates;if(u&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,u))return!1;"Polygon"===s&&(c=[c]);for(var l=!1,f=0;f<c.length&&!l;f++)if(i(o,c[f][0],n.ignoreBoundary)){for(var h=!1,p=1;p<c[f].length&&!h;)i(o,c[f][p],!n.ignoreBoundary)&&(h=!0),p++;h||(l=!0)}return l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtrudeMode=void 0;var r,i=(r=n(92))&&r.__esModule?r:{default:r},o=n(71),a=n(268),s=n(109);function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(f,t);var e,n,r,a,u=(e=f,function(){var t,n=m(e);if(v()){var r=m(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function f(){var t;p(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(y(t=u.call.apply(u,[this].concat(n))),"isPointAdded",!1),t}return n=f,(r=[{key:"handleDragging",value:function(t,e){var n=(0,o.getPickedEditHandle)(t.pointerDownPicks);if(n){var r=n.properties.featureIndex,i=n.properties.positionIndexes,a=this.coordinatesSize(i,r,e.data);i=this.isPointAdded?this.nextPositionIndexes(i,a):i;var u=this.getPointForPositionIndexes(this.prevPositionIndexes(i,a),r,e.data),c=this.getPointForPositionIndexes(i,r,e.data);if(u&&c){var f=l((0,o.generatePointsParallelToLinePoints)(u,c,t.mapCoords),2),h=f[0],p=f[1],d=new s.ImmutableFeatureCollection(e.data).replacePosition(r,this.prevPositionIndexes(i,a),p).replacePosition(r,i,h).getObject();e.onEdit({updatedData:d,editType:"extruding",editContext:{featureIndexes:[r],positionIndexes:this.nextPositionIndexes(i,a),position:h}}),t.cancelPan()}}}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var i=r.properties,a=i.positionIndexes,u=i.featureIndex,c=this.coordinatesSize(a,u,e.data),l=this.getPointForPositionIndexes(this.prevPositionIndexes(a,c),u,e.data),f=this.getPointForPositionIndexes(a,u,e.data);if(l&&f){var h=new s.ImmutableFeatureCollection(e.data);this.isOrthogonal(a,u,c,e.data)||(h=h.addPosition(u,a,f)),this.isOrthogonal(this.prevPositionIndexes(a,c),u,c,e.data)||(h=h.addPosition(u,a,l),this.isPointAdded=!0),e.onEdit({updatedData:h.getObject(),editType:"startExtruding",editContext:{featureIndexes:[u],positionIndexes:a,position:l}})}}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedEditHandle)(t.pointerDownPicks);if(n.length&&r){var i=r.properties.featureIndex,a=r.properties.positionIndexes,u=this.coordinatesSize(a,i,e.data);a=this.isPointAdded?this.nextPositionIndexes(a,u):a;var c=this.getPointForPositionIndexes(this.prevPositionIndexes(a,u),i,e.data),f=this.getPointForPositionIndexes(a,i,e.data);if(c&&f){var h=l((0,o.generatePointsParallelToLinePoints)(c,f,t.mapCoords),2),p=h[0],d=h[1],g=new s.ImmutableFeatureCollection(e.data).replacePosition(i,this.prevPositionIndexes(a,u),d).replacePosition(i,a,p).getObject();e.onEdit({updatedData:g,editType:"extruded",editContext:{featureIndexes:[i],positionIndexes:a,position:p}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(t,e,n){var r=n.features,i=0;if(Array.isArray(t)){var o=r[e].geometry.coordinates;if(3===t.length){var a=l(t,2),s=a[0],u=a[1];o.length&&o[s].length&&(i=o[s][u].length)}else{var c=l(t,1)[0];o.length&&o[c].length&&(i=o[c].length)}}return i}},{key:"getBearing",value:function(t,e){var n=(0,i.default)(t,e);return n<0?Math.floor(360+n):Math.floor(n)}},{key:"isOrthogonal",value:function(t,e,n,r){if(!Array.isArray(t))return!1;t[t.length-1]===n-1&&(t[t.length-1]=0);var i=this.getPointForPositionIndexes(this.prevPositionIndexes(t,n),e,r),o=this.getPointForPositionIndexes(this.nextPositionIndexes(t,n),e,r),a=this.getPointForPositionIndexes(t,e,r),s=this.getBearing(a,i),u=this.getBearing(a,o);return[89,90,91,269,270,271].includes(Math.abs(s-u))}},{key:"nextPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=c(t);return n.length&&(n[n.length-1]=n[n.length-1]===e-1?0:n[n.length-1]+1),n}},{key:"prevPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=c(t);return n.length&&(n[n.length-1]=0===n[n.length-1]?e-2:n[n.length-1]-1),n}},{key:"getPointForPositionIndexes",value:function(t,e,n){var r,i=n.features;if(Array.isArray(t)){var o=i[e].geometry.coordinates;if(3===t.length){var a=l(t,3),s=a[0],u=a[1],c=a[2];o.length&&o[s].length&&(r=o[s][u][c])}else{var f=l(t,2),h=f[0],p=f[1];o.length&&o[h].length&&(r=o[h][p])}}return r}}])&&d(n.prototype,r),a&&d(n,a),f}(a.ModifyMode);e.ExtrudeMode=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElevationMode=void 0;var r=n(71);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=t.pointerDownScreenCoords,n=t.screenCoords;return 10*(e[1]-n[1])}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(g,t);var e,n,i,p,d=(e=g,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function g(){return o(this,g),d.apply(this,arguments)}return n=g,p=[{key:"calculateElevationChangeWithViewport",value:function(t,e){var n=e.pointerDownScreenCoords,r=e.screenCoords;return 156543.03392*Math.cos(t.latitude*Math.PI/180)/Math.pow(2,t.zoom)*(n[1]-r[1])/2}}],(i=[{key:"makeElevatedEvent",value:function(t,e,n){var r=n.modeConfig||{},i=r.minElevation,o=void 0===i?0:i,a=r.maxElevation,s=void 0===a?2e4:a,u=r.calculateElevationChange,c=void 0===u?h:u;if(!t.pointerDownScreenCoords)return t;var l=3===e.length?e[2]:0;return l+=c({pointerDownScreenCoords:t.pointerDownScreenCoords,screenCoords:t.screenCoords}),l=Math.min(l,s),l=Math.max(l,o),Object.assign({},t,{mapCoords:[e[0],e[1],l]})}},{key:"handlePointerMove",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.pointerDownPicks),i=n?n.geometry.coordinates:t.mapCoords;s(l(g.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"handleStopDragging",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.picks),i=n?n.geometry.coordinates:t.mapCoords;s(l(g.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"getCursor",value:function(t){var e=s(l(g.prototype),"getCursor",this).call(this,t);return"cell"===e&&(e="ns-resize"),e}}])&&a(n.prototype,i),p&&a(n,p),g}(n(268).ModifyMode);e.ElevationMode=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformMode=void 0;var r=n(44),i=n(270),o=n(337),a=n(338);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(m,t);var e,n,s,y,v=(e=m,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function m(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),v.call(this,[new i.TranslateMode,new o.ScaleMode,new a.RotateMode])}return n=m,(s=[{key:"handlePointerMove",value:function(t,e){var n=null;f(d(m.prototype),"handlePointerMove",this).call(this,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{onUpdateCursor:function(t){n=t||n}})),e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=null,r=null,a=[];this._modes.forEach((function(t){t instanceof i.TranslateMode?r=t:(t instanceof o.ScaleMode&&(n=t),a.push(t))})),n instanceof o.ScaleMode&&!n.isEditHandleSelected()&&a.push(r),a.filter(Boolean).forEach((function(n){return n.handleStartDragging(t,e)}))}},{key:"getGuides",value:function(t){var e=f(d(m.prototype),"getGuides",this).call(this,t),n=(this._modes||[]).find((function(t){return t instanceof a.RotateMode}));if(n instanceof a.RotateMode){var i=e.features.filter((function(t){var e=t.properties||{},r=e.editHandleType,i=[e.mode];return n.getIsRotating()&&i.push(r),!i.includes("scale")}));e=(0,r.featureCollection)(i)}return e}}])&&l(n.prototype,s),y&&l(n,y),m}(n(339).CompositeMode);e.TransformMode=y},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPointMode=void 0;var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,t);var e,n,r,f,h=(e=p,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function p(){return i(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"createTentativeFeature",value:function(t){var e=t.lastPointerMoveEvent;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(e?[e.mapCoords]:[])[0]}}}},{key:"handleClick",value:function(t,e){var n={type:"Point",coordinates:t.mapCoords};e.onEdit(this.getAddFeatureAction(n,e.data))}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),a(c(p.prototype),"handlePointerMove",this).call(this,t,e)}}])&&o(n.prototype,r),f&&o(n,f),p}(n(54).GeoJsonEditMode);e.DrawPointMode=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawLineStringMode=void 0;var r=n(71);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,t);var e,n,i,a,p=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function d(){return s(this,d),p.apply(this,arguments)}return n=d,(i=[{key:"handleClick",value:function(t,e){var n=t.picks,i=(0,r.getPickedEditHandle)(n),a=!1;i||(this.addClickSequence(t),a=!0);var s=this.getClickSequence();if(s.length>1&&i&&Array.isArray(i.properties.positionIndexes)&&i.properties.positionIndexes[0]===s.length-1){var u={type:"LineString",coordinates:o(s)};this.resetClickSequence();var c=this.getAddFeatureAction(u,e.data);c&&e.onEdit(c)}else a&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>1){var r={type:"LineString",coordinates:o(n)};this.resetClickSequence();var i=this.getAddFeatureAction(r,e.data);i&&e.onEdit(i)}}}},{key:"getGuides",value:function(t){var e,n,r=t.lastPointerMoveEvent,i=this.getClickSequence(),a=r?[r.mapCoords]:[],s={type:"FeatureCollection",features:[]};i.length>0&&(n={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(o(i),a)}}),n&&s.features.push(n);var u=i.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=s.features).push.apply(e,o(u)),s}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&u(n.prototype,i),a&&u(n,a),d}(n(54).GeoJsonEditMode);e.DrawLineStringMode=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleMode=void 0;var r,i=(r=n(209))&&r.__esModule?r:{default:r};function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,r,o,h=(e=p,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function p(){return a(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"getTwoClickPolygon",value:function(t,e,n){var r=(0,i.default)([t[0],t[1],e[0],e[1]]);return r.properties=r.properties||{},r.properties.shape="Rectangle",r}}])&&s(n.prototype,r),o&&s(n,o),p}(n(210).TwoClickPolygonMode);e.DrawRectangleMode=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleByDiameterMode=void 0;var r=a(n(340)),i=a(n(93)),o=n(54);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,a,s,d=(e=g,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function g(){return u(this,g),d.apply(this,arguments)}return n=g,(a=[{key:"getTwoClickPolygon",value:function(t,e,n){var a=(n||{}).steps,s=void 0===a?64:a,u={steps:s};s<4&&(console.warn("Minimum steps to draw a circle is 4 "),u.steps=4);var c=(0,o.getIntermediatePosition)(t,e),l=Math.max((0,i.default)(t,c),.001),f=(0,r.default)(c,l,u);return f.properties=f.properties||{},f.properties.shape="Circle",f}}])&&c(n.prototype,a),s&&c(n,s),g}(n(210).TwoClickPolygonMode);e.DrawCircleByDiameterMode=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleFromCenterMode=void 0;var r=o(n(340)),i=o(n(93));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,t);var e,n,o,a,p=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function d(){return s(this,d),p.apply(this,arguments)}return n=d,(o=[{key:"getTwoClickPolygon",value:function(t,e,n){var o=(n||{}).steps,a=void 0===o?64:o,s={steps:a};a<4&&(console.warn("Minimum steps to draw a circle is 4 "),s.steps=4);var u=Math.max((0,i.default)(t,e),.001),c=(0,r.default)(t,u,s);return c.properties=c.properties||{},c.properties.shape="Circle",c}}])&&u(n.prototype,o),a&&u(n,a),d}(n(210).TwoClickPolygonMode);e.DrawCircleFromCenterMode=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseByBoundingBoxMode=void 0;var r=u(n(209)),i=u(n(93)),o=u(n(341)),a=n(44),s=n(54);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,n,u,c,y=(e=v,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function v(){return l(this,v),y.apply(this,arguments)}return n=v,(u=[{key:"getTwoClickPolygon",value:function(t,e,n){var u=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),f=Math.max(t[1],e[1]),h=(0,r.default)([u,c,l,f]).geometry.coordinates[0],p=(0,s.getIntermediatePosition)(t,e),d=Math.max((0,i.default)((0,a.point)(h[0]),(0,a.point)(h[1])),.001),g=Math.max((0,i.default)((0,a.point)(h[0]),(0,a.point)(h[3])),.001);return(0,o.default)(p,d,g)}}])&&f(n.prototype,u),c&&f(n,c),v}(n(210).TwoClickPolygonMode);e.DrawEllipseByBoundingBoxMode=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseUsingThreePointsMode=void 0;var r=u(n(93)),i=u(n(341)),o=u(n(92)),a=n(44),s=n(54);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,n,u,c,y=(e=v,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function v(){return l(this,v),y.apply(this,arguments)}return n=v,(u=[{key:"getThreeClickPolygon",value:function(t,e,n,u){var c=(0,s.getIntermediatePosition)(t,e),l=Math.max((0,r.default)(c,(0,a.point)(n)),.001),f=Math.max((0,r.default)(t,e),.001)/2,h={angle:(0,o.default)(t,e)};return(0,i.default)(c,l,f,h)}}])&&f(n.prototype,u),c&&f(n,c),v}(n(342).ThreeClickPolygonMode);e.DrawEllipseUsingThreePointsMode=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleUsingThreePointsMode=void 0;var r=n(71);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,t);var e,n,i,a,p=(e=d,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function d(){return s(this,d),p.apply(this,arguments)}return n=d,(i=[{key:"getThreeClickPolygon",value:function(t,e,n,i){var a=o((0,r.generatePointsParallelToLinePoints)(t,e,n),2);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[t,e,a[0],a[1],t]]}}}}])&&u(n.prototype,i),a&&u(n,a),d}(n(342).ThreeClickPolygonMode);e.DrawRectangleUsingThreePointsMode=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draw90DegreePolygonMode=void 0;var r=c(n(179)),i=c(n(92)),o=c(n(269)),a=c(n(93)),s=n(44),u=n(71);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return(v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function m(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(d,t);var e,n,c,l,p=(e=d,function(){var t,n=b(e);if(A()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m(this,t)});function d(){return g(this,d),p.apply(this,arguments)}return n=d,(c=[{key:"createTentativeFeature",value:function(t){var e,n=this.getClickSequence(),r=t.lastPointerMoveEvent.mapCoords;if(1===n.length)e=r;else{var i=n[n.length-2],o=n[n.length-1];e=h((0,u.generatePointsParallelToLinePoints)(i,o,r),1)[0]}return n.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(f(n),[e])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(f(n),[e,n[0]])]}}}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!t.lastPointerMoveEvent)return e;var n=this.createTentativeFeature(t);return e.features.push(n),e.features=e.features.concat((0,u.getEditHandlesForGeometry)(n.geometry,-1)),e.features=e.features.slice(0,-1),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),v(b(d.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"handleClick",value:function(t,e){var n=t.picks,r=this.getTentativeGuide(e);this.addClickSequence(t);var i=this.getClickSequence();if(r){if(3===i.length&&"LineString"===r.geometry.type){var o=r.geometry;i[i.length-1]=o.coordinates[o.coordinates.length-1]}else if(i.length>3&&"Polygon"===r.geometry.type){var a=r.geometry;i[i.length-1]=a.coordinates[0][a.coordinates[0].length-2];var s=(0,u.getPickedEditHandle)(n);if(s&&Array.isArray(s.properties.positionIndexes)&&(0===s.properties.positionIndexes[1]||s.properties.positionIndexes[1]===a.coordinates[0].length-3)){var c={type:"Polygon",coordinates:this.finalizedCoordinates(f(a.coordinates[0]))};this.resetClickSequence();var l=this.getAddFeatureOrBooleanPolygonAction(c,e);l&&e.onEdit(l)}}var h={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(h,e)}}},{key:"finalizedCoordinates",value:function(t){var e=[[].concat(f(t.slice(0,-2)),[t[0]])],n=this.getIntermediatePoint(f(t));if(n)e=[[].concat(f(t.slice(0,-2)),[n,t[0]])];else{var r=f(t);r.splice(-3,1),(n=this.getIntermediatePoint(f(r)))&&(e=[[].concat(f(t.slice(0,-3)),[n,t[0]])])}return e}},{key:"getIntermediatePoint",value:function(t){var e;if(t.length>4){var n=f(t),u=n[0],c=n[1],l=(0,i.default)(u,c),h=t[t.length-3],p=t[t.length-4],d=(0,i.default)(h,p),g={first:[],second:[]};[1,2,3].forEach((function(t){var e=l+90*t;g.first.push(e>180?e-360:e);var n=d+90*t;g.second.push(n>180?n-360:n)}));var y=(0,a.default)((0,s.point)(u),(0,s.point)(h));[0,1,2].forEach((function(t){var n=(0,s.lineString)([u,(0,r.default)(u,y,g.first[t]).geometry.coordinates]);[0,1,2].forEach((function(t){var i=(0,s.lineString)([h,(0,r.default)(h,y,g.second[t]).geometry.coordinates]),a=(0,o.default)(n,i);a&&a.features.length&&(e=a.features[0].geometry.coordinates)}))}))}return e}}])&&y(n.prototype,c),l&&y(n,l),d}(n(54).GeoJsonEditMode);e.Draw90DegreePolygonMode=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonByDraggingMode=void 0;var r,i=(r=n(471))&&r.__esModule?r:{default:r},o=n(71);function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,n,r,a,u=(e=v,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function v(){var t;c(this,v);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return y(h(t=u.call.apply(u,[this].concat(n))),"handleDraggingThrottled",null),t}return n=v,(r=[{key:"handleClick",value:function(t,e){}},{key:"handleStartDragging",value:function(t,e){t.cancelPan(),e.modeConfig&&e.modeConfig.throttleMs?this.handleDraggingThrottled=(0,i.default)(this.handleDraggingAux,e.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),n.length>2){var r={type:"Polygon",coordinates:[[].concat(s(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}},{key:"handleDraggingAux",value:function(t,e){var n=t.picks;(0,o.getPickedEditHandle)(n)||this.addClickSequence(t)}},{key:"handleDragging",value:function(t,e){this.handleDraggingThrottled&&this.handleDraggingThrottled(t,e)}}])&&l(n.prototype,r),a&&l(n,a),v}(n(273).DrawPolygonMode);e.DrawPolygonByDraggingMode=v},function(t,e,n){(function(e){var n="Expected a function",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),f=Object.prototype.toString,h=Math.max,p=Math.min,d=function(){return l.Date.now()};function g(t,e,r){var i,o,a,s,u,c,l=0,f=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError(n);function A(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n)}function b(t){return l=t,u=setTimeout(w,e),f?A(t):s}function _(t){var n=t-c;return void 0===c||n>=e||n<0||g&&t-l>=a}function w(){var t=d();if(_(t))return x(t);u=setTimeout(w,function(t){var n=e-(t-c);return g?p(n,a-(t-l)):n}(t))}function x(t){return u=void 0,m&&i?A(t):(i=o=void 0,s)}function E(){var t=d(),n=_(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return b(c);if(g)return u=setTimeout(w,e),A(c)}return void 0===u&&(u=setTimeout(w,e)),s}return e=v(e)||0,y(r)&&(f=!!r.leading,a=(g="maxWait"in r)?h(v(r.maxWait)||0,e):a,m="trailing"in r?!!r.trailing:m),E.cancel=function(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0},E.flush=function(){return void 0===u?s:x(d())},E}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=o.test(t);return n||a.test(t)?s(t.slice(2),n?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return y(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),g(t,e,{leading:i,maxWait:e,trailing:o})}}).call(this,n(62))},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ViewMode=void 0;var c=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(a()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function r(){return i(this,r),n.apply(this,arguments)}return r}(n(54).GeoJsonEditMode);e.ViewMode=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureDistanceMode=void 0;var r=a(n(93)),i=a(n(274)),o=n(54);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=[],v=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(v,t);var e,n,o,a,s=(e=v,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function v(){var t;u(this,v);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return g(f(t=s.call.apply(s,[this].concat(n))),"startingPoint",null),g(f(t),"endingPoint",null),g(f(t),"endingPointLocked",!1),g(f(t),"_getTooltips",(0,i.default)((function(t){var e=t.modeConfig,n=t.startingPoint,i=t.endingPoint,o=y;if(n&&i){var a,s=e||{},u=s.formatTooltip,c=s.turfOptions,l=s.measurementCallback,f=c&&c.units||"kilometers",h=(0,r.default)(n,i,c);a=u?u(h):"".concat(parseFloat(h).toFixed(2)," ").concat(f),l&&l(h),o=[{position:i.geometry.coordinates,text:a}]}return o}))),t}return n=v,(o=[{key:"_setEndingPoint",value:function(t){this.endingPoint={type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[]},geometry:{type:"Point",coordinates:t}}}},{key:"handleClick",value:function(t,e){!this.startingPoint||this.endingPointLocked?(this.startingPoint={type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[]},geometry:{type:"Point",coordinates:t.mapCoords}},this.endingPoint=null,this.endingPointLocked=!1):this.startingPoint&&(this._setEndingPoint(t.mapCoords),this.endingPointLocked=!0)}},{key:"handlePointerMove",value:function(t,e){this.startingPoint&&!this.endingPointLocked&&this._setEndingPoint(t.mapCoords),e.onUpdateCursor("cell")}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=e.features;return this.startingPoint&&n.push(this.startingPoint),this.endingPoint&&n.push(this.endingPoint),this.startingPoint&&this.endingPoint&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[this.startingPoint.geometry.coordinates,this.endingPoint.geometry.coordinates]}}),e}},{key:"getTooltips",value:function(t){return this._getTooltips({modeConfig:t.modeConfig,startingPoint:this.startingPoint,endingPoint:this.endingPoint})}}])&&c(n.prototype,o),a&&c(n,a),v}(o.GeoJsonEditMode);e.MeasureDistanceMode=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAreaMode=void 0;var r=a(n(475)),i=a(n(271)),o=n(273);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=[],m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(m,t);var e,n,o,a,s=(e=m,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function m(){return l(this,m),s.apply(this,arguments)}return n=m,(o=[{key:"handleClick",value:function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{onEdit:function(){}});h(g(m.prototype),"handleClick",this).call(this,t,n)}},{key:"getTooltips",value:function(t){var e=this.getTentativeGuide(t);if(e&&"Polygon"===e.geometry.type){var n,o=t.modeConfig||{},a=o.formatTooltip,s=o.measurementCallback,u=(0,i.default)(e),c=(0,r.default)(e);return n=a?a(c):"".concat(parseFloat(c).toFixed(2)," ").concat("sq. m"),s&&s(c),[{position:u.geometry.coordinates,text:n}]}return v}}])&&f(n.prototype,o),a&&f(n,a),m}(o.DrawPolygonMode);e.MeasureAreaMode=m},function(t,e,n){"use strict";n.r(e);var r=n(46);var i=6378137;function o(t){var e,n=0;switch(t.type){case"Polygon":return a(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=a(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=o(t.geometries[e]);return n}}function a(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,r,o,a,s,c=0,l=t.length;if(l>2){for(s=0;s<l;s++)s===l-2?(r=l-2,o=l-1,a=0):s===l-1?(r=l-1,o=0,a=1):(r=s,o=s+1,a=s+2),e=t[r],n=t[o],c+=(u(t[a][0])-u(e[0]))*Math.sin(u(n[1]));c=c*i*i/2}return c}function u(t){return t*Math.PI/180}e.default=function(t){return Object(r.d)(t,(function(t,e){return t+o(e)}),0)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAngleMode=void 0;var r=s(n(92)),i=s(n(477)),o=s(n(274)),a=n(54);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=[],b=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(l,t);var e,n,a,s,u=(e=l,function(){var t,n=y(e);if(g()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function l(){var t;f(this,l);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return m(d(t=u.call.apply(u,[this].concat(n))),"_getTooltips",(0,o.default)((function(t){var e=t.modeConfig,n=t.vertex,o=t.point1,a=t.point2,s=A;if(n&&o&&a){var u,c=e||{},l=c.formatTooltip,f=c.measurementCallback,h=(0,r.default)(n,o),p=(0,r.default)(n,a),d=Math.abs(h-p);d>180&&(d=360-d),u=l?l(d):"".concat(parseFloat(d).toFixed(2)," ").concat("deg"),f&&f(d),s=[{position:(0,i.default)({type:"FeatureCollection",features:[o,a].map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t}}}))}).geometry.coordinates,text:u}]}return s}))),t}return n=l,(a=[{key:"handleClick",value:function(t,e){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(t)}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getPoints",value:function(t){var e=this.getClickSequence(),n=c(e);return e.length<3&&t.lastPointerMoveEvent&&n.push(t.lastPointerMoveEvent.mapCoords),n}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=e.features,r=this.getPoints(t);return r.length>2?n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0],r[2]]}}):r.length>1&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0]]}}),e}},{key:"getTooltips",value:function(t){var e=this.getPoints(t);return this._getTooltips({modeConfig:t.modeConfig,vertex:e[0],point1:e[1],point2:e[2]})}}])&&h(n.prototype,a),s&&h(n,s),l}(a.GeoJsonEditMode);e.MeasureAngleMode=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(208),i=n(44);e.default=function(t,e){void 0===e&&(e={});var n=r.default(t),o=(n[0]+n[2])/2,a=(n[1]+n[3])/2;return i.point([o,a],e.properties,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnappableMode=void 0;var r=n(71);function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(v,t);var e,n,i,s,y=(e=v,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function v(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),g(f(e=y.call(this)),"_handler",void 0),e._handler=t,e}return n=v,(i=[{key:"_getSnappedMouseEvent",value:function(t,e,n){return Object.assign(t,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:e&&e.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(t){return(0,r.getPickedEditHandles)(t).find((function(t){return"snap-target"===t.properties.editHandleType}))}},{key:"_getPickedSnapSource",value:function(t){return(0,r.getPickedSnapSourceEditHandle)(t)}},{key:"_getUpdatedSnapSourceHandle",value:function(t,e){var n=t.properties,r=n.featureIndex,i=n.positionIndexes;if(!Array.isArray(i))return t;var o=e.features[r];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{geometry:{type:"Point",coordinates:i.reduce((function(t,e){return t[e]}),o.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(t){var e=(t.modeConfig||{}).additionalSnapTargets;return e=e||[],[].concat(o(t.data.features),o(e))}},{key:"_getSnapTargetHandles",value:function(t){for(var e=[],n=this._getSnapTargets(t),i=0;i<n.length;i++)if(!t.selectedIndexes.includes(i)){var a=n[i].geometry;e.push.apply(e,o((0,r.getEditHandlesForGeometry)(a,i,"snap-target")))}return e}},{key:"getGuides",value:function(t){var e=t.modeConfig,n=t.lastPointerMoveEvent,i=(e||{}).enableSnapping,s={type:"FeatureCollection",features:o(this._handler.getGuides(t).features)};if(!i)return s;var u,c=n&&this._getPickedSnapSource(n.pointerDownPicks);if(c)return(u=s.features).push.apply(u,o(this._getSnapTargetHandles(t)).concat([this._getUpdatedSnapSourceHandle(c,t.data)])),s;var l,f=t.data.features,h=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(t.selectedIndexes);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(p<f.length){var d,g=f[p].geometry;(d=s.features).push.apply(d,o((0,r.getEditHandlesForGeometry)(g,p,"snap-source")))}}}catch(y){h.e(y)}finally{h.f()}return s}},{key:"_getSnapAwareEvent",value:function(t,e){var n=this._getPickedSnapSource(e.lastPointerMoveEvent.pointerDownPicks),r=this._getPickedSnapTarget(t.picks);return n&&r?this._getSnappedMouseEvent(t,n,r):t}},{key:"handleStartDragging",value:function(t,e){this._handler.handleStartDragging(t,e)}},{key:"handleStopDragging",value:function(t,e){this._handler.handleStopDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handleDragging",value:function(t,e){this._handler.handleDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handlePointerMove",value:function(t,e){this._handler.handlePointerMove(this._getSnapAwareEvent(t,e),e)}}])&&c(n.prototype,i),s&&c(n,s),v}(n(54).GeoJsonEditMode);e.SnappableMode=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(377),i=n(207),o=n(75),a=u(n(266)),s=u(n(343));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function g(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=i.ViewMode,x={type:"FeatureCollection",features:[]},E=b({mode:w},a.default.defaultProps,{data:[],selectedIndexes:[],filled:!1,stroked:!0,lineWidthScale:1,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",getHexagons:function(t){return t.hexIds},getEditedCluster:function(t,e){return e?b({},e,{hexIds:t}):{hexIds:t}},resolution:9}),O=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(c,t);var e,n,i,s,u=(e=c,function(){var t,n=v(e);if(y()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function c(){return h(this,c),u.apply(this,arguments)}return n=c,(i=[{key:"initializeState",value:function(){d(v(c.prototype),"initializeState",this).call(this),this.setState({tentativeHexagonIDs:[]})}},{key:"getDerivedHexagonIDs",value:function(t){return(0,o.polyfill)(t,this.props.resolution,!0)}},{key:"getDerivedHexagonID",value:function(t){return(0,o.geoToH3)(t[1],t[0],this.props.resolution)}},{key:"renderLayers",value:function(){var t=this;return[new a.default(this.getSubLayerProps({id:"editable-geojson",mode:this.props.mode,data:x,selectedFeatureIndexes:[],onEdit:function(e){var n=e.editType,r=e.editContext;switch(n){case"updateTentativeFeature":if("Polygon"===r.feature.geometry.type){var i=r.feature.geometry.coordinates,o=t.getDerivedHexagonIDs(i);t.setState({tentativeHexagonIDs:o})}else if("Point"===r.feature.geometry.type){var a=r.feature.geometry.coordinates,s=t.getDerivedHexagonID(a);t.setState({tentativeHexagonIDs:[s]})}break;case"addFeature":var u=l(t.props.data),c=t.props.modeConfig;if(c&&c.booleanOperation)if(1!==t.props.selectedIndexes.length)console.warn("booleanOperation only supported for single cluster selection");else{var f,h=new Set(t.getSelectedHexIDs()),p=new Set(t.state.tentativeHexagonIDs);switch(c.booleanOperation){case"union":default:f=l(new Set([].concat(l(h),l(p))));break;case"intersection":f=l(h).filter((function(t){return p.has(t)}));break;case"difference":f=l(h).filter((function(t){return!p.has(t)}))}var d=t.props.selectedIndexes[0],g=t.props.data[d];u[d]=t.props.getEditedCluster(f,g)}else u.push(t.props.getEditedCluster(t.state.tentativeHexagonIDs,null));t.setState({tentativeHexagonIDs:[]}),t.props.onEdit({updatedData:u})}}})),new r.H3ClusterLayer(this.getSubLayerProps({id:"hexagons",data:this.props.data,getHexagons:this.props.getHexagons})),new r.H3ClusterLayer(this.getSubLayerProps({id:"tentative-hexagons",data:[{hexIds:this.state.tentativeHexagonIDs}],getHexagons:function(t){return t.hexIds}}))]}},{key:"getSelectedHexIDs",value:function(){var t=this,e=[];return this.props.selectedIndexes.forEach((function(n){var r=t.props.data[n],i=t.props.getHexagons(r);e=e.concat(i)})),e}},{key:"getCursor",value:function(t){var e=t.isDragging,n=this.state.cursor;return n||(n=e?"grabbing":"grab"),n}}])&&p(n.prototype,i),s&&p(n,s),c}(s.default);e.default=O,_(O,"layerName","EditableH3ClusterLayer"),_(O,"defaultProps",E)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SELECTION_TYPE=void 0;var r,i=n(28),o=n(63),a=n(211),s=f(n(295)),u=f(n(206)),c=n(207),l=f(n(266));function f(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return!e||"object"!==h(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};e.SELECTION_TYPE=S;var T=(O(r={},S.RECTANGLE,c.DrawRectangleMode),O(r,S.POLYGON,c.DrawPolygonMode),r),P=O({},S.RECTANGLE,{dragToDraw:!0}),M={selectionType:S.RECTANGLE,layerIds:[],onSelect:function(){}},C={type:"FeatureCollection",features:[]},I="selection-blocker",R=["lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","lineWidthUnits","lineJointRounded","lineMiterLimit","pointRadiusScale","pointRadiusMinPixels","pointRadiusMaxPixels","lineDashJustified","getLineColor","getFillColor","getRadius","getLineWidth","getLineDashArray","getTentativeLineDashArray","getTentativeLineColor","getTentativeFillColor","getTentativeLineWidth"],k=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(h,t);var e,n,r,i,f=(e=h,function(){var t,n=x(e);if(w()){var r=x(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _(this,t)});function h(){return A(this,h),f.apply(this,arguments)}return n=h,(r=[{key:"_selectRectangleObjects",value:function(t){var e=this.props,n=e.layerIds,r=e.onSelect,i=y(this.context.viewport.project(t[0][0]),2),o=i[0],a=i[1],s=y(this.context.viewport.project(t[0][2]),2),u=s[0],c=s[1];r({pickingInfos:this.context.deck.pickObjects({x:Math.min(o,u),y:Math.min(a,c),width:Math.abs(u-o),height:Math.abs(c-a),layerIds:n})})}},{key:"_selectPolygonObjects",value:function(t){var e,n=this,r=this.props,i=r.layerIds,o=r.onSelect,c=t[0].map((function(t){return n.context.viewport.project(t)})),l=c.map((function(t){return t[0]})),f=c.map((function(t){return t[1]})),h=Math.min.apply(Math,g(l)),p=Math.min.apply(Math,g(f)),d=Math.max.apply(Math,g(l)),y=Math.max.apply(Math,g(f)),v=(0,a.polygon)(t),m=(0,s.default)(v,50);try{e=(0,u.default)(m,v)}catch(b){return void console.log("turfDifference() error",b)}this.setState({pendingPolygonSelection:{bigPolygon:e}});var A="".concat(this.props.id,"-").concat(I);setTimeout((function(){var t=n.context.deck.pickObjects({x:h,y:p,width:d-h,height:y-p,layerIds:[A].concat(g(i))});o({pickingInfos:t.filter((function(t){return t.layer.id!==n.props.id}))})}),250)}},{key:"renderLayers",value:function(){var t=this,e=this.state.pendingPolygonSelection,n=T[this.props.selectionType]||c.ViewMode,r=P[this.props.selectionType],i={};R.forEach((function(e){void 0!==t.props[e]&&(i[e]=t.props[e])}));var a=[new l.default(this.getSubLayerProps(d({id:"selection-geojson",pickable:!0,mode:n,modeConfig:r,selectedFeatureIndexes:[],data:C,onEdit:function(e){var n=e.updatedData;if("addFeature"===e.editType){var r=n.features[0].geometry.coordinates;t.props.selectionType===S.RECTANGLE?t._selectRectangleObjects(r):t.props.selectionType===S.POLYGON&&t._selectPolygonObjects(r)}}},i)))];if(e){var s=e.bigPolygon;a.push(new o.PolygonLayer(this.getSubLayerProps({id:I,pickable:!0,stroked:!1,opacity:1,data:[s],getLineColor:function(t){return[0,0,0,1]},getFillColor:function(t){return[0,0,0,1]},getPolygon:function(t){return t.geometry.coordinates}})))}return a}},{key:"shouldUpdateState",value:function(t){var e=t.changeFlags,n=e.stateChanged,r=e.propsOrDataChanged;return n||r}}])&&b(n.prototype,r),i&&b(n,i),h}(i.CompositeLayer);e.default=k,O(k,"layerName","SelectionLayer"),O(k,"defaultProps",M)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(28),i=n(63);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,r,o,h=(e=p,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function p(){return a(this,p),h.apply(this,arguments)}return n=p,(r=[{key:"renderLayers",value:function(){return[new i.ScatterplotLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-ScatterplotLayer"),data:this.props.data})),new i.LineLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-LineLayer"),data:this.props.data,pickable:!1,getSourcePosition:function(t){var e=t.position;return[e[0],e[1],0]},getTargetPosition:function(t){var e=t.position;return[e[0],e[1],e[2]||0]},getColor:[150,150,150,200],getStrokeWidth:3}))]}}])&&s(n.prototype,r),o&&s(n,o),p}(r.CompositeLayer);e.default=p,h(p,"layerName","ElevatedEditHandleLayer"),h(p,"defaultProps",{})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null};var i={name:"outline",vs:"attribute float instanceZLevel;\nvarying float outline_vzLevel;\nvarying vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nvarying float outline_vzLevel;\n// varying vec2 outline_vUV;\nvarying vec4 outline_vPosition;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e=t.outlineEnabled,n=t.outlineRenderShadowmap,i=t.outlineShadowmap,o={};return void 0!==e&&(o.outline_uEnabled=e),void 0!==n&&(o.outline_uRenderOutlines=n),void 0!==i&&(o.outline_uShadowmap=i),o}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(28),i=n(63),o=n(277),a=l(n(348)),s=l(n(484)),u=l(n(485)),c=n(486);function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=o.SimpleMeshLayer,w={mesh:new s.default({headSize:.2,tailWidth:.05})},x=Object.assign({},a.default.defaultProps,{MarkerLayer:_,markerLayerProps:w,sizeScale:100,fp64:!1,hightlightIndex:-1,highlightPoint:null,getPath:function(t){return t.path},getColor:function(t){return t.color},getMarkerColor:function(t){return[0,0,0,255]},getDirection:function(t){return t.direction},getMarkerPercentages:function(t,e){return e.lineLength>.1?[.25,.5,.75]:[.5]}}),E=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(p,t);var e,n,o,l,f=(e=p,function(){var t,n=m(e);if(v()){var r=m(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function p(){return d(this,p),f.apply(this,arguments)}return n=p,(o=[{key:"initializeState",value:function(){this.state={markers:[],mesh:new s.default({headSize:.2,tailWidth:.05}),closestPoint:null}}},{key:"projectFlat",value:function(t,e,n,i){if(n===r.COORDINATE_SYSTEM.METER_OFFSETS){var o=h(e.metersToLngLatDelta(t),2),a=o[0],s=o[1],u=h(i,2),c=u[0],l=u[1];return e.projectFlat([c+a,s+l])}if(n===r.COORDINATE_SYSTEM.LNGLAT_OFFSETS){var f=h(t,2),p=f[0],d=f[1],g=h(i,2),y=g[0],v=g[1];return e.projectFlat([y+p,d+v])}return e.projectFlat(t)}},{key:"updateState",value:function(t){var e=this,n=t.props,r=t.oldProps,i=t.changeFlags;if(i.dataChanged||i.updateTriggersChanged){var o=this.props,a=o.data,s=o.getPath,c=o.getDirection,l=o.getMarkerColor,f=o.getMarkerPercentages,h=o.coordinateSystem,p=o.coordinateOrigin,d=this.context.viewport;this.state.markers=(0,u.default)({data:a,getPath:s,getDirection:c,getColor:l,getMarkerPercentages:f,projectFlat:function(t){return e.projectFlat(t,d,h,p)}}),this._recalculateClosestPoint()}i.propsChanged&&n.point!==r.point&&this._recalculateClosestPoint()}},{key:"_recalculateClosestPoint",value:function(){var t=this.props,e=t.highlightPoint,n=t.highlightIndex;if(e&&n>=0){var r=this.props.data[n],i=this.props.getPath(r),o=(0,c.getClosestPointOnPolyline)({points:i,p:e}).point;this.state.closestPoints=[{position:o}]}else this.state.closestPoints=[]}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.object&&e.object.path||e.object})}},{key:"renderLayers",value:function(){return[new a.default(this.props,this.getSubLayerProps({id:"paths",data:this.props.data})),new this.props.MarkerLayer(this.getSubLayerProps(Object.assign({},this.props.markerLayerProps,{id:"markers",data:this.state.markers,getOrientation:function(t){return[0,-t.angle,0]},getColor:function(t){return t.color},sizeScale:this.props.sizeScale,fp64:this.props.fp64,pickable:!1,parameters:{blend:!1,depthTest:!1}}))),this.state.closestPoints&&new i.ScatterplotLayer({id:"".concat(this.props.id,"-highlight"),data:this.state.closestPoints,fp64:this.props.fp64})]}}])&&g(n.prototype,o),l&&g(n,l),p}(r.CompositeLayer);e.default=E,b(E,"layerName","PathMarkerLayer"),b(E,"defaultProps",x)},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(a()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),n.call(this,Object.assign({},t,{attributes:l(t)}))}return r}(n(30).Geometry);function l(t){for(var e=t.length,n=void 0===e?1:e,r=t.headSize,i=void 0===r?.2:r,o=t.tailWidth,a=void 0===o?.05:o,s=t.tailStart,u=void 0===s?.05:s,c=[.5,1,0,.5-i/2,1-i,0,.5+i/2,1-i,0,.5-a/2,u,0,.5+a/2,1-i,0,.5+a/2,u,0,.5-a/2,u,0,.5-a/2,1-i,0,.5+a/2,1-i,0],l=new Array(c.length),f=0;f<c.length/3;f++){var h=3*f;l[h+0]=(c[h+0]-.5)*n,l[h+1]=(c[h+1]-.5)*n,l[h+2]=0}return{positions:new Float32Array(l),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),texCoords:new Float32Array(c)}}e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=t.data,o=t.getPath,l=void 0===o?function(t){return t.path}:o,f=t.getDirection,h=void 0===f?function(t){return t.direction}:f,p=t.getColor,d=void 0===p?function(t){return s}:p,g=t.getMarkerPercentages,y=void 0===g?function(t){return[.5]}:g,v=t.projectFlat,m=[],A=i(n);try{for(A.s();!(e=A.n()).done;){var b,_=e.value,w=l(_),x=h(_)||u,E=d(_),O=w.map((function(t){return new r.Vector2(t)})),S=O.slice(0).reverse(),T=a(O),P=i(y(_,{lineLength:T}));try{for(P.s();!(b=P.n()).done;){var M=b.value;if(x.forward){var C=c({path:O,percentage:M,lineLength:T,color:E,object:_,projectFlat:v});m.push(C)}if(x.backward){var I=c({path:S,percentage:M,lineLength:T,color:E,object:_,projectFlat:v});m.push(I)}}}catch(R){P.e(R)}finally{P.f()}}}catch(R){A.e(R)}finally{A.f()}return m};var r=n(13);function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].distance(t[n+1]);return e}var s=[0,0,0,255],u={forward:!0,backward:!1};function c(t){var e=t.path,n=t.percentage,i=t.lineLength,o=t.color,a=t.object,s=t.projectFlat,u=i*n,c=0,l=0,f=0;for(f=0;f<e.length-1&&!((c+=e[f].distance(e[f+1]))>u);f++)l=c;var h=u-l,p=e[f+1].clone().subtract(e[f]).normalize().clone().multiply(new r.Vector2(h,h)).add(e[f]),d=180*-new r.Vector2(s(e[f+1])).subtract(s(e[f])).verticalAngle()/Math.PI;return{position:[p.x,p.y,0],angle:d,color:o,object:a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClosestPointOnLine=i,e.getClosestPointOnPolyline=function(t){var e=t.p,n=t.points;e=new r.Vector3(e);for(var o=null,a=1/0,s=-1,u=0;u<n.length-1;++u){var c=n[u],l=n[u+1],f=i({p:e,p1:c,p2:l}),h=e.distanceSquared(f);h<a&&(a=h,o=f,s=u)}return{point:o,index:s,p1:n[s],p2:n[s+1],distanceSquared:a,distance:Math.sqrt(a)}};var r=n(13);function i(t){var e=t.p,n=t.p1,i=t.p2,o=t.clampToLine,a=void 0===o||o,s=new r.Vector3(i).subtract(n),u=new r.Vector3(e).subtract(n),c=s.dot(u);return a&&(c=(0,r.clamp)(c,0,1)),s.lerp(c)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(28),i=n(63);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,r,o,a=(e=d,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(){return u(this,d),a.apply(this,arguments)}return n=d,(r=[{key:"renderLayers",value:function(){var t=this.props,e=t.id,n=t.getFillColor,r=t.getStrokeColor,o=t.getInnerRadius,a=t.updateTriggers;return[new i.ScatterplotLayer(s({},this.props,{id:"".concat(e,"-full"),data:this.props.data,getLineColor:r,updateTriggers:s({},a,{getStrokeColor:a.getStrokeColor})})),new i.ScatterplotLayer(s({},this.props,{id:"".concat(e,"-inner"),data:this.props.data,getFillColor:n,getRadius:o,pickable:!1,updateTriggers:s({},a,{getFillColor:a.getFillColor,getRadius:a.getInnerRadius})}))]}}])&&c(n.prototype,r),o&&c(n,o),d}(r.CompositeLayer);e.default=g,d(g,"layerName","JunctionScatterplotLayer"),d(g,"defaultProps",s({},i.ScatterplotLayer.defaultProps,{getFillColor:function(t){return[0,0,0,255]},getStrokeColor:function(t){return[255,255,255,255]},getInnerRadius:function(t){return 1}}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(t))return e;return[255*t[0],255*t[1],255*t[2],255*t[3]]},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(function(t){if(Array.isArray(t))return f(t)}(o=n)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||l(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[i]),r)){r(e,n);break}var o;return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var s={type:"LineString",coordinates:[t,e]},u=(0,a.point)(n),c=(0,o.default)(u,s),l=(0,i.default)(t,e),f=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?l-90:l-270,h=(0,r.default)(e,c,f),p=(0,r.default)(t,c,f);return[h.geometry.coordinates,p.geometry.coordinates]},e.distance2d=h,e.mix=p,e.nearestPointOnProjectedLine=function(t,e,n){var r=new s.default(n),i=t.geometry.coordinates.map((function(t){var e=c(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?0:o;return r.project([n,i,a])})),o=c(r.project(e.geometry.coordinates),2),a=o[0],u=o[1],l=1/0,f={};i.forEach((function(t,e){var n=c(t,2),r=n[0],o=n[1];if(0!==e){var s=c(i[e-1],2),h=s[0],p=s[1],d=p-o,g=r-h,y=h*o-r*p,v=d*d+g*g,m=Math.abs(d*a+g*u+y)/Math.sqrt(v);m<l&&(l=m,f={index:e,x0:(g*(g*a-d*u)-d*y)/v,y0:(d*(-g*a+d*u)-g*y)/v})}}));var d=f,g=d.index,y=d.x0,v=d.y0,m=c(i[g-1],3),A=m[0],b=m[1],_=m[2],w=void 0===_?0:_,x=c(i[g],3),E=x[0],O=x[1],S=x[2],T=void 0===S?0:S,P=h(A,b,E,O),M=h(A,b,y,v),C=p(w,T,M/P);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([y,v,C])},properties:{dist:l,index:g-1}}};var r=u(n(489)),i=u(n(92)),o=u(n(334)),a=n(211),s=u(n(335));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function p(t,e,n){return e*n+t*(1-n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(211),i=n(490);e.default=function(t,e,n,o){void 0===o&&(o={});var a=i.getCoord(t),s=r.degreesToRadians(a[0]),u=r.degreesToRadians(a[1]),c=r.degreesToRadians(n),l=r.lengthToRadians(e,o.units),f=Math.asin(Math.sin(u)*Math.cos(l)+Math.cos(u)*Math.sin(l)*Math.cos(c)),h=s+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(u),Math.cos(l)-Math.sin(u)*Math.sin(f)),p=r.radiansToDegrees(h),d=r.radiansToDegrees(f);return r.point([p,d],o.properties)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(211);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(63),i=s(n(178)),o=n(212),a=s(n(278));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,i,s,u=(e=g,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function g(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),e=u.call(this,t),n=f(e),i=void 0,(r="deckCache")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.deckCache=new a.default(t.getData,(function(e){return t.toNebulaFeature(e)})),e}return n=g,(i=[{key:"render",value:function(t){var e=t.nebula,n=[0,0,0,255],i=this.deckCache,a=i.objects,s=i.updateTrigger,u=e.props.viewport.zoom;return new r.TextLayer({id:"texts-".concat(this.id),data:a,opacity:1,fp64:!1,pickable:!1,getText:function(t){return t.style.text},getPosition:function(t){return t.geoJson.geometry.coordinates},getColor:function(t){return(0,o.toDeckColor)(t.style.fillColor)||n},sizeScale:1/Math.pow(2,20-u),updateTriggers:{all:s},nebulaLayer:this})}}])&&c(n.prototype,i),s&&c(n,s),g}(i.default);e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n(265),o=n(128),a=n(326),s=l(n(178)),u=n(212),c=l(n(278));function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=(m(r={},a.ArrowStyles.NONE,{forward:!1,backward:!1}),m(r,a.ArrowStyles.FORWARD,{forward:!0,backward:!1}),m(r,a.ArrowStyles.BACKWARD,{forward:!1,backward:!0}),m(r,a.ArrowStyles.BOTH,{forward:!0,backward:!0}),r),b=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(f,t);var e,n,r,s,l=(e=f,function(){var t,n=y(e);if(g()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function f(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),m(d(e=l.call(this,t)),"deckCache",void 0),m(d(e),"noBlend",void 0),m(d(e),"highlightColor",void 0),m(d(e),"arrowSize",void 0),m(d(e),"rounded",void 0),m(d(e),"dashed",void 0),m(d(e),"markerLayerProps",void 0),e.deckCache=new c.default(t.getData,(function(e){return t.toNebulaFeature(e)})),e.enableSelection=!0;var n=t.enablePicking,r=void 0===n||n,i=t.noBlend,o=void 0!==i&&i,a=t.rounded,s=void 0===a||a,u=t.dashed,h=void 0!==u&&u,p=t.markerLayerProps,g=void 0===p?null:p;return Object.assign(d(e),{enablePicking:r,noBlend:o,rounded:s,dashed:h,markerLayerProps:g}),e}return n=f,(r=[{key:"getMouseOverSegment",value:function(){return null}},{key:"_calcMarkerPercentages",value:function(t){var e=t.style.arrowPercentages;return e||((t.style.arrowStyle||a.DEFAULT_STYLE.arrowStyle)===a.ArrowStyles.NONE?[]:[[.5],[.33,.66],[.25,.5,.75]][Math.min(t.style.arrowCount||a.DEFAULT_STYLE.arrowCount,a.MAX_ARROWS)-1])}},{key:"_getHighlightedObjectIndex",value:function(t){var e=t.nebula.deckglMouseOverInfo;if(e){var n=e.originalLayer,r=e.index;if(n===this)return r}return-1}},{key:"render",value:function(t){var e=t.nebula,n=[0,0,0,255],r=this.deckCache,a=r.objects,s=r.updateTrigger;return new i.PathMarkerLayer({id:"segments-".concat(this.id),data:a,opacity:1,fp64:!1,rounded:this.rounded,pickable:!0,sizeScale:this.arrowSize||6,parameters:{depthTest:!1,blend:!this.noBlend,blendEquation:o.MAX},getPath:function(t){return t.geoJson.geometry.coordinates},getColor:function(t){return(0,u.toDeckColor)(t.style.lineColor,n)},getWidth:function(t){return t.style.lineWidthMeters||1},getZLevel:function(t){return 255*t.style.zLevel},getDirection:function(t){return A[t.style.arrowStyle]},getMarkerColor:function(t){return(0,u.toDeckColor)(t.style.arrowColor,n)},getMarkerPercentages:this._calcMarkerPercentages,updateTriggers:{all:s},highlightedObjectIndex:this._getHighlightedObjectIndex({nebula:e}),highlightColor:(0,u.toDeckColor)(this.highlightColor),dashJustified:this.dashed,getDashArray:this.dashed?function(t){return t.style.dashArray}:null,markerLayerProps:this.markerLayerProps||i.PathMarkerLayer.defaultProps.markerLayerProps,nebulaLayer:this})}}])&&h(n.prototype,r),s&&h(n,s),f}(s.default);e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(331),i=c(n(494)),o=n(28),a=c(n(327)),s=c(n(330)),u=c(n(178));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"props",void 0),p(this,"deckgl",void 0),p(this,"mainContainer",void 0),p(this,"deckglMouseOverInfo",void 0),p(this,"_deckDrawer",void 0),p(this,"_mouseWasDown",void 0),p(this,"wmViewport",void 0),p(this,"queryObjectEvents",new r.EventEmitter),p(this,"forceUpdate",void 0),p(this,"inited",void 0),p(this,"_onMouseEvent",(function(t){if(e._isNebulaEvent(t)){"mousedown"===t.type&&(e._mouseWasDown=!0);var n=e.mainContainer?e.mainContainer.getBoundingClientRect():{},r=n.top,i=void 0===r?0:r,o=n.left,a=void 0===o?0:o,s=new Proxy(t,{get:function(t,e){if("offsetX"===e)return t.pageX-a;if("offsetY"===e)return t.pageY-i;if("type"===e)return t.type.replace("pointer","mouse");var n=t[e];return"function"===typeof n?n.bind(t):n}});e._handleDeckGLEvent(s)}}))}var e,n,c;return e=t,(n=[{key:"init",value:function(t){var e=this;this.props=t,this.wmViewport=new o.WebMercatorViewport(this.props.viewport),["click","mousemove","mouseup","mousedown"].forEach((function(t){return i.default.addEventListener(t,e._onMouseEvent,!0)}))}},{key:"detach",value:function(){var t=this;["click","mousemove","mouseup","mousedown"].forEach((function(e){return i.default.removeEventListener(e,t._onMouseEvent,!0)}))}},{key:"updateProps",value:function(t){this.props=t;var e=this.props.viewport;this.wmViewport=new o.WebMercatorViewport(e)}},{key:"log",value:function(t){var e=this.props.logger;e&&e.info&&e.info("Nebula: "+t)}},{key:"updateAllDeckObjects",value:function(){this.getAllLayers().forEach((function(t){t&&t.deckCache&&t.deckCache.updateAllDeckObjects()})),this.forceUpdate()}},{key:"updateDeckObjectsByIds",value:function(t){this.getAllLayers().forEach((function(e){e&&e.deckCache&&e.deckCache.updateDeckObjectsByIds(t)})),this.forceUpdate()}},{key:"rerenderLayers",value:function(){this.updateAllDeckObjects()}},{key:"_isNebulaEvent",value:function(t){var e=t.buttons,n=t.target,r=t.type,i=this.props.viewport;if(this._mouseWasDown&&"mouseup"===r)return this._mouseWasDown=!1,!0;if("mousemove"===r&&e>0)return!0;if(!n.getBoundingClientRect)return!1;var o=n.getBoundingClientRect();return Math.round(o.width)===Math.round(i.width)&&Math.round(o.height)===Math.round(i.height)}},{key:"getMouseGroundPosition",value:function(t){return this.wmViewport.unproject([t.offsetX,t.offsetY])}},{key:"unprojectMousePosition",value:function(t){return this.wmViewport.unproject(t)}},{key:"_handleDeckGLEvent",value:function(t){var e=this.deckgl,n=this.props,r=n.onMapMouseEvent,o=n.selectionType,u=n.eventFilter,c=!0,l="auto";if(t&&e&&o){this._deckDrawer||(this._deckDrawer=new a.default(this));var f=this.getMouseGroundPosition(t);if(u&&!u(f,t))return;this._deckDrawer.handleEvent(t,f,o).redraw&&this.forceUpdate()}else{if(t&&e&&(!t.buttons||"mousemove"!==t.type)){var h=e.props.layers.filter((function(t){return t&&t.props&&t.props.nebulaLayer&&t.props.nebulaLayer.enablePicking})).map((function(t){return t.id})),p=e.pickObject({x:t.offsetX,y:t.offsetY,radius:5,layerIds:h});if(this.queryObjectEvents.emit("pick",{event:t,pickingInfo:p}),p){c=!1;var d=p.index,g=p.lngLat;if(u&&!u(g,t))return;var y=p.layer,v=p.object;y&&y.props&&y.props.nebulaLayer&&y.props.nebulaLayer.eventHandler&&y.props.nebulaLayer.eventHandler(t,p);var m=v.original||y.props.nebulaLayer&&y.props.nebulaLayer.deckCache&&y.props.nebulaLayer.deckCache.originals[d];if(m){this.deckglMouseOverInfo={originalLayer:y.props.nebulaLayer,index:d};var A=new s.default(t,{data:m,metadata:v.metadata,groundPoint:g,nebula:this});y.props.nebulaLayer.emit(t.type,A),this.forceUpdate()}l="pointer"}}if(i.default.documentElement&&(i.default.documentElement.style.cursor=l),c){this.deckglMouseOverInfo=null;var b=this.getMouseGroundPosition(t);if(u&&!u(b,t))return;var _=new s.default(t,{groundPoint:b,nebula:this});this.getAllLayers().filter((function(t){return t&&t.usesMapEvents})).forEach((function(t){return t.emit("mapMouseEvent",_)})),this.getAllLayers().filter((function(t){return t&&t.props&&t.props.nebulaLayer&&t.props.nebulaLayer.mapMouseEvent})).forEach((function(t){return t.props.nebulaLayer.mapMouseEvent(_,t)})),r&&r(t,b)}}}},{key:"getExtraDeckLayers",value:function(){var t=[];return this._deckDrawer&&t.push.apply(t,l(this._deckDrawer.render())),t}},{key:"renderDeckLayers",value:function(){var t=this;return this.getAllLayers().map((function(e){return e instanceof u.default?e.render({nebula:t}):e})).filter(Boolean)}},{key:"getAllLayers",value:function(){var t=[];return this.props.layers.filter(Boolean).forEach((function(e){t.push(e),e instanceof u.default&&t.push.apply(t,l(e.helperLayers))})),t.filter(Boolean)}},{key:"getRenderedLayers",value:function(){return[].concat(l(this.renderDeckLayers()),l(this.getExtraDeckLayers()))}},{key:"updateAndGetRenderedLayers",value:function(t,e,n){return this.inited?(this.updateProps({layers:t,viewport:e}),this.forceUpdate=function(){return n.forceUpdate()}):(this.inited=!0,this.init({layers:t,viewport:e}),this.forceUpdate=function(){return n.forceUpdate()},this.updateAllDeckObjects()),this.getRenderedLayers()}},{key:"setDeck",value:function(t){t&&(this.deckgl=t)}},{key:"setMainContainer",value:function(t){t&&(this.mainContainer=t)}}])&&h(e.prototype,n),c&&h(e,c),t}();e.default=d},function(t,e,n){(function(e){var r,i="undefined"!==typeof e?e:"undefined"!==typeof window?window:{},o=n(495);"undefined"!==typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),t.exports=r}).call(this,n(62))},,,,function(t,e,n){"use strict";t.exports=n(499)},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,A=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case h:case a:case u:case s:case d:return t;default:switch(t=t&&t.$$typeof){case l:case p:case v:case y:case c:return t;default:return e}}case o:return e}}}function x(t){return w(t)===h}e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=p,e.Fragment=a,e.Lazy=v,e.Memo=y,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return x(t)||w(t)===f},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===l},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===v},e.isMemo=function(t){return w(t)===y},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===h||t===u||t===s||t===d||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===y||t.$$typeof===c||t.$$typeof===l||t.$$typeof===p||t.$$typeof===A||t.$$typeof===b||t.$$typeof===_||t.$$typeof===m)},e.typeOf=w},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var a=function(){return"function"===typeof Symbol},s=function(t){return a()&&Boolean(Symbol[t])},u=function(t){return s(t)?Symbol[t]:"@@"+t};a()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var c=u("iterator"),l=u("observable"),f=u("species");function h(t,e){var n=t[e];if(null!=n){if("function"!==typeof n)throw new TypeError(n+" is not a function");return n}}function p(t){var e=t.constructor;return void 0!==e&&null===(e=e[f])&&(e=void 0),void 0!==e?e:x}function d(t){return t instanceof x}function g(t){g.log?g.log(t):setTimeout((function(){throw t}))}function y(t){Promise.resolve().then((function(){try{t()}catch(e){g(e)}}))}function v(t){var e=t._cleanup;if(void 0!==e&&(t._cleanup=void 0,e))try{if("function"===typeof e)e();else{var n=h(e,"unsubscribe");n&&n.call(e)}}catch(r){g(r)}}function m(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function A(t,e,n){t._state="running";var r=t._observer;try{var i=h(r,e);switch(e){case"next":i&&i.call(r,n);break;case"error":if(m(t),!i)throw n;i.call(r,n);break;case"complete":m(t),i&&i.call(r)}}catch(o){g(o)}"closed"===t._state?v(t):"running"===t._state&&(t._state="ready")}function b(t,e,n){if("closed"!==t._state){if("buffering"!==t._state)return"ready"!==t._state?(t._state="buffering",t._queue=[{type:e,value:n}],void y((function(){return function(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";for(var n=0;n<e.length&&(A(t,e[n].type,e[n].value),"closed"!==t._state);++n);}}(t)}))):void A(t,e,n);t._queue.push({type:e,value:n})}}var _=function(){function t(e,n){r(this,t),this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var i=new w(this);try{this._cleanup=n.call(void 0,i)}catch(o){i.error(o)}"initializing"===this._state&&(this._state="ready")}return o(t,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(m(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),t}(),w=function(){function t(e){r(this,t),this._subscription=e}return o(t,[{key:"next",value:function(t){b(this._subscription,"next",t)}},{key:"error",value:function(t){b(this._subscription,"error",t)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),t}(),x=function(){function t(e){if(r(this,t),!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if("function"!==typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}return o(t,[{key:"subscribe",value:function(t){return"object"===typeof t&&null!==t||(t={next:t,error:arguments[1],complete:arguments[2]}),new _(t,this._subscriber)}},{key:"forEach",value:function(t){var e=this;return new Promise((function(n,r){if("function"===typeof t)var i=e.subscribe({next:function(e){try{t(e,o)}catch(n){r(n),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(t+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(t){var e=this;if("function"!==typeof t)throw new TypeError(t+" is not a function");return new(p(this))((function(n){return e.subscribe({next:function(e){try{e=t(e)}catch(r){return n.error(r)}n.next(e)},error:function(t){n.error(t)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(t){var e=this;if("function"!==typeof t)throw new TypeError(t+" is not a function");return new(p(this))((function(n){return e.subscribe({next:function(e){try{if(!t(e))return}catch(r){return n.error(r)}n.next(e)},error:function(t){n.error(t)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(t){var e=this;if("function"!==typeof t)throw new TypeError(t+" is not a function");var n=p(this),r=arguments.length>1,i=!1,o=arguments[1],a=o;return new n((function(n){return e.subscribe({next:function(e){var o=!i;if(i=!0,!o||r)try{a=t(a,e)}catch(s){return n.error(s)}else a=e},error:function(t){n.error(t)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(a),n.complete()}})}))}},{key:"concat",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=p(this);return new i((function(e){var r,o=0;return function t(a){r=a.subscribe({next:function(t){e.next(t)},error:function(t){e.error(t)},complete:function(){o===n.length?(r=void 0,e.complete()):t(i.from(n[o++]))}})}(t),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(t){var e=this;if("function"!==typeof t)throw new TypeError(t+" is not a function");var n=p(this);return new n((function(r){var i=[],o=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(s){return r.error(s)}var o=n.from(e).subscribe({next:function(t){r.next(t)},error:function(t){r.error(t)},complete:function(){var t=i.indexOf(o);t>=0&&i.splice(t,1),a()}});i.push(o)},error:function(t){r.error(t)},complete:function(){a()}});function a(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(t){return t.unsubscribe()})),o.unsubscribe()}}))}},{key:l,value:function(){return this}}],[{key:"from",value:function(e){var n="function"===typeof this?this:t;if(null==e)throw new TypeError(e+" is not an object");var r=h(e,l);if(r){var i=r.call(e);if(Object(i)!==i)throw new TypeError(i+" is not an object");return d(i)&&i.constructor===n?i:new n((function(t){return i.subscribe(t)}))}if(s("iterator")&&(r=h(e,c)))return new n((function(t){y((function(){if(!t.closed){var n=!0,i=!1,o=void 0;try{for(var a,s=r.call(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(t.next(u),t.closed)return}}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}t.complete()}}))}));if(Array.isArray(e))return new n((function(t){y((function(){if(!t.closed){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()}}))}));throw new TypeError(e+" is not observable")}},{key:"of",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i="function"===typeof this?this:t;return new i((function(t){y((function(){if(!t.closed){for(var e=0;e<n.length;++e)if(t.next(n[e]),t.closed)return;t.complete()}}))}))}},{key:f,get:function(){return this}}]),t}();e.Observable=x,a()&&Object.defineProperty(x,Symbol("extensions"),{value:{symbol:l,hostReportError:g},configurable:!0})},function(t,e,n){"use strict";var r=n(204),i=n(8);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=60106,s=60107,u=60108,c=60114,l=60109,f=60110,h=60112,p=60113,d=60120,g=60115,y=60116,v=60121,m=60117,A=60119,b=60129,_=60131;if("function"===typeof Symbol&&Symbol.for){var w=Symbol.for;a=w("react.portal"),s=w("react.fragment"),u=w("react.strict_mode"),c=w("react.profiler"),l=w("react.provider"),f=w("react.context"),h=w("react.forward_ref"),p=w("react.suspense"),d=w("react.suspense_list"),g=w("react.memo"),y=w("react.lazy"),v=w("react.block"),m=w("react.fundamental"),A=w("react.scope"),b=w("react.debug_trace_mode"),_=w("react.legacy_hidden")}function x(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case s:return"Fragment";case a:return"Portal";case c:return"Profiler";case u:return"StrictMode";case p:return"Suspense";case d:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case f:return(t.displayName||"Context")+".Consumer";case l:return(t._context.displayName||"Context")+".Provider";case h:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case g:return x(t.type);case v:return x(t._render);case y:e=t._payload,t=t._init;try{return x(t(e))}catch(n){}}return null}var E=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O={};function S(t,e){for(var n=0|t._threadCount;n<=e;n++)t[n]=t._currentValue2,t._threadCount=n+1}for(var T=new Uint16Array(16),P=0;15>P;P++)T[P]=P+1;T[15]=0;var M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C=Object.prototype.hasOwnProperty,I={},R={};function k(t){return!!C.call(R,t)||!C.call(I,t)&&(M.test(t)?R[t]=!0:(I[t]=!0,!1))}function j(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){L[t]=new j(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];L[e]=new j(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){L[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){L[t]=new j(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){L[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){L[t]=new j(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){L[t]=new j(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){L[t]=new j(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){L[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)}));var N=/[\-:]([a-z])/g;function D(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(N,D);L[e]=new j(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(N,D);L[e]=new j(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(N,D);L[e]=new j(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){L[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)})),L.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){L[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)}));var F=/["'&<>]/;function B(t){if("boolean"===typeof t||"number"===typeof t)return""+t;t=""+t;var e=F.exec(t);if(e){var n,r="",i=0;for(n=e.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==n&&(r+=t.substring(i,n)),i=n+1,r+=e}t=i!==n?r+t.substring(i,n):r}return t}function z(t,e){var n,r=L.hasOwnProperty(t)?L[t]:null;return(n="style"!==t)&&(n=null!==r?0===r.type:2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])),n||function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(t,e,r,!1)?"":null!==r?(t=r.attributeName,3===(n=r.type)||4===n&&!0===e?t+'=""':(r.sanitizeURL&&(e=""+e),t+'="'+B(e)+'"')):k(t)?t+'="'+B(e)+'"':""}var U="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},G=null,V=null,q=null,H=!1,W=!1,X=null,Y=0;function Q(){if(null===G)throw Error(o(321));return G}function Z(){if(0<Y)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function K(){return null===q?null===V?(H=!1,V=q=Z()):(H=!0,q=V):null===q.next?(H=!1,q=q.next=Z()):(H=!0,q=q.next),q}function J(t,e,n,r){for(;W;)W=!1,Y+=1,q=null,n=t(e,r);return $(),n}function $(){G=null,W=!1,V=null,Y=0,q=X=null}function tt(t,e){return"function"===typeof e?e(t):e}function et(t,e,n){if(G=Q(),q=K(),H){var r=q.queue;if(e=r.dispatch,null!==X&&void 0!==(n=X.get(r))){X.delete(r),r=q.memoizedState;do{r=t(r,n.action),n=n.next}while(null!==n);return q.memoizedState=r,[r,e]}return[q.memoizedState,e]}return t=t===tt?"function"===typeof e?e():e:void 0!==n?n(e):e,q.memoizedState=t,t=(t=q.queue={last:null,dispatch:null}).dispatch=rt.bind(null,G,t),[q.memoizedState,t]}function nt(t,e){if(G=Q(),e=void 0===e?null:e,null!==(q=K())){var n=q.memoizedState;if(null!==n&&null!==e){var r=n[1];t:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!U(e[i],r[i])){r=!1;break t}r=!0}if(r)return n[0]}}return t=t(),q.memoizedState=[t,e],t}function rt(t,e,n){if(!(25>Y))throw Error(o(301));if(t===G)if(W=!0,t={action:n,next:null},null===X&&(X=new Map),void 0===(n=X.get(e)))X.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}}function it(){}var ot=null,at={readContext:function(t){var e=ot.threadID;return S(t,e),t[e]},useContext:function(t){Q();var e=ot.threadID;return S(t,e),t[e]},useMemo:nt,useReducer:et,useRef:function(t){G=Q();var e=(q=K()).memoizedState;return null===e?(t={current:t},q.memoizedState=t):e},useState:function(t){return et(tt,t)},useLayoutEffect:function(){},useCallback:function(t,e){return nt((function(){return t}),e)},useImperativeHandle:it,useEffect:it,useDebugValue:it,useDeferredValue:function(t){return Q(),t},useTransition:function(){return Q(),[function(t){t()},!1]},useOpaqueIdentifier:function(){return(ot.identifierPrefix||"")+"R:"+(ot.uniqueID++).toString(36)},useMutableSource:function(t,e){return Q(),e(t._source)}},st="http://www.w3.org/1999/xhtml";function ut(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ct={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},lt=r({menuitem:!0},ct),ft={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];Object.keys(ft).forEach((function(t){ht.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var pt=/([A-Z])/g,dt=/^ms-/,gt=i.Children.toArray,yt=E.ReactCurrentDispatcher,vt={listing:!0,pre:!0,textarea:!0},mt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,At={},bt={};var _t=Object.prototype.hasOwnProperty,wt={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function xt(t,e){if(void 0===t)throw Error(o(152,x(e)||"Component"))}function Et(t,e,n){function a(i,a){var s=a.prototype&&a.prototype.isReactComponent,u=function(t,e,n,r){if(r&&"object"===typeof(r=t.contextType)&&null!==r)return S(r,n),r[n];if(t=t.contextTypes){for(var i in n={},t)n[i]=e[i];e=n}else e=O;return e}(a,e,n,s),c=[],l=!1,f={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(t,e){l=!0,c=[e]},enqueueSetState:function(t,e){if(null===c)return null;c.push(e)}};if(s){if(s=new a(i.props,u,f),"function"===typeof a.getDerivedStateFromProps){var h=a.getDerivedStateFromProps.call(null,i.props,s.state);null!=h&&(s.state=r({},s.state,h))}}else if(G={},s=a(i.props,u,f),null==(s=J(a,i.props,s,u))||null==s.render)return void xt(t=s,a);if(s.props=i.props,s.context=u,s.updater=f,void 0===(f=s.state)&&(s.state=f=null),"function"===typeof s.UNSAFE_componentWillMount||"function"===typeof s.componentWillMount)if("function"===typeof s.componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&s.UNSAFE_componentWillMount(),c.length){f=c;var p=l;if(c=null,l=!1,p&&1===f.length)s.state=f[0];else{h=p?f[0]:s.state;var d=!0;for(p=p?1:0;p<f.length;p++){var g=f[p];null!=(g="function"===typeof g?g.call(s,h,i.props,u):g)&&(d?(d=!1,h=r({},h,g)):r(h,g))}s.state=h}}else c=null;if(xt(t=s.render(),a),"function"===typeof s.getChildContext&&"object"===typeof(i=a.childContextTypes)){var y=s.getChildContext();for(var v in y)if(!(v in i))throw Error(o(108,x(a)||"Unknown",v))}y&&(e=r({},e,y))}for(;i.isValidElement(t);){var s=t,u=s.type;if("function"!==typeof u)break;a(s,u)}return{child:t,context:e}}var Ot=function(){function t(t,e,n){i.isValidElement(t)?t.type!==s?t=[t]:(t=t.props.children,t=i.isValidElement(t)?[t]:gt(t)):t=gt(t),t={type:null,domNamespace:st,children:t,childIndex:0,context:O,footer:""};var r=T[0];if(0===r){var a=T,u=2*(r=a.length);if(!(65536>=u))throw Error(o(304));var c=new Uint16Array(u);for(c.set(a),(T=c)[0]=r+1,a=r;a<u-1;a++)T[a]=a+1;T[u-1]=0}else T[0]=T[r];this.threadID=r,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=e,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=n&&n.identifierPrefix||""}var e=t.prototype;return e.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var t=this.threadID;T[t]=T[0],T[0]=t}},e.pushProvider=function(t){var e=++this.contextIndex,n=t.type._context,r=this.threadID;S(n,r);var i=n[r];this.contextStack[e]=n,this.contextValueStack[e]=i,n[r]=t.props.value},e.popProvider=function(){var t=this.contextIndex,e=this.contextStack[t],n=this.contextValueStack[t];this.contextStack[t]=null,this.contextValueStack[t]=null,this.contextIndex--,e[this.threadID]=n},e.clearProviders=function(){for(var t=this.contextIndex;0<=t;t--)this.contextStack[t][this.threadID]=this.contextValueStack[t]},e.read=function(t){if(this.exhausted)return null;var e=ot;ot=this;var n=yt.current;yt.current=at;try{for(var r=[""],i=!1;r[0].length<t;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;T[a]=T[0],T[0]=a;break}var s=this.stack[this.stack.length-1];if(i||s.childIndex>=s.children.length){var u=s.footer;if(""!==u&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===l)this.popProvider(s.type);else if(s.type===p){this.suspenseDepth--;var c=r.pop();if(i){i=!1;var f=s.fallbackFrame;if(!f)throw Error(o(303));this.stack.push(f),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=c}r[this.suspenseDepth]+=u}else{var h=s.children[s.childIndex++],d="";try{d+=this.render(h,s.context,s.domNamespace)}catch(g){if(null!=g&&"function"===typeof g.then)throw Error(o(294));throw g}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=d}}return r[0]}finally{yt.current=n,ot=e,$()}},e.render=function(t,e,n){if("string"===typeof t||"number"===typeof t)return""===(n=""+t)?"":this.makeStaticMarkup?B(n):this.previousWasTextNode?"\x3c!-- --\x3e"+B(n):(this.previousWasTextNode=!0,B(n));if(t=(e=Et(t,e,this.threadID)).child,e=e.context,null===t||!1===t)return"";if(!i.isValidElement(t)){if(null!=t&&null!=t.$$typeof){if((n=t.$$typeof)===a)throw Error(o(257));throw Error(o(258,n.toString()))}return t=gt(t),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),""}var v=t.type;if("string"===typeof v)return this.renderDOM(t,e,n);switch(v){case _:case b:case u:case c:case d:case s:return t=gt(t.props.children),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case p:throw Error(o(294));case A:throw Error(o(343))}if("object"===typeof v&&null!==v)switch(v.$$typeof){case h:G={};var w=v.render(t.props,t.ref);return w=J(v.render,t.props,w,t.ref),w=gt(w),this.stack.push({type:null,domNamespace:n,children:w,childIndex:0,context:e,footer:""}),"";case g:return t=[i.createElement(v.type,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case l:return n={type:t,domNamespace:n,children:v=gt(t.props.children),childIndex:0,context:e,footer:""},this.pushProvider(t),this.stack.push(n),"";case f:v=t.type,w=t.props;var x=this.threadID;return S(v,x),v=gt(w.children(v[x])),this.stack.push({type:t,domNamespace:n,children:v,childIndex:0,context:e,footer:""}),"";case m:throw Error(o(338));case y:return v=(w=(v=t.type)._init)(v._payload),t=[i.createElement(v,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),""}throw Error(o(130,null==v?v:typeof v,""))},e.renderDOM=function(t,e,n){var a=t.type.toLowerCase();if(n===st&&ut(a),!At.hasOwnProperty(a)){if(!mt.test(a))throw Error(o(65,a));At[a]=!0}var s=t.props;if("input"===a)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===a){var u=s.value;if(null==u){u=s.defaultValue;var c=s.children;if(null!=c){if(null!=u)throw Error(o(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(o(93));c=c[0]}u=""+c}null==u&&(u="")}s=r({},s,{value:void 0,children:""+u})}else if("select"===a)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===a){c=this.currentSelectValue;var l=function(t){if(void 0===t||null===t)return t;var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(s.children);if(null!=c){var f=null!=s.value?s.value+"":l;if(u=!1,Array.isArray(c)){for(var h=0;h<c.length;h++)if(""+c[h]===f){u=!0;break}}else u=""+c===f;s=r({selected:void 0,children:void 0},s,{selected:u,children:l})}}if(u=s){if(lt[a]&&(null!=u.children||null!=u.dangerouslySetInnerHTML))throw Error(o(137,a));if(null!=u.dangerouslySetInnerHTML){if(null!=u.children)throw Error(o(60));if("object"!==typeof u.dangerouslySetInnerHTML||!("__html"in u.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=u.style&&"object"!==typeof u.style)throw Error(o(62))}u=s,c=this.makeStaticMarkup,l=1===this.stack.length,f="<"+t.type;t:if(-1===a.indexOf("-"))h="string"===typeof u.is;else switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":h=!1;break t;default:h=!0}for(_ in u)if(_t.call(u,_)){var p=u[_];if(null!=p){if("style"===_){var d=void 0,g="",y="";for(d in p)if(p.hasOwnProperty(d)){var v=0===d.indexOf("--"),m=p[d];if(null!=m){if(v)var A=d;else if(A=d,bt.hasOwnProperty(A))A=bt[A];else{var b=A.replace(pt,"-$1").toLowerCase().replace(dt,"-ms-");A=bt[A]=b}g+=y+A+":",y=d,g+=v=null==m||"boolean"===typeof m||""===m?"":v||"number"!==typeof m||0===m||ft.hasOwnProperty(y)&&ft[y]?(""+m).trim():m+"px",y=";"}}p=g||null}d=null,h?wt.hasOwnProperty(_)||(d=k(d=_)&&null!=p?d+'="'+B(p)+'"':""):d=z(_,p),d&&(f+=" "+d)}}c||l&&(f+=' data-reactroot=""');var _=f;u="",ct.hasOwnProperty(a)?_+="/>":(_+=">",u="</"+t.type+">");t:{if(null!=(c=s.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break t}}else if("string"===typeof(c=s.children)||"number"===typeof c){c=B(c);break t}c=null}return null!=c?(s=[],vt.hasOwnProperty(a)&&"\n"===c.charAt(0)&&(_+="\n"),_+=c):s=gt(s.children),t=t.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?ut(t):"http://www.w3.org/2000/svg"===n&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:s,childIndex:0,context:e,footer:u}),this.previousWasTextNode=!1,_},t}();e.renderToNodeStream=function(){throw Error(o(207))},e.renderToStaticMarkup=function(t,e){t=new Ot(t,!0,e);try{return t.read(1/0)}finally{t.destroy()}},e.renderToStaticNodeStream=function(){throw Error(o(208))},e.renderToString=function(t,e){t=new Ot(t,!1,e);try{return t.read(1/0)}finally{t.destroy()}},e.version="17.0.1"},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CloudinaryContext",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Transformation",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Video",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Audio",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Placeholder",{enumerable:!0,get:function(){return u.default}});c(n(8));var r=c(n(508)),i=c(n(621)),o=c(n(622)),a=c(n(376)),s=c(n(623)),u=c(n(624));function c(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(8)),i=u(n(14)),o=u(n(213)),a=n(294),s=n(375);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(u,t);var e,n,i,o=g(u);function u(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),o.call(this,t,e)}return e=u,(n=[{key:"render",value:function(){var t=f(f({},this.getContext()),this.props),e=(0,a.extractCloudinaryProps)(t),n=e.children,i=e.cloudinaryProps,o=e.nonCloudinaryProps,u=e.cloudinaryReactProps;return r.default.createElement(s.CloudinaryContextType.Provider,{value:i},u.includeOwnBody?n:r.default.createElement("div",o,n))}}])&&p(e.prototype,n),i&&p(e,i),u}(o.default);m.propTypes=f(f({},o.default.propTypes),{},{includeOwnBody:i.default.bool}),m.defaultProps={includeOwnBody:!1};var A=m;e.default=A},function(t,e,n){"use strict";(function(t){var r=n(510),i=n(347),o=n(511);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function A(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function _(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return _(t,e,n,r)}function x(t,e,n,r){return V(G(e),t,n,r)}function E(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||k(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||k(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);k(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:U(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(62))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(l(t,s,s+a>u?u:s+a));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(280),i=n(147),o=n(352),a=n(148),s=n(215),u=n(149),c=Object.prototype.hasOwnProperty,l=o((function(t,e){if(s(e)||a(e))i(e,u(e),t);else for(var n in e)c.call(e,n)&&r(t,n,e[n])}));t.exports=l},function(t,e,n){var r=n(181),i=n(516),o=n(110),a=n(351),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?h:s).test(a(t))}},function(t,e,n){var r=n(182),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(517),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(98)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(520),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(u),r(t,this,c)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(522),i=n(524)(r);t.exports=i},function(t,e,n){var r=n(523),i=n(349),o=n(282),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(214),i=n(148),o=n(355),a=n(110);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(134),i=n(99);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(134),i=n(354),o=n(99),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(215),i=n(531),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(358)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(533);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(359),i=n(556),o=n(280),a=n(557),s=n(558),u=n(361),c=n(362),l=n(561),f=n(562),h=n(563),p=n(564),d=n(290),g=n(569),y=n(570),v=n(368),m=n(123),A=n(284),b=n(576),_=n(110),w=n(578),x=n(149),E=n(183),O="[object Arguments]",S="[object Function]",T="[object Object]",P={};P[O]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[T]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[S]=P["[object WeakMap]"]=!1,t.exports=function t(e,n,M,C,I,R){var k,j=1&n,L=2&n,N=4&n;if(M&&(k=I?M(e,C,I,R):M(e)),void 0!==k)return k;if(!_(e))return e;var D=m(e);if(D){if(k=g(e),!j)return c(e,k)}else{var F=d(e),B=F==S||"[object GeneratorFunction]"==F;if(A(e))return u(e,j);if(F==T||F==O||B&&!I){if(k=L||B?{}:v(e),!j)return L?f(e,s(k,e)):l(e,a(k,e))}else{if(!P[F])return I?e:{};k=y(e,F,j)}}R||(R=new r);var z=R.get(e);if(z)return z;R.set(e,k),w(e)?e.forEach((function(r){k.add(t(r,n,M,r,e,R))})):b(e)&&e.forEach((function(r,i){k.set(i,t(r,n,M,i,e,R))}));var U=D?void 0:(N?L?p:h:L?E:x)(e);return i(U||e,(function(r,i){U&&(r=e[i=r]),o(k,i,t(r,n,M,i,e,R))})),k}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(218),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(218);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(218);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(218);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(217);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(217),i=n(286),o=n(360);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(545),i=n(217),o=n(286);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(546),i=n(547),o=n(548),a=n(549),s=n(550);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(219);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(219),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(219),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(219);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(220);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(220);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(220);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(220);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(147),i=n(149);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(147),i=n(183);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(110),i=n(215),o=n(560),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(147),i=n(287);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(147),i=n(365);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(366),i=n(287),o=n(149);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(366),i=n(365),o=n(183);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(133)(n(98),"DataView");t.exports=r},function(t,e,n){var r=n(133)(n(98),"Promise");t.exports=r},function(t,e,n){var r=n(133)(n(98),"Set");t.exports=r},function(t,e,n){var r=n(133)(n(98),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(291),i=n(572),o=n(573),a=n(574),s=n(367);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Set]":return new u;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(98).Uint8Array;t.exports=r},function(t,e,n){var r=n(291);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(182),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(110),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(577),i=n(216),o=n(285),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(290),i=n(99);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(579),i=n(216),o=n(285),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(290),i=n(99);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}},function(t,e,n){var r=n(582),i=n(592),o=n(353),a=n(369),s=o((function(t,e){return a(t)?r(t,i(e,1,a,!0)):[]}));t.exports=s},function(t,e,n){var r=n(583),i=n(586),o=n(590),a=n(292),s=n(216),u=n(591);t.exports=function(t,e,n,c){var l=-1,f=i,h=!0,p=t.length,d=[],g=e.length;if(!p)return d;n&&(e=a(e,s(n))),c?(f=o,h=!1):e.length>=200&&(f=u,h=!1,e=new r(e));t:for(;++l<p;){var y=t[l],v=null==n?y:n(y);if(y=c||0!==y?y:0,h&&v===v){for(var m=g;m--;)if(e[m]===v)continue t;d.push(y)}else f(e,v,c)||d.push(y)}return d}},function(t,e,n){var r=n(360),i=n(584),o=n(585);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(221);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t){return t!==t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(288),i=n(593);t.exports=function t(e,n,o,a,s){var u=-1,c=e.length;for(o||(o=i),s||(s=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(t,e,n){var r=n(182),i=n(283),o=n(123),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(595),i=n(149);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(363),i=n(181);t.exports=function(t,e){return r(e,(function(e){return i(t[e])}))}},function(t,e,n){var r=n(221),i=n(148),o=n(370),a=n(597),s=n(600),u=Math.max;t.exports=function(t,e,n,c){t=i(t)?t:s(t),n=n&&!c?a(n):0;var l=t.length;return n<0&&(n=u(l+n,0)),o(t)?n<=l&&t.indexOf(e,n)>-1:!!l&&r(t,e,n)>-1}},function(t,e,n){var r=n(598);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e,n){var r=n(599),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(110),i=n(371),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(601),i=n(149);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(292);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e,n){var r=n(99),i=n(293);t.exports=function(t){return r(t)&&1===t.nodeType&&!i(t)}},function(t,e,n){var r=n(604),i=n(352)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e,n){var r=n(359),i=n(372),o=n(605),a=n(607),s=n(110),u=n(183),c=n(373);t.exports=function t(e,n,l,f,h){e!==n&&o(n,(function(o,u){if(h||(h=new r),s(o))a(e,n,u,l,t,f,h);else{var p=f?f(c(e,u),o,u+"",e,n,h):void 0;void 0===p&&(p=o),i(e,u,p)}}),u)}},function(t,e,n){var r=n(606)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(372),i=n(361),o=n(367),a=n(362),s=n(368),u=n(283),c=n(123),l=n(369),f=n(284),h=n(181),p=n(110),d=n(293),g=n(357),y=n(373),v=n(608);t.exports=function(t,e,n,m,A,b,_){var w=y(t,n),x=y(e,n),E=_.get(x);if(E)r(t,n,E);else{var O=b?b(w,x,n+"",t,e,_):void 0,S=void 0===O;if(S){var T=c(x),P=!T&&f(x),M=!T&&!P&&g(x);O=x,T||P||M?c(w)?O=w:l(w)?O=a(w):P?(S=!1,O=i(x,!0)):M?(S=!1,O=o(x,!0)):O=[]:d(x)||u(x)?(O=w,u(w)?O=v(w):p(w)&&!h(w)||(O=s(x))):S=!1}S&&(_.set(x,O),A(O,x,m,b,_),_.delete(x)),r(t,n,O)}}},function(t,e,n){var r=n(147),i=n(183);t.exports=function(t){return r(t,i(t))}},function(t,e,n){var r=n(374),i=n(610),o=n(612),a=n(613),s=n(614),u=n(618),c=/^\s+|\s+$/g;t.exports=function(t,e,n){if((t=u(t))&&(n||void 0===e))return t.replace(c,"");if(!t||!(e=r(e)))return t;var l=s(t),f=s(e),h=a(l,f),p=o(l,f)+1;return i(l,h,p).join("")}},function(t,e,n){var r=n(611);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(221);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(221);t.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(615),i=n(616),o=n(617);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",l=c+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+c+u+")*"),f="(?:"+[o+r+"?",r,a,s,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+f+l,"g");t.exports=function(t){return t.match(h)||[]}},function(t,e,n){var r=n(374);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getConfiguredCloudinary=e.makeElementResponsive=e.getVideoTag=e.getImageTag=e.nonEmpty=void 0;var r=n(112);function i(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l=function(t){return Object.entries(t).reduce((function(t,e){var n=u(e,2),r=n[0],i=n[1];return null==i?t:a(a({},t),{},s({},r,i))}),{})};e.nonEmpty=l;var f=function(t){var e=l(t),n=(e.public_id,i(e,["public_id"])),o=r.Util.withSnakeCaseKeys(n);return r.Cloudinary.new(o)};e.getConfiguredCloudinary=f;var h=function(t,e){var n=t.publicId,o=i(t,["publicId"]);return f(o)["".concat(e,"Tag")](n,r.Util.withSnakeCaseKeys(o))};e.getImageTag=function(t){return h(t,"image")};e.getVideoTag=function(t){return h(t,"video")};e.makeElementResponsive=function(t,e){var n=r.Util.withSnakeCaseKeys(e),i=f(n);return i.cloudinary_update(t,n),i.responsive(n,!1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractCloudinaryProps=e.CLOUDINARY_REACT_PROPS=void 0;var r=n(112);function i(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=["accessibility","breakpoints","dataSrc","placeholder","publicId","signature"];e.CLOUDINARY_REACT_PROPS=a;var s,u=[].concat((s=r.Transformation.PARAM_NAMES,function(t){if(Array.isArray(t))return o(t)}(s)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(s)||function(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a).map(r.Util.camelCase).reduce((function(t,e){return t[e]=!0,t}),{});e.extractCloudinaryProps=function(t){var e=t.children,n=i(t,["children"]),o={children:e,cloudinaryProps:{},nonCloudinaryProps:{},cloudinaryReactProps:{}};return Object.keys(n).forEach((function(t){var e=r.Util.camelCase(t),i=n[t];u[e]?void 0!==n[t]&&null!==n[t]&&(o.cloudinaryProps[e]=i):"includeOwnBody"===e?o.cloudinaryReactProps[e]=i:o.nonCloudinaryProps[t]=i})),o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!==typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}n.default=t,e&&e.set(t,n);return n}(n(8)),i=u(n(213)),o=n(294),a=n(112),s=u(n(14));function u(t){return t&&t.__esModule?t:{default:t}}function c(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?A(t):e}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=["Warning: passing a number value for width cancels the 'responsive' prop's effect on the image transformation.","The 'responsive' prop affects the image transformation only when width === 'auto'.","Passing 'width=\"auto\" responsive' will affect the actual image width that is fetched from Cloudinary.","The 'responsive' prop causes the Image component to request an image which width is equal to the width of it's container.","When passing 'width=\"auto\" responsive', you can set the <img> element width by passing a 'style' prop"].join("\n"),x=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(u,t);var e,n,i,s=v(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),_(A(n=s.call(this,t,e)),"isResponsive",(function(){var t=n.getExtendedProps(),e=t.responsive,r=t.width;return e&&"auto"!==r&&console.warn(w),e&&n.element&&n.element.current})),_(A(n),"getOptions",(function(){var t=n.getExtendedProps(),e=p(p({},t),n.getTransformation(t)),r=(e.children,e.innerRef,d(e,["children","innerRef"]));return n.shouldLazyLoad()||delete r.loading,r})),_(A(n),"getAttributes",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.placeholder,r=(0,o.extractCloudinaryProps)(p(p({},n.getOptions()),t)),i=r.cloudinaryProps,s=r.nonCloudinaryProps,u=r.cloudinaryReactProps,c=(0,o.getImageTag)(p(p({},i),u)),l=a.Util.withCamelCaseKeys(c.attributes()),f=p(p({},l),s);return f.dataSrc&&(f["data-src"]=f.dataSrc),e&&f.id&&(f.id=f.id+"-cld-placeholder"),n.shouldLazyLoad()&&(f["data-src"]=f.dataSrc||f.src,delete f.src),o.CLOUDINARY_REACT_PROPS.forEach((function(t){delete f[t]})),f})),_(A(n),"update",(function(){if(n.shouldLazyLoad())a.Util.detectIntersection(n.element.current,n.onIntersect);else if(n.isResponsive()){var t=n.getOptions(),e=n.getPlaceholderType();if(e){var r=(0,o.makeElementResponsive)(n.placeholderElement.current,p(p({},t),{},{placeholder:e}));n.listenerRemovers.push(r)}var i=(0,o.makeElementResponsive)(n.element.current,t);n.listenerRemovers.push(i)}})),_(A(n),"shouldLazyLoad",(function(){var t=n.getExtendedProps().loading;return!n.state.isInView&&("lazy"===t||"auto"===t)})),_(A(n),"handleImageLoaded",(function(){var t=n.props.onLoad;n.setState({isLoaded:!0},(function(){t&&t()}))})),_(A(n),"renderPlaceholder",(function(t,e){e.style=p(p({},e.style||{}),{},{opacity:0,position:"absolute"}),e.onLoad=n.handleImageLoaded;var i=n.getAttributes({placeholder:t});return r.default.createElement(r.Fragment,null,n.renderImage(e),r.default.createElement("div",{style:{display:"inline"}},r.default.createElement("img",f({ref:n.placeholderElement},i))))})),_(A(n),"renderImage",(function(t){return r.default.createElement("img",f({ref:n.attachRef},t))})),_(A(n),"getPlaceholderType",(function(){var t=n.getExtendedProps().children,e=n.getChildPlaceholder(t);return e?e.props.type:null})),n.placeholderElement=(0,r.createRef)(),n.state={isLoaded:!1},n.listenerRemovers=[],n}return e=u,(n=[{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.listenerRemovers.forEach((function(t){t()}))}},{key:"render",value:function(){var t=this.state.isLoaded,e=this.getAttributes(),n=this.getPlaceholderType();return!t&&n?this.renderPlaceholder(n,e):this.renderImage(e)}}])&&g(e.prototype,n),i&&g(e,i),u}(i.default);x.defaultProps={},x.propTypes=i.default.propTypes,x.propTypes.responsive=s.default.bool,x.propTypes.loading=s.default.string,x.propTypes.accessibility=s.default.string;var E=x;e.default=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i(n(8));var r=i(n(213));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,t);var e,n,r,i=u(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"render",value:function(){return null}}])&&a(e.prototype,n),r&&a(e,r),o}(r.default);f.propTypes=r.default.propTypes,f.defaultProps={},f.exposesProps=!0,f.displayName="CloudinaryTransformation";var h=f;e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(8)),i=o(n(14));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(a,t);var e,n,i,o=f(a);function a(){var t;u(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(p(t=o.call.apply(o,[this].concat(n))),"mimeType","audio"),t}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=t.innerRef,n=t.fallback,i=t.children,o=this.getVideoTagProps(),a=o.tagAttributes,u=o.sources;return delete a.poster,r.default.createElement("audio",s({ref:e},a),u,n,i)}}])&&c(e.prototype,n),i&&c(e,i),a}(o(n(376)).default);y.propTypes={publicId:i.default.string},y.defaultProps={sourceTypes:["aac","mp3","ogg"]};var v=y;e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i(n(8));var r=i(n(14));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){t.type;return null};o.propTypes={type:r.default.string},o.defaultProps={type:"blur"},o.displayName="CloudinaryPlaceholder";var a=o;e.default=a},,function(t,e,n){"use strict";n.r(e),n.d(e,"parse",(function(){return M})),n.d(e,"parseValue",(function(){return C})),n.d(e,"parseType",(function(){return I}));var r=n(250);function i(t,e){if(!Boolean(t))throw new Error(e)}var o=n(194);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.prototype.toString;t.prototype.toJSON=e,t.prototype.inspect=e,o.a&&(t.prototype[o.a]=e)}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n,r=/\r\n|[\n\r]/g,i=1,o=e+1;(n=r.exec(t.body))&&n.index<e;)i+=1,o=e+1-(n.index+n[0].length);return{line:i,column:o}}function c(t){return l(t.source,u(t.source,t.start))}function l(t,e){var n=t.locationOffset.column-1,r=h(n)+t.body,i=e.line-1,o=t.locationOffset.line-1,a=e.line+o,s=1===e.line?n:0,u=e.column+s,c="".concat(t.name,":").concat(a,":").concat(u,"\n"),l=r.split(/\r\n|[\n\r]/g),p=l[i];if(p.length>120){for(var d=Math.floor(u/80),g=u%80,y=[],v=0;v<p.length;v+=80)y.push(p.slice(v,v+80));return c+f([["".concat(a),y[0]]].concat(y.slice(1,d+1).map((function(t){return["",t]})),[[" ",h(g-1)+"^"],["",y[d+1]]]))}return c+f([["".concat(a-1),l[i-1]],["".concat(a),p],["",h(u-1)+"^"],["".concat(a+1),l[i+1]]])}function f(t){var e=t.filter((function(t){t[0];return void 0!==t[1]})),n=Math.max.apply(Math,e.map((function(t){return t[0].length})));return e.map((function(t){var e,r=t[0],i=t[1];return h(n-(e=r).length)+e+(i?" | "+i:" |")})).join("\n")}function h(t){return Array(t+1).join(" ")}function p(t,e,n,r,i,o,a){var c=Array.isArray(e)?0!==e.length?e:void 0:e?[e]:void 0,l=n;if(!l&&c){var f=c[0];l=f&&f.loc&&f.loc.source}var h,d=r;!d&&c&&(d=c.reduce((function(t,e){return e.loc&&t.push(e.loc.start),t}),[])),d&&0===d.length&&(d=void 0),r&&n?h=r.map((function(t){return u(n,t)})):c&&(h=c.reduce((function(t,e){return e.loc&&t.push(u(e.loc.source,e.loc.start)),t}),[]));var g,y=a;if(null==y&&null!=o){var v=o.extensions;"object"==s(g=v)&&null!==g&&(y=v)}Object.defineProperties(this,{message:{value:t,enumerable:!0,writable:!0},locations:{value:h||void 0,enumerable:Boolean(h)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:c||void 0},source:{value:l||void 0},positions:{value:d||void 0},originalError:{value:o},extensions:{value:y||void 0,enumerable:Boolean(y)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,p):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}function d(t,e,n){return new p("Syntax Error: ".concat(n),void 0,t,[e])}p.prototype=Object.create(Error.prototype,{constructor:{value:p},name:{value:"GraphQLError"},toString:{value:function(){return function(t){var e=t.message;if(t.nodes)for(var n=0,r=t.nodes;n<r.length;n++){var i=r[n];i.loc&&(e+="\n\n"+c(i.loc))}else if(t.source&&t.locations)for(var o=0,a=t.locations;o<a.length;o++){var s=a[o];e+="\n\n"+l(t.source,s)}return e}(this)}}});var g=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});var y,v=function(t,e,n){this.body=t,this.name=e||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||i(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||i(0,"column in locationOffset is 1-indexed and must be positive")};y=v,"function"===typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(y.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var m=n(251),A=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function b(){return this.lastToken=this.token,this.token=this.lookahead()}function _(){var t=this.token;if(t.kind!==A.EOF)do{t=t.next||(t.next=E(this,t))}while(t.kind===A.COMMENT);return t}function w(t,e,n,r,i,o,a){this.kind=t,this.start=e,this.end=n,this.line=r,this.column=i,this.value=a,this.prev=o,this.next=null}function x(t){return isNaN(t)?A.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function E(t,e){var n=t.source,r=n.body,i=r.length,o=function(t,e,n){var r=t.length,i=e;for(;i<r;){var o=t.charCodeAt(i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===t.charCodeAt(i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,e.end,t),a=t.line,s=1+o-t.lineStart;if(o>=i)return new w(A.EOF,i,i,a,s,e);var u=r.charCodeAt(o);switch(u){case 33:return new w(A.BANG,o,o+1,a,s,e);case 35:return function(t,e,n,r,i){var o,a=t.body,s=e;do{o=a.charCodeAt(++s)}while(!isNaN(o)&&(o>31||9===o));return new w(A.COMMENT,e,s,n,r,i,a.slice(e+1,s))}(n,o,a,s,e);case 36:return new w(A.DOLLAR,o,o+1,a,s,e);case 38:return new w(A.AMP,o,o+1,a,s,e);case 40:return new w(A.PAREN_L,o,o+1,a,s,e);case 41:return new w(A.PAREN_R,o,o+1,a,s,e);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new w(A.SPREAD,o,o+3,a,s,e);break;case 58:return new w(A.COLON,o,o+1,a,s,e);case 61:return new w(A.EQUALS,o,o+1,a,s,e);case 64:return new w(A.AT,o,o+1,a,s,e);case 91:return new w(A.BRACKET_L,o,o+1,a,s,e);case 93:return new w(A.BRACKET_R,o,o+1,a,s,e);case 123:return new w(A.BRACE_L,o,o+1,a,s,e);case 124:return new w(A.PIPE,o,o+1,a,s,e);case 125:return new w(A.BRACE_R,o,o+1,a,s,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(t,e,n,r,i){var o=t.body,a=o.length,s=e+1,u=0;for(;s!==a&&!isNaN(u=o.charCodeAt(s))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++s;return new w(A.NAME,e,s,n,r,i,o.slice(e,s))}(n,o,a,s,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(t,e,n,r,i,o){var a=t.body,s=n,u=e,c=!1;45===s&&(s=a.charCodeAt(++u));if(48===s){if((s=a.charCodeAt(++u))>=48&&s<=57)throw d(t,u,"Invalid number, unexpected digit after 0: ".concat(x(s),"."))}else u=O(t,u,s),s=a.charCodeAt(u);46===s&&(c=!0,s=a.charCodeAt(++u),u=O(t,u,s),s=a.charCodeAt(u));69!==s&&101!==s||(c=!0,43!==(s=a.charCodeAt(++u))&&45!==s||(s=a.charCodeAt(++u)),u=O(t,u,s),s=a.charCodeAt(u));if(46===s||69===s||101===s)throw d(t,u,"Invalid number, expected digit but got: ".concat(x(s),"."));return new w(c?A.FLOAT:A.INT,e,u,r,i,o,a.slice(e,u))}(n,o,u,a,s,e);case 34:return 34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2)?function(t,e,n,r,i,o){var a=t.body,s=e+3,u=s,c=0,l="";for(;s<a.length&&!isNaN(c=a.charCodeAt(s));){if(34===c&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2))return l+=a.slice(u,s),new w(A.BLOCK_STRING,e,s+3,n,r,i,Object(m.a)(l));if(c<32&&9!==c&&10!==c&&13!==c)throw d(t,s,"Invalid character within String: ".concat(x(c),"."));10===c?(++s,++o.line,o.lineStart=s):13===c?(10===a.charCodeAt(s+1)?s+=2:++s,++o.line,o.lineStart=s):92===c&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2)&&34===a.charCodeAt(s+3)?(l+=a.slice(u,s)+'"""',u=s+=4):++s}throw d(t,s,"Unterminated string.")}(n,o,a,s,e,t):function(t,e,n,r,i){var o=t.body,a=e+1,s=a,u=0,c="";for(;a<o.length&&!isNaN(u=o.charCodeAt(a))&&10!==u&&13!==u;){if(34===u)return c+=o.slice(s,a),new w(A.STRING,e,a+1,n,r,i,c);if(u<32&&9!==u)throw d(t,a,"Invalid character within String: ".concat(x(u),"."));if(++a,92===u){switch(c+=o.slice(s,a-1),u=o.charCodeAt(a)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=S(o.charCodeAt(a+1),o.charCodeAt(a+2),o.charCodeAt(a+3),o.charCodeAt(a+4));if(l<0){var f=o.slice(a+1,a+5);throw d(t,a,"Invalid character escape sequence: \\u".concat(f,"."))}c+=String.fromCharCode(l),a+=4;break;default:throw d(t,a,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}s=++a}}throw d(t,a,"Unterminated string.")}(n,o,a,s,e)}throw d(n,o,function(t){if(t<32&&9!==t&&10!==t&&13!==t)return"Cannot contain the invalid character ".concat(x(t),".");if(39===t)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character ".concat(x(t),".")}(u))}function O(t,e,n){var r=t.body,i=e,o=n;if(o>=48&&o<=57){do{o=r.charCodeAt(++i)}while(o>=48&&o<=57);return i}throw d(t,i,"Invalid number, expected digit but got: ".concat(x(o),"."))}function S(t,e,n,r){return T(t)<<12|T(e)<<8|T(n)<<4|T(r)}function T(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}a(w,(function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}));var P=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function M(t,e){return new R(t,e).parseDocument()}function C(t,e){var n=new R(t,e);n.expectToken(A.SOF);var r=n.parseValueLiteral(!1);return n.expectToken(A.EOF),r}function I(t,e){var n=new R(t,e);n.expectToken(A.SOF);var r=n.parseTypeReference();return n.expectToken(A.EOF),r}var R=function(){function t(t,e){var n="string"===typeof t?new v(t):t;n instanceof v||i(0,"Must provide Source. Received: ".concat(Object(r.a)(n))),this._lexer=function(t,e){var n=new w(A.SOF,0,0,0,0,null);return{source:t,options:e,lastToken:n,token:n,line:1,lineStart:0,advance:b,lookahead:_}}(n),this._options=e||{}}var e=t.prototype;return e.parseName=function(){var t=this.expectToken(A.NAME);return{kind:g.NAME,value:t.value,loc:this.loc(t)}},e.parseDocument=function(){var t=this._lexer.token;return{kind:g.DOCUMENT,definitions:this.many(A.SOF,this.parseDefinition,A.EOF),loc:this.loc(t)}},e.parseDefinition=function(){if(this.peek(A.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(A.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var t=this._lexer.token;if(this.peek(A.BRACE_L))return{kind:g.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var e,n=this.parseOperationType();return this.peek(A.NAME)&&(e=this.parseName()),{kind:g.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseOperationType=function(){var t=this.expectToken(A.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(t)},e.parseVariableDefinitions=function(){return this.optionalMany(A.PAREN_L,this.parseVariableDefinition,A.PAREN_R)},e.parseVariableDefinition=function(){var t=this._lexer.token;return{kind:g.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(A.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(A.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(t)}},e.parseVariable=function(){var t=this._lexer.token;return this.expectToken(A.DOLLAR),{kind:g.VARIABLE,name:this.parseName(),loc:this.loc(t)}},e.parseSelectionSet=function(){var t=this._lexer.token;return{kind:g.SELECTION_SET,selections:this.many(A.BRACE_L,this.parseSelection,A.BRACE_R),loc:this.loc(t)}},e.parseSelection=function(){return this.peek(A.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var t,e,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(A.COLON)?(t=r,e=this.parseName()):e=r,{kind:g.FIELD,alias:t,name:e,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(A.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(t){var e=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(A.PAREN_L,e,A.PAREN_R)},e.parseArgument=function(){var t=this._lexer.token,e=this.parseName();return this.expectToken(A.COLON),{kind:g.ARGUMENT,name:e,value:this.parseValueLiteral(!1),loc:this.loc(t)}},e.parseConstArgument=function(){var t=this._lexer.token;return{kind:g.ARGUMENT,name:this.parseName(),value:(this.expectToken(A.COLON),this.parseValueLiteral(!0)),loc:this.loc(t)}},e.parseFragment=function(){var t=this._lexer.token;this.expectToken(A.SPREAD);var e=this.expectOptionalKeyword("on");return!e&&this.peek(A.NAME)?{kind:g.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(t)}:{kind:g.INLINE_FRAGMENT,typeCondition:e?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseFragmentDefinition=function(){var t=this._lexer.token;return this.expectKeyword("fragment"),this._options.experimentalFragmentVariables?{kind:g.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:g.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(t){var e=this._lexer.token;switch(e.kind){case A.BRACKET_L:return this.parseList(t);case A.BRACE_L:return this.parseObject(t);case A.INT:return this._lexer.advance(),{kind:g.INT,value:e.value,loc:this.loc(e)};case A.FLOAT:return this._lexer.advance(),{kind:g.FLOAT,value:e.value,loc:this.loc(e)};case A.STRING:case A.BLOCK_STRING:return this.parseStringLiteral();case A.NAME:return"true"===e.value||"false"===e.value?(this._lexer.advance(),{kind:g.BOOLEAN,value:"true"===e.value,loc:this.loc(e)}):"null"===e.value?(this._lexer.advance(),{kind:g.NULL,loc:this.loc(e)}):(this._lexer.advance(),{kind:g.ENUM,value:e.value,loc:this.loc(e)});case A.DOLLAR:if(!t)return this.parseVariable()}throw this.unexpected()},e.parseStringLiteral=function(){var t=this._lexer.token;return this._lexer.advance(),{kind:g.STRING,value:t.value,block:t.kind===A.BLOCK_STRING,loc:this.loc(t)}},e.parseList=function(t){var e=this,n=this._lexer.token;return{kind:g.LIST,values:this.any(A.BRACKET_L,(function(){return e.parseValueLiteral(t)}),A.BRACKET_R),loc:this.loc(n)}},e.parseObject=function(t){var e=this,n=this._lexer.token;return{kind:g.OBJECT,fields:this.any(A.BRACE_L,(function(){return e.parseObjectField(t)}),A.BRACE_R),loc:this.loc(n)}},e.parseObjectField=function(t){var e=this._lexer.token,n=this.parseName();return this.expectToken(A.COLON),{kind:g.OBJECT_FIELD,name:n,value:this.parseValueLiteral(t),loc:this.loc(e)}},e.parseDirectives=function(t){for(var e=[];this.peek(A.AT);)e.push(this.parseDirective(t));return e},e.parseDirective=function(t){var e=this._lexer.token;return this.expectToken(A.AT),{kind:g.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t),loc:this.loc(e)}},e.parseTypeReference=function(){var t,e=this._lexer.token;return this.expectOptionalToken(A.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(A.BRACKET_R),t={kind:g.LIST_TYPE,type:t,loc:this.loc(e)}):t=this.parseNamedType(),this.expectOptionalToken(A.BANG)?{kind:g.NON_NULL_TYPE,type:t,loc:this.loc(e)}:t},e.parseNamedType=function(){var t=this._lexer.token;return{kind:g.NAMED_TYPE,name:this.parseName(),loc:this.loc(t)}},e.parseTypeSystemDefinition=function(){var t=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(t.kind===A.NAME)switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(t)},e.peekDescription=function(){return this.peek(A.STRING)||this.peek(A.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var t=this._lexer.token;this.expectKeyword("schema");var e=this.parseDirectives(!0),n=this.many(A.BRACE_L,this.parseOperationTypeDefinition,A.BRACE_R);return{kind:g.SCHEMA_DEFINITION,directives:e,operationTypes:n,loc:this.loc(t)}},e.parseOperationTypeDefinition=function(){var t=this._lexer.token,e=this.parseOperationType();this.expectToken(A.COLON);var n=this.parseNamedType();return{kind:g.OPERATION_TYPE_DEFINITION,operation:e,type:n,loc:this.loc(t)}},e.parseScalarTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:g.SCALAR_TYPE_DEFINITION,description:e,name:n,directives:r,loc:this.loc(t)}},e.parseObjectTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:g.OBJECT_TYPE_DEFINITION,description:e,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(t)}},e.parseImplementsInterfaces=function(){var t=[];if(this.expectOptionalKeyword("implements")){this.expectOptionalToken(A.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(A.AMP)||this._options.allowLegacySDLImplementsInterfaces&&this.peek(A.NAME))}return t},e.parseFieldsDefinition=function(){return this._options.allowLegacySDLEmptyFields&&this.peek(A.BRACE_L)&&this._lexer.lookahead().kind===A.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(A.BRACE_L,this.parseFieldDefinition,A.BRACE_R)},e.parseFieldDefinition=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(A.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:g.FIELD_DEFINITION,description:e,name:n,arguments:r,type:i,directives:o,loc:this.loc(t)}},e.parseArgumentDefs=function(){return this.optionalMany(A.PAREN_L,this.parseInputValueDef,A.PAREN_R)},e.parseInputValueDef=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName();this.expectToken(A.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(A.EQUALS)&&(r=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:g.INPUT_VALUE_DEFINITION,description:e,name:n,type:i,defaultValue:r,directives:o,loc:this.loc(t)}},e.parseInterfaceTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:g.INTERFACE_TYPE_DEFINITION,description:e,name:n,directives:r,fields:i,loc:this.loc(t)}},e.parseUnionTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:g.UNION_TYPE_DEFINITION,description:e,name:n,directives:r,types:i,loc:this.loc(t)}},e.parseUnionMemberTypes=function(){var t=[];if(this.expectOptionalToken(A.EQUALS)){this.expectOptionalToken(A.PIPE);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(A.PIPE))}return t},e.parseEnumTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:g.ENUM_TYPE_DEFINITION,description:e,name:n,directives:r,values:i,loc:this.loc(t)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(A.BRACE_L,this.parseEnumValueDefinition,A.BRACE_R)},e.parseEnumValueDefinition=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:g.ENUM_VALUE_DEFINITION,description:e,name:n,directives:r,loc:this.loc(t)}},e.parseInputObjectTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:g.INPUT_OBJECT_TYPE_DEFINITION,description:e,name:n,directives:r,fields:i,loc:this.loc(t)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(A.BRACE_L,this.parseInputValueDef,A.BRACE_R)},e.parseTypeSystemExtension=function(){var t=this._lexer.lookahead();if(t.kind===A.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)},e.parseSchemaExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var e=this.parseDirectives(!0),n=this.optionalMany(A.BRACE_L,this.parseOperationTypeDefinition,A.BRACE_R);if(0===e.length&&0===n.length)throw this.unexpected();return{kind:g.SCHEMA_EXTENSION,directives:e,operationTypes:n,loc:this.loc(t)}},e.parseScalarTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var e=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:g.SCALAR_TYPE_EXTENSION,name:e,directives:n,loc:this.loc(t)}},e.parseObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var e=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:g.OBJECT_TYPE_EXTENSION,name:e,interfaces:n,directives:r,fields:i,loc:this.loc(t)}},e.parseInterfaceTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:g.INTERFACE_TYPE_EXTENSION,name:e,directives:n,fields:r,loc:this.loc(t)}},e.parseUnionTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:g.UNION_TYPE_EXTENSION,name:e,directives:n,types:r,loc:this.loc(t)}},e.parseEnumTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:g.ENUM_TYPE_EXTENSION,name:e,directives:n,values:r,loc:this.loc(t)}},e.parseInputObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:g.INPUT_OBJECT_TYPE_EXTENSION,name:e,directives:n,fields:r,loc:this.loc(t)}},e.parseDirectiveDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("directive"),this.expectToken(A.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:g.DIRECTIVE_DEFINITION,description:e,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(t)}},e.parseDirectiveLocations=function(){this.expectOptionalToken(A.PIPE);var t=[];do{t.push(this.parseDirectiveLocation())}while(this.expectOptionalToken(A.PIPE));return t},e.parseDirectiveLocation=function(){var t=this._lexer.token,e=this.parseName();if(void 0!==P[e.value])return e;throw this.unexpected(t)},e.loc=function(t){if(!this._options.noLocation)return new k(t,this._lexer.lastToken,this._lexer.source)},e.peek=function(t){return this._lexer.token.kind===t},e.expectToken=function(t){var e=this._lexer.token;if(e.kind===t)return this._lexer.advance(),e;throw d(this._lexer.source,e.start,"Expected ".concat(t,", found ").concat(j(e)))},e.expectOptionalToken=function(t){var e=this._lexer.token;if(e.kind===t)return this._lexer.advance(),e},e.expectKeyword=function(t){var e=this._lexer.token;if(e.kind!==A.NAME||e.value!==t)throw d(this._lexer.source,e.start,'Expected "'.concat(t,'", found ').concat(j(e)));this._lexer.advance()},e.expectOptionalKeyword=function(t){var e=this._lexer.token;return e.kind===A.NAME&&e.value===t&&(this._lexer.advance(),!0)},e.unexpected=function(t){var e=t||this._lexer.token;return d(this._lexer.source,e.start,"Unexpected ".concat(j(e)))},e.any=function(t,e,n){this.expectToken(t);for(var r=[];!this.expectOptionalToken(n);)r.push(e.call(this));return r},e.optionalMany=function(t,e,n){if(this.expectOptionalToken(t)){var r=[];do{r.push(e.call(this))}while(!this.expectOptionalToken(n));return r}return[]},e.many=function(t,e,n){this.expectToken(t);var r=[];do{r.push(e.call(this))}while(!this.expectOptionalToken(n));return r},t}();function k(t,e,n){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=n}function j(t){var e=t.value;return e?"".concat(t.kind,' "').concat(e,'"'):t.kind}a(k,(function(){return{start:this.start,end:this.end}}))},function(t,e,n){"use strict";n.r(e),n.d(e,"v1",(function(){return p})),n.d(e,"v3",(function(){return _})),n.d(e,"v4",(function(){return w})),n.d(e,"v5",(function(){return O}));var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);var u,c,l=function(t,e){var n=e||0,r=a;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},f=0,h=0;var p=function(t,e,n){var r=e&&n||0,i=e||[],a=(t=t||{}).node||u,s=void 0!==t.clockseq?t.clockseq:c;if(null==a||null==s){var p=t.random||(t.rng||o)();null==a&&(a=u=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==s&&(s=c=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:h+1,y=d-f+(g-h)/1e4;if(y<0&&void 0===t.clockseq&&(s=s+1&16383),(y<0||d>f)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=d,h=g,c=s;var v=(1e4*(268435455&(d+=122192928e5))+g)%4294967296;i[r++]=v>>>24&255,i[r++]=v>>>16&255,i[r++]=v>>>8&255,i[r++]=255&v;var m=d/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var A=0;A<6;++A)i[r+A]=a[A];return e||l(i)};var d=function(t,e,n){var r=function(t,r,i,o){var a=i&&o||0;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(t)),"string"==typeof r&&(r=function(t){var e=[];return t.replace(/[a-fA-F0-9]{2}/g,(function(t){e.push(parseInt(t,16))})),e}(r)),!Array.isArray(t))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var s=n(r.concat(t));if(s[6]=15&s[6]|e,s[8]=63&s[8]|128,i)for(var u=0;u<16;++u)i[a+u]=s[u];return i||l(s)};try{r.name=t}catch(i){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function y(t,e,n,r,i,o){return g((a=g(g(e,t),g(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function v(t,e,n,r,i,o,a){return y(e&n|~e&r,t,e,i,o,a)}function m(t,e,n,r,i,o,a){return y(e&r|n&~r,t,e,i,o,a)}function A(t,e,n,r,i,o,a){return y(e^n^r,t,e,i,o,a)}function b(t,e,n,r,i,o,a){return y(n^(e|~r),t,e,i,o,a)}var _=d("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Array(e.length);for(var n=0;n<e.length;n++)t[n]=e.charCodeAt(n)}return function(t){var e,n,r,i=[],o=32*t.length,a="0123456789abcdef";for(e=0;e<o;e+=8)n=t[e>>5]>>>e%32&255,r=parseInt(a.charAt(n>>>4&15)+a.charAt(15&n),16),i.push(r);return i}(function(t,e){var n,r,i,o,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,u=-271733879,c=-1732584194,l=271733878;for(n=0;n<t.length;n+=16)r=s,i=u,o=c,a=l,s=v(s,u,c,l,t[n],7,-680876936),l=v(l,s,u,c,t[n+1],12,-389564586),c=v(c,l,s,u,t[n+2],17,606105819),u=v(u,c,l,s,t[n+3],22,-1044525330),s=v(s,u,c,l,t[n+4],7,-176418897),l=v(l,s,u,c,t[n+5],12,1200080426),c=v(c,l,s,u,t[n+6],17,-1473231341),u=v(u,c,l,s,t[n+7],22,-45705983),s=v(s,u,c,l,t[n+8],7,1770035416),l=v(l,s,u,c,t[n+9],12,-1958414417),c=v(c,l,s,u,t[n+10],17,-42063),u=v(u,c,l,s,t[n+11],22,-1990404162),s=v(s,u,c,l,t[n+12],7,1804603682),l=v(l,s,u,c,t[n+13],12,-40341101),c=v(c,l,s,u,t[n+14],17,-1502002290),s=m(s,u=v(u,c,l,s,t[n+15],22,1236535329),c,l,t[n+1],5,-165796510),l=m(l,s,u,c,t[n+6],9,-1069501632),c=m(c,l,s,u,t[n+11],14,643717713),u=m(u,c,l,s,t[n],20,-373897302),s=m(s,u,c,l,t[n+5],5,-701558691),l=m(l,s,u,c,t[n+10],9,38016083),c=m(c,l,s,u,t[n+15],14,-660478335),u=m(u,c,l,s,t[n+4],20,-405537848),s=m(s,u,c,l,t[n+9],5,568446438),l=m(l,s,u,c,t[n+14],9,-1019803690),c=m(c,l,s,u,t[n+3],14,-187363961),u=m(u,c,l,s,t[n+8],20,1163531501),s=m(s,u,c,l,t[n+13],5,-1444681467),l=m(l,s,u,c,t[n+2],9,-51403784),c=m(c,l,s,u,t[n+7],14,1735328473),s=A(s,u=m(u,c,l,s,t[n+12],20,-1926607734),c,l,t[n+5],4,-378558),l=A(l,s,u,c,t[n+8],11,-2022574463),c=A(c,l,s,u,t[n+11],16,1839030562),u=A(u,c,l,s,t[n+14],23,-35309556),s=A(s,u,c,l,t[n+1],4,-1530992060),l=A(l,s,u,c,t[n+4],11,1272893353),c=A(c,l,s,u,t[n+7],16,-155497632),u=A(u,c,l,s,t[n+10],23,-1094730640),s=A(s,u,c,l,t[n+13],4,681279174),l=A(l,s,u,c,t[n],11,-358537222),c=A(c,l,s,u,t[n+3],16,-722521979),u=A(u,c,l,s,t[n+6],23,76029189),s=A(s,u,c,l,t[n+9],4,-640364487),l=A(l,s,u,c,t[n+12],11,-421815835),c=A(c,l,s,u,t[n+15],16,530742520),s=b(s,u=A(u,c,l,s,t[n+2],23,-995338651),c,l,t[n],6,-198630844),l=b(l,s,u,c,t[n+7],10,1126891415),c=b(c,l,s,u,t[n+14],15,-1416354905),u=b(u,c,l,s,t[n+5],21,-57434055),s=b(s,u,c,l,t[n+12],6,1700485571),l=b(l,s,u,c,t[n+3],10,-1894986606),c=b(c,l,s,u,t[n+10],15,-1051523),u=b(u,c,l,s,t[n+1],21,-2054922799),s=b(s,u,c,l,t[n+8],6,1873313359),l=b(l,s,u,c,t[n+15],10,-30611744),c=b(c,l,s,u,t[n+6],15,-1560198380),u=b(u,c,l,s,t[n+13],21,1309151649),s=b(s,u,c,l,t[n+4],6,-145523070),l=b(l,s,u,c,t[n+11],10,-1120210379),c=b(c,l,s,u,t[n+2],15,718787259),u=b(u,c,l,s,t[n+9],21,-343485551),s=g(s,r),u=g(u,i),c=g(c,o),l=g(l,a);return[s,u,c,l]}(function(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t[e/8])<<e%32;return n}(t),8*t.length))}));var w=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var a=0;a<16;++a)e[r+a]=i[a];return e||l(i)};function x(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function E(t,e){return t<<e|t>>>32-e}var O=d("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=new Array(r.length);for(var i=0;i<r.length;i++)t[i]=r.charCodeAt(i)}t.push(128);var o=t.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(i=0;i<a;i++){s[i]=new Array(16);for(var u=0;u<16;u++)s[i][u]=t[64*i+4*u]<<24|t[64*i+4*u+1]<<16|t[64*i+4*u+2]<<8|t[64*i+4*u+3]}for(s[a-1][14]=8*(t.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1)&4294967295,i=0;i<a;i++){for(var c=new Array(80),l=0;l<16;l++)c[l]=s[i][l];for(l=16;l<80;l++)c[l]=E(c[l-3]^c[l-8]^c[l-14]^c[l-16],1);var f=n[0],h=n[1],p=n[2],d=n[3],g=n[4];for(l=0;l<80;l++){var y=Math.floor(l/20),v=E(f,5)+x(y,h,p,d)+g+e[y]+c[l]>>>0;g=d,d=p,p=E(h,30)>>>0,h=f,f=v}n[0]=n[0]+f>>>0,n[1]=n[1]+h>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+g>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}))},function(t,e,n){"use strict";n.r(e);var r=n(103),i=n(39);var o=function(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,o=Object(i.b)(t),a=0,s=1;s<o.length;)n=r||o[0],a+=((r=o[s])[0]-n[0])*(r[1]+n[1]),s++;return a>0},a=n(46),s=n(19);function u(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Object(a.c)(t,(function(t){u(t,e)})),t;case"LineString":return c(Object(i.b)(t),e),t;case"Polygon":return l(Object(i.b)(t),e),t;case"MultiLineString":return Object(i.b)(t).forEach((function(t){c(t,e)})),t;case"MultiPolygon":return Object(i.b)(t).forEach((function(t){l(t,e)})),t;case"Point":case"MultiPoint":return t}}function c(t,e){o(t)===e&&t.reverse()}function l(t,e){o(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)o(t[n])===e&&t[n].reverse()}e.default=function(t,e){if(e=e||{},!Object(s.g)(e))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!==typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!==typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Object(r.a)(t));var o=[];switch(t.type){case"GeometryCollection":return Object(a.c)(t,(function(t){u(t,n)})),t;case"FeatureCollection":return Object(a.b)(t,(function(t){Object(a.b)(u(t,n),(function(t){o.push(t)}))})),Object(s.e)(o)}return u(t,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(10);function i(t,e,n,i){var o="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),a=Object.getPrototypeOf(t);i.forEach((function(t){a.methodName||(a[t]=function(){throw r.h.removed("Calling removed method ".concat(e,".").concat(t,": "),o)(),new Error(t)})}))}},function(t,e,n){"use strict";var r={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};e.a={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){var n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){var i=Array.from(t.pickingHighlightColor,(function(t){return t/255}));Number.isFinite(i[3])||(i[3]=1),e.picking_uHighlightColor=i}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(301),i=n(10),o=n(31);function a(t,e){return s(t,e)}function s(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return c(t,e)}))}function u(t){for(var e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},r.b)void 0===t.luma.caps[e]&&(t.luma.caps[e]=c(t,e));return t.luma.caps}function c(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){var n,a=r.b[e];Object(o.a)(a,e);var s=Object(i.g)(t)&&a[1]||a[0];if("function"===typeof s)n=s(t);else if(Array.isArray(s)){n=!0;var u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;n=n&&Boolean(t.getExtension(p))}}catch(d){c=!0,l=d}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}else"string"===typeof s?n=Boolean(t.getExtension(s)):"boolean"===typeof s?n=s:Object(o.a)(!1);return n}(t,e)),t.luma.caps[e]||i.h.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(22),i=n(18),o=n(0),a=n(1),s=n(2),u=n(240),c="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source",l=Object(u.a)();function f(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(r){return null}}var h=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(a.a)(this,t),this.storage=f(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(s.a)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}();function p(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}var d={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function g(t){return"string"===typeof t?d[t.toUpperCase()]||d.WHITE:t}function y(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(r),o=y(i);try{var a=function(){var r=e.value;"function"===typeof t[r]&&(n.find((function(t){return r===t}))||(t[r]=t[r].bind(t)))};for(o.s();!(e=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}function A(t,e){if(!t)throw new Error(e||"Assertion failed")}var b=n(82);function _(){var t;if(l&&b.b.performance)t=b.b.performance.now();else if(b.a.hrtime){var e=b.a.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}var w={debug:l&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},x={enabled:!0,level:0};function E(){}var O={},S={once:!0};function T(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}var P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;Object(a.a)(this,t),this.id=n,this.VERSION=c,this._startTs=_(),this._deltaTs=_(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new h("__probe-".concat(this.id,"__"),x),this.userData={},this.timeStamp("".concat(this.id," started")),m(this),Object.seal(this)}return Object(s.a)(t,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((_()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((_()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:"assert",value:function(t,e){A(t,e)}},{key:"warn",value:function(t){return this._getLogFunction(0,t,w.warn,arguments,S)}},{key:"error",value:function(t){return this._getLogFunction(0,t,w.error,arguments)}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){return this._getLogFunction(t,e,w.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(t,e){return this._getLogFunction(t,e,w.debug,arguments)}},{key:"info",value:function(t,e){return this._getLogFunction(t,e,console.info,arguments)}},{key:"once",value:function(t,e){return this._getLogFunction(t,e,w.debug||w.info,arguments,S)}},{key:"table",value:function(t,e,n){return e?this._getLogFunction(t,e,console.table||E,n&&[n],{tag:T(e)}):E}},{key:"image",value:function(t){var e=t.logLevel,r=t.priority,o=t.image,a=t.message,s=void 0===a?"":a,u=t.scale,c=void 0===u?1:u;return this._shouldLog(e||r)?l?function(t){var e=t.image,n=t.message,r=void 0===n?"":n,o=t.scale,a=void 0===o?1:o;if("string"===typeof e){var s=new Image;return s.onload=function(){var t,e=p(s,r,a);(t=console).log.apply(t,Object(i.a)(e))},s.src=e,E}var u=e.nodeName||"";if("img"===u.toLowerCase()){var c;return(c=console).log.apply(c,Object(i.a)(p(e,r,a))),E}if("canvas"===u.toLowerCase()){var l=new Image;return l.onload=function(){var t;return(t=console).log.apply(t,Object(i.a)(p(l,r,a)))},l.src=e.toDataURL(),E}return E}({image:o,message:s,scale:c}):function(t){var e=t.image,r=(t.message,t.scale),i=void 0===r?1:r,o=null;try{o=n(430)}catch(a){}if(o)return function(){return o(e,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(t){return console.log(t)}))};return E}({image:o,message:s,scale:c}):E}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,e){this._storage.updateConfiguration(Object(o.a)({},t,e))}},{key:"time",value:function(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}},{key:"timeEnd",value:function(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(t,e){return this._getLogFunction(t,e,console.timeStamp||E)}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=C({logLevel:t,message:e,opts:n}),i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction(t,"",console.groupEnd||E)}},{key:"withGroup",value:function(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return this.isEnabled()&&this.getLevel()>=M(t)}},{key:"_getLogFunction",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(t)){var a;o=C({logLevel:t,message:e,args:r,opts:o}),A(n=n||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=_();var s=o.tag||o.message;if(o.once){if(O[s])return E;O[s]=_()}return e=I(this.id,o.message,o),(a=n).bind.apply(a,[console,e].concat(Object(i.a)(o.args)))}return E}},{key:"level",set:function(t){this.setLevel(t)},get:function(){return this.getLevel()}},{key:"priority",set:function(t){this.level=t},get:function(){return this.level}}]),t}();function M(t){if(!t)return 0;var e;switch(Object(r.a)(t)){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return A(Number.isFinite(e)&&e>=0),e}function C(t){var e=t.logLevel,n=t.message;t.logLevel=M(e);for(var i=t.args?Array.from(t.args):[];i.length&&i.shift()!==n;);switch(t.args=i,Object(r.a)(e)){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());var o=Object(r.a)(t.message);return A("string"===o||"object"===o),Object.assign(t,t.opts)}function I(t,e,n){if("string"===typeof e){var r=n.time?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}((s=n.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),i=e,o=n.color,a=n.background,l||"string"!==typeof i||(o&&(o=g(o),i="\x1b[".concat(o,"m").concat(i,"\x1b[39m")),a&&(o=g(a),i="\x1b[".concat(a+10,"m").concat(i,"\x1b[49m"))),e=i}var i,o,a,s;return e}P.VERSION=c},,,,,,,,,,,,function(t,e,n){"use strict";e.a={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),i=n(6),o=n(3),a=n(40),s=n(2),u=n(5),c=n(10),l=n(58),f=n(53),h=n(97),p=n(143),d=function(t){function e(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(h.a)(t),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,s))).initialize(s),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(a.a)(n)),n}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:"isSupported",value:function(t){return Object(c.g)(t)}}]),Object(s.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(p.a)(this.buffers)||this.bind((function(){return t._unbindBuffers()})),this.setProps(e),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in e)t.setBuffer(n,e[n])})),this}},{key:"setBuffer",value:function(t,e){var n=this,r=this._getVaryingIndex(t),i=this._getBufferParams(e),o=i.buffer,a=i.byteSize,s=i.byteOffset;return r<0?(this.unused[t]=o,c.h.warn((function(){return"".concat(n.id," unused varying buffer ").concat(t)}))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,o,s,a),this)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(t){var e,n,r;return t instanceof f.a===!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers){var e=this._getBufferParams(this.buffers[t]),n=e.buffer,r=e.byteSize,i=e.byteOffset;this._bindBuffer(t,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(48),i=n(1),o=n(6),a=n(3),s=n(5),u=n(87),c=n(143),l=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),h=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),p=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),d={POSITION:{size:3,value:new Float32Array(f)},NORMAL:{size:3,value:new Float32Array(h)},TEXCOORD_0:{size:2,value:new Float32Array(p)}},g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.id,s=void 0===n?Object(c.c)("cube-geometry"):n;return Object(o.a)(this,Object(a.a)(e).call(this,Object(r.a)({},t,{id:s,indices:{size:1,value:new Uint16Array(l)},attributes:Object(r.a)({},d,t.attributes)})))}return Object(s.a)(e,t),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),i=n(6),o=n(3),a=n(5),s=n(252),u=n(87),c=[-1,-1,1,-1,-1,1,1,1],l=function(t){function e(t,n){var a;Object(r.a)(this,e);var s=c.map((function(t){return-1===t?0:t}));return(a=Object(i.a)(this,Object(o.a)(e).call(this,t,Object.assign({},n,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new u.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(c)},aTexCoord:{size:2,value:new Float32Array(s)},aCoordinate:{size:2,value:new Float32Array(s)}}})})))).setVertexCount(4),a}return Object(a.a)(e,t),e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(12),i=n(1),o=n(2),a=1,s=1,u=function(){function t(){Object(i.a)(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(o.a)(t,[{key:"addChannel",value:function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.rate,s=void 0===o?1:o,u=t.repeat,c=a++,l={time:0,delay:n,duration:i,rate:s,repeat:void 0===u?1:u};return this._setChannelTime(l,this.time),this.channels.set(c,l),c}},{key:"removeChannel",value:function(t){this.channels.delete(t);var e=!0,n=!1,i=void 0;try{for(var o,a=this.animations[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=Object(r.a)(o.value,2),u=s[0];s[1].channel===t&&this.detachAnimation(u)}}catch(c){n=!0,i=c}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"isFinished",value:function(t){var e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}},{key:"getTime",value:function(t){if(void 0===t)return this.time;var e=this.channels.get(t);return void 0===e?-1:e.time}},{key:"setTime",value:function(t){this.time=Math.max(0,t);var e=this.channels.values(),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._setChannelTime(s,this.time)}}catch(v){r=!0,i=v}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=this.animations.values(),c=!0,l=!1,f=void 0;try{for(var h,p=u[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var d=h.value,g=d.animation,y=d.channel;g.setTime(this.getTime(y))}}catch(v){l=!0,f=v}finally{try{c||null==p.return||p.return()}finally{if(l)throw f}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(t,e){var n=s++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}},{key:"detachAnimation",value:function(t){this.animations.delete(t)}},{key:"update",value:function(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}},{key:"_setChannelTime",value:function(t,e){var n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return xt}));var r=n(4),i=n.n(r),o=n(11),a=n(32),s=n(115),u=n(117),c=n(69),l=n(318),f=n(263),h=i.a.mark(p);function p(t){var e,n,r,o,a,s,u,c=arguments;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=c.length>1&&void 0!==c[1]?c[1]:{},n=e.chunkSize,r=void 0===n?262144:n,o=0,a=new TextEncoder;case 4:if(!(o<t.length)){i.next=12;break}return s=Math.min(t.length-o,r),u=t.slice(o,o+s),o+=s,i.next=10,a.encode(u);case 10:i.next=4;break;case 12:case"end":return i.stop()}}),h)}var d=i.a.mark(g);function g(t){var e,n,r,o,a,s,u,c=arguments;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=c.length>1&&void 0!==c[1]?c[1]:{},n=e.chunkSize,r=void 0===n?262144:n,o=0;case 3:if(!(o<t.byteLength)){i.next=14;break}return a=Math.min(t.byteLength-o,r),s=new ArrayBuffer(a),u=new Uint8Array(t,o,a),new Uint8Array(s).set(u),o+=a,i.next=12,s;case 12:i.next=3;break;case 14:case"end":return i.stop()}}),d)}function y(t){this.wrapped=t}function v(t){return new y(t)}function m(t){var e,n;function r(e,n){try{var o=t[e](n),a=o.value,s=a instanceof y;Promise.resolve(s?a.wrapped:a).then((function(t){s?r("return"===e?"return":"next",t):i(o.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(u){i("throw",u)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(o,a){var s={key:t,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(e=n=s,r(t,i))}))},"function"!==typeof t.return&&(this.return=void 0)}function A(t){return function(){return new m(t.apply(this,arguments))}}"function"===typeof Symbol&&Symbol.asyncIterator&&(m.prototype[Symbol.asyncIterator]=function(){return this}),m.prototype.next=function(t){return this._invoke("next",t)},m.prototype.throw=function(t){return this._invoke("throw",t)},m.prototype.return=function(t){return this._invoke("return",t)};var b=1048576;function _(t){return w.apply(this,arguments)}function w(){return(w=A(i.a.mark((function t(e){var n,r,o,a,s,u=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=n.chunkSize||b,o=0;case 3:if(!(o<e.size)){t.next=13;break}return a=o+r,t.next=7,v(x(e,o,a));case 7:return s=t.sent,o=a,t.next=11,s;case 11:t.next=3;break;case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t,e,n){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(i.a.mark((function t(e,n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,i){var o=e.slice(n,r),a=new FileReader;a.onload=function(e){return t(e.target&&e.target.result)},a.onerror=function(t){return i(t)},a.readAsArrayBuffer(o)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O=n(160),S=n(67),T=n(111);function P(t){if(S.b||S.d>=10){if("function"===typeof t[Symbol.asyncIterator])return function(t){return M.apply(this,arguments)}(t);if("function"===typeof t.getIterator)return t.getIterator()}return S.b?function(t){return C.apply(this,arguments)}(t):function(t){return I.apply(this,arguments)}(t)}function M(){return(M=A(i.a.mark((function t(e){var n,r,o,a,s,u,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!0,r=!1,t.prev=2,a=Object(O.a)(e);case 4:return t.next=6,v(a.next());case 6:return s=t.sent,n=s.done,t.next=10,v(s.value);case 10:if(u=t.sent,n){t.next=18;break}return c=u,t.next=15,Object(T.d)(c);case 15:n=!0,t.next=4;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),r=!0,o=t.t0;case 24:if(t.prev=24,t.prev=25,n||null==a.return){t.next=29;break}return t.next=29,v(a.return());case 29:if(t.prev=29,!r){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}}),t,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function C(){return(C=A(i.a.mark((function t(e){var n,r,o,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getReader(),t.prev=1;case 2:return t.next=5,v(n.read());case 5:if(r=t.sent,o=r.done,a=r.value,!o){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,Object(T.d)(a);case 12:t.next=2;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n.releaseLock();case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function I(){return(I=A(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:e=t.sent;case 3:if(null===(n=e.read())){t.next=9;break}return t.next=8,Object(T.d)(n);case 8:return t.abrupt("continue",3);case 9:if(!e._readableState.ended){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,v(R(e));case 13:t.next=3;break;case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.once("readable",t)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?p(t,e):t instanceof ArrayBuffer?g(t,e):Object(a.b)(t)?_(t,e):Object(a.h)(t)?P(t):Object(a.i)(t)?P(t.body):Object(c.a)(!1)}var L=n(140),N="Cannot convert supplied data type";function D(t,e){if(e.text&&"string"===typeof t)return t;if(t instanceof ArrayBuffer){var n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)||Object(a.c)(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);var r=t.buffer,i=t.byteLength||t.length;return 0===t.byteOffset&&i===r.byteLength||(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(N)}function F(t,e){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(i.a.mark((function t(e,n){var r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e instanceof ArrayBuffer||ArrayBuffer.isView(e),"string"!==typeof e&&!r){t.next=3;break}return t.abrupt("return",D(e,n));case 3:if(!Object(a.b)(e)){t.next=7;break}return t.next=6,Object(L.b)(e);case 6:e=t.sent;case 7:if(!Object(a.i)(e)){t.next=21;break}return o=e,t.next=11,Object(L.a)(o);case 11:if(!n.binary){t.next=17;break}return t.next=14,o.arrayBuffer();case 14:t.t0=t.sent,t.next=20;break;case 17:return t.next=19,o.text();case 19:t.t0=t.sent;case 20:return t.abrupt("return",t.t0);case 21:if(Object(a.h)(e)&&(e=j(e)),!Object(a.d)(e)&&!Object(a.a)(e)){t.next=24;break}return t.abrupt("return",Object(f.a)(e));case 24:throw new Error(N);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var z=n(18),U=n(0);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(U.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n||(t=V({fetch:Object(u.a)(e||{},t)},t),Array.isArray(t.loaders)||(t.loaders=null),t)}function H(t,e){if(!e&&t&&!Array.isArray(t))return t;var n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){var r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[].concat(Object(z.a)(n),Object(z.a)(r)):r}return n&&n.length?n:null}var W=n(319),X=n(223),Y="2.3.7";function Q(t,e,n,r){if(!W.a.isSupported())return!1;var i=n&&n[t.id];return!!("local"===n.worker&&i&&i.localWorkerUrl||n.worker&&i&&i.workerUrl)&&(!t.useWorker||t.useWorker(n))}function Z(t,e,n,r){var i=(n||{}).worker,o=n&&n[t.id]||{},a="local"===i?o.localWorkerUrl:o.workerUrl,s="url(".concat(a,")"),u=t.name,c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};t.maxConcurrency&&(e.maxConcurrency=t.maxConcurrency);t.onDebug&&(e.onDebug=t.onDebug);"reuseWorkers"in t&&(e.reuseWorkers=t.reuseWorkers);K||(K=new W.a({onMessage:J}));return K.setProps(e),K}(n);n=JSON.parse(JSON.stringify(n));var l=t.version!==Y?"(core version ".concat(Y,")"):"";return c.process(s,"".concat(u,"-worker@").concat(t.version).concat(l),{arraybuffer:Object(T.d)(e),options:n,source:"loaders.gl@".concat(Y),type:"parse"})}var K=null;function J(t){return $.apply(this,arguments)}function $(){return($=Object(o.a)(i.a.mark((function t(e){var n,r,o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.worker,r=e.data,o=e.resolve,a=e.reject,t.t0=r.type,t.next="done"===t.t0?4:"parse"===t.t0?6:"error"===t.t0?17:19;break;case 4:return o(r.result),t.abrupt("break",19);case 6:return t.prev=6,t.next=9,At(r.arraybuffer,r.options,r.url);case 9:s=t.sent,n.postMessage({type:"parse-done",id:r.id,result:s},Object(X.a)(s)),t.next=16;break;case 13:t.prev=13,t.t1=t.catch(6),n.postMessage({type:"parse-error",id:r.id,message:t.t1.message});case 16:return t.abrupt("break",19);case 17:return a(r.message),t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}var tt=n(130),et=n(22),nt=n(393);function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){Object(U.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var st=/\.([^.]+)$/;function ut(t){return ct.apply(this,arguments)}function ct(){return(ct=Object(o.a)(i.a.mark((function t(e){var n,r,o,s,u=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:[],r=u.length>2&&void 0!==u[2]?u[2]:{},o=u.length>3&&void 0!==u[3]?u[3]:{},!(s=lt(e,n,it(it({},r),{},{nothrow:!0}),o))){t.next=6;break}return t.abrupt("return",s);case 6:if(!Object(a.b)(e)){t.next=11;break}return t.next=9,x(e,0,10);case 9:e=t.sent,s=lt(e,n,r,o);case 11:if(s||r.nothrow){t.next=13;break}throw new Error(ft(e));case 13:return t.abrupt("return",s);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e&&!Array.isArray(e))return Object(s.b)(e);ht(e=[].concat(Object(z.a)(e||[]),Object(z.a)(Object(nt.a)())));var i=Object(tt.b)(t),o=i.url,a=i.type,u=pt(e,o||r.url);if(!(u=(u=u||dt(e,a))||gt(e,t))&&!n.nothrow)throw new Error(ft(t));return u}function ft(t){var e=Object(tt.b)(t),n=e.url,r=e.type,i="No valid loader found";return t&&(i+=' data: "'.concat(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return mt(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer)return mt(t,0,e);return""}(t),'", contentType: "').concat(r,'"')),n&&(i+=" url: ".concat(n)),i}function ht(t){var e,n=ot(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;Object(s.b)(r)}}catch(i){n.e(i)}finally{n.f()}}function pt(t,e){var n=e&&e.match(st),r=n&&n[1];return r&&function(t,e){e=e.toLowerCase();var n,r=ot(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=ot(o.extensions);try{for(a.s();!(i=a.n()).done;){if(i.value.toLowerCase()===e)return o}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(t,r)}function dt(t,e){var n,r=ot(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(e))return i;if(e==="application/x.".concat(i.id))return i}}catch(o){r.e(o)}finally{r.f()}return null}function gt(t,e){if(!e)return null;var n,r=ot(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"===typeof e){if(yt(e,i))return i}else if(ArrayBuffer.isView(e)){if(vt(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer){if(vt(e,0,i))return i}}}catch(o){r.e(o)}finally{r.f()}return null}function yt(t,e){return e.testText&&e.testText(t)}function vt(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(t,e,n,r){if(r instanceof ArrayBuffer)return Object(T.a)(r,t,r.byteLength);switch(Object(et.a)(r)){case"function":return r(t,n);case"string":return r===mt(t,e,r.length);default:return!1}}(t,e,n,r)}))}function mt(t,e,n){if(t.byteLength<e+n)return"";for(var r=new DataView(t),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function At(t,e,n,r){return bt.apply(this,arguments)}function bt(){return(bt=Object(o.a)(i.a.mark((function t(e,n,r,o){var a,l,f,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(c.a)(!o||"string"!==typeof o,"parse no longer accepts final url"),!n||Array.isArray(n)||Object(s.a)(n)||(o=r,r=n,n=null),t.next=4,e;case 4:return e=t.sent,r=r||{},a=Object(tt.b)(e),l=a.url,f=H(n,o),t.next=10,ut(e,f,r);case 10:if(h=t.sent){t.next=13;break}return t.abrupt("return",null);case 13:return r=Object(u.c)(r,h,f,l),o=q({url:l,parse:At,loaders:f},r,o),t.next=17,_t(h,e,r,o);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(t,e,n,r){return wt.apply(this,arguments)}function wt(){return(wt=Object(o.a)(i.a.mark((function t(e,n,r,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(l.a)(e),t.next=3,F(n,e);case 3:if(n=t.sent,!e.parseTextSync||"string"!==typeof n){t.next=7;break}return r.dataType="text",t.abrupt("return",e.parseTextSync(n,r,o,e));case 7:if(!Q(e,0,r)){t.next=11;break}return t.next=10,Z(e,n,r);case 10:return t.abrupt("return",t.sent);case 11:if(!e.parseText||"string"!==typeof n){t.next=15;break}return t.next=14,e.parseText(n,r,o,e);case 14:return t.abrupt("return",t.sent);case 15:if(!e.parse){t.next=19;break}return t.next=18,e.parse(n,r,o,e);case 18:return t.abrupt("return",t.sent);case 19:return Object(c.a)(!e.parseSync),t.abrupt("return",Object(c.a)(!1));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xt(t,e,n){return Et.apply(this,arguments)}function Et(){return(Et=Object(o.a)(i.a.mark((function t(e,n,r){var o,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(n)||Object(s.a)(n)||(r=n,n=null),o=Object(u.a)(r||{}),c=e,"string"!==typeof e){t.next=9;break}return t.next=6,o(e);case 6:c=t.sent,t.next=10;break;case 9:e=null;case 10:if(!Object(a.b)(e)){t.next=15;break}return t.next=13,o(e);case 13:c=t.sent,e=null;case 15:return t.next=17,At(c,n,r);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},function(t,e,n){"use strict";var r=n(4),i=n.n(r),o=n(11);function a(t,e){if(!t)throw new Error(e)}var s=n(192),u=s.a._parseImageNode,c="undefined"!==typeof Image,l="undefined"!==typeof ImageBitmap,f=Boolean(u),h=!!s.b||f;var p=n(22);function d(t){var e=y(t);if(!e)throw new Error("Not an image");return e}function g(t){switch(d(t)){case"data":return t;case"image":case"imagebitmap":var e=document.createElement("canvas"),n=e.getContext("2d");if(n)return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:return a(!1)}}function y(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===Object(p.a)(t)&&t.data&&t.width&&t.height?"data":null}var v=/^data:image\/svg\+xml/,m=/\.svg((\?|#).*)?$/;function A(t){return t&&(v.test(t)||m.test(t))}function b(t,e){if(A(e)){var n=(new TextDecoder).decode(t);return"data:image/svg+xml;base64,".concat(btoa(n))}return _(t,e)}function _(t,e){if(A(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function w(t,e,n){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function t(e,n,r){var o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=b(e,r),a=self.URL||self.webkitURL,s="string"!==typeof o&&a.createObjectURL(o),t.prev=3,t.next=6,E(s||o,n);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,s&&a.revokeObjectURL(s),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})))).apply(this,arguments)}function E(t,e){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new Image).src=e,!(n.image&&n.image.decode&&r.decode)){t.next=6;break}return t.next=5,r.decode();case 5:return t.abrupt("return",r);case 6:return t.next=8,new Promise((function(t,n){try{r.onload=function(){return t(r)},r.onerror=function(t){return n(new Error("Could not load image ".concat(e,": ").concat(t)))}}catch(i){n(i)}}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S={},T=!0;function P(t,e,n){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(i.a.mark((function t(e,n,r){var o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!A(r)){t.next=7;break}return t.next=3,w(e,n,r);case 3:a=t.sent,o=a,t.next=8;break;case 7:o=_(e,r);case 8:return s=n&&n.imagebitmap,t.next=11,C(o,s);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function t(e){var n,r=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R(n=r.length>1&&void 0!==r[1]?r[1]:null)&&T||(n=null),!n){t.next=13;break}return t.prev=3,t.next=6,createImageBitmap(e,n);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),console.warn(t.t0),T=!1;case 13:return t.next=15,createImageBitmap(e);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function R(t){for(var e in t||S)return!1;return!0}var k=n(129);function j(t,e){var n=(Object(k.a)(t)||{}).mimeType,r=s.a._parseImageNode;return a(r),r(t,n,e)}function L(){return(L=Object(o.a)(i.a.mark((function t(e,n,r){var o,s,u,c,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=(n=n||{}).image||{},s=o.type||"auto",u=(r||{}).url,c=N(s),t.t0=c,t.next="imagebitmap"===t.t0?8:"image"===t.t0?12:"data"===t.t0?16:20;break;case 8:return t.next=10,P(e,n,u);case 10:return l=t.sent,t.abrupt("break",21);case 12:return t.next=14,w(e,n,u);case 14:return l=t.sent,t.abrupt("break",21);case 16:return t.next=18,j(e,n);case 18:return l=t.sent,t.abrupt("break",21);case 20:a(!1);case 21:return"data"===s&&(l=g(l)),t.abrupt("return",l);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t){switch(t){case"auto":case"data":return function(){if(l)return"imagebitmap";if(c)return"image";if(h)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return l||c||h;case"imagebitmap":return l;case"image":return c;case"data":return h;case"html":return c;case"ndarray":return h;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}var D={id:"image",name:"Images",version:"2.3.7",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(t,e,n){return L.apply(this,arguments)},tests:[function(t){return Boolean(Object(k.a)(new DataView(t)))}],options:{image:{type:"auto",decode:!0}}};e.a=D},function(t,e,n){"use strict";n.d(e,"a",(function(){return Z}));var r,i=n(1),o=n(2),a=n(6),s=n(40),u=n(3),c=n(15),l=n(5),f=n(58),h=n(79),p=n(101),d=n(0),g=n(10),y=n(141),v=n(31),m=(r={},Object(d.a)(r,5126,k.bind(null,"uniform1fv",E,1,j)),Object(d.a)(r,35664,k.bind(null,"uniform2fv",E,2,j)),Object(d.a)(r,35665,k.bind(null,"uniform3fv",E,3,j)),Object(d.a)(r,35666,k.bind(null,"uniform4fv",E,4,j)),Object(d.a)(r,5124,k.bind(null,"uniform1iv",O,1,j)),Object(d.a)(r,35667,k.bind(null,"uniform2iv",O,2,j)),Object(d.a)(r,35668,k.bind(null,"uniform3iv",O,3,j)),Object(d.a)(r,35669,k.bind(null,"uniform4iv",O,4,j)),Object(d.a)(r,35670,k.bind(null,"uniform1iv",O,1,j)),Object(d.a)(r,35671,k.bind(null,"uniform2iv",O,2,j)),Object(d.a)(r,35672,k.bind(null,"uniform3iv",O,3,j)),Object(d.a)(r,35673,k.bind(null,"uniform4iv",O,4,j)),Object(d.a)(r,35674,k.bind(null,"uniformMatrix2fv",E,4,L)),Object(d.a)(r,35675,k.bind(null,"uniformMatrix3fv",E,9,L)),Object(d.a)(r,35676,k.bind(null,"uniformMatrix4fv",E,16,L)),Object(d.a)(r,35678,R),Object(d.a)(r,35680,R),Object(d.a)(r,5125,k.bind(null,"uniform1uiv",S,1,j)),Object(d.a)(r,36294,k.bind(null,"uniform2uiv",S,2,j)),Object(d.a)(r,36295,k.bind(null,"uniform3uiv",S,3,j)),Object(d.a)(r,36296,k.bind(null,"uniform4uiv",S,4,j)),Object(d.a)(r,35685,k.bind(null,"uniformMatrix2x3fv",E,6,L)),Object(d.a)(r,35686,k.bind(null,"uniformMatrix2x4fv",E,8,L)),Object(d.a)(r,35687,k.bind(null,"uniformMatrix3x2fv",E,6,L)),Object(d.a)(r,35688,k.bind(null,"uniformMatrix3x4fv",E,12,L)),Object(d.a)(r,35689,k.bind(null,"uniformMatrix4x2fv",E,8,L)),Object(d.a)(r,35690,k.bind(null,"uniformMatrix4x3fv",E,12,L)),Object(d.a)(r,35679,R),Object(d.a)(r,35682,R),Object(d.a)(r,36289,R),Object(d.a)(r,36292,R),Object(d.a)(r,36293,R),Object(d.a)(r,36298,R),Object(d.a)(r,36299,R),Object(d.a)(r,36300,R),Object(d.a)(r,36303,R),Object(d.a)(r,36306,R),Object(d.a)(r,36307,R),Object(d.a)(r,36308,R),Object(d.a)(r,36311,R),r),A={},b={},_={},w=[0];function x(t,e,n,r){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(w[0]=t,t=w);var i=t.length;if(i%e&&g.h.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=t[a];return o}function E(t,e){return x(t,e,Float32Array,A)}function O(t,e){return x(t,e,Int32Array,b)}function S(t,e){return x(t,e,Uint32Array,_)}function T(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function P(t,e,n){var r=m[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function M(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!C(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function C(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof h.a||(t instanceof y.a||t instanceof p.a&&Boolean(t.texture))))}function I(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e])for(var r=t[e],i=0,o=n.length;i<o;++i)r[i]=n[i];else t[e]=n.slice();else t[e]=n}function R(){var t=null;return function(e,n,r){var i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function k(t,e,n,r){var i=null,o=null;return function(a,s,u){var c=e(u,n),l=c.length,f=!1;if(null===i)i=new Float32Array(l),o=l,f=!0;else{Object(v.a)(o===l,"Uniform length cannot change.");for(var h=0;h<l;++h)if(c[h]!==i[h]){f=!0;break}}return f&&(r(a,t,s,c),i.set(c)),f}}function j(t,e,n,r){t[e](n,r)}function L(t,e,n,r){t[e](n,!1,r)}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function D(t,e,n,r){for(var i=t.split(/\r?\n/),o={},a={},s=r||N(e)||"(unnamed)",u="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),c=0;c<i.length;c++){var l=i[c];if(!(l.length<=1)){var f=l.split(":"),h=f[0],p=parseInt(f[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));"WARNING"!==h?o[p]=l:a[p]=l}}var d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((function(t,r){var o=r+e,a=String(o).length;return B(o,i-a)+n+t}))}(e);return{shaderName:u,errors:F(o,d),warnings:F(a,d)}}function F(t,e){for(var n="",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){var o=t[r+1],a=o.split(":",3),s=a[0],u=parseInt(a[1],10)||0,c=o.substring(a.join(":").length+1).trim();n+=B("^^^ ".concat(s,": ").concat(c,"\n\n"),u)}}return n}function B(t,e){for(var n="",r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}var z=n(97),U=n(143),G=function(t){function e(t,n){var r;Object(i.a)(this,e),Object(z.b)(t),Object(v.a)("string"===typeof n.source,"Shader: GLSL source code must be a JavaScript string");var o=N(n.source,null)||n.id||Object(U.c)("unnamed ".concat(e.getTypeName(n.shaderType)));return(r=Object(a.a)(this,Object(u.a)(e).call(this,t,{id:o}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(l.a)(e,t),Object(o.a)(e,null,[{key:"getTypeName",value:function(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(v.a)(!1),"unknown"}}}]),Object(o.a)(e,[{key:"initialize",value:function(t){var e=t.source,n=N(e,null);n&&(this.id=Object(U.c)(n)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(e.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return N(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL.debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var e=this.getParameter(35713);if(!e){var n=this.gl.getShaderInfoLog(this.handle),r=D(n,this.source,this.shaderType,this.id),i=r.shaderName,o=r.errors,a=r.warnings;throw g.h.error("GLSL compilation errors in ".concat(i,"\n").concat(o))(),g.h.warn("GLSL compilation warnings in ".concat(i,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),e}(f.a),V=function(t){function e(t,n){return Object(i.a)(this,e),"string"===typeof n&&(n={source:n}),Object(a.a)(this,Object(u.a)(e).call(this,t,Object.assign({},n,{shaderType:35633})))}return Object(l.a)(e,t),Object(o.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),e}(G),q=function(t){function e(t,n){return Object(i.a)(this,e),"string"===typeof n&&(n={source:n}),Object(a.a)(this,Object(u.a)(e).call(this,t,Object.assign({},n,{shaderType:35632})))}return Object(l.a)(e,t),Object(o.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),e}(G),H=n(90),W=n(114),X=function(){function t(e){Object(i.a)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(o.a)(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),o=i.name,a=i.type,s=i.size,u=e.getAttribLocation(t.handle,o);u>=0&&this._addAttribute(u,o,a,s)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(Object(g.g)(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),o=i.name,a=i.type,s=i.size;this._addVarying(r,o,a,s)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}}},{key:"_addAttribute",value:function(t,e,n,r){var i=Object(W.a)(n),o={type:i.type,size:r*i.components};this._inferProperties(t,e,o);var a={location:t,name:e,accessor:new H.a(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,n,r){var i=Object(W.a)(n),o=i.type,a=i.components,s={location:t,name:e,accessor:new H.a({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),t}(),Y=n(131),Q=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Z=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,e),(n=Object(a.a)(this,Object(u.a)(e).call(this,t,r))).stubRemovedMethods("Program","v6.0",Q),n._isCached=!1,n.initialize(r),Object.seal(Object(s.a)(n)),n._setId(r.id),n}return Object(l.a)(e,t),Object(o.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hash,n=t.vs,r=t.fs,i=t.varyings,o=t.bufferMode,a=void 0===o?35981:o;return this.hash=e||"",this.vs="string"===typeof n?new V(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new q(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,Object(v.a)(this.vs instanceof V),Object(v.a)(this.fs instanceof q),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,i&&i.length>0&&(Object(z.a)(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new X(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(c.a)(Object(u.a)(e.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}},{key:"draw",value:function(t){var e=this,n=t.logPriority,r=t.drawMode,i=void 0===r?4:r,o=t.vertexCount,a=t.offset,s=void 0===a?0:a,u=t.start,c=t.end,l=t.isIndexed,f=void 0!==l&&l,h=t.indexType,p=void 0===h?5123:h,d=t.instanceCount,y=void 0===d?0:d,m=t.isInstanced,A=void 0===m?y>0:m,b=t.vertexArray,_=void 0===b?null:b,w=t.transformFeedback,x=t.framebuffer,E=t.parameters,O=void 0===E?{}:E,S=t.uniforms,T=t.samplers;if((S||T)&&(g.h.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(S||{})),g.h.priority>=n){var P=x?x.id:"default",M="mode=".concat(Object(Y.a)(this.gl,i)," verts=").concat(o," ")+"instances=".concat(y," indexType=").concat(Object(Y.a)(this.gl,p)," ")+"isInstanced=".concat(A," isIndexed=").concat(f," ")+"Framebuffer=".concat(P);g.h.log(n,M)()}return Object(v.a)(_),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===o||A&&0===y)&&(_.bindForDraw(o,y,(function(){if(void 0!==x&&(O=Object.assign({},O,{framebuffer:x})),w){var t=Object(W.c)(i);w.begin(t)}e._bindTextures(),Object(g.l)(e.gl,O,(function(){f&&A?e.gl.drawElementsInstanced(i,o,p,s,y):f&&Object(g.g)(e.gl)&&!isNaN(u)&&!isNaN(c)?e.gl.drawRangeElements(i,u,c,o,p,s):f?e.gl.drawElements(i,o,p,s):A?e.gl.drawArraysInstanced(i,s,o,y):e.gl.drawArrays(i,s,o)})),w&&w.end()})),!0)}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in g.h.priority>=2&&M(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){var n=t[e],r=this._uniformSetters[e];if(r){var i=n,o=!1;if(i instanceof p.a&&(i=i.texture),i instanceof h.a)if(o=this.uniforms[e]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var a=i,s=r.textureIndex;a.bind(s),i=s,a.loaded||(this._texturesRenderable=!1),this._textureUniforms[e]=a}else i=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(i)||o)&&I(this.uniforms,e,n)}}return this}},{key:"_areTexturesRenderable",value:function(){if(this._texturesRenderable)return!0;for(var t in this._texturesRenderable=!0,this._textureUniforms){var e=this._textureUniforms[t];this._texturesRenderable=this._texturesRenderable&&e.loaded}return this._texturesRenderable}},{key:"_bindTextures",value:function(){for(var t in this._textureUniforms){var e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e=this.gl.getAttachedShaders(t),n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new V({handle:u});break;case 35632:n.fs=new q({handle:u})}}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=Object(U.c)(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),g.h.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),g.h.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||g.h.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=T(n.name),i=r.name,o=(r.isArray,t.getUniformLocation(this.handle,i));if(this._uniformSetters[i]=P(t,o,n),n.size>1)for(var a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=P(t,o,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl.uniformBlockBinding(this.handle,t,e)}}]),e}(f.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var r=n(1),i=n(2),o=n(12),a=n(254),s="void main() {gl_FragColor = vec4(0);}",u="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",c="#version 300 es\n".concat(u);function l(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),r=Object(o.a)(n,3),i=r[0],a=r[1],s=r[2];return e.includes(i)&&a&&s?{qualifier:i,type:a,name:s.split(";")[0]}:null}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,o=t.output;if(!r)return 300===n?c:n>300?"#version ".concat(n,"\n").concat(u):s;var a=p(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function h(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(a.a)(!1),null}}function p(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Object(a.a)(!1),null}}var d=n(10),g=n(53),y=n(645),v=n(31),m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(i.a)(t,[{key:"setupResources",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.bindings[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this._setupTransformFeedback(a,t)}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.varyings;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.transformFeedback,i=Object.assign({},n,t.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}},{key:"getBuffer",value:function(t){var e=this.bindings[this.currentIndex].feedbackBuffers,n=t?e[t]:null;return n?n instanceof g.a?n:n.buffer:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=this.getBuffer(e);return n?n.getData():null}},{key:"delete",value:function(){for(var t in this.resources)this.resources[t].delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(v.a)(Object(d.g)(this.gl))}},{key:"_getFeedbackBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?{}:e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var o=this.feedbackMap[i];i in n&&(r[o]=i)}for(var a in Object.assign(r,t.feedbackBuffers),r){var s=r[a];if("string"===typeof s){var u=n[s],c=u.byteLength,l=u.usage,f=u.accessor;r[a]=this._createNewBuffer(a,{byteLength:c,usage:l,accessor:f})}}return r}},{key:"_setupBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=void 0===e?null:e;Object.assign(this.feedbackMap,t.feedbackMap);var r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(t,e){var n=e.model.program;t.transformFeedback=new y.a(this.gl,{program:n,buffers:t.feedbackBuffers})}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){var e=this._swapBuffers(this.bindings[this.currentIndex]),n=e.sourceBuffers,r=e.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}},{key:"_swapBuffers",value:function(t){if(!this.feedbackMap)return null;var e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Object(v.a)(n[i]instanceof g.a)}return{sourceBuffers:e,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(t,e){var n=new g.a(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),t}(),A=n(0),b=n(307),_=n(167),w=n(101),x=n(390);function E(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var O,S=n(258),T={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},P="transform_uSampler_",M="transform_uSize_",C="transform_position";function I(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,o=Object.keys(n).length,s=null,u={},c=e,f={};if(o>0||r){var h=c.split("\n"),p=h.slice();if(h.forEach((function(t,e,i){if(o>0){var c=function(t,e){var n={},r=function(t){return l(t,["attribute","in"])}(t);if(!r)return null;var i=r.type,o=r.name;if(o&&e[o]){var s="// ".concat(t," => Replaced by Transform with a sampler"),u=function(t){var e="".concat(P).concat(t),n="".concat(M).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),c=u.samplerName,f=u.sizeName,h=u.uniformDeclerations,p=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(a.a)(!1),null}}(i),d="  ".concat(i," ").concat(o," = transform_getInput(").concat(c,", ").concat(f,").").concat(p,";\n");return n[c]=o,{updatedLine:s,inject:{"vs:#decl":h,"vs:#main-start":d},samplerTextureMap:n}}return null}(t,n);if(c){var h=c.updatedLine,d=c.inject;p[e]=h,f=Object(S.b)([f,d]),Object.assign(u,c.samplerTextureMap),o--}}r&&!s&&(s=function(t,e){var n=l(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){Object(v.a)(i);var d="".concat(M).concat(r),g={"vs:#decl":"uniform vec2 ".concat(d,";\n"),"vs:#main-start":"     vec2 ".concat(C," = transform_getPos(").concat(d,");\n     gl_Position = vec4(").concat(C,", 0, 1.);\n")};f=Object(S.b)([f,g])}c=p.join("\n")}return{vs:c,targetTextureType:s,inject:f,samplerTextureMap:u}}function R(t){var e,n,r=t.sourceTextureMap,i=t.targetTextureVarying,o=t.targetTexture,a={};for(var s in i&&(e=o.width,n=o.height,a["".concat(M).concat(i)]=[e,n]),r){var u=r[s];e=u.width,n=u.height,a["".concat(M).concat(s)]=[e,n]}return a}var k=(O={},Object(A.a)(O,10241,9728),Object(A.a)(O,10240,9728),Object(A.a)(O,10242,33071),Object(A.a)(O,10243,33071),O),j="transform_output",L=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(i.a)(t,[{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.sourceTextures,i=e.framebuffer,o=e.targetTexture,a=Object.assign({},n,t.attributes),s=Object.assign({},t.uniforms),u=Object.assign({},t.parameters),c=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var l in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var f=this.samplerTextureMap[l];s[l]=r[f]}this._setSourceTextureParameters();var h=R({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,h)}return this.hasTargetTexture&&(c=!1,u.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:c,parameters:u}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packed,n=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,i=Object(b.c)(r);if(!n)return i;for(var o=i.constructor,a=h(this.targetTextureType),s=new o(i.length*a/4),u=0,c=0;c<i.length;c+=4)for(var l=0;l<a;l++)s[u++]=i[c+l];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._targetTextureVarying,n=t._swapTexture;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}},{key:"_createTargetTexture",value:function(t){var e=t.sourceTextures,n=t.textureOrReference;if(n instanceof _.a)return n;var r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=t._sourceTextures,r=void 0===n?{}:n,i=t._targetTexture,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:r,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}},{key:"_updateElementIDBuffer",value:function(t){if(!("number"!==typeof t||this.elementCount>=t)){var e=new Float32Array(t);e.forEach((function(t,e,n){n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new g.a(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){var e=this._swapTextures(this.bindings[this.currentIndex]),n=e.sourceTextures,r=e.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(t,e){var n=e.sourceBuffers,r=e.sourceTextures,i=e.targetTexture;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;var o=i.width,a=i.height,s=t.framebuffer;s?(s.update({attachments:Object(A.a)({},36064,i),resizeAttachments:!1}),s.resize({width:o,height:a})):t.framebuffer=new w.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:o,height:a,attachments:Object(A.a)({},36064,i)})}return t}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex,e=this.bindings[t].sourceTextures;for(var n in e)e[n].setParameters(k)}},{key:"_swapTextures",value:function(t){if(!this._swapTexture)return null;var e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(t){var e,n=Object(x.a)(t,{parameters:(e={},Object(A.a)(e,10241,9728),Object(A.a)(e,10240,9728),Object(A.a)(e,10242,33071),Object(A.a)(e,10243,33071),e),pixelStore:Object(A.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.targetTexture,i=I({vs:t.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),o=i.vs,a=i.uniforms,s=i.targetTextureType,u=i.inject,c=i.samplerTextureMap,l=Object(S.b)([t.inject||{},u]);this.targetTextureType=s,this.samplerTextureMap=c;var h=t._fs||f({version:E(o),input:this.targetTextureVarying,inputType:s,output:j}),p=this.hasSourceTextures||this.targetTextureVarying?[T].concat(t.modules||[]):t.modules;return{vs:o,fs:h,modules:p,uniforms:a,inject:l}}}]),t}(),N=n(143),D=n(252),F=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(i.a)(t,null,[{key:"isSupported",value:function(t){return Object(d.g)(t)}}]),Object(i.a)(t,[{key:"delete",value:function(){var t=this.model,e=this.bufferTransform,n=this.textureTransform;t&&t.delete(),e&&e.delete(),n&&n.delete()}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRenderTarget,n=void 0===e||e,r=this._updateDrawOptions(t);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var t=!1,e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t=t||s.swap()}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}Object(v.a)(t,"Nothing to swap")}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getData(t);if(u)return u}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);var e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.update(t)}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new D.a(e,Object.assign({},t,{fs:t.fs||f({version:E(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){e=a.value.updateModelProps(e)}}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}},{key:"_buildResourceTransforms",value:function(t,e){(function(t){if(!Object(N.a)(t.feedbackBuffers)||!Object(N.a)(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new m(t,e)),function(t){if(!Object(N.a)(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new L(t,e)),Object(v.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;e=Object.assign(e,u.getDrawOptions(e))}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=n(1),i=n(2),o=n(40),a=n(5),s=n(6),u=n(3),c=n(8),l=n.n(c),f=n(14),h=n.n(f),p=n(378),d=n(113),g=n(18);function y(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}var v=n(86),m=n(153);function A(t){return t?"function"===typeof t?Object(c.createElement)(v.a,{},t):Array.isArray(t)?t.map(A):t.type===l.a.Fragment?A(t.props.children):(y(t.type,v.a),t):t}function b(t){var e=t.children,n=t.layers,r=t.views,i=[],o=[],a={};return l.a.Children.forEach(A(e),(function(t){if(t){var e=t.type;if(y(e,m.a)){var n=function(t,e){var n={},r=t.defaultProps||{};for(var i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);o.push(n)}else i.push(t);if(e!==v.a&&y(e,v.a)&&t.props.id){var r=new e(t.props);a[r.id]=r}}})),Object.keys(a).length>0&&(Array.isArray(r)?r.forEach((function(t){a[t.id]=t})):r&&(a[r.id]=r),r=Object.values(a)),{layers:n=o.length>0?[].concat(o,Object(g.a)(n)):n,children:i,views:r}}var _={position:"absolute",zIndex:-1};function w(t,e){return t?"function"===typeof t?t(e):Array.isArray(t)?t.map((function(t){return w(t,e)})):function(t){var e=t&&t.type,n=e&&e.defaultProps;return n&&n.mapStyle}(t)?(e.style=_,Object(c.cloneElement)(t,e)):function(t){var e=t&&t.type;return e&&e.deckGLViewProps}(t)?Object(c.cloneElement)(t,e):t:t}function x(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t){var e=t.children,n=(t.viewports,t.deck),r=t.ContextProvider,i=(n||{}).viewManager;if(!i||!i.views.length)return[];var o,a={},s=i.views[0].id,u=x(e);try{for(u.s();!(o=u.n()).done;){var l=o.value,f=s,h=l;y(l.type,v.a)&&(f=l.props.id||s,h=l.props.children);var p=i.getViewport(f),d=i.getViewState(f);if(p)h=w(h,{x:p.x,y:p.y,width:p.width,height:p.height,viewport:p,viewState:d}),a[f]||(a[f]={viewport:p,children:[]}),a[f].children.push(h)}}catch(m){u.e(m)}finally{u.f()}return Object.keys(a).map((function(t){var e=a[t],i=e.viewport,o=e.children,s={position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height},u="view-".concat(t),l=c.createElement.apply(void 0,["div",{key:u,id:u,style:s}].concat(Object(g.a)(o)));if(r){var f={viewport:i,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:function(e){e.viewId=t,n._onViewStateChange(e)}};return Object(c.createElement)(r,{key:u,value:f},l)}return l}))}var S={mixBlendMode:null};function T(t){var e=t.width,n=t.height,r=t.style,i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(r)for(var a in r)a in S?o[a]=r[a]:i[a]=r[a];return{containerStyle:i,canvasStyle:o}}function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var M=p.a.getPropTypes(h.a),C=p.a.defaultProps,I=function(t){Object(a.a)(n,t);var e=P(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).viewports=null,i.children=null,i._needsRedraw=null,i._containerRef=l.a.createRef(),i._canvasRef=l.a.createRef(),i.pickObject=i.pickObject.bind(Object(o.a)(i)),i.pickMultipleObjects=i.pickMultipleObjects.bind(Object(o.a)(i)),i.pickObjects=i.pickObjects.bind(Object(o.a)(i)),i._extractJSXLayers=Object(d.a)(b),i._positionChildrenUnderViews=Object(d.a)(O),i._extractStyles=Object(d.a)(T),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.Deck||p.a;this.deck=this.deck||new t(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(t){this._updateFromProps(t);var e=this.children!==this._parseJSX(t).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return e&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(t){return this.deck.pickObject(t)}},{key:"pickMultipleObjects",value:function(t){return this.deck.pickMultipleObjects(t)}},{key:"pickObjects",value:function(t){return this.deck.pickObjects(t)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(t){this._needsRedraw=t,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(t){return this._extractJSXLayers({layers:t.layers,views:t.views,children:t.children})}},{key:"_updateFromProps",value:function(t){var e=this._parseJSX(t),n=e.layers,r=e.views,i=Object.assign({},t,{style:null,width:"100%",height:"100%",layers:n,views:r});this.deck.setProps(i)}},{key:"render",value:function(){var t=this.props,e=t.ContextProvider,n=t.width,r=t.height,i=t.style,o=(this.deck||{}).viewManager;this.viewports=o&&o.getViewports(),this.children=this._parseJSX(this.props).children;var a=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:e}),s=this._extractStyles({width:n,height:r,style:i}),u=s.containerStyle,l=s.canvasStyle,f=Object(c.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:l});return Object(c.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:u},[f,a])}}]),n}(l.a.Component);I.propTypes=M,I.defaultProps=C},function(t,e,n){"use strict";n.d(e,"a",(function(){return at}));var r=n(7),i=n(16);function o(t){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:a(t)}]}}function a(t){if("number"===typeof t||"boolean"===typeof t||"string"===typeof t||"undefined"===typeof t||null===t)return null;if(Array.isArray(t))return a(t[0]);var e=[];return Object.keys(t).forEach((function(n){var r={kind:"Field",name:{kind:"Name",value:n},selectionSet:a(t[n])||void 0};e.push(r)})),{kind:"SelectionSet",selections:e}}var s,u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},c=function(){function t(){}return t.prototype.transformDocument=function(t){return t},t.prototype.transformForLink=function(t){return t},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!1),this.read({query:t.query,variables:t.variables,optimistic:e})},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!1),this.read({query:Object(i.k)(t.fragment,t.fragmentName),variables:t.variables,rootId:t.id,optimistic:e})},t.prototype.writeQuery=function(t){this.write({dataId:"ROOT_QUERY",result:t.data,query:t.query,variables:t.variables})},t.prototype.writeFragment=function(t){this.write({dataId:t.id,result:t.data,variables:t.variables,query:Object(i.k)(t.fragment,t.fragmentName)})},t.prototype.writeData=function(t){var e,n,r=t.id,i=t.data;if("undefined"!==typeof r){var s=null;try{s=this.read({rootId:r,optimistic:!1,query:u})}catch(f){}var c=s&&s.__typename||"__ClientData",l=Object.assign({__typename:c},i);this.writeFragment({id:r,fragment:(e=l,n=c,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:n||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:a(e)}]}),data:l})}else this.writeQuery({query:o(i),data:i})},t}();s||(s={});var l=n(120),f=null,h={},p=1,d="@wry/context:Slot",g=Array,y=g[d]||function(){var t=function(){function t(){this.id=["slot",p++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var t=f;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===h)break;return t!==f&&(f.slots[this.id]=e),!0}return f&&(f.slots[this.id]=h),!1},t.prototype.getValue=function(){if(this.hasValue())return f.slots[this.id]},t.prototype.withValue=function(t,e,n,r){var i,o=((i={__proto__:null})[this.id]=t,i),a=f;f={parent:a,slots:o};try{return e.apply(r,n)}finally{f=a}},t.bind=function(t){var e=f;return function(){var n=f;try{return f=e,t.apply(this,arguments)}finally{f=n}}},t.noContext=function(t,e,n){if(!f)return t.apply(n,e);var r=f;try{return f=null,t.apply(n,e)}finally{f=r}},t}();try{Object.defineProperty(g,d,{value:g[d]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();y.bind,y.noContext;function v(){}var m=function(){function t(t,e){void 0===t&&(t=1/0),void 0===e&&(e=v),this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.get=function(t){var e=this.getEntry(t);return e&&e.value},t.prototype.getEntry=function(t){var e=this.map.get(t);if(e&&e!==this.newest){var n=e.older,r=e.newer;r&&(r.older=n),n&&(n.newer=r),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=r)}return e},t.prototype.set=function(t,e){var n=this.getEntry(t);return n?n.value=e:(n={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(t,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(t){var e=this.map.get(t);return!!e&&(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0)},t}(),A=new y,b=[],_=[];function w(t,e){if(!t)throw new Error(e||"assertion failure")}function x(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}var E=function(){function t(e,n){this.fn=e,this.args=n,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(w(!this.recomputing,"already recomputing"),function(t){var e=A.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),S(t)?M(e,t):C(e,t),e}(this)||!R(this))return S(this)?function(t){var e=k(t);A.withValue(t,O,[t]),function(t){if("function"===typeof t.subscribe)try{L(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}(t)&&function(t){if(t.dirty=!1,S(t))return;P(t)}(t);return e.forEach(R),x(t.value)}(this):x(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,T(this),L(this))},t.prototype.dispose=function(){var t=this;k(this).forEach(R),L(this),this.parents.forEach((function(e){e.setDirty(),j(e,t)}))},t.count=0,t}();function O(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function S(t){return t.dirty||!(!t.dirtyChildren||!t.dirtyChildren.size)}function T(t){t.parents.forEach((function(e){return M(e,t)}))}function P(t){t.parents.forEach((function(e){return C(e,t)}))}function M(t,e){if(w(t.childValues.has(e)),w(S(e)),t.dirtyChildren){if(t.dirtyChildren.has(e))return}else t.dirtyChildren=_.pop()||new Set;t.dirtyChildren.add(e),T(t)}function C(t,e){w(t.childValues.has(e)),w(!S(e));var n=t.childValues.get(e);0===n.length?t.childValues.set(e,e.value.slice(0)):function(t,e){var n=t.length;return n>0&&n===e.length&&t[n-1]===e[n-1]}(n,e.value)||t.setDirty(),I(t,e),S(t)||P(t)}function I(t,e){var n=t.dirtyChildren;n&&(n.delete(e),0===n.size&&(_.length<100&&_.push(n),t.dirtyChildren=null))}function R(t){return 0===t.parents.size&&"function"===typeof t.reportOrphan&&!0===t.reportOrphan()}function k(t){var e=b;return t.childValues.size>0&&(e=[],t.childValues.forEach((function(n,r){j(t,r),e.push(r)}))),w(null===t.dirtyChildren),e}function j(t,e){e.parents.delete(t),t.childValues.delete(e),I(t,e)}function L(t){var e=t.unsubscribe;"function"===typeof e&&(t.unsubscribe=void 0,e())}var N=function(){function t(t){this.weakness=t}return t.prototype.lookup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lookupArray(t)},t.prototype.lookupArray=function(t){var e=this;return t.forEach((function(t){return e=e.getChildTrie(t)})),e.data||(e.data=Object.create(null))},t.prototype.getChildTrie=function(e){var n=this.weakness&&function(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(e);return r||n.set(e,r=new t(this.weakness)),r},t}();var D=new N("function"===typeof WeakMap);function F(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D.lookupArray(t)}var B=new Set;function z(t,e){void 0===e&&(e=Object.create(null));var n=new m(e.max||Math.pow(2,16),(function(t){return t.dispose()})),r=!!e.disposable,i=e.makeCacheKey||F;function o(){if(!r||A.hasValue()){var o=i.apply(null,arguments);if(void 0===o)return t.apply(null,arguments);var a=Array.prototype.slice.call(arguments),s=n.get(o);s?s.args=a:(s=new E(t,a),n.set(o,s),s.subscribe=e.subscribe,r&&(s.reportOrphan=function(){return n.delete(o)}));var u=s.recompute();return n.set(o,s),B.add(n),A.hasValue()||(B.forEach((function(t){return t.clean()})),B.clear()),r?void 0:u}}return o.dirty=function(){var t=i.apply(null,arguments),e=void 0!==t&&n.get(t);e&&e.setDirty()},o}var U=n(21),G=!1;function V(){var t=!G;return Object(i.y)()||(G=!0),t}var q=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(t,e,n){var r=n.store.get(t.id),i="ROOT_QUERY"===t.id;if(!r)return i;var o=r.__typename,a=void 0===o?i&&"Query":o;return a&&a===e||(V(),"heuristic")},t}(),H=(function(){function t(t){t&&t.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(t.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}t.prototype.match=function(t,e,n){Object(U.b)(this.isReady,1);var r=n.store.get(t.id),i="ROOT_QUERY"===t.id;if(!r)return i;var o=r.__typename,a=void 0===o?i&&"Query":o;if(Object(U.b)(a,2),a===e)return!0;var s=this.possibleTypesMap[e];return!!(a&&s&&s.indexOf(a)>-1)},t.prototype.parseIntrospectionResult=function(t){var e={};return t.__schema.types.forEach((function(t){"UNION"!==t.kind&&"INTERFACE"!==t.kind||(e[t.name]=t.possibleTypes.map((function(t){return t.name})))})),e}}(),Object.prototype.hasOwnProperty),W=function(){function t(t){var e=this;void 0===t&&(t=Object.create(null)),this.data=t,this.depend=z((function(t){return e.data[t]}),{disposable:!0,makeCacheKey:function(t){return t}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.depend(t),this.data[t]},t.prototype.set=function(t,e){e!==this.data[t]&&(this.data[t]=e,this.depend.dirty(t))},t.prototype.delete=function(t){H.call(this.data,t)&&(delete this.data[t],this.depend.dirty(t))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(t){var e=this;t?(Object.keys(t).forEach((function(n){e.set(n,t[n])})),Object.keys(this.data).forEach((function(n){H.call(t,n)||e.delete(n)}))):Object.keys(this.data).forEach((function(t){e.delete(t)}))},t}();function X(t){return new W(t)}var Y=function(){function t(t){var e=this,n=void 0===t?{}:t,r=n.cacheKeyRoot,o=void 0===r?new N(i.e):r,a=n.freezeResults,s=void 0!==a&&a,u=this,c=u.executeStoreQuery,l=u.executeSelectionSet,f=u.executeSubSelectedArray;this.freezeResults=s,this.executeStoreQuery=z((function(t){return c.call(e,t)}),{makeCacheKey:function(t){var e=t.query,n=t.rootValue,r=t.contextValue,i=t.variableValues,a=t.fragmentMatcher;if(r.store instanceof W)return o.lookup(r.store,e,a,JSON.stringify(i),n.id)}}),this.executeSelectionSet=z((function(t){return l.call(e,t)}),{makeCacheKey:function(t){var e=t.selectionSet,n=t.rootValue,r=t.execContext;if(r.contextValue.store instanceof W)return o.lookup(r.contextValue.store,e,r.fragmentMatcher,JSON.stringify(r.variableValues),n.id)}}),this.executeSubSelectedArray=z((function(t){return f.call(e,t)}),{makeCacheKey:function(t){var e=t.field,n=t.array,r=t.execContext;if(r.contextValue.store instanceof W)return o.lookup(r.contextValue.store,e,n,JSON.stringify(r.variableValues))}})}return t.prototype.readQueryFromStore=function(t){return this.diffQueryAgainstStore(Object(r.a)(Object(r.a)({},t),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(t){var e=t.store,n=t.query,r=t.variables,o=t.previousResult,a=t.returnPartialData,s=void 0===a||a,u=t.rootId,c=void 0===u?"ROOT_QUERY":u,f=t.fragmentMatcherFunction,h=t.config,p=Object(i.o)(n);r=Object(i.c)({},Object(i.h)(p),r);var d={store:e,dataIdFromObject:h&&h.dataIdFromObject,cacheRedirects:h&&h.cacheRedirects||{}},g=this.executeStoreQuery({query:n,rootValue:{type:"id",id:c,generated:!0,typename:"Query"},contextValue:d,variableValues:r,fragmentMatcher:f}),y=g.missing&&g.missing.length>0;return y&&!s&&g.missing.forEach((function(t){if(!t.tolerable)throw new U.a(8)})),o&&Object(l.a)(o,g.result)&&(g.result=o),{result:g.result,complete:!y}},t.prototype.executeStoreQuery=function(t){var e=t.query,n=t.rootValue,r=t.contextValue,o=t.variableValues,a=t.fragmentMatcher,s=void 0===a?Z:a,u=Object(i.l)(e),c=Object(i.j)(e),l={query:e,fragmentMap:Object(i.g)(c),contextValue:r,variableValues:o,fragmentMatcher:s};return this.executeSelectionSet({selectionSet:u.selectionSet,rootValue:n,execContext:l})},t.prototype.executeSelectionSet=function(t){var e=this,n=t.selectionSet,o=t.rootValue,a=t.execContext,s=a.fragmentMap,u=a.contextValue,c=a.variableValues,l={result:null},f=[],h=u.store.get(o.id),p=h&&h.__typename||"ROOT_QUERY"===o.id&&"Query"||void 0;function d(t){var e;return t.missing&&(l.missing=l.missing||[],(e=l.missing).push.apply(e,t.missing)),t.result}return n.selections.forEach((function(t){var n;if(Object(i.F)(t,c))if(Object(i.t)(t)){var l=d(e.executeField(h,p,t,a));"undefined"!==typeof l&&f.push(((n={})[Object(i.E)(t)]=l,n))}else{var g=void 0;if(Object(i.v)(t))g=t;else if(!(g=s[t.name.value]))throw new U.a(9);var y=g.typeCondition&&g.typeCondition.name.value,v=!y||a.fragmentMatcher(o,y,u);if(v){var m=e.executeSelectionSet({selectionSet:g.selectionSet,rootValue:o,execContext:a});"heuristic"===v&&m.missing&&(m=Object(r.a)(Object(r.a)({},m),{missing:m.missing.map((function(t){return Object(r.a)(Object(r.a)({},t),{tolerable:!0})}))})),f.push(d(m))}}})),l.result=Object(i.B)(f),this.freezeResults,l},t.prototype.executeField=function(t,e,n,r){var o=r.variableValues,a=r.contextValue,s=function(t,e,n,r,o,a){a.resultKey;var s=a.directives,u=n;(r||s)&&(u=Object(i.p)(u,r,s));var c=void 0;if(t&&"undefined"===typeof(c=t[u])&&o.cacheRedirects&&"string"===typeof e){var l=o.cacheRedirects[e];if(l){var f=l[n];f&&(c=f(t,r,{getCacheKey:function(t){var e=o.dataIdFromObject(t);return e&&Object(i.H)({id:e,typename:t.__typename})}}))}}if("undefined"===typeof c)return{result:c,missing:[{object:t,fieldName:u,tolerable:!1}]};Object(i.w)(c)&&(c=c.json);return{result:c}}(t,e,n.name.value,Object(i.b)(n,o),a,{resultKey:Object(i.E)(n),directives:Object(i.i)(n,o)});return Array.isArray(s.result)?this.combineExecResults(s,this.executeSubSelectedArray({field:n,array:s.result,execContext:r})):n.selectionSet?null==s.result?s:this.combineExecResults(s,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:s.result,execContext:r})):(Q(n,s.result),this.freezeResults,s)},t.prototype.combineExecResults=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){e.missing&&(t=t||[]).push.apply(t,e.missing)})),{result:e.pop().result,missing:t}},t.prototype.executeSubSelectedArray=function(t){var e,n=this,r=t.field,i=t.array,o=t.execContext;function a(t){return t.missing&&(e=e||[]).push.apply(e,t.missing),t.result}return i=i.map((function(t){return null===t?null:Array.isArray(t)?a(n.executeSubSelectedArray({field:r,array:t,execContext:o})):r.selectionSet?a(n.executeSelectionSet({selectionSet:r.selectionSet,rootValue:t,execContext:o})):(Q(r,t),t)})),this.freezeResults,{result:i,missing:e}},t}();function Q(t,e){if(!t.selectionSet&&Object(i.u)(e))throw new U.a(10)}function Z(){return!0}var K=function(){function t(t){void 0===t&&(t=Object.create(null)),this.data=t}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){this.data[t]=e},t.prototype.delete=function(t){this.data[t]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(t){this.data=t||Object.create(null)},t}();var J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="WriteError",e}return Object(r.c)(e,t),e}(Error);var $=function(){function t(){}return t.prototype.writeQueryToStore=function(t){var e=t.query,n=t.result,r=t.store,i=void 0===r?X():r,o=t.variables,a=t.dataIdFromObject,s=t.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:e,store:i,variables:o,dataIdFromObject:a,fragmentMatcherFunction:s})},t.prototype.writeResultToStore=function(t){var e=t.dataId,n=t.result,r=t.document,o=t.store,a=void 0===o?X():o,s=t.variables,u=t.dataIdFromObject,c=t.fragmentMatcherFunction,l=Object(i.m)(r);try{return this.writeSelectionSetToStore({result:n,dataId:e,selectionSet:l.selectionSet,context:{store:a,processedData:{},variables:Object(i.c)({},Object(i.h)(l),s),dataIdFromObject:u,fragmentMap:Object(i.g)(Object(i.j)(r)),fragmentMatcherFunction:c}})}catch(f){throw function(t,e){var n=new J("Error writing result to store for query:\n "+JSON.stringify(e));return n.message+="\n"+t.message,n.stack=t.stack,n}(f,r)}},t.prototype.writeSelectionSetToStore=function(t){var e=this,n=t.result,r=t.dataId,o=t.selectionSet,a=t.context,s=a.variables,u=a.store,c=a.fragmentMap;return o.selections.forEach((function(t){var o;if(Object(i.F)(t,s))if(Object(i.t)(t)){var u=Object(i.E)(t),l=n[u];if("undefined"!==typeof l)e.writeFieldToStore({dataId:r,value:l,field:t,context:a});else{var f=!1,h=!1;t.directives&&t.directives.length&&(f=t.directives.some((function(t){return t.name&&"defer"===t.name.value})),h=t.directives.some((function(t){return t.name&&"client"===t.name.value}))),!f&&!h&&a.fragmentMatcherFunction}}else{var p=void 0;Object(i.v)(t)?p=t:(p=(c||{})[t.name.value],Object(U.b)(p,3));var d=!0;if(a.fragmentMatcherFunction&&p.typeCondition){var g=r||"self",y=Object(i.H)({id:g,typename:void 0}),v={store:new K((o={},o[g]=n,o)),cacheRedirects:{}},m=a.fragmentMatcherFunction(y,p.typeCondition.name.value,v);Object(i.x)(),d=!!m}d&&e.writeSelectionSetToStore({result:n,selectionSet:p.selectionSet,dataId:r,context:a})}})),u},t.prototype.writeFieldToStore=function(t){var e,n,o,a=t.field,s=t.value,u=t.dataId,c=t.context,f=c.variables,h=c.dataIdFromObject,p=c.store,d=Object(i.G)(a,f);if(a.selectionSet&&null!==s)if(Array.isArray(s)){var g=u+"."+d;n=this.processArrayValue(s,g,a.selectionSet,c)}else{var y=u+"."+d,v=!0;if(tt(y)||(y="$"+y),h){var m=h(s);Object(U.b)(!m||!tt(m),4),(m||"number"===typeof m&&0===m)&&(y=m,v=!1)}nt(y,a,c.processedData)||this.writeSelectionSetToStore({dataId:y,result:s,selectionSet:a.selectionSet,context:c});var A=s.__typename;n=Object(i.H)({id:y,typename:A},v);var b=(o=p.get(u))&&o[d];if(b!==n&&Object(i.u)(b)){var _=void 0!==b.typename,w=void 0!==A,x=_&&w&&b.typename!==A;Object(U.b)(!v||b.generated||x,5),Object(U.b)(!_||w,6),b.generated&&(x?v||p.delete(b.id):et(b.id,n.id,p))}}else n=null!=s&&"object"===typeof s?{type:"json",json:s}:s;(o=p.get(u))&&Object(l.a)(n,o[d])||p.set(u,Object(r.a)(Object(r.a)({},o),((e={})[d]=n,e)))},t.prototype.processArrayValue=function(t,e,n,r){var o=this;return t.map((function(t,a){if(null===t)return null;var s=e+"."+a;if(Array.isArray(t))return o.processArrayValue(t,s,n,r);var u=!0;if(r.dataIdFromObject){var c=r.dataIdFromObject(t);c&&(s=c,u=!1)}return nt(s,n,r.processedData)||o.writeSelectionSetToStore({dataId:s,result:t,selectionSet:n,context:r}),Object(i.H)({id:s,typename:t.__typename},u)}))},t}();function tt(t){return"$"===t[0]}function et(t,e,n){if(t===e)return!1;var o=n.get(t),a=n.get(e),s=!1;Object.keys(o).forEach((function(t){var e=o[t],r=a[t];Object(i.u)(e)&&tt(e.id)&&Object(i.u)(r)&&!Object(l.a)(e,r)&&et(e.id,r.id,n)&&(s=!0)})),n.delete(t);var u=Object(r.a)(Object(r.a)({},o),a);return Object(l.a)(u,a)?s:(n.set(e,u),!0)}function nt(t,e,n){if(!n)return!1;if(n[t]){if(n[t].indexOf(e)>=0)return!0;n[t].push(e)}else n[t]=[e];return!1}var rt={fragmentMatcher:new q,dataIdFromObject:function(t){if(t.__typename){if(void 0!==t.id)return t.__typename+":"+t.id;if(void 0!==t._id)return t.__typename+":"+t._id}return null},addTypename:!0,resultCaching:!0,freezeResults:!1};var it=Object.prototype.hasOwnProperty,ot=function(t){function e(e,n,r){var i=t.call(this,Object.create(null))||this;return i.optimisticId=e,i.parent=n,i.transaction=r,i}return Object(r.c)(e,t),e.prototype.toObject=function(){return Object(r.a)(Object(r.a)({},this.parent.toObject()),this.data)},e.prototype.get=function(t){return it.call(this.data,t)?this.data[t]:this.parent.get(t)},e}(K),at=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new N(i.e),n.silenceBroadcast=!1,n.config=Object(r.a)(Object(r.a)({},rt),e),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new W:new K,n.optimisticData=n.data,n.storeWriter=new $,n.storeReader=new Y({cacheKeyRoot:n.cacheKeyRoot,freezeResults:e.freezeResults});var o=n,a=o.maybeBroadcastWatch;return n.maybeBroadcastWatch=z((function(t){return a.call(n,t)}),{makeCacheKey:function(t){if(!t.optimistic&&!t.previousResult)return o.data instanceof W?o.cacheKeyRoot.lookup(t.query,JSON.stringify(t.variables)):void 0}}),n}return Object(r.c)(e,t),e.prototype.restore=function(t){return t&&this.data.replace(t),this},e.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).toObject()},e.prototype.read=function(t){if("string"===typeof t.rootId&&"undefined"===typeof this.data.get(t.rootId))return null;var e=this.config.fragmentMatcher,n=e&&e.match;return this.storeReader.readQueryFromStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,rootId:t.rootId,fragmentMatcherFunction:n,previousResult:t.previousResult,config:this.config})||null},e.prototype.write=function(t){var e=this.config.fragmentMatcher,n=e&&e.match;this.storeWriter.writeResultToStore({dataId:t.dataId,result:t.result,variables:t.variables,document:this.transformDocument(t.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:n}),this.broadcastWatches()},e.prototype.diff=function(t){var e=this.config.fragmentMatcher,n=e&&e.match;return this.storeReader.diffQueryAgainstStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,returnPartialData:t.returnPartialData,previousResult:t.previousResult,fragmentMatcherFunction:n,config:this.config})},e.prototype.watch=function(t){var e=this;return this.watches.add(t),function(){e.watches.delete(t)}},e.prototype.evict=function(t){throw new U.a(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){for(var e=[],n=0,r=this.optimisticData;r instanceof ot;)r.optimisticId===t?++n:e.push(r),r=r.parent;if(n>0){for(this.optimisticData=r;e.length>0;){var i=e.pop();this.performTransaction(i.transaction,i.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(t,e){var n=this.data,r=this.silenceBroadcast;this.silenceBroadcast=!0,"string"===typeof e&&(this.data=this.optimisticData=new ot(e,this.optimisticData,t));try{t(this)}finally{this.silenceBroadcast=r,this.data=n}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(t,e){return this.performTransaction(t,e)},e.prototype.transformDocument=function(t){if(this.addTypename){var e=this.typenameDocumentCache.get(t);return e||(e=Object(i.a)(t),this.typenameDocumentCache.set(t,e),this.typenameDocumentCache.set(e,e)),e}return t},e.prototype.broadcastWatches=function(){var t=this;this.silenceBroadcast||this.watches.forEach((function(e){return t.maybeBroadcastWatch(e)}))},e.prototype.maybeBroadcastWatch=function(t){t.callback(this.diff({query:t.query,variables:t.variables,previousResult:t.previousResult&&t.previousResult(),optimistic:t.optimistic}))},e}(c)},function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(7),i=n(107),o=n(66),a=n(76),s=n(251);function u(t){return Object(a.b)(t,{leave:c})}var c={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return f(t.definitions,"\n\n")+"\n"},OperationDefinition:function(t){var e=t.operation,n=t.name,r=p("(",f(t.variableDefinitions,", "),")"),i=f(t.directives," "),o=t.selectionSet;return n||i||r||"query"!==e?f([e,f([n,r]),i,o]," "):o},VariableDefinition:function(t){var e=t.variable,n=t.type,r=t.defaultValue,i=t.directives;return e+": "+n+p(" = ",r)+p(" ",f(i," "))},SelectionSet:function(t){return h(t.selections)},Field:function(t){var e=t.alias,n=t.name,r=t.arguments,i=t.directives,o=t.selectionSet;return f([p("",e,": ")+n+p("(",f(r,", "),")"),f(i," "),o]," ")},Argument:function(t){return t.name+": "+t.value},FragmentSpread:function(t){return"..."+t.name+p(" ",f(t.directives," "))},InlineFragment:function(t){var e=t.typeCondition,n=t.directives,r=t.selectionSet;return f(["...",p("on ",e),f(n," "),r]," ")},FragmentDefinition:function(t){var e=t.name,n=t.typeCondition,r=t.variableDefinitions,i=t.directives,o=t.selectionSet;return"fragment ".concat(e).concat(p("(",f(r,", "),")")," ")+"on ".concat(n," ").concat(p("",f(i," ")," "))+o},IntValue:function(t){return t.value},FloatValue:function(t){return t.value},StringValue:function(t,e){var n=t.value;return t.block?Object(s.b)(n,"description"===e?"":"  "):JSON.stringify(n)},BooleanValue:function(t){return t.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){return t.value},ListValue:function(t){return"["+f(t.values,", ")+"]"},ObjectValue:function(t){return"{"+f(t.fields,", ")+"}"},ObjectField:function(t){return t.name+": "+t.value},Directive:function(t){return"@"+t.name+p("(",f(t.arguments,", "),")")},NamedType:function(t){return t.name},ListType:function(t){return"["+t.type+"]"},NonNullType:function(t){return t.type+"!"},SchemaDefinition:function(t){var e=t.directives,n=t.operationTypes;return f(["schema",f(e," "),h(n)]," ")},OperationTypeDefinition:function(t){return t.operation+": "+t.type},ScalarTypeDefinition:l((function(t){return f(["scalar",t.name,f(t.directives," ")]," ")})),ObjectTypeDefinition:l((function(t){var e=t.name,n=t.interfaces,r=t.directives,i=t.fields;return f(["type",e,p("implements ",f(n," & ")),f(r," "),h(i)]," ")})),FieldDefinition:l((function(t){var e=t.name,n=t.arguments,r=t.type,i=t.directives;return e+(y(n)?p("(\n",d(f(n,"\n")),"\n)"):p("(",f(n,", "),")"))+": "+r+p(" ",f(i," "))})),InputValueDefinition:l((function(t){var e=t.name,n=t.type,r=t.defaultValue,i=t.directives;return f([e+": "+n,p("= ",r),f(i," ")]," ")})),InterfaceTypeDefinition:l((function(t){var e=t.name,n=t.directives,r=t.fields;return f(["interface",e,f(n," "),h(r)]," ")})),UnionTypeDefinition:l((function(t){var e=t.name,n=t.directives,r=t.types;return f(["union",e,f(n," "),r&&0!==r.length?"= "+f(r," | "):""]," ")})),EnumTypeDefinition:l((function(t){var e=t.name,n=t.directives,r=t.values;return f(["enum",e,f(n," "),h(r)]," ")})),EnumValueDefinition:l((function(t){return f([t.name,f(t.directives," ")]," ")})),InputObjectTypeDefinition:l((function(t){var e=t.name,n=t.directives,r=t.fields;return f(["input",e,f(n," "),h(r)]," ")})),DirectiveDefinition:l((function(t){var e=t.name,n=t.arguments,r=t.repeatable,i=t.locations;return"directive @"+e+(y(n)?p("(\n",d(f(n,"\n")),"\n)"):p("(",f(n,", "),")"))+(r?" repeatable":"")+" on "+f(i," | ")})),SchemaExtension:function(t){var e=t.directives,n=t.operationTypes;return f(["extend schema",f(e," "),h(n)]," ")},ScalarTypeExtension:function(t){return f(["extend scalar",t.name,f(t.directives," ")]," ")},ObjectTypeExtension:function(t){var e=t.name,n=t.interfaces,r=t.directives,i=t.fields;return f(["extend type",e,p("implements ",f(n," & ")),f(r," "),h(i)]," ")},InterfaceTypeExtension:function(t){var e=t.name,n=t.directives,r=t.fields;return f(["extend interface",e,f(n," "),h(r)]," ")},UnionTypeExtension:function(t){var e=t.name,n=t.directives,r=t.types;return f(["extend union",e,f(n," "),r&&0!==r.length?"= "+f(r," | "):""]," ")},EnumTypeExtension:function(t){var e=t.name,n=t.directives,r=t.values;return f(["extend enum",e,f(n," "),h(r)]," ")},InputObjectTypeExtension:function(t){var e=t.name,n=t.directives,r=t.fields;return f(["extend input",e,f(n," "),h(r)]," ")}};function l(t){return function(e){return f([e.description,t(e)],"\n")}}function f(t,e){return t?t.filter((function(t){return t})).join(e||""):""}function h(t){return t&&0!==t.length?"{\n"+d(f(t,"\n"))+"\n}":""}function p(t,e,n){return e?t+e+(n||""):""}function d(t){return t&&"  "+t.replace(/\n/g,"\n  ")}function g(t){return-1!==t.indexOf("\n")}function y(t){return t&&t.some(g)}var v=n(21),m={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},A=function(t,e,n){var r=new Error(n);throw r.name="ServerError",r.response=t,r.statusCode=t.status,r.result=e,r},b=function(t,e){var n;try{n=JSON.stringify(t)}catch(i){var r=new v.a(2);throw r.parseError=i,r}return n},_=function(t){void 0===t&&(t={});var e=t.uri,n=void 0===e?"/graphql":e,a=t.fetch,s=t.includeExtensions,c=t.useGETForQueries,l=Object(r.e)(t,["uri","fetch","includeExtensions","useGETForQueries"]);!function(t){if(!t&&"undefined"===typeof fetch)throw new v.a(1)}(a),a||(a=fetch);var f={http:{includeExtensions:s},options:l.fetchOptions,credentials:l.credentials,headers:l.headers};return new i.a((function(t){var e=function(t,e){return t.getContext().uri||("function"===typeof e?e(t):e||"/graphql")}(t,n),s=t.getContext(),l={};if(s.clientAwareness){var h=s.clientAwareness,p=h.name,d=h.version;p&&(l["apollographql-client-name"]=p),d&&(l["apollographql-client-version"]=d)}var g,y=Object(r.a)({},l,s.headers),v={http:s.http,options:s.fetchOptions,credentials:s.credentials,headers:y},_=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=Object(r.a)({},e.options,{headers:e.headers,credentials:e.credentials}),a=e.http;n.forEach((function(t){o=Object(r.a)({},o,t.options,{headers:Object(r.a)({},o.headers,t.headers)}),t.credentials&&(o.credentials=t.credentials),a=Object(r.a)({},a,t.http)}));var s=t.operationName,c=t.extensions,l=t.variables,f=t.query,h={operationName:s,variables:l};return a.includeExtensions&&(h.extensions=c),a.includeQuery&&(h.query=u(f)),{options:o,body:h}}(t,m,f,v),w=_.options,x=_.body;if(!w.signal){var E=function(){if("undefined"===typeof AbortController)return{controller:!1,signal:!1};var t=new AbortController;return{controller:t,signal:t.signal}}(),O=E.controller,S=E.signal;(g=O)&&(w.signal=S)}if(c&&!t.query.definitions.some((function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation}))&&(w.method="GET"),"GET"===w.method){var T=function(t,e){var n=[],r=function(t,e){n.push(t+"="+encodeURIComponent(e))};"query"in e&&r("query",e.query);e.operationName&&r("operationName",e.operationName);if(e.variables){var i=void 0;try{i=b(e.variables)}catch(M){return{parseError:M}}r("variables",i)}if(e.extensions){var o=void 0;try{o=b(e.extensions)}catch(M){return{parseError:M}}r("extensions",o)}var a="",s=t,u=t.indexOf("#");-1!==u&&(a=t.substr(u),s=t.substr(0,u));var c=-1===s.indexOf("?")?"?":"&";return{newURI:s+c+n.join("&")+a}}(e,x),P=T.newURI,M=T.parseError;if(M)return Object(i.c)(M);e=P}else try{w.body=b(x)}catch(M){return Object(i.c)(M)}return new o.a((function(n){var r;return a(e,w).then((function(e){return t.setContext({response:e}),e})).then((r=t,function(t){return t.text().then((function(e){try{return JSON.parse(e)}catch(r){var n=r;return n.name="ServerParseError",n.response=t,n.statusCode=t.status,n.bodyText=e,Promise.reject(n)}})).then((function(e){return t.status>=300&&A(t,e,"Response not successful: Received status code "+t.status),Array.isArray(e)||e.hasOwnProperty("data")||e.hasOwnProperty("errors")||A(t,e,"Server response was missing for query '"+(Array.isArray(r)?r.map((function(t){return t.operationName})):r.operationName)+"'."),e}))})).then((function(t){return n.next(t),n.complete(),t})).catch((function(t){"AbortError"!==t.name&&(t.result&&t.result.errors&&t.result.data&&n.next(t.result),n.error(t))})),function(){g&&g.abort()}}))}))};var w=function(t){function e(e){return t.call(this,_(e).request)||this}return Object(r.c)(e,t),e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(22),i=n(4),o=n.n(i),a=n(11),s=n(1),u=n(2),c=n(10),l=n(198),f=n(31),h=n(6),p=n(3),d=n(40),g=n(5),y=n(58),v=n(631),m=n(301),A=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,e),(n=Object(h.a)(this,Object(p.a)(e).call(this,t,r))).target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(Object(d.a)(n)),n}return Object(g.a)(e,t),Object(u.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(c.g)(t),r=Object(v.c)(t,m.a.TIMER_QUERY),i=n||r,o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;switch(h){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:Object(f.a)(!1)}}}catch(p){a=!0,s=p}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return i}}]),Object(u.a)(e,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.conservative,n=void 0!==e&&e;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(t){return this._queryPending||(this.target=t,this.gl.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var t=this.gl.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(36795)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function o(){t.isResultAvailable()?(r(t.getResult()),t._pollingPromise=null):n++>e?(i("Timed out"),t._pollingPromise=null):requestAnimationFrame(o)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return e.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),e}(y.a);function b(t){return"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var _=n(101),w=n(36),x=Object(w.isBrowser)()&&"undefined"!==typeof document,E=0,O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t);var n=e.onCreateContext,r=void 0===n?function(t){return Object(c.a)(t)}:n,i=e.onAddHTML,o=void 0===i?null:i,a=e.onInitialize,u=void 0===a?function(){}:a,f=e.onRender,h=void 0===f?function(){}:f,p=e.onFinalize,d=void 0===p?function(){}:p,g=e.onError,y=e.gl,v=void 0===y?null:y,m=e.glOptions,A=void 0===m?{}:m,b=e.debug,_=void 0!==b&&b,w=e.createFramebuffer,x=void 0!==w&&w,O=e.autoResizeViewport,S=void 0===O||O,T=e.autoResizeDrawingBuffer,P=void 0===T||T,M=e.stats,C=void 0===M?l.a.get("animation-loop-".concat(E++)):M,I=e.useDevicePixels,R=void 0===I||I;"useDevicePixelRatio"in e&&(c.h.deprecated("useDevicePixelRatio","useDevicePixels")(),R=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:o,onInitialize:u,onRender:h,onFinalize:d,onError:g,gl:v,glOptions:A,debug:_,createFramebuffer:x},this.gl=v,this.needsRedraw=null,this.timeline=null,this.stats=C,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:S,autoResizeDrawingBuffer:P,useDevicePixels:R}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return Object(u.a)(t,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(t){return Object(f.a)("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var n=this._getPageLoadPromise().then((function(){return!t._running||t._initialized?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t._gpuTimeQuery=A.isSupported(t.gl,["timers"])?new A(t.gl):null,t._initialized=!0,t.onInitialize(t.animationProps))})).then((function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}));return this.props.onError&&n.catch(this.props.onError),this}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),b(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(t){return this.timeline=t,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var t=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(e){t._resolveNextFrame=e}))),this._nextFramePromise}},{key:"toDataURL",value:function(){var t=Object(a.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setNeedsRedraw("toDataURL"),t.next=3,this.waitForRender();case 3:return t.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return c.h.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var t=this;b(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function e(){t._running&&(t.redraw(),t._animationFrameId=t._requestAnimationFrame(e))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=x?new Promise((function(t,e){x&&"complete"===document.readyState?t(document):window.addEventListener("load",(function(){t(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}},{key:"_requestAnimationFrame",value:function(t){var e;this.display&&this.display.requestAnimationFrame(t)||(e=t,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60))}},{key:"_renderFrame",value:function(){var t;this.display?(t=this.display)._renderFrame.apply(t,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===Object(r.a)(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Object(c.e)(this.props.gl,t):this.onCreateContext(t),!Object(c.f)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(c.i)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&Object(c.j)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new _.a(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var t=this.gl.canvas;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}()},function(t,e,n){"use strict";var r=n(197);e.a={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[r.a]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(197),i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",o={name:"gouraud-lighting",dependencies:[r.a],vs:i,defines:{LIGHTING_VERTEX:1},getUniforms:c},a={name:"phong-lighting",dependencies:[r.a],fs:i,defines:{LIGHTING_FRAGMENT:1},getUniforms:c},s={};function u(t){var e=t.ambient,n=void 0===e?.35:e,r=t.diffuse,i=void 0===r?.6:r,o=t.shininess,a=void 0===o?32:o,s=t.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:i,lighting_uShininess:a,lighting_uSpecularColor:(void 0===s?[30,30,30]:s).map((function(t){return t/255}))}}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!("material"in t))return{};var e=t.material;return e?u(e):{lighting_uEnabled:!1}}}]]);
//# sourceMappingURL=2.340f1d88.chunk.js.map